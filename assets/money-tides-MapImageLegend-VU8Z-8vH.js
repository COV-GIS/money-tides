import{aD as y,aE as t,m as u,c as v}from"./money-tides-jsxFactory-C_VNtWho.js";import"./money-tides-config-BVnrMf5g.js";import{af as x}from"./money-tides-app-config-c6vRzV27.js";import"./index-DrjIDhyp.js";import"./money-tides-index-Bz5uSspo.js";import"./money-tides-runtime-BTGwkf2p.js";import"./money-tides-ReactiveMap-wsdEhGtW.js";import"./money-tides-messageBundle-CtjrMz3Y.js";import"./money-tides-index-BSQMl5Dg.js";var w=Object.defineProperty,$=Object.getOwnPropertyDescriptor,h=(a,s,l,r)=>{for(var e=r>1?void 0:r?$(s,l):s,n=a.length-1,o;n>=0;n--)(o=a[n])&&(e=(r?o(s,l,e):o(e))||e);return r&&e&&w(s,l,e),e};let d=class extends y{constructor(a){super(a),this.error=!1,this.items=new x}async postInitialize(){const a=this.layer,{allSublayers:s,url:l}=a;try{const r=await(await fetch(`${l}/legend?f=json`)).json();s.forEach(e=>{const{id:n,sublayers:o,title:c}=e;if(o)return;const m=r.layers.find(p=>p.layerId===n);if(m)if(m.legend.length>1){const p=m.legend.map(i=>t("div",{style:"display: flex; flex-direction: row; align-items: center; gap: 0.5rem;"},t("img",{alt:i.label,style:`width: $${i.width}px; height: ${i.height}px;`,src:`data:${i.contentType};base64,${i.imageData}`}),t("div",null,i.label)));this.items.push(t("div",{style:"display: flex; flex-direction: column; gap: 0.5rem;"},t("div",{style:"font-weight: var(--calcite-font-weight-medium);"},c),p))}else{const{contentType:p,height:i,imageData:g,width:f}=m.legend;this.items.push(t("div",{style:"display: flex; flex-direction: row; align-items: center; gap: 0.5rem;"},t("img",{alt:c,style:`width: $${f}px; height: ${i}px;`,src:`data:${p};base64,${g}`}),t("div",null,c)))}})}catch(r){console.log("map image legend",r),this.error=!0}}render(){return t("div",{style:"display: flex; flex-direction: column; gap: 0.5rem; font-size: var(--calcite-font-size-sm);"},this.items.toArray())}};h([u()],d.prototype,"error",2);d=h([v("MapImageLegend")],d);export{d as default};
