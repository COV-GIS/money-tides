import{B as h,a as s,dC as f,je as D,n as l,m as v,b as m}from"./index-DTpXn2Pv.js";var g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,d=(e,n,a,i)=>{for(var t=i>1?void 0:i?y(n,a):n,o=e.length-1,c;o>=0;o--)(c=e[o])&&(t=(i?c(n,a,t):c(t))||t);return i&&t&&g(n,a,t),t};const _="declination-popover",P={content:`${_}_content`};let r=class extends h{constructor(e){super(e),this.date=s.date,this.declination="Set your compass to ???."}get container(){return this._container}set container(e){this._container=e}postInitialize(){this.updateDeclination(),this.addHandles(f(()=>s.date,this.updateDeclination.bind(this)))}async updateDeclination(){try{this.declination=`Set your compass to ${(await D(this.date,44.927,-124.013)).bearing}.`}catch(e){console.log("declination update",e),this.declination="An error occurred computing declination."}}render(){return l("calcite-popover",{"auto-close":"",class:_,closable:!0,heading:"Declination","overlay-positioning":"fixed",placement:"leading",scale:s.scale,"reference-element":this.referenceElementId},l("div",{class:P.content},this.declination))}};d([v()],r.prototype,"date",2);d([v()],r.prototype,"declination",2);r=d([m("DeclinationPopover")],r);var b=Object.getOwnPropertyDescriptor,S=(e,n,a,i)=>{for(var t=i>1?void 0:i?b(n,a):n,o=e.length-1,c;o>=0;o--)(c=e[o])&&(t=c(t)||t);return t};const p="money-tides-declination-MDKHhMeEQm";let u=class extends h{constructor(e){super(e),this.declinationPopover=new r({container:document.createElement("calcite-popover"),referenceElementId:p})}get container(){return this._container}set container(e){this._container=e}postInitialize(){this.onClick&&this.container.addEventListener("click",this.onClick);const e=document.querySelector("calcite-shell");if(!e)return;const{declinationPopover:n}=this;e.appendChild(n.container)}render(){return l("calcite-action",{icon:"explore",id:p,scale:s.scale,text:"Declination"})}};u=S([m("AboutAction")],u);export{u as default};
