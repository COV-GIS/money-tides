const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/money-tides-ElevationLayer-ClpE7ppO.js","assets/index-CXYhGA5b.js","assets/index-CEPnQygF.css","assets/money-tides-jsxFactory-Bi29TlcS.js","assets/money-tides-config-Dy31BTur.js","assets/money-tides-index-Bz5uSspo.js","assets/money-tides-runtime-BTGwkf2p.js","assets/runtime-OCMtRbrJ.css","assets/money-tides-ArcGISCachedService-DJ6OKkJF.js","assets/money-tides-TileInfoTilemapCache-s6YclcSG.js","assets/money-tides-TilemapCache-21cqrn9f.js","assets/money-tides-WorkerHandle-rwsXKz76.js","assets/money-tides-ReactiveMap--SkC3kWW.js","assets/money-tides-messageBundle-CHZSgPji.js","assets/money-tides-index-BSQMl5Dg.js","assets/money-tides-resourceUtils-DIsE7pCo.js","assets/money-tides-arcgisLayers-CBlS9ete.js","assets/money-tides-ElevationQuery-br3l12nw.js","assets/money-tides-GeometryDescriptor-_ZHozEwd.js","assets/money-tides-projectOperator-qH5k0kEB.js","assets/money-tides-operatorProject-BlUzsOO4.js","assets/money-tides-SimpleGeometryCursor-B92kdZ15.js","assets/money-tides-projectOperator-DbObHpj1.js","assets/money-tides-geographicTransformationUtils-CCmAZtwI.js","assets/money-tides-statsWorker-rWOyJblk.js","assets/money-tides-utils-DA5NP_1r.js","assets/money-tides-quantizationUtils-BlEAcHs_.js","assets/money-tides-utils-DUuNpamL.js","assets/money-tides-utils-ClfK8-lY.js","assets/money-tides-ClassBreaksDefinition-DW66a9LG.js","assets/money-tides-geometryEngineWorker-CHAqrl2R.js","assets/money-tides-geometryEngineJSON-54zXaibM.js","assets/money-tides-geometryEngineBase-DmwRqPrZ.js","assets/money-tides-_commonjsHelpers-DCkdB7M8.js","assets/money-tides-operatorsWorker-CxDehxsG.js","assets/money-tides-CSVSourceWorker-DALybmlv.js","assets/money-tides-date-DCujAECq.js","assets/money-tides-FeatureStore-DaiLAWoy.js","assets/money-tides-BoundsStore-B5DBo6IB.js","assets/money-tides-PooledRBush-DjKqmbju.js","assets/money-tides-timeSupport-CRLY3KY0.js","assets/money-tides-queryUtils-d5CWunwt.js","assets/money-tides-optimizedFeatureQueryEngineAdapter-DjWHzWYv.js","assets/money-tides-QueryEngine-tZuwn39_.js","assets/money-tides-WhereClauseCache-CRc1pwP3.js","assets/money-tides-WhereClause-fqPP-kae.js","assets/money-tides-QueryEngineCapabilities-DJC_YILC.js","assets/money-tides-SnappingCandidate-DGkpYqI6.js","assets/money-tides-FixedIntervalBinParameters-DsP2d6Wu.js","assets/money-tides-number-DRrDGIvl.js","assets/money-tides-locationUtils-BL8sNmhR.js","assets/money-tides-clientSideDefaults-6CbivqUw.js","assets/money-tides-EdgeProcessingWorker-lJBHGZpy.js","assets/money-tides-workerHelper-CER_mcc-.js","assets/money-tides-InterleavedLayout-MmZ5wArG.js","assets/money-tides-BufferView-B0N-xyQs.js","assets/money-tides-types-BKo2foNY.js","assets/money-tides-VertexElementDescriptor-BLyltQyJ.js","assets/money-tides-VertexAttributeLocations-BfZbt_DV.js","assets/money-tides-edgeProcessing-CSC5RoWP.js","assets/money-tides-deduplicate-Dgz8YT_b.js","assets/money-tides-Indices-C3hmj6q-.js","assets/money-tides-Normals-CDLiUt-c.js","assets/money-tides-ElevationSamplerWorker-doIx_-Yk.js","assets/money-tides-MeshLocalVertexSpace-DdU_kn2O.js","assets/money-tides-vertexSpaceConversion-_Fu0cfo8.js","assets/money-tides-spatialReferenceEllipsoidUtils-B-6Udhq1.js","assets/money-tides-computeTranslationToOriginAndRotation-DhGXJwns.js","assets/money-tides-projectPointToVector-B4knNRHP.js","assets/money-tides-meshVertexSpaceUtils-BsVoncRh.js","assets/money-tides-vec3-B9ZMIRAe.js","assets/money-tides-vec4-C4f39vha.js","assets/money-tides-FeatureServiceSnappingSourceWorker-6hmLvOQc.js","assets/money-tides-symbologySnappingCandidates-BTSNQEM8.js","assets/money-tides-GeoJSONSourceWorker-JJtk7gBL.js","assets/money-tides-geojson-j86fGEol.js","assets/money-tides-sourceUtils-7B9Hh55F.js","assets/money-tides-LercWorker-D3WeqzBT.js","assets/money-tides-MemorySourceWorker-CpBgHAvG.js","assets/money-tides-objectIdUtils-BmFjqQA3.js","assets/money-tides-PBFDecoderWorker-BKd3_jIr.js","assets/money-tides-dehydratedFeatures-Cq4ITgLN.js","assets/money-tides-FeaturePipelineWorker-24uQsQiT.js","assets/money-tides-AttributeStore-BeyaUObD.js","assets/money-tides-Utils-VS3zVpei.js","assets/money-tides-BoundingBox-DvhYkhVc.js","assets/money-tides-UpdateTracking2D-quIMkZcZ.js","assets/money-tides-FeatureStoreQueryAdapter-BUnSas5T.js","assets/money-tides-labelPoint-BwMH0D5X.js","assets/money-tides-constants-BBnGEY1d.js","assets/money-tides-streamLayerUtils-DFlbJ4P1.js","assets/money-tides-MeshWriterRegistry-B94YoA1H.js","assets/money-tides-rasterizingUtils-Cs3jqgcO.js","assets/money-tides-CIMSymbolHelper-DCZx6RN-.js","assets/money-tides-BidiEngine-BvER9tXK.js","assets/money-tides-GeometryUtils-DqJp5sVT.js","assets/money-tides-Rect-CUzevAry.js","assets/money-tides-TexturedLineMeshWriter-Ddw5bYv1.js","assets/money-tides-TurboLine-CEXQe7K8.js","assets/money-tides-grouping-AQcYUvhv.js","assets/money-tides-QueueProcessor-BKTPauK4.js","assets/money-tides-FeatureMetadata-Tb8gADOh.js","assets/money-tides-SourceChunkStore-CuugD3-J.js","assets/money-tides-parquet-BJsce22Y.js","assets/money-tides-operatorGeodeticDensify-TP_cF_oF.js","assets/money-tides-geodeticCurveType-CirnHLSB.js","assets/money-tides-normalizeUtilsSync-DVyCfwvB.js","assets/money-tides-FeatureIdInfo-BV4rBZA0.js","assets/money-tides-ogcFeatureUtils-QtHIef-t.js","assets/money-tides-CircularArray-CujHzHWW.js","assets/money-tides-createConnection-BuUi1z3V.js","assets/money-tides-PointCloudWorker-DncuUaSI.js","assets/money-tides-quat-3YKhjCHf.js","assets/money-tides-quatf64-aQ5IuZRd.js","assets/money-tides-vec3f32-WCVSSNPR.js","assets/money-tides-PointCloudUniqueValueRenderer-DnLd1Seo.js","assets/money-tides-I3SBinaryReader-CNT_NZQJ.js","assets/money-tides-orientedBoundingBox-D1dTiiWH.js","assets/money-tides-plane-BE_-UK4q.js","assets/money-tides-vectorStacks-Gdvmsgbp.js","assets/money-tides-RasterWorker-Cr8sHy4f.js","assets/money-tides-PixelBlock-C_B4xzd2.js","assets/money-tides-RasterSymbolizer-5K2yTaG3.js","assets/money-tides-vectorFieldUtils-CSFTrJUg.js","assets/money-tides-colorUtils-BtRwEnmG.js","assets/money-tides-rasterFunctionHelper-DmpeWuj-.js","assets/money-tides-clipUtils-TGOa3IJR.js","assets/money-tides-rasterProjectionHelper-Bdm3hkN1.js","assets/money-tides-PolynomialTransform-Jrx1mW7z.js","assets/money-tides-dataUtils-BFPsXcl7.js","assets/money-tides-SceneLayerSnappingSourceWorker-XDF4WowI.js","assets/money-tides-lineSegment-D-jA7xVz.js","assets/money-tides-sphere-BdpQ3nx_.js","assets/money-tides-Octree-DwXn5ZTN.js","assets/money-tides-frustum-CLSRd4vk.js","assets/money-tides-SceneLayerWorker-CHdH_sxU.js","assets/money-tides-projectVectorToVector-gtW5nStG.js","assets/money-tides-WFSSourceWorker-DDCpqvrw.js","assets/money-tides-wfsUtils-BqGeOFCN.js","assets/money-tides-xmlUtils-CtUoQO7q.js","assets/money-tides-WorkerTileHandler-DpxJMNZX.js","assets/money-tides-constants-BHYAGdRm.js","assets/money-tides-config-BOD8--da.js","assets/money-tides-SourceLayerData-PSFNRJmt.js","assets/money-tides-StyleRepository-bPIigKgh.js","assets/money-tides-earcut-D9gy186-.js","assets/money-tides-Lyr3DWorker-C0tR1H0M.js","assets/money-tides-Feature3DPipelineWorker-BUq6fplg.js","assets/money-tides-HUDMaterial.glsl-DKPBU_Mg.js","assets/money-tides-hydratedFeatures-1iE2oDMO.js","assets/money-tides-OutputColorHighlightOID.glsl-BhyqChdR.js","assets/money-tides-triangle-ClvKfgFL.js","assets/money-tides-renderState-CKc66y4x.js","assets/money-tides-glsl-B5bJgrnA.js","assets/money-tides-ShaderBuilder-SlqCXBjA.js","assets/money-tides-placementUtils-DACJfRra.js","assets/money-tides-sdfPrimitives-rRvY4qEF.js","assets/money-tides-Texture-C4TZdS59.js","assets/money-tides-videoUtils-CuzRIYjL.js","assets/money-tides-requestImageUtils-9vZ0IIay.js","assets/money-tides-RealisticTree.glsl-kCgEbvx1.js","assets/money-tides-DefaultMaterial-LNaKHoTV.js","assets/money-tides-VertexBuffer-DTiS0Dsl.js","assets/money-tides-BufferObject-knkCcuMo.js","assets/money-tides-boundedPlane-5hszhT8o.js","assets/money-tides-TextureCompressionWorker-CQYb0Q7G.js","assets/money-tides-FlowWorker-CoFXV-tS.js","assets/money-tides-ParquetSourceWorker-B3YUlk2e.js","assets/money-tides-parquetUtils-BkjHAt57.js","assets/money-tides-PanoramicMeshWorker-Drd9HujK.js","assets/money-tides-Popup-DyfiWb22.js","assets/money-tides-throttle-BGyOujYN.js","assets/money-tides-substitute-DPHbe9vG.js","assets/money-tides-unitFormatUtils-DYUg7oho.js","assets/money-tides-quantityUtils-C1PkinOd.js","assets/money-tides-AttachmentInfo-BqJ00JuH.js","assets/money-tides-featureUtils-DCfm_kBl.js","assets/money-tides-utils-Dm3r2j1p.js","assets/money-tides-cimSymbolUtils-RrYPtB3y.js","assets/money-tides-shared-5P9b-ZgB.js","assets/money-tides-isImageryGraphicOrigin-Ccuhb4eK.js","assets/money-tides-isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/money-tides-NetworkElement-CcJOSrJc.js","assets/money-tides-ReactiveSet-B1cB6w1p.js","assets/money-tides-symbolUtils-DwEQMZ2L.js","assets/money-tides-layerViewUtils-BYY9IZap.js","assets/money-tides-arcadeUtils-C1-MEIjA.js","assets/money-tides-arcade-CiPz75qK.js","assets/money-tides-arcadeEnvironment-BuIqKTKi.js","assets/money-tides-Dictionary-C7QDJXxw.js","assets/money-tides-ImmutableArray-BPVd6ESQ.js","assets/money-tides-Feature-BEdCZwZl.js","assets/money-tides-aiServices-poD-6luj.js","assets/money-tides-commonProperties-DHiB1uzW.js","assets/money-tides-unitConversion-B9yXl25M.js","assets/money-tides-rasterFieldUtils-B1wYKFLv.js","assets/money-tides-batchExec-B5uqFbo8.js","assets/money-tides-webStyleSymbolUtils-DXO_Lg5l.js","assets/money-tides-devEnvironmentUtils-8WtPGj6h.js","assets/money-tides-geometryServiceUtils-3QeW4WGR.js","assets/money-tides-project-BIjMjRqh.js","assets/money-tides-IdentityManager-B-eAacVC.js","assets/money-tides-webglDeps-Q4hh_CJf.js","assets/money-tides-FramebufferObject-BVJjSeg4.js","assets/money-tides-ProgramTemplate-BNTxhT9k.js","assets/money-tides-VertexArrayObject-DzBVAMV2.js","assets/money-tides-mapViewDeps-khFEIV7E.js","assets/money-tides-FeatureCommandQueue-CoYo708X.js","assets/money-tides-GraphShaderModule-DmMWID_m.js","assets/money-tides-utils-DuIwHLgh.js","assets/money-tides-WGLContainer-XIMz27Zc.js","assets/money-tides-Container-HSguRe5n.js","assets/money-tides-SDFHelper-GREcnryR.js","assets/money-tides-OverrideHelper-CK3ryWwX.js","assets/money-tides-callExpressionWithFeature-D52fDb95.js","assets/money-tides-GridShader-1J9Ux1T0.js","assets/money-tides-testSVGPremultipliedAlpha-BNN7DGg9.js","assets/money-tides-SymbolFader-5FHfavLq.js","assets/money-tides-RenderingContext-DhlOjLDs.js","assets/money-tides-CIMResourceManager-CkiRtH-G.js","assets/money-tides-utils-D6uVnd1p.js","assets/money-tides-utils-DDjZAYSk.js","assets/money-tides-GraphicsView2D-CUQOECHG.js","assets/money-tides-GraphicContainer-DaUjp0mP.js","assets/money-tides-AGraphicContainer-DzjCg7ir.js","assets/money-tides-TechniqueInstance-CtjuXCV8.js","assets/money-tides-TileContainer-vpplY2b2.js","assets/money-tides-gridUtils-CyUQdhkq.js","assets/money-tides-geodesicUtils-DBnweDO0.js","assets/money-tides-TileLayerView2D--LYTFsZ7.js","assets/money-tides-imageUtils-CCGizG80.js","assets/money-tides-BitmapTechnique-Dq6nr06K.js","assets/money-tides-bitmapUtils-Cb9Khd85.js","assets/money-tides-LayerView2D-B1qpJzuN.js","assets/money-tides-HighlightGraphicContainer-C9L7oSl7.js","assets/money-tides-LayerView-DTkFUZ01.js","assets/money-tides-RefreshableLayerView-SQGpqurD.js","assets/money-tides-MapServiceLayerViewHelper-CaQ1rX-d.js","assets/money-tides-drapedUtils-CFhJ1GFA.js","assets/money-tides-popupUtils-BkSbhYiV.js","assets/money-tides-highlightOptionsUtils-DM963u18.js","assets/money-tides-FeatureLayerView2D-C-jC0xQx.js","assets/money-tides-timeSupport-DOxAOMM1.js","assets/money-tides-AttributeBinsFeatureSet-CBECoF6x.js","assets/money-tides-AttributeBinsQuery-CtXJBo89.js","assets/money-tides-constants-SxxbBSOD.js","assets/money-tides-BaseDynamicLayerView2D-BYmG2IJY.js","assets/money-tides-BitmapContainer-CcysmoHJ.js","assets/money-tides-ExportStrategy-BZq7X0lj.js","assets/money-tides-CatalogLayerView2D-BIYsGB1V.js","assets/money-tides-CatalogDynamicGroupLayerView2D-1eqTJsT0.js","assets/money-tides-CatalogFootprintLayerView2D-xSqPGqJD.js","assets/money-tides-GeoRSSLayerView2D-BJtpM15t.js","assets/money-tides-GraphicsLayerView2D-BZtx1t7f.js","assets/money-tides-GroupLayerView2D-BC3pBZWX.js","assets/money-tides-ImageryLayerView2D-Dr-pKBgU.js","assets/money-tides-RasterVFDisplayObject-sEST7g7X.js","assets/money-tides-ImageryTileLayerView2D-C_Hzi--f.js","assets/money-tides-datasetUtils-DqYrNF3W.js","assets/money-tides-rasterUtils--MrT2FTS.js","assets/money-tides-RawBlockCache-CGU6dXe3.js","assets/money-tides-KMLLayerView2D-C-Amwz7d.js","assets/money-tides-kmlUtils-DNfebCu8.js","assets/money-tides-KnowledgeGraphLayerView2D-Dm12Z8oC.js","assets/money-tides-MapImageLayerView2D-BX10BYNQ.js","assets/money-tides-MapNotesLayerView2D-ChaslipR.js","assets/money-tides-MediaLayerView2D-CQMn9NN5.js","assets/money-tides-mediaLayerUtils-dD6HK5NW.js","assets/money-tides-OverlayContainer-D61539Eu.js","assets/money-tides-OGCFeatureLayerView2D-BRLkp4fK.js","assets/money-tides-RouteLayerView2D-D5szSd9Y.js","assets/money-tides-Stop-BNknjbcm.js","assets/money-tides-networkEnums-DjLYtYvf.js","assets/money-tides-StreamLayerView2D-C1pjISUp.js","assets/money-tides-SubtypeGroupLayerView2D-ZBxVaZft.js","assets/money-tides-VectorTileLayerView2D-BmGKML6e.js","assets/money-tides-VideoLayerView2D-CyB5Q5gQ.js","assets/money-tides-videoUtils-BVHTkEFQ.js","assets/money-tides-ControlPoint-DsXoTRPM.js","assets/money-tides-WMSLayerView2D-BtazaDw_.js","assets/money-tides-WMTSLayerView2D-DPZKBRBt.js","assets/money-tides-ElevationProfileAnalysisView2D-BhpUqflb.js","assets/money-tides-createUtils-BI_8mnBy.js","assets/money-tides-distanceOperator-B5vthkDh.js","assets/money-tides-Point2D-BcD_ruOp.js","assets/money-tides-Distance2DCalculator-CXhBP-8I-CLLkcYyW.js","assets/money-tides-ProjectionTransformation-i8fsyL0P.js","assets/money-tides-Envelope2D-BqkCDX9b.js","assets/money-tides-Transformation2D-BzyNYhyU.js","assets/money-tides-OperatorDefinitions-DP7_WWTp.js","assets/money-tides-apiConverter-NBC3Imij.js","assets/money-tides-jsonConverter-DYrPnSG9.js","assets/money-tides-simplifyOperator-C_YiLRVT.js","assets/money-tides-operatorSimplify-BszCli3y.js","assets/money-tides-mapCollectionUtils-C764lJye.js","assets/money-tides-elevationInfoUtils-Da5Wdn8f.js","assets/money-tides-getDefaultUnitForView-Cug5nX4I.js","assets/money-tides-SketchViewModel-DARR9WIh.js","assets/money-tides-hitTestSelectUtils-v7kwCIHs.js","assets/money-tides-geodeticLengthOperator-DCDLeCWk.js","assets/money-tides-gif-C-HzhJTN.js","assets/money-tides-apng-DV_fKoow.js","assets/money-tides-index-COCgdyfT.js","assets/money-tides-index-D44g9SR5.js","assets/money-tides-guid-LcV_DAvu.js","assets/money-tides-useT9n-_S9Wh01E.js","assets/money-tides-index-DnqcUTcK.js","assets/money-tides-index-FX0Z4iUl.js","assets/money-tides-dom-DGbC30yI.js","assets/money-tides-observers-CypYlo3s.js","assets/money-tides-ref-B89gjfep.js","assets/money-tides-static-CCv3ApTo.js","assets/money-tides-form-Dn9HCXZK.js","assets/money-tides-interactive-DEY5T2bo.js","assets/money-tides-label--1x421TG.js","assets/money-tides-useSetFocus-CO6-X0k3.js","assets/money-tides-deleteForwardEdits-DTaQSfE3.js","assets/money-tides-DeleteForwardEditsParameters-1pcGD-bZ.js","assets/money-tides-editingSupport-BcT3Ul76.js","assets/money-tides-layersLoader-DutP-fjV.js","assets/money-tides-jsonContext-DRdjuIS3.js","assets/money-tides-featureLayerUtils-B5kLZkl9.js","assets/money-tides-originUtils-DTGPoAxx.js","assets/money-tides-utils-DbK23MIC.js","assets/money-tides-FeatureLayerSource-w9B3xgck.js","assets/money-tides-External-DQfpLNXh.js","assets/money-tides-MeshTransform-Co2rexV_.js","assets/money-tides-axisAngleDegrees-BkLdLFmd.js","assets/money-tides-PivotQuery-DikvnS0T.js","assets/money-tides-TopFeaturesQuery-BIqKiPrN.js","assets/money-tides-meshFeatureSet-Cqpk2fMJ.js","assets/money-tides-Mesh-DQPVO-P9.js","assets/money-tides-MeshComponent-DEnPkFmy.js","assets/money-tides-meshProperties-DWLWd_LJ.js","assets/money-tides-MeshVertexAttributes-B2FLXBfc.js","assets/money-tides-triangulationUtils-BpAO_14D.js","assets/money-tides-meshFeatureAttributes-2vpTzn3u.js","assets/money-tides-executeRelationshipQuery-CKvERNvp.js","assets/money-tides-queryAttachments-D9nyjEQT.js","assets/money-tides-executeAttributeBinsQuery-jE7t3OWK.js","assets/money-tides-executePivotQuery-21reBFbF.js","assets/money-tides-executeTopFeaturesQuery-DKv8udFw.js","assets/money-tides-queryTopFeatures-CPBNT0ne.js","assets/money-tides-executeForTopIds-Vqwm-u0q.js","assets/money-tides-executeForTopExtents-DlaIMwAq.js","assets/money-tides-executeForTopCount-G1tNlHoO.js","assets/money-tides-mapImageLayerUtils-g4e-YVax.js","assets/money-tides-BingMapsLayer-BdY0X1hZ.js","assets/money-tides-BuildingSceneLayer-CMwvxBpH.js","assets/money-tides-capabilities-Cs4k8cuT.js","assets/money-tides-SceneService-DYAtQrKI.js","assets/money-tides-resourceUtils-CpbIxGhL.js","assets/money-tides-I3SLayerDefinitions-BsAqB_q7.js","assets/money-tides-I3SUtil-DliaxKzq.js","assets/money-tides-edgeUtils-CrQ0Dw6g.js","assets/money-tides-CSVLayer-Cr9sE3SY.js","assets/money-tides-CatalogLayer-Rq9DgaYt.js","assets/money-tides-DimensionLayer-CIpMcVDt.js","assets/money-tides-Analysis-UnR556_P.js","assets/money-tides-GaussianSplatLayer-a8X9Mqna.js","assets/money-tides-tiles3DUtils-C7UOLSas.js","assets/money-tides-GeoJSONLayer-CvmpUd0x.js","assets/money-tides-GeoRSSLayer-Buf-uXSQ.js","assets/money-tides-ImageryLayer-BPhm04zm.js","assets/money-tides-RasterJobHandlerMixin-C7kGHz4f.js","assets/money-tides-RasterPresetRendererMixin-mCrfm_76.js","assets/money-tides-ImageryTileLayer-CqSzbu72.js","assets/money-tides-xmlUtilities-Bv4Z-RLT.js","assets/money-tides-IntegratedMesh3DTilesLayer-Dkf7qVO2.js","assets/money-tides-SceneModifications-B2jpiN8P.js","assets/money-tides-IntegratedMeshLayer-eHSaK0Xq.js","assets/money-tides-KMLLayer-C9JgEzbz.js","assets/money-tides-KnowledgeGraphLayer-B-EFroJ3.js","assets/money-tides-KnowledgeGraphSublayer-DFBwVxz8.js","assets/money-tides-knowledgeGraphService-nv4XxrQa.js","assets/money-tides-GPMessage-CYrf02Vp.js","assets/money-tides-GraphQueryStreaming-HF4J54bO.js","assets/money-tides-LineOfSightLayer-R4yUIFFV.js","assets/money-tides-featureReferenceUtils-Cgulq-cl.js","assets/money-tides-LinkChartLayer-BVKciuD-.js","assets/money-tides-MapNotesLayer-Cv6D3GXD.js","assets/money-tides-MediaLayer-COhB5_05.js","assets/money-tides-OGCFeatureLayer-CNbg85M2.js","assets/money-tides-OpenStreetMapLayer-BvAupyJj.js","assets/money-tides-WebTileLayer-DL4L6rSw.js","assets/money-tides-OrientedImageryLayer-BQhqwCjm.js","assets/money-tides-ParquetLayer-DpZeCecm.js","assets/money-tides-PointCloudLayer-DBXwa0l6.js","assets/money-tides-RouteLayer-BOvEPHhz.js","assets/money-tides-SceneLayer-CYGmLtMI.js","assets/money-tides-meshSpatialReferenceScaleUtils-DXKmYddi.js","assets/money-tides-StreamLayer-CtxVen8U.js","assets/money-tides-SubtypeGroupLayer-Cs1MAhQ9.js","assets/money-tides-TileLayer-CvFplQGz.js","assets/money-tides-UnknownLayer-DefYJIPv.js","assets/money-tides-UnsupportedLayer-Dpn-7H_B.js","assets/money-tides-VectorTileLayer-B4qcHRCP.js","assets/money-tides-VideoLayer-Btb9v9sP.js","assets/money-tides-ViewshedLayer-DkjOjyMN.js","assets/money-tides-VoxelLayer-DPDzBcwY.js","assets/money-tides-WCSLayer-CuE2EQR-.js","assets/money-tides-WFSLayer-BDwrgeYM.js","assets/money-tides-WMTSLayer-DFCJTwDr.js","assets/money-tides-groupLayerUtils-DRsil7rZ.js"])))=>i.map(i=>d[i]);
import{a1 as N2,a,w as Yr,cw as fl,Y as me,X as Zr,B as m5,x as wh,aB as D2,ca as hs,c as _,m as u,aC as vs,u as g5,s as I,b8 as ml,cx as v5,T as p_,aG as Z,t as Rc,n as Je,f as nr,cy as w5,aQ as mt,E as Ol,aa as Wt,aR as ve,i as N,b as xe,aV as Ur,j as be,a2 as st,cz as fR,e as Ce,a6 as nt,ad as Gs,v as Mt,ai as Bn,H as Te,cA as mf,at as Xc,c4 as mR,y as Cc,cB as gR,bf as b5,_ as Ua,cC as vR,bL as Qn,bM as gl,Q as Gd,Z as Re,c3 as Lc,cD as wR,cE as bh,cb as d_,bm as h_,k as vi,I as Qs,a7 as X,a9 as vr,cF as gf,b0 as G9,cG as _5,cg as y_,ap as ht,bQ as Jr,bF as j2,U as f_,cH as bR,as as Bd,ar as Di,c5 as _R,b6 as S5,bk as x5,cI as SR,R as $5,V as vl,cJ as xR,cK as $R,bP as vf,O as B9,ao as _h,C as Tr,a4 as zi,cL as m_,aU as T5,$ as ta,aS as I5,cM as TR,bc as H9,a8 as lr,a3 as Ui,b5 as W9,cN as g_,cO as Z9,cp as kc,cP as IR,cQ as MR,cR as J9,cS as ER,aJ as M5,cT as PR,aN as OR,cU as RR,bv as v_,cV as CR,z as LR,b1 as Hd,cW as w_,bj as Wd,bt as b_,o as __,aF as Q9,bZ as kR,bu as Sh,b2 as AR,cX as FR,al as xh,cY as NR,aw as DR,cZ as $h,p as Zo,bX as Pp,br as jR,aT as E5,aP as VR,c_ as zR,c$ as UR,d0 as qR,ae as Zd,d1 as N4,D as We,aM as Ri,bq as ci,bp as GR,cr as BR,au as S_,bh as HR,d2 as K9,d3 as WR,d4 as ZR,cn as JR,d5 as QR,aD as V2,aE as Br,bB as P5,d6 as KR,bG as YR,d7 as XR,d8 as wf,aq as n2,bD as Y9,d9 as X9,a0 as eC,bl as tC,da as rC,bd as iC,db as z2,aW as sC,by as nC,dc as oC,dd as aC,g as x_,az as D4,de as lC,df as uC,c2 as $_,dg as cC,dh as pC,aH as U2,di as dC,aY as hC,aZ as yC,A as fC,a5 as e8,dj as mC,am as gC,c7 as vC,a_ as wC}from"./money-tides-jsxFactory-Bi29TlcS.js";import{_ as R}from"./index-CXYhGA5b.js";import{b as P,a as ie,s as Hr,D as bC,f as T_,Z as j4,_ as _C,$ as SC,h as I_,l as bf,n as Kr,y as M_,m as E_,N as wi,d as t8,L as P_,o as O_,a0 as xC,a1 as q2,a2 as R_}from"./money-tides-config-Dy31BTur.js";import{b as C_,a as Jd,r as Ac,s as Bu}from"./money-tides-ReactiveMap--SkC3kWW.js";import{n as F,a as Rl,s as $C,e as G2,t as TC,u as IC,g as MC,b as L_,d as EC}from"./money-tides-messageBundle-CHZSgPji.js";const k_="20251114",A_="ec088c999de2dac6fb9478a47da1bad775545540";function O5(t){return(e,r)=>{e[r]=t}}var on;let PC=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},OC=class{constructor(e,r,i,s,n){this.target=e,this.added=r,this.removed=i,this.start=s,this.deleteCount=n}};const xi=new D2(()=>new PC,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function r8(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function V4(t){return t?t instanceof Mo?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function z4(t){if(t?.length)return t[0]}function RC(t,e,r,i){const s=Math.min(t.length-r,e.length-i);let n=0;for(;n<s&&t[r+n]===e[i+n];)n++;return n}function F_(t,e,r,i){e&&e.forEach((s,n,o)=>{t.push(s),F_(t,r.call(i,s,n,o),r,i)})}const oo=new Set,ao=new Set,lo=new Set,U4=new Map;let CC=0,Mo=on=class extends N2{static ofType(t){if(!t)return on;if(U4.has(t))return U4.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const i in t.typeMap){const s=t.typeMap[i].prototype.declaredClass;e?e+=` | ${s}`:e=s}let r=class extends on{};return a([O5({Type:t,ensureType:typeof t=="function"?Yr(t):fl(t)})],r.prototype,"itemType",void 0),r=a([_(`esri.core.Collection<${e}>`)],r),U4.set(t,r),r}static isCollection(t){return t!=null&&t instanceof on}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new C_,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:CC++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof on?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return me(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,V4(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Zr();if(t==="change"){const r=this._chgListeners,i={removed:!1,callback:e};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Zr(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return super.on(t,e)}once(t,e){const r="deref"in e?()=>e.deref():()=>e,i=this.on(t,s=>{r()?.call(null,s),i.remove()});return i}add(t,e){if(me(this._observable),this._emitBeforeChanges(1))return this;const r=this.getNextIndex(e??null);return this._splice(r,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(me(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(e);return this._splice(r,0,V4(t)),this._emitAfterChanges(1),this}at(t){if(me(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(me(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return me(this._observable),this._createNewInstance({items:this._items.map(P)})}concat(...t){me(this._observable);const e=t.map(V4);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(me(this._observable),!this.length||this._emitBeforeChanges(2))return;const r=this._splice(0,this.length),i=r.length;for(let s=0;s<i;s++)t.call(e,r[s],s,r);this._emitAfterChanges(2)}destroyAll(){this.drain(r8)}destroyMany(t){const e=this.removeMany(t);return e.forEach(r8),e}every(t,e){return me(this._observable),this._items.every(t,e)}filter(t,e){me(this._observable);const r=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:r})}find(t,e){return me(this._observable),this._items.find(t,e)}findIndex(t,e){return me(this._observable),this._items.findIndex(t,e)}flatten(t,e){me(this._observable);const r=[];return F_(r,this,t,e),new on(r)}forEach(t,e){return me(this._observable),this._items.forEach(t,e)}getItemAt(t){return me(this._observable),this._items[t]}getNextIndex(t){me(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return me(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return me(this._observable),this._items.indexOf(t,e)}join(t=","){return me(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return me(this._observable),this._items.lastIndexOf(t,e)}map(t,e){me(this._observable);const r=this._items.map(t,e);return new on({items:r})}reorder(t,e=this.length-1){me(this._observable);const r=this.indexOf(t);if(r!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),r!==e){if(this._emitBeforeChanges(4))return t;this._splice(r,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(me(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=z4(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return me(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){me(this._observable);const r=this._items;return arguments.length===2?r.reduce(t,e):r.reduce(t)}reduceRight(t,e){me(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(t,e):r.reduceRight(t)}remove(t){return me(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(me(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=z4(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(me(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof on?t.toArray():t,r=this._items,i=[],s=e.length;for(let n=0;n<s;n++){const o=e[n],l=r.indexOf(o);if(l>-1){const c=1+RC(e,r,n+1,l+1),d=this._splice(l,c);d&&d.length>0&&i.push.apply(i,d),n+=c-1}}return this._emitAfterChanges(2),i}reverse(){if(me(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(me(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=z4(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return me(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return me(this._observable),this._items.some(t,e)}sort(t){if(me(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,r)=>e===r?0:e<r?-1:1){const e=this.length-1;for(let r=0;r<e;r++)if(t(this.items[r],this.items[r+1])>0)return!0;return!1}splice(t,e,...r){me(this._observable),arguments.length===1&&(e=this.length),e??=0;const i=(e?2:0)|(r.length?1:0);if(this._emitBeforeChanges(i))return[];const s=this._splice(t,e,r)||[];return this._emitAfterChanges(i),s}toArray(){return me(this._observable),this._items.slice()}toJSON(t){return me(this._observable),this.toArray().map(e=>m5(e)?e.toJSON(t):e)}toLocaleString(){return me(this._observable),this._items.toLocaleString()}toString(){return me(this._observable),this._items.toString()}unshift(...t){return me(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,r){const i=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=wh(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=i.splice(t,e),this.hasEventListener("before-remove")){const l=xi.acquire();l.target=this,l.cancellable=!0;for(let c=0,d=o.length;c<d;c++)n=o[c],l.reset(n),this.emit("before-remove",l),l.defaultPrevented&&(o.splice(c,1),i.splice(t,0,n),t+=1,c-=1,d-=1);xi.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=xi.acquire();l.target=this,l.cancellable=!1;const c=o.length;for(let d=0;d<c;d++)l.reset(o[d]),this.emit("after-remove",l);xi.release(l)}}if(r?.length){if(s){const h=[];for(const y of r){const f=s.ensureType(y);f==null&&y!=null||h.push(f)}r=h}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),d=t===this.length;if(l||c){const h=xi.acquire();h.target=this,h.cancellable=!0;const y=xi.acquire();y.target=this,y.cancellable=!1;for(const f of r)l?(h.reset(f),this.emit("before-add",h),h.defaultPrevented||(d?i.push(f):i.splice(t++,0,f),this._set("length",i.length),c&&(y.reset(f),this.emit("after-add",y)))):(d?i.push(f):i.splice(t++,0,f),this._set("length",i.length),y.reset(f),this.emit("after-add",y));xi.release(y),xi.release(h)}else{if(d)for(const h of r)i.push(h);else i.splice(t,0,...r);this._set("length",i.length)}}if((r?.length||o?.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const l=new OC(this,r,o,t,e);this.emit("after-splice",l)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const r=xi.acquire();r.target=this,r.cancellable=!0,r.type=t,this.emit("before-changes",r),e=r.defaultPrevented,xi.release(r)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=xi.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),xi.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const r=e.changes;oo.clear(),ao.clear(),lo.clear();for(const{added:c,removed:d}of r){if(c)if(lo.size===0&&ao.size===0)for(const h of c)oo.add(h);else for(const h of c)ao.has(h)?(lo.add(h),ao.delete(h)):lo.has(h)||oo.add(h);if(d)if(lo.size===0&&oo.size===0)for(const h of d)ao.add(h);else for(const h of d)oo.has(h)?oo.delete(h):(lo.delete(h),ao.add(h))}const i=hs.acquire();oo.forEach(c=>{i.push(c)});const s=hs.acquire();ao.forEach(c=>{s.push(c)});const n=this._items,o=e.items,l=hs.acquire();if(lo.forEach(c=>{o.indexOf(c)!==n.indexOf(c)&&l.push(c)}),e.listeners&&(i.length||s.length||l.length)){const c={target:this,added:i,removed:s,moved:l},d=e.listeners.length;for(let h=0;h<d;h++){const y=e.listeners[h];y.removed||y.callback.call(this,c)}}hs.release(i),hs.release(s),hs.release(l)}oo.clear(),ao.clear(),lo.clear()}};a([u()],Mo.prototype,"_updating",void 0),a([u()],Mo.prototype,"length",void 0),a([u()],Mo.prototype,"items",null),a([u({readOnly:!0})],Mo.prototype,"updating",null),Mo=on=a([_("esri.core.Collection")],Mo);const U=Mo;function Bs(t,e,r=U){return e||(e=new r),e===t||e.destroyed||(e.removeAll(),LC(t)?e.addMany(t):t&&e.add(t)),e}function N_(t){return t}function LC(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const kC="not-loaded",AC="loading",FC="failed",i8="loaded",D_=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const n=this.load.bind(this);this.load=o=>{const l=new Promise((c,d)=>{const h=g5(o,d);this.destroyed&&d(new I("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(c,d).finally(()=>{h&&h.remove()})});if(this.loadStatus===kC){this._set("loadStatus",AC);const c=this._loadController=new AbortController;n({signal:c.signal})}return s(),l}})),this.when(()=>{this._set("loadStatus",i8),this._loadController=null},s=>{this.destroyed||(this._set("loadStatus",FC),this._set("loadError",s),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=ml(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===i8}get loadWarnings(){return this._get("loadWarnings")}load(i){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new I("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return a([u({readOnly:!0})],r.prototype,"loaded",null),a([u({readOnly:!0})],r.prototype,"loadError",void 0),a([u({clonable:!1})],r.prototype,"loadStatus",void 0),a([u({type:[vs],readOnly:!0})],r.prototype,"loadWarnings",null),r=a([_("esri.core.Loadable")],r),r},ep=D_(v5);function _f(t){return!(!t||!t.load)}function ene(t,e,r){return p_(t.map((i,s)=>e.apply(r,[i,s])))}async function NC(t,e,r){return(await p_(t.map((i,s)=>e.apply(r,[i,s])))).map(i=>i.value)}function R5(t){return{ok:!0,value:t}}function C5(t){return{ok:!1,error:t}}function DC(t){return t!=null&&t.ok===!0?t.value:null}function jC(t){return t!=null&&t.ok===!1?t.error:null}async function B2(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return R5(await t)}catch(e){return C5(e)}}async function VC(t){try{return R5(await t)}catch(e){return nr(e),C5(e)}}function Th(t,e){return new fo(t,e)}let fo=class extends Z{get value(){return DC(this._result)}get error(){return jC(this._result)}get finished(){return this._result!=null}constructor(e,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=ml(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=e(i),this.promise.then(s=>{this._result=R5(s),this._cleanup()},s=>{this._result=C5(s),this._cleanup()}),this._abortHandle=Rc(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Je(this._abortHandle),this._abortController=null}};a([u()],fo.prototype,"value",null),a([u()],fo.prototype,"error",null),a([u()],fo.prototype,"finished",null),a([u()],fo.prototype,"promise",void 0),a([u()],fo.prototype,"_result",void 0),fo=a([_("esri.core.asyncUtils.ReactiveTask")],fo);async function H2(t,e){return await t.load(),zC(t,e)}async function zC(t,e){const r=[],i=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?i(...o):U.isCollection(o)?o.forEach(l=>i(l)):_f(o)&&r.push(o))};e(i);let s=null;if(await NC(r,async n=>{const o=await B2(UC(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return t}function UC(t){return"loadAll"in t&&typeof t.loadAll=="function"}function j(t,e,r){let i,s;return e===void 0?(s=t,i=[void 0]):typeof e!="string"?(s=t,i=[void 0],r=e):(s=e,i=Array.isArray(t)?t:[t]),(n,o)=>{const l=n.constructor.prototype;for(const c of i){const d=w5(n,c,s);d.write&&typeof d.write=="object"||(d.write={}),r&&(d.write.target=r),d.write.writer=l[o]}}}let L5=class{constructor(e,r,i,s,n,o){this.semiMajorAxis=e,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=s,this.scaleHeight=n;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Ke=new L5(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Hs=new L5(3396190,1/169.8944472236118,23e4,6e4,.111),Jo=new L5(1737400,0,0,0,0);let q4,M=null;function j_(){return!!M}function qC(){return!!ie("esri-wasm")}function GC(){return q4||(q4=R(async()=>{const{default:t}=await import("./money-tides-pe-wasm-B87Q3u4k.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>mt(`esri/geometry/support/${e}`)})).then(t=>{B_(t)}),q4)}const W1={geogToProj(t,e,r){M.ensureCache.prepare();const i=wl(r),s=r===i,n=M.ensureFloat64(i),o=M._pe_geog_to_proj(M.getPointer(t),e,n);return o&&Qo(r,e,n,s),o},projGeog(t,e,r,i){switch(i){case Ze.PE_TRANSFORM_P_TO_G:return W1.projToGeog(t,e,r);case Ze.PE_TRANSFORM_G_TO_P:return W1.geogToProj(t,e,r)}return 0},projToGeog:(t,e,r)=>W1.projToGeogCenter(t,e,r,0),projToGeogCenter(t,e,r,i){M.ensureCache.prepare();const s=wl(r),n=r===s,o=M.ensureFloat64(s),l=M._pe_proj_to_geog_center(M.getPointer(t),e,o,i);return l&&Qo(r,e,o,n),l}};let Ze=class $e{static init(){$e.PE_BUFFER_MAX=M.PeDefs.prototype.PE_BUFFER_MAX,$e.PE_NAME_MAX=M.PeDefs.prototype.PE_NAME_MAX,$e.PE_MGRS_MAX=M.PeDefs.prototype.PE_MGRS_MAX,$e.PE_USNG_MAX=M.PeDefs.prototype.PE_USNG_MAX,$e.PE_DD_MAX=M.PeDefs.prototype.PE_DD_MAX,$e.PE_DDM_MAX=M.PeDefs.prototype.PE_DDM_MAX,$e.PE_DMS_MAX=M.PeDefs.prototype.PE_DMS_MAX,$e.PE_UTM_MAX=M.PeDefs.prototype.PE_UTM_MAX,$e.PE_PARM_MAX=M.PeDefs.prototype.PE_PARM_MAX,$e.PE_TYPE_NONE=M.PeDefs.prototype.PE_TYPE_NONE,$e.PE_TYPE_GEOGCS=M.PeDefs.prototype.PE_TYPE_GEOGCS,$e.PE_TYPE_PROJCS=M.PeDefs.prototype.PE_TYPE_PROJCS,$e.PE_TYPE_GEOGTRAN=M.PeDefs.prototype.PE_TYPE_GEOGTRAN,$e.PE_TYPE_COORDSYS=M.PeDefs.prototype.PE_TYPE_COORDSYS,$e.PE_TYPE_UNIT=M.PeDefs.prototype.PE_TYPE_UNIT,$e.PE_TYPE_LINUNIT=M.PeDefs.prototype.PE_TYPE_LINUNIT,$e.PE_STR_OPTS_NONE=M.PeDefs.prototype.PE_STR_OPTS_NONE,$e.PE_STR_AUTH_NONE=M.PeDefs.prototype.PE_STR_AUTH_NONE,$e.PE_STR_AUTH_TOP=M.PeDefs.prototype.PE_STR_AUTH_TOP,$e.PE_STR_NAME_CANON=M.PeDefs.prototype.PE_STR_NAME_CANON,$e.PE_STR_FMT_WKT=M.PeDefs.prototype.PE_STR_FMT_WKT,$e.PE_STR_FMT_WKT2=M.PeDefs.prototype.PE_STR_FMT_WKT2,$e.PE_PARM_X0=M.PeDefs.prototype.PE_PARM_X0,$e.PE_PARM_ND=M.PeDefs.prototype.PE_PARM_ND,$e.PE_TRANSFORM_1_TO_2=M.PeDefs.prototype.PE_TRANSFORM_1_TO_2,$e.PE_TRANSFORM_2_TO_1=M.PeDefs.prototype.PE_TRANSFORM_2_TO_1,$e.PE_TRANSFORM_P_TO_G=M.PeDefs.prototype.PE_TRANSFORM_P_TO_G,$e.PE_TRANSFORM_G_TO_P=M.PeDefs.prototype.PE_TRANSFORM_G_TO_P,$e.PE_HORIZON_RECT=M.PeDefs.prototype.PE_HORIZON_RECT,$e.PE_HORIZON_POLY=M.PeDefs.prototype.PE_HORIZON_POLY,$e.PE_HORIZON_LINE=M.PeDefs.prototype.PE_HORIZON_LINE,$e.PE_HORIZON_DELTA=M.PeDefs.prototype.PE_HORIZON_DELTA}},V_=null;const s8={},n8={},o8=t=>{const e=t.getType();switch(e){case Ze.PE_TYPE_GEOGCS:t=M.castObject(t,M.PeGeogcs);break;case Ze.PE_TYPE_PROJCS:t=M.castObject(t,M.PeProjcs);break;case Ze.PE_TYPE_GEOGTRAN:t=M.castObject(t,M.PeGeogtran);break;default:e&Ze.PE_TYPE_UNIT&&(t=M.castObject(t,M.PeUnit))}return t},Xl={initialize(){M.PeFactory.prototype.initialize(null)},coordsys:t=>Xl.factoryByType(Ze.PE_TYPE_COORDSYS,t),factoryByType(t,e){let r=null,i=s8[t];if(i||(i={},s8[t]=i),i.hasOwnProperty(String(e))&&(r=i[e],M.compare(r,M.NULL)&&(r=null)),!r){const s=M.PeFactory.prototype.factoryByType(t,e);M.compare(s,M.NULL)||(r=o8(s),i[e]=r)}return r},fromString(t,e){let r=null,i=n8[t];if(i||(i={},n8[t]=i),i.hasOwnProperty(e)&&(r=i[e],M.compare(r,M.NULL)&&(r=null)),!r){const s=M.PeFactory.prototype.fromString(t,e);M.compare(s,M.NULL)||(r=o8(s),i[e]=r)}return r},geogcs:t=>Xl.factoryByType(Ze.PE_TYPE_GEOGCS,t),geogtran:t=>Xl.factoryByType(Ze.PE_TYPE_GEOGTRAN,t),getCode:t=>M.PeFactory.prototype.getCode(t),projcs:t=>Xl.factoryByType(Ze.PE_TYPE_PROJCS,t),unit:t=>Xl.factoryByType(Ze.PE_TYPE_UNIT,t)};let a8,z_=null;const k5={PE_GTLIST_OPTS_COMMON:0,init(){k5.PE_GTLIST_OPTS_COMMON=M.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,a8=M._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,r,i,s,n){let o=null;const l=new M.PeInteger(n);try{const c=M.PeGTlistExtended.prototype.getGTlist(t,e,r,i,s,l);if((n=l.val)&&(o=[c],n>1)){const d=M.getPointer(c);for(let h=1;h<n;h++)o.push(M.wrapPointer(d+a8*h,M.PeGTlistExtendedEntry))}}finally{M.destroy(l)}return o}},BC={destroy(t){if(t?.length){for(const e of t)ss(e),e.getEntries().forEach(r=>{ss(r);const i=r.getGeogtran();ss(i),i.getParameters().forEach(ss),[i.getGeogcs1(),i.getGeogcs2()].forEach(s=>{ss(s);const n=s.getDatum();ss(n),ss(n.getSpheroid()),ss(s.getPrimem()),ss(s.getUnit())})});M.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},HC={geogToGeog(t,e,r,i,s){M.ensureCache.prepare();const n=wl(r),o=r===n,l=M.ensureFloat64(n);let c=0;i&&(c=M.ensureFloat64(i));const d=M._pe_geog_to_geog(M.getPointer(t),e,l,c,s);return d&&Qo(r,e,l,o),d}},WC={geodesicCoordinate(t,e,r,i,s,n,o,l){M.PeLineType.prototype.geodesic_coordinate(t,e,r,i,s,n,o,l)},geodeticCoordinate(t,e,r,i,s,n,o,l,c){M.PeLineType.prototype.geodetic_coordinate(t,e,r,i,s,n,o,l,c)},geodeticDistance(t,e,r,i,s,n,o,l,c,d){M.PeLineType.prototype.geodetic_distance(t,e,r,i,s,n,o,l,c,d)},greatEllipticDistance(t,e,r,i,s,n,o,l,c){M.PeLineType.prototype.great_elliptic_distance(t,e,r,i,s,n,o,l,c)}},ZC={phiToEta:(t,e)=>M.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>M.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>M.PeMath.prototype.phi_to_phig(t,e),q:(t,e,r)=>M.PeMath.prototype.q(t,e,r),q90:(t,e)=>M.PeMath.prototype.q90(t,e)},G4=(t,e,r,i,s,n)=>{let o,l;switch(M.ensureCache.prepare(),t){case"dd":o=M._pe_geog_to_dd,l=Ze.PE_DD_MAX;break;case"ddm":o=M._pe_geog_to_ddm,l=Ze.PE_DDM_MAX;break;case"dms":o=M._pe_geog_to_dms,l=Ze.PE_DMS_MAX}let c=0;e&&(c=M.getPointer(e));const d=wl(i),h=M.ensureFloat64(d),y=W2(r,l),f=o(c,r,h,s,M.ensureInt32(y));if(f)for(let m=0;m<r;m++)n[m]=M.UTF8ToString(y[m]);return f},B4=(t,e,r,i,s)=>{let n;switch(M.ensureCache.prepare(),t){case"dd":n=M._pe_dd_to_geog;break;case"ddm":n=M._pe_ddm_to_geog;break;case"dms":n=M._pe_dms_to_geog}let o=0;e&&(o=M.getPointer(e));const l=i.map(y=>M.ensureString(y)),c=M.ensureInt32(l),d=M.ensureFloat64(new Array(2*r)),h=n(o,r,c,d);return h&&Qo(s,r,d),h},JC={geogToDms:(t,e,r,i,s)=>G4("dms",t,e,r,i,s),dmsToGeog:(t,e,r,i)=>B4("dms",t,e,r,i),geogToDdm:(t,e,r,i,s)=>G4("ddm",t,e,r,i,s),ddmToGeog:(t,e,r,i)=>B4("ddm",t,e,r,i),geogToDd:(t,e,r,i,s)=>G4("dd",t,e,r,i,s),ddToGeog:(t,e,r,i)=>B4("dd",t,e,r,i)};let U_=class eu{static init(){eu.PE_MGRS_STYLE_NEW=M.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,eu.PE_MGRS_STYLE_OLD=M.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,eu.PE_MGRS_STYLE_AUTO=M.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,eu.PE_MGRS_180_ZONE_1_PLUS=M.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,eu.PE_MGRS_ADD_SPACES=M.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,r,i,s,n,o,l){M.ensureCache.prepare();let c=0;e&&(c=M.getPointer(e));const d=wl(i),h=M.ensureFloat64(d),y=W2(r,Ze.PE_MGRS_MAX),f=M.ensureInt32(y),m=M._pe_geog_to_mgrs_extended(c,r,h,s,n,o,f);if(m)for(let g=0;g<r;g++)l[g]=M.UTF8ToString(y[g]);return m}static mgrsToGeogExtended(e,r,i,s,n){M.ensureCache.prepare();let o=0;e&&(o=M.getPointer(e));const l=i.map(y=>M.ensureString(y)),c=M.ensureInt32(l),d=M.ensureFloat64(new Array(2*r)),h=M._pe_mgrs_to_geog_extended(o,r,c,s,d);return h&&Qo(n,r,d),h}};const QC={geogToUsng(t,e,r,i,s,n,o){M.ensureCache.prepare();let l=0;t&&(l=M.getPointer(t));const c=wl(r),d=M.ensureFloat64(c),h=W2(e,Ze.PE_MGRS_MAX),y=M.ensureInt32(h),f=M._pe_geog_to_usng(l,e,d,i,s,n,y);if(f)for(let m=0;m<e;m++)o[m]=M.UTF8ToString(h[m]);return f},usngToGeog(t,e,r,i){M.ensureCache.prepare();let s=0;t&&(s=M.getPointer(t));const n=r.map(d=>M.ensureString(d)),o=M.ensureInt32(n),l=M.ensureFloat64(new Array(2*e)),c=M._pe_usng_to_geog(s,e,o,l);return c&&Qo(i,e,l),c}};let q_=class Z1{static init(){Z1.PE_UTM_OPTS_NONE=M.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,Z1.PE_UTM_OPTS_ADD_SPACES=M.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,Z1.PE_UTM_OPTS_NS=M.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,r,i,s,n){M.ensureCache.prepare();let o=0;e&&(o=M.getPointer(e));const l=wl(i),c=M.ensureFloat64(l),d=W2(r,Ze.PE_UTM_MAX),h=M.ensureInt32(d),y=M._pe_geog_to_utm(o,r,c,s,h);if(y)for(let f=0;f<r;f++)n[f]=M.UTF8ToString(d[f]);return y}static utmToGeog(e,r,i,s,n){M.ensureCache.prepare();let o=0;e&&(o=M.getPointer(e));const l=i.map(y=>M.ensureString(y)),c=M.ensureInt32(l),d=M.ensureFloat64(new Array(2*r)),h=M._pe_utm_to_geog(o,r,c,s,d);return h&&Qo(n,r,d),h}};var Vr;let G_=(Vr=class{static init(){Vr.PE_PCSINFO_OPTION_NONE=M.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,Vr.PE_PCSINFO_OPTION_DOMAIN=M.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,Vr.PE_POLE_OUTSIDE_BOUNDARY=M.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,Vr.PE_POLE_POINT=M.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,r=Vr.PE_PCSINFO_OPTION_DOMAIN){let i=null,s=null;return Vr.cache.has(e)&&(s=Vr.cache.get(e),s[r]&&(i=s[r])),i||(i=M.PePCSInfo.prototype.generate(e,r),s||(s=[],Vr.cache.set(e,s)),s[r]=i),i}},Vr.cache=new Map,Vr);const KC={versionString:()=>M.PeVersion.prototype.version_string()};function B_(t){function e(n,o,l){n[o]=l(n[o])}M=t,Ze.init(),k5.init(),U_.init(),q_.init(),G_.init(),V_=class extends M.PeDouble{constructor(n=NaN){super(n)}destroy(){M.destroy(this)}[Symbol.dispose](){this.destroy()}},z_=class extends M.PeGCSExtent{destroy(){M.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[M.PeAngunit,M.PeDatum,M.PeGeogcs,M.PeGeogtran,M.PeObject,M.PeParameter,M.PePrimem,M.PeProjcs,M.PeSpheroid,M.PeUnit];for(const n of r)e(n.prototype,"getName",o=>function(){return o.call(this,new Array(Ze.PE_NAME_MAX))});for(const n of[M.PeGeogtran,M.PeProjcs])e(n.prototype,"getParameters",o=>function(){const l=new Array(Ze.PE_PARM_MAX);let c=o.call(this);for(let d=0;d<l.length;d++){const h=M.getValue(c,"*");l[d]=h?M.wrapPointer(h,M.PeParameter):null,c+=Int32Array.BYTES_PER_ELEMENT}return l});e(M.PeHorizon.prototype,"getCoord",n=>function(o=!1){const l=this.getSize();if(!l)return null;const c=[];return Qo(c,l,n.call(this),o),c}),e(M.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=M._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const c=n.call(this);if(!M.compare(c,M.NULL)){l=[c];const d=this.getSteps();if(d>1){const h=M.getPointer(c);for(let y=1;y<d;y++)l.push(M.wrapPointer(h+o*y,M.PeGTlistExtendedGTs))}}return l}});const i=M._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let l=null;const c=n.call(this);if(!M.compare(c,M.NULL)){l=[c];const d=c.getNump();if(d>1){const h=M.getPointer(c);for(let y=1;y<d;y++)l.push(M.wrapPointer(h+i*y,M.PeHorizon))}}return o.set(n,l),l};e(M.PeProjcs.prototype,"horizonGcsGenerate",s),e(M.PeProjcs.prototype,"horizonPcsGenerate",s),M.PeObject.prototype.toString=function(n=Ze.PE_STR_OPTS_NONE){M.ensureCache.prepare();const o=M.getPointer(this),l=M.ensureInt8(new Array(Ze.PE_BUFFER_MAX));return M.UTF8ToString(M._pe_object_to_string_ext(o,n,l))},M.PeGeogcs.prototype.destroy=function(){this.Delete(),ss(this),this.ptr=0},M.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},M.PeProjcs.prototype.destroy=function(){this.Delete(),ss(this),this.ptr=0},M.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function ss(t){if(!t)return;const e=M.getClass(t);if(!e)return;const r=M.getCache(e);if(!r)return;const i=M.getPointer(t);i&&delete r[i]}function W2(t,e){const r=[],i=new Array(e);for(let s=0;s<t;s++)r.push(M.ensureInt8(i));return r}function wl(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function Qo(t,e,r,i=!1){if(i)for(let s=0;s<2*e;s++)t[s]=M.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let n=0;n<e;n++)s&&(t[n]=new Array(2)),t[n][0]=M.getValue(r,"double"),t[n][1]=M.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}const ine=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:W1,PeDefs:Ze,get PeDouble(){return V_},PeFactory:Xl,get PeGCSExtent(){return z_},PeGTTransformations:HC,PeGTlistExtended:k5,PeGTlistExtendedEntry:BC,PeLineType:WC,PeMath:ZC,PeNotationDms:JC,PeNotationMgrs:U_,PeNotationUsng:QC,PeNotationUtm:q_,PePCSInfo:G_,PeVersion:KC,_init:B_,get _pe(){return M},isLoaded:j_,isSupported:qC,load:GC},Symbol.toStringTag,{value:"Module"}));let p;const w={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(p=2e3;p<=2045;p++)w[p]=0;for(p=2056;p<=2065;p++)w[p]=0;for(p=2067;p<=2135;p++)w[p]=0;for(p=2137;p<=2154;p++)w[p]=0;for(p=2161;p<=2170;p++)w[p]=0;for(p=2172;p<=2193;p++)w[p]=0;for(p=2195;p<=2198;p++)w[p]=0;for(p=2200;p<=2203;p++)w[p]=0;for(p=2205;p<=2217;p++)w[p]=0;for(p=2222;p<=2224;p++)w[p]=1;for(p=2225;p<=2250;p++)w[p]=2;for(p=2251;p<=2253;p++)w[p]=1;for(p=2257;p<=2264;p++)w[p]=2;for(p=2274;p<=2279;p++)w[p]=2;for(p=2280;p<=2282;p++)w[p]=1;for(p=2283;p<=2289;p++)w[p]=2;for(p=2290;p<=2292;p++)w[p]=0;for(p=2308;p<=2313;p++)w[p]=0;for(p=2315;p<=2491;p++)w[p]=0;for(p=2494;p<=2866;p++)w[p]=0;for(p=2867;p<=2869;p++)w[p]=1;for(p=2870;p<=2888;p++)w[p]=2;for(p=2891;p<=2895;p++)w[p]=2;for(p=2896;p<=2898;p++)w[p]=1;for(p=2902;p<=2908;p++)w[p]=2;for(p=2915;p<=2920;p++)w[p]=2;for(p=2921;p<=2923;p++)w[p]=1;for(p=2924;p<=2930;p++)w[p]=2;for(p=2931;p<=2962;p++)w[p]=0;for(p=2964;p<=2968;p++)w[p]=2;for(p=2969;p<=2973;p++)w[p]=0;for(p=2975;p<=2991;p++)w[p]=0;for(p=2995;p<=3051;p++)w[p]=0;for(p=3054;p<=3079;p++)w[p]=0;for(p=3081;p<=3088;p++)w[p]=0;for(p=3092;p<=3101;p++)w[p]=0;for(p=3106;p<=3138;p++)w[p]=0;for(p=3146;p<=3151;p++)w[p]=0;for(p=3153;p<=3166;p++)w[p]=0;for(p=3168;p<=3172;p++)w[p]=0;for(p=3174;p<=3203;p++)w[p]=0;for(p=3294;p<=3358;p++)w[p]=0;for(p=3367;p<=3403;p++)w[p]=0;for(p=3408;p<=3416;p++)w[p]=0;for(p=3417;p<=3438;p++)w[p]=2;for(p=3441;p<=3446;p++)w[p]=2;for(p=3447;p<=3450;p++)w[p]=0;for(p=3451;p<=3459;p++)w[p]=2;for(p=3460;p<=3478;p++)w[p]=0;for(p=3554;p<=3559;p++)w[p]=0;for(p=3560;p<=3570;p++)w[p]=2;for(p=3571;p<=3581;p++)w[p]=0;for(p=3594;p<=3597;p++)w[p]=0;for(p=3601;p<=3604;p++)w[p]=0;for(p=3637;p<=3639;p++)w[p]=0;for(p=3665;p<=3667;p++)w[p]=0;for(p=3693;p<=3695;p++)w[p]=0;for(p=3701;p<=3727;p++)w[p]=0;for(p=3728;p<=3739;p++)w[p]=2;for(p=3740;p<=3751;p++)w[p]=0;for(p=3753;p<=3760;p++)w[p]=2;for(p=3761;p<=3773;p++)w[p]=0;for(p=3775;p<=3777;p++)w[p]=0;for(p=3779;p<=3781;p++)w[p]=0;for(p=3783;p<=3785;p++)w[p]=0;for(p=3788;p<=3791;p++)w[p]=0;for(p=3797;p<=3802;p++)w[p]=0;for(p=3814;p<=3816;p++)w[p]=0;for(p=3825;p<=3829;p++)w[p]=0;for(p=3832;p<=3841;p++)w[p]=0;for(p=3844;p<=3852;p++)w[p]=0;for(p=3873;p<=3885;p++)w[p]=0;for(p=3890;p<=3893;p++)w[p]=0;for(p=3907;p<=3912;p++)w[p]=0;for(p=3942;p<=3950;p++)w[p]=0;for(p=3968;p<=3970;p++)w[p]=0;for(p=3973;p<=3976;p++)w[p]=0;for(p=3986;p<=3989;p++)w[p]=0;for(p=3994;p<=3997;p++)w[p]=0;for(p=4048;p<=4051;p++)w[p]=0;for(p=4056;p<=4063;p++)w[p]=0;for(p=4093;p<=4096;p++)w[p]=0;for(p=4390;p<=4398;p++)w[p]=0;for(p=4399;p<=4413;p++)w[p]=2;for(p=4418;p<=4433;p++)w[p]=2;for(p=4455;p<=4457;p++)w[p]=2;for(p=4484;p<=4489;p++)w[p]=0;for(p=4491;p<=4554;p++)w[p]=0;for(p=4568;p<=4589;p++)w[p]=0;for(p=4652;p<=4656;p++)w[p]=0;for(p=4766;p<=4800;p++)w[p]=0;for(p=5014;p<=5016;p++)w[p]=0;for(p=5069;p<=5072;p++)w[p]=0;for(p=5105;p<=5130;p++)w[p]=0;for(p=5167;p<=5188;p++)w[p]=0;for(p=5253;p<=5259;p++)w[p]=0;for(p=5269;p<=5275;p++)w[p]=0;for(p=5292;p<=5311;p++)w[p]=0;for(p=5329;p<=5331;p++)w[p]=0;for(p=5343;p<=5349;p++)w[p]=0;for(p=5355;p<=5357;p++)w[p]=0;for(p=5387;p<=5389;p++)w[p]=0;for(p=5459;p<=5463;p++)w[p]=0;for(p=5479;p<=5482;p++)w[p]=0;for(p=5518;p<=5520;p++)w[p]=0;for(p=5530;p<=5539;p++)w[p]=0;for(p=5550;p<=5552;p++)w[p]=0;for(p=5562;p<=5583;p++)w[p]=0;for(p=5623;p<=5625;p++)w[p]=2;for(p=5631;p<=5639;p++)w[p]=0;for(p=5649;p<=5653;p++)w[p]=0;for(p=5663;p<=5680;p++)w[p]=0;for(p=5682;p<=5685;p++)w[p]=0;for(p=5875;p<=5877;p++)w[p]=0;for(p=5896;p<=5899;p++)w[p]=0;for(p=5921;p<=5940;p++)w[p]=0;for(p=6050;p<=6125;p++)w[p]=0;for(p=6244;p<=6275;p++)w[p]=0;for(p=6328;p<=6348;p++)w[p]=0;for(p=6350;p<=6356;p++)w[p]=0;for(p=6366;p<=6372;p++)w[p]=0;for(p=6381;p<=6387;p++)w[p]=0;for(p=6393;p<=6404;p++)w[p]=0;for(p=6480;p<=6483;p++)w[p]=0;for(p=6511;p<=6514;p++)w[p]=0;for(p=6579;p<=6581;p++)w[p]=0;for(p=6619;p<=6624;p++)w[p]=0;for(p=6625;p<=6627;p++)w[p]=2;for(p=6628;p<=6632;p++)w[p]=0;for(p=6634;p<=6637;p++)w[p]=0;for(p=6669;p<=6692;p++)w[p]=0;for(p=6707;p<=6709;p++)w[p]=0;for(p=6720;p<=6723;p++)w[p]=0;for(p=6732;p<=6738;p++)w[p]=0;for(p=6931;p<=6933;p++)w[p]=0;for(p=6956;p<=6959;p++)w[p]=0;for(p=7005;p<=7007;p++)w[p]=0;for(p=7057;p<=7070;p++)w[p]=2;for(p=7074;p<=7082;p++)w[p]=0;for(p=7109;p<=7118;p++)w[p]=0;for(p=7119;p<=7127;p++)w[p]=1;for(p=7374;p<=7376;p++)w[p]=0;for(p=7528;p<=7586;p++)w[p]=0;for(p=7587;p<=7645;p++)w[p]=2;for(p=7692;p<=7696;p++)w[p]=0;for(p=7755;p<=7787;p++)w[p]=0;for(p=7791;p<=7795;p++)w[p]=0;for(p=7799;p<=7801;p++)w[p]=0;for(p=7803;p<=7805;p++)w[p]=0;for(p=7825;p<=7831;p++)w[p]=0;for(p=7845;p<=7859;p++)w[p]=0;for(p=8013;p<=8032;p++)w[p]=0;for(p=8065;p<=8068;p++)w[p]=1;for(p=8518;p<=8529;p++)w[p]=2;for(p=8533;p<=8536;p++)w[p]=2;for(p=8538;p<=8540;p++)w[p]=2;for(p=8677;p<=8679;p++)w[p]=0;for(p=8836;p<=8840;p++)w[p]=0;for(p=8857;p<=8859;p++)w[p]=0;for(p=8908;p<=8910;p++)w[p]=0;for(p=9154;p<=9159;p++)w[p]=0;for(p=9205;p<=9218;p++)w[p]=0;for(p=9271;p<=9273;p++)w[p]=0;for(p=9295;p<=9297;p++)w[p]=0;for(p=9356;p<=9360;p++)w[p]=0;for(p=9404;p<=9407;p++)w[p]=0;for(p=9476;p<=9482;p++)w[p]=0;for(p=9487;p<=9494;p++)w[p]=0;for(p=9697;p<=9699;p++)w[p]=0;for(p=9821;p<=9865;p++)w[p]=0;for(p=10285;p<=10291;p++)w[p]=0;for(p=10314;p<=10317;p++)w[p]=0;for(p=10448;p<=10465;p++)w[p]=0;for(p=10726;p<=10729;p++)w[p]=0;for(p=10731;p<=10733;p++)w[p]=0;for(p=11114;p<=11118;p++)w[p]=0;for(p=20004;p<=20032;p++)w[p]=0;for(p=20047;p<=20049;p++)w[p]=0;for(p=20062;p<=20092;p++)w[p]=0;for(p=20135;p<=20138;p++)w[p]=0;for(p=20248;p<=20258;p++)w[p]=0;for(p=20348;p<=20358;p++)w[p]=0;for(p=20436;p<=20440;p++)w[p]=0;for(p=20822;p<=20824;p++)w[p]=0;for(p=20904;p<=20932;p++)w[p]=0;for(p=20934;p<=20936;p++)w[p]=0;for(p=21004;p<=21032;p++)w[p]=0;for(p=21035;p<=21037;p++)w[p]=0;for(p=21095;p<=21097;p++)w[p]=0;for(p=21148;p<=21150;p++)w[p]=0;for(p=21207;p<=21264;p++)w[p]=0;for(p=21307;p<=21364;p++)w[p]=0;for(p=21413;p<=21423;p++)w[p]=0;for(p=21453;p<=21463;p++)w[p]=0;for(p=21473;p<=21483;p++)w[p]=0;for(p=21780;p<=21782;p++)w[p]=0;for(p=21891;p<=21894;p++)w[p]=0;for(p=21896;p<=21899;p++)w[p]=0;for(p=22171;p<=22177;p++)w[p]=0;for(p=22181;p<=22187;p++)w[p]=0;for(p=22191;p<=22197;p++)w[p]=0;for(p=22207;p<=22222;p++)w[p]=0;for(p=22229;p<=22232;p++)w[p]=0;for(p=22234;p<=22236;p++)w[p]=0;for(p=22243;p<=22250;p++)w[p]=0;for(p=22262;p<=22265;p++)w[p]=0;for(p=22307;p<=22322;p++)w[p]=0;for(p=22348;p<=22357;p++)w[p]=0;for(p=22407;p<=22422;p++)w[p]=0;for(p=22462;p<=22465;p++)w[p]=0;for(p=22521;p<=22525;p++)w[p]=0;for(p=22607;p<=22622;p++)w[p]=0;for(p=22641;p<=22646;p++)w[p]=0;for(p=22648;p<=22657;p++)w[p]=0;for(p=22707;p<=22722;p++)w[p]=0;for(p=22762;p<=22765;p++)w[p]=0;for(p=22807;p<=22822;p++)w[p]=0;for(p=22991;p<=22994;p++)w[p]=0;for(p=23028;p<=23038;p++)w[p]=0;for(p=23301;p<=23333;p++)w[p]=2;for(p=23830;p<=23853;p++)w[p]=0;for(p=23866;p<=23872;p++)w[p]=0;for(p=23877;p<=23884;p++)w[p]=0;for(p=23886;p<=23894;p++)w[p]=0;for(p=23946;p<=23948;p++)w[p]=0;for(p=24311;p<=24313;p++)w[p]=0;for(p=24342;p<=24347;p++)w[p]=0;for(p=24370;p<=24374;p++)w[p]=10;for(p=24375;p<=24381;p++)w[p]=0;for(p=24718;p<=24721;p++)w[p]=0;for(p=24817;p<=24821;p++)w[p]=0;for(p=24877;p<=24882;p++)w[p]=0;for(p=24891;p<=24893;p++)w[p]=0;for(p=25391;p<=25395;p++)w[p]=0;for(p=25828;p<=25838;p++)w[p]=0;for(p=26191;p<=26195;p++)w[p]=0;for(p=26391;p<=26393;p++)w[p]=0;for(p=26701;p<=26722;p++)w[p]=0;for(p=26729;p<=26799;p++)w[p]=2;for(p=26801;p<=26803;p++)w[p]=2;for(p=26811;p<=26813;p++)w[p]=2;for(p=26847;p<=26870;p++)w[p]=2;for(p=26891;p<=26899;p++)w[p]=0;for(p=26901;p<=26923;p++)w[p]=0;for(p=26929;p<=26946;p++)w[p]=0;for(p=26948;p<=26998;p++)w[p]=0;for(p=27037;p<=27040;p++)w[p]=0;for(p=27205;p<=27232;p++)w[p]=0;for(p=27258;p<=27260;p++)w[p]=0;for(p=27391;p<=27398;p++)w[p]=0;for(p=27561;p<=27564;p++)w[p]=0;for(p=27571;p<=27574;p++)w[p]=0;for(p=27581;p<=27584;p++)w[p]=0;for(p=27591;p<=27594;p++)w[p]=0;for(p=27700;p<=27707;p++)w[p]=0;for(p=28191;p<=28193;p++)w[p]=0;for(p=28348;p<=28358;p++)w[p]=0;for(p=28402;p<=28432;p++)w[p]=0;for(p=28462;p<=28492;p++)w[p]=0;for(p=29118;p<=29122;p++)w[p]=0;for(p=29168;p<=29172;p++)w[p]=0;for(p=29177;p<=29185;p++)w[p]=0;for(p=29187;p<=29195;p++)w[p]=0;for(p=29900;p<=29903;p++)w[p]=0;for(p=30161;p<=30179;p++)w[p]=0;for(p=30491;p<=30494;p++)w[p]=0;for(p=30729;p<=30732;p++)w[p]=0;for(p=31251;p<=31259;p++)w[p]=0;for(p=31265;p<=31268;p++)w[p]=0;for(p=31275;p<=31279;p++)w[p]=0;for(p=31281;p<=31297;p++)w[p]=0;for(p=31461;p<=31469;p++)w[p]=0;for(p=31491;p<=31495;p++)w[p]=0;for(p=31917;p<=31922;p++)w[p]=0;for(p=31965;p<=32e3;p++)w[p]=0;for(p=32001;p<=32003;p++)w[p]=2;for(p=32005;p<=32031;p++)w[p]=2;for(p=32033;p<=32060;p++)w[p]=2;for(p=32064;p<=32067;p++)w[p]=2;for(p=32074;p<=32077;p++)w[p]=2;for(p=32081;p<=32086;p++)w[p]=0;for(p=32107;p<=32130;p++)w[p]=0;for(p=32133;p<=32159;p++)w[p]=0;for(p=32164;p<=32167;p++)w[p]=2;for(p=32180;p<=32199;p++)w[p]=0;for(p=32201;p<=32260;p++)w[p]=0;for(p=32301;p<=32360;p++)w[p]=0;for(p=32401;p<=32460;p++)w[p]=0;for(p=32501;p<=32560;p++)w[p]=0;for(p=32601;p<=32662;p++)w[p]=0;for(p=32664;p<=32667;p++)w[p]=2;for(p=32701;p<=32761;p++)w[p]=0;for(p=53001;p<=53004;p++)w[p]=0;for(p=53008;p<=53019;p++)w[p]=0;for(p=53021;p<=53032;p++)w[p]=0;for(p=53034;p<=53037;p++)w[p]=0;for(p=53042;p<=53046;p++)w[p]=0;for(p=53074;p<=53080;p++)w[p]=0;for(p=54001;p<=54004;p++)w[p]=0;for(p=54008;p<=54019;p++)w[p]=0;for(p=54021;p<=54032;p++)w[p]=0;for(p=54034;p<=54037;p++)w[p]=0;for(p=54042;p<=54046;p++)w[p]=0;for(p=54048;p<=54053;p++)w[p]=0;for(p=54074;p<=54080;p++)w[p]=0;for(p=54090;p<=54096;p++)w[p]=0;for(p=54098;p<=54101;p++)w[p]=0;for(p=65161;p<=65163;p++)w[p]=0;for(p=102001;p<=102040;p++)w[p]=0;for(p=102042;p<=102063;p++)w[p]=0;for(p=102065;p<=102067;p++)w[p]=0;for(p=102070;p<=102117;p++)w[p]=0;for(p=102122;p<=102216;p++)w[p]=0;for(p=102221;p<=102377;p++)w[p]=0;for(p=102382;p<=102388;p++)w[p]=0;for(p=102389;p<=102398;p++)w[p]=2;for(p=102399;p<=102444;p++)w[p]=0;for(p=102445;p<=102447;p++)w[p]=2;for(p=102448;p<=102458;p++)w[p]=0;for(p=102459;p<=102468;p++)w[p]=2;for(p=102469;p<=102499;p++)w[p]=0;for(p=102500;p<=102519;p++)w[p]=1;for(p=102520;p<=102524;p++)w[p]=0;for(p=102525;p<=102529;p++)w[p]=2;for(p=102530;p<=102588;p++)w[p]=0;for(p=102590;p<=102598;p++)w[p]=0;for(p=102601;p<=102603;p++)w[p]=0;for(p=102605;p<=102628;p++)w[p]=0;for(p=102629;p<=102646;p++)w[p]=2;for(p=102648;p<=102700;p++)w[p]=2;for(p=102701;p<=102703;p++)w[p]=0;for(p=102707;p<=102730;p++)w[p]=2;for(p=102733;p<=102758;p++)w[p]=2;for(p=102767;p<=102900;p++)w[p]=0;for(p=102901;p<=102933;p++)w[p]=2;for(p=102934;p<=102950;p++)w[p]=13;for(p=102951;p<=102963;p++)w[p]=0;for(p=102965;p<=102969;p++)w[p]=0;for(p=102971;p<=102973;p++)w[p]=0;for(p=102975;p<=102989;p++)w[p]=0;for(p=102990;p<=102992;p++)w[p]=1;for(p=102997;p<=103002;p++)w[p]=0;for(p=103003;p<=103008;p++)w[p]=2;for(p=103009;p<=103011;p++)w[p]=0;for(p=103012;p<=103014;p++)w[p]=2;for(p=103019;p<=103021;p++)w[p]=0;for(p=103022;p<=103024;p++)w[p]=2;for(p=103029;p<=103031;p++)w[p]=0;for(p=103032;p<=103034;p++)w[p]=2;for(p=103065;p<=103068;p++)w[p]=0;for(p=103074;p<=103076;p++)w[p]=0;for(p=103077;p<=103079;p++)w[p]=1;for(p=103080;p<=103082;p++)w[p]=0;for(p=103083;p<=103085;p++)w[p]=2;for(p=103090;p<=103093;p++)w[p]=0;for(p=103097;p<=103099;p++)w[p]=0;for(p=103100;p<=103102;p++)w[p]=2;for(p=103107;p<=103109;p++)w[p]=0;for(p=103110;p<=103112;p++)w[p]=2;for(p=103113;p<=103116;p++)w[p]=0;for(p=103117;p<=103120;p++)w[p]=2;for(p=103153;p<=103157;p++)w[p]=0;for(p=103158;p<=103162;p++)w[p]=2;for(p=103163;p<=103165;p++)w[p]=0;for(p=103166;p<=103168;p++)w[p]=1;for(p=103169;p<=103171;p++)w[p]=2;for(p=103186;p<=103188;p++)w[p]=0;for(p=103189;p<=103191;p++)w[p]=2;for(p=103192;p<=103195;p++)w[p]=0;for(p=103196;p<=103199;p++)w[p]=2;for(p=103200;p<=103224;p++)w[p]=0;for(p=103225;p<=103227;p++)w[p]=1;for(p=103232;p<=103237;p++)w[p]=0;for(p=103238;p<=103243;p++)w[p]=2;for(p=103244;p<=103246;p++)w[p]=0;for(p=103247;p<=103249;p++)w[p]=2;for(p=103254;p<=103256;p++)w[p]=0;for(p=103257;p<=103259;p++)w[p]=2;for(p=103264;p<=103266;p++)w[p]=0;for(p=103267;p<=103269;p++)w[p]=2;for(p=103300;p<=103375;p++)w[p]=0;for(p=103381;p<=103383;p++)w[p]=0;for(p=103384;p<=103386;p++)w[p]=1;for(p=103387;p<=103389;p++)w[p]=0;for(p=103390;p<=103392;p++)w[p]=2;for(p=103397;p<=103399;p++)w[p]=0;for(p=103400;p<=103471;p++)w[p]=2;for(p=103476;p<=103478;p++)w[p]=0;for(p=103479;p<=103481;p++)w[p]=2;for(p=103486;p<=103488;p++)w[p]=0;for(p=103489;p<=103491;p++)w[p]=2;for(p=103492;p<=103495;p++)w[p]=0;for(p=103496;p<=103499;p++)w[p]=2;for(p=103528;p<=103543;p++)w[p]=0;for(p=103544;p<=103548;p++)w[p]=2;for(p=103549;p<=103551;p++)w[p]=0;for(p=103552;p<=103554;p++)w[p]=1;for(p=103555;p<=103557;p++)w[p]=2;for(p=103558;p<=103560;p++)w[p]=0;for(p=103571;p<=103573;p++)w[p]=0;for(p=103574;p<=103576;p++)w[p]=2;for(p=103577;p<=103580;p++)w[p]=0;for(p=103581;p<=103583;p++)w[p]=2;for(p=103595;p<=103694;p++)w[p]=0;for(p=103696;p<=103699;p++)w[p]=0;for(p=103700;p<=103793;p++)w[p]=2;for(p=103794;p<=103890;p++)w[p]=0;for(p=103891;p<=103896;p++)w[p]=2;for(p=103900;p<=103971;p++)w[p]=2;for(p=103972;p<=103977;p++)w[p]=0;for(p=112e3;p<=112101;p++)w[p]=0;const H_=[102100,102113,3857,3785,900913],YC=[104905,104971],XC=[104903],eL=[4326,...H_,...YC,...XC],Qd=[-20037508342788905e-9,20037508342788905e-9],Sf=[-20037508342787e-6,20037508342787e-6],H4={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Qd,origin:Sf,dx:1e-5},W_={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Qd,origin:Sf,dx:1e-5},102100:H4,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Qd,origin:Sf,dx:1e-5},3857:H4,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:H4,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function at(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const r=t.wkid,i=e.wkid;if(r!=null||i!=null){if(r===i||Ks(t)&&Ks(e))return!0;const o=t.latestWkid;if(o!=null&&i===o)return!0;const l=e.latestWkid;return l!=null&&r===l}let s,n;return t.wkt2&&e.wkt2?(s=t.wkt2,n=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,n=e.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function Ir(t){const e=t?.wkid;return e!=null&&e>=2e3&&W_[e]||null}function Kd(t){if(!t)return;const{wkid:e,vcsWkid:r}=t;if(e)return r?JSON.stringify({wkid:e,vcsWkid:r}):String(e);const i=t.wkt||t.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function tp(t){if(!yi(t))return!1;const{wkid:e}=t;if(e)return w[e]==null;const r=t.wkt2||t.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function tL(t){return!(Z_(t)||J_(t))}function bl(t){return t?.wkid===4326}function sne(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function l8(t){return t?.wkid===4490}function Ks(t){const e=t?.wkid;return e!=null&&e>=2e3&&H_.includes(e)}function rL(t){return t?.wkid===32662}function Z2(t){return t===104971||t===104905}function Z_(t){return Z2(t?.wkid)}function J2(t){return t===104903}function J_(t){return J2(t?.wkid)}function iL(t){const e=t?.wkid;return e!=null&&e>=2e3&&eL.includes(e)}function yi(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Q_={wkid:4326,wkt:Ol(W_[4326].wkTemplate,{Central_Meridian:"0.0"})},K_={wkid:102100,latestWkid:3857},sL={wkid:32662};function A5(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const nL=A5(Ke),F5=A5(Hs),N5=A5(Jo),oL={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Ke.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},aL=F5.wkt.toUpperCase(),lL=N5.wkt.toUpperCase();function uL(t){if(t!=null&&yi(t)){const e=t.wkid,r=t.wkt2??t.wkt;if(Z2(e))return Hs;const i=r?.toUpperCase();if(r&&i===aL)return Hs;if(J2(e)||i&&i===lL)return Jo}return Ke}function nne(t){return Z2(t)?Hs:J2(t)?Jo:Ke}function o2(t){return at(t,nL)}function Ko(t){return o2(t)||at(t,F5)||at(t,N5)}const D5=39.37,cL=Ke.radius*Math.PI/200,Y_=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Fc=w,X_=/UNIT\[([^\]]+)]/i,pL=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),dL=Wt()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Wi=t=>t*t,uo=t=>t*t*t,Yd={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Wi(.001)},"square-centimeters":{inBaseUnits:Wi(.01)},"square-decimeters":{inBaseUnits:Wi(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Wi(1e3)},"square-inches":{inBaseUnits:Wi(.0254)},"square-feet":{inBaseUnits:Wi(.3048)},"square-yards":{inBaseUnits:Wi(.9144)},"square-miles":{inBaseUnits:Wi(1609.344)},"square-nautical-miles":{inBaseUnits:Wi(1852)},"square-us-feet":{inBaseUnits:Wi(1200/3937)},acres:{inBaseUnits:.0015625*Wi(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*uo(.001)},"cubic-centimeters":{inBaseUnits:1e3*uo(.01)},"cubic-decimeters":{inBaseUnits:1e3*uo(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*uo(1e3)},"cubic-inches":{inBaseUnits:1e3*uo(.0254)},"cubic-feet":{inBaseUnits:1e3*uo(.3048)},"cubic-yards":{inBaseUnits:1e3*uo(.9144)},"cubic-miles":{inBaseUnits:1e3*uo(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},hL=(()=>{const t={};for(const e in Yd)for(const r in Yd[e].units)t[r]=e;return t})();function yL(t,e,r){return t*Yd[r].units[e].inBaseUnits}function fL(t,e,r){return t/Yd[r].units[e].inBaseUnits}const mL=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],gL=["metric","imperial"],eS=[...gL,...mL],vL=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function xf(t){const e=hL[t];if(!e)throw new Error("unknown type");return e}function u8(t,e=null){return e=e||xf(t),Yd[e].baseUnit===t}function tt(t,e,r){if(e===r)return t;const i=xf(e);if(i!==xf(r))throw new Error("incompatible units");const s=u8(e,i)?t:yL(t,e,i);return u8(r,i)?s:fL(s,r,i)}function one(t,e,r,i=!1){if(!i&&tp(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=Cl(e);return s!==r&&(t=s?tt(t,s,r):tt(t*=_i(e),"meters",r)),t}function ane(t,e,r,i=!1){if(!i&&tp(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=Cl(r);return e!==s&&(t=s?tt(t,e,s):tt(t,e,"meters")/_i(r)),t}function wL(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function lne(t){return wL(t)}function une(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function cne(t,e,r){switch(r){case"metric":return bL(t,e);case"imperial":return SL(t,e);default:return r}}function pne(t,e,r){switch(r){case"metric":return _L(t,e);case"imperial":return xL(t,e);default:return r}}function bL(t,e){const r=tt(t,e,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function _L(t,e){const r=tt(t,e,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function SL(t,e){const r=tt(t,e,"feet");return Math.abs(r)<1e3?"feet":"miles"}function xL(t,e){const r=tt(t,e,"feet");return Math.abs(r)<1e5?"feet":"miles"}function dne(t,e){const r=tt(t,e,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function hne(t,e){const r=tt(t,e,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function $L(t,e,r){return tt(t,e,"meters")/(r*Math.PI/180)}function j5(t){return dL.fromJSON(t.toLowerCase())||null}function Nc(t){if(t!=null&&!tL(t))return 1;const e=_i(t);return e>1e5?1:e}function tS(t){return _i(t)>=uL(t).metersPerDegree?"meters":Cl(t)}function _i(t,e=Ke.metersPerDegree){return TL(t,!0)??e}function TL(t,e=!1){const r=t?.wkid??null,i=t?.wkt2??t?.wkt??null;let s=null;if(r){if(Z2(r))return Hs.metersPerDegree;if(J2(r))return Jo.metersPerDegree;s=Fc.values[Fc[r]],!s&&e&&pL.has(r)&&(s=cL)}else i&&(sS(i)?s=c8(Y_.exec(i),s):iS(i)&&(s=c8(X_.exec(i),s)));return s}function yne(t){return tp(t)?1:_i(t)}function c8(t,e){return t?.[1]?rS(t[1]):e}function rS(t){return parseFloat(t.split(",")[1])}function Cl(t){const e=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let i=null;if(e)i=Fc.units[Fc[e]];else if(r){const s=sS(r)?Y_:iS(r)?X_:null;if(s){const n=s.exec(r);n?.[1]&&(i=ML(n[1]))}}return i!=null?j5(i):null}function fne(t){const e=Cl(t);return e!=null&&eS.includes(e)?e:null}function mne(t){const e=tS(t);return e!=null&&eS.includes(e)?e:null}function gne(t){const e=Cl(t);return e==null?null:vL.get(e)}function iS(t){return/^GEOCCS/i.test(t)}function sS(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const IL=1e-7;function ML(t){let r=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!r||!j5(r)){const i=rS(t);r=null;const s=Fc.values;for(let n=0;n<s.length;++n)if(Math.abs(i-s[n])<IL){r=Fc.units[n];break}}return r}function vne(t){const e=Cl(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const EL={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},PL={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},OL={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},RL=Wt()(EL),CL=Wt()(PL),wne=Wt()(OL);var Ss,zs;let B=(zs=class extends F{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return Ss.WebMercator;if(e?.wkid===4326)return Ss.WGS84;const r=new Ss;return r.read(e),r}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return bl(this)}get isWebMercator(){return Ks(this)}get isGeographic(){return tp(this)}get isWrappable(){return iL(this)}get metersPerUnit(){return _i(this)}get unit(){return Cl(this)||(this.isGeographic?"degrees":null)}writeWkt(e,r){this.wkid||(r.wkt=e)}clone(){if(this===Ss.WGS84)return new Ss(Q_);if(this===Ss.WebMercator)return new Ss(K_);const e=new Ss;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=P(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:r,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return r==null||s?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===r&&n.referenceServiceName===i:n.id===r}return at(this,e)}toJSON(e){return this.write(void 0,e)}},Ss=zs,zs.GCS_NAD_1927=null,zs.WGS84=null,zs.WebMercator=null,zs.PlateCarree=null,zs);a([u({readOnly:!0})],B.prototype,"isWGS84",null),a([u({readOnly:!0})],B.prototype,"isWebMercator",null),a([u({readOnly:!0})],B.prototype,"isGeographic",null),a([u({readOnly:!0})],B.prototype,"isWrappable",null),a([u({type:ve,json:{write:!0}})],B.prototype,"latestWkid",void 0),a([u({readOnly:!0})],B.prototype,"metersPerUnit",null),a([u({readOnly:!0})],B.prototype,"unit",null),a([u({type:ve,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],B.prototype,"wkid",void 0),a([u({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],B.prototype,"wkt",void 0),a([j("wkt"),j("web-scene","wkt")],B.prototype,"writeWkt",null),a([u({type:String,json:{write:!1}})],B.prototype,"wkt2",void 0),a([u({type:ve,json:{write:!0}})],B.prototype,"vcsWkid",void 0),a([u({type:ve,json:{write:!0}})],B.prototype,"latestVcsWkid",void 0),a([u()],B.prototype,"imageCoordinateSystem",void 0),B=Ss=a([_("esri.geometry.SpatialReference")],B),B.prototype.toJSON.isDefaultToJSON=!0,B.GCS_NAD_1927=Z.freeze(new B({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),B.WGS84=Z.freeze(new B(Q_)),B.WebMercator=Z.freeze(new B(K_)),B.PlateCarree=Z.freeze(new B(sL));function A(t,e,r){let i,s;return e===void 0||Array.isArray(e)?(s=t,r=e,i=[void 0]):(s=e,i=Array.isArray(t)?t:[t]),(n,o)=>{const l=n.constructor.prototype;i.forEach(c=>{const d=w5(n,c,s);d.read&&typeof d.read=="object"||(d.read={}),d.read.reader=l[o],r&&(d.read.source=(d.read.source||[]).concat(r))})}}let It=class extends F{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=B.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,r){if(e instanceof B)return e;if(e!=null){const i=new B;return i.read(e,r),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,r){this.cache[e]=r}};a([u()],It.prototype,"type",void 0),a([u({readOnly:!0})],It.prototype,"cache",null),a([u({readOnly:!0})],It.prototype,"extent",null),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],It.prototype,"hasM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],It.prototype,"hasZ",void 0),a([u({type:B,json:{write:!0},value:B.WGS84})],It.prototype,"spatialReference",void 0),a([A("spatialReference")],It.prototype,"readSpatialReference",null),It=a([_("esri.geometry.Geometry")],It);function Dc(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new I("internal:mesh","Mesh geometries are not supported for this operation")}function LL(t){t.forEach(Dc)}const kL=57.29577951308232,AL=.017453292519943;function p8(t){return t*kL}function d8(t){return t*AL}function FL(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Ke.radius))}function $f(t){return t.wkid!=null||t.wkt!=null}const W4=[0,0];function a2(t,e,r,i,s){const n=t,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=e(n.x,n.y,W4,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=e(n.xmin,n.ymin,W4,i),[o.xmax,o.ymax]=e(n.xmax,n.ymax,W4,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const l="paths"in n?n.paths:n.rings,c=[];let d;for(let h=0;h<l.length;h++){const y=l[h];d=[],c.push(d);for(let f=0;f<y.length;f++)d.push(e(y[f][0],y[f][1],[0,0],i)),y[f].length>2&&d[f].push(y[f][2]),y[f].length>3&&d[f].push(y[f][3])}"paths"in o?o.paths=c:o.rings=c}else if("points"in n&&"points"in o){const l=n.points,c=[];for(let d=0;d<l.length;d++)c[d]=e(l[d][0],l[d][1],[0,0],i),l[d].length>2&&c[d].push(l[d][2]),l[d].length>3&&c[d].push(l[d][3]);o.points=c}return s}function gd(t,e){const r=t&&($f(t)?t:t.spatialReference),i=e&&($f(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!r||!i)&&(!!at(i,r)||Ks(i)&&bl(r)||Ks(r)&&bl(i))}function Ih(t,e){if(t==null)return null;const r=t.spatialReference,i=e&&($f(e)?e:e.spatialReference);return gd(r,i)?at(r,i)?P(t):Ks(i)?a2(t,Ja,B.WebMercator,!1,P(t)):bl(i)?a2(t,Mh,B.WGS84,!1,P(t)):null:null}function Ja(t,e,r=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const i=d8(e);return r[0]=d8(t)*Ke.radius,r[1]=Ke.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function Mh(t,e,r=[0,0],i=!1){if(t===Qd[0])r[0]=-180;else if(t===Qd[1])r[0]=180;else{const s=p8(t/Ke.radius);r[0]=i?s:s-360*Math.floor((s+180)/360)}return r[1]=p8(Math.PI/2-2*Math.atan(Math.exp(-e/Ke.radius))),r}function Go(t,e=!1,r=P(t)){return Dc(t),Dc(r),a2(t,Ja,B.WebMercator,e,r)}function Qa(t,e=!1,r=P(t)){return Dc(t),Dc(r),a2(t,Mh,B.WGS84,e,r)}const nS=Object.freeze(Object.defineProperty({__proto__:null,canProject:gd,geographicToWebMercator:Go,lngLatToXY:Ja,project:Ih,webMercatorToGeographic:Qa,xyToLngLat:Mh,y2lat:FL},Symbol.toStringTag,{value:"Module"}));function oS(t,e){const r=t.x-e.x,i=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(r*r+i*i+s*s)}function NL(t){return aS(t,lS)?.[0]??null}function DL(t){return aS(t,lS)?.[1]??null}function aS({x:t,y:e,spatialReference:r},i=[0,0]){if(r){if(Ks(r))return Mh(t,e,i);if(tp(r))return i[0]=t,i[1]=e,i}return null}const lS=[0,0];var J1;const Z4=[0,0];function h8(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ne=J1=class extends It{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const r=t._get("spatialReference");e._set("spatialReference",Z.isFrozen(r)?r:r.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,r,i,s){let n;if(Array.isArray(t))n=t,s=e,t=n[0],e=n[1],r=n[2],i=n[3];else if(t&&typeof t=="object"){if(n=t,t=n.x!=null?n.x:n.longitude,e=n.y!=null?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new B(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)N.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)N.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s?.isWebMercator){const l=Ja(n.longitude,n.latitude,Z4);t=l[0],e=l[1]}}}else h8(r)?(s=r,r=null):h8(i)&&(s=i,i=null);const o={x:t,y:e};return o.x==null&&o.y!=null?N.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&N.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return DL(this)}set latitude(t){const{spatialReference:e,x:r}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Ja(r,t,Z4)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return NL(this)}set longitude(t){const{y:e,spatialReference:r}=this;t!=null&&r&&(r.isWebMercator?this._set("x",Ja(t,e,Z4)[0]):r.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,r){e[r]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new J1;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return J1.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:l}=t;let{x:c,y:d,spatialReference:h}=t;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[c,d]=Ja(c,d),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[c,d]=Mh(c,d),h=n}return e===c&&r===d&&i===o&&s===l&&n.wkid===h.wkid}offset(t,e,r){return this.x+=t,this.y+=e,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const t=Ir(this.spatialReference);if(!t)return this;let e=this.x;const[r,i]=t.valid,s=2*i;let n;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s),this._set("x",e),this}distance(t){return oS(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};a([u({readOnly:!0})],ne.prototype,"cache",null),a([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ne.prototype,"hasM",null),a([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ne.prototype,"hasZ",null),a([u({type:Number})],ne.prototype,"latitude",null),a([u({type:Number})],ne.prototype,"longitude",null),a([u({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),xe(t=>isNaN(t)?t:Ur(t))],ne.prototype,"x",void 0),a([j("x")],ne.prototype,"writeX",null),a([A("x")],ne.prototype,"readX",null),a([u({type:Number,json:{write:!0}})],ne.prototype,"y",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ne.prototype,"z",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ne.prototype,"m",void 0),ne=J1=a([_("esri.geometry.Point")],ne),ne.prototype.toJSON.isDefaultToJSON=!0;const uS=Object.freeze(Object.defineProperty({__proto__:null,get default(){return ne}},Symbol.toStringTag,{value:"Module"})),J4=[0,0];function Eh(t,e){return e!=null&&yr(t,e.x,e.y,e.z)}function _ne(t,e){if(!e.points?.length)return!1;for(const r of e.points)if(!jc(t,r))return!1;return!0}function jL(t,e){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:l}=e;return t.hasZ&&e.hasZ?yr(t,r,i,s)&&yr(t,r,o,s)&&yr(t,n,o,s)&&yr(t,n,i,s)&&yr(t,r,i,l)&&yr(t,r,o,l)&&yr(t,n,o,l)&&yr(t,n,i,l):yr(t,r,i)&&yr(t,r,o)&&yr(t,n,o)&&yr(t,n,i)}function jc(t,e){return yr(t,e[0],e[1])}function VL(t,e){return yr(t,e[0],e[1],e[2])}function yr(t,e,r,i){return e>=t.xmin&&e<=t.xmax&&r>=t.ymin&&r<=t.ymax&&(i==null||!t.hasZ||i>=t.zmin&&i<=t.zmax)}function V5(t,e){return J4[1]=e.y,J4[0]=e.x,zL(t,J4)}function zL(t,e){return z5(t.rings,e)}function z5(t,e){if(!t||t.length<1)return!1;if(UL(t))return y8(!1,t,e);let r=!1;for(let i=0,s=t.length;i<s;i++)r=y8(r,t[i],e);return r}function UL(t){return!Array.isArray(t[0][0])}function y8(t,e,r){const[i,s]=r;let n=t,o=0;for(let l=0,c=e.length;l<c;l++){o++,o===c&&(o=0);const[d,h]=e[l],[y,f]=e[o];(h<s&&f>=s||f<s&&h>=s)&&d+(s-h)/(f-h)*(y-d)<i&&(n=!n)}return n}function qL(t,e){return Eh(t,e)}function GL(t,e){const r=t.hasZ&&e.hasZ;let i,s,n;if(t.xmin<=e.xmin){if(i=e.xmin,t.xmax<i)return!1}else if(i=t.xmin,e.xmax<i)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(r&&e.hasZ){if(t.zmin<=e.zmin){if(n=e.zmin,t.zmax<n)return!1}else if(n=t.zmin,e.zmax<n)return!1}return!0}function BL(t,e){const{points:r,hasZ:i}=e,s=i?VL:jc;for(const n of r)if(s(t,n))return!0;return!1}const _l=[0,0],Sl=[0,0],xl=[0,0],$l=[0,0],HL=[_l,Sl,xl,$l],cS=[[xl,_l],[_l,Sl],[Sl,$l],[$l,xl]];function WL(t,e){return ZL(t,e.rings)}function ZL(t,e){_l[0]=t.xmin,_l[1]=t.ymax,Sl[0]=t.xmax,Sl[1]=t.ymax,xl[0]=t.xmin,xl[1]=t.ymin,$l[0]=t.xmax,$l[1]=t.ymin;for(const r of HL)if(z5(e,r))return!0;for(const r of e){if(!r.length)continue;let i=r[0];if(jc(t,i))return!0;for(let s=1;s<r.length;s++){const n=r[s];if(jc(t,n)||pS(i,n,cS))return!0;i=n}}return!1}function JL(t,e){_l[0]=t.xmin,_l[1]=t.ymax,Sl[0]=t.xmax,Sl[1]=t.ymax,xl[0]=t.xmin,xl[1]=t.ymin,$l[0]=t.xmax,$l[1]=t.ymin;const r=e.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(jc(t,s))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(jc(t,o)||pS(s,o,cS))return!0;s=o}}return!1}const Lt=[0,0];function QL(t){for(let e=0;e<t.length;e++){const r=t[e];for(let s=0;s<r.length-1;s++){const n=r[s],o=r[s+1];for(let l=e+1;l<t.length;l++)for(let c=0;c<t[l].length-1;c++){const d=t[l][c],h=t[l][c+1];if(Tf(n,o,d,h,Lt)&&!(Lt[0]===n[0]&&Lt[1]===n[1]||Lt[0]===d[0]&&Lt[1]===d[1]||Lt[0]===o[0]&&Lt[1]===o[1]||Lt[0]===h[0]&&Lt[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let n=i-1;s===0&&(n=i-2);const o=r[s],l=r[s+1];for(let c=s+2;c<n;c++){const d=r[c],h=r[c+1];if(Tf(o,l,d,h,Lt)&&!(Lt[0]===o[0]&&Lt[1]===o[1]||Lt[0]===d[0]&&Lt[1]===d[1]||Lt[0]===l[0]&&Lt[1]===l[1]||Lt[0]===h[0]&&Lt[1]===h[1]))return!0}}}return!1}function pS(t,e,r){for(let i=0;i<r.length;i++)if(Tf(t,e,r[i][0],r[i][1]))return!0;return!1}function Tf(t,e,r,i,s){const[n,o]=t,[l,c]=e,[d,h]=r,[y,f]=i,m=y-d,g=n-d,v=l-n,b=f-h,S=o-h,$=c-o,E=b*v-m*$;if(E===0)return!1;const T=(m*S-b*g)/E,O=(v*S-$*g)/E;return T>=0&&T<=1&&O>=0&&O<=1&&(s&&(s[0]=n+T*(l-n),s[1]=o+T*(c-o)),!0)}function KL(t){switch(t){case"esriGeometryEnvelope":case"extent":return GL;case"esriGeometryMultipoint":case"multipoint":return BL;case"esriGeometryPoint":case"point":return qL;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return WL;case"esriGeometryPolyline":case"polyline":return JL}}var Ki;function YL(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function co(t,e,r){return e==null?r:r==null?e:t(e,r)}let ue=Ki=class extends It{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,r,i,s){return YL(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?B.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:r,ymax:i,spatialReference:s??B.WGS84}}static fromPoint(t){return new Ki({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new ne({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Ki;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,r=t.spatialReference;return e&&r&&!e.equals(r)&&gd(e,r)&&(t=e.isWebMercator?Go(t):Qa(t,!0)),t.type==="point"?Eh(this,t):t.type==="extent"&&jL(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,r=t.spatialReference;return e&&r&&!e.equals(r)&&gd(e,r)&&(t=e.isWebMercator?Go(t):Qa(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),r=this.width*e,i=this.height*e;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,r=t.spatialReference;return e&&r&&!at(e,r)&&gd(e,r)&&(t=e.isWebMercator?Go(t):Qa(t,!0)),KL(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,r){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=co(Math.min,this.zmin,t.zmin),this.zmax=co(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=co(Math.min,this.mmin,t.mmin),this.mmax=co(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=co(Math.max,this.zmin,t.zmin),this.zmax=co(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=co(Math.max,this.mmin,t.mmin),this.mmax=co(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Ir(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,r=this._getCM(t);if(r){const i=e.isWebMercator?Qa(r):r;this.xmin-=r.x,this.xmax-=r.x,e.isWebMercator||(i.x=Q4(i.x,t).x),this.spatialReference=new B(Ol((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(t){let e=null;const[r,i]=t.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(e=this.center),e}_normalize(t,e,r){const i=this.spatialReference;if(!i)return this;const s=r??Ir(i);if(s==null)return this;const n=this._getParts(s).map(c=>c.extent);if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return n;let o=!0,l=!0;return n.forEach(c=>{c.hasZ||(o=!1),c.hasM||(l=!1)}),{rings:n.map(c=>{const d=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(o){const h=(c.zmax-c.zmin)/2;for(let y=0;y<d.length;y++)d[y].push(h)}if(l){const h=(c.mmax-c.mmin)/2;for(let y=0;y<d.length;y++)d[y].push(h)}return d}),hasZ:o,hasM:l,spatialReference:i}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:n,spatialReference:o}=this,l=this.width,c=this.xmin,d=this.xmax;let h;t=t||Ir(o);const[y,f]=t.valid;h=Q4(this.xmin,t);const m=h.x,g=h.frameId;h=Q4(this.xmax,t);const v=h.x,b=h.frameId,S=m===v&&l>0;if(l>2*f){const $=new Ki(c<d?m:v,s,f,n,o),E=new Ki(y,s,c<d?v:m,n,o),T=new Ki(0,s,f,n,o),O=new Ki(y,s,0,n,o),C=[],z=[];$.contains(T)&&C.push(g),$.contains(O)&&z.push(g),E.contains(T)&&C.push(b),E.contains(O)&&z.push(b);for(let q=g+1;q<b;q++)C.push(q),z.push(q);e.push({extent:$,frameIds:[g]},{extent:E,frameIds:[b]},{extent:T,frameIds:C},{extent:O,frameIds:z})}else m>v||S?e.push({extent:new Ki(m,s,f,n,o),frameIds:[g]},{extent:new Ki(y,s,v,n,o),frameIds:[b]}):e.push({extent:new Ki(m,s,v,n,o),frameIds:[g]});this.cache._parts=e}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<e.length;n++)e[n].extent.set(s)}return e}};function Q4(t,e){const[r,i]=e.valid,s=2*i;let n,o=0;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s,o=n):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s,o=-n),{x:t,frameId:o}}a([u({readOnly:!0})],ue.prototype,"cache",null),a([u({readOnly:!0})],ue.prototype,"center",null),a([u({readOnly:!0})],ue.prototype,"extent",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ue.prototype,"hasM",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ue.prototype,"hasZ",null),a([u({readOnly:!0})],ue.prototype,"height",null),a([u({readOnly:!0})],ue.prototype,"width",null),a([u({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ue.prototype,"xmin",void 0),a([u({type:Number,json:{write:!0}})],ue.prototype,"ymin",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],ue.prototype,"mmin",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ue.prototype,"zmin",void 0),a([u({type:Number,json:{write:!0}})],ue.prototype,"xmax",void 0),a([u({type:Number,json:{write:!0}})],ue.prototype,"ymax",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],ue.prototype,"mmax",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ue.prototype,"zmax",void 0),ue=Ki=a([_("esri.geometry.Extent")],ue),ue.prototype.toJSON.isDefaultToJSON=!0;let t1;function XL(t){return t1&&!t1.destroyed||(t1=t()),t1}var If;const ek=new be({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let rt=If=class extends Z{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new If({categories:this.categories?P(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=Ih(this.extent,B.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const n={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>ek.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...e,...n}}}};a([u()],rt.prototype,"categories",void 0),a([u()],rt.prototype,"disableExtraQuery",void 0),a([u({type:ue})],rt.prototype,"extent",void 0),a([u()],rt.prototype,"filter",void 0),a([u()],rt.prototype,"num",void 0),a([u()],rt.prototype,"query",void 0),a([u()],rt.prototype,"sortField",void 0),a([u()],rt.prototype,"sortOrder",null),a([u()],rt.prototype,"start",void 0),rt=If=a([_("esri.portal.PortalQueryParams")],rt);var Mf;let et=Mf=class extends F{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const r=e.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):r})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new I("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Mf({sourceJSON:t});return e.read(t),e}queryItems(t,e){let r=Yr(rt,t);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new rt,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",e)):(r=r?r.clone():new rt,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,e))}_fetchCategorySchemaSet(t,e){const r=this.portal;return r.fetchSelf(r.authMode,!0,e).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const n=new rt({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(n,e)}throw new I("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],n=new rt({num:1,query:`typekeywords:"${t}"`});return s.queryItems(n,e)}throw new I("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",e).then(s=>{const n=s?.categorySchema;return n?.length?n:[]}):[])}};a([u()],et.prototype,"access",void 0),a([u({type:Date})],et.prototype,"created",void 0),a([u()],et.prototype,"description",void 0),a([u()],et.prototype,"id",void 0),a([u()],et.prototype,"isInvitationOnly",void 0),a([u({type:Date})],et.prototype,"modified",void 0),a([u()],et.prototype,"owner",void 0),a([u()],et.prototype,"portal",void 0),a([u()],et.prototype,"snippet",void 0),a([u()],et.prototype,"sortField",void 0),a([u()],et.prototype,"sortOrder",void 0),a([u()],et.prototype,"sourceJSON",void 0),a([u()],et.prototype,"tags",void 0),a([u()],et.prototype,"thumbnail",void 0),a([u({readOnly:!0})],et.prototype,"thumbnailUrl",null),a([u()],et.prototype,"title",void 0),a([u({readOnly:!0})],et.prototype,"url",null),et=Mf=a([_("esri.portal.PortalGroup")],et);let ba=class extends Z{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};a([u()],ba.prototype,"nextQueryParams",void 0),a([u()],ba.prototype,"queryParams",void 0),a([u()],ba.prototype,"results",void 0),a([u()],ba.prototype,"total",void 0),ba=a([_("esri.portal.PortalQueryResult")],ba);let an=class extends F{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new I("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};a([u({type:Date})],an.prototype,"created",void 0),a([u()],an.prototype,"id",void 0),a([u()],an.prototype,"portal",void 0),a([u()],an.prototype,"title",void 0),a([u({readOnly:!0})],an.prototype,"url",null),a([u()],an.prototype,"username",void 0),an=a([_("esri.portal.PortalFolder")],an);var Ef;let Ee=Ef=class extends F{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,r=t?.data,i=t?.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+(typeof i=="string"?i:i.id)),this.portal.request(n+"/addItem",s).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let r=this.userContentUrl;t.ownerFolder&&(r+="/"+t.ownerFolder);const i=e?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${t.id}/delete`,{method:"post",query:i}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const r=this.userContentUrl+"/deleteItems",i=[],s=t.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:e}},o=await this.portal.request(r,n);for(const l of o.results){const c=t.find(y=>l.itemId===y.id),d=l.success;let h=null;d?(c.id=null,c.portal=null):l.error&&(h=new I("portal:delete-item-failed",l.error.message,l.error)),i.push({item:c,success:d,error:h})}}return i}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let r;return r=e&&e.folders?e.folders.map(i=>{const s=an.fromJSON(i);return s.portal=this.portal,s}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(r=>{const i=et.fromJSON(r);return i.portal=this.portal,i}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:r}=await R(()=>Promise.resolve().then(()=>dS),void 0),i={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:i});let n;return s?.items?(n=s.items.map(o=>{const l=r.fromJSON(o);return l.portal=this.portal,l}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new et({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new I("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const r=this.userContentUrl,i=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(r+`/items/${t.id}/restore`,{method:"post",query:i})}toJSON(){throw new I("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Ef({sourceJSON:t});return e.read(t),e}};a([u()],Ee.prototype,"access",void 0),a([u({type:Date})],Ee.prototype,"created",void 0),a([u()],Ee.prototype,"culture",void 0),a([u()],Ee.prototype,"description",void 0),a([u()],Ee.prototype,"email",void 0),a([u()],Ee.prototype,"favGroupId",void 0),a([u()],Ee.prototype,"fullName",void 0),a([u()],Ee.prototype,"id",void 0),a([u({type:Date})],Ee.prototype,"modified",void 0),a([u()],Ee.prototype,"orgId",void 0),a([u()],Ee.prototype,"portal",void 0),a([u()],Ee.prototype,"preferredView",void 0),a([u()],Ee.prototype,"privileges",void 0),a([u()],Ee.prototype,"region",void 0),a([u()],Ee.prototype,"role",void 0),a([u()],Ee.prototype,"roleId",void 0),a([u()],Ee.prototype,"sourceJSON",void 0),a([u()],Ee.prototype,"thumbnail",void 0),a([u({readOnly:!0})],Ee.prototype,"thumbnailUrl",null),a([u()],Ee.prototype,"units",void 0),a([u({readOnly:!0})],Ee.prototype,"userContentUrl",null),a([u({readOnly:!0})],Ee.prototype,"url",null),a([u()],Ee.prototype,"username",void 0),a([u()],Ee.prototype,"userLicenseTypeId",void 0),a([u()],Ee.prototype,"userType",void 0),Ee=Ef=a([_("esri.portal.PortalUser")],Ee);var ei;let hp;const f8={PortalGroup:()=>Promise.resolve({default:et}),PortalItem:()=>R(()=>Promise.resolve().then(()=>dS),void 0),PortalUser:()=>Promise.resolve({default:Ee})};var Us;let D=(Us=class extends Rl(ep){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Hr.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){m8.unregister(this),this.defaultBasemap=st(this.defaultBasemap),this.defaultDevBasemap=st(this.defaultDevBasemap),this.defaultVectorBasemap=st(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Je(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const r of e)Hr.request.trustedServers.includes(r)||Hr.request.trustedServers.push(r);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,r=!e||this.canSearchPublic;return this.id&&!r?` AND orgid:${this.id}`:null}get hasAPIKey(){return fR(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const r=e.indexOf("/sharing");e=r>0?e.slice(0,r):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,r=this.thumbnail;return e&&r?this._normalizeSSL(e+"/portals/self/resources/"+r):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let r=null;return e&&(r=Ee.fromJSON(e),r.portal=this),r}load(e){const r=R(async()=>{const{default:i}=await Promise.resolve().then(()=>Lk);return{default:i}},void 0).then(({default:i})=>{Ce(e),hp=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{if(!this.hasAPIKey&&nt){const s=nt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==ei.AUTH_MODE_AUTO&&this.authMode!==ei.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",tk(new WeakRef(this))),m8.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),r=(await R(async()=>{const{default:i}=await import("./money-tides-ElevationLayer-ClpE7ppO.js");return{default:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))).default;return e?e.map(i=>new r({id:i.id,url:i.url})):[]}async fetchBasemaps(e,r){const i=await this._fetchBasemaps(e,r);if(r?.include3d===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(e,r);i.unshift(...s)}return i}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const r=new rt;r.query=this.default3DBasemapQuery,r.disableExtraQuery=!0;const i=(await this.queryItems(r,e)).results.find(s=>s.type==="Web Scene");return i?new hp({portalItem:i}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(r=>r.categorySchema):Gs(e)?Promise.reject(Mt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(r=>r.classificationSchema):null}fetchFeaturedGroups(e){const r=this.featuredGroups,i=new rt({num:100,sortField:"title"});if(r?.length){const s=[];for(const n of r)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return Gs(e)?Promise.reject(Mt()):Promise.resolve([])}fetchRegions(e){const r=this.user?.culture||this.culture||Bn();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:r}})}fetchSettings(e){const r=this.user?.culture||this.culture||Bn();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:r}})}static getDefault(){return XL(()=>new ei)}queryGroups(e,r){return this.queryPortal("/community/groups",e,"PortalGroup",r)}queryItems(e,r){return this.queryPortal("/search",e,"PortalItem",r)}queryUsers(e,r){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",r)}fetchSelf(e=this.authMode,r=!1,i){const s=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Bn().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),r&&(n.query.default=!0),this.request(s,n)}queryPortal(e,r,i,s){const n=Yr(rt,r),o=l=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...s}).then(c=>{const d=n.clone();return d.start=c.nextStart,new ba({nextQueryParams:d,queryParams:n,total:c.total,results:ei._resultsToTypedArray(l,{portal:this},c,s)})}).then(c=>Promise.all(c.results.map(d=>typeof d.when=="function"?d.when():c)).then(()=>c,d=>(nr(d),c)));return i&&f8[i]?f8[i]().then(({default:l})=>(Ce(s),o(l))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new I("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===ei.AUTH_MODE_ANONYMOUS||this.authMode===ei.AUTH_MODE_NO_PROMPT&&!nt)return Promise.reject(new I("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=r=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(r||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=r,this.fetchSelf("immediate"))):this.user&&this.credential===r?null:(this.credential=r,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return nt?nt.getCredential(this.restUrl,{prompt:this.authMode!==ei.AUTH_MODE_NO_PROMPT}).then(r=>e(r)):e(this.credential)}normalizeUrl(e){const r=this.credential?.token;return this._normalizeSSL(r?e+(e.includes("?")?"&":"?")+"token="+r:e)}requestToTypedArray(e,r,i){return this.request(e,r).then(s=>{const n=ei._resultsToTypedArray(i,{portal:this},s);return Promise.all(n.map(o=>typeof o.when=="function"?o.when():s)).then(()=>n,()=>n)})}request(e,r={}){const i={f:"json",...r.query},{authMode:s=this.authMode===ei.AUTH_MODE_ANONYMOUS||this.authMode===ei.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:o=!1,method:l="auto",responseType:c="json",signal:d}=r,h={authMode:s,body:n,cacheBust:o,method:l,query:i,responseType:c,timeout:0,signal:d};return r.withCredentials&&(h.withCredentials=!0),Te(this._normalizeSSL(e),h).then(y=>y.data)}toJSON(){throw new I("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ei({sourceJSON:e})}_getHelperService(e){const r=this.helperServices?.[e];if(!r)throw new I("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return r}async _fetchBasemaps(e,r){const i=new rt;i.query=e||(mf()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,r);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,r);return o.total?o.results.filter(l=>l.type==="Web Map").map(l=>new hp({portalItem:l})):[]}async _fetchBasemaps3D(e,r){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];if(mf())return[];const s=new rt({query:i,disableExtraQuery:!0}),n=await this.queryGroups(s,r);if(!n.total)return[];const o=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=o.sortField||"name",s.sortOrder=o.sortOrder||"desc";const l=await o.queryItems(s,r);return l.total?l.results.filter(c=>c.type==="Web Scene").map(c=>new hp({portalItem:c})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const r=hp.fromJSON(e);return r.portalItem={portal:this},r}return null}static _resultsToTypedArray(e,r,i,s){let n;if(i){const o=s!=null?s.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||r)&&(n=n.map(l=>{const c=Object.assign(e?e.fromJSON(l):l,r);return typeof c.load=="function"&&c.load(o),c}))}else n=[];return n}},ei=Us,Us.AUTH_MODE_ANONYMOUS="anonymous",Us.AUTH_MODE_AUTO="auto",Us.AUTH_MODE_IMMEDIATE="immediate",Us.AUTH_MODE_NO_PROMPT="no-prompt",Us);a([u()],D.prototype,"access",void 0),a([u()],D.prototype,"allSSL",void 0),a([u()],D.prototype,"authMode",void 0),a([u()],D.prototype,"authorizedCrossOriginDomains",void 0),a([A("authorizedCrossOriginDomains")],D.prototype,"readAuthorizedCrossOriginDomains",null),a([u()],D.prototype,"basemapGalleryGroupQuery",void 0),a([u({json:{name:"3DBasemapGalleryGroupQuery"}})],D.prototype,"basemapGalleryGroupQuery3D",void 0),a([u({json:{name:"g3DTilesGalleryGroupQuery"}})],D.prototype,"g3DTilesGalleryGroupQuery",void 0),a([u({json:{name:"g3dTilesEnabled"}})],D.prototype,"g3dTilesEnabled",void 0),a([u()],D.prototype,"bingKey",void 0),a([u()],D.prototype,"canListApps",void 0),a([u()],D.prototype,"canListData",void 0),a([u()],D.prototype,"canListPreProvisionedItems",void 0),a([u()],D.prototype,"canProvisionDirectPurchase",void 0),a([u()],D.prototype,"canSearchPublic",void 0),a([u()],D.prototype,"canShareBingPublic",void 0),a([u()],D.prototype,"canSharePublic",void 0),a([u()],D.prototype,"canSignInArcGIS",void 0),a([u()],D.prototype,"canSignInIDP",void 0),a([u()],D.prototype,"colorSetsGroupQuery",void 0),a([u()],D.prototype,"commentsEnabled",void 0),a([u({type:Date})],D.prototype,"created",void 0),a([u()],D.prototype,"credential",void 0),a([u()],D.prototype,"culture",void 0),a([u()],D.prototype,"currentVersion",void 0),a([u()],D.prototype,"customBaseUrl",void 0),a([u()],D.prototype,"default3DBasemapQuery",void 0),a([u()],D.prototype,"defaultBasemap",void 0),a([A("defaultBasemap")],D.prototype,"readDefaultBasemap",null),a([u()],D.prototype,"defaultDevBasemap",void 0),a([A("defaultDevBasemap")],D.prototype,"readDefaultDevBasemap",null),a([u({type:ue})],D.prototype,"defaultExtent",void 0),a([u()],D.prototype,"defaultVectorBasemap",void 0),a([A("defaultVectorBasemap")],D.prototype,"readDefaultVectorBasemap",null),a([u()],D.prototype,"description",void 0),a([u()],D.prototype,"devBasemapGalleryGroupQuery",void 0),a([u()],D.prototype,"eueiEnabled",void 0),a([u({readOnly:!0})],D.prototype,"extraQuery",null),a([u()],D.prototype,"featuredGroups",void 0),a([u()],D.prototype,"featuredItemsGroupQuery",void 0),a([u()],D.prototype,"galleryTemplatesGroupQuery",void 0),a([u()],D.prototype,"layoutGroupQuery",void 0),a([u()],D.prototype,"livingAtlasGroupQuery",void 0),a([u({readOnly:!0})],D.prototype,"hasAPIKey",null),a([u()],D.prototype,"hasCategorySchema",void 0),a([u()],D.prototype,"hasClassificationSchema",void 0),a([u()],D.prototype,"helpBase",void 0),a([u()],D.prototype,"helperServices",void 0),a([u()],D.prototype,"helpMap",void 0),a([u()],D.prototype,"homePageFeaturedContent",void 0),a([u()],D.prototype,"homePageFeaturedContentCount",void 0),a([u()],D.prototype,"httpPort",void 0),a([u()],D.prototype,"httpsPort",void 0),a([u()],D.prototype,"id",void 0),a([u()],D.prototype,"ipCntryCode",void 0),a([u({readOnly:!0})],D.prototype,"isOrganization",null),a([u()],D.prototype,"isPortal",void 0),a([u()],D.prototype,"isReadOnly",void 0),a([u({readOnly:!0})],D.prototype,"itemPageUrl",null),a([u()],D.prototype,"layerTemplatesGroupQuery",void 0),a([u()],D.prototype,"maxTokenExpirationMinutes",void 0),a([u({type:Date})],D.prototype,"modified",void 0),a([u()],D.prototype,"name",void 0),a([u()],D.prototype,"portalHostname",void 0),a([u()],D.prototype,"portalMode",void 0),a([u()],D.prototype,"portalProperties",void 0),a([u()],D.prototype,"region",void 0),a([u()],D.prototype,"recycleBinEnabled",void 0),a([u({readOnly:!0})],D.prototype,"restUrl",null),a([u()],D.prototype,"rotatorPanels",void 0),a([u()],D.prototype,"showHomePageDescription",void 0),a([u()],D.prototype,"sourceJSON",void 0),a([u()],D.prototype,"staticImagesUrl",void 0),a([u({json:{name:"2DStylesGroupQuery"}})],D.prototype,"stylesGroupQuery2d",void 0),a([u({json:{name:"stylesGroupQuery"}})],D.prototype,"stylesGroupQuery3d",void 0),a([u()],D.prototype,"supportsHostedServices",void 0),a([u()],D.prototype,"symbolSetsGroupQuery",void 0),a([u()],D.prototype,"templatesGroupQuery",void 0),a([u()],D.prototype,"thumbnail",void 0),a([u({readOnly:!0})],D.prototype,"thumbnailUrl",null),a([u()],D.prototype,"units",void 0),a([u()],D.prototype,"url",void 0),a([u()],D.prototype,"urlKey",void 0),a([A("urlKey")],D.prototype,"readUrlKey",null),a([u()],D.prototype,"user",void 0),a([A("user")],D.prototype,"readUser",null),a([u()],D.prototype,"use3dBasemaps",void 0),a([u()],D.prototype,"useDefault3dBasemap",void 0),a([u()],D.prototype,"useStandardizedQuery",void 0),a([u()],D.prototype,"useVectorBasemaps",void 0),a([u()],D.prototype,"vectorBasemapGalleryGroupQuery",void 0),D=ei=a([_("esri.portal.Portal")],D);const m8=new FinalizationRegistry(t=>{t.remove()});function tk(t){const e=nt;return()=>{const r=t.deref();r&&e.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let ln=class extends Z{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:g8(e.path,e.portalItem)}:e}set path(e){e!=null&&Xc(e)?N.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return g8(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",r){const i=this.cdnUrl;if(i==null)throw new I("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:e,query:{token:this.portalItem.apiKey,_ts:r?.cacheBust?Date.now():null},signal:r?.signal})}async update(e,r){const{addOrUpdateResources:i}=await R(()=>import("./money-tides-resourceUtils-DIsE7pCo.js"),__vite__mapDeps([15,3,4,1,2,5,6,7]));return await i(this.portalItem,[{resource:this,content:e,compress:r?.compress,access:r?.access}],"update",r),this}hasPath(){return this.path!=null}};function g8(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&Xc(t)&&(t=mR(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}a([u()],ln.prototype,"portalItem",void 0),a([u({type:String,value:null})],ln.prototype,"path",null),a([xe("path")],ln.prototype,"_castPath",null),a([u({type:String,readOnly:!0})],ln.prototype,"url",null),a([u({type:String,readOnly:!0})],ln.prototype,"cdnUrl",null),a([u({type:String,readOnly:!0})],ln.prototype,"itemRelativeUrl",null),ln=a([_("esri.portal.PortalItemResource")],ln);let Ka=class extends Z{constructor(e){super(e),this.created=null,this.rating=null}};a([u({type:Date})],Ka.prototype,"created",void 0),a([u()],Ka.prototype,"rating",void 0),Ka=a([_("esri.portal.PortalRating")],Ka);var _a;const rk=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),ik=new Set(["KML","GeoJson","CSV"]);let ae=_a=class extends Rl(ep){static from(t){return Cc(_a,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let r=t;return t==="Feature Service"||t==="Feature Collection"?r=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?r=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?r="Scene Layer":t==="Video Service"?r="Video Layer":t==="Scene Package"?r="Scene Layer Package":t==="Stream Service"?r="Feature Layer":t==="Geoprocessing Service"?r=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?r="GeoEnrichment Service":t==="Geocoding Service"?r="Locator":t==="Microsoft Powerpoint"?r="Microsoft PowerPoint":t==="GeoJson"?r="GeoJSON":t==="Globe Service"?r="Globe Layer":t==="Vector Tile Service"?r="Tile Layer":t==="netCDF"?r="NetCDF":t==="Map Service"?r=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?r=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?r="Big Data File Share":t==="Compact Tile Package"?r="Tile Package (tpkx)":t==="Raster function template"?r="Raster Function Template":t==="OGCFeatureServer"?r="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?r="Instant App":t==="Insights Page"?r="Insights Report":t==="Excalibur Imagery Project"?r="Excalibur Project":t==="3DTiles Service"?r="3D tiles layer":t==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(t){return t&&t.length?new ue(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,n=!1,o=!1,l=!1,c=!1,d=!1,h=!1,y=!1,f=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(n=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),l=e.includes("Route Layer"),c=e.includes("Markup"),d=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),s=d&&o?"spatiotemporaltable":o?"table":l?"routelayer":c?"markup":d?"spatiotemporal":h?"utilitynetwork":n?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(d=e.includes("Spatiotemporal"),y=e.includes("Relational"),s=d||y?"mapimages":n||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="reality mapping project"?s="realitymappingproject":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="urban project"?s="urbanproject":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro presentation"?s="propresentation":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(f=e.includes("Map"),s=f?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",s?mt(r+s+i+".png"):null}get isLayer(){return this.type!=null&&rk.has(this.type)}get itemCdnUrl(){return gR(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=D.getDefault()),r=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},r=t instanceof Ka?t.rating:t;return r==null||isNaN(r)||typeof t!="number"||(e.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Ka({rating:r,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:P(this.applicationProxies),avgRating:this.avgRating,categories:P(this.categories),classification:P(this.classification),created:P(this.created),culture:this.culture,description:this.description,extent:P(this.extent),groupCategories:P(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:P(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:P(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:P(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:P(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new _a({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const r=t[e];r&&(t[e]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Ka(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},_a)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?r.query.text=e:typeof e=="object"&&(r.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new I("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new I("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:r}=this;await e.signIn();const{copyResources:i,folder:s,tags:n,title:o}=t||{},l={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s?.id,includeResources:!!i,tags:n?.join(","),title:o}},{itemId:c}=await e.request(`${r}/copy`,l);return new _a({id:c,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,r=t.filename,i={method:"post"};if(typeof e=="string")b5(e)?i.query={data:e}:i.query={url:Ua(e)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",e,r):s.append("file",e),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new I("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:r}=await R(()=>import("./money-tides-resourceUtils-DIsE7pCo.js"),__vite__mapDeps([15,3,4,1,2,5,6,7]));return r(this,t,e)}async addResource(t,e,r){const{addOrUpdateResources:i}=await R(()=>import("./money-tides-resourceUtils-DIsE7pCo.js"),__vite__mapDeps([15,3,4,1,2,5,6,7]));return t.portalItem=this,await i(this,[{resource:t,content:e,compress:r?.compress,access:r?.access}],"add",r),t}async removeResource(t,e){const{removeResource:r}=await R(()=>import("./money-tides-resourceUtils-DIsE7pCo.js"),__vite__mapDeps([15,3,4,1,2,5,6,7]));if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new I("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await R(()=>import("./money-tides-resourceUtils-DIsE7pCo.js"),__vite__mapDeps([15,3,4,1,2,5,6,7]));return e(this,t)}resourceFromPath(t){return new ln({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:P(this.categories),classification:P(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:P(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:P(this.typeKeywords),url:this.url};return bC(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new _a({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};a([u({type:["private","shared","org","public"]})],ae.prototype,"access",void 0),a([u()],ae.prototype,"accessInformation",void 0),a([u({type:String})],ae.prototype,"apiKey",void 0),a([u({json:{read:{source:"appProxies"}}})],ae.prototype,"applicationProxies",void 0),a([u()],ae.prototype,"avgRating",void 0),a([u()],ae.prototype,"categories",void 0),a([u()],ae.prototype,"classification",void 0),a([u({type:Date})],ae.prototype,"created",void 0),a([u()],ae.prototype,"culture",void 0),a([u()],ae.prototype,"description",void 0),a([u({readOnly:!0})],ae.prototype,"displayName",null),a([u({type:ue})],ae.prototype,"extent",void 0),a([A("extent")],ae.prototype,"readExtent",null),a([u()],ae.prototype,"groupCategories",void 0),a([u({readOnly:!0})],ae.prototype,"iconUrl",null),a([u()],ae.prototype,"id",void 0),a([u({readOnly:!0})],ae.prototype,"isLayer",null),a([u({type:Boolean,readOnly:!0})],ae.prototype,"isOrgItem",void 0),a([u()],ae.prototype,"itemControl",void 0),a([u({readOnly:!0})],ae.prototype,"itemPageUrl",null),a([u({readOnly:!0})],ae.prototype,"itemUrl",null),a([u()],ae.prototype,"licenseInfo",void 0),a([u({type:Date})],ae.prototype,"modified",void 0),a([u()],ae.prototype,"name",void 0),a([u()],ae.prototype,"numComments",void 0),a([u()],ae.prototype,"numRatings",void 0),a([u()],ae.prototype,"numViews",void 0),a([u()],ae.prototype,"owner",void 0),a([u()],ae.prototype,"ownerFolder",void 0),a([u({type:D})],ae.prototype,"portal",void 0),a([u()],ae.prototype,"screenshots",void 0),a([u()],ae.prototype,"size",void 0),a([u()],ae.prototype,"snippet",void 0),a([u()],ae.prototype,"sourceJSON",void 0),a([u({type:String})],ae.prototype,"sourceUrl",void 0),a([u({type:String})],ae.prototype,"spatialReference",void 0),a([u()],ae.prototype,"tags",void 0),a([u()],ae.prototype,"thumbnail",void 0),a([u({readOnly:!0})],ae.prototype,"thumbnailUrl",null),a([u()],ae.prototype,"title",void 0),a([u()],ae.prototype,"type",void 0),a([u()],ae.prototype,"typeKeywords",void 0),a([u({type:String,json:{read(t,e){if(ik.has(e.type)){const r=this.portal?.restUrl;t||=r&&this.id?`${r}/content/items/${this.id}/data`:null}return t}}})],ae.prototype,"url",void 0),a([u({readOnly:!0})],ae.prototype,"userItemUrl",null),ae=_a=a([_("esri.portal.PortalItem")],ae);const dS=Object.freeze(Object.defineProperty({__proto__:null,get default(){return ae}},Symbol.toStringTag,{value:"Module"}));async function sk(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,r=await vR("esri/t9n/basemaps");return r[t]||r[e]}const Pf={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return mt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return mt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return mt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return mt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return mt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return mt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}},v8=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]),nk="shortOffset";function ok(t){return"timeZoneIANA"in t}function ak(t){return t.startsWith("UTC")}function Vc(t,e=!1){return{json:{read:{source:t,reader:(r,i)=>i[t]?Q1(i[t]):null},write:!!e&&{allowNull:!0,writer(r,i){i[t]=r?lk(r):null}}}}}function Q1(t,e=Qn){return t?ok(t)?t.timeZoneIANA:uk(t,e):e}function lk(t){return{timeZoneIANA:t}}function uk(t,e=Qn){if(!t||!v8.has(t.timeZone))return e;const r=v8.get(t.timeZone);return ak(t.timeZone)||t.respectsDaylightSaving?r:ck(r)}function ck(t){const e=Re.local().setZone(t),r=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Lc.instance(-r).formatOffset(0,"narrow")}`}function Ine(t,e,r,i,s){if(e&&s==="date")return{timeZone:Gd,timeZoneName:void 0};const n=i.hour,o=r===gl;return{timeZone:o?s==="timestamp-offset"?void 0:t??Gd:r,timeZoneName:o&&n?nk:void 0}}function pk(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return t===Qn||t===gl||e.has(t.toLowerCase())||r.has(t.toLowerCase())}let un=class extends Z{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let r=e==="local"||e==="global"?e:wR(e??Bn())??"global";return r=r==="no"?"nb":r,r}};a([u()],un.prototype,"apiKey",void 0),a([u()],un.prototype,"id",void 0),a([u()],un.prototype,"language",void 0),a([u()],un.prototype,"places",void 0),a([u()],un.prototype,"serviceUrl",void 0),a([u()],un.prototype,"worldview",void 0),un=a([_("esri.support.BasemapStyle")],un);const dk=un,hS=Symbol("BasemapInstance");function Ene(t){return t!=null&&typeof t=="object"&&hS in t}let yS=0;const Ph=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+yS++})}};return r=a([_("esri.core.Identifiable")],r),r},U5=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:yS++})}};return r=a([_("esri.core.Identifiable.NumericIdentifiable")],r),r};Ph(class{});async function hk(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:r}=await R(async()=>{const{fromItem:i}=await Promise.resolve().then(()=>pse);return{fromItem:i}},void 0);try{return await r(e)}catch(i){const s=e?.portalItem,n=s?.id||"unset",o=s?.portal?.url||Hr.portalUrl;throw N.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",i),i}}const w8={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function K4(t,e,r,i=Qn){const s=new bh(d_(i)),n=Re.fromJSDate(t,{zone:s}),o=r==="decades"||r==="centuries"?"year":mS(r);return r==="decades"&&(e*=10),r==="centuries"&&(e*=100),n.plus({[o]:e}).toJSDate()}function Pne(t,e,r="milliseconds"){const i=t.getTime(),s=fS(e,r,"milliseconds");return new Date(i+s)}function b8(t,e,r=Qn){const i=new bh(d_(r)),s=Re.fromJSDate(t,{zone:i});if(e==="decades"||e==="centuries"){const o=s.startOf("year"),{year:l}=o,c=l-l%(e==="decades"?10:100);return o.set({year:c}).toJSDate()}const n=mS(e);return s.startOf(n).toJSDate()}function fS(t,e,r){return t===0?0:t*w8[e]/w8[r]}function One(t,e){return t&&e?t.intersection(e):t||e}function mS(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var $i,nc;let it=(nc=class extends F{static get allTime(){return _8}static get empty(){return yk}static fromArray(e){return new $i({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,r){return r.end!=null?new Date(r.end):null}writeEnd(e,r){r.end=e?.getTime()??null}get isAllTime(){return this.equals($i.allTime)}get isEmpty(){return this.equals($i.empty)}readStart(e,r){return r.start!=null?new Date(r.start):null}writeStart(e,r){r.start=e?.getTime()??null}clone(){return new $i({end:this.end,start:this.start})}equals(e){if(!e)return!1;const r=this.start?.getTime()??this.start,i=this.end?.getTime()??this.end,s=e.start?.getTime()??e.start,n=e.end?.getTime()??e.end;return r===s&&i===n}expandTo(e,r=Qn){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=b8(i,e,r));let s=this.end;if(s){const n=b8(s,e,r);s=s.getTime()===n.getTime()?n:K4(n,1,e,r)}return new $i({start:i,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return $i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const r=this.start?.getTime()??-1/0,i=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,n=e.end?.getTime()??1/0;let o,l;return s>=r&&s<=i?o=s:r>=s&&r<=n&&(o=r),i>=s&&i<=n?l=i:n>=r&&n<=i&&(l=n),o==null||l==null||isNaN(o)||isNaN(l)?$i.empty:new $i({start:o===-1/0?null:new Date(o),end:l===1/0?null:new Date(l)})}offset(e,r,i=Qn){if(this.isEmpty||this.isAllTime)return this.clone();const s=new $i,{start:n,end:o}=this;return n!=null&&(s.start=K4(n,e,r,i)),o!=null&&(s.end=K4(o,e,r,i)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return _8.clone();const r=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new $i({start:r,end:i})}},$i=nc,nc);a([u({type:Date,json:{write:{allowNull:!0}}})],it.prototype,"end",void 0),a([A("end")],it.prototype,"readEnd",null),a([j("end")],it.prototype,"writeEnd",null),a([u({readOnly:!0,json:{read:!1}})],it.prototype,"isAllTime",null),a([u({readOnly:!0,json:{read:!1}})],it.prototype,"isEmpty",null),a([u({type:Date,json:{write:{allowNull:!0}}})],it.prototype,"start",void 0),a([A("start")],it.prototype,"readStart",null),a([j("start")],it.prototype,"writeStart",null),it=$i=a([_("esri.time.TimeExtent")],it);const _8=new it,yk=new it({start:void 0,end:void 0});let fk=0,Oe=class extends h_(Ph(ep)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ue(-180,-90,180,90,B.WGS84),this.id=Date.now().toString(16)+"-layer-"+fk++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=B.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const r=typeof e=="string"?{url:e}:e;return(await R(async()=>{const{fromUrl:i}=await import("./money-tides-arcgisLayers-CBlS9ete.js");return{fromUrl:i}},__vite__mapDeps([16,1,2,3,4,5,6,7,12,13,14]))).fromUrl(r)}static fromPortalItem(e){return hk(e)}initialize(){this.when().catch(e=>{vi(e)||N.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Qs(this.url)}createLayerView(e,r){return Promise.reject(new I("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Te(e,{query:{f:"json"},responseType:"json"})).data;throw new I("layer:no-attribution-data","Layer does not have attribution data")}};a([u({type:String})],Oe.prototype,"attributionDataUrl",void 0),a([u({readOnly:!0})],Oe.prototype,"effectiveVisible",null),a([u({type:ue})],Oe.prototype,"fullExtent",void 0),a([u({readOnly:!0})],Oe.prototype,"hasAttributionData",null),a([u({type:String,clonable:!1})],Oe.prototype,"id",void 0),a([u({type:Boolean,nonNullable:!0})],Oe.prototype,"legendEnabled",void 0),a([u({type:["show","hide","hide-children"]})],Oe.prototype,"listMode",void 0),a([u({type:Number,range:{min:0,max:1},nonNullable:!0})],Oe.prototype,"opacity",void 0),a([u({clonable:!1})],Oe.prototype,"parent",void 0),a([u({readOnly:!0})],Oe.prototype,"parsedUrl",null),a([u({type:Boolean,readOnly:!0})],Oe.prototype,"persistenceEnabled",void 0),a([u({type:Boolean})],Oe.prototype,"popupEnabled",void 0),a([u({type:Boolean})],Oe.prototype,"attributionVisible",void 0),a([u({type:B})],Oe.prototype,"spatialReference",void 0),a([u({type:String})],Oe.prototype,"title",void 0),a([u({readOnly:!0,json:{read:!1}})],Oe.prototype,"type",void 0),a([u()],Oe.prototype,"url",void 0),a([u({type:it})],Oe.prototype,"visibilityTimeExtent",void 0),a([u({type:Boolean,nonNullable:!0})],Oe.prototype,"visible",void 0),Oe=a([_("esri.layers.Layer")],Oe);const r1=new WeakMap;function gS(t){return!t.destroyed&&(r1.has(t)||t.addHandles([X(()=>{const{parent:e}=t;return!!(e&&e instanceof Oe)&&(e.type==="catalog-dynamic-group"||gS(e))},e=>r1.set(t,e),vr),Zr(()=>r1.delete(t))]),r1.get(t))}function mk(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function Cne(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function gk(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function vk(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function Lne(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function S8(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function tu(t){return t?.type==="subtype-sublayer"}const Y4={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Of(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function kne(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function Q2(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function Ane(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function wk(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function Fne(t){return mk(t)&&wk(t)}async function q5(t,e){const r=nt?.findServerInfo(t);if(r?.currentVersion!=null)return r.owningSystemUrl||null;const i=t.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${t.slice(0,i)}/rest/info`,n=e!=null?e.signal:null,{data:o}=await Te(s,{query:{f:"json"},responseType:"json",signal:n});return o?.owningSystemUrl||null}function vS(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function bk(t){return vS(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function _k(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function Sk(t){return!!_k(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function xk(t,e){return null}function G5(t){return null}function Rf(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function x8(t,e){!e||!Rf(t)||xk(t.url)}const $k=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),Tk=new Set(["integrated-mesh-3dtiles"]),wS=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),Ik=new Set([...wS,"link-chart"]);function Mk(t){switch(t.layerContainerType){case"basemap-base-layers":return $k;case"basemap-ground-layers":return Tk;case"operational-layers":return t.origin==="link-chart"?Ik:wS;default:return null}}function Ek(t,e){if(e.restrictedWebMapWriting){const r=Mk(e);return r==null||r.has(t.type)&&!Q2(t)}return!0}function Pk(t,e){if(e)if(Q2(t)){const r=T_("featureCollection.layers",e),i=r?.[0]?.layerDefinition;i&&$8(t,i)}else t.type!=="group"&&$8(t,e)}function $8(t,e){"maxScale"in t&&(e.maxScale=gf(t.maxScale)??void 0),"minScale"in t&&(e.minScale=gf(t.minScale)??void 0)}function Ok(t,e){if(Pk(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=gf(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(Q2(t)){const r=e.featureCollection;r&&(r.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function K1(t,e,r){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return r?.messages&&r.messages.push(new I("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(Q2(t)&&!t.isTable)e=t.resourceInfo;else if(Ek(t,r)){const i={};return t.write(i,r)?i:null}return e!=null&&Ok(t,e=P(e)),e}var T8,ru,cl;let Or=(cl=class extends Rl(ep){constructor(e){super(e),this[T8]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+ru.idCounter++,this.baseLayers=new U,this.referenceLayers=new U,this.groundLayers=new U;const r=l=>{const{parent:c}=l;c&&c!==this&&"remove"in c&&c.remove?.(l),l.parent=this,l.type!=="elevation"&&l.type!=="integrated-mesh-3dtiles"||N.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=l=>{const{parent:c}=l;c&&c!==this&&"remove"in c&&c.remove?.(l),l.parent=this},s=l=>{const c=l.item;return c.parent===this?(N.getLogger(this).error(`Layer '${c.title}, id:${c.id}' of type '${c.type}' already a ground layer, second add will be ignored.`),void l.preventDefault()):c.type!=="integrated-mesh-3dtiles"&&c.type!=="integrated-mesh"?(N.getLogger(this).error(`Layer '${c.title}, id:${c.id}' of type '${c.type}' is not supported as a ground layer and will therefore be ignored.`),void l.preventDefault()):void 0},n=l=>{l.parent=null},o=l=>{l.parent===this&&(l.parent=null)};this.addHandles([this.baseLayers.on("after-add",l=>r(l.item)),this.baseLayers.on("after-remove",l=>n(l.item)),this.referenceLayers.on("after-add",l=>r(l.item)),this.referenceLayers.on("after-remove",l=>n(l.item)),this.groundLayers.on("before-add",s),this.groundLayers.on("after-add",l=>i(l.item)),this.groundLayers.on("after-remove",l=>o(l.item))])}initialize(){this.when().catch(e=>{N.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const s of e)s.destroyed||s.destroy();const r=this.groundLayers.toArray();for(const s of r)s.destroyed||s.destroy();const i=this.referenceLayers.toArray();for(const s of i)s.destroyed||s.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=st(this.portalItem)}removeChildLayer(e){for(const r of[this.baseLayers,this.referenceLayers,this.groundLayers])r.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Bs(e,this._get("baseLayers")))}_writeBaseLayers(e,r,i){const s=[];e&&(i={...i,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(n=>{const o=K1(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&s.push(o)}),this.referenceLayers.forEach(n=>{const o=K1(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&(n.type!=="scene"&&(o.isReference=!0),s.push(o))})),r.baseMapLayers=s}set groundLayers(e){this._set("groundLayers",Bs(e,this._get("groundLayers")))}_writeGroundLayers(e,r,i){const s=[];e&&(i={...i,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(n=>{const o=K1(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&s.push(o)}),s.length>0&&(r.groundLayers=s))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",Bs(e,this._get("referenceLayers")))}writeTitle(e,r){r.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return H2(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(r=>j4(r)?r.clone():r),groundLayers:this.groundLayers.map(r=>j4(r)?r.clone():r),referenceLayers:this.referenceLayers.map(r=>j4(r)?r.clone():r)};return this.loaded&&(e.loadStatus="loaded"),new ru({resourceInfo:this.resourceInfo}).set(e)}read(e,r){this.resourceInfo||this._set("resourceInfo",{data:e,context:r}),super.read(e,r)}write(e,r){return e=e||{},r?.origin||(r={origin:"web-map",...r}),super.write(e,r),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=P(i);return s.url&&G9(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&G9(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:r,portalItem:i,style:s}=this;Ce(e);const n=[];if(r){const o=r.context?r.context.url:null;if(n.push(this._loadLayersFromJSON(r.data,o,e)),r.data.id&&!r.data.title){const l=r.data.id;n.push(sk(l).then(c=>{c&&this.read({title:c},r.context)}))}}else i?n.push(this._loadFromItem(i,e)):s&&n.push(this._loadFromStylesService(s,e));await Promise.all(n)}async _loadLayersFromJSON(e,r,i){const s=this.resourceInfo?.context,n=this.portalItem?.portal||s?.portal||null,o=Ck[s?.origin||""]??"web-map",{populateOperationalLayers:l}=await R(async()=>{const{populateOperationalLayers:d}=await Promise.resolve().then(()=>dO);return{populateOperationalLayers:d}},void 0),c=[];if(Ce(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const d={context:{...s,origin:o,url:r,portal:n,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},h=m=>o==="web-scene"&&m.layerType==="ArcGISSceneServiceLayer"||m.isReference,y=l(this.baseLayers,e.baseMapLayers.filter(m=>!h(m)),d);c.push(y);const f=l(this.referenceLayers,e.baseMapLayers.filter(h),d);c.push(f)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const d={context:{...s,origin:o,url:r,portal:n,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},h=l(this.groundLayers,e.groundLayers,d);c.push(h)}await Promise.allSettled(c)}async _loadFromItem(e,r){const i=await e.load(r),s=await i.fetchData("json",r),n=Qs(e.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:Rk[e.type||""]??"web-map",portal:e.portal||D.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||D.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,r)}async _loadFromStylesService(e,r){const i=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,s=`${i}/styles/${e.id}/self`,n=`${i}/webmaps/${e.id}`,o=e.apiKey??Hr.apiKeys.basemapStyles,[l,c]=await Promise.all([(await Te(s,{query:{token:o},signal:r?.signal})).data,(await Te(n,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:r?.signal})).data]);this.thumbnailUrl??=l.thumbnailUrl;const d=Qs(n);if(this._set("resourceInfo",{data:c.baseMap??{},context:{origin:"web-map",url:d}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:c.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,d,r),o)for(const h of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in h&&(h.apiKey=o)}static fromId(e){const r=Pf[e];return r?r.itemId?new ru({portalItem:{id:r.itemId,portal:{url:"https://www.arcgis.com"}}}):ru.fromJSON(r,r.is3d?{origin:"web-scene",portal:new D({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},T8=hS,ru=cl,cl.idCounter=0,cl);a([u({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,r,i){this._writeBaseLayers(t,e,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:U}},writer(t,e,r,i){this._writeBaseLayers(t,e,i)}}}}}})],Or.prototype,"baseLayers",null),a([u({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,r,i){this._writeGroundLayers(t,e,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:U}},writer(t,e,r,i){this._writeGroundLayers(t,e,i)}}}}}})],Or.prototype,"groundLayers",null),a([u({type:String,json:{origins:{"web-scene":{write:!0}}}})],Or.prototype,"id",void 0),a([u({type:ae})],Or.prototype,"portalItem",void 0),a([u()],Or.prototype,"referenceLayers",null),a([u({readOnly:!0})],Or.prototype,"resourceInfo",void 0),a([u({type:B})],Or.prototype,"spatialReference",void 0),a([u({type:dk})],Or.prototype,"style",void 0),a([u()],Or.prototype,"thumbnailUrl",void 0),a([u({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Or.prototype,"title",void 0),a([j("title")],Or.prototype,"writeTitle",null),Or=ru=a([_("esri.Basemap")],Or);const Rk={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Ck={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},vd=Or,Lk=Object.freeze(Object.defineProperty({__proto__:null,default:vd},Symbol.toStringTag,{value:"Module"})),l2={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function bS(t){return!!l2[t]||!!l2[t.toLowerCase()]}function B5(t){return l2[t]??l2[t.toLowerCase()]}function kk(t){return[...B5(t)]}function X4(t,e,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?t+(e-t)*i:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}function _S(t,e,r,i=1){const s=(t%360+360)%360/360,n=r<=.5?r*(e+1):r+e-r*e,o=2*r-n;return[Math.round(255*X4(o,n,s+1/3)),Math.round(255*X4(o,n,s)),Math.round(255*X4(o,n,s-1/3)),i]}function Ak(t){const e=t.length>5,r=e?8:4,i=(1<<r)-1,s=e?1:17,n=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let c;return n&&(c=o&i,o>>=r,l[3]=s*c/255),c=o&i,o>>=r,l[2]=s*c,c=o&i,o>>=r,l[1]=s*c,c=o&i,o>>=r,l[0]=s*c,l}function SS(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),r=parseInt(t.slice(2,3),16),i=parseInt(t.slice(3,4),16),s=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,r+16*r,i+16*i,(s+16*s)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function xS(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const r=e[2].split(/\s*,\s*/),i=e[1];if(i==="rgb"&&r.length===3||i==="rgba"&&r.length===4){if(r[0].endsWith("%")){const s=r.map(n=>2.56*parseFloat(n));return r.length===4&&(s[3]=parseFloat(r[3])),I8(s)}return I8(r.map(s=>parseFloat(s)))}if(i==="hsl"&&r.length===3||i==="hsla"&&r.length===4)return _S(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3]??"1"))}return null}function I8(t){return t[0]=Hu(t[0]),t[1]=Hu(t[1]),t[2]=Hu(t[2]),t[3]=t.length===4?TS(t[3]):1,t}function $S(t){let e=bS(t)?B5(t):null;return e??=xS(t),e??=SS(t),e}function Nne(t){const e=$S(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function TS(t){return IS(t,0,1)}function Hu(t){return Math.round(IS(t,0,255))}function IS(t,e,r){return t=Number(t),isNaN(t)?r:t<e?e:t>r?r:t}const MS=2.2,Fk=1/MS;function Dne(t){return t**MS}function jne(t){return t**Fk}const M8=new Float32Array(1);function Vne(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function bi(t,e,r){return Math.min(Math.max(t,e),r)}function zne(t){return!(t&t-1)}function Une(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Op(t,e,r){return t+(e-t)*r}function qne(t,e,r,i,s){return Op(i,s,(t-e)/(r-e))}function Oh(t){return t*Math.PI/180}function ES(t){return 180*t/Math.PI}function Gne(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function Bne(t){return Math.acos(bi(t,-1,1))}function Nk(t){return Math.asin(bi(t,-1,1))}function gi(t,e,r=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=r}function PS(t,e,r=1e-6){return!gi(t,e,r)&&t>e}function Cf(t,e,r=1e-6){return!gi(t,e,r)&&t<e}function Dk(t,e,r=1e-6){return gi(t,e,r)||t>e}const u2=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function Lf(t){return u2.setFloat64(0,t),u2.getBigInt64(0)}function jk(t){return u2.setBigInt64(0,t),u2.getFloat64(0)}const Y1=1000000n,Vk=OS(1);function OS(t){const e=Lf(t=Math.abs(t)),r=jk(e<=Y1?Y1:e-Y1);return Math.abs(t-r)}function Hne(t,e,r=Vk){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(r!=null&&OS(Math.min(Math.abs(t),Math.abs(e)))<r)return Math.abs(t-e)<=r;const i=Lf(t),s=Lf(e);return i<0!=s<0?!1:!((i<s?s-i:i-s)>Y1)}function RS(t,e,r=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const i=Math.abs(t-e),s=Math.abs(t),n=Math.abs(e);if(t===0||e===0||s<1e-12&&n<1e-12){if(i>.01*r)return!1}else if(i/(s+n)>r)return!1;return!0}function Wne(t){return CS(Math.max(-E8,Math.min(t,E8)))}function CS(t){return M8[0]=t,M8[0]}function Zne(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],i=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(gi(e,1)&&gi(r,1)&&gi(i,1))}function Jne(t,e){return(t%e+e)%e}const E8=CS(34028234663852886e22);function Qne(t,e,r){if(r===void 0||+r==0)return Math[t](e);if(e=+e,r=+r,isNaN(e)||typeof r!="number"||r%1!=0)return NaN;let i=e.toString().split("e");return i=(e=Math[t](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function i1(t){return bi(_5(t),0,255)}function s1(t,e){const r=t.toString(16).padStart(2,"0");return e?r.slice(0,1):r}let K=class Ti{static blendColors(e,r,i,s=new Ti){return s.r=Math.round(e.r+(r.r-e.r)*i),s.g=Math.round(e.g+(r.g-e.g)*i),s.b=Math.round(e.b+(r.b-e.b)*i),s.a=e.a+(r.a-e.a)*i,s._sanitize()}static fromRgb(e,r){const i=xS(e);return i?Ti.fromArray(i,r):null}static fromHex(e,r=new Ti){const i=SS(e);return i?Ti.fromArray(i,r):null}static fromArray(e,r=new Ti){return r._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(e,r){const i=$S(e);return i?Ti.fromArray(i,r):null}static fromJSON(e){return e!=null?new Ti([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,r){return e==null?null:(r??=[0,0,0,0],r[0]=e.r/255,r[1]=e.g/255,r[2]=e.b/255,r[3]=e.a!=null?e.a:1,r)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Ti.fromString(e,this):Array.isArray(e)?Ti.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Ti||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const r=e?.capitalize??!1,i=e?.digits??6,s=i===3||i===4,n=i===4||i===8,o=`#${s1(this.r,s)}${s1(this.g,s)}${s1(this.b,s)}${n?s1(Math.round(255*this.a),s):""}`;return r?o.toUpperCase():o}toCss(e=!1){const r=this.r+", "+this.g+", "+this.b;return e?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const r=i1(this.r),i=i1(this.g),s=i1(this.b);return e===0||this.a!==1?[r,i,s,i1(255*this.a)]:[r,i,s]}clone(){return new Ti(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Hu(this.r),this.g=Hu(this.g),this.b=Hu(this.b),this.a=TS(this.a),this}_set(e,r,i,s){this.r=e,this.g=r,this.b=i,this.a=s}};K.prototype.declaredClass="esri.Color";let Gr=class extends U{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(y_(()=>this._refresh(),ht))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let r=0;for(const i of e)i!=null&&(r=this._processCollection(r,i));this.splice(r)}_createNewInstance(e){return new U(e)}_processCollection(e,r){if(!r)return e;const i=this.itemFilterFunction??(s=>!!s);for(const s of r)if(s){if(i(s)){const n=this.indexOf(s,e);n>=0?n!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)e=this._processCollection(e,o);else e=this._processCollection(e,n)}}return e}};a([u()],Gr.prototype,"getCollections",void 0),a([u()],Gr.prototype,"getChildrenFunction",void 0),a([u()],Gr.prototype,"itemFilterFunction",void 0),Gr=a([_("esri.core.CollectionFlattener")],Gr);function te(t,e={}){const r=t instanceof be?t:new be(t,e),{alwaysWriteDefaults:i,default:s,ignoreUnknown:n=!0,name:o,nonNullable:l,readOnly:c=!1}=e;return u({type:n?r.apiValues:String,json:{type:r.jsonValues,default:s,name:o,read:!c&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:l,readOnly:c})}var kf;let X1=kf=class extends F{constructor(t){super(t),this.type="none"}clone(){return new kf({type:this.type})}};a([te({none:"none",stayAbove:"stay-above"}),u({json:{write:{isRequired:!0}}})],X1.prototype,"type",void 0),X1=kf=a([_("esri.ground.NavigationConstraint")],X1);const LS=Symbol("GroundInstance");function Yne(t){return t!=null&&typeof t=="object"&&LS in t}function K2(t){const e=_5(100*(1-t));return Math.max(0,Math.min(e,100))}function Xd(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var P8,Af,c_;let Ii=Af=(c_=class extends Rl(ep){constructor(t){super(t),this[P8]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new U;const e=i=>{const{parent:s}=i;s&&s!==this&&"remove"in s&&s.remove?.(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&N.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>e(i.item)),this.layers.on("after-remove",i=>r(i.item))]),this.allLayers=new Gr({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{vi(t)||N.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)st(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",Bs(t,this._get("layers")))}writeLayers(t,e,r,i){const s=[];t&&(i={...i,layerContainerType:"ground"},t.forEach(n=>{if("write"in n){const o={};_C(n)().write(o,i)&&s.push(o)}else i?.messages&&i.messages.push(new I("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return H2(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:r}=await R(()=>import("./money-tides-ElevationQuery-br3l12nw.js"),__vite__mapDeps([17,3,4,1,2,5,6,7,18,12,13,14]));return Ce(e),r(this.layers.filter(O8).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:r}=await R(()=>import("./money-tides-ElevationQuery-br3l12nw.js"),__vite__mapDeps([17,3,4,1,2,5,6,7,18,12,13,14]));return Ce(e),r(this.layers.filter(O8).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:P(this.surfaceColor),navigationConstraint:P(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new Af({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,r){const i=e?.origin||"web-scene",s=e?.portal||null,n=e?.url||null,{populateOperationalLayers:o}=await R(async()=>{const{populateOperationalLayers:c}=await Promise.resolve().then(()=>dO);return{populateOperationalLayers:c}},void 0);Ce(r);const l=[];if(t.layers&&Array.isArray(t.layers)){const c={context:{origin:i,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(o(this.layers,t.layers,c))}await Promise.allSettled(l)}},P8=LS,c_);function O8(t){return t&&"createElevationSampler"in t}a([u()],Ii.prototype,"parent",void 0),a([u()],Ii.prototype,"integratedMeshGround",null),a([u({json:{read:!1,write:{isRequired:!0}}})],Ii.prototype,"layers",null),a([u()],Ii.prototype,"allLayers",void 0),a([j("layers")],Ii.prototype,"writeLayers",null),a([u({readOnly:!0})],Ii.prototype,"resourceInfo",void 0),a([u({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ve,read:{reader:Xd,source:"transparency"},write:{writer:(t,e)=>{e.transparency=K2(t)},target:"transparency"}}})],Ii.prototype,"opacity",void 0),a([u({type:K,json:{type:[ve],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Ii.prototype,"surfaceColor",void 0),a([u({type:X1,json:{write:!0}})],Ii.prototype,"navigationConstraint",void 0),Ii=Af=a([_("esri.Ground")],Ii);const c2=Ii,zk=Symbol("ClonableMixin"),de=t=>{var s;var e;const r=t;let i=(s=class extends r{constructor(){super(...arguments),this[e]=!0}clone(n){const o=Jr(this);j2(o,"unable to clone instance of non-accessor class");const l=o.metadata,c=o.store,d={},h=new Map;for(const f in l){const m=l[f],g=c?.originOf(f),v=m.clonable;if(m.readOnly||v===!1||g!==7&&g!==0&&g!==5&&g!==4)continue;const b=this[f];let S=null;if(typeof v=="function")S=v(b,n);else if(v==="reference")S=b;else if(S=SC(b,n),b!=null&&S==null)continue;g===0?h.set(f,S):d[f]=S}const y=new(Object.getPrototypeOf(this)).constructor(d);if(h.size){const f=Jr(y)?.store;if(f)for(const[m,g]of h)f.set(m,g,0)}return y}},e=zk,s);return i=a([_("esri.core.Clonable")],i),i},H5=de(Z),Dl={Base64:0,Hex:1,String:2,Raw:3},Wu=8,kS=(1<<Wu)-1;function Fo(t,e){const r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function Uk(t){const e=[];for(let r=0,i=t.length*Wu;r<i;r+=Wu)e[r>>5]|=(t.charCodeAt(r/Wu)&kS)<<r%32;return e}function qk(t){const e=[];for(let r=0,i=32*t.length;r<i;r+=Wu)e.push(String.fromCharCode(t[r>>5]>>>r%32&kS));return e.join("")}function Gk(t){const e="0123456789abcdef",r=[];for(let i=0,s=4*t.length;i<s;i++)r.push(e.charAt(t[i>>2]>>i%4*8+4&15)+e.charAt(t[i>>2]>>i%4*8&15));return r.join("")}function Bk(t){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let s=0,n=4*t.length;s<n;s+=3){const o=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let l=0;l<4;l++)8*s+6*l>32*t.length?i.push("="):i.push(r.charAt(o>>6*(3-l)&63))}return i.join("")}function Hk(t,e){return t<<e|t>>>32-e}function Y2(t,e,r,i,s,n){return Fo(Hk(Fo(Fo(e,t),Fo(i,n)),s),r)}function Jt(t,e,r,i,s,n,o){return Y2(e&r|~e&i,t,e,s,n,o)}function Qt(t,e,r,i,s,n,o){return Y2(e&i|r&~i,t,e,s,n,o)}function Kt(t,e,r,i,s,n,o){return Y2(e^r^i,t,e,s,n,o)}function Yt(t,e,r,i,s,n,o){return Y2(r^(e|~i),t,e,s,n,o)}function Wk(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let r=1732584193,i=-271733879,s=-1732584194,n=271733878;for(let o=0;o<t.length;o+=16){const l=r,c=i,d=s,h=n;r=Jt(r,i,s,n,t[o],7,-680876936),n=Jt(n,r,i,s,t[o+1],12,-389564586),s=Jt(s,n,r,i,t[o+2],17,606105819),i=Jt(i,s,n,r,t[o+3],22,-1044525330),r=Jt(r,i,s,n,t[o+4],7,-176418897),n=Jt(n,r,i,s,t[o+5],12,1200080426),s=Jt(s,n,r,i,t[o+6],17,-1473231341),i=Jt(i,s,n,r,t[o+7],22,-45705983),r=Jt(r,i,s,n,t[o+8],7,1770035416),n=Jt(n,r,i,s,t[o+9],12,-1958414417),s=Jt(s,n,r,i,t[o+10],17,-42063),i=Jt(i,s,n,r,t[o+11],22,-1990404162),r=Jt(r,i,s,n,t[o+12],7,1804603682),n=Jt(n,r,i,s,t[o+13],12,-40341101),s=Jt(s,n,r,i,t[o+14],17,-1502002290),i=Jt(i,s,n,r,t[o+15],22,1236535329),r=Qt(r,i,s,n,t[o+1],5,-165796510),n=Qt(n,r,i,s,t[o+6],9,-1069501632),s=Qt(s,n,r,i,t[o+11],14,643717713),i=Qt(i,s,n,r,t[o],20,-373897302),r=Qt(r,i,s,n,t[o+5],5,-701558691),n=Qt(n,r,i,s,t[o+10],9,38016083),s=Qt(s,n,r,i,t[o+15],14,-660478335),i=Qt(i,s,n,r,t[o+4],20,-405537848),r=Qt(r,i,s,n,t[o+9],5,568446438),n=Qt(n,r,i,s,t[o+14],9,-1019803690),s=Qt(s,n,r,i,t[o+3],14,-187363961),i=Qt(i,s,n,r,t[o+8],20,1163531501),r=Qt(r,i,s,n,t[o+13],5,-1444681467),n=Qt(n,r,i,s,t[o+2],9,-51403784),s=Qt(s,n,r,i,t[o+7],14,1735328473),i=Qt(i,s,n,r,t[o+12],20,-1926607734),r=Kt(r,i,s,n,t[o+5],4,-378558),n=Kt(n,r,i,s,t[o+8],11,-2022574463),s=Kt(s,n,r,i,t[o+11],16,1839030562),i=Kt(i,s,n,r,t[o+14],23,-35309556),r=Kt(r,i,s,n,t[o+1],4,-1530992060),n=Kt(n,r,i,s,t[o+4],11,1272893353),s=Kt(s,n,r,i,t[o+7],16,-155497632),i=Kt(i,s,n,r,t[o+10],23,-1094730640),r=Kt(r,i,s,n,t[o+13],4,681279174),n=Kt(n,r,i,s,t[o],11,-358537222),s=Kt(s,n,r,i,t[o+3],16,-722521979),i=Kt(i,s,n,r,t[o+6],23,76029189),r=Kt(r,i,s,n,t[o+9],4,-640364487),n=Kt(n,r,i,s,t[o+12],11,-421815835),s=Kt(s,n,r,i,t[o+15],16,530742520),i=Kt(i,s,n,r,t[o+2],23,-995338651),r=Yt(r,i,s,n,t[o],6,-198630844),n=Yt(n,r,i,s,t[o+7],10,1126891415),s=Yt(s,n,r,i,t[o+14],15,-1416354905),i=Yt(i,s,n,r,t[o+5],21,-57434055),r=Yt(r,i,s,n,t[o+12],6,1700485571),n=Yt(n,r,i,s,t[o+3],10,-1894986606),s=Yt(s,n,r,i,t[o+10],15,-1051523),i=Yt(i,s,n,r,t[o+1],21,-2054922799),r=Yt(r,i,s,n,t[o+8],6,1873313359),n=Yt(n,r,i,s,t[o+15],10,-30611744),s=Yt(s,n,r,i,t[o+6],15,-1560198380),i=Yt(i,s,n,r,t[o+13],21,1309151649),r=Yt(r,i,s,n,t[o+4],6,-145523070),n=Yt(n,r,i,s,t[o+11],10,-1120210379),s=Yt(s,n,r,i,t[o+2],15,718787259),i=Yt(i,s,n,r,t[o+9],21,-343485551),r=Fo(r,l),i=Fo(i,c),s=Fo(s,d),n=Fo(n,h)}return[r,i,s,n]}function W5(t,e=Dl.Hex){const r=e||Dl.Base64,i=Wk(Uk(t),t.length*Wu);switch(r){case Dl.Raw:return i;case Dl.Hex:return Gk(i);case Dl.String:return qk(i);case Dl.Base64:return Bk(i)}}function Zk(t){return t&&"getAtOrigin"in t&&"originOf"in t}function Ff(t){return Z5[Jk(t)]||Kk}function Jk(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:Qk(t.url)}function Qk(t){const e=f_(t);return Nf[e]||AS}const Z5={},AS="text/plain",Kk=Z5[AS],Nf={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in Nf)Z5[Nf[t]]=t;function Yk(t){const e=t?.origins??[void 0];return(r,i)=>{const s=Xk(t,r,i);for(const n of e){const o=w5(r,n,i);for(const l in s)o[l]=s[l]}}}function Xk(t,e,r){if(t?.type==="resource")return eA(t,e,r);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:i,write:s}=$R;return{read:i,write:s}}}}function eA(t,e,r){const i=bR(e,r);return{type:String,read:(s,n,o)=>{const l=x5(s,n,o);return i.type===String?l:typeof i.type=="function"?new i.type({url:l}):void 0},write:{isRequired:i.json?.write?.isRequired,writer(s,n,o,l){if(!l?.resources)return typeof s=="string"?void(n[o]=Bd(s,l)):void(n[o]=s.write({},l));const c=iA(s),d=Bd(c,{...l,verifyItemRelativeUrls:l?.verifyItemRelativeUrls?{writtenUrls:l.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),h=i.type!==String&&(!Zk(this)||l?.origin&&this.originIdOf(r)>Di(l.origin)),y={object:this,propertyName:r,value:s,targetUrl:d,dest:n,targetPropertyName:o,context:l,params:t};l?.portalItem&&d&&!Xc(d)?h&&t?.contentAddressed?Df(y):h?tA(y):rA(y):l?.portalItem&&(d==null||_R(d)!=null||S5(d)||h)?Df(y):n[o]=d}}}}function Df(t){const{targetUrl:e,params:r,value:i,context:s,dest:n,targetPropertyName:o}=t;if(!s.portalItem)return;const l=SR(e),c=NS(i,e,s);if(r?.contentAddressed&&c.type!=="json")return void s.messages?.push(new I("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${c.type} with content addressing. Content addressing is only supported for json resources.`,{content:c}));const d=r?.contentAddressed&&c.type==="json"?W5(c.jsonString):l?.filename??$5(),h=vl(r?.prefix??l?.prefix,d),y=`${h}.${Ff(c)}`;if(r?.contentAddressed&&s.resources&&c.type==="json"){const g=s.resources.toKeep.find(({resource:v})=>v.path===y)??s.resources.toAdd.find(({resource:v})=>v.path===y);if(g)return void(n[o]=g.resource.itemRelativeUrl)}const f=s.portalItem.resourceFromPath(y);S5(e)&&s.resources&&s.resources.pendingOperations.push(xR(e).then(g=>{f.path=`${h}.${Ff({type:"blob",blob:g})}`,n[o]=f.itemRelativeUrl}).catch(()=>{}));const m=r?.compress??!1;s.resources&&FS({...t,resource:f,content:c,compress:m,updates:s.resources.toAdd}),n[o]=f.itemRelativeUrl}function tA(t){const{context:e,targetUrl:r,params:i,value:s,dest:n,targetPropertyName:o}=t;if(!e.portalItem)return;const l=e.portalItem.resourceFromPath(r),c=NS(s,r,e),d=Ff(c),h=f_(l.path),y=i?.compress??!1;d===h?(e.resources&&FS({...t,resource:l,content:c,compress:y,updates:e.resources.toUpdate}),n[o]=r):Df(t)}function rA({context:t,targetUrl:e,dest:r,targetPropertyName:i}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),r[i]=e)}function FS({object:t,propertyName:e,updates:r,resource:i,content:s,compress:n}){const o=l=>{sA(t,e,l)};r.push({resource:i,content:s,compress:n,finish:o})}function NS(t,e,r){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(r))}}function iA(t){return t==null?null:typeof t=="string"?t:t.url}function sA(t,e,r){typeof t[e]=="string"?t[e]=r.url:t[e].url=r.url}let e0=class extends de(F){constructor(e){super(e),this.color=null}};a([u({type:K,json:{type:[ve],write:!0}})],e0.prototype,"color",void 0),e0=a([_("esri.effects.FocusAreaOutline")],e0);const nA=e0;function eoe(t){const e=[];for(t.reset();t.nextPath();){const r=[];for(;t.nextPoint();)r.push([t.x,t.y]);e.push(r)}return t.reset(),e}function oA(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function toe(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,r=t.hasM;if(t.type==="point")return r&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:r?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(i=>[i]);if(t.type==="extent"){const i=t.clone().normalize();if(!i)return null;let s=!1,n=!1;return i.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)}),i.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const c=.5*(o.zmax-o.zmin);for(let d=0;d<l.length;d++)l[d].push(c)}if(n&&o.hasM){const c=.5*(o.mmax-o.mmin);for(let d=0;d<l.length;d++)l[d].push(c)}return l})}return null}function X2(t,e){const r=e[0]-t[0],i=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function DS(t,e,r){const i=t[0]+r*(e[0]-t[0]),s=t[1]+r*(e[1]-t[1]);return t.length>2&&e.length>2?[i,s,t[2]+r*(e[2]-t[2])]:[i,s]}function aA(t,e,r,i){return lA(t,e,r[i],r[i+1])}function lA(t,e,r,i){const[s,n]=e,[o,l]=r,[c,d]=i,h=c-o,y=d-l,f=h*h+y*y,m=(s-o)*h+(n-l)*y,g=Math.min(1,Math.max(0,m/f));return t[0]=o+h*g,t[1]=l+y*g,t}function roe(t,e,r,i,s,n){let o=r,l=i,c=s-o,d=n-l;if(c!==0||d!==0){const h=((t-o)*c+(e-l)*d)/(c*c+d*d);h>1?(o=s,l=n):h>0&&(o+=c*h,l+=d*h)}return c=t-o,d=e-l,c*c+d*d}function jS(t,e){return DS(t,e,.5)}function ioe(t){const e=t.length;let r=0;for(let i=0;i<e-1;++i)r+=X2(t[i],t[i+1]);return r}function soe(t,e){if(e<=0)return t[0];const r=t.length;let i=0;for(let s=0;s<r-1;++s){const n=X2(t[s],t[s+1]);if(e-i<n){const o=(e-i)/n;return DS(t[s],t[s+1],o)}i+=n}return t[r-1]}function VS(t,e=0,r=1){let i=0;const s=t.length;let n=t[0];for(let o=1;o<s;o++){const l=t[o];i+=(l[e]-n[e])*(l[r]+n[r]),n=l}if(zS(t)){const o=t[0];i+=(o[e]-n[e])*(o[r]+n[r])}return i>=0}function zS(t){const e=t.length;return e>0&&!I_(t[0],t[e-1])}function noe(t){"rings"in t&&(uA(t),cA(t))}function uA(t){if("rings"in t)for(const e of t.rings)zS(e)&&e.push(e[0].slice())}function cA(t){if(!("rings"in t)||t.rings.length===0||VS(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function ooe(t){return t.type!=="polygon"&&t.type!=="polyline"||pA(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function pA(t,e){const r=Ir(e);if(!r)return;const i=r.valid[0],s=r.valid[1],n=s-i;for(const o of t){let l=1/0,c=-1/0;for(const h of o){const y=dA(h[0],i,s);l=Math.min(l,y),c=Math.max(c,y),h[0]=y}const d=c-l;n-d<d&&o.forEach(h=>{h[0]<0&&(h[0]+=n)})}}function dA(t,e,r){const i=r-e;return t<e?r-(e-t)%i:t>r?e+(t-e)%i:t}function aoe(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[r,i]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return r.length===i.length&&r.every((s,n)=>s.length===i[n].length)}function loe(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function hA(t){return fA(t.rings,t.hasZ??!1)}function yA(t){const e=hA(t);if(!e)return null;const{hasZ:r,spatialReference:i}=t,[s,n,o]=e;return isNaN(s)||isNaN(n)||r&&isNaN(o)?null:{x:s,y:n,z:r?o:void 0,spatialReference:i}}function fA(t,e){if(!t?.length)return null;const r=[],i=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=t.length;n<o;n++){const l=US(t[n],e,s);l&&i.push(l)}if(i.sort((n,o)=>{let l=n[2]-o[2];return l===0&&e&&(l=n[4]-o[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],e&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const n=t[0]&&t[0].length?mA(t[0],e):null;if(!n)return null;r[0]=n[0],r[1]=n[1],e&&n.length>2&&(r[2]=n[2])}return r}function US(t,e,r){let i=0,s=0,n=0,o=0,l=0;const c=t.length?t[0][0]:0,d=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const m=t[f],g=t[(f+1)%t.length],[v,b,S]=m,$=v-c,E=b-d,[T,O,C]=g,z=T-c,q=O-d,J=$*q-z*E;if(o+=J,i+=($+z)*J,s+=(E+q)*J,e&&m.length>2&&g.length>2){const oe=S-h,le=C-h,re=$*le-z*oe;n+=(oe+le)*re,l+=re}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),b<r[2]&&(r[2]=b),b>r[3]&&(r[3]=b),e&&(S<r[4]&&(r[4]=S),S>r[5]&&(r[5]=S))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const y=[i/(6*o)+c,s/(6*o)+d,o];return e&&(r[4]===r[5]||l===0?(y[3]=(r[4]+r[5])/2,y[4]=0):(y[3]=n/(6*l)+h,y[4]=l)),y}function uoe(t,e){let r=0,i=0,s=0;t.nextPoint();const n=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let l=0;l<t.pathSize;l++){t.seekInPath(l);const c=[t.x,t.y];t.seekInPath((l+1)%t.pathSize);const d=[t.x,t.y],[h,y]=c,f=h-n,m=y-o,[g,v]=d,b=g-n,S=v-o,$=f*S-b*m;s+=$,r+=(f+b)*$,i+=(m+S)*$,h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),y<e[2]&&(e[2]=y),y>e[3]&&(e[3]=y)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+n,i/(6*s)+o,s]):null}function mA(t,e){const r=e?[0,0,0]:[0,0],i=e?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;for(let c=0,d=t.length;c<d-1;c++){const h=t[c],y=t[c+1];if(h&&y){r[0]=h[0],r[1]=h[1],i[0]=y[0],i[1]=y[1],e&&h.length>2&&y.length>2&&(r[2]=h[2],i[2]=y[2]);const f=X2(r,i);if(f){s+=f;const m=jS(h,y);n+=f*m[0],o+=f*m[1],e&&m.length>2&&(l+=f*m[2])}}}return s>0?e?[n/s,o/s,l/s]:[n/s,o/s]:t.length?t[0]:null}function gA(t){const{hasZ:e,totalSize:r}=t;if(r===0)return null;const i=[],s=[],n=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=US(oA(t),t.hasZ,n);o&&s.push(o)}if(s.sort((o,l)=>{let c=o[2]-l[2];return c===0&&e&&(c=o[4]-l[4]),c}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],e&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){t.reset(),t.nextPath();const o=t.pathSize?vA(t):null;if(!o)return null;i[0]=o[0],i[1]=o[1],e&&o.length>2&&(i[2]=o[2])}return i}function vA(t){const{hasZ:e}=t,r=e?[0,0,0]:[0,0],i=e?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;if(t.nextPoint()){let c=t.x,d=t.y,h=t.z;for(;t.nextPoint();){const y=t.x,f=t.y,m=t.z;r[0]=c,r[1]=d,i[0]=y,i[1]=f,e&&(r[2]=h,i[2]=m);const g=X2(r,i);if(g){s+=g;const v=jS(r,i);n+=g*v[0],o+=g*v[1],e&&v.length>2&&(l+=g*v[2])}c=y,d=f,h=m}}return s>0?e?[n/s,o/s,l/s]:[n/s,o/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const wA=1e-6;function coe(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<wA){const s=gA(t);return s?[s[0],s[1]]:null}const r=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const i=[t.x,t.y];for(t.reset();t.nextPath();)_A(r,i,t);return r[0]*=1/e,r[1]*=1/e,r[0]+=i[0],r[1]+=i[1],r}const bA=1/3;function _A(t,e,r){if(!t||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let n,o=r.x-i,l=r.y-s,c=0,d=0;for(;r.nextPoint();)c=r.x-i,d=r.y-s,n=.5*bA*(c*l-d*o),t[0]+=n*(o+c),t[1]+=n*(l+d),o=c,l=d;const h=r.getCurrentRingArea(),y=[i,s];return y[0]-=e[0],y[1]-=e[1],y[0]*=h,y[1]*=h,t[0]+=y[0],t[1]+=y[1],t}function Wr(t=IA){return[t[0],t[1],t[2],t[3]]}function qS(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function GS(t,e,r,i,s=Wr()){return s[0]=t,s[1]=e,s[2]=r,s[3]=i,s}function poe(t,e=Wr()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function SA(t,e,r=new ue){return r.xmin=t[0],r.ymin=t[1],r.xmax=t[2],r.ymax=t[3],r.spatialReference=e,r}function Ni(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function xA(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function $A(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function doe(t,e,r){if(e!=null)if("length"in e)Vf(e)?(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[0]),r[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":r[0]=Math.min(t[0],e.xmin),r[1]=Math.min(t[1],e.ymin),r[2]=Math.max(t[2],e.xmax),r[3]=Math.max(t[3],e.ymax);break;case"point":r[0]=Math.min(t[0],e.x),r[1]=Math.min(t[1],e.y),r[2]=Math.max(t[2],e.x),r[3]=Math.max(t[3],e.y)}else qS(r,t)}function hoe(t,e,r=t){const i=e.length;let s=t[0],n=t[1],o=t[2],l=t[3];for(let c=0;c<i;c++){const d=e[c];s=Math.min(s,d[0]),n=Math.min(n,d[1]),o=Math.max(o,d[0]),l=Math.max(l,d[1])}return r[0]=s,r[1]=n,r[2]=o,r[3]=l,r}function yoe(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function J5(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function Q5(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function foe(t){return J5(t)*Q5(t)}function moe(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function goe(t){const e=J5(t),r=Q5(t);return Math.sqrt(e*e+r*r)}function voe(t,e){return!!t&&jf(t,e.x,e.y)}function jf(t,e,r){return e>=t[0]&&r>=t[1]&&e<=t[2]&&r<=t[3]}function woe(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function boe(t,e,r){return Math.max(e[0],t[0])-r<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-r<=Math.min(e[3],t[3])}function TA(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function _oe(t,e,r,i){return i??=t,i[0]=t[0]+e,i[1]=t[1]+r,i[2]=t[2]+e,i[3]=t[3]+r,i}function Soe(t){return t?qS(t,R8):Wr(R8)}function Vf(t){return t!=null&&t.length===4}function xoe(t,e){return Vf(t)&&Vf(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const R8=[1/0,1/0,-1/0,-1/0],IA=[0,0,0,0];let K5=1e-6;function Mr(){return K5}function MA(t){K5=t}const e4=Math.random,EA=Math.PI/180,PA=180/Math.PI;function Y5(t){return t*EA}function OA(t){return t*PA}function RA(t,e){return Math.abs(t-e)<=K5*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:e4,equals:RA,getEpsilon:Mr,setEpsilon:MA,toDegree:OA,toRadian:Y5},Symbol.toStringTag,{value:"Module"}));function Zu(t,e){return t[0]=e[0],t[1]=e[1],t}function Dt(t,e,r){return t[0]=e,t[1]=r,t}function BS(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function eh(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function HS(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function WS(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function CA(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function LA(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function kA(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function AA(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function FA(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Rh(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function NA(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t}function t4(t,e){const r=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(r*r+i*i)}function th(t,e){const r=e[0]-t[0],i=e[1]-t[1];return r*r+i*i}function p2(t){const e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function ZS(t){const e=t[0],r=t[1];return e*e+r*r}function JS(t,e){return t[0]=-e[0],t[1]=-e[1],t}function DA(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function zf(t,e){const r=e[0],i=e[1];let s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function QS(t,e){return t[0]*e[0]+t[1]*e[1]}function KS(t,e,r){const i=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=i,t}function jA(t,e,r,i){const s=e[0],n=e[1];return t[0]=s+i*(r[0]-s),t[1]=n+i*(r[1]-n),t}function VA(t,e=1){const r=2*e4()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function zA(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[2]*s,t[1]=r[1]*i+r[3]*s,t}function Ds(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[2]*s+r[4],t[1]=r[1]*i+r[3]*s+r[5],t}function t0(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[3]*s+r[6],t[1]=r[1]*i+r[4]*s+r[7],t}function UA(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[4]*s+r[12],t[1]=r[1]*i+r[5]*s+r[13],t}function qA(t,e,r,i){const s=e[0]-r[0],n=e[1]-r[1],o=Math.sin(i),l=Math.cos(i);return t[0]=s*l-n*o+r[0],t[1]=s*o+n*l+r[1],t}function GA(t,e){const r=t[0],i=t[1],s=e[0],n=e[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let l=s*s+n*n;l>0&&(l=1/Math.sqrt(l));const c=(r*s+i*n)*o*l;return c>1?0:c<-1?Math.PI:Math.acos(c)}function BA(t){return"vec2("+t[0]+", "+t[1]+")"}function HA(t,e){return t[0]===e[0]&&t[1]===e[1]}function WA(t,e){const r=t[0],i=t[1],s=e[0],n=e[1],o=Mr();return Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))}function ZA(t,e,r,i,s){let n=e[0]-r[0],o=e[1]-r[1];const l=(i[0]*n+i[1]*o)*(s-1);return n=i[0]*l,o=i[1]*l,t[0]=e[0]+n,t[1]=e[1]+o,t}const JA=p2,X5=eh,QA=HS,KA=WS,YA=t4,XA=th,eF=ZS;Object.freeze(Object.defineProperty({__proto__:null,add:BS,angle:GA,ceil:CA,copy:Zu,cross:KS,dist:YA,distance:t4,div:KA,divide:WS,dot:QS,equals:WA,exactEquals:HA,floor:LA,inverse:DA,len:JA,length:p2,lerp:jA,max:AA,min:kA,mul:QA,multiply:HS,negate:JS,normalize:zf,projectAndScale:ZA,random:VA,rotate:qA,round:FA,scale:Rh,scaleAndAdd:NA,set:Dt,sqrDist:XA,sqrLen:eF,squaredDistance:th,squaredLength:ZS,str:BA,sub:X5,subtract:eh,transformMat2:zA,transformMat2d:Ds,transformMat3:t0,transformMat4:UA},Symbol.toStringTag,{value:"Module"}));function An(t,e,r,i){return t[0]=e[0]*(1-i)+r[0]*i,t[1]=e[1]*(1-i)+r[1]*i,t}function $r(t,e){return th(t,e)}function $oe(t,e,r){const i=$r(e,r);if(i===0)return $r(e,t);const s=(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0]);return s*s/i}function tF(t,e,r,i,s){const[n,o]=e,[l,c]=r,[d,h]=i,[y,f]=s,m=(n-l)*(h-f)-(o-c)*(d-y);if(m===0)return null;const g=(n*c-o*l)*(d-y)-(n-l)*(d*f-h*y),v=(n*c-o*l)*(h-f)-(o-c)*(d*f-h*y);return t[0]=g/m,t[1]=v/m,t}const ms=2*Math.PI;function il(t,e){const r=Math.atan2(t,e);return r<0?r+ms:r}function YS(t){return Math.abs(t)%ms}function C8(t){const e=YS(t);return e<Math.PI?e:ms-e}function r4(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function XS(t,e,r,i){if(gi(YS(t-e),0))return r?[t,t]:[t,i?t-ms:t+ms];const[s,n]=i?[t-ms,t]:[t,t+ms];return[t,Ch({min:s,max:n},e)]}function Ch({min:t,max:e},r){let i;return i=e-r,i>=ms?(i-=i%ms,r+i):(i=r-t,i>=ms?(i-=i%ms,r-i):r)}function rF(t,e){const r=Ch(t,e);return r>t.min&&r<t.max?r:C8(r-t.min)<C8(r-t.max)?t.min:t.max}function ex(t,e,r,i=10){return e.map(s=>{let n=s;for(let o=0;o<i;o++){const[l,c,d,h,y,f]=r(n),m=t[0]-l,g=t[1]-c,v=-d,b=-h;n+=-(2*m*v+2*g*b)/(2*v*v+2*m*-y+2*b*b+2*g*-f||1e-6)}return n})}const iF=[0,0];function tx(t){const e=1-t,r=e*e,i=t*t;return[r*e,3*t*r,3*i*e,i*t]}function Uf(t,e,r,i,s){const[n,o,l,c]=tx(s);return[t[0]*n+e[0]*o+r[0]*l+i[0]*c,t[1]*n+e[1]*o+r[1]*l+i[1]*c]}function L8(t,e,r,i,s){const[n,o,l,c]=tx(s);return t*n+e*o+r*l+i*c}function Toe(t,e,r){const i=t,[s,n,o]=e.b;return Uf(i,n,o,s,r)}function sF(t,e,r){const i=t,[s,n,o]=e.b,l=An([0,0],i,n,r),c=An(iF,n,o,r),d=An([0,0],o,s,r),h=An([0,0],l,c,r),y=An([0,0],c,d,r);return[{b:[An([],h,y,r),l,h]},{b:[[...s],y,d]}]}function Ioe(t,e,r){const i=t,[s,n,o]=e.b,l=ex(r,[.1,.5,.9],y=>{const f=1-y,[m,g]=Uf(i,n,o,s,y);return[m,g,3*f*f*(n[0]-i[0])+6*f*y*(o[0]-n[0])+3*y*y*(s[0]-o[0]),3*f*f*(n[1]-i[1])+6*f*y*(o[1]-n[1])+3*y*y*(s[1]-o[1]),6*f*(o[0]-2*n[0]+i[0])+6*y*(s[0]-2*o[0]+n[0]),6*f*(o[1]-2*n[1]+i[1])+6*y*(s[1]-2*o[1]+n[1])]}).map(y=>Math.min(1,Math.max(0,y)));l.push(0,1);let c=1/0;const d=l.map(y=>{const f=Uf(i,n,o,s,y),[m,g]=f,v=r[0]-m,b=r[1]-g,S=Math.sqrt(v*v+b*b);return c=Math.min(S,c),{t:y,curvePoint:f,distance:S}}),h=[];for(const y of d){const{t:f,distance:m}=y;RS(m,c)&&!h.some(({t:g})=>gi(g,f))&&h.push(y)}return h}function nF(t,e,r){const i=e,[s,n,o]=r.b;if(Ni(t,i),Ni(t,s),jf(t,n[0],n[1])&&jf(t,o[0],o[1]))return t;for(const l of k8(i[0],n[0],o[0],s[0]))l>0&&l<1&&xA(t,L8(i[0],n[0],o[0],s[0],l));for(const l of k8(i[1],n[1],o[1],s[1]))l>0&&l<1&&$A(t,L8(i[1],n[1],o[1],s[1],l));return t}function k8(t,e,r,i){const s=3*(3*(e-r)-t+i),n=6*(t-2*e+r),o=3*(e-t);if(s===0)return n!==0?[-o/n]:[];const l=Math.sqrt(n*n-4*s*o);return[(-n+l)/(2*s),(-n-l)/(2*s)]}function Moe(t,e,r){let s=0,n=[e];for(let o=0;o<16;o++){let l=t;const c=[];for(const h of n)c.push(...sF(l,h,.5)),l=h.b[0];n=c,l=t,s=0;let d=0;for(const h of n){const[y,f,m]=h.b,g=Math.sqrt($r(l,y));s+=(g+(Math.sqrt($r(l,f))+Math.sqrt($r(f,m))+Math.sqrt($r(m,y))))/2,d+=g,l=y}if(s-d<r)return s}return s}function oF(t,e,r){const[i,s]=t,[n,o]=e,[l,c]=r,[d,h]=[n-i,o-s];let y=d*(l-i)+h*(c-s);y/=d**2+h**2,y=bi(y,0,1);const f=An([0,0],t,e,y);return{t:y,curvePoint:f,distance:Math.sqrt($r(f,r))}}let rx=class{constructor(e,r,i,s,n,o){this.cx=e,this.cy=r,this.radius=i,this.thetaStart=s,this.thetaEnd=n,this.isInvalid=o}get startPoint(){const{cx:e,cy:r,radius:i,thetaStart:s}=this;return[e+i*Math.cos(s),r+i*Math.sin(s)]}get endPoint(){const{cx:e,cy:r,radius:i,thetaEnd:s}=this;return[e+i*Math.cos(s),r+i*Math.sin(s)]}};function d2(t,e){const{cx:r,cy:i,radius:s}=t;return[r+s*Math.cos(e),i+s*Math.sin(e)]}function r0(t,e){if(t.isInvalid)return An([0,0],t.startPoint,t.endPoint,e);const{thetaStart:r,thetaEnd:i}=t;return d2(t,r*(1-e)+i*e)}function Poe(t,e){if(t.isInvalid)return oF(t.startPoint,t.endPoint,e);const{cx:r,cy:i,thetaStart:s,thetaEnd:n}=t,[o,l]=e,c=rF(r4(s,n),Math.atan2(l-i,o-r)),d=d2(t,c);return{t:(c-s)/(n-s),curvePoint:d,distance:Math.sqrt($r(e,d))}}function A8(t,e){if(e.isInvalid)return Ni(t,e.startPoint),Ni(t,e.endPoint),t;const{cx:r,cy:i,radius:s,thetaStart:n,thetaEnd:o}=e;Ni(t,d2(e,n)),Ni(t,d2(e,o));const l=r4(n,o),c=Math.PI/2;let d=0;for(const h of[[r+s,i],[r,i+s],[r-s,i],[r,i-s]])d=Ch(l,d),d>l.min&&d<l.max&&Ni(t,h),d+=c;return t}function Ooe(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:r,thetaEnd:i}=t;return e*Math.abs(i-r)}function aF(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function lF(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ju(t,e,r,i,s,n,o,l,c,d){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t[4]=n,t[5]=o,t[6]=l,t[7]=c,t[8]=d,t}function ix(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function sx(t,e){if(t===e){const r=e[1],i=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=i,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function nx(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=h*o-l*d,f=-h*n+l*c,m=d*n-o*c;let g=r*y+i*f+s*m;return g?(g=1/g,t[0]=y*g,t[1]=(-h*i+s*d)*g,t[2]=(l*i-s*o)*g,t[3]=f*g,t[4]=(h*r-s*c)*g,t[5]=(-l*r+s*n)*g,t[6]=m*g,t[7]=(-d*r+i*c)*g,t[8]=(o*r-i*n)*g,t):null}function uF(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8];return t[0]=o*h-l*d,t[1]=s*d-i*h,t[2]=i*l-s*o,t[3]=l*c-n*h,t[4]=r*h-s*c,t[5]=s*n-r*l,t[6]=n*d-o*c,t[7]=i*c-r*d,t[8]=r*o-i*n,t}function i0(t){const e=t[0],r=t[1],i=t[2],s=t[3],n=t[4],o=t[5],l=t[6],c=t[7],d=t[8];return e*(d*n-o*c)+r*(-d*s+o*l)+i*(c*s-n*l)}function rh(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=e[8],f=r[0],m=r[1],g=r[2],v=r[3],b=r[4],S=r[5],$=r[6],E=r[7],T=r[8];return t[0]=f*i+m*o+g*d,t[1]=f*s+m*l+g*h,t[2]=f*n+m*c+g*y,t[3]=v*i+b*o+S*d,t[4]=v*s+b*l+S*h,t[5]=v*n+b*c+S*y,t[6]=$*i+E*o+T*d,t[7]=$*s+E*l+T*h,t[8]=$*n+E*c+T*y,t}function qf(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=e[8],f=r[0],m=r[1];return t[0]=i,t[1]=s,t[2]=n,t[3]=o,t[4]=l,t[5]=c,t[6]=f*i+m*o+d,t[7]=f*s+m*l+h,t[8]=f*n+m*c+y,t}function ox(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=e[8],f=Math.sin(r),m=Math.cos(r);return t[0]=m*i+f*o,t[1]=m*s+f*l,t[2]=m*n+f*c,t[3]=m*o-f*i,t[4]=m*l-f*s,t[5]=m*c-f*n,t[6]=d,t[7]=h,t[8]=y,t}function cF(t,e,r){const i=r[0],s=r[1],n=r[2];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=n*e[6],t[7]=n*e[7],t[8]=n*e[8],t}function pF(t,e,r){const i=r[0],s=r[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function dF(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function hF(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=-r,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function yF(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function fF(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function mF(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=r+r,l=i+i,c=s+s,d=r*o,h=i*o,y=i*l,f=s*o,m=s*l,g=s*c,v=n*o,b=n*l,S=n*c;return t[0]=1-y-g,t[3]=h-S,t[6]=f+b,t[1]=h+S,t[4]=1-d-g,t[7]=m-v,t[2]=f-b,t[5]=m+v,t[8]=1-d-y,t}function gF(t,e){const r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],l=e[6],c=e[8],d=e[9],h=e[10],y=h*o-l*d,f=-h*n+l*c,m=d*n-o*c,g=r*y+i*f+s*m;if(!g)return null;const v=1/g;return t[0]=y*v,t[1]=(-h*i+s*d)*v,t[2]=(l*i-s*o)*v,t[3]=f*v,t[4]=(h*r-s*c)*v,t[5]=(-l*r+s*n)*v,t[6]=m*v,t[7]=(-d*r+i*c)*v,t[8]=(o*r-i*n)*v,t}function vF(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],S=e[15],$=r*l-i*o,E=r*c-s*o,T=r*d-n*o,O=i*c-s*l,C=i*d-n*l,z=s*d-n*c,q=h*v-y*g,J=h*b-f*g,oe=h*S-m*g,le=y*b-f*v,re=y*S-m*v,Ie=f*S-m*b;let pe=$*Ie-E*re+T*le+O*oe-C*J+z*q;return pe?(pe=1/pe,t[0]=(l*Ie-c*re+d*le)*pe,t[1]=(c*oe-o*Ie-d*J)*pe,t[2]=(o*re-l*oe+d*q)*pe,t[3]=(s*re-i*Ie-n*le)*pe,t[4]=(r*Ie-s*oe+n*J)*pe,t[5]=(i*oe-r*re-n*q)*pe,t[6]=(v*z-b*C+S*O)*pe,t[7]=(b*T-g*z-S*E)*pe,t[8]=(g*C-v*T+S*$)*pe,t):null}function wF(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function bF(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function _F(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function SF(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function ax(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function xF(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function $F(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t[4]=e[4]+r[4]*i,t[5]=e[5]+r[5]*i,t[6]=e[6]+r[6]*i,t[7]=e[7]+r[7]*i,t[8]=e[8]+r[8]*i,t}function TF(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function IF(t,e){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],d=t[7],h=t[8],y=e[0],f=e[1],m=e[2],g=e[3],v=e[4],b=e[5],S=e[6],$=e[7],E=e[8],T=Mr();return Math.abs(r-y)<=T*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-f)<=T*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-m)<=T*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(n-g)<=T*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-v)<=T*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(l-b)<=T*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-S)<=T*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(d-$)<=T*Math.max(1,Math.abs(d),Math.abs($))&&Math.abs(h-E)<=T*Math.max(1,Math.abs(h),Math.abs(E))}function MF(t){const e=Mr(),r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],d=t[7],h=t[8];return Math.abs(1-(r*r+n*n+c*c))<=e&&Math.abs(1-(i*i+o*o+d*d))<=e&&Math.abs(1-(s*s+l*l+h*h))<=e}const EF=rh,PF=ax;Object.freeze(Object.defineProperty({__proto__:null,add:SF,adjoint:uF,copy:lF,determinant:i0,equals:IF,exactEquals:TF,frob:_F,fromMat2d:fF,fromMat4:aF,fromQuat:mF,fromRotation:hF,fromScaling:yF,fromTranslation:dF,identity:ix,invert:nx,isOrthoNormal:MF,mul:EF,multiply:rh,multiplyScalar:xF,multiplyScalarAndAdd:$F,normalFromMat4:vF,normalFromMat4Legacy:gF,projection:wF,rotate:ox,scale:cF,scaleByVec2:pF,set:Ju,str:bF,sub:PF,subtract:ax,translate:qf,transpose:sx},Symbol.toStringTag,{value:"Module"}));function Ll(){return[1,0,0,0,1,0,0,0,1]}function OF(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function RF(t,e,r,i,s,n,o,l,c){return[t,e,r,i,s,n,o,l,c]}const CF=Ll();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:CF,clone:OF,create:Ll,fromValues:RF},Symbol.toStringTag,{value:"Module"}));const jl=Ll();function LF(t,e,r){const[i,s]=t,[n,o]=e,[l,c]=r;Ju(jl,i,n,l,s,o,c,1,1,1);const d=i0(jl),h=4*d/($r(t,e)+$r(e,r)+$r(r,t));if(!isFinite(h)||Math.abs(h)<1e-8)return null;const y=i**2+s**2,f=n**2+o**2,m=l**2+c**2;Ju(jl,y,f,m,s,o,c,1,1,1);const g=i0(jl);return Ju(jl,y,f,m,i,n,l,1,1,1),[g/d*.5,i0(jl)/d*-.5]}function lx(t,e){const[r,i]=e.c,s=LF(t,i,r),n=s==null,o=s??An([],t,r,.5),[l,c]=t,[d,h]=i,[y,f]=r,[m,g]=o,v=l-m,b=c-g,S=Math.sqrt(v*v+b*b),$=il(c-g,l-m),E=il(h-g,d-m);let T=il(f-g,y-m);return(E-$)*(T-E)<0&&(T+=2*Math.sign($-T)*Math.PI),new rx(m,g,S,$,T,n)}function Roe(t,e,r){const i=r0(t,r/2),s=r0(t,r),n=r0(t,(r+1)/2);return[{c:[s,i]},{c:[[...e.c[0]],n]}]}function Coe(t,e){const[r]=e.c,{cx:i,cy:s,thetaStart:n,thetaEnd:o,radius:l,isInvalid:c}=lx(t,e);return{a:[r,[i,s],Math.abs(o-n)<Math.PI?1:0,n>o?1:0,c?n:0,l,c?0:1]}}function Loe(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function koe(t){return"curveRings"in t?t.curveRings:t.curvePaths}function e6(t){return"b"in t}function t6(t){return"c"in t}function i4(t){return Array.isArray(t)}function Aoe(t){return"a"in t}function ux(t){return"a"in t&&t.a.length===4}function kF(t){return"a"in t&&t.a.length===7}function ey(t){return i4(t)?t:e6(t)?t.b[0]:t6(t)?t.c[0]:t.a[0]}function AF(t){if(e6(t)){const[e,r,i]=t.b;return{b:[[...e],[...r],[...i]]}}if(t6(t)){const[e,r]=t.c;return{c:[[...e],[...r]]}}if(i4(t))return[...t];if(ux(t)){const[e,r,i,s]=t.a;return{a:[[...e],[...r],i,s]}}if(kF(t)){const[e,r,i,s,n,o,l]=t.a;return{a:[[...e],[...r],i,s,n,o,l]}}return t}function FF(t,e){const[r,i,s,n]=e.a,[o,l]=t,[c,d]=r,[h,y]=i,f=o-h,m=l-y,g=Math.sqrt(f*f+m*m),v=c-h,b=d-y,S=Math.sqrt(v*v+b*b),$=g===0||S===0||!RS(g,S),E=g,[T,O]=XS(il(l-y,o-h),Math.atan2(d-y,c-h),s,n);return new rx(h,y,E,T,O,$)}function Foe(t,e,r){const{cx:i,cy:s,thetaStart:n,thetaEnd:o}=t,[l,c,d,h]=e.a,y=n*(1-r)+o*r;return[{a:[r0(t,r),[i,s],Math.abs(y-n)<Math.PI?1:0,h]},{a:[[...l],[i,s],Math.abs(o-y)<Math.PI?1:0,h]}]}let NF=class{constructor(e,r,i,s,n,o,l,c,d){this.cx=e,this.cy=r,this.a=i,this.b=s,this.cosR=n,this.sinR=o,this.u1=l,this.u2=c,this.isInvalid=d}};function r6(t,e){const[r,i,s,n,o,l,c]=e.a,[d,h]=t,[y,f]=r,[m,g]=i,v=l*c,b=Math.cos(o),S=Math.sin(o),[$,E]=XS(il(1/v*(h-g)*b-1/v*(d-m)*S,1/l*(h-g)*S+1/l*(d-m)*b),Math.atan2(1/v*(f-g)*b-1/v*(y-m)*S,1/l*(f-g)*S+1/l*(y-m)*b),s,n);return new NF(m,g,l,v,b,S,$,E,l===0||v===0)}function ih(t,e){const{a:r,b:i,cosR:s,sinR:n,cx:o,cy:l}=t,c=Math.cos(e),d=Math.sin(e);return[r*c*s-i*d*n+o,r*c*n+i*d*s+l]}function iu(t,e){const{u1:r,u2:i}=t;return ih(t,r*(1-e)+i*e)}function Doe(t,e,r){if(r<0||r>1)return[];if(r===0||r===1)return[AF(e)];const[i,[s,n],o,l,c,d,h]=e.a,{u1:y,u2:f}=t,m=y*(1-r)+f*r;return[{a:[[...iu(t,r)],[s,n],Math.abs(m-y)<Math.PI?1:0,l,c,d,h]},{a:[[...i],[s,n],Math.abs(f-m)<Math.PI?1:0,l,c,d,h]}]}function joe(t,e){const{a:r,b:i,cosR:s,sinR:n,u1:o,u2:l}=t,c=Math.PI/6,d=ex(e,[1*c,2*c,4*c,5*c,7*c,8*c,10*c,11*c],v=>{const b=Math.cos(v),S=Math.sin(v),[$,E]=ih(t,v);return[$,E,-r*s*S-i*n*b,-r*n*S+i*s*b,-r*s*b+i*n*S,-r*n*b-i*s*S]}),h=r4(o,l),y=new Set(d.map(v=>Ch(h,v)).filter(v=>v>h.min&&v<h.max));y.add(o),y.add(l);let f,m,g=1/0;for(const v of y){const b=ih(t,v),[S,$]=b,E=e[0]-S,T=e[1]-$,O=E*E+T*T;O<g&&(f=(v-o)/(l-o),m=b,g=O)}return{t:f,curvePoint:m,distance:Math.sqrt(g)}}function DF(t,e,r){const i=r6(e,r),{a:s,b:n,u1:o,u2:l,cosR:c,sinR:d,isInvalid:h}=i,y=r.a[0];if(Ni(t,e),Ni(t,y),h)return t;const f=Math.atan2(-n*d,s*c),m=f+Math.PI,g=Math.atan2(n*c,s*d),v=g+Math.PI,b=r4(o,l);for(const S of[f,m,g,v].map($=>Ch(b,$)))S>b.min&&S<b.max&&Ni(t,ih(i,S));return t}function Voe(t,e,r){const[i,s,n,o,l,c,d]=e.a,h=r6(t,e),{u1:y,u2:f,isInvalid:m}=h,g=f-y;if(m)return Math.sqrt($r(t,i));const v=14,b=[0,0];let S=0,$=[iu(h,0),iu(h,.25),iu(h,.5),iu(h,.75),iu(h,1)];for(let E=0;E<v;E++){const T=$.length-1,O=g/(2*T),C=[];for(let q=0;q<T;q++)C.push($[q]),C.push(ih(h,y+(2*q+1)*O));C.push($[$.length-1]),$=C,S=0;let z=0;for(let q=1;q<$.length;q++){const J=$[q-1],oe=$[q];if(S+=Math.sqrt($r(J,oe)),q>1){const le=$[q-2],re=tF(b,le,J,s,oe);z+=re?Math.sqrt($r(J,re)):Math.abs(oe[0]-J[0])+Math.abs(oe[1]-J[1])}else z+=S}if(z-S<r)return S}return S}const F8=Ll(),n1=Ll(),N8=Ll(),po=Ll();function zoe(t,e,r){const[i,s,n,o,l,c,d]=e.a,h=r6(t,e),{cosR:y,sinR:f,a:m,b:g,cx:v,cy:b}=h,S=t0([0,0],i,r),$=t0([0,0],s,r),E=r[0]*r[4]<0?1-o:o;{const T=m*m*f*f+g*g*y*y,O=2*(g*g-m*m)*f*y,C=m*m*y*y+g*g*f*f,z=-2*T*v-O*b,q=-O*v-2*C*b;Ju(F8,T,O/2,z/2,O/2,C,q/2,z/2,q/2,T*v*v+O*v*b+C*b*b-m*m*g*g)}if(nx(n1,r),n1==null){const T=t0([0,0],t,r);return{a:[S,$,n,o,il(S[1],S[0]),Math.sqrt($r(S,T))/2,0]}}sx(N8,n1),rh(po,rh(po,N8,F8),n1);{const T=po[0],O=2*po[1],C=po[4],z=2*po[2],q=2*po[5],J=O*O-4*T*C,oe=2*(T*q*q+C*z*z-O*z*q+J*po[8]),le=Math.sqrt((T-C)**2+O*O),re=-Math.sqrt(oe*(T+C+le))/J,Ie=-Math.sqrt(oe*(T+C-le))/J;return{a:[S,$,n,E,.5*il(-O,C-T),re,Ie/re]}}}function jF(t,e,r){if(i4(r))return Ni(t,e),Ni(t,r),t;if(e6(r))return nF(t,e,r);if(t6(r)){const i=lx(e,r);return A8(t,i)}if(ux(r)){const i=FF(e,r);return A8(t,i)}return DF(t,e,r)}function cx(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function px(t){return t.points!==void 0}function dx(t){return t.x!==void 0&&t.y!==void 0}function hx(t){return t.paths!==void 0}function yx(t){return t.rings!==void 0}function fx(t){function e(r,i){return r==null?i:i==null?r:t(r,i)}return e}const No=fx(Math.min),Do=fx(Math.max);function Uoe(t,e){return hx(e)?zc(t,e.curvePaths??e.paths,!1,!1)??t:yx(e)?zc(t,e.curveRings??e.rings,!1,!1)??t:px(e)?i6(t,e.points,!1,!1,!1,!1):cx(e)?mx(t,e):(dx(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function qoe(t){let e,r,i,s;for(t.reset(),e=i=1/0,r=s=-1/0;t.nextPath();){const n=VF(t);e=Math.min(n[0],e),i=Math.min(n[1],i),r=Math.max(n[2],r),s=Math.max(n[3],s)}return Wr([e,i,r,s])}function VF(t){let e,r,i,s;for(e=i=1/0,r=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),i=Math.min(t.y,i),r=Math.max(t.x,r),s=Math.max(t.y,s);return Wr([e,i,r,s])}function Goe(t,e){return hx(e)?zc(t,e.curvePaths??e.paths,!0,!1)??t:yx(e)?zc(t,e.curveRings??e.rings,!0,!1)??t:px(e)?i6(t,e.points,!0,!1,!0,!1):cx(e)?mx(t,e,!0,!1,!0,!1):(dx(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function zc(t,e,r,i){const s=r?3:2;if(!e.length||!e[0].length)return null;let n,o,l,c,[d,h]=ey(e[0][0]),y=d,f=h;for(let m=0;m<e.length;m++){const g=e[m];for(let v=0;v<g.length;v++){const b=ey(g[v]),[S,$]=b;if(d=No(d,S),h=No(h,$),y=Do(y,S),f=Do(f,$),r&&b.length>2){const C=b[2];n=No(n,C),o=Do(o,C)}if(i&&b.length>s){const C=b[s];l=No(n,C),c=Do(o,C)}const E=g[v];if(i4(E)||v<1)continue;const T=ey(g[v-1]),O=GS(d,h,y,f);[d,h,y,f]=jF(O,T,E)}}return r?i?(t[0]=d,t[1]=h,t[2]=n,t[3]=l,t[4]=y,t[5]=f,t[6]=o,t[7]=c,t.length=8,t):(t[0]=d,t[1]=h,t[2]=n,t[3]=y,t[4]=f,t[5]=o,t.length=6,t):i?(t[0]=d,t[1]=h,t[2]=l,t[3]=y,t[4]=f,t[5]=c,t.length=6,t):(t[0]=d,t[1]=h,t[2]=y,t[3]=f,t.length=4,t)}function mx(t,e,r,i,s,n){const o=e.xmin,l=e.xmax,c=e.ymin,d=e.ymax;let h=e.zmin,y=e.zmax,f=e.mmin,m=e.mmax;return s?(h=h||0,y=y||0,n?(f=f||0,m=m||0,t[0]=o,t[1]=c,t[2]=h,t[3]=f,t[4]=l,t[5]=d,t[6]=y,t[7]=m,t):(t[0]=o,t[1]=c,t[2]=h,t[3]=l,t[4]=d,t[5]=y,t)):n?(f=f||0,m=m||0,t[0]=o,t[1]=c,t[2]=f,t[3]=l,t[4]=d,t[5]=m,t):(t[0]=o,t[1]=c,t[2]=l,t[3]=d,t)}function i6(t,e,r,i,s,n){const o=r?3:2,l=i&&n,c=r&&s;if(!e.length||!e[0].length)return null;let d,h,y,f,[m,g]=e[0],[v,b]=e[0];for(let S=0;S<e.length;S++){const $=e[S],[E,T]=$;if(m=No(m,E),g=No(g,T),v=Do(v,E),b=Do(b,T),c&&$.length>2){const O=$[2];d=No(d,O),h=Do(h,O)}if(l&&$.length>o){const O=$[o];y=No(d,O),f=Do(h,O)}}return s?(d=d||0,h=h||0,n?(y=y||0,f=f||0,t[0]=m,t[1]=g,t[2]=d,t[3]=y,t[4]=v,t[5]=b,t[6]=h,t[7]=f,t):(t[0]=m,t[1]=g,t[2]=d,t[3]=v,t[4]=b,t[5]=h,t)):n?(y=y||0,f=f||0,t[0]=m,t[1]=g,t[2]=y,t[3]=v,t[4]=b,t[5]=f,t):(t[0]=m,t[1]=g,t[2]=v,t[3]=b,t)}function zF(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function UF(t){return t.points!==void 0}function qF(t){return t.x!==void 0&&t.y!==void 0}function GF(t){return t.paths!==void 0}function BF(t){return t.rings!==void 0}const s6=[];function gx(t,e,r,i){return{xmin:t,ymin:e,xmax:r,ymax:i}}function vx(t,e,r,i,s,n){return{xmin:t,ymin:e,zmin:r,xmax:i,ymax:s,zmax:n}}function wx(t,e,r,i,s,n){return{xmin:t,ymin:e,mmin:r,xmax:i,ymax:s,mmax:n}}function bx(t,e,r,i,s,n,o,l){return{xmin:t,ymin:e,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:l}}function n6(t,e=!1,r=!1){return e?r?bx(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):vx(t[0],t[1],t[2],t[3],t[4],t[5]):r?wx(t[0],t[1],t[2],t[3],t[4],t[5]):gx(t[0],t[1],t[2],t[3])}function Boe(t){return t?zF(t)?t:qF(t)?HF(t):BF(t)?Sx(t):GF(t)?xx(t):UF(t)?_x(t):null:null}function _x(t){const{hasZ:e,hasM:r,points:i}=t,s=i6(s6,i,e??!1,r??!1,e??!1,r??!1);return s?n6(s,e,r):null}function HF(t){const{x:e,y:r,z:i,m:s}=t,n=s!=null;return i!=null?n?bx(e,r,i,s,e,r,i,s):vx(e,r,i,e,r,i):n?wx(e,r,s,e,r,s):gx(e,r,e,r)}function Sx(t){const{hasZ:e,hasM:r,rings:i,curveRings:s}=t,n=zc(s6,s??i,e??!1,r??!1);return n?n6(n,e,r):null}function xx(t){const{hasZ:e,hasM:r,paths:i,curvePaths:s}=t,n=zc(s6,s??i,e??!1,r??!1);return n?n6(n,e,r):null}function Uc(t,e,r=!1){let{hasM:i,hasZ:s}=t;Array.isArray(e)?e.length!==4||i||s?e.length===3&&r&&!i?(s=!0,i=!1):e.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&e.hasZ&&(!i||e.hasM),i=!i&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=i}var s0;function D8(t){return!Array.isArray(t[0])}function WF(t){return typeof t[0]?.[0]=="number"}function ZF(t){if(!t)return;let{rings:e,hasM:r,hasZ:i,spatialReference:s}=t;switch(e??=[],WF(e)&&(e=[e]),e[0]?.[0]?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return s??=B.WGS84,{...t,hasM:r,hasZ:i,rings:e,spatialReference:s}}let Ve=s0=class extends It{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:r}=t;let i=!1,s=!1;for(const o of e)o.hasZ&&(i=!0),o.hasM&&(s=!0);const n={rings:e.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const c=o.zmin+.5*(o.zmax-o.zmin);for(let d=0;d<l.length;d++)l[d].push(c)}if(s&&o.hasM){const c=o.mmin+.5*(o.mmax-o.mmin);for(let d=0;d<l.length;d++)l[d].push(c)}return l}),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new s0(n)}constructor(t){super(ZF(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){vf(N.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=yA(this);return t?ne.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=P(t)}get extent(){const t=Sx(this),{spatialReference:e}=this;return t?new ue({...t,spatialReference:e}):null}get isSelfIntersecting(){return vf(N.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),QL(this.rings)}writeRings(t,e){e.rings=P(this.rings)}addRing(t){if(!t)return;const e=this.rings,r=e.length;if(D8(t)){const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s].toArray();e[r]=i}else e[r]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new s0;return t.spatialReference=this.spatialReference,t.rings=P(this.rings),t.curveRings=P(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,r=t.spatialReference;if(e!=null!=(r!=null)||e!=null&&r!=null&&!e.equals(r)||this.rings.length!==t.rings.length)return!1;const i=([s,n,o,l],[c,d,h,y])=>s===c&&n===d&&(o==null&&h==null||o===h)&&(l==null&&y==null||l===y);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=t.rings[s];if(!I_(n,o,i))return!1}return!0}contains(t){if(!t)return!1;const e=Ih(t,this.spatialReference);return V5(this,e??t)}isClockwise(t){const e=D8(t)?t.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):t;return VS(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.rings[t][e],i=this.hasZ,s=this.hasM;return i&&!s?new ne(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new ne(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new ne(r[0],r[1],r[2],r[3],this.spatialReference):new ne(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(Uc(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[t].splice(e,0,r),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const r=new ne(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],r=this.spatialReference,i=e.map(s=>new ne(s,r));return this.notifyChange("rings"),i}setPoint(t,e,r){return this._validateInputs(t,e)?(Uc(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[t][e]=r,this.notifyChange("rings"),this):this}_validateInputs(t,e,r=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const i=this.rings[t];if(r&&(e<0||e>i.length)||!r&&(e<0||e>=i.length))return!1}return!0}toJSON(t){return this.write({},t)}};a([u({readOnly:!0})],Ve.prototype,"cache",null),a([u({readOnly:!0})],Ve.prototype,"centroid",null),a([u({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Ve.prototype,"curveRings",void 0),a([j("curveRings")],Ve.prototype,"writeCurveRings",null),a([u({readOnly:!0})],Ve.prototype,"extent",null),a([u({readOnly:!0})],Ve.prototype,"isSelfIntersecting",null),a([u({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ve.prototype,"rings",void 0),a([j("rings")],Ve.prototype,"writeRings",null),Ve=s0=a([_("esri.geometry.Polygon")],Ve),Ve.prototype.toJSON.isDefaultToJSON=!0;function ra(){return[0,0,0]}function JF(t){return[t[0],t[1],t[2]]}function rp(t,e,r){return[t,e,r]}function QF(t,e,r){return[t,e,r]}function KF(t,e=ra()){const r=Math.min(3,t.length);for(let i=0;i<r;++i)e[i]=t[i];return e}function $x(){return ra()}function Tx(){return rp(1,1,1)}function Ix(){return rp(1,0,0)}function Mx(){return rp(0,1,0)}function Ex(){return rp(0,0,1)}const YF=$x(),XF=Tx(),eN=Ix(),tN=Mx(),rN=Ex();Object.freeze(Object.defineProperty({__proto__:null,ONES:XF,UNIT_X:eN,UNIT_Y:tN,UNIT_Z:rN,ZEROS:YF,clone:JF,create:ra,freeze:QF,fromArray:KF,fromValues:rp,ones:Tx,unitX:Ix,unitY:Mx,unitZ:Ex,zeros:$x},Symbol.toStringTag,{value:"Module"}));var Gf;function iN(t){if(!t)return;let{points:e,hasM:r,hasZ:i,spatialReference:s}=t;switch(e??=[],e?.at(0)?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return s??=B.WGS84,{...t,hasM:r,hasZ:i,points:e,spatialReference:s}}let ls=Gf=class extends It{constructor(t){super(iN(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=_x(this);return t?new ue({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=P(this.points)}clone(){const{points:t,spatialReference:e,hasM:r,hasZ:i}=this;return new Gf({points:P(t),spatialReference:e.clone(),hasM:r,hasZ:i})}addPoint(t){return Uc(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],r={x:e[0],y:e[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=e[2],i=3),this.hasM&&(r.m=e[i]),new ne(r)}removePoint(t){if(!this._validateInputs(t))return null;const e=new ne(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Uc(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};a([u({readOnly:!0})],ls.prototype,"cache",null),a([u({readOnly:!0})],ls.prototype,"extent",null),a([u({type:[[Number]],json:{write:{isRequired:!0}}})],ls.prototype,"points",void 0),a([j("points")],ls.prototype,"writePoints",null),ls=Gf=a([_("esri.geometry.Multipoint")],ls),ls.prototype.toJSON.isDefaultToJSON=!0;var Bf;function sN(t){return!Array.isArray(t[0])}function nN(t){return typeof t[0]?.[0]=="number"}function oN(t){if(!t)return;let{paths:e,hasM:r,hasZ:i,spatialReference:s}=t;switch(e??=[],nN(e)&&(e=[e]),e[0]?.[0]?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return s??=B.WGS84,{...t,hasM:r,hasZ:i,paths:e,spatialReference:s}}let wt=Bf=class extends It{constructor(t){super(oN(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=P(t)}get extent(){const t=xx(this),{spatialReference:e}=this;return t?new ue({...t,spatialReference:e}):null}writePaths(t,e){e.paths=P(this.paths)}addPath(t){if(!t)return;const e=this.paths,r=e.length;if(sN(t)){const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s].toArray();e[r]=i}else e[r]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new Bf;return t.spatialReference=this.spatialReference,t.paths=P(this.paths),t.curvePaths=P(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.paths[t][e],i=this.hasZ,s=this.hasM;return i&&!s?new ne(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new ne(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new ne(r[0],r[1],r[2],r[3],this.spatialReference):new ne(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(Uc(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],r=this.spatialReference,i=e.map(s=>new ne(s,r));return this.notifyChange("paths"),i}removePoint(t,e){if(!this._validateInputs(t,e))return null;const r=new ne(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(t,e,r){return this._validateInputs(t,e)?(Uc(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this.notifyChange("paths"),this):this}_validateInputs(t,e,r=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const i=this.paths[t];if(r&&(e<0||e>i.length)||!r&&(e<0||e>=i.length))return!1}return!0}toJSON(t){return this.write({},t)}};a([u({readOnly:!0})],wt.prototype,"cache",null),a([u({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],wt.prototype,"curvePaths",void 0),a([j("curvePaths")],wt.prototype,"writeCurvePaths",null),a([u({readOnly:!0})],wt.prototype,"extent",null),a([u({type:[[[Number]]],json:{write:{isRequired:!0}}})],wt.prototype,"paths",void 0),a([j("paths")],wt.prototype,"writePaths",null),wt=Bf=a([_("esri.geometry.Polyline")],wt),wt.prototype.toJSON.isDefaultToJSON=!0;var Hf;let su=Hf=class extends Z{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new Hf({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};a([u()],su.prototype,"isInverse",void 0),a([u()],su.prototype,"wkt",void 0),a([u()],su.prototype,"wkid",void 0),su=Hf=a([_("esri.geometry.operators.support.GeographicTransformationStep")],su);var Wf;let wd=Wf=class extends Z{constructor(t){super(t),this.steps=[]}getInverse(){const t=new Wf;for(let e=this.steps.length-1;e>=0;e--){const r=this.steps[e];t.steps.push(r.getInverse())}return t}};a([u({type:[su],nonNullable:!0})],wd.prototype,"steps",void 0),wd=Wf=a([_("esri.geometry.operators.support.GeographicTransformation")],wd);const Hoe=Math.PI/180,Woe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,ho=Ke.radius,Zi=Ke.eccentricitySquared,aN={a1:ho*Zi,a2:ho*Zi*ho*Zi,a3:ho*Zi*Zi/2,a4:ho*Zi*ho*Zi*2.5,a5:ho*Zi+ho*Zi*Zi/2,a6:1-Zi},Zoe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Ke.radius,f:Ke.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Jo.radius,f:Jo.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Hs.radius,f:Hs.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Hs.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},lN={2:{5:Ue,7:null,9:null,10:Ue,1:_d,6:null,8:null,0:null,3:Qu,11:Ku,2:Ue,4:ec},5:{5:Ue,7:null,9:null,10:Ue,1:_d,6:null,8:null,0:null,3:Qu,11:Ku,2:Ue,4:ec},7:{5:null,7:Ue,9:null,10:Ue,1:null,6:z8,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:Ue,10:Ue,1:null,6:null,8:V8,0:null,3:null,11:null,2:null,4:null},3:{5:bd,7:null,9:null,10:bd,1:cN,6:null,8:null,0:null,3:Ue,11:hN,2:bd,4:pN},4:{5:tc,7:null,9:null,10:tc,1:SN,6:null,8:null,0:null,3:xN,11:yN,2:tc,4:Ue},1:{5:Xu,7:null,9:null,10:Xu,1:Ue,6:null,8:null,0:null,3:wN,11:fN,2:Xu,4:bN},6:{5:null,7:q8,9:null,10:q8,1:null,6:Ue,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:U8,10:U8,1:null,6:null,8:Ue,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:Ue,3:null,11:null,2:null,4:null},10:{5:Ue,7:Ue,9:Ue,10:Ue,1:_d,6:z8,8:V8,0:null,3:Qu,11:Ku,2:Ue,4:ec},11:{5:Yu,7:null,9:null,10:Yu,1:mN,6:null,8:null,0:null,3:gN,11:Ue,2:Yu,4:vN}};function Px(t,e){return uN(t,e)?.projector}function uN(t,e){if(t==null||e==null)return null;if(Xs.source.spatialReference===t&&Xs.dest.spatialReference===e)return Xs;const r=j8(t,Xs.source),i=j8(e,Xs.dest);return r===0&&i===0?at(t,e)?Xs.projector=Ue:Xs.projector=null:Xs.projector=lN[r][i],Xs}function j8(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=_i(t,1)),o2(t)?e.spatialReferenceId=1:bl(t)?e.spatialReferenceId=2:Ks(t)?e.spatialReferenceId=3:rL(t)?e.spatialReferenceId=11:t.wkt===oL.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===F5.wkt?e.spatialReferenceId=6:t.wkt===N5.wkt?e.spatialReferenceId=8:Z_(t)?e.spatialReferenceId=7:J_(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function Ue(t,e,r,i){t!==r&&(r[i++]=t[e++],r[i++]=t[e++],r[i]=t[e])}function bd(t,e,r,i){r[i]=Gc*(t[e]/sl),r[i+1]=Gc*(Ox-2*Math.atan(Math.exp(-t[e+1]/sl))),r[i+2]=t[e+2]}function cN(t,e,r,i){const s=t[e]/sl,n=Ox-2*Math.atan(Math.exp(-t[e+1]/sl)),o=sl+t[e+2],l=Math.cos(n)*o;r[i]=Math.cos(s)*l,r[i+1]=Math.sin(s)*l,r[i+2]=Math.sin(n)*o}function pN(t,e,r,i){bd(t,e,r,i),ec(r,i,r,i)}function dN(t,e,r,i,s){const n=.4999999*Math.PI,o=bi(qc*t[e+1],-n,n),l=Math.sin(o);r[i++]=qc*t[e]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+l)/(1-l)),r[i]=t[e+2]}function Qu(t,e,r,i){dN(t,e,r,i,Ke)}function Ku(t,e,r,i){r[i]=t[e]*G8,r[i+1]=t[e+1]*G8,r[i+2]=t[e+2]}function Yu(t,e,r,i){r[i]=t[e]*B8,r[i+1]=t[e+1]*B8,r[i+2]=t[e+2]}function hN(t,e,r,i){bd(t,e,r,i),Ku(r,i,r,i)}function yN(t,e,r,i){tc(t,e,r,i),Ku(r,i,r,i)}function fN(t,e,r,i){Xu(t,e,r,i),Ku(r,i,r,i)}function mN(t,e,r,i){Yu(t,e,r,i),_d(r,i,r,i)}function gN(t,e,r,i){Yu(t,e,r,i),Qu(r,i,r,i)}function vN(t,e,r,i){Yu(t,e,r,i),ec(r,i,r,i)}function o6(t,e,r,i,s){const n=s+t[e+2],o=qc*t[e+1],l=qc*t[e],c=Math.cos(o)*n;r[i]=Math.cos(l)*c,r[i+1]=Math.sin(l)*c,r[i+2]=Math.sin(o)*n}function V8(t,e,r,i){o6(t,e,r,i,Jo.radius)}function z8(t,e,r,i){o6(t,e,r,i,Hs.radius)}function _d(t,e,r,i){o6(t,e,r,i,Ke.radius)}function a6(t,e,r,i,s){const n=t[e],o=t[e+1],l=t[e+2],c=Math.sqrt(n*n+o*o+l*l),d=Nk(l/(c===0?1:c)),h=Math.atan2(o,n);r[i++]=Gc*h,r[i++]=Gc*d,r[i]=c-s}function U8(t,e,r,i){a6(t,e,r,i,Jo.radius)}function q8(t,e,r,i){a6(t,e,r,i,Hs.radius)}function Xu(t,e,r,i){a6(t,e,r,i,Ke.radius)}function wN(t,e,r,i){Xu(t,e,r,i),Qu(r,i,r,i)}function bN(t,e,r,i){Xu(t,e,r,i),ec(r,i,r,i)}function _N(t,e,r,i,s){const n=qc*t[e],o=qc*t[e+1],l=t[e+2],c=Math.sin(o),d=Math.cos(o),h=s.radius/Math.sqrt(1-s.eccentricitySquared*c*c);r[i++]=(h+l)*d*Math.cos(n),r[i++]=(h+l)*d*Math.sin(n),r[i++]=(h*(1-s.eccentricitySquared)+l)*c}function ec(t,e,r,i){_N(t,e,r,i,Ke)}function tc(t,e,r,i){const s=aN,n=t[e],o=t[e+1],l=t[e+2];let c,d,h,y,f,m,g,v,b,S,$,E,T,O,C,z,q,J,oe,le,re;c=Math.abs(l),d=n*n+o*o,h=Math.sqrt(d),y=d+l*l,f=Math.sqrt(y),le=Math.atan2(o,n),m=l*l/y,g=d/y,O=s.a2/f,C=s.a3-s.a4/f,g>.3?(v=c/f*(1+g*(s.a1+O+m*C)/f),oe=Math.asin(v),S=v*v,b=Math.sqrt(1-S)):(b=h/f*(1-m*(s.a5-O-g*C)/f),oe=Math.acos(b),S=1-b*b,v=Math.sqrt(S)),$=1-Ke.eccentricitySquared*S,E=Ke.radius/Math.sqrt($),T=s.a6*E,O=h-E*b,C=c-T*v,q=b*O+v*C,z=b*C-v*O,J=z/(T/$+q),oe+=J,re=q+z*J/2,l<0&&(oe=-oe),r[i++]=Gc*le,r[i++]=Gc*oe,r[i]=re}function SN(t,e,r,i){tc(t,e,r,i),_d(r,i,r,i)}function xN(t,e,r,i){tc(t,e,r,i),Qu(r,i,r,i)}const Xs={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ue},qc=Oh(1),Gc=ES(1),Ox=.5*Math.PI,sl=Ke.radius,G8=sl*Math.PI/180,B8=180/(sl*Math.PI);function Lh(t,e,r,i,s,n,o=Math.floor(t.length/3)){const l=Px(e,s);if(l==null)return!1;if(l===Ue){if(t===i&&r===n)return!0;const d=r+3*o;for(let h=r,y=n;h<d;h++,y++)i[y]=t[h];return!0}const c=r+3*o;for(let d=r,h=n;d<c;d+=3,h+=3)l(t,d,i,h);return!0}const Joe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Lh},Symbol.toStringTag,{value:"Module"}));function H8(t,e,r,i,s,n){return o1[0]=t,o1[1]=e,o1[2]=r,Lh(o1,i,0,s,n,0)}const o1=ra();function l6(t,e,r){if(e==null||r==null||r.vcsWkid||at(e,r)||Ko(e)||Ko(r))return null;const i=Nc(e)/Nc(r);if(i===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>$N(s,i);case"polyline":case"esriGeometryPolyline":return s=>IN(s,i);case"polygon":case"esriGeometryPolygon":return s=>TN(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>MN(s,i);case"extent":case"esriGeometryEnvelope":return s=>EN(s,i);default:return null}}function $N(t,e){t?.z!=null&&(t.z*=e)}function TN(t,e){if(t)for(const r of t.rings)for(const i of r)i.length>2&&(i[2]*=e)}function IN(t,e){if(t)for(const r of t.paths)for(const i of r)i.length>2&&(i[2]*=e)}function MN(t,e){if(t)for(const r of t.points)r.length>2&&(r[2]*=e)}function EN(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Sd=null,sh=null,nh=null,Bc=null,Zf={};const u6=new C_;function eo(){return!!(sh?.isLoaded()&&nh?.isLoaded()&&Bc?.isLoaded())}function Rx(){return!!eo()||(me(u6),Yo(),!1)}function Cx(t,e){return!t||!e||ws(t,e)||Rx()}function PN(t,e){return!ws(t,e)&&!eo()}async function Yo(t){Sd==null&&(Sd=Promise.all([R(()=>import("./money-tides-projectOperator-qH5k0kEB.js"),__vite__mapDeps([19,1,2,20,21,3,4,5,6,7,12,13,14])).then(e=>(sh=e,sh.load())),R(()=>import("./money-tides-projectOperator-DbObHpj1.js"),__vite__mapDeps([22,1,2,20,21,3,4,5,6,7,12,13,14])).then(e=>(nh=e,nh.load())),R(()=>import("./money-tides-geographicTransformationUtils-CCmAZtwI.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,12,13,14])).then(e=>(Bc=e,Bc.load()))])),await Sd,Ce(t),u6.notify()}function ia(t,e,r){return Array.isArray(t)?t.length===0?[]:(LL(t),Jf(t,t[0].spatialReference,e,r)):(Dc(t),Jf([t],t.spatialReference,e,r)[0])}function Jf(t,e,r,i){if(e==null||r==null)return t;if(ws(e,r,i))return t.map(s=>n0(s,e,r));if(i?.geographicTransformation==null&&o2(e))return t.map(s=>n0(s,e,B.WGS84)).map(s=>oh(s,r));if(i?.geographicTransformation==null&&o2(r))return t.map(s=>oh(s,B.WGS84)).map(s=>n0(s,B.WGS84,r));if(!eo())throw new kx;if(!i?.geographicTransformation){if(i?.extendedParams)i={...i,geographicTransformation:Bc.getTransformation(e,r,i.areaOfInterestExtent)||new wd};else if(!i?.areaOfInterestExtent){const s=ON(e,r);let n=Zf[s];n||(n=Bc.getTransformation(e,r)||new wd,Zf[s]=n),i={geographicTransformation:n}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof It?sh.executeMany(t,r,i):nh.executeMany(t,r,i)}function ON(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function RN(t,e){const r=Lx([t],e);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function Lx(t,e){if(!eo()){for(const r of t)if(r!=null&&!at(r.spatialReference,e)&&yi(r.spatialReference)&&yi(e)&&!ws(r.spatialReference,e))return me(u6),{pending:Yo(),geometries:null}}return{pending:null,geometries:t.map(r=>r==null?null:at(r.spatialReference,e)?r:yi(r.spatialReference)&&yi(e)?oh(r,e):null)}}let kx=class extends I{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function CN(){Sd=null,sh=null,nh=null,Bc=null,Zf={}}const LN={get loadPromise(){return Sd}};function oh(t,e){try{const r=ia(t,e);if(r==null)return null;"xmin"in t&&"xmin"in r&&(r.zmin=t.zmin,r.zmax=t.zmax);const i=l6(r.type,t.spatialReference,e);return i?.(r),r}catch(r){if(!(r instanceof kx))throw r;return null}}async function Ax(t,e,r){const i=t.spatialReference;return i!=null&&e!=null&&await c6(i,e,null,r),oh(t,e)}function ws(t,e,r){return!(r?.areaOfInterestExtent||r?.extendedParams||r?.geographicTransformation)&&(!!at(t,e)||yi(t)&&yi(e)&&!!Px(t,e))}function kN(t,e){if(at(t,e))return!0;if(!yi(t)||!yi(e))return!1;const r=bl(t)||Ks(t)||l8(t),i=bl(e)||Ks(e)||l8(e);return r&&i}async function c6(t,e,r,i){if(eo())return B9(i);if(Array.isArray(t)){for(const{source:s,dest:n,options:o}of t)if(s&&n&&!ws(s,n,o))return Yo(i)}else if(t&&e&&!ws(t,e,r))return Yo(i);return B9(i)}function n0(t,e,r){return t?"x"in t?Fx(t,e,new ne,r,0):"xmin"in t?zx(t,e,new ue,r,0):"rings"in t?Vx(t,e,new Ve,r,0):"paths"in t?Dx(t,e,new wt,r,0):"points"in t?Nx(t,e,new ls,r,0):null:null}function AN(t,e,r=e.spatialReference,i=0){return r!=null&&t.spatialReference!=null&&Fx(t,t.spatialReference,e,r,i)!=null}function Fx(t,e,r,i,s){rr[0]=t.x,rr[1]=t.y;const n=t.z;return rr[2]=n!==void 0?n:s,Lh(rr,e,0,rr,i,0)?(r.x=rr[0],r.y=rr[1],r.spatialReference=i,n!==void 0||Ko(i)?(r.z=rr[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),t.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=t.m,r.hasM=!0),r):null}function FN(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&Nx(t,t.spatialReference,e,r,i)!=null}function Nx(t,e,r,i,s){const{points:n,hasZ:o,hasM:l}=t,c=[],d=n.length,h=[];for(const f of n)h.push(f[0],f[1],o?f[2]:s);if(!Lh(h,e,0,h,i,0,d))return null;const y=o||Ko(i);for(let f=0;f<d;++f){const m=3*f,g=h[m],v=h[m+1];y&&l?c.push([g,v,h[m+2],n[f][3]]):y?c.push([g,v,h[m+2]]):l?c.push([g,v,n[f][2]]):c.push([g,v])}return r.points=c,r.spatialReference=i,r.hasZ=o,r.hasM=l,r}function NN(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&Dx(t,t.spatialReference,e,r,i)!=null}function Dx(t,e,r,i,s){const{paths:n,hasZ:o,hasM:l}=t,c=[];if(!Ux(n,o??!1,l??!1,e,c,i,s))return null;const d=o||Ko(i);return r.paths=c,r.spatialReference=i,r.hasZ=d,r.hasM=l,r}function jx(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&Vx(t,t.spatialReference,e,r,i)!=null}function Vx(t,e,r,i,s){const{rings:n,hasZ:o,hasM:l}=t,c=[];if(!Ux(n,o??!1,l??!1,e,c,i,s))return null;const d=o||Ko(i);return r.rings=c,r.spatialReference=i,r.hasZ=d,r.hasM=l,r}function DN(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&zx(t,t.spatialReference,e,r,i)!=null}function zx(t,e,r,i,s){const{xmin:n,ymin:o,xmax:l,ymax:c,hasZ:d,hasM:h}=t,y=d?t.zmin:s;if(!H8(n,o,y,e,rr,i))return null;const f=d||Ko(i);r.xmin=rr[0],r.ymin=rr[1],f&&(r.zmin=rr[2]);const m=d?t.zmax:s;return H8(l,c,m,e,rr,i)?(r.xmax=rr[0],r.ymax=rr[1],f&&(r.zmax=rr[2]),h&&(r.mmin=t.mmin,r.mmax=t.mmax),r.spatialReference=i,r):null}function Ux(t,e,r,i,s,n,o=0){const l=new Array;for(const h of t)for(const y of h)l.push(y[0],y[1],e?y[2]:o);if(!Lh(l,i,0,l,n,0))return!1;let c=0;s.length=0;const d=e||Ko(n);for(const h of t){const y=new Array;for(const f of h)d&&r?y.push([l[c++],l[c++],l[c++],f[3]]):d?y.push([l[c++],l[c++],l[c++]]):r?(y.push([l[c++],l[c++],f[2]]),c++):(y.push([l[c++],l[c++]]),c++);s.push(y)}return!0}const rr=ra(),Koe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:ws,initializeProjection:c6,isEqualBaseGCS:kN,isLoaded:eo,isLoadedOrLoad:Rx,isLoadedOrLoadFor:Cx,load:Yo,project:ia,projectExtent:DN,projectMany:Jf,projectMultipoint:FN,projectOrLoad:RN,projectOrLoadMany:Lx,projectPoint:AN,projectPolygon:jx,projectPolyline:NN,projectWithZConversion:Ax,projectWithoutEngine:n0,requiresLoad:PN,test:LN,tryProjectWithZConversion:oh,unload:CN},Symbol.toStringTag,{value:"Module"}));var o0;let Qf=o0=class extends Rl(U.ofType(Ve)){constructor(t){super(t)}clone(){return new o0(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(r=>{if(!e.equals(r.spatialReference)){if(!ws(r.spatialReference,e))return t?.messages?.push(new vs("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const s=new Ve;jx(r,s,e),r=s}const i=r.toJSON(t);return delete i.spatialReference,i}).filter(r=>r!=null):this.toArray().map(r=>r.toJSON(t))}static fromJSON(t,e){const r=new o0;return t.forEach(i=>r.add(Ve.fromJSON(i,e))),r}};Qf=o0=a([_("esri.layers.support.PolygonCollection")],Qf);const xd=Qf;let cn=class extends Rl(H5){constructor(e){super(e),this.id=`focusarea-${$5()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new xd}readGeometries(e,r,i){Array.isArray(e)?this.geometries=xd.fromJSON(e,i):i.origin!=="web-scene"&&i.origin!=="portal-item"||i.hooks?.onAfterLoad?.(()=>this._loadGeometries(_h(e,i),i))}async _loadGeometries(e,r){const i=await Te(e,{responseType:"json"});this.geometries=xd.fromJSON(i.data,r)}};a([u({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),u()],cn.prototype,"id",void 0),a([u({type:String,json:{write:!0}})],cn.prototype,"title",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],cn.prototype,"enabled",void 0),a([u({type:nA,json:{write:!0}})],cn.prototype,"outline",void 0),a([u({type:xd,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new xd(t.items.map(e=>e.clone()))}),Yk({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],cn.prototype,"geometries",void 0),a([A(["web-scene","portal-item","service"],"geometries")],cn.prototype,"readGeometries",null),cn=a([_("esri.effects.FocusArea")],cn);const jN=cn;let Rp=class extends Rl(H5){constructor(e){super(e),this.areas=new U,this.style="bright"}};a([u({type:U.ofType(jN),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new U(t.items.map(e=>e.clone()))})],Rp.prototype,"areas",void 0),a([u({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],Rp.prototype,"style",void 0),Rp=a([_("esri.effects.FocusAreas")],Rp);const qx=Rp;function VN(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function zN(t){return!(!VN(t)||!bk(t)?.operations?.supportsEditing||"editingEnabled"in t&&!Sk(t)||gS(t))}const UN=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,qN="screenUtils.toPt: input not recognized!",Gx=96;function GN(t){return t?t/72*Gx:0}function qi(t){return t?72*t/Gx:0}function _e(t){if(typeof t=="string"){const e=t.match(UN);if(e){const r=Number(e[1]),i=e[3]&&e[3].toLowerCase(),s=t.startsWith("-"),n=i==="px"?qi(r):r;return s?-n:n}return console.warn(qN),null}return t}function Et(t=0,e=0){return{x:t,y:e}}function eae(t){return t?Et(t.x,t.y):null}function tae(t=0,e=0){return[t,e]}function rae(t=0,e=0,r=0){return[t,e,r]}function iae(t){return t}function sae(t){return t}function nae(t){return t}function oae(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function s4(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function BN(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function HN(t,e,r,i,s,n,o,l,c,d,h,y,f,m,g,v){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=r,b[3]=i,b[4]=s,b[5]=n,b[6]=o,b[7]=l,b[8]=c,b[9]=d,b[10]=h,b[11]=y,b[12]=f,b[13]=m,b[14]=g,b[15]=v,b}const WN=s4();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:WN,clone:BN,create:s4,fromValues:HN},Symbol.toStringTag,{value:"Module"}));function Bx(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function sa(t,e,r,i,s,n,o,l,c,d,h,y,f,m,g,v,b){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t[4]=n,t[5]=o,t[6]=l,t[7]=c,t[8]=d,t[9]=h,t[10]=y,t[11]=f,t[12]=m,t[13]=g,t[14]=v,t[15]=b,t}function n4(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function na(t,e){if(t===e){const r=e[1],i=e[2],s=e[3],n=e[6],o=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=n,t[11]=e[14],t[12]=s,t[13]=o,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ZN(t,e){return Hx(t,e)||n4(t),t}function Hx(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],S=e[15],$=r*l-i*o,E=r*c-s*o,T=r*d-n*o,O=i*c-s*l,C=i*d-n*l,z=s*d-n*c,q=h*v-y*g,J=h*b-f*g,oe=h*S-m*g,le=y*b-f*v,re=y*S-m*v,Ie=f*S-m*b;let pe=$*Ie-E*re+T*le+O*oe-C*J+z*q;return pe?(pe=1/pe,t[0]=(l*Ie-c*re+d*le)*pe,t[1]=(s*re-i*Ie-n*le)*pe,t[2]=(v*z-b*C+S*O)*pe,t[3]=(f*C-y*z-m*O)*pe,t[4]=(c*oe-o*Ie-d*J)*pe,t[5]=(r*Ie-s*oe+n*J)*pe,t[6]=(b*T-g*z-S*E)*pe,t[7]=(h*z-f*T+m*E)*pe,t[8]=(o*re-l*oe+d*q)*pe,t[9]=(i*oe-r*re-n*q)*pe,t[10]=(g*C-v*T+S*$)*pe,t[11]=(y*T-h*C-m*$)*pe,t[12]=(l*J-o*le-c*q)*pe,t[13]=(r*le-i*J+s*q)*pe,t[14]=(v*E-g*O-b*$)*pe,t[15]=(h*O-y*E+f*$)*pe,t):null}function JN(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],S=e[15];return t[0]=l*(f*S-m*b)-y*(c*S-d*b)+v*(c*m-d*f),t[1]=-(i*(f*S-m*b)-y*(s*S-n*b)+v*(s*m-n*f)),t[2]=i*(c*S-d*b)-l*(s*S-n*b)+v*(s*d-n*c),t[3]=-(i*(c*m-d*f)-l*(s*m-n*f)+y*(s*d-n*c)),t[4]=-(o*(f*S-m*b)-h*(c*S-d*b)+g*(c*m-d*f)),t[5]=r*(f*S-m*b)-h*(s*S-n*b)+g*(s*m-n*f),t[6]=-(r*(c*S-d*b)-o*(s*S-n*b)+g*(s*d-n*c)),t[7]=r*(c*m-d*f)-o*(s*m-n*f)+h*(s*d-n*c),t[8]=o*(y*S-m*v)-h*(l*S-d*v)+g*(l*m-d*y),t[9]=-(r*(y*S-m*v)-h*(i*S-n*v)+g*(i*m-n*y)),t[10]=r*(l*S-d*v)-o*(i*S-n*v)+g*(i*d-n*l),t[11]=-(r*(l*m-d*y)-o*(i*m-n*y)+h*(i*d-n*l)),t[12]=-(o*(y*b-f*v)-h*(l*b-c*v)+g*(l*f-c*y)),t[13]=r*(y*b-f*v)-h*(i*b-s*v)+g*(i*f-s*y),t[14]=-(r*(l*b-c*v)-o*(i*b-s*v)+g*(i*c-s*l)),t[15]=r*(l*f-c*y)-o*(i*f-s*y)+h*(i*c-s*l),t}function QN(t){const e=t[0],r=t[1],i=t[2],s=t[3],n=t[4],o=t[5],l=t[6],c=t[7],d=t[8],h=t[9],y=t[10],f=t[11],m=t[12],g=t[13],v=t[14],b=t[15];return(e*o-r*n)*(y*b-f*v)-(e*l-i*n)*(h*b-f*g)+(e*c-s*n)*(h*v-y*g)+(r*l-i*o)*(d*b-f*m)-(r*c-s*o)*(d*v-y*m)+(i*c-s*l)*(d*g-h*m)}function Wx(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=e[8],f=e[9],m=e[10],g=e[11],v=e[12],b=e[13],S=e[14],$=e[15];let E=r[0],T=r[1],O=r[2],C=r[3];return t[0]=E*i+T*l+O*y+C*v,t[1]=E*s+T*c+O*f+C*b,t[2]=E*n+T*d+O*m+C*S,t[3]=E*o+T*h+O*g+C*$,E=r[4],T=r[5],O=r[6],C=r[7],t[4]=E*i+T*l+O*y+C*v,t[5]=E*s+T*c+O*f+C*b,t[6]=E*n+T*d+O*m+C*S,t[7]=E*o+T*h+O*g+C*$,E=r[8],T=r[9],O=r[10],C=r[11],t[8]=E*i+T*l+O*y+C*v,t[9]=E*s+T*c+O*f+C*b,t[10]=E*n+T*d+O*m+C*S,t[11]=E*o+T*h+O*g+C*$,E=r[12],T=r[13],O=r[14],C=r[15],t[12]=E*i+T*l+O*y+C*v,t[13]=E*s+T*c+O*f+C*b,t[14]=E*n+T*d+O*m+C*S,t[15]=E*o+T*h+O*g+C*$,t}function KN(t,e,r){const i=r[0],s=r[1],n=r[2];if(e===t)t[12]=e[0]*i+e[4]*s+e[8]*n+e[12],t[13]=e[1]*i+e[5]*s+e[9]*n+e[13],t[14]=e[2]*i+e[6]*s+e[10]*n+e[14],t[15]=e[3]*i+e[7]*s+e[11]*n+e[15];else{const o=e[0],l=e[1],c=e[2],d=e[3],h=e[4],y=e[5],f=e[6],m=e[7],g=e[8],v=e[9],b=e[10],S=e[11];t[0]=o,t[1]=l,t[2]=c,t[3]=d,t[4]=h,t[5]=y,t[6]=f,t[7]=m,t[8]=g,t[9]=v,t[10]=b,t[11]=S,t[12]=o*i+h*s+g*n+e[12],t[13]=l*i+y*s+v*n+e[13],t[14]=c*i+f*s+b*n+e[14],t[15]=d*i+m*s+S*n+e[15]}return t}function YN(t,e,r){const i=r[0],s=r[1],n=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function XN(t,e,r,i){let s=i[0],n=i[1],o=i[2],l=Math.sqrt(s*s+n*n+o*o);if(l<=Mr())return void Bx(t,e);l=1/l,s*=l,n*=l,o*=l;const c=Math.sin(r),d=Math.cos(r),h=1-d,y=e[0],f=e[1],m=e[2],g=e[3],v=e[4],b=e[5],S=e[6],$=e[7],E=e[8],T=e[9],O=e[10],C=e[11],z=s*s*h+d,q=n*s*h+o*c,J=o*s*h-n*c,oe=s*n*h-o*c,le=n*n*h+d,re=o*n*h+s*c,Ie=s*o*h+n*c,pe=n*o*h-s*c,_t=o*o*h+d;t[0]=y*z+v*q+E*J,t[1]=f*z+b*q+T*J,t[2]=m*z+S*q+O*J,t[3]=g*z+$*q+C*J,t[4]=y*oe+v*le+E*re,t[5]=f*oe+b*le+T*re,t[6]=m*oe+S*le+O*re,t[7]=g*oe+$*le+C*re,t[8]=y*Ie+v*pe+E*_t,t[9]=f*Ie+b*pe+T*_t,t[10]=m*Ie+S*pe+O*_t,t[11]=g*Ie+$*pe+C*_t,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function eD(t,e,r){const i=Math.sin(r),s=Math.cos(r),n=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=e[9],y=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+d*i,t[5]=o*s+h*i,t[6]=l*s+y*i,t[7]=c*s+f*i,t[8]=d*s-n*i,t[9]=h*s-o*i,t[10]=y*s-l*i,t[11]=f*s-c*i,t}function tD(t,e,r){const i=Math.sin(r),s=Math.cos(r),n=e[0],o=e[1],l=e[2],c=e[3],d=e[8],h=e[9],y=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-d*i,t[1]=o*s-h*i,t[2]=l*s-y*i,t[3]=c*s-f*i,t[8]=n*i+d*s,t[9]=o*i+h*s,t[10]=l*i+y*s,t[11]=c*i+f*s,t}function rD(t,e,r){const i=Math.sin(r),s=Math.cos(r),n=e[0],o=e[1],l=e[2],c=e[3],d=e[4],h=e[5],y=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+d*i,t[1]=o*s+h*i,t[2]=l*s+y*i,t[3]=c*s+f*i,t[4]=d*s-n*i,t[5]=h*s-o*i,t[6]=y*s-l*i,t[7]=f*s-c*i,t}function iD(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function sD(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nD(t,e,r){if(e===0)return n4(t);let i=r[0],s=r[1],n=r[2],o=Math.sqrt(i*i+s*s+n*n);if(o<=Mr())return null;o=1/o,i*=o,s*=o,n*=o;const l=Math.sin(e),c=Math.cos(e),d=1-c;return t[0]=i*i*d+c,t[1]=s*i*d+n*l,t[2]=n*i*d-s*l,t[3]=0,t[4]=i*s*d-n*l,t[5]=s*s*d+c,t[6]=n*s*d+i*l,t[7]=0,t[8]=i*n*d+s*l,t[9]=s*n*d-i*l,t[10]=n*n*d+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function oD(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function aD(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lD(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zx(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=i+i,c=s+s,d=n+n,h=i*l,y=i*c,f=i*d,m=s*c,g=s*d,v=n*d,b=o*l,S=o*c,$=o*d;return t[0]=1-(m+v),t[1]=y+$,t[2]=f-S,t[3]=0,t[4]=y-$,t[5]=1-(h+v),t[6]=g+b,t[7]=0,t[8]=f+S,t[9]=g-b,t[10]=1-(h+m),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function uD(t,e){const r=cD,i=-e[0],s=-e[1],n=-e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=i*i+s*s+n*n+o*o;return y>0?(r[0]=2*(l*o+h*i+c*n-d*s)/y,r[1]=2*(c*o+h*s+d*i-l*n)/y,r[2]=2*(d*o+h*n+l*s-c*i)/y):(r[0]=2*(l*o+h*i+c*n-d*s),r[1]=2*(c*o+h*s+d*i-l*n),r[2]=2*(d*o+h*n+l*s-c*i)),Zx(t,e,r),t}const cD=ra();function pD(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function dD(t,e){const r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],l=e[6],c=e[8],d=e[9],h=e[10];return t[0]=Math.sqrt(r*r+i*i+s*s),t[1]=Math.sqrt(n*n+o*o+l*l),t[2]=Math.sqrt(c*c+d*d+h*h),t}function hD(t,e){const r=e[0]+e[5]+e[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t}function yD(t,e,r,i){const s=e[0],n=e[1],o=e[2],l=e[3],c=s+s,d=n+n,h=o+o,y=s*c,f=s*d,m=s*h,g=n*d,v=n*h,b=o*h,S=l*c,$=l*d,E=l*h,T=i[0],O=i[1],C=i[2];return t[0]=(1-(g+b))*T,t[1]=(f+E)*T,t[2]=(m-$)*T,t[3]=0,t[4]=(f-E)*O,t[5]=(1-(y+b))*O,t[6]=(v+S)*O,t[7]=0,t[8]=(m+$)*C,t[9]=(v-S)*C,t[10]=(1-(y+g))*C,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function fD(t,e,r,i,s){const n=e[0],o=e[1],l=e[2],c=e[3],d=n+n,h=o+o,y=l+l,f=n*d,m=n*h,g=n*y,v=o*h,b=o*y,S=l*y,$=c*d,E=c*h,T=c*y,O=i[0],C=i[1],z=i[2],q=s[0],J=s[1],oe=s[2],le=(1-(v+S))*O,re=(m+T)*O,Ie=(g-E)*O,pe=(m-T)*C,_t=(1-(f+S))*C,Er=(b+$)*C,Ot=(g+E)*z,he=(b-$)*z,Vt=(1-(f+v))*z;return t[0]=le,t[1]=re,t[2]=Ie,t[3]=0,t[4]=pe,t[5]=_t,t[6]=Er,t[7]=0,t[8]=Ot,t[9]=he,t[10]=Vt,t[11]=0,t[12]=r[0]+q-(le*q+pe*J+Ot*oe),t[13]=r[1]+J-(re*q+_t*J+he*oe),t[14]=r[2]+oe-(Ie*q+Er*J+Vt*oe),t[15]=1,t}function mD(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=r+r,l=i+i,c=s+s,d=r*o,h=i*o,y=i*l,f=s*o,m=s*l,g=s*c,v=n*o,b=n*l,S=n*c;return t[0]=1-y-g,t[1]=h+S,t[2]=f-b,t[3]=0,t[4]=h-S,t[5]=1-d-g,t[6]=m+v,t[7]=0,t[8]=f+b,t[9]=m-v,t[10]=1-d-y,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gD(t,e,r,i,s,n,o){const l=1/(r-e),c=1/(s-i),d=1/(n-o);return t[0]=2*n*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*c,t[6]=0,t[7]=0,t[8]=(r+e)*l,t[9]=(s+i)*c,t[10]=(o+n)*d,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n*2*d,t[15]=0,t}function vD(t,e,r,i,s){const n=1/Math.tan(e/2);let o;return t[0]=n/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(i-s),t[10]=(s+i)*o,t[14]=2*s*i*o):(t[10]=-1,t[14]=-2*i),t}function wD(t,e,r,i){const s=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+l),d=2/(s+n);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=-(o-l)*c*.5,t[9]=(s-n)*d*.5,t[10]=i/(r-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*r/(r-i),t[15]=0,t}function bD(t,e,r,i,s,n,o){const l=1/(e-r),c=1/(i-s),d=1/(n-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+r)*l,t[13]=(s+i)*c,t[14]=(o+n)*d,t[15]=1,t}function _D(t,e,r,i){const s=e[0],n=e[1],o=e[2];let l=s-r[0],c=n-r[1],d=o-r[2];const h=Mr();if(Math.abs(l)<h&&Math.abs(c)<h&&Math.abs(d)<h)return void n4(t);let y=1/Math.sqrt(l*l+c*c+d*d);l*=y,c*=y,d*=y;const f=i[0],m=i[1],g=i[2];let v=m*d-g*c,b=g*l-f*d,S=f*c-m*l;y=Math.sqrt(v*v+b*b+S*S),y?(y=1/y,v*=y,b*=y,S*=y):(v=0,b=0,S=0);let $=c*S-d*b,E=d*v-l*S,T=l*b-c*v;y=Math.sqrt($*$+E*E+T*T),y?(y=1/y,$*=y,E*=y,T*=y):($=0,E=0,T=0),t[0]=v,t[1]=$,t[2]=l,t[3]=0,t[4]=b,t[5]=E,t[6]=c,t[7]=0,t[8]=S,t[9]=T,t[10]=d,t[11]=0,t[12]=-(v*s+b*n+S*o),t[13]=-($*s+E*n+T*o),t[14]=-(l*s+c*n+d*o),t[15]=1}function SD(t,e,r,i){const s=e[0],n=e[1],o=e[2],l=i[0],c=i[1],d=i[2];let h=s-r[0],y=n-r[1],f=o-r[2],m=h*h+y*y+f*f;m>0&&(m=1/Math.sqrt(m),h*=m,y*=m,f*=m);let g=c*f-d*y,v=d*h-l*f,b=l*y-c*h;return m=g*g+v*v+b*b,m>0&&(m=1/Math.sqrt(m),g*=m,v*=m,b*=m),t[0]=g,t[1]=v,t[2]=b,t[3]=0,t[4]=y*b-f*v,t[5]=f*g-h*b,t[6]=h*v-y*g,t[7]=0,t[8]=h,t[9]=y,t[10]=f,t[11]=0,t[12]=s,t[13]=n,t[14]=o,t[15]=1,t}function xD(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function $D(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function TD(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Jx(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function ID(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function MD(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t[4]=e[4]+r[4]*i,t[5]=e[5]+r[5]*i,t[6]=e[6]+r[6]*i,t[7]=e[7]+r[7]*i,t[8]=e[8]+r[8]*i,t[9]=e[9]+r[9]*i,t[10]=e[10]+r[10]*i,t[11]=e[11]+r[11]*i,t[12]=e[12]+r[12]*i,t[13]=e[13]+r[13]*i,t[14]=e[14]+r[14]*i,t[15]=e[15]+r[15]*i,t}function ED(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function PD(t,e){if(t===e)return!0;const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],d=t[7],h=t[8],y=t[9],f=t[10],m=t[11],g=t[12],v=t[13],b=t[14],S=t[15],$=e[0],E=e[1],T=e[2],O=e[3],C=e[4],z=e[5],q=e[6],J=e[7],oe=e[8],le=e[9],re=e[10],Ie=e[11],pe=e[12],_t=e[13],Er=e[14],Ot=e[15],he=Mr();return Math.abs(r-$)<=he*Math.max(1,Math.abs(r),Math.abs($))&&Math.abs(i-E)<=he*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(s-T)<=he*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(n-O)<=he*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(o-C)<=he*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(l-z)<=he*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(c-q)<=he*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(d-J)<=he*Math.max(1,Math.abs(d),Math.abs(J))&&Math.abs(h-oe)<=he*Math.max(1,Math.abs(h),Math.abs(oe))&&Math.abs(y-le)<=he*Math.max(1,Math.abs(y),Math.abs(le))&&Math.abs(f-re)<=he*Math.max(1,Math.abs(f),Math.abs(re))&&Math.abs(m-Ie)<=he*Math.max(1,Math.abs(m),Math.abs(Ie))&&Math.abs(g-pe)<=he*Math.max(1,Math.abs(g),Math.abs(pe))&&Math.abs(v-_t)<=he*Math.max(1,Math.abs(v),Math.abs(_t))&&Math.abs(b-Er)<=he*Math.max(1,Math.abs(b),Math.abs(Er))&&Math.abs(S-Ot)<=he*Math.max(1,Math.abs(S),Math.abs(Ot))}function OD(t){const e=Mr(),r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],l=t[6],c=t[8],d=t[9],h=t[10];return Math.abs(1-(r*r+n*n+c*c))<=e&&Math.abs(1-(i*i+o*o+d*d))<=e&&Math.abs(1-(s*s+l*l+h*h))<=e}function RD(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const CD=Wx,LD=Jx;Object.freeze(Object.defineProperty({__proto__:null,add:TD,adjoint:JN,copy:Bx,determinant:QN,equals:PD,exactEquals:ED,frob:$D,fromQuat:mD,fromQuat2:uD,fromRotation:nD,fromRotationTranslation:Zx,fromRotationTranslationScale:yD,fromRotationTranslationScaleOrigin:fD,fromScaling:sD,fromTranslation:iD,fromXRotation:oD,fromYRotation:aD,fromZRotation:lD,frustum:gD,getRotation:hD,getScale:dD,getTranslation:pD,hasIdentityRotation:RD,identity:n4,invert:Hx,invertOrIdentity:ZN,isOrthoNormal:OD,lookAt:_D,mul:CD,multiply:Wx,multiplyScalar:ID,multiplyScalarAndAdd:MD,ortho:bD,perspective:vD,perspectiveFromFieldOfView:wD,rotate:XN,rotateX:eD,rotateY:tD,rotateZ:rD,scale:YN,set:sa,str:xD,sub:LD,subtract:Jx,targetTo:SD,translate:KN,transpose:na},Symbol.toStringTag,{value:"Module"}));const kD=(t,e)=>{const r=sa(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return na(r,r)},AD=(t,e)=>{const r=sa(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return na(r,r)},FD=(t,e)=>{const r=1-e,i=sa(t,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return na(i,i)},ND=(t,e)=>{const r=Math.sin(e*Math.PI/180),i=Math.cos(e*Math.PI/180),s=sa(t,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return na(s,s)},DD=(t,e)=>{const r=1-2*e,i=sa(t,r,0,0,e,0,r,0,e,0,0,r,e,0,0,0,1);return na(i,i)},jD=(t,e)=>{const r=sa(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return na(r,r)},VD=(t,e)=>{const r=1-e,i=sa(t,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return na(i,i)};let Qx=class Kx{constructor(e,r,i){this.strength=e,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(e,r,i){this.strength=zr(e.strength,r.strength,i),this.radius=zr(e.radius,r.radius,i),this.threshold=zr(e.threshold,r.threshold,i)}clone(){return new Kx(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:$d(this.radius),strength:this.strength,threshold:this.threshold}}},Yx=class Xx{constructor(e){this.radius=e,this.type="blur"}interpolate(e,r,i){this.radius=Math.round(zr(e.radius,r.radius,i))}clone(){return new Xx(this.radius)}toJSON(){return{type:"blur",radius:$d(this.radius)}}},Kf=class e${constructor(e,r){this.type=e,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,r,i){this.amount=zr(e.amount,r.amount,i),this._updateMatrix()}clone(){return new e$(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||s4();switch(this.type){case"brightness":this._colorMatrix=kD(e,this.amount);break;case"contrast":this._colorMatrix=AD(e,this.amount);break;case"grayscale":this._colorMatrix=FD(e,this.amount);break;case"invert":this._colorMatrix=DD(e,this.amount);break;case"saturate":this._colorMatrix=jD(e,this.amount);break;case"sepia":this._colorMatrix=VD(e,this.amount)}}},t$=class r${constructor(e,r,i,s){this.offsetX=e,this.offsetY=r,this.blurRadius=i,this.color=s,this.type="drop-shadow"}interpolate(e,r,i){this.offsetX=zr(e.offsetX,r.offsetX,i),this.offsetY=zr(e.offsetY,r.offsetY,i),this.blurRadius=zr(e.blurRadius,r.blurRadius,i),this.color[0]=Math.round(zr(e.color[0],r.color[0],i)),this.color[1]=Math.round(zr(e.color[1],r.color[1],i)),this.color[2]=Math.round(zr(e.color[2],r.color[2],i)),this.color[3]=zr(e.color[3],r.color[3],i)}clone(){return new r$(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:$d(this.offsetX),yoffset:$d(this.offsetY),blurRadius:$d(this.blurRadius),color:e}}},i$=class s${constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,r,i){this.angle=zr(e.angle,r.angle,i),this._updateMatrix()}clone(){return new s$(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||s4();this._colorMatrix=ND(e,this.angle)}},n$=class o${constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,r,i){this.amount=zr(e.amount,r.amount,i)}clone(){return new o$(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function zr(t,e,r){return t+(e-t)*r}function $d(t){return Math.round(1e3*qi(t))/1e3}function zD(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new Kf(t.type,0);case"saturate":case"brightness":case"contrast":return new Kf(t.type,1);case"opacity":return new n$(1);case"hue-rotate":return new i$(0);case"blur":return new Yx(0);case"drop-shadow":return new t$(0,0,0,[...B5("transparent")]);case"bloom":return new Qx(0,0,1)}}function UD(t,e){const r=t.length>e.length?t:e;return(t.length>e.length?e:t).every((i,s)=>i.type===r[s].type)}function qD(t,e){const r=t.length>e.length?t:e,i=t.length>e.length?e:t;for(let s=i.length;s<r.length;s++)i.push(zD(r[s]))}function GD(t){const e=t[0];return!!e&&"type"in e}const ty=()=>N.getLogger("esri.support.basemapUtils");function BD(){return{}}function HD(t){for(const e in t){const r=t[e];r&&!r.destroyed&&r.destroy(),delete t[e]}}function WD(t,e){let r;if(typeof t=="string"){const i=t in Pf,s=!i&&t.includes("/");if(!i&&!s){if(mf())ty().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(Pf).filter(([o,l])=>l.classic||l.is3d).map(([o])=>`"${o}"`).sort().join(", ");ty().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${n}`)}return null}e&&(r=e[t]),r||(r=i?vd.fromId(t):new vd({style:{id:t}}),e&&(e[t]=r))}else r=Yr(vd,t);return r?.destroyed&&(ty().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function a$(t){return new Gr({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const r=[];return"tables"in e&&r.push(e.tables),"layers"in e&&r.push(e.layers),r},itemFilterFunction:e=>{const r=e.parent;return!!r&&"tables"in r&&r.tables.includes(e)}})}function a1(t){for(const e of t.values())e?.destroy();t.clear()}const W8={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function ZD(t){let e=null;if(typeof t=="string")if(t in W8){const r=W8[t];e=new c2({resourceInfo:{data:{layers:[r]}}})}else N.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Yr(c2,t);return e}function Yf(t,e,r){let i,s;if(t)for(let n=0,o=t.length;n<o;n++){if(i=t.at(n),i?.[e]===r)return i;if(i?.type==="group"&&(s=Yf(i.layers,e,r),s))return s}}const l$=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.layers=new U;const s=l=>{l.parent&&l.removeFromParent()},n=l=>{l.parent=this,this.layerAdded(l),l.type!=="elevation"&&l.type!=="base-elevation"||N.getLogger(this).error(`Layer 'title:${l.title}, id:${l.id}' of type '${l.type}' is not supported as an operational layer and will therefore be ignored.`)},o=l=>{l.parent=null,this.layerRemoved(l)};this.addHandles([this.layers.on("before-add",l=>{if(l.item===this)return l.preventDefault(),void N.getLogger(this).error("#add()","Cannot add layer to itself.");s(l.item)}),this.layers.on("after-add",l=>n(l.item)),this.layers.on("after-remove",l=>o(l.item))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}removeChildLayer(i){this.layers.remove(i),super.removeChildLayer?.(i)}set layers(i){this._set("layers",Bs(i,this._get("layers")))}add(i,s){const n=this.layers;if(s=n.getNextIndex(s),i instanceof Oe){const o=i;o.parent===this?this.reorder(o,s):n.add(o,s)}else Tr(i)?i.then(o=>{this.destroyed||this.add(o,s)}):N.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const n=this.layers;let o=n.getNextIndex(s);i.slice().forEach(l=>{l.parent!==this?(n.add(l,o),o+=1):this.reorder(l,o)})}findLayerById(i){return Yf(this.layers,"id",i)}findLayerByUid(i){return Yf(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return a([u()],r.prototype,"layers",null),r=a([_("esri.support.LayersMixin")],r),r},JD=new Set(["feature","subtype-group"]);function Xf(t,e,r){if(t)for(let i=0,s=t.length;i<s;i++){const n=t.at(i);if(n[e]===r)return n;if(n?.type==="group"){const o=Xf(n.tables,e,r);if(o)return o}}}const u$=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.tables=new U,this.addHandles([this.tables.on("after-add",s=>{const n=s.item;n.parent&&n.parent!==this&&n.removeFromParent(),n.parent=this,JD.has(n.type)||N.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const s of i)s.destroy();this.tables.destroy()}removeChildLayer(i){this.tables.remove(i),super.removeChildLayer?.(i)}set tables(i){this._set("tables",Bs(i,this._get("tables")))}findTableById(i){return Xf(this.tables,"id",i)}findTableByUid(i){return Xf(this.tables,"uid",i)}};return a([u()],r.prototype,"tables",null),r=a([_("esri.support.TablesMixin")],r),r};let Mi=class extends u$(l$(N2)){constructor(e){super(e),this.allLayers=new Gr({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:r=>"layers"in r?r.layers:null}),this.focusAreas=new qx,this.allTables=a$(this),this.basemap=null,this.editableLayers=new Gr({getCollections:()=>[this.allLayers],itemFilterFunction:zN}),this.ground=new c2,this._basemapCache=BD(),this.addHandles(zi(()=>this.ground,(r,i)=>{i?.parent===this&&(i.parent=null),r.parent=this},{sync:!0}))}destroy(){HD(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=st(this.basemap),st(this.ground),this._set("ground",null)}castBasemap(e){return WD(e,this._basemapCache)}castGround(e){return ZD(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(r=>r.id===e)}findTableById(e){return this.allTables.find(r=>r.id===e)}};a([u({readOnly:!0,dependsOn:[]})],Mi.prototype,"allLayers",void 0),a([u({type:qx,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Mi.prototype,"focusAreas",void 0),a([u({readOnly:!0})],Mi.prototype,"allTables",void 0),a([u({type:vd,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Mi.prototype,"basemap",void 0),a([xe("basemap")],Mi.prototype,"castBasemap",null),a([u({readOnly:!0})],Mi.prototype,"editableLayers",void 0),a([u({type:c2,nonNullable:!0})],Mi.prototype,"ground",void 0),a([xe("ground")],Mi.prototype,"castGround",null),a([u()],Mi.prototype,"undoRedo",void 0),Mi=a([_("esri.Map")],Mi);const c$=Mi;let Sa=class extends H5{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};a([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Sa.prototype,"row",void 0),a([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Sa.prototype,"column",void 0),a([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Sa.prototype,"rows",void 0),a([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Sa.prototype,"columns",void 0),Sa=a([_("esri.CameraLayout")],Sa);const p$=Sa;let o4=class{constructor(e,r){this.min=e,this.max=r,this.range=r-e}normalize(e,r=0,i=!1){return Z8(this.range,this.min,this.max,e,r,i)}clamp(e,r=0){return bi(e-r,this.min,this.max)+r}monotonic(e,r,i){return e<r?r:r+em(this.range,e-r,i)}minimalMonotonic(e,r,i){return Z8(this.range,e,e+this.range,r,i)}center(e,r,i){return r=this.monotonic(e,r,i),this.normalize((e+r)/2,i)}diff(e,r,i){return this.monotonic(e,r,i)-e}shortestSignedDiff(e,r){e=this.normalize(e);const i=(r=this.normalize(r))-e,s=r<e?this.minimalMonotonic(e,r)-e:r-this.minimalMonotonic(r,e);return Math.abs(i)<Math.abs(s)?i:s}contains(e,r,i){return r=this.minimalMonotonic(e,r),(i=this.minimalMonotonic(e,i))>e&&i<r}};function Z8(t,e,r,i,s=0,n=!1){return(i-=s)<e?i+=em(t,e-i):i>r&&(i-=em(t,i-r)),n&&i===r&&(i=e),i+s}function em(t,e,r=0){return Math.ceil((e-r)/t)*t+r}const cae=new o4(0,2*Math.PI),pae=new o4(-Math.PI,Math.PI),QD=new o4(0,360);let xs=class extends de(F){constructor(...e){super(...e),this.position=new ne([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new p$}normalizeCtorArgs(e,r,i,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return r!=null&&(n.heading=r),i!=null&&(n.tilt=i),s!=null&&(n.fov=s),n}return e}writePosition(e,r,i,s){const n=e.clone();n.x=Ur(e.x||0),n.y=Ur(e.y||0),n.z=e.hasZ?Ur(e.z||0):e.z,r[i]=n.write({},s)}readPosition(e,r){const i=new ne;return i.read(e,r),i.x=Ur(i.x||0),i.y=Ur(i.y||0),i.z=i.hasZ?Ur(i.z||0):i.z,i}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};a([u({type:ne,json:{write:{isRequired:!0}}})],xs.prototype,"position",void 0),a([j("position")],xs.prototype,"writePosition",null),a([A("position")],xs.prototype,"readPosition",null),a([u({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),xe(t=>QD.normalize(Ur(t)))],xs.prototype,"heading",void 0),a([u({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),xe(t=>bi(Ur(t),-180,180))],xs.prototype,"tilt",void 0),a([u({type:Number,nonNullable:!0,json:{default:55,write:!0}}),xe(t=>bi(Ur(t,55),1,170))],xs.prototype,"fov",void 0),a([u({type:p$,nonNullable:!0,json:{read:!1,write:!1}})],xs.prototype,"layout",void 0),xs=a([_("esri.Camera")],xs);const KD=xs;function d$(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function p6(t){return t.points!==void 0}function d6(t){return t.x!==void 0&&t.y!==void 0}function h6(t){return t.paths!==void 0||t.curvePaths!==void 0}function nl(t){return t.rings!==void 0||t.curveRings!==void 0}function Xo(t){return t==null?null:t instanceof It?t:d6(t)?ne.fromJSON(t):h6(t)?wt.fromJSON(t):nl(t)?Ve.fromJSON(t):p6(t)?ls.fromJSON(t):d$(t)?ue.fromJSON(t):null}function kh(t){return t?d6(t)?"esriGeometryPoint":h6(t)?"esriGeometryPolyline":nl(t)?"esriGeometryPolygon":d$(t)?"esriGeometryEnvelope":p6(t)?"esriGeometryMultipoint":null:null}const YD={esriGeometryPoint:ne,esriGeometryPolyline:wt,esriGeometryPolygon:Ve,esriGeometryEnvelope:ue,esriGeometryMultipoint:ls,esriGeometryMultiPatch:Ve};function XD(t){return t&&YD[t]||null}const h2=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),J8=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Ah={base:It,key:"type",typeMap:{extent:ue,multipoint:ls,point:ne,polyline:wt,polygon:Ve}};function hae(t){return t.type==="point"}function yae(t){return t.type==="multipoint"}function fae(t){return t.type==="polygon"}function mae(t){return t.type==="polyline"}var tm;let mo=tm=class extends F{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new tm({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};a([u({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:ry}}}}})],mo.prototype,"rotation",void 0),a([xe("rotation")],mo.prototype,"castRotation",null),a([u({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:ry}}}}})],mo.prototype,"scale",void 0),a([u({types:Ah,json:{read:Xo,write:!0,origins:{"web-scene":{read:Xo,write:{overridePolicy:ry}}}}})],mo.prototype,"targetGeometry",void 0),a([u({type:KD,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],mo.prototype,"camera",void 0),mo=tm=a([_("esri.Viewpoint")],mo);const Vi=mo;function ry(){return{enabled:!this.camera}}const h$=new FinalizationRegistry(t=>{t.close()});function ej(t,e){h$.register(t,e,e)}function tj(t){h$.unregister(t)}function y$(t,e){return new Proxy({},{get:(r,i,s)=>(...n)=>{let o,l;const c=n[n.length-1];return rj(c)&&(o=c.signal,l=c.transferList,n.pop()),t.apply(e?`${e}.${i.toString()}`:i.toString(),n,{transferList:l,signal:o})}})}function rj(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const ij={statsWorker:()=>R(()=>import("./money-tides-statsWorker-rWOyJblk.js"),__vite__mapDeps([24,25,3,4,1,2,5,6,7,26,27,28,29,13,14,12])),geometryEngineWorker:()=>R(()=>import("./money-tides-geometryEngineWorker-CHAqrl2R.js"),__vite__mapDeps([30,31,32,33])),arcadeGeometryOperatorsWorker:()=>R(()=>import("./money-tides-operatorsWorker-CxDehxsG.js"),__vite__mapDeps([34,1,2,3,4,5,6,7,12,13,14])),CSVSourceWorker:()=>R(()=>import("./money-tides-CSVSourceWorker-DALybmlv.js"),__vite__mapDeps([35,3,4,1,2,5,6,7,36,37,38,39,40,41,42,43,44,45,12,13,14,46,26,25,27,28,29,47,48,49,50,51])),EdgeProcessingWorker:()=>R(()=>import("./money-tides-EdgeProcessingWorker-lJBHGZpy.js"),__vite__mapDeps([52,53,54,55,56,4,57,58,59,60,61,62,3,1,2,5,6,7,12,13,14])),ElevationSamplerWorker:()=>R(()=>import("./money-tides-ElevationSamplerWorker-doIx_-Yk.js"),__vite__mapDeps([63,4,39,3,1,2,5,6,7,64,13,14,65,66,67,68,69,70,55,71,12])),FeatureServiceSnappingSourceWorker:()=>R(()=>import("./money-tides-FeatureServiceSnappingSourceWorker-6hmLvOQc.js"),__vite__mapDeps([72,3,4,1,2,5,6,7,37,38,39,40,41,42,43,44,45,12,13,14,46,26,25,27,28,29,47,48,73])),GaussianSplatSortWorker:()=>R(()=>import("./money-tides-GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>R(()=>import("./money-tides-GeoJSONSourceWorker-JJtk7gBL.js"),__vite__mapDeps([74,3,4,1,2,5,6,7,37,38,39,40,41,42,43,44,45,12,13,14,46,26,25,27,28,29,47,48,75,36,51,76])),LercWorker:()=>R(()=>import("./money-tides-LercWorker-D3WeqzBT.js"),__vite__mapDeps([77,3,4,1,2,5,6,7,12,13,14])),MemorySourceWorker:()=>R(()=>import("./money-tides-MemorySourceWorker-CpBgHAvG.js"),__vite__mapDeps([78,3,4,1,2,5,6,7,79,37,38,39,40,41,42,43,44,45,12,13,14,46,26,25,27,28,29,47,48,51,76,36])),PBFDecoderWorker:()=>R(()=>import("./money-tides-PBFDecoderWorker-BKd3_jIr.js"),__vite__mapDeps([80,4,3,1,2,5,6,7,81,12,13,14])),FeaturePipelineWorker:()=>R(()=>import("./money-tides-FeaturePipelineWorker-24uQsQiT.js"),__vite__mapDeps([82,3,4,1,2,5,6,7,83,84,85,57,86,12,87,88,26,89,41,40,90,91,92,93,94,95,96,97,98,99,100,42,43,44,45,13,14,46,25,27,28,29,47,48,101,102,103,104,21,105,106,107,108,75,36,51,76,109,110])),PointCloudWorker:()=>R(()=>import("./money-tides-PointCloudWorker-DncuUaSI.js"),__vite__mapDeps([111,4,112,113,114,115,3,1,2,5,6,7,13,14,116,117,66,67,118,119,12])),RasterWorker:()=>R(()=>import("./money-tides-RasterWorker-Cr8sHy4f.js"),__vite__mapDeps([120,121,3,4,1,2,5,6,7,13,14,122,33,123,124,125,126,127,128,129,12])),SceneLayerSnappingSourceWorker:()=>R(()=>import("./money-tides-SceneLayerSnappingSourceWorker-XDF4WowI.js"),__vite__mapDeps([130,3,4,1,2,5,6,7,131,132,119,113,133,134,118,55,59,60,61,54,56,57,58,62,12,13,14])),SceneLayerWorker:()=>R(()=>import("./money-tides-SceneLayerWorker-CHdH_sxU.js"),__vite__mapDeps([135,1,2,64,3,4,5,6,7,13,14,70,136,68,12])),WFSSourceWorker:()=>R(()=>import("./money-tides-WFSSourceWorker-DDCpqvrw.js"),__vite__mapDeps([137,3,4,1,2,5,6,7,37,38,39,40,41,42,43,44,45,12,13,14,46,26,25,27,28,29,47,48,75,36,76,138,139])),WorkerTileHandler:()=>R(()=>import("./money-tides-WorkerTileHandler-DpxJMNZX.js"),__vite__mapDeps([140,3,4,1,2,5,6,7,95,141,96,142,98,143,144,58,57,124,145,94,12,13,14])),Lyr3DWorker:()=>R(()=>import("./money-tides-Lyr3DWorker-C0tR1H0M.js"),__vite__mapDeps([146,1,2,3,4,5,6,7])),Feature3DPipelineWorker:()=>R(()=>import("./money-tides-Feature3DPipelineWorker-BUq6fplg.js"),__vite__mapDeps([147,3,4,1,2,5,6,7,43,44,45,12,13,14,40,41,46,26,25,27,28,29,47,48,148,69,64,136,68,149,114,150,61,55,151,132,119,113,131,152,153,134,118,117,112,66,67,58,57,54,56,154,155,156,157,158,159,160,161,162,163,39,164])),TextureCompressionWorker:()=>R(()=>import("./money-tides-TextureCompressionWorker-CQYb0Q7G.js"),__vite__mapDeps([165,1,2,3,4,5,6,7,12,13,14])),FlowWorker:()=>R(()=>import("./money-tides-FlowWorker-CoFXV-tS.js"),__vite__mapDeps([166,3,4,1,2,5,6,7,129,12,13,14])),ParquetSourceWorker:()=>R(()=>import("./money-tides-ParquetSourceWorker-B3YUlk2e.js"),__vite__mapDeps([167,3,4,1,2,5,6,7,100,12,43,44,45,13,14,40,41,46,26,25,27,28,29,47,48,51,168,50,103,87,88,102,101])),PanoramicMeshWorker:()=>R(()=>import("./money-tides-PanoramicMeshWorker-Drd9HujK.js"),__vite__mapDeps([169,121,3,4,1,2,5,6,7,13,14,12]))},f$="worker:port-closed",Hn={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let sj=0;function m$(){return sj++}function nj(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function y2(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function g$(t,e,r,i){if(e.type===Hn.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Hn.INVOKE&&e.type!==Hn.RESPONSE)return void t.postMessage(e);let s;nj(r)?(s=Q8(r.transferList),e.data=r.result):(s=Q8(i),e.data=r),s?t.postMessage(e,s):t.postMessage(e)}function ah(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Q8(t){if(!t?.length)return null;if(ie("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(r=>!oj(r));return e.length?e:null}function oj(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function gae(t){try{return await t}catch(e){const r=e?.name===f$;if(!(vi(e)||r))throw e;return}}const{CLOSE:l1,ABORT:rm,INVOKE:K8,RESPONSE:yp,OPEN_PORT:Y8,ON:X8}=Hn,aj=2;let lj=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===rm?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Ai;let Hc=(Ai=class{static connect(e,r){const i=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new Ai(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Ai.clients.set(n,s),i.port2}static loadWorker(e){const r=ij[e];return r?r():Promise.resolve(null)}constructor(e,r,i,s){this._port=e,this._jobQueue=i,this._lowPriorityJobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new lj(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:l1}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,r,i){return this.apply(e,[r],i)}apply(e,r,i){const s=i?.signal,n=i?.transferList;if(!this._port)return Promise.reject(new I(f$,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:r}));const o=m$();return new Promise((l,c)=>{if(Gs(s))return this._processWork(),void c(Mt());const d=Rc(s,()=>{const y=this._outJobs.get(o);y&&(this._outJobs.delete(o),this._processWork(),Je(y.abortHandle),this._post({type:rm,jobId:o}),c(Mt()))}),h={resolve:l,reject:c,abortHandle:d,debugInfo:e};this._outJobs.set(o,h),this._post({type:K8,jobId:o,methodName:e,abortable:s!=null},r,n)})}createInvokeProxy(e){return y$(this,e)}on(e,r){const i=new MessageChannel;function s(n){r(n.data)}return this._port.postMessage({type:X8,eventType:e,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),Zr(()=>{i.port1.postMessage({type:l1}),i.port1.close(),i.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:Y8,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=aj)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:r,data:i,invokeOptions:s,resolver:n}=e;this.apply(r,i,s).then(o=>n.resolve(o)).catch(o=>n.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Je(e.abortHandle),e.reject(Mt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,r){const i=ah(e);if(i)switch(i.type){case yp:this._onResponseMessage(i);break;case K8:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case rm:this._onAbortMessage(i);break;case l1:this._onCloseMessage();break;case Y8:this._onOpenPortMessage(i);break;case X8:this._onOnMessage(i)}}_onAbortMessage(e){const r=this._inJobs,i=e.jobId,s=r.get(i);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Ai.clients.get(this)===e&&e.destroy(),Ai.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:r,jobId:i,data:s=[],abortable:n}=e,o=n?new AbortController:null,l=this._inJobs;let c,d=this._client,h=d[r];try{if(!h&&r&&r.includes(".")){const y=r.split(".");for(let f=0;f<y.length-1;f++)d=d[y[f]],h=d[y[f+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:o?o.signal:null}),c=h.apply(d,s)}catch(y){return void this._post({type:yp,jobId:i,error:y2(y)})}Tr(c)?(l.set(i,{controller:o,promise:c}),c.then(y=>{l.has(i)&&(l.delete(i),this._post({type:yp,jobId:i},y))},y=>{l.has(i)&&(l.delete(i),vi(y)||this._post({type:yp,jobId:i,error:y2(y||{message:`Error encountered at method ${r}`})}))})):this._post({type:yp,jobId:i},c)}_onOpenPortMessage(e){new Ai(e.port,{client:this._client})}_onOnMessage(e){const{port:r}=e,i=this._client.on(e.eventType,n=>{r.postMessage(n)}),s=T5(e.port,"message",n=>{ah(n)?.type===l1&&(s.remove(),i.remove(),r.close())})}_onResponseMessage(e){const{jobId:r,error:i,data:s}=e,n=this._outJobs;if(!n.has(r))return;const o=n.get(r);n.delete(r),this._processWork(),Je(o.abortHandle),i?o.reject(I.fromJSON(JSON.parse(i))):o.resolve(s)}_post(e,r,i){return g$(this._port,e,r,i)}},Ai.kernelInfo={buildDate:k_,fullVersion:m_,revision:A_},Ai.clients=new Map,Ai),uj=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Jd,this._ongoingLowPriorityJobsQueue=new Jd}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,r){return new Promise((i,s)=>{let n=!0;const o=l=>{Ce(r.signal),n&&(n=!1,l())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let l=0;l<e.length;++l){const c=e[l];Tr(c)?this._clientPromises[l]=c.then(d=>(this._clients[l]=new Hc(d,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(i),this._clients[l]),()=>(o(s),null)):(this._clients[l]=new Hc(c,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(i))}})}broadcast(e,r,i){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(l=>l?.invoke(e,r,i))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Mt(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Mt(`Worker closing, aborting job calling '${e.methodName}'`));for(const r of this._clientPromises)r.then(i=>i?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,tj(this)}invoke(e,r,i){return this.apply(e,[r],i)}apply(e,r,i){const s=ta();(i?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:r,invokeOptions:i,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(l=>l?.jobAdded())}return s.promise}createInvokeProxy(e){return y$(this,e)}on(e,r){return Promise.all(this._clientPromises).then(()=>I5(this._clients.map(i=>i.on(e,r))))}openPorts(){return new Promise(e=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(r[s]=n.openPort()),--i===0&&e(r)})})}get test(){}};const cj={async request(t,e){const r=t.options,i=r.responseType;r.signal=e?.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&TR(t.url)?.after?i:"array-buffer";const s=await Te(t.url,r),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch(s.requestOptions?.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},e7={};function pj(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...e7.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=e7.baseUrl),e}let dj=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>e[r](...i)})}},a0=class{constructor(){this._dispatcher=new dj,this._workerPostMessage({type:Hn.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){H9(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,r,i){this._dispatcher.addEventListener(e,r,i)}removeEventListener(e,r,i){this._dispatcher.removeEventListener(e,r,i)}_workerPostMessage(e){H9(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const r=ah(e);if(r&&r.type===Hn.OPEN){const{modulePath:i,jobId:s}=r;let n=await Hc.loadWorker(i);n||(n=await import(i));const o=Hc.connect(n);this._workerPostMessage({type:Hn.OPENED,jobId:s,data:o})}}};const im=()=>N.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:hj}=Hn,yj='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let u1,c1;const t7="Failed to create Worker. Fallback to execute module in main thread";async function fj(){if(!ie("esri-workers"))return r7(new a0);if(!u1&&!c1)try{const e=yj.split("{CONFIGURATION}").join(mj());u1=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){c1=e||{}}let t;if(u1)try{t=new Worker(u1,{name:"esri-worker-"+gj++})}catch{im().warn(t7,c1),t=new a0}else im().warn(t7,c1),t=new a0;return r7(t)}async function r7(t){return new Promise(e=>{function r(s){const n=ah(s);n&&n.type===hj&&(t.removeEventListener("message",r),t.removeEventListener("error",i),e(t))}function i(s){s.preventDefault(),t.removeEventListener("message",r),t.removeEventListener("error",i),im().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new a0).addEventListener("message",r),t.addEventListener("error",i)}t.addEventListener("message",r),t.addEventListener("error",i)})}function mj(){let t;if(Hr.default!=null){const s={...Hr};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(Hr));t.assetsPath=Ua(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Ua(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Bn(),t.has={"esri-csp-restrictions":ie("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ie("esri-2d-update-debug"),"esri-2d-log-updating":ie("esri-2d-log-updating"),"featurelayer-pbf":ie("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ie("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ie("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ie("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ie("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ie("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":ie("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":ie("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":ie("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":ie("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":ie("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":ie("parquetlayer-full-query-feature-count"),"esri-atomics":ie("esri-atomics"),"esri-shared-array-buffer":ie("esri-shared-array-buffer"),"esri-tiles-debug":ie("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ie("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ie("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Ua(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Ua(t.workers.workerPath):t.workers.workerPath=Ua(mt("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Hr.workers.loaderConfig,r=pj({baseUrl:e?.baseUrl,locale:Bn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:r,kernelInfo:{buildDate:k_,fullVersion:m_,revision:A_}})}let gj=0;const{ABORT:i7,INVOKE:vj,OPEN:wj,OPENED:bj,RESPONSE:fp}=Hn;let _j=class v${static async create(e){const r=await fj();return new v$(r,e)}constructor(e,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=r,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",i=>{i.preventDefault(),N.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(e,r={}){const{signal:i}=r,s=m$();return new Promise((n,o)=>{const l={resolve:n,reject:o,abortHandle:g5(i,()=>{this._outJobs.delete(s),this._post({type:i7,jobId:s})})};this._outJobs.set(s,l),this._post({type:wj,jobId:s,modulePath:e})})}_onMessage(e){const r=ah(e);if(r)switch(r.type){case bj:this._onOpenedMessage(r);break;case fp:this._onResponseMessage(r);break;case i7:this._onAbortMessage(r);break;case vj:this._onInvokeMessage(r)}}_onAbortMessage(e){const r=this._inJobs,i=e.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(e){const{methodName:r,jobId:i,data:s,abortable:n}=e,o=n?new AbortController:null,l=this._inJobs,c=cj[r];let d;try{if(typeof c!="function")throw new TypeError(`${r} is not a function`);d=c.call(null,s,{signal:o?o.signal:null})}catch(h){return void this._post({type:fp,jobId:i,error:y2(h)})}Tr(d)?(l.set(i,{controller:o,promise:d}),d.then(h=>{l.has(i)&&(l.delete(i),this._post({type:fp,jobId:i},h))},h=>{l.has(i)&&(l.delete(i),h||(h={message:"Error encountered at method"+r}),vi(h)||this._post({type:fp,jobId:i,error:y2(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:fp,jobId:i},d)}_onOpenedMessage(e){const{jobId:r,data:i}=e,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Je(s.abortHandle),s.resolve(i))}_onResponseMessage(e){const{jobId:r,error:i,data:s}=e,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Je(n.abortHandle),i?n.reject(I.fromJSON(JSON.parse(i))):n.resolve(s))}_post(e,r,i){return g$(this.worker,e,r,i)}};const s7=ie("host-browser")?Math.min(navigator.hardwareConcurrency-1,ie("workers-pool-size")??8):0;let Ya=ie("esri-mobile")?Math.min(s7,3):s7;Ya||(Ya=ie("safari")&&ie("mac")?7:2);let n7=0;const l0=[];function Sj(){w$()}async function p1(t,e){const r=new uj,{registryTarget:i,...s}=e;return await r.open(t,s),i&&ej(i,r),r}async function xj(t,e={}){if(typeof t!="string")throw new I("workers:undefined-module","modulePath is missing");let r=e.strategy||"distributed";if(ie("host-webworker")&&!ie("esri-workers")&&(r="local"),r==="local"){let i=await Hc.loadWorker(t);i||(i=await import(t)),Ce(e.signal);const s=e.client||i;return p1([Hc.connect(i,e.schedule)],{...e,client:s})}if(await w$(),Ce(e.signal),r==="dedicated"){const i=n7++%Ya;return p1([await l0[i].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const i=Math.min(e.maxNumWorkers,Ya);if(i<Ya){const s=new Array(i);for(let n=0;n<i;++n){const o=n7++%Ya;s[n]=l0[o].open(t,e)}return p1(s,e)}}return p1(l0.map(i=>i.open(t,e)),e)}let d1=null;async function w$(){if(d1)return d1;new AbortController;const t=[];for(let e=0;e<Ya;e++){const r=_j.create(e).then(i=>(l0[e]=i,i));t.push(r)}return d1=Promise.all(t),d1}let Td=class extends U{constructor(e){super(e),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(U.ofType(this.itemType.Type))(e):new U(e)}};function f2(t,e){return{type:t,cast:N_,set(r){const i=Bs(r,this._get(e),t);i&&!i.destroyed&&(i.owner=this),this._set(e,i)}}}a([u()],Td.prototype,"owner",null),Td=a([_("esri.core.support.OwningCollection")],Td);var sm,oc;let Bt=(oc=class extends F{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new sm({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},sm=oc,oc);a([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bt.prototype,"cols",void 0),a([u({type:ve,json:{write:!0}})],Bt.prototype,"level",void 0),a([u({type:String,json:{write:!0}})],Bt.prototype,"levelValue",void 0),a([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bt.prototype,"origin",void 0),a([u({type:Number,json:{write:!0}})],Bt.prototype,"resolution",void 0),a([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bt.prototype,"rows",void 0),a([u({type:Number,json:{write:!0}})],Bt.prototype,"scale",void 0),Bt=sm=a([_("esri.layers.support.LOD")],Bt);let $j=class b${constructor(e,r,i,s=Wr()){this._level=e,this._row=r,this._col=i,this.extent=s}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new b$(e.level,e.row,e.col,e.extent)}};var nu;const o7=new be({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var ac;let pr=(ac=class extends F{static create(e={}){const{resolutionFactor:r=1,scales:i,size:s=256,spatialReference:n=B.WebMercator,numLODs:o=24}=e;if(!yi(n)){const f=[];if(i)for(let m=0;m<i.length;m++){const g=i[m];f.push(new Bt({level:m,scale:g,resolution:g}))}else{let m=5e-4;for(let g=o-1;g>=0;g--)f.unshift(new Bt({level:g,scale:m,resolution:m})),m*=2}return new nu({dpi:96,lods:f,origin:new ne(0,0,n),size:[s,s],spatialReference:n})}const l=Ir(n),c=e.origin?new ne({x:e.origin.x,y:e.origin.y,spatialReference:n}):new ne(l?{x:l.origin[0],y:l.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),d=96,h=1/(_i(n)*39.37*d),y=[];if(i)for(let f=0;f<i.length;f++){const m=i[f],g=m*h;y.push(new Bt({level:f,scale:m,resolution:g}))}else{let f=tp(n)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const m=Math.ceil(o/r);y.push(new Bt({level:0,scale:f,resolution:f*h}));for(let g=1;g<m;g++){const v=f/2**r,b=v*h;y.push(new Bt({level:g,scale:v,resolution:b})),f=v}}return new nu({dpi:d,lods:y,origin:c,size:[s,s],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:r}=this;if(e&&r){const i=Ir(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-r.x)<=i.dx}return!1}readOrigin(e,r){return ne.fromJSON({spatialReference:r.spatialReference,...e})}set lods(e){let r=0,i=0;const s=[],n=this._levelToLOD={};e&&(r=-1/0,i=1/0,e.forEach(o=>{s.push(o.scale),r=o.scale>r?o.scale:r,i=o.scale<i?o.scale:i,n[o.level]=o})),this._set("scales",s),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,r){return[r.cols,r.rows]}writeSize(e,r){r.cols=e[0],r.rows=e[1]}zoomToScale(e){const r=this.scales;if(e<=0)return r[0];if(e>=r.length-1)return r[r.length-1];const i=Math.floor(e),s=i+1;return r[i]/(r[i]/r[s])**(e-i)}scaleToZoom(e){const r=this.scales,i=r.length-1;let s=0;for(;s<i;s++){const n=r[s],o=r[s+1];if(n<=e)return s;if(o===e)return s+1;if(n>e&&o<e)return s+Math.log(n/e)/Math.log(n/o)}return s}tileAt(e,r,i,s){const n=this.lodAt(e);if(!n)return null;let o,l;if(typeof r=="number")o=r,l=i;else if(at(r.spatialReference,this.spatialReference))o=r.x,l=r.y,s=i;else{const h=Ih(r,this.spatialReference);if(h==null)return null;o=h.x,l=h.y,s=i}const c=n.resolution*this.size[0],d=n.resolution*this.size[1];return s??=new $j(0,0,0),s.level=e,s.row=Math.floor((this.origin.y-l)/d+.001),s.col=Math.floor((o-this.origin.x)/c+.001),this.updateTileInfo(s),s}updateTileInfo(e,r=0){if(!("extent"in e))return!1;let i=this.lodAt(e.level);if(!i&&r===1){const l=this.lods[this.lods.length-1];l.level<e.level&&(i=l)}if(!i)return!1;const s=e.level-i.level,n=i.resolution*this.size[0]/2**s,o=i.resolution*this.size[1]/2**s;return e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const r=this._upsampleLevels[e.level];return!(!r||r.parentLevel===-1)&&(e.level=r.parentLevel,e.row=Math.floor(e.row/r.factor+.001),e.col=Math.floor(e.col/r.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,r){const i=this.lodAt(r.level);if(i==null)return null;const{resolution:s}=i,n=s*this.size[0],o=s*this.size[1];return e[0]=this.origin.x+r.col*n,e[1]=this.origin.y-(r.row+1)*o,e[2]=e[0]+n,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return nu.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const r=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&r===0)return this;const i=[],s=this.lods.length-r;for(let n=0;n<s;n++){const o=n+r,{scale:l,resolution:c}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new Bt({level:n,scale:l,resolution:c}))}return new nu({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let r=null;for(let i=0;i<e.length;i++){const s=e[i];this._upsampleLevels[s.level]={parentLevel:r?r.level:-1,factor:r?r.resolution/s.resolution:0},r=s}}},nu=ac,ac);a([u({type:Number,json:{write:!0}})],pr.prototype,"compressionQuality",void 0),a([u({type:Number,json:{write:!0}})],pr.prototype,"dpi",void 0),a([u({type:String,json:{read:o7.read,write:o7.write,origins:{"web-scene":{read:!1,write:!1}}}})],pr.prototype,"format",void 0),a([u({readOnly:!0})],pr.prototype,"isWrappable",null),a([u({type:ne,json:{write:!0}})],pr.prototype,"origin",void 0),a([A("origin")],pr.prototype,"readOrigin",null),a([u({type:[Bt],value:null,json:{write:!0}})],pr.prototype,"lods",null),a([u({readOnly:!0})],pr.prototype,"scales",void 0),a([u({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],pr.prototype,"size",void 0),a([A("size",["rows","cols"])],pr.prototype,"readSize",null),a([j("size",{cols:{type:ve},rows:{type:ve}})],pr.prototype,"writeSize",null),a([u({type:B,json:{write:!0}})],pr.prototype,"spatialReference",void 0),pr=nu=a([_("esri.layers.support.TileInfo")],pr);let Wc=class extends Td{constructor(e){super(e),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(N.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Wc=a([_("esri.support.AnalysesCollection")],Wc);const u0={widthBreakpoint:{getValue(t){const e=t.viewSize[0],r=t.breakpoints,i=this.values;return e<=r.xsmall?i.xsmall:e<=r.small?i.small:e<=r.medium?i.medium:e<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],r=t.breakpoints,i=this.values;return e<=r.xsmall?i.xsmall:e<=r.small?i.small:e<=r.medium?i.medium:e<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,r=e[0],i=e[1],s=this.values;return i>=r?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},iy={xsmall:544,small:768,medium:992,large:1200};function Tj(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function sy(t,e){return e?u0[t].valueToClassName[e].split(" "):[]}const Ij=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=iy}initialize(){this.addHandles(X(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),lr))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!Tj(i)){const s=JSON.stringify(iy,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s),i=iy}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=hs.acquire(),s=hs.acquire();let n,o=!1;for(n in u0){const l=this[n],c=u0[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});l!==c&&(o=!0,this[n]=c,sy(n,l).forEach(d=>s.push(d)),sy(n,c).forEach(d=>i.push(d)))}o&&(this._applyClassNameChanges(i,s),hs.release(i),hs.release(s))}_applyClassNameChanges(i,s){const n=this.container;n&&(s.forEach(o=>n.classList.remove(o)),i.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in u0)sy(s,this[s]).forEach(n=>i.classList.remove(n))}};return a([u()],r.prototype,"breakpoints",null),a([u()],r.prototype,"orientation",void 0),a([u()],r.prototype,"widthBreakpoint",void 0),a([u()],r.prototype,"heightBreakpoint",void 0),r=a([_("esri.views.BreakpointsOwner")],r),r};let ol=class extends Z{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,r,i={}){return this._installWatch(e,r,i,X)}addWhen(e,r,i={}){return this._installWatch(e,r,i,zi)}addOnCollectionChange(e,r,{initial:i=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([Ui(e,"after-changes",this._createSyncUpdatingCallback(),ht),Ui(e,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>r({added:[],removed:o.toArray()}):void 0})],n),Zr(()=>this.removeHandles(n))}addPromise(e){if(e==null)return e;const r=++this._handleId;this.addHandles(Zr(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(h1)||this._set("updating",!1))}),r),this._pendingPromises.add(e),this._set("updating",!0);const i=()=>this.removeHandles(r);return e.then(i,i),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,r,i={},s){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,n);const o=s(e,r,i);return this.addHandles(o,n),Zr(()=>this.removeHandles(n))}_installSyncUpdatingWatch(e,r){const i=this._createSyncUpdatingCallback(),s=X(e,i,{sync:!0,equals:()=>!1});return this.addHandles(s,r),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(h1),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(wh(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(h1))}),h1)}}};a([u({readOnly:!0})],ol.prototype,"updating",void 0),ol=a([_("esri.core.support.UpdatingHandles")],ol);const h1=-42;let go=class extends Z{constructor(){super(...arguments),this.items=new U,this._watchUpdatingTracking=new ol,this._callbacks=new Map,this._projector=W9(),this._hiddenProjector=W9()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of r.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const r=this._hiddenSurface,i=this._hiddenProjector;let s;const n=()=>(s=e.render(),s);i.append(r,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s?.domNode){const l=s.domNode.getBoundingClientRect();o.left=l.left,o.top=l.top,o.right=l.right,o.bottom=l.bottom}for(i.detach(n);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(e,r){const i=this.computeBoundingRect(e),s=this.computeBoundingRect(r);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,r){const i=!!r?.disableDecorations;if(!this.items.some(n=>n.visible&&!(i&&n.isDecoration)))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{i&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};a([u({readOnly:!0})],go.prototype,"surface",void 0),a([u({readOnly:!0})],go.prototype,"items",void 0),a([u({readOnly:!0})],go.prototype,"needsRender",null),a([u({readOnly:!0})],go.prototype,"_watchUpdatingTracking",void 0),a([u({readOnly:!0})],go.prototype,"updating",null),go=a([_("esri.views.overlay.ViewOverlay")],go);const a7=go,ny=[0,0];function Mj(t){const e=(t.ownerDocument||window.document).defaultView,r=t.getBoundingClientRect();return ny[0]=r.left+(e?.pageXOffset??0),ny[1]=r.top+(e?.pageYOffset??0),ny}function l7(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function Ej(t){const e=document.createElement("div");return t.appendChild(e),e}const Vl=16,mp=750,Pj=512,Oj=2,Rj=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Vl,time:mp},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([X(()=>this.cursor,s=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",s)}),X(()=>this.navigating,s=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",s.toString())}),X(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const i=this;this.addHandles([X(()=>this.ui,(s,n)=>this._handleUIChange(s,n),lr),i.on("focus",()=>this.notifyChange("focused")),i.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const s=this._get("container"),n=g_(i);if(n||typeof i!="string"||N.getLogger(this).error("#container",`element with id '${i}' not found`),s===n)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(l7(this.root),this._set("root",null)),this.userContent&&(Z9(this.userContent,s),l7(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",Z9(n,o),n.appendChild(o),this._set("userContent",o);const l=document.createElement("div");l.className="esri-view-root",n.insertBefore(l,n.firstChild),this._set("root",l);const c=document.createElement("div");c.className="esri-view-surface",c.setAttribute("role","application"),c.tabIndex=0,l.appendChild(c),this._set("surface",c);const d=new a7;l.appendChild(d.surface),this._set("overlay",d),this.addHandles(X(()=>d.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=kc({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Je(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}set ui(i){const s=this._get("ui");s!==i&&s?.destroy(),this._set("ui",i)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(i,s,n){const o=this.position;return i-=o?o[0]:0,s-=o?o[1]:0,n?(n[0]=i,n[1]=s):n=[i,s],n}containerToPage(i,s,n){const o=this.position;return i+=o?o[0]:0,s+=o?o[1]:0,n?(n[0]=i,n[1]=s):n=[i,s],n}_updateAria(){const{surface:i,aria:s}=this;i&&(i.ariaLabelledByElements=s?.labelledByElements??null,i.ariaDescribedByElements=s?.describedByElements??null,i.ariaLabel=s?.label??null,i.ariaDescription=s?.description??null)}_handleUIChange(i,s){this.removeHandles("ui"),s&&s!==i&&s.destroy(),i&&(i.view=this,this.addHandles(X(()=>this.root,n=>{i.container=n?Ej(n):null},lr),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Vl,i.time=mp;const s=kc({prepare:l=>{const c=this._measure(),d=this._freqInfo;if(d.time+=l.deltaTime,c&&(d.freq=Vl,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const h=this._position();d.freq=h||c?Vl:Math.min(mp,d.freq*Oj),!c&&d.freq>=Pj&&(s.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver(l=>{i.freq=Vl,i.time=mp,s.resume()});this.container!=null&&n.observe(this.container);const o=Zr(()=>n.disconnect());this.addHandles([T5(window,"resize",()=>{i.freq=Vl,i.time=mp,s.resume()}),o,s],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,n=i?i.clientHeight:0;if(s===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,l=this.height;return s===o&&n===l?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:l,width:s,height:n}),!0)}_position(){const i=this.container,s=this.position,n=i&&Mj(i);return!!n&&(!s||n[0]!==s[0]||n[1]!==s[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return a([u()],r.prototype,"aria",void 0),a([u()],r.prototype,"container",null),a([u({readOnly:!0})],r.prototype,"focused",null),a([u({readOnly:!0})],r.prototype,"height",void 0),a([u()],r.prototype,"messagesCommon",void 0),a([u({type:a7})],r.prototype,"overlay",void 0),a([u({readOnly:!0})],r.prototype,"position",void 0),a([u({readOnly:!0})],r.prototype,"resizing",void 0),a([u({readOnly:!0})],r.prototype,"root",void 0),a([u({value:null,readOnly:!0})],r.prototype,"size",null),a([u({readOnly:!0})],r.prototype,"surface",void 0),a([u({readOnly:!0})],r.prototype,"suspended",void 0),a([u({nonNullable:!0})],r.prototype,"ui",null),a([u({readOnly:!0})],r.prototype,"userContent",void 0),a([u({readOnly:!0})],r.prototype,"width",void 0),a([u()],r.prototype,"widthBreakpoint",void 0),r=a([_("esri.views.DOMContainer")],r),r},y1="popup",u7="manual";function Ws(t){return t!=null&&"open"in t&&"declaredClass"in t}function Kn(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function Cj(t,e,r){const[i,s,n]=e;if(r){const[o,l,c]=r;o&&Ws(l)&&(l.view=null,o.remove(l,y1),l!==s&&s&&l.destroy()),o&&c&&Kn(c)&&(c.view=null,o.remove(c,y1),c!==n&&n&&c.remove())}i&&Ws(s)&&(s.view=t,i.add(s,{key:y1,position:u7,internal:!0})),i&&n&&Kn(n)&&(n.view=t,i.add(n,{key:y1,position:u7,internal:!0}))}async function Lj(t,e){const{popup:r,popupElement:i}=t;Ws(r)?await f1(r,null,e):i&&Kn(i)?await f1(null,i,e):e?.defer(async()=>{await t.setupPopup();const{popup:s,popupElement:n}=t;Ws(s)&&!t.destroyed&&t.ready&&t.popupEnabled?await f1(s,null,e):n&&Kn(n)&&await f1(null,n,e)})}function kj(t,e){const{popup:r,popupElement:i}=t;if(Ws(r))return r.open(e);i&&Kn(i)&&i.open(e)}function Aj(t,e){Ws(t)&&t.close(),e&&Kn(e)&&(e.visible=!1)}async function f1(t,e,r){if(Ws(t)){const i=await t.viewModel.handleViewClick(r);return void(i?.promises?.length?t.open(i):t.visible&&t.close())}if(e&&Kn(e)){const i=await e.handleViewClick(r);i?.promises?.length?e.open(i):e.visible&&(e.visible=!1)}}const _$=ie("mac")?"Meta":"Control",Fj=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Nj=t=>Fj.has(t);let Dj=class{constructor(e,r=[]){this.eventType=e,this.keyModifiers=r}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=e.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},Pt=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const r=this._incoming[e];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(r=>this._handleEvent(r)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,r,i){let s;typeof r=="function"?(i=r,s=[]):s=r||[];const n=typeof e=="string"?new Dj(e,s):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=h=>{const y=this._incoming[h.match.eventType];if(y){const f=y.indexOf(h);y.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},c=new jj(n,i,{onPause:l,onRemove:l,onResume:h=>{const y=this._incoming[h.match.eventType];y&&!y.includes(h)&&(y.push(h),o(),this._manager&&this._manager.updateDependencies())}});let d=this._incoming[n.eventType];return d||(d=[],this._incoming[n.eventType]=d),d.push(c),o(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const r=new Vj(e,{onEmit:(i,s,n,o)=>{this._manager?.emit(i.eventType,s,n,o)},onRemove:i=>{delete this._outgoing[i.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const r=this._incoming[e.type];if(r){for(const i of r)if(i.match.matches(e)&&(i.callback?.(e),e.shouldStopPropagation()))break}}},jj=class{constructor(e,r,i){this.match=e,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Vj=class{constructor(e,r){this.eventType=e,this._removed=!1,this._handler=r}emit(e,r,i){this._removed||this._handler.onEmit(this,e,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},zj=class extends Pt{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",r=>this._update(r.data))}_update(e){const r=e.native.pointerType==="touch"?"touch":"mouse",{x:i,y:s,native:{pointerId:n}}=e;r===this._value&&this._x===i&&this._y===s&&this._id===n||(this._value=r,this._x=i,this._y=s,this._id=n,this._onChange(n,r,i,s))}},Uj=class extends Pt{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Ac(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},qj=class{constructor(e,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in e){const s=e[i],n=new IR(s,void 0,void 0,2,2);this._properties[i]={pool:n,acquired:[]}}this._afterDispatchHandle=MR(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const r=this._properties[e];for(const i of r.acquired)J9(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(e){const r=this._owner._get(e),i=this._properties[e];let s=i.pool.acquire();for(i.acquired.push(s);s===r;)s=i.pool.acquire(),i.acquired.push(s);return ER(),s}_release(){for(const e in this._properties){const r=this._properties[e];let i=0;for(const s of r.acquired)J9(s)?r.acquired[i++]=s:r.pool.release(s);r.acquired.length=i}}},Gj=class{constructor(){this.id=0,this.type="mouse",this.location=Et()}},Yi=class extends Z{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=_$,this._propertiesPool=new qj({latestPointerInfo:()=>new Gj},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const r of e)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,r,i=Wn.INTERNAL){if(this._nameToGroup[e]||r.length===0)return;const s={name:e,handlers:r.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,c,d,h,y)=>{this._emitInputEvent(o.priorityIndex+1,l,c,d,y,h)},setPointerCapture:(l,c)=>{this._setPointerCapture(s,o,l,c)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const r=this._nameToGroup[e];r?(r.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):N.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(e.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){e.add(o.eventType);for(const l of o.keyModifiers)Nj(l)||r.add(l)}s.active=n}this._sourceEvents=e,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,r,i,s){const n=this._latestPointerInfo;if(n==null||n.id!==e||n.type!==r||n.location.x!==i||n.location.y!==s){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=r,o.location.x=i,o.location.y=s,this._latestPointerInfo=o}}_onEventReceived(e,r){if(e==="pointer-capture-lost"){const n=r;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,r);const i=this._testTimestamp??r.native?.timestamp,s=r.native?.cancelable;this._emitInputEventFromSource(e,r,i,s)}_updateKeyModifiers(e,r){if(!r)return;let i=!1;const s=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},n=(l,c)=>{c&&!this._activeKeyModifiers.has(l)?(s(),this._activeKeyModifiers.add(l)):!c&&this._activeKeyModifiers.has(l)&&(s(),this._activeKeyModifiers.delete(l))};if(e==="key-down"||e==="key-up"){const l=r.key;this._keyModifiers.has(l)&&n(l,e==="key-down")}const o=r.native;n("Alt",!!o?.altKey),n("Control",!!o?.ctrlKey),n("Ctrl",!!o?.ctrlKey),n("Shift",!!o?.shiftKey),n("Meta",!!o?.metaKey),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new zj((e,r,i,s)=>this._setLatestPointer(e,r,i,s)),this._multiTouchHandler=new Uj,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Wn.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Wn.INTERNAL)}_setPointerCapture(e,r,i,s){const n=e.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,r,i,s){this._emitInputEvent(0,e,r,i,s)}_emitInputEvent(e,r,i,s,n,o){const l=s??this._currentPropagation?.timestamp??performance.now(),c=n??!1,d={event:new Bj(r,i,l,o||this._activeKeyModifiers,c),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(d):this._doNewPropagation(d)}_doNewPropagation(e){this._currentPropagation={events:new Jd,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:r,priorityIndex:i}=e.events.pop(),s=r.data?.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&e.currentHandler.eventCallback?.(r),r.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const r=new Jd;r.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,r){if(e.handler.hasSideEffects!==r.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==r.groupPriority)return e.groupPriority>r.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const s of r.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const n=i.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===i.keyModifiers.length!=(n.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(e){const r=[];for(const i of e){let s=0;for(;s<r.length&&this._compareHandlerPriority(i,r[s])>=0;)s++;r.splice(s,0,i)}return r}get test(){}};a([u({readOnly:!0})],Yi.prototype,"hasPendingInputs",null),a([u({constructOnly:!0})],Yi.prototype,"eventSource",void 0),a([u({constructOnly:!0})],Yi.prototype,"recognizers",void 0),a([u()],Yi.prototype,"multiTouchActive",null),a([u()],Yi.prototype,"_latestPointerInfo",void 0),a([u()],Yi.prototype,"latestPointerInfo",null),a([u()],Yi.prototype,"_paused",void 0),a([u({readOnly:!0})],Yi.prototype,"updating",null),Yi=a([_("esri.views.input.InputManager")],Yi);let Bj=class{constructor(e,r,i,s,n){this.type=e,this.data=r,this.timestamp=i,this.modifiers=s,this.cancelable=n,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const r=(i,s)=>{this._propagationState&=-3;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw i;return i};return(typeof e=="function"?e():e).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const Wn={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},Hj=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([X(()=>[this.ui,this.popup,this.popupElement],([i,s,n],o)=>{const[l,c,d]=o??[];Cj(this,[i,s,n],[l,c,d])},vr),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&Lj(this,i)},Wn.WIDGET)]),M5(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>R(()=>import("./money-tides-Popup-DyfiWb22.js").then(i=>i.P),__vite__mapDeps([170,3,4,1,2,5,6,7,171,12,172,173,174,175,13,14,176,27,177,178,179,180,181,90,182,183,184,185])))}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Ws(this.popup))return this.popup.open(i);if(this.popupElement&&Kn(this.popupElement))this.popupElement.open(i).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void N.getLogger(this).error(new I("view:null-popup","Popup is null and can't be opened"));kj(this,i)}catch{}}closePopup(){this._popupSetupTask?.abort(),Aj(this.popup,this.popupElement)}async fetchPopupFeatures(i,s){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,s),s)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Ws(this.popup))return this._popupSetupTask=Th(async i=>{if(!this.popupEnabled||!Kn(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),Ce(i),customElements.get("arcgis-popup")||N.getLogger(this).error(new I("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:s}=await R(()=>import("./money-tides-Popup-DyfiWb22.js").then(o=>o.P),__vite__mapDeps([170,3,4,1,2,5,6,7,171,12,172,173,174,175,13,14,176,27,177,178,179,180,181,90,182,183,184,185]));if(Ce(i),!this.popup||Ws(this.popup))return;const n=this.popup;if("open"in n||"close"in n){const{open:o,close:l,...c}=n;this.popup=new s({...c})}else this.popup=new s(n)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:s},n){const o=[],l=[];let c=!1;const d=PR(n,ie("popup-view-fetch-timeout")??Zj),h=m=>{const g=new Wj(m);return l.push(g),o.push(g.promise),g},y=m=>{const g=l.at(-1);return g&&g.layerView===m&&!c?g:h(m)};for(const m of s)"graphic"in m?(y(m.layerView).graphics.push(m.graphic),c=!1):(o.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,d)),c=!0);l.forEach(m=>m.resolve(d));const f=OR(o).then(m=>m.filter(g=>!!g).flat());return{pendingFeatures:o,allGraphicsPromise:f,location:i}}async _getPopupHits(i,s){const{hits:n,location:o}=await this.popupHitTest(i);Ce(s);const l=[];for(const c of n)if("graphic"in c){if(this._isValidPopupGraphic(c.graphic,s)){const d=this._isValidPopupGraphicsLayerView(c.layerView)?c.layerView:void 0;l.push({graphic:c.graphic,layerView:d})}}else this._isValidPopupLocationLayerView(c.layerView)&&l.push({mapPoint:c.mapPoint,layerView:c.layerView});return{hits:l,location:o}}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(s?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return a([u()],r.prototype,"popup",void 0),a([u()],r.prototype,"popupElement",void 0),a([u()],r.prototype,"popupEnabled",void 0),r=a([_("esri.views.PopupView")],r),r};let Wj=class{constructor(e){this.layerView=e,this._resolver=ta(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:r,graphics:i,_resolver:s}=this;if(!r)return s.resolve(i),s.promise;let n;return r.fetchPopupFeaturesFromGraphics(i,e).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const Zj=5e3;var Cp;const m2=Wt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),S$=m2.jsonValues.slice();bf(S$,"orthometric");const Id=Wt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let fr=Cp=class extends F{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,r){return m2.write(t,e,r)}readHeightModel(t,e,r){return m2.read(t)||(r?.messages&&r.messages.push(Jj(t,{context:r})),null)}readHeightUnit(t,e,r){return Id.read(t)||(r?.messages&&r.messages.push(c7(t,{context:r})),null)}readHeightUnitService(t,e,r){return j5(t)||Id.read(t)||(r?.messages&&r.messages.push(c7(t,{context:r})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new Cp({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const r=tS(e);return new Cp({heightModel:t.heightModel,heightUnit:r??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new Cp;return e.read(t,{origin:"web-scene"}),e}};function c7(t,e){return new vs("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Jj(t,e){return new vs("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}a([u({type:m2.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:S$,default:"ellipsoidal",write:{isRequired:!0}}}}})],fr.prototype,"heightModel",void 0),a([j("web-scene","heightModel")],fr.prototype,"writeHeightModel",null),a([A(["web-scene","service"],"heightModel")],fr.prototype,"readHeightModel",null),a([u({type:Id.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Id.jsonValues,write:{writer:Id.write,isRequired:!0}}}}})],fr.prototype,"heightUnit",void 0),a([A("web-scene","heightUnit")],fr.prototype,"readHeightUnit",null),a([A("service","heightUnit")],fr.prototype,"readHeightUnitService",null),a([u({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],fr.prototype,"vertCRS",void 0),a([A("service","vertCRS",["vertCRS","ellipsoid","geoid"])],fr.prototype,"readVertCRS",null),fr=Cp=a([_("esri.geometry.HeightModelInfo")],fr);let oy;async function Qj(){return oy==null&&(oy=R(()=>import("./money-tides-WhereClauseCache-CRc1pwP3.js"),__vite__mapDeps([44,45,4,3,1,2,5,6,7,12,13,14])).then(t=>new t.WhereClauseCache(500,500))),oy}async function x$(t,e){const r=await Qj(),i=r.get(t,e);if(i==null)throw r.getError(t,e);return i}function y6(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function Kj(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function Nae(t,e){return e.length===0?null:`${t} IN (${Yj(e)})`}function Yj(t){return t.map(e=>typeof e=="string"?Xj(e):e).join(",")}function Xj(t){return`'${t.replaceAll("'","''")}'`}function eV(t){return typeof t=="number"}function Dae(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function jae(t){return typeof t=="boolean"}function Fh(t){return typeof t=="string"||t instanceof String}function tV(t){return t==null||Fh(t)}function Vae(t){return Array.isArray(t)}function zae(t){return t?.declaredClass==="esri.Graphic"}function Uae(t){return t instanceof Date}const rV="HH:mm",iV="HH:mm:ss",sV="HH:mm:ss.SSS",nV=[sV,iV,rV,"TT"],oV="yyyy-MM-dd";function p7(t){if(!t||!Fh(t))return null;const e=Re.fromFormat(t,oV);return e.isValid?e:null}function d7(t){return t&&Fh(t)?RR(nV,e=>{const r=Re.fromFormat(t,e);return r.isValid?r:null})??null:null}function h7(t){if(!t||!Fh(t))return null;const e=Re.fromISO(t);return e.isValid?e:null}const $$=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function aV(t){return t!=null&&$$.has(t.type)}function T$(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function I$(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function M$(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const lV=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);v_($$,lV);function qae(t,e){const r=t?.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,n=aV(t);return T$(t)||M$(t)||I$(t)?{...uV(t,s,i),isInteger:n}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:n}}function uV(t,e,r){return T$(t)?{min:p7(r)?.toMillis(),max:p7(e)?.toMillis(),rawMin:r,rawMax:e}:M$(t)?{min:d7(r)?.toMillis(),max:d7(e)?.toMillis(),rawMin:r,rawMax:e}:I$(t)?{min:h7(r)?.toMillis(),max:h7(e)?.toMillis(),rawMin:r,rawMax:e}:{max:null,min:null}}function cV(t){if(!t)return;const e=t.match(pV);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const pV=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function dV(t){return t.match(hV)?.[1]?.replaceAll("\\'","'")??null}const hV=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let ay;function Tl(){return ay||(ay=(async()=>{const[t,e,r]=await Promise.all([R(()=>import("./money-tides-arcadeUtils-C1-MEIjA.js"),__vite__mapDeps([186,187,1,2,188,189,4,3,5,6,7,190,179,49,191,192,13,14,193,45,90,194,12,180,181,195])),R(()=>import("./money-tides-batchExec-B5uqFbo8.js"),__vite__mapDeps([196,4,3,1,2,5,6,7,100,12])),R(()=>import("./money-tides-aiServices-poD-6luj.js").then(i=>i.a),__vite__mapDeps([192,4,189,3,1,2,5,6,7,190,179,49,13,14,193,188]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:r,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),ay}const yV=/^([0-9_])/,fV=/[^a-z0-9_\u0080-\uffff]+/gi;function mV(t){return t==null?null:t.trim().replaceAll(fV,"_").replace(yV,"F$1")||null}const gV=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],vV=["field","normalizationField"];function nm(t,e){if(t!=null&&e!=null){for(const r of Array.isArray(t)?t:[t])if(y7(gV,r,e),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)y7(vV,i,e)}}function y7(t,e,r){if(t)for(const i of t){const s=T_(i,e),n=s&&typeof s!="function"&&r.get(s);n&&Kr(i,n.name,e)}}function E$(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const r=e.get(t.startField),i=e.get(t.endField);t.startField=r?.name??null,t.endField=i?.name??null}else{const r=e.get(t.startTimeField),i=e.get(t.endTimeField);t.startTimeField=r?.name??null,t.endTimeField=i?.name??null}}const ly=new Set;function a4(t,e){return t&&e?(ly.clear(),Il(ly,t,e),Array.from(ly).sort()):[]}function Il(t,e,r){if(r)if(e?.fields?.length)if(r.includes("*"))for(const{name:i}of e.fields)t.add(i);else for(const i of r)ur(t,e,i);else{if(r.includes("*"))return t.clear(),void t.add("*");for(const i of r)i!=null&&t.add(i)}}function ur(t,e,r){if(typeof r=="string")if(e){const i=e.get(r);i&&t.add(i.name)}else t.add(r)}function Gae(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(r=>r.name):e}function Bae(t,e,r=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const i=a4(t,e);return i.length/t.fields.length>=r?["*"]:i}async function cr(t,e,r,i){if(!i)return;const s=cV(i);if(s)ur(t,e,s);else{const{arcadeUtils:n}=await Tl(),o=n.extractFieldNames(i,r?.partitions??e?.fields?.map(l=>l.name));for(const l of o)ur(t,r?.index??e,l)}}async function f6(t,e,r){if(r&&r!=="1=1"){const i=await x$(r,e);if(!i.isStandardized)throw new I("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});Il(t,e,i.fieldNames)}}function wV({displayField:t,fields:e}){return t||(e?.length?bV(e):null)}function bV(t){return uy(t,"name-or-title")||uy(t,"unique-identifier")||uy(t,"type-or-category")||_V(t)}function _V(t){for(const e of t){if(!e?.name)continue;const r=e.name.toLowerCase();if(r.includes("name")||r.includes("title"))return e.name}return null}function uy(t,e){for(const r of t)if(r?.valueType&&r.valueType===e)return r.name;return null}async function Hae(t,e){if(!e)return;const r=e.elevationInfo?.featureExpressionInfo;return r?r.collectRequiredFields(t,e.fieldsIndex):void 0}function SV(t,e,r){r.onStatisticExpression?cr(t,e,null,r.onStatisticExpression.expression):t.add(r.onStatisticField)}async function Wae(t,e,r){if(!e||!r||!("fields"in r))return;const i=[],s=r.popupTemplate;i.push(P$(t,e,s)),r.fields&&i.push(...r.fields.map(async n=>SV(t,e.fieldsIndex,n))),await Promise.all(i)}async function Zae(t,e){const{fieldsIndex:r,trackInfo:i}=e;if(!e||!i||!r)return;const s=[i.latestObservations.renderer?.collectRequiredFields(t,r),i.previousObservations.renderer?.collectRequiredFields(t,r),i.trackLines.renderer?.collectRequiredFields(t,r)];i.popupTemplate&&s.push(P$(t,e,i.popupTemplate));for(const n of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(n)for(const o of n)s.push(L$(t,r,o));await Promise.all(s)}async function P$(t,e,r){const i=[];r?.expressionInfos&&i.push(...r.expressionInfos.map(n=>cr(t,e.fieldsIndex,null,n.expression)));const s=r?.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&i.push(cr(t,e.fieldsIndex,null,n.expressionInfo.expression));await Promise.all(i)}async function Jae(t,e,r){e&&(e.timeInfo&&r?.timeExtent&&Il(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Il(t,e.fieldsIndex,[e.floorInfo.floorField]),r?.where!=null&&await f6(t,e.fieldsIndex,r.where))}async function Qae(t,e,r){e&&r&&await Promise.all(r.map(i=>xV(t,e,i)))}async function xV(t,e,r){e&&r&&(r.valueExpression?await cr(t,e.fieldsIndex,null,r.valueExpression):r.field&&ur(t,e.fieldsIndex,r.field))}function Kae(t){return t?a4(t.fieldsIndex,O$(t)):[]}function $V(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?a4(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function Yae(t,e,r){if(!e||!r)return;const i=e.fieldsIndex;await Promise.all(r.filters.map(s=>f6(t,i,s.where)))}const TV=new Set(["oid","global-id","guid"]),IV=new Set(["oid","global-id"]),MV=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function EV(t){const e=new Set;R$(t).forEach(i=>e.add(i)),$V(t).forEach(i=>e.add(i.toLowerCase()));const r=t&&"infoFor3D"in t?t.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>e.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>e.add(i.toLowerCase()))),Array.from(e)}function O$(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=e;return[r,i,s,n].filter(Boolean)}function R$(t){return O$(t).map(e=>e.toLowerCase())}function C$(t,e){return t.editable&&!TV.has(t.type)&&!R$(e).includes(t.name?.toLowerCase()??"")}function PV(t,e){const r=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&r===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&r===e.globalIdField.toLowerCase()||EV(e).includes(r)||IV.has(t.type)||MV.some(i=>i.test(r)))}async function Xae(t,e){const{labelingInfo:r,fieldsIndex:i}=e;r?.length&&await Promise.all(r.map(s=>L$(t,i,s)))}async function L$(t,e,r){if(!r)return;const i=r.getLabelExpression(),s=r.where;if(i.type==="arcade")await cr(t,e,null,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{ur(t,e,o.slice(1,-1))})}await f6(t,e,s)}function OV(t){const e=t.defaultValue;return e!==void 0&&A$(t,e)?e:t.nullable?null:void 0}function ele(t){const e=typeof t=="string"?{type:t}:t;return N$(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function k$(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function RV(t){return t===null||k$(t)}function CV(t){return t===null||Number.isInteger(t)}function LV(){return!0}function A$(t,e){let r;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=t.nullable?CV:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=t.nullable?RV:k$;break;case"string":case"esriFieldTypeString":r=t.nullable?tV:Fh;break;default:r=LV}return arguments.length===1?r:r(e)}const kV=["integer","small-integer","big-integer","long"],AV=["single","double"],FV=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],NV=["esriFieldTypeSingle","esriFieldTypeDouble"],F$=new Set([...kV,...FV]),DV=new Set([...AV,...NV]),jV=v_(F$,DV);function VV(t){return t!=null&&F$.has(t.type)}function m6(t){return t!=null&&jV.has(t.type)}function N$(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function D$(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function zV(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function UV(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function j$(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function f7(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function m7(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function tle(t,e){return qV(t,e)===null}function rle(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function qV(t,e){return t==null||t.nullable&&e===null?null:A$(t,e)?m6(t)&&!GV(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function GV(t,e){const r=typeof t=="string"?V$(t):t;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(e)&&e>=i&&e<=s:e>=i&&e<=s}function V$(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return BV;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return HV;case"esriFieldTypeBigInteger":case"big-integer":return WV;case"esriFieldTypeSingle":case"single":return ZV;case"esriFieldTypeDouble":case"double":return JV}}const BV={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},HV={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},WV={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},m1=(2-2**-23)*2**127,ZV={min:-m1,max:m1,isInteger:!1,rawMin:-m1,rawMax:m1},JV={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function ile(t,e,r){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${r} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${r} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${r} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:i,max:s}=V$(e.type);return`Value ${r} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${i} to ${s}`}}}function QV(t,e){return!KV(t,e,null)}function KV(t,e,r){if(!t?.attributes||!e)return!0;const i=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!i.has(n)&&(s=!0,r==null))break;return s}function YV(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function g6(t){const e=t?.match(/{[^}]+}/g);return e?e.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let c0=class extends F{constructor(e){super(e),this.type=null}};a([u({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],c0.prototype,"type",void 0),c0=a([_("esri.popup.content.Content")],c0);const to=c0,g1=new be({asc:"ascending",desc:"descending"});let Lp=class extends de(F){constructor(e){super(e),this.field=null,this.order="ascending"}};a([u({type:String,json:{write:!0}})],Lp.prototype,"field",void 0),a([u({type:g1.apiValues,json:{type:g1.jsonValues,read:g1.read,write:g1.write}})],Lp.prototype,"order",void 0),Lp=a([_("esri.popup.support.AttachmentsOrderByInfo")],Lp);const XV=Lp;let $s=class extends de(to){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};a([u({type:[String],json:{write:!0}})],$s.prototype,"attachmentKeywords",void 0),a([u({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],$s.prototype,"attachmentTypes",void 0),a([u({type:String,json:{write:!0}})],$s.prototype,"description",void 0),a([u({type:["auto","preview","list"],json:{write:!0}})],$s.prototype,"displayType",void 0),a([u({type:[XV],json:{write:!0}})],$s.prototype,"orderByFields",void 0),a([u({type:String,json:{write:!0}})],$s.prototype,"title",void 0),a([u({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],$s.prototype,"type",void 0),$s=a([_("esri.popup.content.AttachmentsContent")],$s);const Zc=$s;var om;let xa=om=class extends to{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new om({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?P(this.outFields):null})}};a([u()],xa.prototype,"creator",void 0),a([u()],xa.prototype,"destroyer",void 0),a([u()],xa.prototype,"outFields",void 0),a([u({type:["custom"],readOnly:!0})],xa.prototype,"type",void 0),xa=om=a([_("esri.popup.content.CustomContent")],xa);const ez=xa;var am;let ou=am=class extends F{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new am({title:this.title,expression:this.expression})}};a([u({type:String,json:{write:!0}})],ou.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],ou.prototype,"expression",void 0),a([u({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],ou.prototype,"returnType",void 0),ou=am=a([_("esri.popup.ElementExpressionInfo")],ou);const tz=ou;var lm;let kp=lm=class extends to{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new lm({expressionInfo:this.expressionInfo?.clone()})}};a([u({type:tz,json:{write:!0}})],kp.prototype,"expressionInfo",void 0),a([u({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],kp.prototype,"type",void 0),kp=lm=a([_("esri.popup.content.ExpressionContent")],kp);const l4=kp;let p0=class extends de(F){constructor(e){super(e),this.type=null}};a([u({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],p0.prototype,"type",void 0),p0=a([_("esri.layers.support.FieldFormat")],p0);const v6=p0,z$="auto";let pn=class extends v6{constructor(e){super(e),this.dateStyle=null,this.hour12=z$,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};a([u({type:["full","long","medium","short"],json:{write:!0}})],pn.prototype,"dateStyle",void 0),a([u({type:["always","auto","never"],nonNullable:!0,json:{default:z$,write:!0}})],pn.prototype,"hour12",void 0),a([u({type:["long","short"],json:{write:!0}})],pn.prototype,"month",void 0),a([u({type:["full","long","medium","short"],json:{write:!0}})],pn.prototype,"timeStyle",void 0),a([u({type:["date-time"]})],pn.prototype,"type",void 0),a([u({type:["numeric"],json:{write:!0}})],pn.prototype,"year",void 0),pn=a([_("esri.layers.support.DateTimeFieldFormat")],pn);const al=pn,g7={min:0,max:20},U$=2,q$=0,G$="decimal",B$="auto";let vo=class extends v6{constructor(e){super(e),this.maximumFractionDigits=U$,this.minimumFractionDigits=q$,this.style=G$,this.type="number",this.useGrouping=B$}};a([u({type:ve,nonNullable:!0,range:g7,json:{default:U$,write:!0}})],vo.prototype,"maximumFractionDigits",void 0),a([u({type:ve,nonNullable:!0,range:g7,json:{default:q$,write:!0}})],vo.prototype,"minimumFractionDigits",void 0),a([u({type:["decimal"],nonNullable:!0,json:{default:G$,write:!0}})],vo.prototype,"style",void 0),a([u({type:["number"]})],vo.prototype,"type",void 0),a([u({type:["always","auto","never"],nonNullable:!0,json:{default:B$,write:!0}})],vo.prototype,"useGrouping",void 0),vo=a([_("esri.layers.support.NumberFieldFormat")],vo);const g2=vo;let au=class extends de(F){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};a([te(CR)],au.prototype,"dateFormat",void 0),a([u({type:Boolean,json:{write:!0}})],au.prototype,"digitSeparator",void 0),a([u({type:ve,json:{write:!0}})],au.prototype,"places",void 0),au=a([_("esri.popup.support.FieldInfoFormat")],au);const Zn=au,H$={base:v6,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":al,number:g2}};function rz(t,e){const{format:r}=t;return e&&kl(e)?r?W$(r,e):Md(e,{hour12:"always",useGrouping:"always"}):null}function W$(t,e){const{dateFormat:r}=t;if(!e)return r?w7(t):v7(t);if(!kl(e))return;const i={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return Z$(t);case"single":case"double":return v7(t);case"date":case"timestamp-offset":return r?w7(t):Md(e,i);case"date-only":return r?iz(t):Md(e);case"time-only":return r?sz(t):Md(e,i)}}function kl(t){return m6(t)||D$(t)||zV(t)||j$(t)||UV(t)}function Z$(t){return new g2({useGrouping:t.digitSeparator?"always":"never"})}function v7(t){const e=Z$(t),{places:r}=t;return e.minimumFractionDigits=r??0,e.maximumFractionDigits=r??2,e}function w7(t){return new al({dateStyle:J$(t),year:X$(t),month:K$(t),timeStyle:Y$(t),hour12:Q$(t)})}function iz(t){return new al({dateStyle:J$(t),year:X$(t),month:K$(t)})}function sz(t){return new al({timeStyle:Y$(t),hour12:Q$(t)})}function J$(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function Q$(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function K$(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Y$(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function X$(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function w6(t,e){const r=t.type==="number",i=t.type==="date-time";if(!e)return r?b7(t):i?_7(t):null;if(kl(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return r?eT(t):null;case"single":case"double":return r?b7(t):null;case"date":case"timestamp-offset":return i?_7(t):null;case"date-only":return i?nz(t):null;case"time-only":return i?oz(t):null}}function eT(t){return new Zn({digitSeparator:t.useGrouping!=="never"})}function b7(t){const e=eT(t);return e.places=t.maximumFractionDigits,e}function _7(t){let e;const r=tT(t),i=rT(t),s=t.hour12==="never"?"24":null,n=t.year==="numeric"?"year":null,o=iT(t);return r&&i&&s?e=`${r}-${i}-${s}`:r&&i?e=`${r}-${i}`:r?e=r:n&&o?e=`${o}-${n}`:n&&(e=n),e?new Zn({dateFormat:e}):null}function nz(t){let e;const r=tT(t),i=t.year==="numeric"?"year":null,s=iT(t);return r?e=r:i&&s?e=`${s}-${i}`:i&&(e=i),e?new Zn({dateFormat:e}):null}function oz(t){let e;const r=rT(t),i=t.hour12==="never"?"24":null;return r&&i?e=`short-date-${r}-${i}`:r&&(e=`short-date-${r}`),e?new Zn({dateFormat:e}):null}function tT(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function rT(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function iT(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function Md(t,e){if(!kl(t))return;const r=e?.useGrouping??"auto",i=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new g2({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:r});case"single":case"double":return new g2({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:r});case"date":case"timestamp-offset":return new al({dateStyle:"short",timeStyle:"short",hour12:i});case"date-only":return new al({dateStyle:"short"});case"time-only":return new al({timeStyle:"short",hour12:i})}}let ti=class extends de(F){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?w6(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?W$(e):null)}readFormat(e,r){if(!r.fieldFormat)return e?Zn.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};a([u({value:null,clonable:!1,types:H$,json:{write:{overridePolicy(t,e,r){const{fieldName:i}=this;return{enabled:!!i&&!i.startsWith("expression/")&&!i.startsWith("relationships/")&&!!r?.writeFieldFormat}}}}})],ti.prototype,"fieldFormat",null),a([u({type:String,json:{write:!0}})],ti.prototype,"fieldName",void 0),a([u({value:null,clonable:!1,type:Zn,json:{write:!0}})],ti.prototype,"format",null),a([A("format")],ti.prototype,"readFormat",null),a([u({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],ti.prototype,"isEditable",void 0),a([u({type:String,json:{write:!0}})],ti.prototype,"label",void 0),a([u({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],ti.prototype,"statisticType",void 0),a([te(new be({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],ti.prototype,"stringFieldOption",void 0),a([u({type:String,json:{write:!0}})],ti.prototype,"tooltip",void 0),a([u({type:Boolean,json:{write:!0}})],ti.prototype,"visible",void 0),ti=a([_("esri.popup.FieldInfo")],ti);const u4=ti;var um;let wo=um=class extends to{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new um(P({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};a([u({type:Object,json:{write:!0}})],wo.prototype,"attributes",void 0),a([u({type:String,json:{write:!0}})],wo.prototype,"description",void 0),a([u({type:[u4],json:{write:!0}})],wo.prototype,"fieldInfos",void 0),a([u({type:String,json:{write:!0}})],wo.prototype,"title",void 0),a([u({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],wo.prototype,"type",void 0),wo=um=a([_("esri.popup.content.FieldsContent")],wo);const Jc=wo;let $a=class extends F{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};a([u({type:String,json:{write:!0}})],$a.prototype,"altText",void 0),a([u({type:String,json:{write:!0}})],$a.prototype,"caption",void 0),a([u({type:String,json:{write:!0}})],$a.prototype,"title",void 0),a([u({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],$a.prototype,"type",void 0),$a=a([_("esri.popup.content.mixins.MediaInfo")],$a);const b6=$a;var cm;let Ta=cm=class extends Z{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new cm({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};a([u()],Ta.prototype,"color",void 0),a([u()],Ta.prototype,"fieldName",void 0),a([u()],Ta.prototype,"tooltip",void 0),a([u()],Ta.prototype,"value",void 0),Ta=cm=a([_("esri.popup.content.support.ChartMediaInfoValueSeries")],Ta);const az=Ta;var pm;let bo=pm=class extends F{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new pm({colors:P(this.colors),fields:P(this.fields),normalizeField:this.normalizeField,series:P(this.series),tooltipField:this.tooltipField})}};a([u({type:[K],json:{type:[[ve]],write:!0}})],bo.prototype,"colors",void 0),a([u({type:[String],json:{write:{isRequired:!0}}})],bo.prototype,"fields",void 0),a([u({type:String,json:{write:!0}})],bo.prototype,"normalizeField",void 0),a([u({type:[az],json:{read:!1}})],bo.prototype,"series",void 0),a([u({type:String,json:{write:!0}})],bo.prototype,"tooltipField",void 0),bo=pm=a([_("esri.popup.content.support.ChartMediaInfoValue")],bo);const lz=bo;let Ap=class extends b6{constructor(e){super(e),this.type=null,this.value=void 0}};a([u({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ap.prototype,"type",void 0),a([u({type:lz,json:{write:{isRequired:!0}}})],Ap.prototype,"value",void 0),Ap=a([_("esri.popup.content.mixins.ChartMediaInfo")],Ap);const c4=Ap,p4=Wt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var dm;let d0=dm=class extends c4{constructor(t){super(t),this.type="bar-chart"}clone(){return new dm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a([u({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:p4.write,isRequired:!0}}})],d0.prototype,"type",void 0),d0=dm=a([_("esri.popup.content.BarChartMediaInfo")],d0);const sT=d0;var hm;let h0=hm=class extends c4{constructor(t){super(t),this.type="column-chart"}clone(){return new hm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a([u({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:p4.write,isRequired:!0}}})],h0.prototype,"type",void 0),h0=hm=a([_("esri.popup.content.ColumnChartMediaInfo")],h0);const nT=h0;var ym;let Fp=ym=class extends F{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new ym({linkURL:this.linkURL,sourceURL:this.sourceURL})}};a([u({type:String,json:{write:!0}})],Fp.prototype,"linkURL",void 0),a([u({type:String,json:{write:{isRequired:!0}}})],Fp.prototype,"sourceURL",void 0),Fp=ym=a([_("esri.popup.content.support.ImageMediaInfoValue")],Fp);const uz=Fp;var fm;let lu=fm=class extends b6{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new fm({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};a([u({type:Number,json:{write:!0}})],lu.prototype,"refreshInterval",void 0),a([u({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],lu.prototype,"type",void 0),a([u({type:uz,json:{write:{isRequired:!0}}})],lu.prototype,"value",void 0),lu=fm=a([_("esri.popup.content.ImageMediaInfo")],lu);const oT=lu;var mm;let y0=mm=class extends c4{constructor(t){super(t),this.type="line-chart"}clone(){return new mm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a([u({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:p4.write,isRequired:!0}}})],y0.prototype,"type",void 0),y0=mm=a([_("esri.popup.content.LineChartMediaInfo")],y0);const aT=y0;var gm;let f0=gm=class extends c4{constructor(t){super(t),this.type="pie-chart"}clone(){return new gm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a([u({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:p4.write,isRequired:!0}}})],f0.prototype,"type",void 0),f0=gm=a([_("esri.popup.content.PieChartMediaInfo")],f0);const lT=f0,vm={base:b6,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":sT,"column-chart":nT,"line-chart":aT,"pie-chart":lT,image:oT}};var wm;let Xi=wm=class extends to{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?oT.fromJSON(e):e.type==="barchart"?sT.fromJSON(e):e.type==="columnchart"?nT.fromJSON(e):e.type==="linechart"?aT.fromJSON(e):e.type==="piechart"?lT.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(r=>r.toJSON())}clone(){return new wm(P({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};a([u()],Xi.prototype,"activeMediaInfoIndex",void 0),a([u({type:Object,json:{write:!0}})],Xi.prototype,"attributes",void 0),a([u({type:String,json:{write:!0}})],Xi.prototype,"description",void 0),a([u({types:[vm]})],Xi.prototype,"mediaInfos",void 0),a([A("mediaInfos")],Xi.prototype,"readMediaInfos",null),a([j("mediaInfos")],Xi.prototype,"writeMediaInfos",null),a([u({type:String,json:{write:!0}})],Xi.prototype,"title",void 0),a([u({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Xi.prototype,"type",void 0),Xi=wm=a([_("esri.popup.content.MediaContent")],Xi);const lh=Xi;var bm;let Np=bm=class extends F{constructor(t){super(t),this.field=null,this.order=null}clone(){return new bm({field:this.field,order:this.order})}};a([u({type:String,json:{write:!0}})],Np.prototype,"field",void 0),a([u({type:["asc","desc"],json:{write:!0}})],Np.prototype,"order",void 0),Np=bm=a([_("esri.popup.support.RelatedRecordsInfoFieldOrder")],Np);const _6=Np;let Ts=class extends de(to){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};a([u({type:String,json:{write:!0}})],Ts.prototype,"description",void 0),a([u({type:Number,json:{type:ve,write:!0}})],Ts.prototype,"displayCount",void 0),a([u({type:["list"],json:{write:{isRequired:!0}}})],Ts.prototype,"displayType",void 0),a([u({type:[_6],json:{write:!0}})],Ts.prototype,"orderByFields",void 0),a([u({type:Number,json:{type:ve,write:{isRequired:!0}}})],Ts.prototype,"relationshipId",void 0),a([u({type:String,json:{write:!0}})],Ts.prototype,"title",void 0),a([u({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ts.prototype,"type",void 0),Ts=a([_("esri.popup.content.RelationshipContent")],Ts);const uh=Ts;var _m;let Dp=_m=class extends to{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new _m({text:this.text})}};a([u({type:String,json:{write:!0}})],Dp.prototype,"text",void 0),a([u({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Dp.prototype,"type",void 0),Dp=_m=a([_("esri.popup.content.TextContent")],Dp);const ch=Dp;let dn=class extends de(F){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};a([u({type:String,json:{write:!0}})],dn.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],dn.prototype,"description",void 0),a([u({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],dn.prototype,"type",void 0),a([u({type:Number,json:{type:ve,write:!0}})],dn.prototype,"associatedNetworkSourceId",void 0),a([u({type:Number,json:{type:ve,write:!0}})],dn.prototype,"associatedAssetGroup",void 0),a([u({type:Number,json:{type:ve,write:!0}})],dn.prototype,"associatedAssetType",void 0),dn=a([_("esri.popup.support.UtilityNetworkAssociationType")],dn);const uT=dn;let _o=class extends de(to){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};a([u({type:String,json:{write:!0}})],_o.prototype,"description",void 0),a([u({type:Number,json:{type:ve,write:!0}})],_o.prototype,"displayCount",void 0),a([u({type:String,json:{write:!0}})],_o.prototype,"title",void 0),a([u({type:[uT],json:{write:!0}})],_o.prototype,"associationTypes",void 0),a([te({utilityNetworkAssociations:"utility-network-associations"})],_o.prototype,"type",void 0),_o=a([_("esri.popup.content.UtilityNetworkAssociationsContent")],_o);const S6=_o,cz={base:null,key:"type",typeMap:{attachment:Zc,media:lh,text:ch,expression:l4,field:Jc,relationship:uh,utilityNetworkAssociations:S6}},pz={base:null,key:"type",typeMap:{attachment:Zc,media:lh,text:ch,expression:l4,field:Jc,relationship:uh}};var Sm;let Ia=Sm=class extends F{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Sm({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a([u({type:String,json:{write:!0}})],Ia.prototype,"name",void 0),a([u({type:String,json:{write:!0}})],Ia.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],Ia.prototype,"expression",void 0),a([u({type:["string","number"],json:{write:!0}})],Ia.prototype,"returnType",void 0),Ia=Sm=a([_("esri.popup.ExpressionInfo")],Ia);const dz=Ia;var xm;let jp=xm=class extends F{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new xm({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};a([u({type:Boolean,json:{write:!0}})],jp.prototype,"returnTopmostRaster",void 0),a([u({type:Boolean,json:{write:!0}})],jp.prototype,"showNoDataRecords",void 0),jp=xm=a([_("esri.popup.LayerOptions")],jp);const hz=jp;var $m;let Vp=$m=class extends F{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new $m({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?P(this.orderByFields):null})}};a([u({type:Boolean,json:{write:!0}})],Vp.prototype,"showRelatedRecords",void 0),a([u({type:[_6],json:{write:!0}})],Vp.prototype,"orderByFields",void 0),Vp=$m=a([_("esri.popup.RelatedRecordsInfo")],Vp);const S7=Vp;var Tm;let Ei=Tm=class extends Ph(Z){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Tm({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};a([u()],Ei.prototype,"active",void 0),a([u()],Ei.prototype,"className",void 0),a([u()],Ei.prototype,"disabled",void 0),a([u()],Ei.prototype,"icon",void 0),a([u()],Ei.prototype,"id",void 0),a([u()],Ei.prototype,"indicator",void 0),a([u()],Ei.prototype,"title",void 0),a([u()],Ei.prototype,"type",void 0),a([u()],Ei.prototype,"visible",void 0),Ei=Tm=a([_("esri.support.actions.ActionBase")],Ei);const x6=Ei;var Im;let m0=Im=class extends x6{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new Im({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};a([u()],m0.prototype,"image",void 0),m0=Im=a([_("esri.support.actions.ActionButton")],m0);const yz=m0;var Mm;let zp=Mm=class extends x6{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new Mm({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};a([u()],zp.prototype,"image",void 0),a([u()],zp.prototype,"value",void 0),zp=Mm=a([_("esri.support.actions.ActionToggle")],zp);const fz=zp,gp="relationships/",x7="expression/",mz=U.ofType({key:"type",defaultKeyValue:"button",base:x6,typeMap:{button:yz,toggle:fz}}),gz={base:to,key:"type",typeMap:{media:lh,custom:ez,text:ch,attachments:Zc,fields:Jc,expression:l4,relationship:uh,utilityNetworkAssociations:S6}},cT=new Set(["attachments","fields","media","text","expression","relationship"]),vz=new Set([...cT,"utility-network-associations"]);let yt=class extends de(F){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(r=>fl(gz,r)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Tr(e)?e:(N.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(e,r,i,s){this._writePopupTemplateContent(e,r,s)}writeWebMapContent(e,r,i,s){this._writePopupTemplateContent(e,r,s)}writeFieldInfos(e,r,i,s){const{content:n}=this,o=Array.isArray(n)?n:null,{writeFieldFormat:l,...c}=s||{};if(e){const d=o?o.filter(y=>y.type==="fields"):[],h=d.length&&d.every(y=>y.fieldInfos?.length);r.fieldInfos=e.filter(Boolean).map(y=>{const f=y.toJSON(c);return h&&(f.visible=!1),f})}if(o)for(const d of o)d.type==="fields"&&this._writeFieldsContent(d,r,c)}writeLayerOptions(e,r,i,s){r[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,r){r.title=e||""}async collectRequiredFields(e,r,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,r,i,[...s,...this._getContentExpressionInfos(this.content,s)]),Il(e,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,r){const i=new Set;return await this.collectRequiredFields(i,e,r),[...i].sort()}_writePopupTemplateContent(e,r,i){typeof e!="string"?Array.isArray(e)&&(r.popupElements=e.filter(s=>i?.origin==="web-scene"?cT.has(s.type):vz.has(s.type)).map(s=>s?.toJSON(i)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=e}_writeFieldsContent(e,r,i){const s=e.fieldInfos;if(!Array.isArray(s)||!s.length)return;const n=r.fieldInfos;if(Array.isArray(n))for(const o of s){const l=n.find(c=>c.fieldName?.toLowerCase()===o.fieldName?.toLowerCase());l?l.visible=!0:n.push(o.toJSON(i))}else r.fieldInfos=s.map(o=>o.toJSON(i))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,r){const i=e.orderByFields?.map(n=>this._toFieldOrderJSON(n,e.relationshipId))||[],s=[...r.relatedRecordsInfo?.orderByFields||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(e,r){!r.description&&e.text&&(r.description=e.text)}_writeMediaContent(e,r){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=P(e.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(e,r,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!r||s.mediaInfos||(n.mediaInfos=r,s.mediaInfos=!0),lh.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),ch.fromJSON(n)):n.type==="attachments"?Zc.fromJSON(n):n.type==="fields"?Jc.fromJSON(n):n.type==="expression"?l4.fromJSON(n):n.type==="relationship"?uh.fromJSON(n):n.type==="utilityNetworkAssociations"?S6.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:r,order:i}=e;if(!r?.startsWith(gp))return null;const s=r.replace(gp,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?uh.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(e,r){const{order:i,field:s}=e;return{field:`${gp}${r}/${s}`,order:i}}_readPopupInfo({description:e,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new ch({text:e})):n.push(new Jc),Array.isArray(r)&&r.length&&n.push(lh.fromJSON({mediaInfos:r})),i&&n.push(Zc.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=s;return o&&l?.length&&l.forEach(c=>{const d=this._toRelationshipContent(c);d&&n.push(d)}),n.length?n:e}_getContentElementFields(e){const r=e?.type;if(r==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(r==="custom")return e.outFields||[];if(r==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(r==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return r==="text"?this._extractFieldNames(e.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:r,title:i,value:s}=e,n=s||{},{fields:o,normalizeField:l,tooltipField:c,sourceURL:d,linkURL:h}=n,y=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(d),...this._extractFieldNames(h),...o??[]];return l&&y.push(l),c&&y.push(c),y}_getContentExpressionInfos(e,r){return Array.isArray(e)?e.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],r):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,r,i,s){s&&await Promise.all(s.map(n=>cr(e,r,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(gp)||r.startsWith(x7))).map(r=>r.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:r,title:i,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return g6(e).filter(r=>!(r.startsWith(gp)||r.startsWith(x7)))}};a([u({type:mz})],yt.prototype,"actions",void 0),a([u()],yt.prototype,"content",void 0),a([xe("content")],yt.prototype,"castContent",null),a([A("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],yt.prototype,"readContent",null),a([j("web-scene","content",{popupElements:{type:U.ofType(pz)},showAttachments:{type:Boolean},mediaInfos:{type:U.ofType(vm)},description:{type:String},relatedRecordsInfo:{type:S7}})],yt.prototype,"writeWebSceneContent",null),a([j("content",{popupElements:{type:U.ofType(cz)},showAttachments:{type:Boolean},mediaInfos:{type:U.ofType(vm)},description:{type:String},relatedRecordsInfo:{type:S7}})],yt.prototype,"writeWebMapContent",null),a([u({type:[dz],json:{write:!0}})],yt.prototype,"expressionInfos",void 0),a([u({type:[u4]})],yt.prototype,"fieldInfos",void 0),a([j("fieldInfos")],yt.prototype,"writeFieldInfos",null),a([u({type:hz})],yt.prototype,"layerOptions",void 0),a([j("layerOptions")],yt.prototype,"writeLayerOptions",null),a([u({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],yt.prototype,"lastEditInfoEnabled",void 0),a([u()],yt.prototype,"outFields",void 0),a([u()],yt.prototype,"overwriteActions",void 0),a([u()],yt.prototype,"returnGeometry",void 0),a([u({json:{type:String}})],yt.prototype,"title",void 0),a([j("title")],yt.prototype,"writeTitle",null),yt=a([_("esri.PopupTemplate")],yt);const oa=yt,$6=Symbol("idFieldsProviderSymbol");function wz(t){return!!t&&$6 in t}function $7(t){return wz(t)?t[$6]:void 0}const Nh=Symbol("popupProvider");function vle(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function bz(t){return!!t&&Nh in t}function _z(t){return bz(t)?t[Nh]:null}function Dh(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const r=[];for(const i of e.fieldNames)r.push(t.attributes[i]??null);return JSON.stringify(r)}}}function T7(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const r=e.uniqueIdFields.map(i=>t.attributes?.[i]);return JSON.stringify(r)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const I7=new be({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Sz=0,ot=class extends F{constructor(e){super(e),this.id="sym"+Sz++,this.type=null,this.color=new K([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};a([u({type:I7.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:I7.write,isRequired:!0}}})],ot.prototype,"type",void 0),a([u({type:K,json:{write:{allowNull:!0}}})],ot.prototype,"color",void 0),a([A("color")],ot.prototype,"readColor",null),ot=a([_("esri.symbols.Symbol")],ot);var Em;let sr=Em=class extends ot{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map(s=>{const n=s.valueExpressionInfo;return n?cr(t,e,null,n.expression):null});await Promise.all(i)}}}clone(){return new Em({data:P(this.data)})}hash(){return LR(JSON.stringify(this.data)).toString()}};a([u({json:{write:!1}})],sr.prototype,"color",void 0),a([u({json:{write:!0}})],sr.prototype,"data",void 0),a([A("data",["symbol"])],sr.prototype,"readData",null),a([j("data",{})],sr.prototype,"writeData",null),a([te({CIMSymbolReference:"cim"},{readOnly:!0})],sr.prototype,"type",void 0),sr=Em=a([_("esri.symbols.CIMSymbol")],sr);let xr=class extends F{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,r,i){e||(r[i]=e)}};a([u({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],xr.prototype,"enabled",void 0),a([j("enabled")],xr.prototype,"writeEnabled",null),a([u({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],xr.prototype,"type",void 0),xr=a([_("esri.symbols.Symbol3DLayer")],xr);function xz(t,e){const r=e.transparency!=null?Xd(e.transparency):1,i=e.color;return i&&Array.isArray(i)?new K([i[0]||0,i[1]||0,i[2]||0,r]):null}function $z(t,e){e.color=t.toJSON().slice(0,3);const r=K2(t.a);r!==0&&(e.transparency=r)}function aa(t){return{type:K,nonNullable:t?.nonNullable,json:{type:[ve],default:null,read:{source:["color","transparency"],reader:xz},write:{target:{color:{type:[ve],isRequired:t?.colorRequiredOnWrite},transparency:{type:ve}},writer:$z}}}}const Ys={type:Number,cast:_e,json:{write:!0}};function _le(t){return t==="emissive"?0:1}let Ma=class extends F{constructor(e){super(e),this.color=new K([0,0,0,1]),this.extensionLength=0,this.size=qi(1)}clone(){}cloneProperties(){return{color:P(this.color),size:this.size,extensionLength:this.extensionLength}}};a([u({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Ma.prototype,"type",void 0),a([u(aa({colorRequiredOnWrite:!0}))],Ma.prototype,"color",void 0),a([u({...Ys,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Ma.prototype,"extensionLength",void 0),a([u(Ys)],Ma.prototype,"size",void 0),Ma=a([_("esri.symbols.edges.Edges3D")],Ma);const T6=Ma;var Pm;let g0=Pm=class extends T6{constructor(t){super(t),this.type="sketch"}clone(){return new Pm(this.cloneProperties())}};a([te({sketch:"sketch"},{readOnly:!0})],g0.prototype,"type",void 0),g0=Pm=a([_("esri.symbols.edges.SketchEdges3D")],g0);const Tz=g0;var Om;let v0=Om=class extends T6{constructor(t){super(t),this.type="solid"}clone(){return new Om(this.cloneProperties())}};a([te({solid:"solid"},{readOnly:!0})],v0.prototype,"type",void 0),v0=Om=a([_("esri.symbols.edges.SolidEdges3D")],v0);const pT=v0,dT={types:{key:"type",base:T6,typeMap:{solid:pT,sketch:Tz}},json:{write:!0}};var Rm;let Du=Rm=class extends F{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new Rm(t)}};a([u({json:{write:!1}})],Du.prototype,"strength",void 0),a([u({json:{write:!1}})],Du.prototype,"source",void 0),Du=Rm=a([_("esri.symbols.support.Symbol3DEmissive")],Du);var Cm;let fi=Cm=class extends F{constructor(t){super(t),this.color=null,this.emissive=new Du({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new Cm(t)}};a([u(aa())],fi.prototype,"color",void 0),a([u({type:Du,json:{write:!1}})],fi.prototype,"emissive",void 0),fi=Cm=a([_("esri.symbols.support.Symbol3DMaterial")],fi);var Lm,lc;let Tn=(lc=class extends xr{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Lm({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},Lm=lc,lc);a([te({Extrude:"extrude"},{readOnly:!0})],Tn.prototype,"type",void 0),a([u({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Tn.prototype,"size",void 0),a([u({type:fi,json:{write:!0}})],Tn.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Tn.prototype,"castShadows",void 0),a([u(dT)],Tn.prototype,"edges",void 0),Tn=Lm=a([_("esri.symbols.ExtrudeSymbol3DLayer")],Tn);let Ed=class extends F{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ed.prototype,"type",void 0),Ed=a([_("esri.symbols.patterns.LinePattern3D")],Ed);const Iz=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var km;const Mz=Wt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Xa=km=class extends Ed{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new km(t)}};a([u({type:["style"],json:{write:{isRequired:!0}}})],Xa.prototype,"type",void 0),a([te(Mz),u({type:Iz,json:{write:{isRequired:!0}}})],Xa.prototype,"style",void 0),Xa=km=a([_("esri.symbols.patterns.LineStylePattern3D")],Xa);let Pd=class extends F{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Pd.prototype,"type",void 0),Pd=a([_("esri.symbols.patterns.Pattern3D")],Pd);const Ez=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Am;let ju=Am=class extends Pd{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new Am({style:this.style})}};a([u({type:["style"],json:{write:{isRequired:!0}}})],ju.prototype,"type",void 0),a([u({type:Ez,json:{read:!0,write:{isRequired:!0}}})],ju.prototype,"style",void 0),ju=Am=a([_("esri.symbols.patterns.StylePattern3D")],ju);const Pz={types:{key:"type",base:Pd,typeMap:{style:ju}},json:{write:!0}},hT={types:{key:"type",base:Ed,typeMap:{style:Xa}},json:{write:!0}},Od=new K("white"),Oz=new K([255,255,255,0]);function Rz(t){return t.r===0&&t.g===0&&t.b===0}var Fm;let Rd=Fm=class extends fi{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new Fm(t)}};a([te({multiply:"multiply",replace:"replace",tint:"tint"})],Rd.prototype,"colorMixMode",void 0),Rd=Fm=a([_("esri.symbols.support.Symbol3DFillMaterial")],Rd);function I6(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Cz(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function Lz(t,e,r,i,s,n,o,l,c,d,h,y,f,m,g,v){return[t,e,r,i,s,n,o,l,c,d,h,y,f,m,g,v]}const kz=I6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:kz,clone:Cz,create:I6,fromValues:Lz},Symbol.toStringTag,{value:"Module"}));function Az(t){return t<=M_?new Array(t).fill(0):new Float64Array(t)}function Tle(t){return(E_(t)?t.byteLength/8:t.length)<=M_?Array.from(t):new Float64Array(t)}function Ile(t,e,r){return Array.isArray(t)?t.slice(e,e+r):t.subarray(e,e+r)}function Mle(t){return[...t]}function Ele(t){const e=I6();for(let r=0;r<16;++r)e[r]=t[r];return e}function jh(t=Vz){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function M6(t,e,r,i,s,n,o=jh()){return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function Ple(t,e=jh()){return Fz(t,0,t.length/3,e)}function Fz(t,e,r,i=jh()){return yT(i,Dm),Nz(i,t,e,r),i}function Ole(t,e=Az(24)){const[r,i,s,n,o,l]=t;return e[0]=r,e[1]=i,e[2]=s,e[3]=r,e[4]=i,e[5]=l,e[6]=r,e[7]=o,e[8]=s,e[9]=r,e[10]=o,e[11]=l,e[12]=n,e[13]=i,e[14]=s,e[15]=n,e[16]=i,e[17]=l,e[18]=n,e[19]=o,e[20]=s,e[21]=n,e[22]=o,e[23]=l,e}function Rle(t,e){const r=isFinite(t[2])||isFinite(t[5]);return new ue(r?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Cle(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Lle(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function kle(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function Nz(t,e,r=0,i=e.length/3){let s=t[0],n=t[1],o=t[2],l=t[3],c=t[4],d=t[5];for(let h=0;h<i;h++)s=Math.min(s,e[r+3*h]),n=Math.min(n,e[r+3*h+1]),o=Math.min(o,e[r+3*h+2]),l=Math.max(l,e[r+3*h]),c=Math.max(c,e[r+3*h+1]),d=Math.max(d,e[r+3*h+2]);t[0]=s,t[1]=n,t[2]=o,t[3]=l,t[4]=c,t[5]=d}function Ale(t,e,r){const i=e.length;let s=t[0],n=t[1],o=t[2],l=t[3],c=t[4],d=t[5];if(r)for(let h=0;h<i;h++){const y=e[h];s=Math.min(s,y[0]),n=Math.min(n,y[1]),o=Math.min(o,y[2]),l=Math.max(l,y[0]),c=Math.max(c,y[1]),d=Math.max(d,y[2])}else for(let h=0;h<i;h++){const y=e[h];s=Math.min(s,y[0]),n=Math.min(n,y[1]),l=Math.max(l,y[0]),c=Math.max(c,y[1])}t[0]=s,t[1]=n,t[2]=o,t[3]=l,t[4]=c,t[5]=d}function Fle(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function Vh(t){return t[0]>=t[3]?0:t[3]-t[0]}function zh(t){return t[1]>=t[4]?0:t[4]-t[1]}function Uh(t){return t[2]>=t[5]?0:t[5]-t[2]}function Nle(t){const e=Vh(t),r=Uh(t),i=zh(t);return Math.sqrt(e*e+r*r+i*i)}function Dle(t,e=[0,0,0]){return e[0]=t[0]+Vh(t)/2,e[1]=t[1]+zh(t)/2,e[2]=t[2]+Uh(t)/2,e}function jle(t,e=[0,0,0]){return e[0]=Vh(t),e[1]=zh(t),e[2]=Uh(t),e}function Vle(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function Dz(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function zle(t,e){return e==null||Dz(t,e)}function Ule(t,e,r,i,s=t){return s[0]=t[0]+e,s[1]=t[1]+r,s[2]=t[2]+i,s[3]=t[3]+e,s[4]=t[4]+r,s[5]=t[5]+i,s}function qle(t,e,r=t){const i=t[0]+Vh(t)/2,s=t[1]+zh(t)/2,n=t[2]+Uh(t)/2;return r[0]=i+(t[0]-i)*e,r[1]=s+(t[1]-s)*e,r[2]=n+(t[2]-n)*e,r[3]=i+(t[3]-i)*e,r[4]=s+(t[4]-s)*e,r[5]=n+(t[5]-n)*e,r}function Gle(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ble(t,e,r=t){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r!==t&&(r[3]=t[3],r[4]=t[4],r[5]=t[5]),r}function Hle(t,e,r=t){return r[3]=e[0],r[4]=e[1],r[5]=e[2],r!==t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),t}function yT(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Wle(t){return t?yT(t,Dm):jh(Dm)}function Zle(t,e=Wr()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function Jle(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function jz(t,e,r,i,s){return t[0]=e,t[1]=r,t[2]=Number.NEGATIVE_INFINITY,t[3]=i,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function Nm(t){return t.length===6}function Qle(t){return Vh(t)===0&&zh(t)===0&&Uh(t)===0}function Kle(t,e,r){if(t==null||e==null)return t===e;if(!Nm(t)||!Nm(e))return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}const Dm=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Vz=[0,0,0,0,0,0];jh();function Yle(t,{isPrimitive:e,width:r,depth:i,height:s}){const n=e?10:1;if(r==null&&s==null&&i==null)return[n*t[0],n*t[1],n*t[2]];const o=rp(r,i,s);let l;for(let c=0;c<3;c++){const d=o[c];if(d!=null){l=d/t[c];break}}for(let c=0;c<3;c++)o[c]==null&&(o[c]=t[c]*l);return o}const zz=M6(-.5,-.5,-.5,.5,.5,.5),Uz=M6(-.5,-.5,0,.5,.5,1),qz=M6(-.5,-.5,0,.5,.5,.5);function Xle(t){switch(t){case"sphere":case"cube":case"diamond":return zz;case"cylinder":case"cone":case"inverted-cone":return Uz;case"tetrahedron":return qz;default:return}}const E6=["butt","square","round"],Gz=[...E6,"none"],fT=["miter","bevel","round"];var jm;let Ea=jm=class extends F{constructor(t){super(t),this.color=new K([0,0,0,1]),this.size=qi(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new jm(t)}};a([u(aa({colorRequiredOnWrite:!0}))],Ea.prototype,"color",void 0),a([u({...Ys,json:{write:{isRequired:!0}}})],Ea.prototype,"size",void 0),a([u(hT)],Ea.prototype,"pattern",void 0),a([u({type:E6,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Ea.prototype,"patternCap",void 0),Ea=jm=a([_("esri.symbols.support.Symbol3DOutline")],Ea);var w0,uc;let wr=(uc=class extends xr{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new w0(e)}static fromSimpleFillSymbol(e){const r=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Xa({style:e.outline.style}):null,i={size:e.outline?.width??0,color:(e.outline?.color??Od).clone(),pattern:r};return r&&e.outline?.cap&&(i.patternCap=e.outline.cap),new w0({material:new Rd({color:(e.color??Oz).clone()}),pattern:e.style&&e.style!=="solid"?new ju({style:e.style}):null,outline:i})}},w0=uc,uc);a([te({Fill:"fill"},{readOnly:!0})],wr.prototype,"type",void 0),a([u({type:Rd,json:{write:!0}})],wr.prototype,"material",void 0),a([u(Pz)],wr.prototype,"pattern",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],wr.prototype,"castShadows",void 0),a([u({type:Ea,json:{write:!0}})],wr.prototype,"outline",void 0),a([u(dT)],wr.prototype,"edges",void 0),wr=w0=a([_("esri.symbols.FillSymbol3DLayer")],wr);var Vm;const Bz=Wt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Pa=Vm=class extends F{constructor(t){super(t)}readHref(t,e,r){return t?_h(t,r):e.dataURI}writeHref(t,e,r,i){t&&(b5(t)?e.dataURI=t:(e.href=Bd(t,i),Xc(e.href)&&(e.href=Hd(e.href))))}clone(){return new Vm({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};a([u({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Pa.prototype,"href",void 0),a([A("href")],Pa.prototype,"readHref",null),a([j("href",{href:{type:String},dataURI:{type:String}})],Pa.prototype,"writeHref",null),a([te(Bz)],Pa.prototype,"primitive",void 0),Pa=Vm=a([_("esri.symbols.support.IconSymbol3DLayerResource")],Pa);const eue="circle";let b0=class extends de(F){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};a([u({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],b0.prototype,"mode",void 0),b0=a([_("esri.symbols.support.OccludedVisibility")],b0);const mT=b0;var zm;let Vu=zm=class extends Z{constructor(t){super(t),this.x=0,this.y=0}clone(){return new zm({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};a([u({type:Number})],Vu.prototype,"x",void 0),a([u({type:Number})],Vu.prototype,"y",void 0),Vu=zm=a([_("esri.symbols.support.Symbol3DAnchorPosition2D")],Vu);var Um;let Up=Um=class extends F{constructor(t){super(t),this.color=new K([0,0,0,1]),this.size=qi(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new Um(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};a([u(aa({colorRequiredOnWrite:!0}))],Up.prototype,"color",void 0),a([u({...Ys,json:{write:{isRequired:!0}}})],Up.prototype,"size",void 0),Up=Um=a([_("esri.symbols.support.Symbol3DIconOutline")],Up);var uu,cc;let Nt=(cc=class extends xr{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new uu({anchor:this.anchor,anchorPosition:P(this.anchorPosition),enabled:this.enabled,material:P(this.material),outline:P(this.outline),resource:P(this.resource),angle:this.angle,size:this.size,occludedVisibility:P(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const r=e.color||Od,i=M7(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Od).clone()}:null;return new uu({size:e.size,angle:e.angle,resource:{primitive:Wz(()=>N.getLogger(this.prototype),e.style)},material:{color:r},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const r=!e.color||Rz(e.color)?Od:e.color,i=M7(e);return new uu({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:r.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new uu({resource:{href:w_({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},uu=cc,cc);function M7(t){const e="width"in t?t.width:t.size,r="height"in t?t.height:t.size,i=E7(t.xoffset),s=E7(t.yoffset);return(i||s)&&e&&r?{x:-i/e,y:s/r}:null}function E7(t){return isFinite(t)?t:0}a([u({type:fi,json:{write:!0}})],Nt.prototype,"material",void 0),a([u({type:Pa,json:{write:!0}})],Nt.prototype,"resource",void 0),a([te({Icon:"icon"},{readOnly:!0})],Nt.prototype,"type",void 0),a([u({...Ys,json:{write:{isRequired:!0}}})],Nt.prototype,"size",void 0),a([te({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Nt.prototype,"anchor",void 0),a([u({type:Vu,json:{type:[Number],read:{reader:t=>new Vu({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Nt.prototype,"anchorPosition",void 0),a([u({type:Up,json:{write:!0}})],Nt.prototype,"outline",void 0),a([u({type:Number,json:{write:!0,default:0}})],Nt.prototype,"angle",void 0),a([u({type:mT})],Nt.prototype,"occludedVisibility",void 0),Nt=uu=a([_("esri.symbols.IconSymbol3DLayer")],Nt);const Hz={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Wz(t,e){return Hz[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Zz=["begin","end","begin-end"],gT=["arrow","circle","square","diamond","cross","x"];let Fn=class extends de(F){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Fn.prototype,"type",void 0),a([u({type:Zz,json:{default:"begin-end",write:!0}})],Fn.prototype,"placement",void 0),a([u({type:gT,json:{default:"arrow",write:!0}})],Fn.prototype,"style",void 0),a([u({type:K,json:{type:[ve],default:null,write:!0}})],Fn.prototype,"color",void 0),Fn=a([_("esri.symbols.LineStyleMarker3D")],Fn);var _0,pc;let gr=(pc=class extends xr{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=qi(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new _0(e)}static fromSimpleLineSymbol(e){const r={enabled:!0,size:e.width??qi(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Xa({style:e.style}):null,material:new fi({color:(e.color||Od).clone()}),marker:e.marker?new Fn({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new _0(r)}},_0=pc,pc);a([u({type:fi,json:{write:!0}})],gr.prototype,"material",void 0),a([te({Line:"line"},{readOnly:!0})],gr.prototype,"type",void 0),a([u({type:fT,json:{write:!0,default:"miter"}})],gr.prototype,"join",void 0),a([u({type:E6,json:{write:!0,default:"butt"}})],gr.prototype,"cap",void 0),a([u({...Ys,json:{write:{isRequired:!0}}})],gr.prototype,"size",void 0),a([u(hT)],gr.prototype,"pattern",void 0),a([u({types:{key:"type",base:Fn,typeMap:{style:Fn}},json:{write:!0}})],gr.prototype,"marker",void 0),gr=_0=a([_("esri.symbols.LineSymbol3DLayer")],gr);var qm;const Jz=Wt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let qp=qm=class extends F{clone(){return new qm({href:this.href,primitive:this.primitive})}};a([u({type:String,json:{read:x5,write:Wd}})],qp.prototype,"href",void 0),a([te(Jz)],qp.prototype,"primitive",void 0),qp=qm=a([_("esri.symbols.support.ObjectSymbol3DLayerResource")],qp);const iue="sphere";var Gm;let qa=Gm=class extends Z{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Gm({x:this.x,y:this.y,z:this.z})}};a([u({type:Number})],qa.prototype,"x",void 0),a([u({type:Number})],qa.prototype,"y",void 0),a([u({type:Number})],qa.prototype,"z",void 0),qa=Gm=a([_("esri.symbols.support.Symbol3DAnchorPosition3D")],qa);var Bm,dc;let Ft=(dc=class extends xr{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new Bm({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},Bm=dc,dc);a([u({type:fi,json:{write:!0}})],Ft.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ft.prototype,"castShadows",void 0),a([u({type:qp,json:{write:!0}})],Ft.prototype,"resource",void 0),a([te({Object:"object"},{readOnly:!0})],Ft.prototype,"type",void 0),a([u({type:Number,json:{write:!0}})],Ft.prototype,"width",void 0),a([u({type:Number,json:{write:!0}})],Ft.prototype,"height",void 0),a([u({type:Number,json:{write:!0}})],Ft.prototype,"depth",void 0),a([te({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Ft.prototype,"anchor",void 0),a([u({type:qa,json:{type:[Number],read:{reader:t=>new qa({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ft.prototype,"anchorPosition",void 0),a([u({type:Number,json:{write:!0}})],Ft.prototype,"heading",void 0),a([u({type:Number,json:{write:!0}})],Ft.prototype,"tilt",void 0),a([u({type:Number,json:{write:!0}})],Ft.prototype,"roll",void 0),a([u({readOnly:!0})],Ft.prototype,"isPrimitive",null),Ft=Bm=a([_("esri.symbols.ObjectSymbol3DLayer")],Ft);var Hm,hc;let qt=(hc=class extends xr{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,r){return e??(r.height==null&&r.size!=null?r.size:void 0)}readHeight(e,r){return e??(r.width==null&&r.size!=null?r.size:void 0)}clone(){return new Hm({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},Hm=hc,hc);a([u({type:fi,json:{write:!0}})],qt.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qt.prototype,"castShadows",void 0),a([te({Path:"path"},{readOnly:!0})],qt.prototype,"type",void 0),a([u({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],qt.prototype,"profile",void 0),a([u({type:fT,nonNullable:!0,json:{write:!0,default:"miter"}})],qt.prototype,"join",void 0),a([u({type:Gz,nonNullable:!0,json:{write:!0,default:"butt"}})],qt.prototype,"cap",void 0),a([u({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],qt.prototype,"width",void 0),a([A("width",["width","size","height"])],qt.prototype,"readWidth",null),a([u({type:Number,json:{write:!0}})],qt.prototype,"height",void 0),a([A("height",["height","size","width"])],qt.prototype,"readHeight",null),a([u({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],qt.prototype,"anchor",void 0),a([u({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],qt.prototype,"profileRotation",void 0),qt=Hm=a([_("esri.symbols.PathSymbol3DLayer")],qt);const Qz=["none","underline","line-through"],Kz=["normal","italic","oblique"],Yz=["normal","lighter","bold","bolder"],vT={type:Number,cast:t=>{const e=Ur(t);return e===0?1:bi(e,.1,4)},nonNullable:!0},Xz=["left","right","center"],eU=["baseline","top","middle","bottom"],wT={type:Xz,nonNullable:!0},bT={type:eU,nonNullable:!0},sue=8;var Wm;let Li=Wm=class extends F{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return _e(t)}clone(){return new Wm({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};a([u({type:Qz,json:{default:"none",write:!0}})],Li.prototype,"decoration",void 0),a([u({type:String,json:{write:!0}})],Li.prototype,"family",void 0),a([u({type:Number,json:{write:{overridePolicy:(t,e,r)=>({enabled:!r||!r.textSymbol3D})}}})],Li.prototype,"size",void 0),a([xe("size")],Li.prototype,"castSize",null),a([u({type:Kz,json:{default:"normal",write:!0}})],Li.prototype,"style",void 0),a([u({type:Yz,json:{default:"normal",write:!0}})],Li.prototype,"weight",void 0),Li=Wm=a([_("esri.symbols.Font")],Li);var Zm;let zu=Zm=class extends F{constructor(){super(...arguments),this.color=new K([0,0,0,1]),this.size=0}clone(){const t={color:P(this.color),size:this.size};return new Zm(t)}};a([u(aa())],zu.prototype,"color",void 0),a([u(Ys)],zu.prototype,"size",void 0),zu=Zm=a([_("esri.symbols.support.Symbol3DHalo")],zu);let Cd=class extends de(F){constructor(e){super(e),this.color=null}};a([u(aa())],Cd.prototype,"color",void 0),Cd=a([_("esri.symbols.support.Symbol3DTextBackground")],Cd);var S0,yc;let vt=(yc=class extends xr{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,r,i,s){const n={...s,textSymbol3D:!0};r.font=e.write({},n),delete r.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new S0({enabled:this.enabled,font:P(this.font),halo:P(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:P(this.background),occludedVisibility:P(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new S0({font:e.font!=null?e.font.clone():new Li,halo:tU(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new fi({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Cd({color:e.backgroundColor.clone()}):null})}},S0=yc,yc);function tU(t,e){return t&&e!=null&&e>0?new zu({color:P(t),size:e}):null}a([u({type:Li,json:{write:!0}})],vt.prototype,"font",null),a([j("font")],vt.prototype,"writeFont",null),a([u({type:zu,json:{write:!0}})],vt.prototype,"halo",void 0),a([u({...wT,json:{default:"center",write:!0}})],vt.prototype,"horizontalAlignment",void 0),a([u({...vT,json:{default:1,write:!0}})],vt.prototype,"lineHeight",void 0),a([u({type:fi,json:{write:!0}})],vt.prototype,"material",void 0),a([u({type:Cd,json:{write:!0}})],vt.prototype,"background",void 0),a([u(Ys)],vt.prototype,"size",null),a([u({type:String,json:{write:!0}})],vt.prototype,"text",void 0),a([te({Text:"text"},{readOnly:!0})],vt.prototype,"type",void 0),a([u({...bT,json:{default:"baseline",write:!0}})],vt.prototype,"verticalAlignment",void 0),a([u({type:mT})],vt.prototype,"occludedVisibility",void 0),vt=S0=a([_("esri.symbols.TextSymbol3DLayer")],vt);var Jm,fc;let In=(fc=class extends xr{constructor(e){super(e),this.color=Qm.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Jm({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},Jm=fc,fc);a([u({type:K,nonNullable:!0,json:{type:[ve],write:(t,e,r)=>e[r]=t.toArray(1),default:()=>Qm.clone(),defaultEquals:t=>t.toCss(!0)===Qm.toCss(!0)}})],In.prototype,"color",void 0),a([te({Water:"water"},{readOnly:!0})],In.prototype,"type",void 0),a([u({type:["small","medium","large"],json:{write:!0,default:"medium"}})],In.prototype,"waterbodySize",void 0),a([u({type:Number,json:{write:!0,default:null}})],In.prototype,"waveDirection",void 0),a([u({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],In.prototype,"waveStrength",void 0),In=Jm=a([_("esri.symbols.WaterSymbol3DLayer")],In);const Qm=new K([0,119,190]);var Km;let Nn=Km=class extends Z{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new Km({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};a([u({type:String})],Nn.prototype,"name",void 0),a([u({type:String})],Nn.prototype,"styleUrl",void 0),a([u({type:String})],Nn.prototype,"styleName",void 0),a([u({type:D})],Nn.prototype,"portal",void 0),Nn=Km=a([_("esri.symbols.support.StyleOrigin")],Nn);var Ym;let Ld=Ym=class extends Z{constructor(){super(...arguments),this.url=""}clone(){return new Ym({url:this.url})}};a([u({type:String})],Ld.prototype,"url",void 0),Ld=Ym=a([_("esri.symbols.support.Thumbnail")],Ld);const _T={icon:Nt,object:Ft,line:gr,path:qt,fill:wr,extrude:Tn,text:vt,water:In},rU=U.ofType({base:xr,key:"type",typeMap:_T,errorContext:"symbol-layer"});let jr=class extends ot{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r?.type,s=i||U;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&N.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Bs(e,this._get("symbolLayers"))}readStyleOrigin(e,r,i){if(e.styleUrl&&e.name){const s=_h(e.styleUrl,i);return new Nn({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new Nn({portal:i?.portal||D.getDefault(),styleName:e.styleName,name:e.name});i?.messages&&i.messages.push(new vs("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,r,i,s){if(e.styleUrl&&e.name){let n=Bd(e.styleUrl,s);Xc(n)&&(n=Hd(n)),r.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&s?.portal&&!b_(e.portal.restUrl,s.portal.restUrl)?s?.messages&&s.messages.push(new vs("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof xr||e&&_T[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};a([u({json:{read:!1,write:!1}})],jr.prototype,"color",null),a([u({type:rU,nonNullable:!0,json:{write:!0}}),xe(N_)],jr.prototype,"symbolLayers",null),a([u({type:Nn})],jr.prototype,"styleOrigin",void 0),a([A("styleOrigin")],jr.prototype,"readStyleOrigin",null),a([j("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],jr.prototype,"writeStyleOrigin",null),a([u({type:Ld,json:{read:!1}})],jr.prototype,"thumbnail",void 0),a([u({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],jr.prototype,"type",void 0),jr=a([_("esri.symbols.Symbol3D")],jr);let Uu=class extends F{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};a([u({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Uu.prototype,"type",void 0),a([u({readOnly:!0})],Uu.prototype,"visible",void 0),Uu=a([_("esri.symbols.callouts.Callout3D")],Uu);var Xm;let x0=Xm=class extends F{constructor(t){super(t),this.color=new K("white")}clone(){return new Xm({color:P(this.color)})}};a([u(aa({colorRequiredOnWrite:!0}))],x0.prototype,"color",void 0),x0=Xm=a([_("esri.symbols.callouts.LineCallout3DBorder")],x0);const iU=x0;var e3;let Mn=e3=class extends Uu{constructor(t){super(t),this.type="line",this.color=new K([0,0,0,1]),this.size=qi(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new e3({color:P(this.color),size:this.size,border:P(this.border)})}};a([te({line:"line"})],Mn.prototype,"type",void 0),a([u(aa({colorRequiredOnWrite:!0}))],Mn.prototype,"color",void 0),a([u({...Ys,json:{write:{isRequired:!0}}})],Mn.prototype,"size",void 0),a([u({type:iU,json:{write:!0}})],Mn.prototype,"border",void 0),a([u({readOnly:!0})],Mn.prototype,"visible",null),Mn=e3=a([_("esri.symbols.callouts.LineCallout3D")],Mn);function P6(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function ST(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!P6(t)}function lue(t){return t.type==="point-3d"||t.type==="label-3d"}function uue(t){return t.horizontalAlignment==="center"}const xT={types:{key:"type",base:Uu,typeMap:{line:Mn}},json:{write:!0}};var t3;let Co=t3=class extends F{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new t3({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};a([u({...Ys,json:{write:{isRequired:!0}}})],Co.prototype,"screenLength",void 0),a([u({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Co.prototype,"minWorldLength",void 0),a([u({type:Number,json:{write:!0}})],Co.prototype,"maxWorldLength",void 0),Co=t3=a([_("esri.symbols.support.Symbol3DVerticalOffset")],Co);var $0;const $T=U.ofType({base:null,key:"type",typeMap:{text:vt}});let us=$0=class extends jr{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new $T,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return ST(this)}hasVisibleVerticalOffset(){return P6(this)}clone(){return new $0({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail),callout:P(this.callout),verticalOffset:P(this.verticalOffset)})}static fromTextSymbol(t){return new $0({symbolLayers:new U([vt.fromTextSymbol(t)])})}};a([u({type:Co,json:{write:!0}})],us.prototype,"verticalOffset",void 0),a([u(xT)],us.prototype,"callout",void 0),a([u({json:{read:!1,write:!1}})],us.prototype,"styleOrigin",void 0),a([u({type:$T})],us.prototype,"symbolLayers",void 0),a([te({LabelSymbol3D:"label-3d"},{readOnly:!0})],us.prototype,"type",void 0),us=$0=a([_("esri.symbols.LabelSymbol3D")],us);var T0;const TT=U.ofType({base:null,key:"type",typeMap:{line:gr,path:qt}}),sU=U.ofType({base:null,key:"type",typeMap:{line:gr,path:qt}});let gs=T0=class extends jr{constructor(t){super(t),this.symbolLayers=new TT,this.type="line-3d"}clone(){return new T0({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleLineSymbol(t){return new T0({symbolLayers:new U([gr.fromSimpleLineSymbol(t)])})}};a([u({type:TT,json:{type:sU}})],gs.prototype,"symbolLayers",void 0),a([te({LineSymbol3D:"line-3d"},{readOnly:!0})],gs.prototype,"type",void 0),gs=T0=a([_("esri.symbols.LineSymbol3D")],gs);var I0;const IT=U.ofType({base:null,key:"type",typeMap:{fill:wr}});let Un=I0=class extends jr{constructor(t){super(t),this.symbolLayers=new IT,this.type="mesh-3d"}clone(){return new I0({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleFillSymbol(t){return new I0({symbolLayers:new U([wr.fromSimpleFillSymbol(t)])})}};a([u({type:IT})],Un.prototype,"symbolLayers",void 0),a([te({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Un.prototype,"type",void 0),Un=I0=a([_("esri.symbols.MeshSymbol3D")],Un);let Gp=class extends ot{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};a([te({esriSLS:"simple-line"},{readOnly:!0})],Gp.prototype,"type",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Gp.prototype,"width",void 0),Gp=a([_("esri.symbols.LineSymbol")],Gp);var r3;let Is=r3=class extends F{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,r,i){e[r]=i?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,r,i){i?.origin==="web-map"||(e[r]=t)}clone(){return new r3({color:P(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};a([u({type:["begin","end","begin-end"],json:{write:!0}})],Is.prototype,"placement",void 0),a([te({"line-marker":"line-marker"},{readOnly:!0}),u({json:{origins:{"web-map":{write:!1}}}})],Is.prototype,"type",void 0),a([u({type:gT})],Is.prototype,"style",void 0),a([j("style")],Is.prototype,"writeStyle",null),a([u({type:K,value:null,json:{write:{allowNull:!0}}})],Is.prototype,"color",null),a([A("color")],Is.prototype,"readColor",null),a([j("color")],Is.prototype,"writeColor",null),Is=r3=a([_("esri.symbols.LineSymbolMarker")],Is);const nU=Is;var i3;const cy=new be({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let dt=i3=class extends Gp{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,r,i,s,n){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),r!=null&&(o.width=_e(r)),i!=null&&(o.cap=i),s!=null&&(o.join=s),n!=null&&(o.miterLimit=_e(n)),o}clone(){return new i3({color:P(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};a([te({esriSLS:"simple-line"},{readOnly:!0})],dt.prototype,"type",void 0),a([u({type:cy.apiValues,json:{read:cy.read,write:cy.write}})],dt.prototype,"style",void 0),a([u({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,r)=>({enabled:t!=="round"&&r?.origin==null})}}})],dt.prototype,"cap",void 0),a([u({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,r)=>({enabled:t!=="round"&&r?.origin==null})}}})],dt.prototype,"join",void 0),a([u({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":nU}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],dt.prototype,"marker",void 0),a([u({type:Number,json:{read:!1,write:!1}})],dt.prototype,"miterLimit",void 0),dt=i3=a([_("esri.symbols.SimpleLineSymbol")],dt);let qu=class extends ot{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};a([u({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":dt}},json:{default:null,write:!0}})],qu.prototype,"outline",void 0),a([u({type:["simple-fill","picture-fill"],readOnly:!0})],qu.prototype,"type",void 0),qu=a([_("esri.symbols.FillSymbol")],qu);function oU(t,e,r){return e.imageData?w_({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):MT(e.url,r)}function MT(t,e){if(!Xc(t)){const r=lU(e);if(r)return vl(r,"images",t)}return _h(t,e)}function aU(t,e,r,i){if(b5(t)){const s=__(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,r&&r.imageData===e.imageData&&r.url&&Wd(r.url,e,"url",i)}else Wd(t,e,"url",i)}const ET={json:{read:{source:["imageData","url"],reader:oU},write:{writer(t,e,r,i){aU(t,e,this.source,i)}}}},PT={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,r){const i={};return e.imageData&&(i.imageData=e.imageData),e.contentType&&(i.contentType=e.contentType),e.url&&(i.url=MT(e.url,r)),i}}}};function lU(t){if(!t)return null;const{origin:e,layer:r}=t;if(e!=="service"&&e!=="portal-item")return null;const i=r?.type;return i==="feature"||i==="stream"?r.parsedUrl?.path:i==="map-image"||i==="tile"?t.url?.path:null}var s3;let Dr=s3=class extends qu{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,r,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),r!=null&&(s.width=_e(r)),i!=null&&(s.height=_e(i)),s}clone(){const t=new s3({color:P(this.color),height:this.height,outline:P(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",P(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};a([te({esriPFS:"picture-fill"},{readOnly:!0})],Dr.prototype,"type",void 0),a([u(ET)],Dr.prototype,"url",void 0),a([u({type:Number,json:{write:!0}})],Dr.prototype,"xscale",void 0),a([u({type:Number,json:{write:!0}})],Dr.prototype,"yscale",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Dr.prototype,"width",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Dr.prototype,"height",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Dr.prototype,"xoffset",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Dr.prototype,"yoffset",void 0),a([u(PT)],Dr.prototype,"source",void 0),Dr=s3=a([_("esri.symbols.PictureFillSymbol")],Dr);let En=class extends ot{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};a([u({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],En.prototype,"angle",void 0),a([u({type:["simple-marker","picture-marker"],readOnly:!0})],En.prototype,"type",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],En.prototype,"xoffset",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],En.prototype,"yoffset",void 0),a([u({cast:t=>t==="auto"?t:Ur(_e(t)),json:{write:!0}})],En.prototype,"size",void 0),En=a([_("esri.symbols.MarkerSymbol")],En);var n3;let mr=n3=class extends En{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const i={};return t&&(i.url=t),e!=null&&(i.width=_e(e)),r!=null&&(i.height=_e(r)),i}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new n3({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",P(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};a([u({json:{write:!1}})],mr.prototype,"color",void 0),a([te({esriPMS:"picture-marker"},{readOnly:!0})],mr.prototype,"type",void 0),a([u(ET)],mr.prototype,"url",void 0),a([u(PT)],mr.prototype,"source",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],mr.prototype,"height",void 0),a([A("height",["height","size"])],mr.prototype,"readHeight",null),a([u({type:Number,cast:_e,json:{write:!0}})],mr.prototype,"width",void 0),a([u({json:{write:!1}})],mr.prototype,"size",void 0),mr=n3=a([_("esri.symbols.PictureMarkerSymbol")],mr);var Oa;const OT=U.ofType({base:null,key:"type",typeMap:{icon:Nt,object:Ft,text:vt}});let _r=Oa=class extends jr{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new OT,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return ST(this)}hasVisibleVerticalOffset(){return P6(this)}clone(){return new Oa({verticalOffset:P(this.verticalOffset),callout:P(this.callout),styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Oa({symbolLayers:new U([Nt.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Oa({symbolLayers:new U([Nt.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const r=t.data.symbol;return new Oa(r?.callout?{symbolLayers:new U([Nt.fromCIMSymbol(t)]),callout:new Mn({size:.5,color:new K([0,0,0])}),verticalOffset:new Co({screenLength:40})}:{symbolLayers:new U([Nt.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Oa({symbolLayers:new U([vt.fromTextSymbol(t)])})}};a([u({type:Co,json:{write:!0}})],_r.prototype,"verticalOffset",void 0),a([u(xT)],_r.prototype,"callout",void 0),a([u({type:OT,json:{origins:{"web-scene":{write:!0}}}})],_r.prototype,"symbolLayers",void 0),a([te({PointSymbol3D:"point-3d"},{readOnly:!0})],_r.prototype,"type",void 0),_r=Oa=a([_("esri.symbols.PointSymbol3D")],_r);var Bp;const RT=U.ofType({base:null,key:"type",typeMap:{extrude:Tn,fill:wr,icon:Nt,line:gr,object:Ft,text:vt,water:In}});let ji=Bp=class extends jr{constructor(t){super(t),this.symbolLayers=new RT,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Q9(N.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Q9(N.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Ui(()=>this.symbolLayers,"after-add",({item:e})=>t(e),ht))}clone(){return new Bp({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromJSON(t){const e=new Bp;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),i=e.symbolLayers.at(1);!i.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:i.material!=null?i.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new Bp({symbolLayers:new U([wr.fromSimpleFillSymbol(t)])})}};a([u({type:RT,json:{write:!0}})],ji.prototype,"symbolLayers",void 0),a([te({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],ji.prototype,"type",void 0),ji=Bp=a([_("esri.symbols.PolygonSymbol3D")],ji);var o3;const py=new be({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let hi=o3=class extends qu{constructor(...t){super(...t),this.color=new K([0,0,0,.25]),this.outline=new dt,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,r){if(t&&typeof t!="string")return t;const i={};return t&&(i.style=t),e&&(i.outline=e),r&&(i.color=r),i}clone(){return new o3({color:P(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};a([u()],hi.prototype,"color",void 0),a([u()],hi.prototype,"outline",void 0),a([te({esriSFS:"simple-fill"},{readOnly:!0})],hi.prototype,"type",void 0),a([u({type:py.apiValues,json:{read:py.read,write:py.write}})],hi.prototype,"style",void 0),hi=o3=a([_("esri.symbols.SimpleFillSymbol")],hi);var a3;const dy=new be({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let bt=a3=class extends En{constructor(...t){super(...t),this.color=new K([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new dt}normalizeCtorArgs(t,e,r,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=_e(e)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new a3({angle:this.angle,color:P(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};a([u()],bt.prototype,"color",void 0),a([j("color")],bt.prototype,"writeColor",null),a([te({esriSMS:"simple-marker"},{readOnly:!0})],bt.prototype,"type",void 0),a([u()],bt.prototype,"size",void 0),a([u({type:dy.apiValues,json:{read:dy.read,write:dy.write}})],bt.prototype,"style",void 0),a([u({type:String,json:{write:!0}})],bt.prototype,"path",null),a([u({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":dt}},json:{default:null,write:!0}})],bt.prototype,"outline",void 0),bt=a3=a([_("esri.symbols.SimpleMarkerSymbol")],bt);const CT=Object.freeze(Object.defineProperty({__proto__:null,get default(){return bt}},Symbol.toStringTag,{value:"Module"}));var l3;let Pe=l3=class extends ot{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Li,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,r){if(t&&typeof t!="string")return t;const i={};return t&&(i.text=t),e&&(i.font=e),r&&(i.color=r),i}writeLineWidth(t,e,r,i){i&&typeof i!="string"?i.origin:e[r]=t}castLineWidth(t){return _e(t)}writeLineHeight(t,e,r,i){i&&typeof i!="string"?i.origin:e[r]=t}clone(){return new l3({angle:this.angle,backgroundColor:P(this.backgroundColor),borderLineColor:P(this.borderLineColor),borderLineSize:this.borderLineSize,color:P(this.color),font:this.font&&this.font.clone(),haloColor:P(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};a([u({type:K,json:{write:!0}})],Pe.prototype,"backgroundColor",void 0),a([u({type:K,json:{write:!0}})],Pe.prototype,"borderLineColor",void 0),a([u({type:Number,json:{write:!0},cast:_e})],Pe.prototype,"borderLineSize",void 0),a([u({type:Li,json:{write:!0}})],Pe.prototype,"font",void 0),a([u({...wT,json:{write:!0}})],Pe.prototype,"horizontalAlignment",void 0),a([u({type:Boolean,json:{write:!0}})],Pe.prototype,"kerning",void 0),a([u({type:K,json:{write:!0}})],Pe.prototype,"haloColor",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Pe.prototype,"haloSize",void 0),a([u({type:Boolean,json:{write:!0}})],Pe.prototype,"rightToLeft",void 0),a([u({type:Boolean,json:{write:!0}})],Pe.prototype,"rotated",void 0),a([u({type:String,json:{write:!0}})],Pe.prototype,"text",void 0),a([te({esriTS:"text"},{readOnly:!0})],Pe.prototype,"type",void 0),a([u({...bT,json:{write:!0}})],Pe.prototype,"verticalAlignment",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Pe.prototype,"xoffset",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Pe.prototype,"yoffset",void 0),a([u({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Pe.prototype,"angle",void 0),a([u({type:Number,json:{write:!0}})],Pe.prototype,"width",void 0),a([u({type:Number})],Pe.prototype,"lineWidth",void 0),a([j("lineWidth")],Pe.prototype,"writeLineWidth",null),a([xe("lineWidth")],Pe.prototype,"castLineWidth",null),a([u(vT)],Pe.prototype,"lineHeight",void 0),a([j("lineHeight")],Pe.prototype,"writeLineHeight",null),Pe=l3=a([_("esri.symbols.TextSymbol")],Pe);var u3;let Gt=u3=class extends ot{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:D.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new u3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){kR(N.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new I("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,r=e?this._fetchCacheKey:null;if(e!=null){const o=r&&e.get(r);if(o)return o.clone()}const{resolveWebStyleSymbol:i}=await R(()=>import("./money-tides-webStyleSymbolUtils-DXO_Lg5l.js"),__vite__mapDeps([197,198,3,4,1,2,5,6,7,12,13,14]));Ce(t);const s=i(this,{portal:this.portal},t);s.catch(o=>{N.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const n=await s;return e?.set(r,n.clone()),n}};a([u({json:{write:!1}})],Gt.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],Gt.prototype,"styleName",void 0),a([u({type:D,json:{write:!1}})],Gt.prototype,"portal",void 0),a([u({type:String,json:{read:x5,write:Wd}})],Gt.prototype,"styleUrl",void 0),a([u({type:Ld,json:{read:!1}})],Gt.prototype,"thumbnail",void 0),a([u({type:String,json:{write:!0}})],Gt.prototype,"name",void 0),a([te({styleSymbolReference:"web-style"},{readOnly:!0})],Gt.prototype,"type",void 0),a([u()],Gt.prototype,"_fetchCacheKey",null),Gt=u3=a([_("esri.symbols.WebStyleSymbol")],Gt);function hue(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function O6(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const jo={base:ot,key:"type",typeMap:{"simple-fill":hi,"picture-fill":Dr,"picture-marker":mr,"simple-line":dt,"simple-marker":bt,text:Pe,"label-3d":us,"line-3d":gs,"mesh-3d":Un,"point-3d":_r,"polygon-3d":ji,"web-style":Gt,cim:sr},errorContext:"symbol"},yue={base:ot,key:"type",typeMap:{"picture-marker":mr,"simple-marker":bt,"point-3d":_r,cim:sr},errorContext:"symbol"},fue={base:ot,key:"type",typeMap:{"simple-line":dt,"line-3d":gs,cim:sr},errorContext:"symbol"},mue={base:ot,key:"type",typeMap:{"simple-fill":hi,"picture-fill":Dr,"polygon-3d":ji,cim:sr},errorContext:"symbol"},uU={base:ot,key:"type",typeMap:{"picture-marker":mr,"simple-marker":bt,text:Pe,"web-style":Gt,cim:sr},errorContext:"symbol"},cU=Sh({types:jo}),LT={base:ot,key:"type",typeMap:{"simple-fill":hi,"picture-fill":Dr,"picture-marker":mr,"simple-line":dt,"simple-marker":bt,text:Pe,"line-3d":gs,"mesh-3d":Un,"point-3d":_r,"polygon-3d":ji,"web-style":Gt,cim:sr},errorContext:"symbol"},pU={base:ot,key:"type",typeMap:{text:Pe,"label-3d":us},errorContext:"symbol"},P7={base:ot,key:"type",typeMap:{"line-3d":gs,"mesh-3d":Un,"point-3d":_r,"polygon-3d":ji,"web-style":Gt,cim:sr},errorContext:"symbol"},dU={base:ot,key:"type",typeMap:{"label-3d":us},errorContext:"symbol"},kT=fl(jo);var c3;function hU(t){if(!t)return null;const e={};for(const r in t){const i=Xo(t[r]);i&&(e[r]=i)}return Object.keys(e).length!==0?e:null}function yU(t){if(t==null)return null;const e={};for(const r in t){const i=t[r];i&&(e[r]=i.toJSON())}return Object.keys(e).length!==0?e:null}var mc;let He=(mc=class extends de(F){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:AR(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&FR(N.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const r=this._get("aggregateGeometries");JSON.stringify(r)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const r=this._get("attributes");r!==e&&(this._set("attributes",e),this._notifyLayer("attributes",r,e))}set geometry(e){const r=this._get("geometry");r!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",r,e))}set popupTemplate(e){const r=this._get("popupTemplate");r!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",r,e))}set symbol(e){const r=this._get("symbol");r!==e&&(this._set("symbol",e),this._notifyLayer("symbol",r,e))}get version(){return this._version}set visible(e){const r=this._get("visible");r!==e&&(this._set("visible",e),this._notifyLayer("visible",r,e))}cloneShallow(){return new c3({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=_z(this.origin);if(r)return r.popupTemplate??(e?r.defaultPopupTemplate:null)??null;const i=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const s of[i,this.sourceLayer,this.layer])if(s&&typeof s=="object"){if("popupTemplate"in s&&s.popupTemplate)return s.popupTemplate;if(e&&"defaultPopupTemplate"in s&&s.defaultPopupTemplate!=null)return s.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,r){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=r,this._notifyLayer("attributes",i,r,e)}else this.attributes={[e]:r}}getObjectId(){const e=$7(this.origin);if(e)return T7(this,e);const r=this.sourceLayer??this.layer;return r?T7(this,r):null}getGlobalId(){const e=$7(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const r=this.sourceLayer??this.layer;return r&&"globalIdField"in r&&r.globalIdField?this.getAttribute(r.globalIdField):null}toJSON(){return{aggregateGeometries:yU(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:m5(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:r}=this;if(r?.type==="mesh"){const i={origin:r.origin,transform:r.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,r,i,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:r,newValue:i};e==="origin-transform"&&(n.action=s),e==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([zi(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:r})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===r||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=r,this.notifyMeshTransformChanged())}),zi(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,r)=>e===r,sync:!0})])}},c3=mc,mc);a([u({value:null,json:{read:hU}})],He.prototype,"aggregateGeometries",null),a([u({value:null})],He.prototype,"attributes",null),a([u({value:null,types:Ah,json:{read:Xo}})],He.prototype,"geometry",null),a([u({type:Boolean})],He.prototype,"isAggregate",void 0),a([u({clonable:!1})],He.prototype,"layer",void 0),a([u({clonable:"reference"})],He.prototype,"origin",void 0),a([u({type:oa,value:null})],He.prototype,"popupTemplate",null),a([u({clonable:"reference"})],He.prototype,"sourceLayer",void 0),a([u({value:null,types:jo})],He.prototype,"symbol",null),a([u({clonable:!1,json:{read:!1,write:!1}})],He.prototype,"_version",void 0),a([u({type:Boolean,value:!0})],He.prototype,"visible",null),He=c3=a([_("esri.Graphic")],He);const AT=Object.freeze(Object.defineProperty({__proto__:null,get default(){return He}},Symbol.toStringTag,{value:"Module"}));let ll=class extends Td{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};a([O5({Type:He,ensureType:Yr(He)})],ll.prototype,"itemType",void 0),ll=a([_("esri.support.GraphicsCollection")],ll);let hn=class extends Z{constructor(e){super(e),this.view=null,this.baseLayerViews=new U,this.groundLayerViews=new U,this.referenceLayerViews=new U,this._loadingHandle=X(()=>this.view?.map?.basemap,r=>{r&&r.load().catch(()=>{})},lr)}destroy(){this._set("view",null),this._loadingHandle=Je(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.groundLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};a([u({constructOnly:!0})],hn.prototype,"view",void 0),a([u({readOnly:!0})],hn.prototype,"baseLayerViews",void 0),a([u({readOnly:!0})],hn.prototype,"groundLayerViews",void 0),a([u({readOnly:!0})],hn.prototype,"referenceLayerViews",void 0),a([u({readOnly:!0})],hn.prototype,"suspended",null),a([u({type:Boolean,readOnly:!0})],hn.prototype,"updating",null),hn=a([_("esri.views.BasemapView")],hn);const fU=hn;let ri=class extends Z{constructor(e){super(e),this.factor=1.5,this.offset=Et(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};a([u({type:Number})],ri.prototype,"factor",void 0),a([u({nonNullable:!0})],ri.prototype,"offset",void 0),a([u()],ri.prototype,"position",void 0),a([u({type:Number,range:{min:0}})],ri.prototype,"size",void 0),a([u()],ri.prototype,"maskUrl",void 0),a([u()],ri.prototype,"maskEnabled",void 0),a([u()],ri.prototype,"overlayUrl",void 0),a([u()],ri.prototype,"overlayEnabled",void 0),a([u({readOnly:!0})],ri.prototype,"version",null),a([u({type:Boolean})],ri.prototype,"visible",void 0),ri=a([_("esri.views.Magnifier")],ri);const FT=ri;var p3;let el=p3=class extends F{constructor(t){super(t),this.name=null,this.code=null}clone(){return new p3({name:this.name,code:this.code})}};a([u({type:String,json:{write:{isRequired:!0}}})],el.prototype,"name",void 0),a([u({type:[String,Number],json:{write:{isRequired:!0}}})],el.prototype,"code",void 0),el=p3=a([_("esri.layers.support.CodedValue")],el);const mU=new be({inherited:"inherited",codedValue:"coded-value",range:"range"});let Vo=class extends F{constructor(e){super(e),this.name=null,this.type=null}};a([u({type:String,json:{write:!0}})],Vo.prototype,"name",void 0),a([te(mU),u({json:{write:{isRequired:!0}}})],Vo.prototype,"type",void 0),Vo=a([_("esri.layers.support.Domain")],Vo);var d3,gc;let zo=(gc=class extends Vo{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let r=null;if(this.codedValues){const i=String(e);this.codedValues.some(s=>(String(s.code)===i&&(r=s.name),!!r))}return r}clone(){return new d3({codedValues:P(this.codedValues),name:this.name})}},d3=gc,gc);a([u({type:[el],json:{write:{isRequired:!0}}})],zo.prototype,"codedValues",void 0),a([te({codedValue:"coded-value"})],zo.prototype,"type",void 0),zo=d3=a([_("esri.layers.support.CodedValueDomain")],zo);var h3,vc;let kd=(vc=class extends Vo{constructor(e){super(e),this.type="inherited"}clone(){return new h3}},h3=vc,vc);a([te({inherited:"inherited"})],kd.prototype,"type",void 0),kd=h3=a([_("esri.layers.support.InheritedDomain")],kd);var y3,wc;let Ga=(wc=class extends Vo{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new y3({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},y3=wc,wc);a([u({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,r){e[r]=[this.minValue||0,t]},isRequired:!0}}})],Ga.prototype,"maxValue",void 0),a([u({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,r){e[r]=[t,this.maxValue||0]},isRequired:!0}}})],Ga.prototype,"minValue",void 0),a([te({range:"range"})],Ga.prototype,"type",void 0),Ga=y3=a([_("esri.layers.support.RangeDomain")],Ga);const NT={key:"type",base:Vo,typeMap:{range:Ga,"coded-value":zo,inherited:kd}};function d4(t){if(!t?.type)return null;switch(t.type){case"range":return Ga.fromJSON(t);case"codedValue":return zo.fromJSON(t);case"inherited":return kd.fromJSON(t)}return null}const gU=new be({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var f3;const vU=new be({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var bc;let Tt=(bc=class extends F{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return i?.value??null}readValueType(e,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return i?vU.fromJSON(i.fieldValueType):null}clone(){return new f3({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},f3=bc,bc);a([u({type:String,json:{write:!0}})],Tt.prototype,"alias",void 0),a([u({type:[String,Number],json:{write:{allowNull:!0}}})],Tt.prototype,"defaultValue",void 0),a([u()],Tt.prototype,"description",void 0),a([A("description")],Tt.prototype,"readDescription",null),a([u({types:NT,json:{read:{reader:d4},write:!0}})],Tt.prototype,"domain",void 0),a([u({type:Boolean,json:{write:!0}})],Tt.prototype,"editable",void 0),a([u({type:ve,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Tt.prototype,"length",void 0),a([u({type:String,json:{write:!0}})],Tt.prototype,"name",void 0),a([u({type:Boolean,json:{write:!0}})],Tt.prototype,"nullable",void 0),a([te(gU)],Tt.prototype,"type",void 0),a([u()],Tt.prototype,"valueType",void 0),a([A("valueType",["description"])],Tt.prototype,"readValueType",null),a([u({type:Boolean,json:{read:!1}})],Tt.prototype,"visible",void 0),Tt=f3=a([_("esri.layers.support.Field")],Tt);var m3;let zn=m3=class extends F{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new m3({mapLayerId:t,gdbVersion:e})}};a([te({mapLayer:"map-layer"}),u({json:{write:{isRequired:!0}}})],zn.prototype,"type",void 0),a([u({type:ve,json:{write:{isRequired:!0}}})],zn.prototype,"mapLayerId",void 0),a([u({type:String,json:{write:!0}})],zn.prototype,"gdbVersion",void 0),zn=m3=a([_("esri.layers.support.source.MapLayerSource")],zn);var g3;let yn=g3=class extends F{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:r,spatialReference:i,geometryType:s}=this,n={workspaceId:t,query:e,oidFields:r,spatialReference:i?.clone()??void 0,geometryType:s};return new g3(n)}};a([te({queryTable:"query-table"}),u({json:{write:{isRequired:!0}}})],yn.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],yn.prototype,"workspaceId",void 0),a([u({type:String,json:{write:!0}})],yn.prototype,"query",void 0),a([u({type:String,json:{write:!0}})],yn.prototype,"oidFields",void 0),a([u({type:B,json:{write:!0}})],yn.prototype,"spatialReference",void 0),a([te(h2)],yn.prototype,"geometryType",void 0),yn=g3=a([_("esri.layers.support.source.QueryTableDataSource")],yn);var v3;let cu=v3=class extends F{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new v3({workspaceId:t,dataSourceName:e})}};a([te({raster:"raster"}),u({json:{write:{isRequired:!0}}})],cu.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],cu.prototype,"dataSourceName",void 0),a([u({type:String,json:{write:!0}})],cu.prototype,"workspaceId",void 0),cu=v3=a([_("esri.layers.support.source.RasterDataSource")],cu);var w3;let Ra=w3=class extends F{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:r}=this;return new w3({workspaceId:t,gdbVersion:e,dataSourceName:r})}};a([te({table:"table"}),u({json:{write:{isRequired:!0}}})],Ra.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Ra.prototype,"workspaceId",void 0),a([u({type:String,json:{write:!0}})],Ra.prototype,"gdbVersion",void 0),a([u({type:String,json:{write:!0}})],Ra.prototype,"dataSourceName",void 0),Ra=w3=a([_("esri.layers.support.source.TableDataSource")],Ra);var b3,_3;const wU=Wt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ii=b3=class extends F{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,r){return O7()(t,e,r)}castLeftTableSource(t){return fl(S3(),t)}readRightTableSource(t,e,r){return O7()(t,e,r)}castRightTableSource(t){return fl(S3(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:r,rightTableSource:i,joinType:s}=this,n={leftTableKey:t,rightTableKey:e,leftTableSource:r?.clone()??void 0,rightTableSource:i?.clone()??void 0,joinType:s};return new b3(n)}};a([te({joinTable:"join-table"}),u({json:{write:{isRequired:!0}}})],ii.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],ii.prototype,"leftTableKey",void 0),a([u({type:String,json:{write:!0}})],ii.prototype,"rightTableKey",void 0),a([u({json:{write:!0}})],ii.prototype,"leftTableSource",void 0),a([A("leftTableSource")],ii.prototype,"readLeftTableSource",null),a([xe("leftTableSource")],ii.prototype,"castLeftTableSource",null),a([u({json:{write:!0}})],ii.prototype,"rightTableSource",void 0),a([A("rightTableSource")],ii.prototype,"readRightTableSource",null),a([xe("rightTableSource")],ii.prototype,"castRightTableSource",null),a([te(wU)],ii.prototype,"joinType",void 0),ii=b3=a([_("esri.layers.support.source.JoinTableDataSource")],ii);let hy=null;function O7(){return hy||(hy=Sh({types:S3()})),hy}let yy=null;function S3(){return yy||(yy={key:"type",base:null,typeMap:{"data-layer":br,"map-layer":zn}}),yy}const bU={key:"type",base:null,typeMap:{"join-table":ii,"query-table":yn,raster:cu,table:Ra}};var _c;let br=(_c=class extends F{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:r}=this;return new _3({fields:e,dataSource:r})}},_3=_c,_c);a([te({dataLayer:"data-layer"}),u({json:{write:{isRequired:!0}}})],br.prototype,"type",void 0),a([u({type:[Tt],json:{write:!0}})],br.prototype,"fields",void 0),a([u({types:bU,json:{write:!0}})],br.prototype,"dataSource",void 0),br=_3=a([_("esri.layers.support.source.DataLayerSource")],br),br.from=Yr(br);let Ca=class extends de(F){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};a([u({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Ca.prototype,"onFields",void 0),a([u({type:String,json:{write:!0}})],Ca.prototype,"operator",void 0),a([u({type:String,json:{write:!0}})],Ca.prototype,"searchTerm",void 0),a([u({type:String,json:{write:!0}})],Ca.prototype,"searchType",void 0),Ca=a([_("esri.rest.support.FullTextSearch")],Ca);const _U=Ca;var x3;const R7=new be({upperLeft:"upper-left",lowerLeft:"lower-left"});let Eo=x3=class extends F{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new x3(P({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};a([u({type:ue,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Eo.prototype,"extent",void 0),a([u({type:["view","edit"],json:{write:!0}})],Eo.prototype,"mode",void 0),a([u({type:String,json:{read:R7.read,write:R7.write}})],Eo.prototype,"originPosition",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Eo.prototype,"tolerance",void 0),Eo=x3=a([_("esri.rest.support.QuantizationParameters")],Eo);const SU=t=>{const e=t;let r=class extends e{};return r=a([_("esri.rest.support.QueryMixin")],r),r},xU=new be({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var $3;const C7=new be({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let es=$3=class extends F{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=P(t))}clone(){return new $3({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:P(this.statisticParameters)})}};a([u({type:Number,json:{write:!0}})],es.prototype,"maxPointCount",void 0),a([u({type:Number,json:{write:!0}})],es.prototype,"maxRecordCount",void 0),a([u({type:Number,json:{write:!0}})],es.prototype,"maxVertexCount",void 0),a([u({type:String,json:{write:!0}})],es.prototype,"onStatisticField",void 0),a([u({type:String,json:{write:!0}})],es.prototype,"outStatisticFieldName",void 0),a([u({type:String,json:{read:{source:"statisticType",reader:C7.read},write:{target:"statisticType",writer:C7.write}}})],es.prototype,"statisticType",void 0),a([u({type:Object})],es.prototype,"statisticParameters",void 0),a([j("statisticParameters")],es.prototype,"writeStatisticParameters",null),es=$3=a([_("esri.rest.support.StatisticDefinition")],es);var M0;const $U=new be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var pl;let W=(pl=class extends SU(F){static from(e){return Cc(M0,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,r){r.historicMoment=e&&e.getTime()}writeParameterValues(e,r){if(e){const i={};for(const s in e){const n=e[s];Array.isArray(n)?i[s]=n.map(o=>o instanceof Date?o.getTime():o):n instanceof Date?i[s]=n.getTime():i[s]=n}r.parameterValues=i}}writeStart(e,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,r.where="1=1"}writeWhere(e,r){r.where=e||"1=1"}clone(){return new M0(P({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},M0=pl,pl.MAX_MAX_RECORD_COUNT_FACTOR=5,pl);a([u({json:{write:!0}})],W.prototype,"aggregateIds",void 0),a([u({type:Boolean,json:{write:!0}})],W.prototype,"cacheHint",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"compactGeometryEnabled",void 0),a([u({json:{write:!0}})],W.prototype,"datumTransformation",void 0),a([xe("datumTransformation")],W.prototype,"castDatumTransformation",null),a([u({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"defaultSpatialReferenceEnabled",void 0),a([u({type:Number,json:{write:!0}})],W.prototype,"distance",void 0),a([u({type:br,json:{write:!0}})],W.prototype,"dynamicDataSource",void 0),a([u({type:String,json:{write:!0}})],W.prototype,"formatOf3DObjects",void 0),a([u({type:[_U],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],W.prototype,"fullText",void 0),a([u({type:String,json:{write:!0}})],W.prototype,"gdbVersion",void 0),a([u({types:Ah,json:{read:Xo,write:!0}})],W.prototype,"geometry",void 0),a([u({type:Number,json:{write:!0}})],W.prototype,"geometryPrecision",void 0),a([u({type:[String],json:{write:!0}})],W.prototype,"groupByFieldsForStatistics",void 0),a([u({type:String,json:{write:!0}})],W.prototype,"having",void 0),a([u({type:Date})],W.prototype,"historicMoment",void 0),a([j("historicMoment")],W.prototype,"writeHistoricMoment",null),a([u({type:Number,json:{write:!0}})],W.prototype,"maxAllowableOffset",void 0),a([u({type:Number,cast:t=>t<1?1:t>W.MAX_MAX_RECORD_COUNT_FACTOR?W.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],W.prototype,"maxRecordCountFactor",void 0),a([u({type:["xyFootprint"],json:{write:!0}})],W.prototype,"multipatchOption",void 0),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],W.prototype,"num",void 0),a([u({json:{write:!0}})],W.prototype,"objectIds",void 0),a([u({type:[String],json:{write:!0}})],W.prototype,"orderByFields",void 0),a([u({type:[String],json:{write:!0}})],W.prototype,"outFields",void 0),a([u({type:B,json:{name:"outSR",write:!0}})],W.prototype,"outSpatialReference",void 0),a([u({type:[es],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],W.prototype,"outStatistics",void 0),a([u({json:{write:!0}})],W.prototype,"parameterValues",void 0),a([j("parameterValues")],W.prototype,"writeParameterValues",null),a([u({type:ne,json:{write:!0}})],W.prototype,"pixelSize",void 0),a([u({type:Eo,json:{write:!0}})],W.prototype,"quantizationParameters",void 0),a([u({type:[Object],json:{write:!0}})],W.prototype,"rangeValues",void 0),a([u({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],W.prototype,"relationParameter",void 0),a([u({type:String,json:{write:!0}})],W.prototype,"resultType",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"returnCentroid",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"returnDistinctValues",void 0),a([u({type:Boolean,json:{default:!0,write:!0}})],W.prototype,"returnExceededLimitFeatures",void 0),a([u({type:Boolean,json:{write:!0}})],W.prototype,"returnGeometry",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"returnQueryGeometry",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"returnM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],W.prototype,"returnZ",void 0),a([u({type:Boolean,json:{write:!0}})],W.prototype,"returnTrueCurves",void 0),a([u({type:B,json:{write:!0}})],W.prototype,"sourceSpatialReference",void 0),a([te(xU,{ignoreUnknown:!1,name:"spatialRel"})],W.prototype,"spatialRelationship",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],W.prototype,"start",void 0),a([j("start"),j("num")],W.prototype,"writeStart",null),a([u({type:String,json:{write:!0}})],W.prototype,"sqlFormat",void 0),a([u({type:String,json:{write:!0}})],W.prototype,"text",void 0),a([u({type:it,json:{write:!0}})],W.prototype,"timeExtent",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"timeReferenceUnknownClient",void 0),a([te($U,{ignoreUnknown:!1}),u({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],W.prototype,"units",void 0),a([u({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],W.prototype,"where",void 0),a([j("where")],W.prototype,"writeWhere",null),W=M0=a([_("esri.rest.support.Query")],W);function yo(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Pi=class extends N2{constructor(e){super(e),this._selectionMap=new Bu,this._sources=new U,this._trashCan=[],this._layerEditHandles=new U,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([X(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),X(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},lr),Ui(()=>this.sources,"change",e=>{const r=this._selectionMap,i=[];for(const s of e.removed){const n=r.get(s);n&&(r.delete(s),n.highlightHandle?.remove(),i.push({layer:s,selection:[],added:[],removed:[...n.selection]}))}this._refreshListeners(),i.length&&this._onSelectionChange(i)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(Je)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[r,i]=e;return{layer:r,selection:[...i.selection]}})}get count(){let e=0;for(const r of this._selectionMap.values())e+=r.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Bs(e,this._sources)}syncSources(){const e=new Set,r=this.view?.map;if(!r)return;const i=s=>{vk(s)?(s.layers?.forEach(i),s.tables?.forEach(i)):gk(s)?(s.sublayers?.forEach(i),s.subtables?.forEach(i)):S8(s)?s.sublayers?.forEach(i):yo(s)&&e.add(s)};r.allLayers.forEach(i),r.allTables.forEach(i),this.sources=[...e]}async getSelectedFeatures(e,r={},i="layerView"){const{view:s,selections:n}=this;if(!s&&i==="layerView")return N.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e?.length?n.filter(l=>e.includes(l.layer)):n).map(async l=>{const{layer:c,selection:d}=l;if(!d.length)return;const h=tu(c)?c.parent:c;if(h!=null){if(s&&i==="layerView"&&!L7(h)&&k7(h)){const y=await s.whenLayerView(h).catch(()=>null);if(y)return A7(y,d,r)}return A7(h,d,r)}}).filter(wi);return(await Promise.all(o)).filter(wi)}updateSelection(e){const r=new Map;for(const[n,o]of this._selectionMap)r.set(n,[...o.selection]);let i=!1;const s=e.current.concat(e.added);for(const n of s){const o=n.sourceLayer,l=n.getObjectId();if(this.sources.includes(o)&&(yo(o)||tu(o))&&l!==null){const c=xh(r,o,()=>[]);c.includes(l)||(c.push(l),i=!0)}}for(const n of e.removed){const o=n.sourceLayer,l=n.getObjectId();if(this.sources.includes(o)&&(yo(o)||tu(o))&&l!==null){const c=r.get(o),d=c?.indexOf(l);d!==void 0&&d>=0&&(c?.splice(d,1),i=!0)}}if(i){const{_selectionMap:n,_trashCan:o}=this,l=[];for(const[c,d]of r){const h=n.get(c);h!==void 0&&o.push(h),n.set(c,{selection:d}),l.push({layer:c,selection:d,...t8(h!==void 0?h.selection:[],d)})}this._onSelectionChange(l)}}setSelection(e,r){this._setSelection(e,r)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,r){const i=this._selectionMap.get(e),s=i!==void 0?[...i.selection]:[];for(const n of r)s.includes(n)||s.push(n);this._setSelection(e,s)}removeFromSelection(e,r){const i=this._selectionMap.get(e);if(!i)return;const s=[];for(const n of i.selection)r.includes(n)||s.push(n);this._setSelection(e,s)}toggleInSelection(e,r){const i=this._selectionMap.get(e);if(!i||i.selection.length===0)return void this._setSelection(e,r);const s=new Set(i.selection),n=new Set(r),o=NR(s,n);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const r=[];for(const[i,s]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:r,_selectionMap:i,showHighlight:s}=this,n=this._vizTaskId;for(const o of e){const l=i.get(o),c=tu(o)?o.parent:o;if(c!=null&&k7(c)){if(L7(c))continue;r.whenLayerView(c).then(d=>{l?.highlightHandle?.remove(),l!=null&&s&&n===this._vizTaskId&&"highlight"in d&&typeof d.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=d.highlight(l.selection,this.highlightName))}).catch(()=>{l?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Je);const e=new Set(this.sources.map(r=>tu(r)?r.parent:r));for(const r of e)yo(r)&&"on"in r&&r.on&&this._layerEditHandles.push(r.on("edits",i=>this._onLayerEdit(i,r)))}_onLayerEdit(e,r){if(S8(r))this._onParentLayerEdit(e,r);else if(e.deletedFeatures.length&&this._selectionMap.has(r)){const i=[];e.deletedFeatures.forEach(({error:s,objectId:n})=>{n!=null&&s==null&&i.push(n)}),this.removeFromSelection(r,i)}}_onParentLayerEdit(e,r){const{deletedFeatures:i,edits:s,updatedFeatures:n}=e;if(s?.updateFeatures?.forEach(o=>{const l=o.getObjectId()??o.attributes[r.objectIdField];if(l==null||n.find(h=>h.objectId===l)?.error)return;const c=r.findSublayerForFeature(o);if(!yo(c))return;const d=r.sublayers.find(h=>!(!yo(h)||!this.getSelection(h)?.includes(l)));yo(d)&&d!==c&&(this.removeFromSelection(d,[l]),this.appendToSelection(c,[l]))}),i.length){const o=[];i.forEach(({error:l,objectId:c})=>{c!=null&&l==null&&o.push(c)}),r.sublayers.forEach(l=>{yo(l)&&this._selectionMap.has(l)&&this.removeFromSelection(l,o)})}}_setSelection(e,r){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const i=this._selectionMap.get(e);if(i===void 0||!IU(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(e,{selection:[...r]});const s={layer:e,selection:[...r],...t8(i!==void 0?i.selection:[],r)};this._onSelectionChange([s])}}};a([u()],Pi.prototype,"_selectionMap",void 0),a([u()],Pi.prototype,"_sources",void 0),a([u({readOnly:!0,nonNullable:!0})],Pi.prototype,"selections",null),a([u({readOnly:!0,nonNullable:!0})],Pi.prototype,"count",null),a([u()],Pi.prototype,"view",void 0),a([u({readOnly:!0,nonNullable:!0})],Pi.prototype,"hasSelection",null),a([u()],Pi.prototype,"showHighlight",void 0),a([u()],Pi.prototype,"sources",null),a([u()],Pi.prototype,"highlightName",void 0),Pi=a([_("esri.views.SelectionManager")],Pi);const L7=t=>tu(t)?t.parent?.isTable===!0:t.isTable,TU=t=>t.layer!==void 0,k7=t=>t?.when!==void 0,IU=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const r=[...t.selection],i=[...e.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1}return!0},A7=async(t,e,r={})=>{let i;if(TU(t)){const s=t;i=s===void 0?null:await s.queryFeatures(new W({...r,objectIds:e})).then(n=>({data:n,layer:t.layer}))}else{const s=t;i=s===void 0?null:await s.queryFeatures(new W({...r,objectIds:e})).then(n=>({data:n,layer:s}))}return i},MU=Pi;let Hp=class extends de(Z){constructor(e){super(e),this.accentColor=new K([255,127,0]),this.textColor=new K([255,255,255])}};a([u({type:K,nonNullable:!0})],Hp.prototype,"accentColor",void 0),a([u({type:K,nonNullable:!0})],Hp.prototype,"textColor",void 0),Hp=a([_("esri.views.Theme")],Hp);const T3=Hp,DT=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],jT={};function VT(t){return!!jT[t]}function EU(t){for(const e of t)if(!VT(e))return!1;return!0}DT.forEach(t=>{jT[t]=!0});let zT=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:r,priority:i},s)=>this.inputManager?.installHandlers(s,[r],i))}disconnect(){this.inputManager&&this._handlers.forEach((e,r)=>this.inputManager?.uninstallHandlers(r)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,r,i,s){const n=Array.isArray(e)?e:e.split(",");if(!EU(n))return n.some(VT)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,l;Array.isArray(r)?l=r:(o=r,l=[]),typeof i=="function"?o=i:s=i,s=s??Wn.DEFAULT;const c=this._createUniqueGroupName(),d=new PU(this.view,n,l,o);this._handlers.set(c,{handler:d,priority:s});for(const h of n){const y=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,y+1)}return this.inputManager&&this.inputManager.installHandlers(c,[d],s),Zr(()=>this._removeHandler(c,n))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,r){if(this._handlers.has(e)){this._handlers.delete(e);for(const i of r){const s=this._handlerCounts.get(i);s===void 0||(s===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},PU=class extends Pt{constructor(e,r,i,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const n of r)switch(n){case"click":this.registerIncoming("click",i,o=>s(CU(e,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>s(LU(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>s(kU(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>s(AU(e,o)));break;case"hold":this.registerIncoming("hold",i,o=>s(FU(e,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const l=this._wrapDrag(o);l&&s(l)});break;case"key-down":this.registerIncoming("key-down",i,o=>s(NU(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>s(DU(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>s(vp(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>s(vp(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>s(vp(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>s(jU(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>s(VU(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>s(vp(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>s(vp(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{s(zU(o))});break;case"focus":this.registerIncoming("focus",i,o=>{s(OU(o))});break;case"blur":this.registerIncoming("blur",i,o=>{s(RU(o))})}}_wrapDrag(e){const r=e.data,{x:i,y:s}=r.center,{action:n,pointerType:o,button:l}=r;if(n==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const c=r.pointer.native,d=r.buttons,{cancelable:h,timestamp:y}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:s,origin:f,pointerType:o,button:l,buttons:d,radius:r.radius,angle:ES(r.angle),native:c,timestamp:y,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}};function OU(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function RU(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function CU(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:c}=e.data,{cancelable:d,timestamp:h}=e;return{type:"click",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:h,screenPoint:Et(n,o),mapPoint:qh(t,n,o),eventId:c,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function LU(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:c}=e.data,{cancelable:d,timestamp:h}=e;return{type:"double-click",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:h,mapPoint:qh(t,n,o),eventId:c,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function kU(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:c}=e.data,d=l.pointerId,{cancelable:h,timestamp:y}=e;return{type:"immediate-click",pointerId:d,pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:y,mapPoint:qh(t,n,o),eventId:c,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function AU(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:c}=e.data,d=l.pointerId,{cancelable:h,timestamp:y}=e;return{type:"immediate-double-click",pointerId:d,pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:y,mapPoint:qh(t,n,o),eventId:c,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function FU(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l}=e.data,{cancelable:c,timestamp:d}=e;return{type:"hold",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:d,mapPoint:qh(t,n,o),cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function qh(t,e,r){return t.toMap(Et(e,r),{exclude:[]})}function NU(t){const{key:e,repeat:r,native:i}=t.data,{cancelable:s,timestamp:n}=t;return{type:"key-down",key:e,repeat:r,native:i,timestamp:n,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function DU(t){const{key:e,native:r}=t.data,{cancelable:i,timestamp:s}=t;return{type:"key-up",key:e,native:r,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:n=>t.defer(n),preventDefault:()=>t.preventDefault()}}function vp(t,e){const{x:r,y:i,button:s,buttons:n,native:o,eventId:l}=t.data,c=o.pointerId,d=o.pointerType,{cancelable:h,timestamp:y}=t;return{type:e,x:r,y:i,pointerId:c,pointerType:d,button:s,buttons:n,native:o,timestamp:y,eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:f=>t.defer(f),preventDefault:()=>t.preventDefault()}}function jU(t){const{x:e,y:r,buttons:i,native:s,eventId:n}=t.data.currentEvent,{button:o}=t.data.startEvent,l=t.data.startEvent.native.pointerId,c=t.data.startEvent.native.pointerType,d=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:y,timestamp:f}=t;return{type:"pointer-drag",x:e,y:r,pointerId:l,pointerType:c,button:o,buttons:i,action:d,origin:h,native:s,timestamp:f,eventId:n,cancelable:y,stopPropagation:()=>t.stopPropagation(),defer:m=>t.defer(m),preventDefault:()=>t.preventDefault()}}function VU(t){const{cancelable:e,data:r,timestamp:i}=t,{x:s,y:n,deltaY:o,native:l}=r;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:l,timestamp:i,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:c=>t.defer(c),preventDefault:()=>t.preventDefault()}}function zU(t){const{action:e,state:r,device:i}=t.data,{cancelable:s,timestamp:n}=t,{buttons:o,axes:l}=r;return{type:"gamepad",device:i,timestamp:n,action:e,buttons:o,axes:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:c=>t.defer(c),preventDefault:()=>t.preventDefault()}}const UU="z",qU="r",UT={cancel:"Escape",complete:"Enter"},Iue={...UT,redo:qU,undo:UU,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},Mue={toggle:"Control"},Eue={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Pue={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:_$,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let Oue=class{constructor(){this._bindings=new Map}add(e,r){return this.addToggle(e,i=>{i.type==="key-down"&&r(i)})}addToggle(e,r){const i=GU.fromDefinition(e,r),s=xh(this._bindings,i.key,()=>[]);return s.push(i),Zr(()=>P_(s,i))}register(e,r=Wn.WIDGET){return I5([e.on("key-down",i=>this.dispatch(e.inputManager,i),r),e.on("key-up",i=>this.dispatch(e.inputManager,i),r)])}dispatch(e,r){const i=r.key,s=this._bindings.get(i);if(s)for(const n of s)n.process(e,r)}},GU=class I3{constructor(e,r,i,s,n){this.key=e,this.modifiers=r,this.repeats=i,this.continuePropagation=s,this.callback=n}process(e,r){if(!(r.key!==this.key||"repeat"in r&&r.repeat&&!this.repeats)){for(const i of this.modifiers)if(!e.isModifierKeyDown(i))return;this.continuePropagation||r.stopPropagation(),this.callback(r)}}static fromDefinition(e,r){if(typeof e=="string")return new I3(e,[],!1,!1,r);const{key:i,modifier:s,repeats:n,continuePropagation:o}=e;return new I3(i,s?Array.isArray(s)?s:[s]:[],!!n,!!o,r)}};function BU(t){return[t.on("before-add",e=>{const r=e.item;if(r==null||t.includes(r))return N.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();r.onAdd()}),t.on("after-remove",e=>{const r=e.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function M3(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function HU(t){return t.type==="key-down"&&t.key===UT.cancel}function Ms(t){return Et(t.x,t.y)}function qT(t,e){const r=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return r?Et(e.clientX-r.left,e.clientY-r.top):Et(0,0)}function GT(t,e){return e instanceof Event?qT(t,e):Ms(e)}function BT(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let E0=class extends Z{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new Bu,this._grabbedManipulators=new Bu,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,r){const i=()=>e.stopPropagation();switch(e.type){case"pointer-move":F7(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!N7(e))break;const s=Ms(e),n=zl(s,e.pointerType,r.tools);if(n==null)break;const o=n.manipulator,l=n.tool;o==null||l==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,r),o!=null&&l!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:l,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,r);break;case"pointer-drag":{if(!N7(e))break;const s=this._grabbedManipulators.get(e.pointerId),n=s?.manipulator,o=s?.tool;if(n==null||o==null)break;const l=Ms(e);l.x=bi(l.x,0,r.view.width),l.y=bi(l.y,0,r.view.height);const c=s.start,d=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,d?n.events.emit("drag",{action:"update",start:c,screenPoint:l}):n.events.emit("drag",{action:"start",start:c,screenPoint:l,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:n,start:c}));break;case"end":n.dragging=!1,d&&n.events.emit("drag",{action:"end",start:c,screenPoint:l}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,r)}i();break}case"immediate-click":{const s=Ms(e),n=zl(s,e.pointerType,r.tools);if(!WU(e)){for(const d of r.tools)if((n==null||n.tool!==d||d.automaticManipulatorSelection)&&d.manipulators){let h=!1;d.manipulators.forEach(({manipulator:y})=>{y.selected&&(y.selected=!1,h=!0)}),h&&d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged()}}if(n==null)break;const{manipulator:o,tool:l}=n;if(!o.interactive)break;o.selectable&&l.automaticManipulatorSelection&&(o.selected=!o.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const c=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:c,stopPropagation:i}),fy(o,i);break}case"click":{const s=Ms(e),n=zl(s,e.pointerType,r.tools),o=n?.manipulator;if(o==null||!o.interactive)break;const l=e.native.shiftKey;o.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l}),i();break}case"double-click":{const s=Ms(e),n=zl(s,e.pointerType,r.tools),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const l=e.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:i}),fy(o,i);break}case"immediate-double-click":{const s=Ms(e),n=zl(s,e.pointerType,r.tools),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const l=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:i}),e.pointerType==="mouse"&&fy(o,i);break}}this._onFocusChange(r.tools)}_releaseManipulatorBeforeDragging(e,r,i){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Ms(r)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===e&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(e,r){const i=this._grabbedManipulators.get(e.pointerId)?.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Ms(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:s})=>r.add(s)),this._hoveredManipulators.forEach(({tool:s})=>i.add(s));for(const s of e){s.hasGrabbedManipulators=r.has(s),s.hasHoveredManipulators=i.has(s);const n=this._grabbedManipulators.values(),o=DR(n,({tool:l})=>l===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:r,setActiveTool:i},s=!0,n){const o=(l,c)=>l===e&&(n==null||n===c);this._grabbedManipulators.forEach(({tool:l,manipulator:c,pointerType:d},h)=>{o(l,c)&&(this._grabbedManipulators.delete(h),c.grabbing=!1,c.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:d}))}),this._draggedManipulators.forEach(({tool:l,manipulator:c},d)=>{o(l,c)&&(this._draggedManipulators.delete(d),c.dragging=!1,c.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:l,manipulator:c},d)=>{o(l,c)&&(this._hoveredManipulators.delete(d),c.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Et(r.x,r.y),i,r.pointerType,e)})}handleHoverEvent(e,r){const i=e.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!F7(e.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Ms(e),e.pointerId,e.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(e,r,i,s){let n=zl(e,i,s);const o=this._hoveredManipulators.get(r)?.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(r,n)):this._hoveredManipulators.delete(r),this._onFocusChange(s))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:r},i)=>{e===i&&(this._hoveredManipulators.delete(e),r.hovering=!1)})}_cursorFromMap(e,r){if(!e?.size)return null;for(const{manipulator:i}of e.values())if(i?.interactive){if(i.grabbing&&i.grabCursor)return i.grabCursor;if(i.cursor)return i.cursor}return r}};function zl(t,e,r){for(const i of r){if(i.manipulators==null||!M3(i))continue;const s=i.manipulators.intersect(t,e);if(s!=null)return{tool:i,manipulator:s}}return null}function F7(t){return t==="mouse"}function N7(t){return t.pointerType!=="mouse"||t.button===0}function WU(t){return!!t.native.shiftKey}function fy(t,e){t?.consumesClicks&&e()}a([u()],E0.prototype,"cursor",null),E0=a([_("esri.views.interactive.ToolViewManagerManipulatorState")],E0);const D7="attached",my="tools",ZU=1e3;let Es=class extends Z{constructor(e){super(e),this._updatingHandles=new ol,this._clock=$h,this._manipulatorState=new E0,this.tools=new U,this._interacting=!1,this._interactingTimeout=ZU,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(DT,e=>{this._handleInputEvent(e)},Wn.TOOL),...BU(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void N.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const r=this.activeTool;this._set("activeTool",e),r?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const i of this.tools){this._updateToolEditableFlag(i);const s=M3(i);this.activeTool!=null&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const r of this.tools)if(r.visible&&r.cursor!=null)return r.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Je(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([X(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(r=>r.onElevationChange(e)))],D7):this.addHandles(X(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(D7),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const r of this.tools)r.manipulators&&r.manipulators.forEach(({manipulator:i})=>e(i,r))}_handleInputEvent(e){let r=!1;const i={...e,stopPropagation:()=>{r=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i);else for(const s of this.tools)!r&&s.visible&&s.handleInputEvent(i);!r&&HU(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(my);for(const e of this.tools){if(e instanceof Z){const r=X(()=>[e.cursor,e.visible,e.editable],()=>{M3(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(r,my)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],my)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(r=>(e==null||r!==e)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};a([u({constructOnly:!0,nonNullable:!0})],Es.prototype,"view",void 0),a([u({value:null})],Es.prototype,"activeTool",null),a([u({readOnly:!0,type:U})],Es.prototype,"tools",void 0),a([u()],Es.prototype,"cursor",null),a([u({readOnly:!0})],Es.prototype,"updating",null),a([u()],Es.prototype,"_interacting",void 0),a([u({readOnly:!0})],Es.prototype,"interacting",null),Es=a([_("esri.views.ToolViewManager")],Es);const JU=new K("cyan"),QU=1,KU=.25,YU=new K("black"),XU=.4,eq=.2,kue=.25,HT="default",tq="temporary",rq=new K("yellow");var E3;let si=E3=class extends Z{constructor(t){super(t),this.name=HT,this.color=JU.clone(),this.haloColor=null,this.haloOpacity=QU,this.fillOpacity=KU,this.shadowColor=YU.clone(),this.shadowOpacity=XU,this.shadowDifference=eq,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new E3({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};a([u({type:String,constructOnly:!0,nonNullable:!0})],si.prototype,"name",void 0),a([u({type:K,nonNullable:!0})],si.prototype,"color",void 0),a([u({type:K})],si.prototype,"haloColor",void 0),a([u({nonNullable:!0})],si.prototype,"haloOpacity",void 0),a([u({nonNullable:!0})],si.prototype,"fillOpacity",void 0),a([u({type:K,nonNullable:!0})],si.prototype,"shadowColor",void 0),a([u({nonNullable:!0})],si.prototype,"shadowOpacity",void 0),a([u({nonNullable:!0})],si.prototype,"shadowDifference",void 0),a([u({nonNullable:!0})],si.prototype,"haloWidth",void 0),a([u({nonNullable:!0})],si.prototype,"haloBlur",void 0),si=E3=a([_("esri.views.support.HighlightOptions")],si);const Bo=si;function iq(){return new(U.ofType(Bo))([new Bo({name:HT}),new Bo({name:tq,color:rq})])}let pu=class extends Z{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":sq.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return nq[this.deviceType]}};a([u({nonNullable:!0,readOnly:!0})],pu.prototype,"nativeIndex",void 0),a([u({type:String,readOnly:!0})],pu.prototype,"deviceType",null),a([u({type:Number,readOnly:!0})],pu.prototype,"axisThreshold",null),pu=a([_("esri.views.input.gamepad.GamepadInputDevice")],pu);const R6=pu,sq=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),nq={standard:.15,spacemouse:.025,unknown:0};let Wp=class extends Z{constructor(e){super(e),this.devices=new U,this.enabledFocusMode="document"}};a([u({type:U.ofType(R6),readOnly:!0})],Wp.prototype,"devices",void 0),a([u({type:["document","view","none"]})],Wp.prototype,"enabledFocusMode",void 0),Wp=a([_("esri.views.input.gamepad.GamepadSettings")],Wp);const oq=Wp;let P0=class extends Z{constructor(){super(...arguments),this.gamepad=new oq}};a([u({readOnly:!0})],P0.prototype,"gamepad",void 0),P0=a([_("esri.views.input.Input")],P0);const aq=P0,gy=()=>u({type:["pan","rotate","zoom","none"],nonNullable:!0});let La=class extends Z{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};a([gy()],La.prototype,"dragPrimary",void 0),a([gy()],La.prototype,"dragSecondary",void 0),a([gy()],La.prototype,"dragTertiary",void 0),a([u({type:["zoom","none"],nonNullable:!0})],La.prototype,"mouseWheel",void 0),La=a([_("esri.views.navigation.NavigationActionMap")],La);const C6=La;let So=class extends Z{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};a([u({type:Boolean,nonNullable:!0})],So.prototype,"enabled",void 0),a([u({type:R6})],So.prototype,"device",void 0),a([u({type:["pan","zoom"],nonNullable:!0})],So.prototype,"mode",void 0),a([u({type:["forward-down","forward-up"],nonNullable:!0})],So.prototype,"tiltDirection",void 0),a([u({type:Number,nonNullable:!0})],So.prototype,"velocityFactor",void 0),So=a([_("esri.views.navigation.gamepad.GamepadSettings")],So);const WT=So;let xo=class extends Z{constructor(e){super(e),this.actionMap=new C6,this.browserTouchPanEnabled=!0,this.gamepad=new WT,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){vf(N.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};a([u({type:C6,nonNullable:!0})],xo.prototype,"actionMap",void 0),a([u({type:Boolean})],xo.prototype,"browserTouchPanEnabled",void 0),a([u({type:WT,nonNullable:!0})],xo.prototype,"gamepad",void 0),a([u({type:Boolean})],xo.prototype,"momentumEnabled",void 0),a([u({type:Boolean})],xo.prototype,"mouseWheelZoomEnabled",null),xo=a([_("esri.views.navigation.Navigation")],xo);const h4=xo;function zue(t,e,r){const i=ZT(t),s=e,n=lq(i,s,r);if(i){const o=fr.deriveUnitFromSR(i,t.spatialReference).heightUnit;if(!r&&o!==i.heightUnit){const l=new I("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new I("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:l})}}if(!uq(t)||n===4)return new I("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(n){case 1:{const o=i?.heightUnit||"unknown",l=s?.heightUnit||"unknown",c=new I("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${l})`,{layerUnit:o,sceneUnit:l});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:c})}case 2:{const o=i?.heightModel||"unknown",l=s?.heightModel||"unknown",c=new I("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${l})`,{layerHeightModel:o,sceneHeightModel:l});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:c})}case 3:{const o=i?.vertCRS||"unknown",l=s?.vertCRS||"unknown",c=new I("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${l})`,{layerDatum:o,sceneDatum:l});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:c})}}return null}function lq(t,e,r){if(!j7(t)||!j7(e))return 4;if(t==null||e==null)return 0;if(!r&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function j7(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function uq(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!KT(t)}function ZT(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?Zo(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&JT(t)&&t.heightModelInfo?t.heightModelInfo:KT(t)?fr.deriveUnitFromSR(pq,t.spatialReference):null}function JT(t){return"heightModelInfo"in t}function QT(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function KT(t){return QT(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):YT(t)}function cq(t){return t.layers!=null||YT(t)||QT(t)||JT(t)}function YT(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const pq=new fr({heightModel:"gravity-related-height"});let P3,vy=null;async function dq(t){vy||(vy=R(()=>import("./money-tides-geometryServiceUtils-3QeW4WGR.js"),__vite__mapDeps([199,4,3,1,2,5,6,7,200,13,14,12])).then(e=>P3=e)),await vy,Ce(t)}async function XT(t,e,r,i){if(!t)return null;const s=t.spatialReference;return eo()||ws(s,e)?ia(t,e):P3?P3.projectGeometry(t,e,r,i):(await Promise.race([dq(i),Yo(i)]),XT(t,e,r,i))}async function Uue(t,e){try{return t?.spatialReference?await Ax(t,e):null}catch{return null}}let Le=class extends Z{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ml(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,i=>{const s=this._getSupportedSpatialReferences(i);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(e,s);n!=null&&(e=n)}return e?.length===1})&&e?.length!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(e);return{spatialReference:r?.spatialReference??null,viewingMode:r?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const s=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],n=>!(!("tileInfo"in n)||!n.tileInfo?.spatialReference.equals(r))&&(i=n,!0),n=>"tileInfo"in n);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const r=this._collectLayers(this.mapCollections,i=>{const s=ZT(i);return!!s&&(e={heightModelInfo:s,vcsWkid:i.spatialReference?.vcsWkid,latestVcsWkid:i.spatialReference?.latestVcsWkid},!0)},i=>cq(i));return{...e,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],r=this._collectLayers(this.mapCollections,i=>{const s="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(l=>l.spatialReference.equals(this.spatialReference))??n;if(o)return e.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const l of s)e.push({extent:l,layer:i});return!1});return{candidates:e,updating:r}}get _extentTask(){const{candidates:e,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=ml(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:Th(async n=>{try{const o=await XT(i.extent,s,"portalItem"in i.layer?i.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Gs(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,r){if(e==null)return r;const i=new Array;for(const s of e)for(const n of r){if(!s.spatialReference.equals(n.spatialReference))continue;const o=yq(s.viewingMode,n.viewingMode);if(o!==!1){i.push({spatialReference:s.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const r=this.defaultSpatialReference;return e==null||e.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&e.length>1&&e.some(({spatialReference:i})=>i.equals(r))&&(e=e.filter(({spatialReference:i})=>i.equals(r))),e.length>1&&e.some(({viewingMode:i})=>i!==2)&&(e=e.filter(({viewingMode:i})=>i!==2)),e[0])}_getSupportedSpatialReferences(e){const r="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const s of r){const n=this.getSpatialReferenceSupport(s,e);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:l,viewingMode:c}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!l.equals(this.userSpatialReference)||i.push({spatialReference:l,viewingMode:c})}}return i}_pickExtentCandidate(e){const r=this.spatialReference;return e.find(({extent:i})=>r.equals(i.spatialReference))||e[0]}_collectLayers(e,r,i=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const s=new hq(i,r);for(const n of e)if(this._collectCollection(n,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(e,r){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of e.layers)if((i.type!=="graphics"||!i.internal)&&r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(r=>{vi(r)}),"loading"):e.loadStatus:"loaded"}};a([u()],Le.prototype,"required",void 0),a([u({constructOnly:!0})],Le.prototype,"map",void 0),a([u({constructOnly:!0})],Le.prototype,"getSpatialReferenceSupport",void 0),a([u()],Le.prototype,"defaultSpatialReference",void 0),a([u()],Le.prototype,"userSpatialReference",void 0),a([u()],Le.prototype,"sourcePreloadCount",void 0),a([u()],Le.prototype,"priorityCollection",void 0),a([u()],Le.prototype,"requiresExtentInSpatialReference",void 0),a([u()],Le.prototype,"suspended",void 0),a([u({readOnly:!0})],Le.prototype,"ready",null),a([u({readOnly:!0})],Le.prototype,"heightModelInfoReady",null),a([u({readOnly:!0})],Le.prototype,"spatialReference",null),a([u({readOnly:!0})],Le.prototype,"extent",null),a([u({readOnly:!0})],Le.prototype,"heightModelInfo",null),a([u({readOnly:!0})],Le.prototype,"vcsWkid",null),a([u({readOnly:!0})],Le.prototype,"latestVcsWkid",null),a([u({readOnly:!0})],Le.prototype,"viewingMode",null),a([u({readOnly:!0})],Le.prototype,"tileInfo",null),a([u({readOnly:!0})],Le.prototype,"mapCollections",null),a([u({readOnly:!0})],Le.prototype,"_spatialReferenceTask",null),a([u({readOnly:!0})],Le.prototype,"_tileInfoTask",null),a([u({readOnly:!0})],Le.prototype,"_heightModelInfoTask",null),a([u({readOnly:!0})],Le.prototype,"_extentCandidatesTask",null),a([u()],Le.prototype,"_extentTask",null),a([u()],Le.prototype,"_projectExtentTask",void 0),Le=a([_("esri.views.support.DefaultsFromMap")],Le);let hq=class{constructor(e,r){this.layerFilter=e,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function yq(t,e){return t!=null?e!=null?t===e&&t:t:e}function fq(t){return"tryRecycleWith"in t}let mq=class{constructor(e,r,i){this.layer=e,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=ta(),this.promise=this._deferred.promise,Rc(this._controller.signal,()=>{this._recycleController?.abort();const s=new I("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!fq(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const r=this.layer.type,i=this._recycleController.signal;for(let s=0;s<e.length;s++){const n=e[s];if(n.type!==r)continue;const o=this.layerView.tryRecycleWith(n,{signal:i});if(o){e.splice(s,1),this.layer=n;const l=this.layerView,c=l.view;return this.promise=o.then(()=>(Ce(i),n.emit("layerview-destroy",{view:c,layerView:l}),c.emit("layerview-destroy",{view:c,layerView:l}),n.emit("layerview-create",{view:c,layerView:l}),c.emit("layerview-create",{view:c,layerView:l}),l)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:r,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:r},layer:i}=this;this._map=e.map;try{let s,n;if(await i.load({signal:r}),i.prefetchResources&&await i.prefetchResources({signal:r}),gq(i))s=await i.createLayerView(e,{signal:r});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new I("layer:view-not-supported","No layerview implementation was found");const c=await this.layerViewImporter.importLayerView(i);Ce(r),s="default"in c?new c.default({layer:i,view:e}):new c({layer:i,view:e})}const o=()=>{n=Je(n),s.destroyed||s.destroy(),this.done=!0};n=Rc(r,o),Ce(r);try{await s.when()}catch(c){throw o(),c}if(!this._map?.allLayers?.includes(i))return o(),void this._deferred?.reject(new I("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=s,i.emit("layerview-create",{view:e,layerView:s}),e.emit("layerview-create",{layer:i,layerView:s}),this.done=!0,this._deferred?.resolve(s)}catch(s){i.emit("layerview-create-error",{view:e,error:s}),e.emit("layerview-create-error",{layer:i,error:s}),this.done=!0,this._deferred?.reject(new I("layerview:create-error","layerview creation failed",{layer:i,error:s}))}}};function gq(t){return t.createLayerView!==Oe.prototype.createLayerView}function vq(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let Rr=class extends Z{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new ol,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const r=this.view.map?.allLayers;if(r)for(const i of r)this.layerViewFilter?.(i)!==!1&&this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=ta(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(wh(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:r}=this.view;if(!r)return void this.clear();if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,s=[],n=this.view.ready,o=h=>{if(h!=null){for(const y of h)if(y){if(this.layerViewFilter?.(y)===!1)continue;i.add(y);const f=this._layerLayerViewInfoMap.get(y);f&&n?f.start():f||this._recyclingInfoMap.has(y)||s.push(y),"layers"in y&&y.layers&&o(y.layers)}}};for(const h of this._rootCollectionNames)o(Pp(this,h));const l=new Array,c=h=>{const y=h.tryRecycle(s);y?(this._recyclingInfoMap.set(h.layer,h),this.notifyChange("updating"),y.then(()=>{this._recyclingInfoMap.delete(h.layer),this._layerLayerViewInfoMap.set(h.layer,h),this._reschedule(),this.notifyChange("updating")}).catch(f=>{vi(f)||(this._recyclingInfoMap.delete(h.layer),h.destroy(),this._reschedule(),this.notifyChange("updating"))})):l.push(h)};for(const h of this._layerLayerViewInfoMap.values())i.has(h.layer)||(this._layerLayerViewInfoMap.delete(h.layer),c(h));for(const h of this._recyclingInfoMap.values())i.has(h.layer)||(this._recyclingInfoMap.delete(h.layer),c(h));for(const h of s)this._createLayerView(h);this._refreshCollections(),l.forEach(h=>h.destroy());const d=[r?.ground?.layers,r?.basemap?.baseLayers,r?.basemap?.groundLayers,r?.basemap?.referenceLayers,r?.layers].filter(h=>!!h);i.forEach(h=>"layers"in h&&d.push(h.layers)),this.addHandles(d.map(h=>this._watchUpdatingTracking.addOnCollectionChange(()=>h,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([Ui(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),X(()=>{const e=this.view,r=e?.map;return[r?.basemap,r?.ground,r?.layers,e?.ready]},()=>this._reschedule(),vr)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),a1(this._recyclingInfoMap),a1(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Mt()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||jR(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),a1(this._layerLayerViewInfoMap),a1(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const r=this._layerLayerViewInfoMap.get(e)?.promise;if(!r){const i=this._recyclingInfoMap.get(e)?.promise;if(!i)throw new I("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return i}return r}isCreatingLayerViewsForLayer(e,r){this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(e);if(!i?.done)return!0;const s=i.layerView;return!(!s||!r||s.parent===r)||!!(i.done&&s&&"layers"in e&&e.layers?.length)&&e.layers.some(n=>this.isCreatingLayerViewsForLayer(n,s))}_refreshCollections(){for(const[e,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Pp(this,e),Pp(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())Pp(this,e)?.removeAll()}_populateLayerViewsOwners(e,r,i){if(!e||!r)return void r?.removeAll();let s=0;for(const n of e){const o=this._layerLayerViewInfoMap.get(n);if(!o?.layerView)continue;const{layerView:l}=o;l.layer=n,l.parent=i,r.at(s)!==l&&r.splice(s,0,l),"layers"in n&&vq(l)&&this._populateLayerViewsOwners(n.layers,l.layerViews,l),++s}s<r.length&&r.splice(s)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const r=new mq(e,this.view,this.layerViewImporter);r.promise?.then(()=>this._refreshCollections(),i=>{i&&(vi(i)||i.name==="cancelled:layerview-create")||N.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};a([u()],Rr.prototype,"_workPromise",void 0),a([u({readOnly:!0})],Rr.prototype,"_watchUpdatingTracking",void 0),a([u({readOnly:!0})],Rr.prototype,"_layersToLayerViews",void 0),a([u({constructOnly:!0})],Rr.prototype,"layerviewMapping",void 0),a([u({readOnly:!0})],Rr.prototype,"_rootCollectionNames",null),a([u({constructOnly:!0})],Rr.prototype,"layerViewFilter",void 0),a([u()],Rr.prototype,"layerViewImporter",void 0),a([u()],Rr.prototype,"supportsGround",void 0),a([u({readOnly:!0})],Rr.prototype,"updating",null),a([u({readOnly:!0})],Rr.prototype,"updatingRemaining",null),a([u({constructOnly:!0})],Rr.prototype,"view",void 0),Rr=a([_("esri.views.support.LayerViewManager")],Rr);const wq=Rr;let du=class extends Z{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};a([u()],du.prototype,"featureTitleFields",void 0),a([u()],du.prototype,"utilityNetworkFields",void 0),a([u()],du.prototype,"globalIdField",void 0),du=a([_("esri.views.support.RequiredFieldsOptions")],du);const bq=du;var hu,Wo;let Q=(Wo=class extends h_(v5){constructor(e){super(e),this._userSpatialReference=null,this.handles=new E5,this.updatingHandles=new ol,this.allLayerViews=new Gr({getCollections:()=>this.layerviewCollections,getChildrenFunction:Sq}),this.analyses=new Wc,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new ll,this.typeSpecificPreconditionsReady=!0,this.layerViews=new U,this.magnifier=new FT,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new U,this._highPriorityCursorHandles=new U,this.input=new aq,this.navigation=new h4,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new zT(this),this.persistableViewModels=new U,this.requiredFieldsOptions=new bq,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(X(()=>this.preconditionsReady,r=>{const i=this.ready;if(r?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,hu.views.add(this)):(this._lockedSpatialReference=null,hu.views.remove(this)),this.notifyChange("spatialReference"),!r&&i)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(r&&!i){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new I("view:startup-error","View._startup failed",s)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},ht))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,M5(()=>this.ready)))),this.basemapView=new fU({view:this}),this.layerViewManager=new wq({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new Es({view:this}),this.selectionManager=new MU({view:this}),this.addHandles([zi(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{N.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),X(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},vr),X(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},ht),X(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},vr)])}get _layerToLayerviewMapping(){return hu._layerToLayerview}destroy(){this.destroyed||(hu.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=st(this.graphics),this.analyses=st(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=st(this.analysisViewManager),this.toolViewManager=st(this.toolViewManager),this.layerViewManager=st(this.layerViewManager),this.selectionManager=st(this.selectionManager),this.basemapView=st(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=st(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return N.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Le({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,r)=>this.getSpatialReferenceSupport(e,r),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??iq()}set highlights(e){this._set("highlights",Bs(e,this._get("highlights"),U.ofType(Bo)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||_f(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(N.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),_f(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,r=this.map.ground.loaded,i=this.map.basemap?.loaded??!0;return e&&i&&r&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=Th(s=>VR(ie("view-readyState-waiting-delay"),null,s)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=ml(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const r=e.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return e}set spatialReference(e){const r=!at(e,this._get("spatialReference"));this._set("_userSpatialReference",e),r&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Qn}set timeZone(e){this._userTimeZone=e,pk(e)||N.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,r="low"){const i=r==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,s={cursor:e},n=Zr(()=>i.remove(s));return i.add(s),this.addHandles(n),n}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new T3}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new I("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,r){return this.isResolved()&&!this.ready&&N.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,r)}forceReadyCycle(){this.ready&&(zi(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,r){return super.on(e,r)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const r=document.createElement("div");r.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const i=document.createElement("div");i.innerHTML="Unable to display map. WebGL2 support is required.",i.setAttribute("style","font-size: 24px; font-weight: bold;");const s=document.createElement("div");s.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",s.setAttribute("style","font-size: 18px;");const n=document.createElement("a");n.innerHTML="https://esriurl.com/webgl-faq",n.target="_blank",n.setAttribute("style","font-size: 18px;"),n.href="https://esriurl.com/webgl-faq",r.appendChild(i),r.appendChild(s),r.appendChild(n);const o=this.getSurface();throw o&&o.appendChild(r),e}}},hu=Wo,Wo._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],Wo.views=new U,Wo);a([u()],Q.prototype,"_userSpatialReference",void 0),a([u()],Q.prototype,"activeTool",null),a([u({readOnly:!0})],Q.prototype,"allLayerViews",void 0),a([u({readOnly:!0})],Q.prototype,"layerviewCollections",null),a([u(f2(Wc,"analyses"))],Q.prototype,"analyses",void 0),a([u()],Q.prototype,"animation",null),a([u()],Q.prototype,"basemapView",void 0),a([u()],Q.prototype,"center",null),a([u()],Q.prototype,"defaultsFromMapSettings",null),a([u()],Q.prototype,"defaultsFromMap",null),a([u()],Q.prototype,"dependencies",void 0),a([u()],Q.prototype,"displayFilterEnabled",void 0),a([u({type:ue})],Q.prototype,"extent",null),a([u()],Q.prototype,"fatalError",void 0),a([u(f2(ll,"graphics"))],Q.prototype,"graphics",void 0),a([u({readOnly:!0,type:fr})],Q.prototype,"heightModelInfo",null),a([u({type:U.ofType(Bo)})],Q.prototype,"highlights",null),a([u({readOnly:!0})],Q.prototype,"interacting",null),a([u({constructOnly:!0})],Q.prototype,"layerViewFilter",void 0),a([u({readOnly:!0})],Q.prototype,"navigating",null),a([u({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Q.prototype,"preconditionsReady",null),a([u({readOnly:!0})],Q.prototype,"typeSpecificPreconditionsReady",void 0),a([u({type:U,readOnly:!0})],Q.prototype,"layerViews",void 0),a([u()],Q.prototype,"resolution",null),a([u({type:FT})],Q.prototype,"magnifier",void 0),a([u({value:null,type:c$})],Q.prototype,"map",null),a([u()],Q.prototype,"padding",void 0),a([u({readOnly:!0})],Q.prototype,"ready",void 0),a([u()],Q.prototype,"_readyStateWaitingTask",void 0),a([u({readOnly:!0})],Q.prototype,"readyState",null),a([u({type:B})],Q.prototype,"spatialReference",null),a([u()],Q.prototype,"stationary",null),a([u({type:it})],Q.prototype,"timeExtent",null),a([u({type:String,nonNullable:!0})],Q.prototype,"timeZone",null),a([u()],Q.prototype,"tools",null),a([u()],Q.prototype,"toolViewManager",void 0),a([u({readOnly:!0})],Q.prototype,"type",void 0),a([u({type:Number})],Q.prototype,"scale",void 0),a([u({readOnly:!0})],Q.prototype,"updating",void 0),a([u({readOnly:!0})],Q.prototype,"initialExtentRequired",void 0),a([u({readOnly:!0})],Q.prototype,"initialExtent",null),a([u()],Q.prototype,"cursor",null),a([u({readOnly:!0})],Q.prototype,"input",void 0),a([u({type:h4,nonNullable:!0})],Q.prototype,"navigation",void 0),a([u()],Q.prototype,"layerViewManager",void 0),a([u()],Q.prototype,"analysisViewManager",void 0),a([u()],Q.prototype,"selectionManager",void 0),a([u()],Q.prototype,"width",void 0),a([u()],Q.prototype,"height",void 0),a([u({readOnly:!0})],Q.prototype,"resizing",void 0),a([u({value:null,readOnly:!0})],Q.prototype,"size",null),a([u({readOnly:!0})],Q.prototype,"suspended",void 0),a([u({readOnly:!0})],Q.prototype,"viewEvents",void 0),a([u({readOnly:!0})],Q.prototype,"persistableViewModels",void 0),a([u()],Q.prototype,"_isValid",void 0),a([u()],Q.prototype,"_readyCycleForced",void 0),a([u()],Q.prototype,"_lockedSpatialReference",void 0),a([u()],Q.prototype,"_userTimeZone",void 0),a([u()],Q.prototype,"_lockedTimeZone",void 0),a([u()],Q.prototype,"_userTimeExtent",void 0),a([u()],Q.prototype,"_lockedTimeExtent",void 0),a([u({type:T3})],Q.prototype,"theme",void 0),a([u({readOnly:!0,type:T3})],Q.prototype,"effectiveTheme",null),Q=hu=a([_("esri.views.View")],Q);const wy=globalThis.$arcgis;wy&&!wy.views&&Object.defineProperty(wy,"views",{configurable:!1,enumerable:!0,writable:!1,value:Q.views});const _q=Q;function Sq(t){return t.layerViews}function Qe(){return[0,0]}function xq(t){return[t[0],t[1]]}function Gh(t,e){return[t,e]}function $q(t,e){return[t,e]}function Tq(t,e=Qe()){const r=Math.min(2,t.length);for(let i=0;i<r;++i)e[i]=t[i];return e}function eI(){return Qe()}function tI(){return Gh(1,1)}function rI(){return Gh(1,0)}function iI(){return Gh(0,1)}const Iq=eI(),Mq=tI(),Eq=rI(),Pq=iI();Object.freeze(Object.defineProperty({__proto__:null,ONES:Mq,UNIT_X:Eq,UNIT_Y:Pq,ZEROS:Iq,clone:xq,create:Qe,freeze:$q,fromArray:Tq,fromValues:Gh,ones:tI,unitX:rI,unitY:iI,zeros:eI},Symbol.toStringTag,{value:"Module"}));function Oq(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function sI(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Rq(t,e,r,i,s,n,o){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t[4]=n,t[5]=o,t}function L6(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5];let c=r*n-i*s;return c?(c=1/c,t[0]=n*c,t[1]=-i*c,t[2]=-s*c,t[3]=r*c,t[4]=(s*l-n*o)*c,t[5]=(i*o-r*l)*c,t):null}function Cq(t){return t[0]*t[3]-t[1]*t[2]}function nI(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=r[0],h=r[1],y=r[2],f=r[3],m=r[4],g=r[5];return t[0]=i*d+n*h,t[1]=s*d+o*h,t[2]=i*y+n*f,t[3]=s*y+o*f,t[4]=i*m+n*g+l,t[5]=s*m+o*g+c,t}function Bh(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=Math.sin(r),h=Math.cos(r);return t[0]=i*h+n*d,t[1]=s*h+o*d,t[2]=i*-d+n*h,t[3]=s*-d+o*h,t[4]=l,t[5]=c,t}function y4(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=r[0],h=r[1];return t[0]=i*d,t[1]=s*d,t[2]=n*h,t[3]=o*h,t[4]=l,t[5]=c,t}function Qc(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=r[0],h=r[1];return t[0]=i,t[1]=s,t[2]=n,t[3]=o,t[4]=i*d+n*h+l,t[5]=s*d+o*h+c,t}function oI(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=0,t[5]=0,t}function aI(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function k6(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Lq(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function kq(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function Aq(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function lI(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function Fq(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function Nq(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t[4]=e[4]+r[4]*i,t[5]=e[5]+r[5]*i,t}function Dq(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function jq(t,e){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=e[0],d=e[1],h=e[2],y=e[3],f=e[4],m=e[5],g=Mr();return Math.abs(r-c)<=g*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-d)<=g*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-h)<=g*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-y)<=g*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-f)<=g*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(l-m)<=g*Math.max(1,Math.abs(l),Math.abs(m))}const Vq=nI,zq=lI;Object.freeze(Object.defineProperty({__proto__:null,add:Aq,copy:Oq,determinant:Cq,equals:jq,exactEquals:Dq,frob:kq,fromRotation:oI,fromScaling:aI,fromTranslation:k6,identity:sI,invert:L6,mul:Vq,multiply:nI,multiplyScalar:Fq,multiplyScalarAndAdd:Nq,rotate:Bh,scale:y4,set:Rq,str:Lq,sub:zq,subtract:lI,translate:Qc},Symbol.toStringTag,{value:"Module"}));function Zs(){return[1,0,0,1,0,0]}function Uq(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function qq(t,e,r,i,s,n){return[t,e,r,i,s,n]}const Gq=Zs();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Gq,clone:Uq,create:Zs,fromValues:qq},Symbol.toStringTag,{value:"Module"}));const v1={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new wt({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:B.WebMercator}),minus180Line:new wt({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:B.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new wt({paths:[[[180,-180],[180,180]]],spatialReference:B.WGS84}),minus180Line:new wt({paths:[[[-180,-180],[-180,180]]],spatialReference:B.WGS84})}};function tl(t,e){return Math.ceil((t-e)/(2*e))}function uI(t,e){const r=Ad(t);for(const i of r)for(const s of i)s[0]+=e;return t}function Ad(t){return nl(t)?t.rings:t.paths}function Zue(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function la(t){return typeof t=="string"?Qs(t):P(t)}function Bq(t,e,r){const i={};for(const s in t){if(s==="declaredClass")continue;const n=t[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))i[s]=n.map(o=>Bq(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(r?.[s]);i[s]=e?o:JSON.stringify(o)}else i[s]=e?n:JSON.stringify(n);else i[s]=n}return i}function Hq(t,e){return t?e&&UR(t)?e:zR(t)??nt?.findCredential(t)?.token:null}async function Jue(t,e,r){const i=Hq(t,e);return i||(!nt&&Hr.request.useIdentity&&await R(()=>import("./money-tides-IdentityManager-B-eAacVC.js"),__vite__mapDeps([201,3,4,1,2,5,6,7,13,14,172])),(await nt.getCredential(t,r))?.token)}async function Wq(t,e,r,i){const s=la(t),n=e[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:Kd(n),target:JSON.stringify({geometryType:kh(e[0]),geometries:e}),cutter:JSON.stringify(r)}},l=await Te(s.path+"/cut",o),{cutIndexes:c,geometries:d=[]}=l.data;return{cutIndexes:c,geometries:d.map(h=>{const y=Xo(h);return y.spatialReference=n,y})}}function Zq(t){return{geometryType:kh(t[0]),geometries:t.map(e=>e.toJSON())}}function Jq(t,e,r){const i=XD(e);return t.map(s=>{const n=i.fromJSON(s);return n.spatialReference=r,n})}async function Qq(t,e,r){const i=typeof t=="string"?Qs(t):t,s=e[0].spatialReference,n=kh(e[0]),o={...r,query:{...i.query,f:"json",sr:Kd(s),geometries:JSON.stringify(Zq(e))}},{data:l}=await Te(i.path+"/simplify",o);return Jq(l.geometries,n,s)}const cI=()=>N.getLogger("esri.geometry.support.normalizeUtils");function Kq(t){return t.type==="polygon"}function Yq(t){return t[0].type==="polygon"}function Xq(t){return t[0].type==="polyline"}function V7(t){const e=[];let r=0,i=0;for(let s=0;s<t.length;s++){const n=t[s];let o=null;for(let l=0;l<n.length;l++)o=n[l],e.push(o),l===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&e.push([(r+i)/2,0])}return e}function eG(t,e){if(!(t instanceof wt||t instanceof Ve)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw cI().error(s),new I("internal:geometry",s)}const r=Ad(t),i=[];for(const s of r){const n=[];i.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const l=s[o][0],c=s[o][1],d=s[o+1][0],h=s[o+1][1],y=Math.sqrt((d-l)*(d-l)+(h-c)*(h-c)),f=(h-c)/y,m=(d-l)/y,g=y/e;if(g>1){for(let $=1;$<=g-1;$++){const E=$*e,T=m*E+l,O=f*E+c;n.push([T,O])}const v=(y+Math.floor(g-1)*e)/2,b=m*v+l,S=f*v+c;n.push([b,S])}n.push([d,h])}}return Kq(t)?new Ve({rings:i,spatialReference:t.spatialReference}):new wt({paths:i,spatialReference:t.spatialReference})}function z7(t,e,r){if(e){const i=eG(t,1e6);t=Qa(i,!0)}return r&&(t=uI(t,r)),t}function U7(t,e,r){if(Array.isArray(t)){const i=t[0];if(i>e){const s=tl(i,e);t[0]=i+s*(-2*e)}else if(i<r){const s=tl(i,r);t[0]=i+s*(-2*r)}}else{const i=t.x;if(i>e){const s=tl(i,e);t=t.clone().offset(s*(-2*e),0)}else if(i<r){const s=tl(i,r);t=t.clone().offset(s*(-2*r),0)}}return t}function tG(t,e){let r=-1;for(let i=0;i<e.cutIndexes.length;i++){const s=e.cutIndexes[i],n=e.geometries[i],o=Ad(n);for(let l=0;l<o.length;l++){const c=o[l];c.some(d=>{if(d[0]<180)return!0;{let h=0;for(let f=0;f<c.length;f++){const m=c[f][0];h=m>h?m:h}h=Number(h.toFixed(9));const y=-360*tl(h,180);for(let f=0;f<c.length;f++){const m=n.getPoint(l,f);n.setPoint(l,f,m.clone().offset(y,0))}return!0}})}if(s===r){if(Yq(t))for(const l of Ad(n))t[s]=t[s].addRing(l);else if(Xq(t))for(const l of Ad(n))t[s]=t[s].addPath(l)}else r=s,t[s]=n}return t}async function pI(t,e,r){if(!Array.isArray(t))return pI([t],e);e&&typeof e!="string"&&cI().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof e=="string"?e:e?.url??Hr.geometryServiceUrl;let s,n,o,l,c,d,h,y,f=0;const m=[],g=[];for(const T of t)if(T!=null)if(s||(s=T.spatialReference,n=Ir(s),o=s.isWebMercator,d=o?102100:4326,l=v1[d].maxX,c=v1[d].minX,h=v1[d].plus180Line,y=v1[d].minus180Line),n)if(T.type==="mesh")g.push(T);else if(T.type==="point")g.push(U7(T.clone(),l,c));else if(T.type==="multipoint"){const O=T.clone();O.points=O.points.map(C=>U7(C,l,c)),g.push(O)}else if(T.type==="extent"){const O=T.clone()._normalize(!1,!1,n);g.push(O.rings?new Ve(O):O)}else if(T.extent){const O=T.extent,C=tl(O.xmin,c)*(2*l);let z=C===0?T.clone():uI(T.clone(),C);O.offset(C,0);let{xmin:q,xmax:J}=O;q=Number(q.toFixed(9)),J=Number(J.toFixed(9)),O.intersects(h)&&J!==l?(f=J>f?J:f,z=z7(z,o),m.push(z),g.push("cut")):O.intersects(y)&&q!==c?(f=J*(2*l)>f?J*(2*l):f,z=z7(z,o,360),m.push(z),g.push("cut")):g.push(z)}else g.push(T.clone());else g.push(T);else g.push(T);let v=tl(f,l),b=-90;const S=v,$=new wt;for(;v>0;){const T=360*v-180;$.addPath([[T,b],[T,-1*b]]),b*=-1,v--}if(m.length>0&&S>0){const T=tG(m,await Wq(i,m,$,r)),O=[],C=[];for(let J=0;J<g.length;J++){const oe=g[J];if(oe!=="cut")C.push(oe);else{const le=T.shift(),re=t[J];re!=null&&re.type==="polygon"&&re.rings&&re.rings.length>1&&le.rings.length>=re.rings.length?(O.push(le),C.push("simplify")):C.push(o?Go(le):le)}}if(!O.length)return C;const z=await Qq(i,O,r),q=[];for(let J=0;J<C.length;J++){const oe=C[J];oe!=="simplify"?q.push(oe):q.push(o?Go(z.shift()):z.shift())}return q}const E=[];for(let T=0;T<g.length;T++){const O=g[T];if(O!=="cut")E.push(O);else{const C=m.shift();E.push(o===!0?Go(C):C)}}return E}function rG(t){if(!t)return null;const e=t.extent;if(!e)return null;const r=t.spatialReference&&Ir(t.spatialReference);if(!r)return e;const[i,s]=r.valid,n=2*s,{width:o}=e;let l,{xmin:c,xmax:d}=e;if([c,d]=[d,c],t.type==="extent"||o===0||o<=s||o>n||c<i||d>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;l=V7(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;l=V7(t.paths);break;case"multipoint":l=t.points}const h=e.clone();for(let y=0;y<l.length;y++){let f=l[y][0];f<0?(f+=s,d=Math.max(f,d)):(f-=s,c=Math.min(f,c))}return h.xmin=c,h.xmax=d,h.width<o?(h.xmin-=s,h.xmax-=s,h):e}function A6(t,e,r){const i=Ir(r);if(i==null)return t;const[s,n]=i.valid,o=2*n;let l=0,c=0;e>n?l=Math.ceil(Math.abs(e-n)/o):e<s&&(l=-Math.ceil(Math.abs(e-s)/o)),t>n?c=Math.ceil(Math.abs(t-n)/o):t<s&&(c=-Math.ceil(Math.abs(t-s)/o));let d=t+(l-c)*o;const h=d-e;return h>n?d-=o:h<s&&(d+=o),d}function Que(t,e){return F6(e)?.normalize(t)??t}function F6(t){const e=Ir(t);if(e==null)return null;const[r,i]=e.valid;return new o4(r,i)}const Kue=F6(B.WGS84);F6(B.WebMercator);const dI=96,hI=39.37,iG=180/Math.PI;function yI(t){return t.wkid?t:t.spatialReference||B.WGS84}function N6(t,e){return e.type?Dt(t,e.x,e.y):Zu(t,e)}function fI(t){return _i(t)}function f4(t,e,r=0){let i=t.width,s=t.height;if(r!==0){const l=Oh(r),c=Math.abs(Math.cos(l)),d=Math.abs(Math.sin(l));i=t.width*c+t.height*d,s=t.width*d+t.height*c}const n=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(i/n,s/o)*pG(t.spatialReference)}async function Zp(t,e,r,i){let s,n;if(!t||Array.isArray(t)&&!t.length)return null;if(U.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const l=t.every(h=>"attributes"in h),c=t.some(h=>!h.geometry);let d=t;if(l&&c&&e&&e.allLayerViews){const h=new Map;for(const g of t){const v=g.layer,b=h.get(v)||[],S=g.attributes[v.objectIdField];S!=null&&b.push(S),h.set(v,b)}const y=[];h.forEach((g,v)=>{const b=e.allLayerViews?.find(S=>S.layer.id===v.id);if(b&&"queryFeatures"in b){const S=v.createQuery();S.objectIds=g,S.returnGeometry=!0,y.push(b.queryFeatures(S))}});const f=await Promise.all(y),m=[];for(const g of f)if(g&&g.features&&g.features.length)for(const v of g.features)v.geometry!=null&&m.push(v.geometry);d=m}for(const h of d)i=await Zp(h,e,r,i);return i}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new ne(t);else if(t instanceof It)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const l=t.layer,c=e.allLayerViews?.find(d=>d.layer.id===l.id);if(c&&"queryFeatures"in c){const d=l.createQuery();d.objectIds=[t.attributes[l.objectIdField]],d.returnGeometry=!0,s=(await c.queryFeatures(d))?.features?.[0]?.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new ue({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=rG(s);break;default:n=s.extent}if(!n)return null;eo()||ws(n.spatialReference,r)||await Yo();const o=ia(n,r);if(!o)return null;if(i){const l=o.center,c=l.clone();c.x=A6(l.x,i.center.x,r),c.x!==l.x&&o.centerAt(c),i=i.union(o)}else i=o;return i}function sG(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,r=0;for(const i of t){const s=i.layer;s?.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,r=s.maxScale>r?s.maxScale:r)}return e&&r?{min:e,max:r}:null}}}function q7(t,e){const r=yI(t);return at(r,e)||r.imageCoordinateSystem||e.imageCoordinateSystem?t:ia(t,e)}async function nG(t,e){if(!t||!e)return new Vi({targetGeometry:new ne,scale:0,rotation:0});let r=e.spatialReference;const{constraints:i,padding:s,viewpoint:n,size:o}=e,l=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let c=null;t instanceof Vi?c=t:t.viewpoint?c=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(c=t.target);let d=null;c?.targetGeometry?d=c.targetGeometry:t instanceof ue?d=t:t instanceof It?d=await Zp(t,e,r):t&&(d=await Zp(t.center,e,r)||await Zp(t.target,e,r)||await Zp(t,e,r)),!d&&n?.targetGeometry?d=n.targetGeometry:!d&&e.extent&&(d=e.extent),r||(r=yI(e.spatialReference||e.extent||d)),eo()||at(d.spatialReference,r)||ws(d.spatialReference,r)||await Yo();const h=q7(d,r),y="center"in h?h.center:h;e.pickClosestTarget!==!1&&y.type==="point"&&n.targetGeometry?.type==="point"&&(y.x=A6(y.x,n.targetGeometry.x,y.spatialReference));let f=0;c?f=c.rotation:t.hasOwnProperty("rotation")?f=t.rotation:n&&(f=n.rotation);let m=0;m=c?.targetGeometry!=null&&c.targetGeometry.type==="point"?c.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(t.zoom):Array.isArray(d)||d.type==="point"||d.type==="extent"&&d.width===0&&d.height===0?n.scale:f4(q7(d.extent,r),l,f);const g=sG(t.target??t);g&&(g.min&&g.min<m?m=g.min:g.max&&g.max>m&&(m=g.max));let v=new Vi({targetGeometry:y,scale:m,rotation:f});return i&&(v=i.fit(v),i.constrainByGeometry(v),i.rotationEnabled||(v.rotation=n.rotation)),v}function or(t,e){const r=t.targetGeometry,i=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function oG(t,e,r){return r?Dt(t,.5*(e[0]-r.right+r.left),.5*(e[1]-r.bottom+r.top)):Rh(t,e,.5)}const aG=(function(){const t=Qe();return function(e,r,i){const s=r.targetGeometry;N6(t,s);const n=.5*ip(r);return e.xmin=t[0]-n*i[0],e.ymin=t[1]-n*i[1],e.xmax=t[0]+n*i[0],e.ymax=t[1]+n*i[1],e.spatialReference=s.spatialReference,e}})();function lG(t,e,r,i,s){return O3(t,e,r.center),t.scale=f4(r,i),s?.constraints?.constrain(t),t}function uG(t,e,r,i){return V6(t,e,r,i),L6(t,t)}const mI=(function(){const t=Qe();return function(e,r,i){return X5(e,dG(e,r),oG(t,r,i))}})(),cG=(function(){const t=Zs(),e=Qe();return function(r,i,s,n){const o=ip(i),l=D6(i);return Dt(e,o,o),aI(t,e),Bh(t,t,l),Qc(t,t,mI(e,s,n)),Qc(t,t,[0,n.top-n.bottom]),Dt(r,t[4],t[5])}})();function ip(t){return t.scale*gI(t.targetGeometry?.spatialReference)}function gI(t){return yi(t)?1/(fI(t)*hI*dI):1}function D6(t){return Y5(t.rotation)||0}function pG(t){return yi(t)?fI(t)*hI*dI:1}function dG(t,e){return Rh(t,e,.5)}const j6=(function(){const t=Qe(),e=Qe(),r=Qe();return function(i,s,n,o,l,c){return JS(t,s),Rh(e,n,.5*c),Dt(r,1/o*c,-1/o*c),k6(i,e),l&&Bh(i,i,l),y4(i,i,r),Qc(i,i,t),i}})(),V6=(function(){const t=Qe();return function(e,r,i,s){const n=ip(r),o=D6(r);return N6(t,r.targetGeometry),j6(e,t,i,n,o,s)}})(),hG=(function(){const t=Qe();return function(e,r,i,s){const n=ip(r);return N6(t,r.targetGeometry),j6(e,t,i,n,0,s)}})();function vI(t){const e=Ir(t);return e?e.valid[1]-e.valid[0]:0}function yG(t,e){return Math.round(vI(t)/e)}const fG=(function(){const t=Qe(),e=Qe(),r=[0,0,0];return function(i,s,n){eh(t,i,s),zf(t,t),eh(e,i,n),zf(e,e),KS(r,t,e);let o=Math.acos(QS(t,e)/(p2(t)*p2(e)))*iG;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),mG=(function(){const t=Qe();return function(e,r,i,s){const n=e.targetGeometry;return or(e,r),cG(t,r,i,s),n.x+=t[0],n.y+=t[1],e}})(),O3=function(t,e,r){or(t,e);const i=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t},gG=(function(){const t=Qe();return function(e,r,i,s,n){n||(n="center"),X5(t,i,s),Rh(t,t,.5);const o=t[0],l=t[1];switch(n){case"center":Dt(t,0,0);break;case"left":Dt(t,-o,0);break;case"top":Dt(t,0,l);break;case"right":Dt(t,o,0);break;case"bottom":Dt(t,0,-l);break;case"top-left":Dt(t,-o,l);break;case"bottom-left":Dt(t,-o,-l);break;case"top-right":Dt(t,o,l);break;case"bottom-right":Dt(t,o,-l)}return m4(e,r,t),e}})();function Yue(t,e,r){return or(t,e),t.rotation+=r,t}function vG(t,e,r){return or(t,e),t.rotation=r,t}const wG=(function(){const t=Qe();return function(e,r,i,s,n){return or(e,r),isNaN(i)||i===0||(bI(t,s,r,n),e.scale=r.scale*i,_I(t,t,e,n),m4(e,e,Dt(t,t[0]-s[0],s[1]-t[1]))),e}})();function G7(t,e,r){return or(t,e),t.scale=r,t}const wI=(function(){const t=Qe();return function(e,r,i,s,n,o){return or(e,r),isNaN(i)||i===0||(bI(t,n,r,o),e.scale=r.scale*i,e.rotation+=s,_I(t,t,e,o),m4(e,e,Dt(t,t[0]-n[0],n[1]-t[1]))),e}})(),Xue=(function(){const t=Qe(),e=Qe();return function(r,i,s,n,o,l,c){return mI(e,l,c),BS(t,o,e),n?wI(r,i,s,n,t,l):wG(r,i,s,t,l)}})(),bI=(function(){const t=Zs();return function(e,r,i,s){return Ds(e,r,uG(t,i,s,1))}})(),_I=(function(){const t=Zs();return function(e,r,i,s){return Ds(e,r,V6(t,i,s,1))}})(),m4=(function(){const t=Qe(),e=Zs();return function(r,i,s){or(r,i);const n=ip(i),o=r.targetGeometry;return oI(e,D6(i)),y4(e,e,Gh(n,n)),Ds(t,s,e),o.x+=t[0],o.y+=t[1],r}})();function SI(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function bG(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function _G(t,e,r,i,s,n){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function xI(t,e,r,i){const s=e[i],n=e[i+1];t[i]=r[0]*s+r[2]*n+r[4],t[i+1]=r[1]*s+r[3]*n+r[5]}function SG(t,e,r,i=0,s=0,n=2){const o=s||e.length/n;for(let l=i;l<o;l++)xI(t,e,r,l*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:bG,create:SI,fromValues:_G,transform:xI,transformMany:SG},Symbol.toStringTag,{value:"Module"}));function O0(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function xG(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function $G(t,e,r,i,s,n,o,l,c){const d=new Float32Array(9);return d[0]=t,d[1]=e,d[2]=r,d[3]=i,d[4]=s,d[5]=n,d[6]=o,d[7]=l,d[8]=c,d}Object.freeze(Object.defineProperty({__proto__:null,clone:xG,create:O0,fromValues:$G},Symbol.toStringTag,{value:"Module"}));function $I(){return new Float32Array(2)}function TG(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function Kc(t,e){const r=new Float32Array(2);return r[0]=t,r[1]=e,r}function TI(){return $I()}function II(){return Kc(1,1)}function MI(){return Kc(1,0)}function EI(){return Kc(0,1)}const IG=TI(),MG=II(),EG=MI(),PG=EI();Object.freeze(Object.defineProperty({__proto__:null,ONES:MG,UNIT_X:EG,UNIT_Y:PG,ZEROS:IG,clone:TG,create:$I,fromValues:Kc,ones:II,unitX:MI,unitY:EI,zeros:TI},Symbol.toStringTag,{value:"Module"}));function OG(t){return t instanceof Float32Array&&t.length>=2}function RG(t){return Array.isArray(t)&&t.length>=2}function by(t){return OG(t)||RG(t)}var R3;const en=[0,0];let fn=R3=class extends F{constructor(t){super(t),this._viewpoint2D={center:Qe(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new ue,this.id=0,this.inverseTransform=Zs(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Zs(),this.transformNoRotation=Zs(),this.displayMat3=O0(),this.displayViewMat3=O0(),this.viewMat3=O0(),this.viewMat2d=SI(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,r=t.targetGeometry;e.center[0]=r.x,e.center[1]=r.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,r=this.viewpoint;return r&&e?(this.viewpoint=or(r,t.viewpoint),this._set("size",Zu(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new R3({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,r){return by(e)?Ds(t,e,this.inverseTransform):(en[0]=e,en[1]=r,Ds(t,en,this.inverseTransform))}toScreen(t,e,r){return by(e)?Ds(t,e,this.transform):(en[0]=e,en[1]=r,Ds(t,en,this.transform))}toScreenNoRotation(t,e,r){return by(e)?Ds(t,e,this.transformNoRotation):(en[0]=e,en[1]=r,Ds(t,en,this.transformNoRotation))}wrapMapCoordinate(t,e){Zu(t,e);const[r]=e,[i]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:l}=s;if(n.isWrappable){const c=vI(n)/2;o=Math.max(o,i-c),l=Math.min(l,i+c)}return(r<o||r>l)&&(t[0]=A6(r,i,n)),t}getScreenTransform(t,e){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size");return j6(t,r,s,e,0,i),t}_update(){const{center:t,spatialReference:e,scale:r,rotation:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Vi({targetGeometry:new ne(t[0],t[1],e),scale:r,rotation:i});if(this._set("viewpoint",o),!n||!e||!r)return;this.resolution=ip(o),this.rotation=i,this.scale=r,this.spatialReference=e,Zu(this.center,t);const l=n[0]!==0?2/n[0]:0,c=n[1]!==0?-2/n[1]:0;Ju(this.displayMat3,l,0,0,0,c,0,-1,1,1);const d=ix(this.viewMat3),h=Kc(n[0]/2,n[1]/2),y=Kc(-n[0]/2,-n[1]/2),f=Y5(i);qf(d,d,h),ox(d,d,f),qf(d,d,y),rh(this.displayViewMat3,this.displayMat3,d);const m=k6(this.viewMat2d,h);return Bh(m,m,f),Qc(m,m,y),aG(this.extent,o,n),V6(this.transform,o,n,s),L6(this.inverseTransform,this.transform),hG(this.transformNoRotation,o,n,s),this.worldScreenWidth=yG(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};a([u({readOnly:!0})],fn.prototype,"id",void 0),a([u({value:1,json:{write:!0}})],fn.prototype,"pixelRatio",null),a([u({json:{write:!0}})],fn.prototype,"size",null),a([u()],fn.prototype,"spatialReference",void 0),a([u({type:Vi,json:{write:!0}})],fn.prototype,"viewpoint",null),a([u({readOnly:!0})],fn.prototype,"visibleArea",null),fn=R3=a([_("esri.views.2d.ViewState")],fn);const B7=fn;var C3,L3;let Dn=C3=class extends Z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new C3({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};a([u()],Dn.prototype,"left",void 0),a([u()],Dn.prototype,"top",void 0),a([u()],Dn.prototype,"right",void 0),a([u()],Dn.prototype,"bottom",void 0),Dn=C3=a([_("esri.views.2d.PaddedViewState.Padding")],Dn);let yu=L3=class extends B7{constructor(...t){super(...t),this.paddedViewState=new B7,this._updateContent=(()=>{const e=Qe();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const s=this.paddedViewState;Dt(e,i.left+i.right,i.top+i.bottom),eh(e,r,e),Zu(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(X(()=>[this.size,this.padding],()=>this._updateContent(),ht)),this.padding=new Dn,this.size=[0,0]}set padding(t){this._set("padding",t||new Dn)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const r=this._get("padding");r&&(e=mG(t.clone(),t,this._get("size"),r));const{targetGeometry:i,rotation:s,scale:n}=e,{x:o,y:l,spatialReference:c}=i,d=this._viewpoint2D;d.center[0]=o,d.center[1]=l,d.rotation=s,d.scale=n,d.spatialReference=c,this._update()}}clone(){return new L3({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};a([u()],yu.prototype,"paddedViewState",void 0),a([u({type:Dn})],yu.prototype,"padding",null),a([u()],yu.prototype,"viewpoint",null),yu=L3=a([_("esri.views.2d.PaddedViewState")],yu);const z6=yu;let Jp=class extends Z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};a([u()],Jp.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),a([u()],Jp.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Jp=a([_("esri.views.support.debugFlags")],Jp);const CG=new Jp,PI=Symbol("Yield");let LG=class{constructor(){this._tasks=new Array,this._numPendingTasks=Ac(0),this._readyToRun=Ac(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return PI;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,r,i){return this._addTask((s,n)=>new W7(s,n,e,r,i),Array.prototype.push)}unshift(e,r,i){return this._addTask((s,n)=>new W7(s,n,e,r,i),Array.prototype.unshift)}pushGenerator(e,r,i){return this._addTask((s,n)=>new kG(s,n,e,r,i),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const r=this._tasks.shift();this._updateReadyToRun();try{if(Gs(r.signal))this._cancelTask(r,Mt());else switch(r.type){case 0:this._processSimple(r,e);break;case 1:this._processGenerator(r,e);break;case 2:this._processIterator(r,e);break;default:O_(r)}}catch(i){r.reject(i)}return!0}cancelAll(){const e=Mt();for(const r of this._tasks)this._cancelTask(r,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,r){if(e.abortCallback){const i=e.abortCallback(r);e.type===2&&e.iterator.return&&H7(e.iterator.return()),Tr(i)?i.then(e.resolve,e.reject):e.resolve(i)}else e.type===2&&e.iterator.throw&&H7(e.iterator.throw(r)),e.reject(r)}_onIteratorResult(e,r){r.done?e.resolve(r.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,r){const i=e.callback(r);Tr(i)?i.then(e.resolve,e.reject):e.resolve(i)}_processGenerator(e,r){const i=e.generatorFunction(r),s=new AG(e.resolve,e.reject,i,e.signal,e.abortCallback);this._processIterator(s,r)}_processIterator(e,r){const i=e.iterator.next(r);Tr(i)?i.then(s=>this._onIteratorResult(e,s),e.reject):this._onIteratorResult(e,i)}_addTask(e,r){return new Promise((i,s)=>{const n=e(i,s);r.call(this._tasks,n),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function H7(t){Tr(t)?t.then(_y,_y):_y(t)}function _y(t){vi(t)||t instanceof Error||t instanceof I||t!=null&&typeof t=="object"&&"done"in t&&t.done||N.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let U6=class{constructor(e,r,i=void 0,s=void 0){this.resolve=e,this.reject=r,this.signal=i,this.abortCallback=s}},W7=class extends U6{constructor(e,r,i,s,n){super(e,r,s,n),this.callback=i,this.type=0}},kG=class extends U6{constructor(e,r,i,s,n){super(e,r,s,n),this.generatorFunction=i,this.type=1}},AG=class extends U6{constructor(e,r,i,s,n){super(e,r,s,n),this.iterator=i,this.type=2}};function FG(){return new zG}const fe={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},Ci=0,Z7=new Map([[fe.RESOURCE_CONTROLLER_IMMEDIATE,Ci],[fe.RESOURCE_CONTROLLER,4],[fe.SLIDE,Ci],[fe.STREAM_DATA_LOADER,Ci],[fe.ELEVATION_QUERY,Ci],[fe.TERRAIN_SURFACE,1],[fe.SURFACE_GEOMETRY_UPDATES,1],[fe.LOD_RENDERER,2],[fe.GRAPHICS_CORE,2],[fe.I3S_CONTROLLER,2],[fe.POINT_CLOUD_LAYER,2],[fe.FEATURE_TILE_FETCHER,2],[fe.STREAM_CONTROLLER,2],[fe.CLOUDS_GENERATOR,2],[fe.OVERLAY,4],[fe.OVERLAY_RENDERER,4],[fe.STAGE,4],[fe.GRAPHICS_DECONFLICTOR,4],[fe.FILTER_VISIBILITY,4],[fe.SCALE_VISIBILITY,4],[fe.FRUSTUM_VISIBILITY,4],[fe.POINT_OF_INTEREST_FREQUENT,6],[fe.POINT_OF_INTEREST_INFREQUENT,30],[fe.LABELER,8],[fe.FEATURE_QUERY_ENGINE,8],[fe.FEATURE_TILE_TREE,16],[fe.FEATURE_TILE_TREE_ACTIVE,Ci],[fe.ELEVATION_ALIGNMENT,12],[fe.ELEVATION_ALIGNMENT_SCENE,14],[fe.TEXT_TEXTURE_ATLAS,12],[fe.TEXTURE_UNLOAD,12],[fe.LINE_OF_SIGHT_TOOL,16],[fe.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ci],[fe.SNAPPING,Ci],[fe.SHADOW_ACCUMULATOR,30],[fe.FLOW_GENERATOR,12],[fe.MAPVIEW_FETCH_QUEUE,Ci],[fe.MAPVIEW_LAYERVIEW_UPDATE,2],[fe.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Ci]]);function J7(t){return Z7.has(t)?Z7.get(t):typeof t=="number"?t:1}const NG=We(6.5),Q7=We(1),DG=We(30),jG=We(1e3/30),VG=We(100),K7=.9;let zG=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=Ac(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new N4("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new OI,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=X(()=>CG.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,lr);for(const e of Object.keys(fe))this.performanceInfo.tasks.set(fe[e],new N4(String(fe[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,Je(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,r){const i=new UG(this,e,r);return this._tasks.push(i),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new N4(e)),i}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const r=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-r),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let r=NG,i=e.frameDuration,s=Q7;switch(this.state){case 2:r=We(0),i=We(Math.max(VG,e.frameDuration)),s=DG;break;case 1:i=We(Math.max(jG,e.frameDuration))}return i=We(i-e.elapsedFrameTime-r),this.state!==2&&i<Q7&&!this._forceTask?(this._forceTask=!0,!1):(i=We(Math.max(i,s)),this._budget.reset(i),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(We(0)),this._budget.madeProgress()}removeTask(e){bf(this._tasks,e),bf(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(r=>{r.name===e&&r.setPriority(e)})}_getState(e){if(this._runQueue.some(i=>i.name===e))return"s";let r="i";return this._tasks.forEach(i=>{i.name===e&&i.needsUpdate&&(i.schedulePriority<=1?r="r":r!=="r"&&(r="w"))}),r}_getRuntime(e){let r=0;return this._tasks.forEach(i=>{i.name===e&&(r+=i.runtime)}),r}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(i=>{i.needsUpdate&&e.set(i.name,(e.get(i.name)||0)+1)}),e.size===0)return null;let r="";return e.forEach((i,s)=>{r+=i>1?` ${i}x ${s}`:` ${s}`}),r}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((r,i)=>i.needsUpdate?++r:r,0);this._load=this._load*K7+e*(1-K7)}_schedule(){for(xC(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===Ci&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,r=0;if(this._tasks.forEach(i=>{i.needsUpdate&&i.schedulePriority!==0&&i.basePriority!==Ci&&i.blockFrame!==this._frameNumber&&(e=!0,r=Math.max(r,i.basePriority),i.schedulePriority===1?(i.schedulePriority=0,this._runQueue.push(i)):--i.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),r=this._runQueue.pop();this._budget.resetProgress();try{r.task.runTask(this._budget)===PI&&(r.blockFrame=this._frameNumber)}catch(s){N.getLogger("esri.views.support.Scheduler").error(`Exception in task "${r.name}"`,s),r.blockFrame=this._frameNumber}!this._budget.hasProgressed&&r.blockFrame!==this._frameNumber&&r.needsUpdate&&(r.name,r.blockFrame=this._frameNumber),r.schedulePriority=r.basePriority;const i=this._budget.now()-e;if(r.runtime+=i,this._frameTaskTimes.set(r.priority,this._frameTaskTimes.get(r.priority)+i),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(fe))this._frameTaskTimes.set(fe[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((r,i)=>this.performanceInfo.tasks.get(i).push(r)),this.performanceInfo.total.push(e)}get test(){return this._test}},UG=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,r,i){this._scheduler=e,this.name=r,this.blockFrame=0,this.runtime=0,this._queue=new LG,this._handles=new E5,this._basePriority=J7(r),this.schedulePriority=this._basePriority,this._task=Ac(i??this._queue),this._handles.add(zi(()=>this.task.readyToRun,s=>e.taskRunningChanged(s)))}remove(){this.processQueue(Fd),this._scheduler.removeTask(this),this.schedule=Sy.schedule,this.reschedule=Sy.reschedule,this.scheduleGenerator=Sy.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const r=J7(e);this._basePriority!==Ci&&this.schedulePriority===0||(this.schedulePriority=r),this._basePriority=r}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,r,i){return this._queue.push(e,r,i)}reschedule(e,r,i){return this._queue.unshift(e,r,i)}scheduleGenerator(e,r,i){return this._queue.pushGenerator(e,r,i)}processQueue(e){return this._queue.runTask(e)}},OI=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const Fd=new OI;Fd.enabled=!1;let qG=class{remove(){}processQueue(){}schedule(e,r,i){try{if(Gs(r)){const s=Mt();return i?Promise.resolve(i(s)):Promise.reject(s)}return qR(e(Fd))}catch(s){return Promise.reject(s)}}reschedule(e,r,i){return this.schedule(e,r,i)}async scheduleGenerator(e,r,i){if(Gs(r)){const n=Mt();if(i)return i(n);throw n}const s=e(Fd);for(;;){const n=s.next(Fd),o=Tr(n)?await n:n;if(Gs(r)){const l=Mt();if(i){const d=i(l),h=s.return(null);return Tr(h)&&await Zd(h),d}const c=s.throw(l);throw Tr(c)&&await Zd(c),l}if(o.done)return o.value}}};const Sy=new qG;let GG=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=FG(),this._schedulerHandle=zi(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||Tr(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:n,state:{id:o}}=this.view;i?.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(r)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new z6,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=X(()=>e.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=kc(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const r=this.view.state,i=e.lastUpdateId;i!=null&&(this.stationary||e.moving)||(e.moving=!0),i!==r.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=r.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function BG(t,e){const{spatialReference:r}=e,i=[e.x,e.y];let s,n,o,l;const c=[0,0],d=HG(t);for(let f=0;f<d.length;f++){const m=d[f];for(let g=0;g<m.length-1;g++){aA(c,i,m,g);const v=t4(i,c);(s==null||v<s)&&(s=v,n=[...c],o=f,l=g)}}if(s==null||!n||o==null||l==null)throw new I("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,y]=n;return{coordinate:new ne({x:h,y,spatialReference:r}),distance:s}}function HG(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var k3;let Ba=k3=class extends U5(Z){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return ia(this.geometry,this.spatialReference)}catch(t){return N.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const r=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?Eh(this.normalizedGeometry,r):V5(this.normalizedGeometry,r))return t;const{coordinate:i}=BG(this.normalizedGeometry,r);return i&&(t.targetGeometry=i),t}clone(){return new k3({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};a([u({constructOnly:!0})],Ba.prototype,"geometry",void 0),a([u({readOnly:!0})],Ba.prototype,"normalizedGeometry",null),a([u({constructOnly:!0})],Ba.prototype,"spatialReference",void 0),Ba=k3=a([_("esri.views.2d.constraints.GeometryConstraint")],Ba);var A3;let Qp=A3=class extends U5(Z){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new A3({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};a([u()],Qp.prototype,"enabled",void 0),a([u()],Qp.prototype,"rotationEnabled",void 0),Qp=A3=a([_("esri.views.2d.constraints.RotationConstraint")],Qp);const RI=Qp;var F3;let Cr=F3=class extends U5(Z){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:r,maxScale:i,minZoom:s,maxZoom:n}=this,o=-1,l=-1,c=!1,d=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!e?.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);e=e.map(h=>h.clone()),e.sort((h,y)=>y.scale-h.scale),e.forEach((h,y)=>h.level=y);for(const h of e)!c&&r>0&&r>=h.scale&&(o=h.level,c=!0),!d&&i>0&&i>=h.scale&&(l=t?t.level:-1,d=!0),t=h;s===-1&&(s=r===0?0:o),n===-1&&(n=i===0?e.length-1:l),s=Math.max(s,0),s=Math.min(s,e.length-1),n=Math.max(n,0),n=Math.min(n,e.length-1),s>n&&([s,n]=[n,s]),r=e[s].scale,i=e[n].scale,e.splice(0,s),e.splice(n-s+1),e.forEach((h,y)=>{this._lodByScale[h.scale]=h,this._scales[y]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(t,e){if(e&&t.scale===e.scale)return t;const r=this.effectiveMinScale,i=this.effectiveMaxScale,s=t.targetGeometry,n=e&&e.targetGeometry,o=i!==0&&t.scale<i,l=r!==0&&t.scale>r;if(o||l){const c=l?r:i;if(e&&n){const d=(c-e.scale)/(t.scale-e.scale);s.x=n.x+(s.x-n.x)*d,s.y=n.y+(s.y-n.y)*d}t.scale=c}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),r=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(r>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const r=Math.floor(t),i=Math.ceil(t);return e[r]+(t-r)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let r,i;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(r=e[s],i=e[s+1],i===t)return s+this.effectiveMinZoom+1;if(r>t&&i<t)return s+this.effectiveMinZoom+1-(t-i)/(r-i)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const r=Math.round(this.scaleToZoom(t));return this.zoomToScale(r+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const r=Math.round(this.scaleToZoom(t));return this.zoomToScale(r-1)}clone(){return new F3({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,r)=>Math.abs(r-t)<=Math.abs(e-t)?r:e,this._scales[0])),this._lodByScale[t].scale}};a([u({readOnly:!0})],Cr.prototype,"effectiveLODs",void 0),a([u({readOnly:!0})],Cr.prototype,"effectiveMinZoom",void 0),a([u({readOnly:!0})],Cr.prototype,"effectiveMaxZoom",void 0),a([u({readOnly:!0})],Cr.prototype,"effectiveMinScale",void 0),a([u({readOnly:!0})],Cr.prototype,"effectiveMaxScale",void 0),a([u()],Cr.prototype,"lods",void 0),a([u()],Cr.prototype,"minZoom",void 0),a([u()],Cr.prototype,"maxZoom",void 0),a([u()],Cr.prototype,"minScale",void 0),a([u()],Cr.prototype,"maxScale",void 0),a([u()],Cr.prototype,"snapToZoom",void 0),Cr=F3=a([_("esri.views.2d.constraints.ZoomConstraint")],Cr);const CI=Cr,WG={base:null,key:"type",typeMap:{extent:ue,polygon:Ve}};let Xe=class extends Z{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new U}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Ba({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new RI({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),r=this.lods||this.view?.constraintsInfo.lods,i=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,l=this.snapToZoom;return e&&e.lods===r&&e.minZoom===i&&e.maxZoom===s&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===l?e:new CI({lods:r,minZoom:i,maxZoom:s,minScale:n,maxScale:o,snapToZoom:l})}canZoomInTo(e){const r=this.effectiveMaxScale;return r===0||e>=r}canZoomOutTo(e){const r=this.effectiveMinScale;return r===0||e<=r}constrain(e,r){return this._zoom.constrain(e,r),this._rotation.constrain(e,r),this._geometry.constrain(e,r),this.customConstraints.forEach(i=>i.constrain(e,r)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(r=>r.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};a([u({readOnly:!0})],Xe.prototype,"effectiveLODs",null),a([u({readOnly:!0})],Xe.prototype,"effectiveMinScale",null),a([u({readOnly:!0})],Xe.prototype,"effectiveMaxScale",null),a([u({readOnly:!0})],Xe.prototype,"effectiveMinZoom",null),a([u({readOnly:!0})],Xe.prototype,"effectiveMaxZoom",null),a([u({types:WG,value:null})],Xe.prototype,"geometry",null),a([u({type:[Bt]})],Xe.prototype,"lods",void 0),a([u()],Xe.prototype,"minScale",void 0),a([u()],Xe.prototype,"maxScale",void 0),a([u()],Xe.prototype,"minZoom",void 0),a([u()],Xe.prototype,"maxZoom",void 0),a([u()],Xe.prototype,"rotationEnabled",void 0),a([u()],Xe.prototype,"snapToZoom",void 0),a([u({type:U})],Xe.prototype,"customConstraints",void 0),a([u()],Xe.prototype,"view",void 0),a([u({readOnly:!0})],Xe.prototype,"version",null),a([u({type:Ba,readOnly:!0})],Xe.prototype,"_geometry",null),a([u({type:RI})],Xe.prototype,"_rotation",null),a([u({readOnly:!0,type:CI})],Xe.prototype,"_zoom",null),Xe=a([_("esri.views.2d.MapViewConstraints")],Xe);const Y7=Xe;let Xt=class extends Z{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([X(()=>this.constraints?.version,r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},ht)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new ne({x:e[0],y:e[1],spatialReference:r})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let r;try{r=this._project(e,this.state.spatialReference)}catch(s){return void N.getLogger(this).error(new I("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const i=this.viewpoint;O3(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void N.getLogger(this).error(new I("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(e,this.state.spatialReference)}catch(s){return void N.getLogger(this).error(new I("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;lG(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const r=this.viewpoint;vG(r,r,e),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;G7(r,r,e),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?i=new I("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(i=new I("mapview:invalid-viewpoint","geometry not defined"))}catch(n){i=new I("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(i)return void N.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new Vi({targetGeometry:new ne,scale:0,rotation:0});or(s,r),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const r=this.constraints?.zoomToScale(e)??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;G7(i,i,r),this.viewpoint=i,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),l=this._get("rotation"),c=this._get("viewpoint"),d=this._get("zoom"),h=d!=null&&i!=null&&i.zoomToScale(d)||void 0;let y,f,m;const g=c?.rotation,v=c?.targetGeometry;v?.type==="extent"?y=v:v?.type==="point"&&(f=v,m=c?.scale);const b=n??y;return{center:s??f??b?.center,rotation:l??g,scale:(o??h??m??(b&&f4(b,[e[0]-r.left-r.right,e[1]-r.top-r.bottom])))||void 0}}startup(e,r,i,s){const n=e.targetGeometry;try{this._project(e,i)}catch(o){N.getLogger(this).warn(new vs("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:o})),e.targetGeometry=s||new ne({x:0,y:0,spatialReference:i})}this.constraints?.fit(e),this._set("state",new z6({padding:this.padding,size:r,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,r],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new ne({x:e,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(e){const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const c=r.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=c}const i=r.clone(),[s,n]=r.center;let o=null;try{o=this._project(new ne({x:s,y:n,spatialReference:r.spatialReference}),e)}catch(c){j_()||N.getLogger(this).warn(new vs("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:c}))}o||(o=new ne({x:0,y:0,spatialReference:e}));const l=O3(new Vi({targetGeometry:new ne,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=l;try{const d=[r.size[0]/2,r.size[1]/2],h=[d[0]+20,d[1]],y=r.toMap([0,0],h),{x:f,y:m}=this._project(new ne({x:y[0],y:y[1],spatialReference:r.spatialReference}),e);y[0]=f,y[1]=m,i.toScreen(y,y);const g=fG(d,y,h),v=Math.hypot(y[0]-d[0],y[1]-d[1])/20;!Number.isFinite(v)||Math.abs(v)>4?(l.rotation=0,l.targetGeometry=new ne({x:0,y:0,spatialReference:e})):(l.scale*=v,l.scale>ie("mapview-srswitch-adjust-rotation-scale-threshold")?l.rotation=0:l.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints")?.constrain(l,void 0),this._get("state").viewpoint=l}resize(e,r){if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();i.size=[e,r],gG(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const r=[0,0],[i,s]=this.state.toMap(r,[e.x,e.y]),n=this.state.spatialReference;return new ne({x:i,y:s,spatialReference:n})}toScreen(e,r){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),s=[i.x,i.y];return r?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Et(s[0],s[1])}_project(e,r){const i=e?.targetGeometry||e;if(!r)return e;if(!i)return null;if(r.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem||at(r,i.spatialReference))return e;const s=ia(i,r);if(!s)throw new I("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return ZG(e)?(e.targetGeometry=s,e):s}};function ZG(t){return t?.declaredClass==="esri.Viewpoint"}a([u({type:ne})],Xt.prototype,"center",null),a([u()],Xt.prototype,"constraints",void 0),a([u({type:ue})],Xt.prototype,"extent",null),a([u({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Xt.prototype,"padding",null),a([u()],Xt.prototype,"ready",void 0),a([u()],Xt.prototype,"resizeAlign",void 0),a([u({readOnly:!0})],Xt.prototype,"resolution",null),a([u({type:Number})],Xt.prototype,"rotation",null),a([u({type:Number})],Xt.prototype,"scale",null),a([u({readOnly:!0})],Xt.prototype,"state",void 0),a([u({type:Vi})],Xt.prototype,"viewpoint",null),a([u({readOnly:!0})],Xt.prototype,"visibleArea",null),a([u()],Xt.prototype,"zoom",null),Xt=a([_("esri.views.2d.ViewStateManager")],Xt);const X7=160;let Kp=class extends Z{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=X7&&this.clear()},X7))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};a([u()],Kp.prototype,"_timer",void 0),a([u()],Kp.prototype,"stationary",null),Kp=a([_("esri.views.2d.support.StationaryManager")],Kp);const JG=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new Xt({constraints:new Y7({view:this})}),this.stationaryManager=new Kp,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new GG(this),this.viewEvents=new zT(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([X(()=>this.viewpoint,()=>this.stationaryManager.flip(),ht)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(i){const s=this._get("animation");if(i===s)return;if(s&&s.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const n=()=>{this.destroyed||i===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};i.when(n,n)}get constraints(){return this.stateManager?.constraints}set constraints(i){i.view=this;const s=this.stateManager.constraints;this.stateManager.constraints=i,s?.destroy()}get padding(){return this.stateManager?.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:s}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=s}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}};return a([u({readOnly:!0})],r.prototype,"animationManager",void 0),a([u({readOnly:!0})],r.prototype,"fullOpacity",void 0),a([u()],r.prototype,"stateManager",void 0),a([u()],r.prototype,"constraintsInfo",null),a([u()],r.prototype,"extent",null),a([u({readOnly:!0})],r.prototype,"state",null),a([u({readOnly:!0})],r.prototype,"mapViewNavigation",void 0),a([u()],r.prototype,"renderingOptions",void 0),a([u({readOnly:!0})],r.prototype,"interacting",null),a([u()],r.prototype,"stationary",null),a([u()],r.prototype,"animation",null),a([u({type:Y7})],r.prototype,"constraints",null),a([u()],r.prototype,"padding",null),a([u()],r.prototype,"resizeAlign",null),a([u()],r.prototype,"rotation",null),a([u({readOnly:!0})],r.prototype,"viewEvents",void 0),a([u({type:Vi})],r.prototype,"viewpoint",null),r=a([_("esri.views.Viewport2DBaseMixin")],r),r},QG=()=>Hr.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var Sc;let fu=(Sc=class extends v5{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=ta(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new I("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,r){r||(r=Tr(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",r)}},Sc.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},Sc);a([u({readOnly:!0})],fu.prototype,"done",null),a([u({readOnly:!0,type:String})],fu.prototype,"state",void 0),a([u()],fu.prototype,"target",void 0),fu=a([_("esri.views.ViewAnimation")],fu);const N3=fu;let R0=class extends Z{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,r){if(!e)return void N.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new N3;this.view.animation=i,await M5(()=>this.view.ready,r);const s={...r,animate:r?.animate??(!QG()&&this.view.animationsEnabled),animationMode:r?.animationMode??"auto"},{extent:n,spatialReference:o,size:l,viewpoint:c,constraints:d,padding:h,allLayerViews:y}=this.view,f=nG(e,{extent:n,spatialReference:o,size:l,viewpoint:c,constraints:d,padding:h,allLayerViews:y,pickClosestTarget:r?.pickClosestTarget??!0});return i?.update(f),this._gotoTask={},s.animate?this._gotoAnimated(f,s):this._gotoImmediate(f,s)}_gotoImmediate(e,r){const i=this._gotoTask,s=this.view.animation,n=e.then(o=>{if(Ce(r),i!==this._gotoTask)throw new I("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(i,s,n,r)}_gotoAnimated(e,r){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=e.then(o=>{if(Ce(r),i!==this._gotoTask)throw new I("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,r),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n,r)}_cancellableGoTo(e,r,i,s){const n=()=>e===this._gotoTask;return Ri(i,s).finally(()=>{n()&&(r.done||r.stop())})}};a([u({constructOnly:!0})],R0.prototype,"view",void 0),R0=a([_("esri.views.2d.GoToManager")],R0);function LI(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function kI(t,e){return e.some(r=>LI(t,r))}function ev(t,{dragPrimary:e,dragSecondary:r,dragTertiary:i}){return[{key:"primary",value:e},{key:"secondary",value:r},{key:"tertiary",value:i}].filter(s=>s.value===t).map(s=>s.key)}let tv=class extends Pt{constructor(e,r){super(!0),this._view=e,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(e,r){LI(e.data,"primary")&&(e.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},KG=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.pointerType=r,this.registerIncoming("double-tap-drag",i,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:r}=e,{pointerType:i}=r;if(i!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=r,{view:o}=this,{mapViewNavigation:l}=o;switch(s){case"begin":{const{scale:c}=o;this._startScale=c,this._currentScale=c,this._previousDelta=n,l.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const c=1.015**n.y,d=this._startScale*c,h=d/this._currentScale;l.setViewpointImmediate(h),this._currentScale=d;break}case"end":{const{constraints:c}=o,{effectiveLODs:d,snapToZoom:h}=c;if(!h||!d)return void l.end();const y=c.snapScale(this._currentScale),f=(n.y>0?Math.max(y,c.snapToPreviousScale(this._startScale)):Math.min(y,c.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(f).then(()=>{l.end()});break}}}},g4=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const r=e.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},YG=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.pointerActions=r,this.registerIncoming("drag",i,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new g4({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&kI(i.data,this.pointerActions)})}_handleDrag(e){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},XG=class extends Pt{constructor(e,r,i){super(!0),this._view=e,this.pointerActions=r;const s=this._view.mapViewNavigation;this._dragEventSeparator=new g4({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&kI(o.data,this.pointerActions)}),this.registerIncoming("drag",i,n=>this._dragEventSeparator.handle(n))}};function AI(t){const e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}function eB(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function tB(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}function rB(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function FI(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function NI(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function DI(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function iB(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function sB(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function nB(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function oB(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function aB(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function lB(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function uB(t,e=0,r=1){return t[0]=Math.min(Math.max(t[0],e),r),t[1]=Math.min(Math.max(t[1],e),r),t[2]=Math.min(Math.max(t[2],e),r),t}function cB(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function jI(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function pB(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t}function VI(t,e){const r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}function zI(t,e){const r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2];return r*r+i*i+s*s}function UI(t){const e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}function dB(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function hB(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function D3(t,e){const r=e[0],i=e[1],s=e[2];let n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n),t}function qI(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yB(t,e,r){const i=e[0],s=e[1],n=e[2],o=r[0],l=r[1],c=r[2];return t[0]=s*c-n*l,t[1]=n*o-i*c,t[2]=i*l-s*o,t}function fB(t,e,r){const i=e[0],s=e[1],n=e[2],o=r[0],l=r[1],c=r[2],d=s*c-n*l,h=n*o-i*c,y=i*l-s*o,f=Math.sqrt(d*d+h*h+y*y);return t[0]=d/f,t[1]=h/f,t[2]=y/f,t}function mB(t,e,r,i){const s=e[0],n=e[1],o=e[2];return t[0]=s+i*(r[0]-s),t[1]=n+i*(r[1]-n),t[2]=o+i*(r[2]-o),t}function gB(t,e,r,i,s,n){const o=n*n,l=o*(2*n-3)+1,c=o*(n-2)+n,d=o*(n-1),h=o*(3-2*n);return t[0]=e[0]*l+r[0]*c+i[0]*d+s[0]*h,t[1]=e[1]*l+r[1]*c+i[1]*d+s[1]*h,t[2]=e[2]*l+r[2]*c+i[2]*d+s[2]*h,t}function vB(t,e,r,i,s,n){const o=1-n,l=o*o,c=n*n,d=l*o,h=3*n*l,y=3*c*o,f=c*n;return t[0]=e[0]*d+r[0]*h+i[0]*y+s[0]*f,t[1]=e[1]*d+r[1]*h+i[1]*y+s[1]*f,t[2]=e[2]*d+r[2]*h+i[2]*y+s[2]*f,t}function wB(t,e=1){const r=e4,i=2*r()*Math.PI,s=2*r()-1,n=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=s*e,t}function bB(t,e,r){const i=e[0],s=e[1],n=e[2];return t[0]=r[0]*i+r[4]*s+r[8]*n+r[12],t[1]=r[1]*i+r[5]*s+r[9]*n+r[13],t[2]=r[2]*i+r[6]*s+r[10]*n+r[14],t}function _B(t,e,r){const i=e[0],s=e[1],n=e[2];return t[0]=i*r[0]+s*r[3]+n*r[6],t[1]=i*r[1]+s*r[4]+n*r[7],t[2]=i*r[2]+s*r[5]+n*r[8],t}function SB(t,e,r){const i=r[0],s=r[1],n=r[2],o=r[3],l=e[0],c=e[1],d=e[2],h=s*d-n*c,y=n*l-i*d,f=i*c-s*l,m=s*f-n*y,g=n*h-i*f,v=i*y-s*h,b=2*o;return t[0]=l+h*b+2*m,t[1]=c+y*b+2*g,t[2]=d+f*b+2*v,t}function xB(t,e,r,i){const s=[],n=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],n[0]=s[0],n[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),n[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function $B(t,e,r,i){const s=[],n=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],n[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),n[1]=s[1],n[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function TB(t,e,r,i){const s=[],n=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],n[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),n[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),n[2]=s[2],t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function IB(t,e){D3(rv,t),D3(iv,e);const r=qI(rv,iv);return r>1?0:r<-1?Math.PI:Math.acos(r)}const rv=ra(),iv=ra();function MB(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function EB(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function PB(t,e){if(t===e)return!0;const r=t[0],i=t[1],s=t[2],n=e[0],o=e[1],l=e[2],c=Mr();return Math.abs(r-n)<=c*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=c*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-l)<=c*Math.max(1,Math.abs(s),Math.abs(l))}function OB(t,e,r){const i=r[0]-e[0],s=r[1]-e[1],n=r[2]-e[2];let o=i*i+s*s+n*n;return o>0?(o=1/Math.sqrt(o),t[0]=i*o,t[1]=s*o,t[2]=n*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const RB=FI,CB=NI,LB=DI,kB=VI,AB=zI,FB=AI,NB=UI;Object.freeze(Object.defineProperty({__proto__:null,abs:nB,add:rB,angle:IB,bezier:vB,ceil:iB,clamp:uB,copy:eB,cross:yB,crossAndNormalize:fB,direction:OB,dist:kB,distance:VI,div:LB,divide:DI,dot:qI,equals:PB,exactEquals:EB,floor:sB,hermite:gB,inverse:hB,len:FB,length:AI,lerp:mB,max:lB,min:aB,mul:CB,multiply:NI,negate:dB,normalize:D3,random:wB,rotateX:xB,rotateY:$B,rotateZ:TB,round:cB,scale:jI,scaleAndAdd:pB,set:tB,sign:oB,sqrDist:AB,sqrLen:NB,squaredDistance:zI,squaredLength:UI,str:MB,sub:RB,subtract:FI,transformMat3:_B,transformMat4:bB,transformQuat:SB},Symbol.toStringTag,{value:"Module"}));function Ji(t){let e=t*t;return t<0&&(e*=-1),e}function DB(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function jB(t,e,r){const i=r,s=t.state,n=t.device,o=e.tiltDirection==="forward-down"?1:-1,l=1;return n.deviceType==="standard"?(i.translation[0]=Ji(s.axes[0]),i.translation[1]=Ji(s.axes[1]),i.translation[2]=Ji(s.buttons[7])-Ji(s.buttons[6]),i.heading=Ji(s.axes[2]),i.tilt=Ji(s.axes[3])):n.deviceType==="spacemouse"&&(i.translation[0]=1.2*Ji(s.axes[0]),i.translation[1]=1.2*Ji(s.axes[1]),i.translation[2]=2*-Ji(s.axes[2]),i.heading=1.2*Ji(s.axes[5]),i.tilt=1.2*Ji(s.axes[3])),i.tilt*=o,jI(i.translation,i.translation,l),i}function VB(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let zB=class extends Pt{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new E5,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([X(()=>this._view.navigation.gamepad?.enabled,r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=kc({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},lr)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const r=this._view.navigation.gamepad.device;r&&e.data.device!==r||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,DB(this._transformation)):(this._currentDevice=e.data.device,jB(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const r=this._transformation;if(VB(r))return void this._frameTask?.pause();const i=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=qB*s*e;m4(i,i,[r.translation[0]*n,-r.translation[1]*n]);const o=1+r.translation[2]*GB*e,l=this._view.constraints.rotationEnabled?-r.heading*UB*e:0,c=this._view.size,d=[c[0]/2,c[1]];wI(i,i,o,l,d,c);const h=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=h}};const UB=.06,qB=.7,GB=6e-4;function GI(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Zr(()=>document.removeEventListener("visibilitychange",e))}let BB=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const l=this._timeout===void 0,c=this._pressedKeys.size>0;l||c?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=GI(s=>s?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const r=this._currentDirection!=null;if(e!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},HB=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(r),this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",i,s=>this._handleKeyUp(s)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=GI(s=>s?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,r){for(const i of e)this._keyToDirection.set(i,r)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,r){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(e.data.key);if(this._pressed=s!=null,this._pressed){if(e.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},WB=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),r.zoomIn.forEach(s=>this._keysToZoomAction[s]=0),r.zoomOut.forEach(s=>this._keysToZoomAction[s]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const r=e.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case 0:o=n.zoomIn();break;case 1:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),e.stopPropagation()}};const ZB=.6;let JB=class extends Pt{constructor(e,r){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:s,deltaY:n}=e.data,o=1/ZB**(1/60*n),l=r.zoom(o,[i,s]);this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()})}},QB=class extends Pt{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new g4({start:(i,s)=>{r.pinch.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{r.pinch.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{r.pinch.end(this.view),s.stopPropagation()},condition:i=>i>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function sv(t){const e=t.native;return e?{buttons:e.buttons.map(r=>r.pressed?r.value||1:0),axes:e.axes.map(r=>XB(r,t.axisThreshold))}:{buttons:[],axes:[]}}function KB(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let r=0;r<t.axes.length;r++)if(t.axes[r]!==e.axes[r])return!1;for(let r=0;r<t.buttons.length;r++)if(t.buttons[r]!==e.buttons[r])return!1;return!0}function YB(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function XB(t,e){const r=Math.abs(t);return r<e?0:Math.sign(t)*(r-e)/(1-e)}let eH=class{constructor(e,r){this._element=e,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,l=o.index,c=this._inputDevices[l];c&&(this._emitGamepadEvent(o,sv(c),!1),this._inputDevices.splice(l,1),this._latestUpdate.splice(l,1),this._input.gamepad.devices.remove(c),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(nv(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const r=new R6(e);r.deviceType!=="unknown"&&(this._inputDevices[e.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=kc({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!r;nv(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],l=sv(n),c=i||YB(l);o&&(o.timestamp===s.timestamp||!o.active&&c||KB(o.state,l))||this._emitGamepadEvent(s,l,!c)})}_emitGamepadEvent(e,r,i){const s=this._latestUpdate[e.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[e.index],state:r,action:o})}};function tH(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function nv(t){for(const e of navigator.getGamepads())tH(e)&&t(e)}const ov=ie("edge"),rH=ie("chrome"),iH=ie("ff"),sH=ie("safari"),av="esri-view-surface",Ul={touchNone:`${av}--touch-none`,touchPan:`${av}--touch-pan`};var dl;let nH=(dl=class{constructor(e,r){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new eH(e,r),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=st(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const r in this._active)if(!e||!e.has(r)){const i=this._active[r];this._element.removeEventListener(xy[r],i),delete this._active[r]}e&&e.forEach(r=>{if(!this._active[r]&&xy[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(xy[r],i),this._active[r]=i}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,r){r?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Ul.touchNone:Ul.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Ul.touchPan:Ul.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Ul.touchNone),this._element.classList.remove(Ul.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,r){const i=qT(this._element,e);return dl.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(e,r){const{key:i}=r;i&&e==="key-up"&&this._keyDownState.delete(i);const s={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(e,i)}_handlePointerPreventDefault(e,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(e,i)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&ie("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:ov&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}ov?i*=.7:rH||sH?i*=.6:iH&&(i*=1.375);const s=100,n=Math.abs(i);n>s&&(i=i/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(e,o)}_handlePointerCaptureLost(e,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(e,r)}_handleDefault(e,r){const i={native:r};r.preventDefault(),this._callback(e,i)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},dl.test={disableSubpixelCoordinates:!1},dl);const xy={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let oH=class extends Pt{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const BI=()=>({maximumClickDelay:300}),aH=(t={})=>({...BI(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),q6=(t={})=>({...BI(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function v2(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function lH(t,e){const r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)}function uH(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Et()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[E,T]=t,[O,C]=[T.x-E.x,T.y-E.y];return e.radius=Math.sqrt(O*O+C*C)/2,e.center.x=(E.x+T.x)/2,e.center.y=(E.y+T.y)/2,e}let r=0,i=0;for(let E=0;E<t.length;E++)r+=t[E].x,i+=t[E].y;r/=t.length,i/=t.length;const s=t.map(E=>E.x-r),n=t.map(E=>E.y-i);let o=0,l=0,c=0,d=0,h=0,y=0,f=0;for(let E=0;E<s.length;E++){const T=s[E],O=n[E],C=T*T,z=O*O;o+=C,l+=z,c+=T*O,d+=C*T,h+=z*O,y+=T*z,f+=O*C}const m=.5*(d+y),g=.5*(h+f),v=o*l-c*c,b=(m*l-g*c)/v,S=(o*g-c*m)/v,$=Et(b+r,S+i);return{radius:Math.sqrt(b*b+S*S+(o+l)/t.length),center:$}}function ul(t){const{native:e}=t,{pointerId:r,button:i,pointerType:s}=e;return s==="mouse"?`${r}:${i}`:`${s}`}let cH=class extends Pt{constructor(e={},r=$h){super(!1),this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Et(0,0),this._pointerState=new Map,this._parameters=q6(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new g4({start:(i,s)=>this._dragStart(i,s),update:(i,s)=>this._dragUpdate(s),end:(i,s)=>this._dragEnd(s)}),this.registerIncoming("drag",i=>this._dragEventSeparator.handle(i)),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Je(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const r=this._pointerState.get(e);r&&(r.doubleTapTimeout=Je(r.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,r){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=r,{center:n}=i;this._dragStartCenter=n;const o=$y("begin",Et(0,0),i);this._doubleTapDrag.emit(o,void 0,s),r.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=e,{center:s}=r,n=$y("update",Et(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=e,{center:s}=r,n=$y("end",Et(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:r}=e,i=ul(r),s=this._pointerState.get(i),{pointerType:n}=r.native;if(s){const o=n==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(i),v2(s.event.data,r)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:r}=e,{pointerType:i}=r.native,s=ul(r),n=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function $y(t,e,r){const{button:i,buttons:s,pointer:n,pointers:o,pointerType:l,timestamp:c}=r;return{action:t,delta:e,button:i,buttons:s,pointer:n,pointers:o,pointerType:l,timestamp:c}}let pH=class extends Pt{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,r,i,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:s,pointers:dH(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(e){const r=e.native.pointerId,i=w1(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,s);const n=C0(s,HI(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const r=e.native.pointerId,i=this._activePointerMap.get(r);i?i.event=e:this._addPointer(e)}_removePointer(e){const r=w1(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(r)}_updatePointerAngles(e){const r=w1(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=C0(i,r)-e,i.lastAngle=C0(i,r)-e})}_emitEvent(e,r,i){const s=w1(this._activePointerMap);this._drag.emit(this._createPayload(e,r,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const r=e.data.native.pointerId,i=We(e.timestamp);this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",e.data,We(e.timestamp))))}_handlePointerDrag(e){const r=e.data,i=r.currentEvent,s=We(e.timestamp);switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function HI(t){const e=[];return t.forEach(r=>{e.push(Et(r.event.x,r.event.y))}),uH(e)}function w1(t){const e=HI(t);let r=0;return t.forEach(i=>{let s=C0(i,e),n=s-i.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=i.lastAngle+n,i.lastAngle=s;const o=s-i.initialAngle;r+=o}),r/=t.size||1,{angle:r,radius:e.radius,center:e.center}}function dH(t){const e=new Map;return t.forEach((r,i)=>e.set(i,r.event)),e}function C0(t,e){const r=t.event,i=r.x-e.center.x,s=r.y-e.center.y;return Math.atan2(s,i)}let hH=class extends Pt{constructor(e={},r=$h){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=q6(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const r=e.data,i=ul(r);if(!this._pointerState.has(i)){const s={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,s),this.startCapturingPointer(r.native)}}_handlePointerUp(e){const r=e.data,i=ul(r),s=this._pointerState.get(i);if(s&&s.downButton===r.native.button){const n=s.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),v2(n,e.data)>o?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,n.modifiers),this._removeState(r))):v2(s,e.data)>o?this._removeState(r):this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,r){const i=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;r.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),i)}}_removeState(e){const r=ul(e);this._pointerState.delete(r),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},yH=class extends Pt{constructor(e={},r=$h){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=aH(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i)),this.registerIncoming("pointer-up",i=>this._handlePointerLoss(i,"pointer-up")),this.registerIncoming("pointer-capture-lost",i=>this._handlePointerLoss(i,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",i=>this._handlePointerLoss(i,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",i=>this._handlePointerMove(i)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Je(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const r=e.data,i=r.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const l=o.previousEvent;this._pointerHold.emit(l,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const n={startEvent:r,previousEvent:r,startTimestamp:e.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const r=e.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(b1("update",s,r),void 0,s.modifiers):lH(r,s.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(e),s.previousEvent=r)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const r=e.data,i=r.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(b1("start",s,r)):this._pointerDrag.emit(b1("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,r){const i=e.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(b1("end",n,r==="pointer-up"?i:n.previousEvent),void 0,n.modifiers):r==="pointer-up"&&n.downButton===i.native.button&&e.timestamp-n.startTimestamp<=this._parameters.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function b1(t,e,r){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:r}}let fH=class extends Pt{constructor(e={},r=$h){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=q6(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",i=>this._handleImmediateClick(i)),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Je(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,r){const i=this._pointerState.get(e);i&&(i.doubleClickTimer=Je(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const r=this._pointerState.get(e);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const r=e.data,{pointerType:i}=r.native,s=mH(r);if(!this._pointerState.has(s))return void this._startClick(e);const n=this._pointerState.get(s),{data:o,modifiers:l}=n.event,c=i==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;v2(o,r)>c?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,l))}_handlePointerDown(e){const r=ul(e.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(e){const{data:r}=e,{native:{pointerType:i}}=r,s=ul(r),n=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function mH(t){const{pointerId:e,pointerType:r,button:i}=t.native;return r==="mouse"?`${e}:${i}`:`${r}`}const _1={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},lv=Symbol("handles");let mu=class extends Z{initialize(){const e=()=>this.view?.ready;this.addHandles([zi(()=>!e(),()=>this._disconnect()),zi(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(lv),this._inputManager=st(this._inputManager)}_connect(){const e=this.view.surface,r=new nH(e,this.view.input),i=[new hH,new yH,new fH,new pH(this.view.navigation),new cH],s=new Yi({eventSource:r,recognizers:i}),n=new YG(this.view,["primary"]),o=new XG(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new oH],Wn.INTERNAL),s.installHandlers("navigation",[new QB(this.view),new zB(this.view),new JB(this.view),new tv(this.view),new tv(this.view,[_1.counter]),n,new BB(this.view,_1.pan),new WB(this.view,_1.zoom),new HB(this.view,_1.rotate),o,new KG(this.view,"touch")],Wn.INTERNAL),this.view.viewEvents.connect(s),this._source=r,this._inputManager=s,this.addHandles([X(()=>this.view?.navigation?.browserTouchPanEnabled,l=>{this._source&&(this._source.browserTouchPanningEnabled=!l)},lr),X(()=>{const{actionMap:l}=this.view.navigation;return{panActions:ev("pan",l),rotateActions:ev("rotate",l)}},({panActions:l,rotateActions:c})=>{n.pointerActions=l,o.pointerActions=c},vr)],lv)}get test(){}};a([u()],mu.prototype,"view",void 0),a([u()],mu.prototype,"latestPointerInfo",null),a([u()],mu.prototype,"multiTouchActive",null),mu=a([_("esri.views.2d.input.MapViewInputManager")],mu);const gH=mu,vH=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.goToManager=new R0({view:this}),this.animationsEnabled=!0,this.inputManager=new gH({view:this}),this.addHandles([this.on("resize",s=>this.stateManager.resize(s.width,s.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(i,s,n,o){return this.viewEvents.on(i,s,n,o)||super.on(i,s)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,s){return this.goToManager.goTo(i,s)}toMap(i){if(!this.ready)return null;const s=BT(i)?GT(this,i):i;return this.stateManager.toMap(s)}};return a([u()],r.prototype,"goToManager",void 0),a([u({readOnly:!0})],r.prototype,"interacting",null),a([u()],r.prototype,"stationary",null),a([u()],r.prototype,"animationsEnabled",void 0),a([u({readOnly:!0})],r.prototype,"inputManager",void 0),r=a([_("esri.views.Viewport2DMixin")],r),r};let uv=class{constructor(e){this._view=e,this.viewpoint=new Vi({targetGeometry:new ne,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,r]=this._view.size;return Math.sqrt(e*e+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return gI(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,r){r.pan=oS(this.center,e.center);let i=Math.abs(e.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=Oh(i),r.sourceZoom=this.scale,r.targetZoom=e.scale}interpolate(e,r,i){const{pan:s,rotate:n,zoom:o,zoomOffset:l}=i,{center:c}=this;c.spatialReference=e.center.spatialReference,c.x=Op(e.center.x,r.center.x,s),c.y=Op(e.center.y,r.center.y,s),this.viewpoint.scale=Op(e.scale,r.scale+l,o);let d=e.rotation;const h=r.rotation;Math.abs(h-d)>=180&&(d+=360*(d<h?1:-1)),this.viewpoint.rotation=Op(d,h,n)}copyFrom(e){or(this.viewpoint,e.viewpoint),this._view=e.view}};function wp(t,e,r,i){const s=3*t,n=3*(r-t)-s,o=1-s-n,l=3*e,c=3*(i-e)-l,d=1-l-c;function h(g){return((o*g+n)*g+s)*g}function y(g){return((d*g+c)*g+l)*g}function f(g){return(3*o*g+2*n)*g+s}function m(g,v){let b,S,$,E,T,O;for($=g,O=0;O<8;O++){if(E=h($)-g,Math.abs(E)<v)return $;if(T=f($),Math.abs(T)<1e-6)break;$-=E/T}if(b=0,S=1,$=g,$<b)return b;if($>S)return S;for(;b<S;){if(E=h($),Math.abs(E-g)<v)return $;g>E?b=$:S=$,$=.5*(S-b)+b}return $}return function(g,v=1e-6){return y(m(g,v))}}const ki={};ki.ease=wp(.25,.1,.25,1),ki.linear=wp(0,0,1,1),ki.easeIn=ki["ease-in"]=wp(.42,0,1,1),ki.easeOut=ki["ease-out"]=wp(0,0,.58,1),ki.easeInOut=ki["ease-in-out"]=wp(.42,0,.58,1);const wH=t=>t,ph=t=>t*t,w2=t=>1-ph(1-t),cv=t=>t<.5?ph(2*t)/2:(w2(2*(t-.5))+1)/2,b2=t=>t*t*t,j3=t=>1-b2(1-t),pv=t=>t<.5?b2(2*t)/2:(j3(2*(t-.5))+1)/2,_2=t=>t*t*t*t,V3=t=>1-_2(1-t),dv=t=>t<.5?_2(2*t)/2:(V3(2*(t-.5))+1)/2,S2=t=>t*t*t*t*t,z3=t=>1-S2(1-t),hv=t=>t<.5?S2(2*t)/2:(z3(2*(t-.5))+1)/2,x2=t=>1-Math.cos(t*Math.PI/2),U3=t=>1-x2(1-t),yv=t=>t<.5?x2(2*t)/2:(U3(2*(t-.5))+1)/2,$2=t=>2**(10*(t-1)),T2=t=>1-$2(1-t),fv=t=>t<.5?$2(2*t)/2:(T2(2*(t-.5))+1)/2,I2=t=>-(Math.sqrt(1-t*t)-1),q3=t=>1-I2(1-t),mv=t=>t<.5?I2(2*t)/2:(q3(2*(t-.5))+1)/2;function Gi(t){const e=2*(t-Math.sqrt((t-1)*t)),r=e/2/t;return i=>i<r?t*i*i:e*i-e+1}function Bi(t,e){return(r,i)=>r<e?e*t(r/e,i):1-t((1-r)/(1-e),i)*(1-e)}const gv=Bi(Gi(1),1),vv=Bi(Gi(1),0),M2=Bi(Gi(1),.5),wv=Bi(Gi(2),1),bv=Bi(Gi(2),0),_v=Bi(Gi(2),.5),Sv=Bi(Gi(3),1),xv=Bi(Gi(3),0),$v=Bi(Gi(3),.5),Tv=Bi(Gi(4),1),Iv=Bi(Gi(4),0),Mv=Bi(Gi(4),.5),Ev={linear:wH,"in-quad":ph,"out-quad":w2,"in-out-quad":cv,"in-coast-quad":gv,"out-coast-quad":vv,"in-out-coast-quad":M2,"in-cubic":b2,"out-cubic":j3,"in-out-cubic":pv,"in-coast-cubic":wv,"out-coast-cubic":bv,"in-out-coast-cubic":_v,"in-quart":_2,"out-quart":V3,"in-out-quart":dv,"in-coast-quart":Sv,"out-coast-quart":xv,"in-out-coast-quart":$v,"in-quint":S2,"out-quint":z3,"in-out-quint":hv,"in-coast-quint":Tv,"out-coast-quint":Iv,"in-out-coast-quint":Mv,"in-sine":x2,"out-sine":U3,"in-out-sine":yv,"in-expo":$2,"out-expo":T2,"in-out-expo":fv,"in-circ":I2,"out-circ":q3,"in-out-circ":mv,"quad-in":ph,"quad-out":w2,"quad-in-out":cv,"quad-in-coast":gv,"quad-out-coast":vv,"quad-in-out-coast":M2,"cubic-in":b2,"cubic-out":j3,"cubic-in-out":pv,"cubic-in-coast":wv,"cubic-out-coast":bv,"cubic-in-out-coast":_v,"quart-in":_2,"quart-out":V3,"quart-in-out":dv,"quart-in-coast":Sv,"quart-out-coast":xv,"quart-in-out-coast":$v,"quint-in":S2,"quint-out":z3,"quint-in-out":hv,"quint-in-coast":Tv,"quint-out-coast":Iv,"quint-in-out-coast":Mv,"sine-in":x2,"sine-out":U3,"sine-in-out":yv,"expo-in":$2,"expo-out":T2,"expo-in-out":fv,"circ-in":I2,"circ-out":q3,"circ-in-out":mv,ease:t=>ki.ease(t),"ease-in":t=>ki.easeIn(t),"ease-out":t=>ki.easeOut(t),"ease-in-out":t=>ki.easeInOut(t)};let bH=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const E2={desiredScreenFlow:2,minDuration:We(500),maxDuration:We(8e3)},WI={maxDuration:We(4e3)};let _H=class ZI{constructor(e){this._createCamera=e,this.compared=new bH,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:E2.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new ZI(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,r,i){this.source!==e&&this.source.copyFrom(e),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??E2.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const r=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Mr()}get hasFov(){return Math.abs(this.compared.fov)>Mr()}get hasRotate(){return this.compared.rotate>Mr()}},SH=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},xH=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,r)=>ci(e+r.time),ci(0))}interpolateComponentsAt(e,r){e=Math.min(Math.max(e,0),1),e*=this.time;let i=0,s=0;const n=this.definition,o=this.segments.reduce((l,c)=>l||c.definition.hasZoom,!1);for(let l=0;l<this.segments.length;l++){const c=this.segments[l],d=c.definition;if(e<=c.time||l===this.segments.length-1){if(this.segmentInterpolateComponentsAt(c,c.time===0?0:e/c.time,r),n.hasPan&&!isNaN(r.pan)&&isFinite(n.compared.pan)?r.pan=(i+d.compared.pan*r.pan)/n.compared.pan:r.pan=1,n.hasRotate&&!isNaN(r.rotate)&&isFinite(n.compared.rotate)?r.rotate=(s+d.compared.rotate*r.rotate)/n.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(d.compared.targetZoom)){const{sourceZoom:h,targetZoom:y}=d.compared,f=r.zoom*(y-h)+h,m=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(y-m)>Math.abs(h-m)?y:h;r.zoomOffset=v-g,r.zoom=(f-m)/(v-m)}else r.zoom=1;return r}e-=c.time,i+=d.compared.pan,s+=d.compared.rotate}}segmentInterpolateComponentsAt(e,r,i){e.interpolateComponentsAt(r,i)}},Ty=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,r=e.compared,i=r.sourceZoom,s=r.targetZoom;this._zoomSign=i>s?1:-1,this._panPixelsAtSource=r.pan*e.source.pixelsPerPanAtZoom(i);const n=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*n}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:s,hasRotate:n}=this.definition;let o=0,l=0;i&&(s&&(o=(r/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(l=this._zoomSign*(Math.log(e/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const c=this.definition.desiredPixelFlow;if(i&&s&&n){const d=o+l+o*l;this._zoomPixelFlow=o*l/d*c,this._panPixelFlow=l/d*c,this._rotatePixelFlow=o/d*c}else if(i&&s){const d=1+o;this._zoomPixelFlow=o/d*c,this._panPixelFlow=1/d*c}else if(i&&n){const d=1+l;this._zoomPixelFlow=l/d*c,this._rotatePixelFlow=1/d*c}else if(s&&n){const d=this._panPixelsAtSource/this._rotatePixels,h=1+d;this._panPixelFlow=d/h*c,this._rotatePixelFlow=1/h*c}else s?this._panPixelFlow=c:i?this._zoomPixelFlow=c:n&&(this._rotatePixelFlow=c);if(this._time=ci(Math.max(this.rotateTime,this.zoomTime,this.panTime)),this.fovTime>this._time){const d=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=d,this._panPixelFlow/=d,this._rotatePixelFlow/=d}}get rotateTime(){return this.definition.hasRotate?ci(this._rotatePixels/this._rotatePixelFlow):ci(0)}get zoomTime(){return this.definition.hasZoom?ci(this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow):ci(0)}get fovTime(){return this.definition.hasFov?ci(Math.abs(this.definition.compared.fov)/$H):ci(0)}get panTime(){if(!this.definition.hasPan)return ci(0);if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=e*this._panPixelsAtSource;return ci(Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow))}return ci(this._panPixelsAtSource/this._panPixelFlow)}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-e-r)/(i-r)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+e*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*e*this._time)-1))/(r*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,r){e=Math.min(Math.max(e,0),1),r.zoom=this._interpolateComponentsZoom(e),r.pan=this._interpolateComponentsPan(e),r.rotate=this._interpolateComponentsRotate(e),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(e)}};const $H=Oh(45);function TH(t,e,r){const i=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(i);return-t.halfWindowSize*(r.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function IH(t,e,r){const i=1/e,s=Math.log(t.compared.sourceZoom*i),n=1/t.desiredPixelFlow,o=1/Math.LN2,l=e-t.compared.sourceZoom,c=1/l,d=(r.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(l))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*n*o*c*d-t.halfWindowSize*s*n*o*c+t.halfWindowSize*s*n*o*d/(l*l)}function MH(t,e,r){const i=e-t.compared.sourceZoom,s=1/i,n=1/e,o=Math.log(t.compared.sourceZoom*n),l=(r.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(i))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*l+2*s*o+2*n-2*o*l/(i*i)-l/(e*e))/(t.desiredPixelFlow*Math.LN2)}function EH(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function PH(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function OH(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function RH(t,e,r){return-t.compared.pan*t.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function CH(t,e,r){return t.compared.pan*t.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function LH(t,e,r){return-2*t.compared.pan*t.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function kH(t,e,r){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-r.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function AH(t,e,r){const i=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,n=1/Math.LN2,o=-e+t.compared.targetZoom,l=1/o,c=(-t.halfWindowPanAtZoom(e)-r.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*i*s*n*l+t.halfWindowSize*i*s*n*c/(o*o)+t.halfWindowSize*s*n*l*c/e}function FH(t,e,r){const i=e-t.compared.targetZoom,s=1/i,n=1/e,o=Math.log(e/t.compared.targetZoom),l=(t.halfWindowPanAtZoom(e)+r.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*l-2*s*o+2*n+2*o*l/(i*i)-l/(e*e))/(t.desiredPixelFlow*Math.LN2)}function NH(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function DH(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function jH(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function VH(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const r=Math.LN2*t.compared.pan,i=e,s=t.halfWindowPanAtZoom(i),n=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?n*(r-s):n*(r+s)}function zH(t,e){let r=UH(t,e);const i={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=i.ascensionFactor===0,n=i.descensionFactor===0,o=s?EH:TH,l=s?PH:IH,c=s?OH:MH,d=n?NH:kH,h=n?DH:AH,y=n?jH:FH,f=O=>o(t,O,i)+RH(t,O,i)+d(t,O,i),m=O=>l(t,O,i)+CH(t,O,i)+h(t,O,i),g=O=>c(t,O,i)+LH(t,O,i)+y(t,O,i);let v=f(r);const b=VH(t);let S;const $=e.maximumIterations||20,E=e.maximumDistance!=null?e.maximumDistance:1/0;for(S=0;S<$;S++){const O=e.desiredSlope??1e-6;let C=m(r);Math.abs(C)>O&&(C+=O);const z=C/g(r);if(isNaN(z)||r>=E&&z<0){if(!isFinite(E))return null;r=E,v=f(r);break}if(r-=z,r<=t.compared.sourceZoom||r<=t.compared.targetZoom)return null;const q=f(r);if(Math.abs(q-v)/v<=.005)break;v=q}return isNaN(v)||v>b*(1-.3)||r<=t.compared.sourceZoom||r<=t.compared.targetZoom?null:r}function UH(t,e){const r=Math.max(t.compared.sourceZoom,t.compared.targetZoom),i=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return i<r?e.maximumDistance!=null?r+(e.maximumDistance-r)/2:1.5*r:e.maximumDistance?Math.min(e.maximumDistance,i):i}let qH=class extends xH{constructor(e,r){super(),this._preallocSegments=[new Ty,new Ty,new Ty],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,r)}update(e,r){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const i=r?.apex?zH(e,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,r,i){e.interpolateComponentsAt(r,i),e===this._ascensionSegment?i.zoom=w2(i.zoom):e===this._descensionSegment&&(i.zoom=ph(i.zoom))}_updateWithApex(e,r){const[i,s,n]=this._preallocSegments,o=r?.ascensionFactor??.5,l=Math.min(1-o,r?.ascensionFactor!=null&&r.descensionFactor!=null?r.descensionFactor:.5),c=1-o-l;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=e,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),c>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*c,s.definition.compared.rotate=this.definition.compared.rotate*c,s.definition.segmentStart=i.definition.segmentEnd,s.definition.segmentEnd=i.definition.segmentEnd+c,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=e,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=o+c,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const GH=new SH;let BH=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=We(0),this._easing=M2,this.definition=new _H(e),this.path=new qH}update(e,r,i){this.definition.update(e,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(GR(isFinite(this.path.time)?this.path.time:ci(0)),i),this._easing=i.easing??(this._time>=1e3?M2:T2)}cameraAt(e,r){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const i=this.path.interpolateComponentsAt(e,GH);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(e){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(e,this._time)-r)/(i-r)}_applyTimeSettings(e,r){const i=r.speedFactor!=null?r.speedFactor:1,s=r.minDuration??E2.minDuration/i,n=r.maxDuration??E2.maxDuration/i;return e=r.duration!=null?We(r.duration):We(Math.min(Math.max(e/i,s),n))}};const HH=2e3,WH=64;let ZH=class{constructor(e){this._view=e,this._animation=new BH(()=>new uv(this._view)),this._current=new uv(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,r,i={}){or(this._current.viewpoint,e),or(this._source.viewpoint,e),or(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(e,r){this._animation.cameraAt(r,this._current),or(e,this._current.viewpoint)}},gu=class extends Z{constructor(e){super(e),this._animation=null,this._destinationViewState=new z6,this.updateFunction=null,this.easing=Ev.ease,this.viewpoint=new Vi({targetGeometry:new ne,scale:0,rotation:0}),this._updateTask=kc({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new ZH(e.view)}destroy(){this._updateTask=Je(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,r,i){this.stop();const s=this.viewpoint;or(s,r);const n=e.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(r.scale,n.scale)*WH,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i?.duration,maxDuration:i?.animationMode==="auto"?We(1/0):i?.maxDuration??WI.maxDuration,speedFactor:i?.speedFactor,easing:(typeof i?.easing=="string"?Ev[i.easing]:i?.easing)||this.easing}),i?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,JH(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:We(0)}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,r){this.stop(),this.updateFunction=r,this.viewpoint=e;const i=new N3({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const r=this.animation;if(r&&r.state!==N3.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const i=performance.now()-this._startTime,s=this._transition.duration,n=s>0?i/s:1,o=n>=1;this._transition.applyRatio(this.viewpoint,n),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function JH(t,e,r,i){if(e?.duration!=null)return!0;const{time:s,isLinear:n}=t,o=e?.speedFactor||1;if(s>(e?.maxDuration??WI.maxDuration/o))return!1;if(n){const c=Qe(),d=Et(...i.toScreen(c,...r.center)),h=Et(...r.toScreen(c,...i.center)),y=h!=null&&h.x>-1*r.size[0]&&h.x<(1.5+.5)*r.size[0]&&h.y>-1*r.size[1]&&h.y<(1.5+.5)*r.size[1],f=d!=null&&d.x>-1*i.size[0]&&d.x<(1.5+.5)*i.size[0]&&d.y>-1*i.size[1]&&d.y<(1.5+.5)*i.size[1];if(s>HH/o&&!y&&!f)return!1}return!0}a([u()],gu.prototype,"easing",void 0),a([u()],gu.prototype,"view",void 0),a([u()],gu.prototype,"viewpoint",void 0),gu=a([_("esri.views.2d.AnimationManager")],gu);const QH=gu;function Ne(){return Promise.all([R(()=>import("./money-tides-webglDeps-Q4hh_CJf.js"),__vite__mapDeps([202,163,4,3,1,2,5,6,7,203,204,205,58,12,13,14])),R(()=>import("./money-tides-mapViewDeps-khFEIV7E.js"),__vite__mapDeps([206,1,2,3,4,5,6,7,12,124,93,94,88,95,92,96,85,207,208,163,203,204,154,86,209,89,205,58,162,57,210,84,114,211,142,145,90,100,212,97,98,213,214,26,13,14,202,215,109,216,217,141,218,152,153,219,83,87,41,40,220,99,221,91,19,20,21,222,101,106,81,223,224,225,226,159,227,228]))])}const bp=()=>Ne().then(()=>R(()=>import("./money-tides-TileLayerView2D--LYTFsZ7.js"),__vite__mapDeps([229,3,4,1,2,5,6,7,92,93,94,88,95,96,85,213,124,214,26,12,13,14,211,210,84,57,204,205,58,162,163,114,142,145,215,208,203,154,209,89,109,216,217,141,207,86,90,100,97,98,152,153,222,83,87,41,40,101,106,81,230,231,232,226,233,185,234,224,225,235,236,237,238,239,240]))),pa=()=>Ne().then(()=>R(()=>import("./money-tides-FeatureLayerView2D-C-jC0xQx.js").then(t=>t.F),__vite__mapDeps([241,3,4,1,2,5,6,7,207,93,94,88,95,92,96,85,208,163,203,204,154,86,12,209,89,205,58,162,57,210,84,114,211,142,145,90,100,242,243,244,13,14,41,48,233,185,225,226,109,107,101,212,245,168,50,103,239,235,236,240]))),Pv={"base-dynamic":()=>Ne().then(()=>R(()=>import("./money-tides-BaseDynamicLayerView2D-BYmG2IJY.js"),__vite__mapDeps([246,3,4,1,2,5,6,7,247,210,84,85,57,204,205,58,162,163,114,211,12,142,145,231,208,203,154,232,233,13,14,185,248,235,236]))),"base-tile":bp,"bing-maps":bp,catalog:()=>Ne().then(()=>R(()=>import("./money-tides-CatalogLayerView2D-BIYsGB1V.js"),__vite__mapDeps([249,3,4,1,2,5,6,7,233,211,12,13,14,185,235]))),"catalog-dynamic-group":()=>Ne().then(()=>R(()=>import("./money-tides-CatalogDynamicGroupLayerView2D-1eqTJsT0.js"),__vite__mapDeps([250,3,4,1,2,5,6,7,233,211,12,13,14,185,235]))),"catalog-footprint":()=>Ne().then(()=>R(()=>import("./money-tides-CatalogFootprintLayerView2D-xSqPGqJD.js"),__vite__mapDeps([251,3,4,1,2,5,6,7,241,207,93,94,88,95,92,96,85,208,163,203,204,154,86,12,209,89,205,58,162,57,210,84,114,211,142,145,90,100,242,243,244,13,14,41,48,233,185,225,226,109,107,101,212,245,168,50,103,239,235,236,240]))),csv:pa,"geo-rss":()=>Ne().then(()=>R(()=>import("./money-tides-GeoRSSLayerView2D-BJtpM15t.js"),__vite__mapDeps([252,3,4,1,2,5,6,7,233,211,12,13,14,185,223,224,225,86,84,85,57,203,163,226,210,204,205,58,162,114,142,145,207,93,94,88,95,92,96,208,154,209,89,90,100,222,213,124,214,26,83,87,41,40,101,106,81,235]))),feature:pa,geojson:pa,parquet:pa,graphics:()=>Ne().then(()=>R(()=>import("./money-tides-GraphicsLayerView2D-BZtx1t7f.js"),__vite__mapDeps([253,3,4,1,2,5,6,7,233,211,12,13,14,185,223,224,225,86,84,85,57,203,163,226,210,204,205,58,162,114,142,145,207,93,94,88,95,92,96,208,154,209,89,90,100,222,213,124,214,26,83,87,41,40,101,106,81,235,240]))),group:()=>Ne().then(()=>R(()=>import("./money-tides-GroupLayerView2D-BC3pBZWX.js"),__vite__mapDeps([254,3,4,1,2,5,6,7,233,211,12,13,14,185,235]))),imagery:()=>Ne().then(()=>R(()=>import("./money-tides-ImageryLayerView2D-Dr-pKBgU.js"),__vite__mapDeps([255,3,4,1,2,5,6,7,256,205,58,162,163,57,129,210,84,85,204,114,211,12,142,145,123,121,13,14,233,185,222,93,94,88,95,92,96,213,124,214,26,83,86,87,89,41,40,207,208,203,154,209,90,100,101,106,81,234,224,225,226,247,231,232,248,127,195,242,239,235,236,240]))),"imagery-tile":()=>Ne().then(()=>R(()=>import("./money-tides-ImageryTileLayerView2D-C_Hzi--f.js"),__vite__mapDeps([257,3,4,1,2,5,6,7,258,13,14,256,205,58,162,163,57,129,210,84,85,204,114,211,12,142,145,123,121,233,185,126,259,226,208,203,154,221,209,89,232,260,127,240,195,242,239,235,236]))),kml:()=>Ne().then(()=>R(()=>import("./money-tides-KMLLayerView2D-C-Amwz7d.js"),__vite__mapDeps([261,3,4,1,2,5,6,7,13,14,262,231,211,12,208,163,203,204,154,232,247,210,84,85,57,205,58,162,114,142,145,233,185,223,224,225,86,226,207,93,94,88,95,92,96,209,89,90,100,222,213,124,214,26,83,87,41,40,101,106,81,235,19,20,21,127,218,202,152,153,216,259]))),"knowledge-graph":()=>Ne().then(()=>R(()=>import("./money-tides-KnowledgeGraphLayerView2D-Dm12Z8oC.js"),__vite__mapDeps([263,3,4,1,2,5,6,7,233,211,12,13,14,185,235]))),"link-chart":()=>Ne().then(()=>R(()=>import("./money-tides-KnowledgeGraphLayerView2D-Dm12Z8oC.js"),__vite__mapDeps([263,3,4,1,2,5,6,7,233,211,12,13,14,185,235]))),"knowledge-graph-sublayer":pa,"map-image":()=>Ne().then(()=>R(()=>import("./money-tides-MapImageLayerView2D-BX10BYNQ.js"),__vite__mapDeps([264,3,4,1,2,5,6,7,247,210,84,85,57,204,205,58,162,163,114,211,12,142,145,231,208,203,154,232,233,13,14,185,222,93,94,88,95,92,96,213,124,214,26,83,86,87,89,41,40,207,209,90,100,101,106,81,234,224,225,226,248,235,242,236,237,238,239,240]))),"map-notes":()=>Ne().then(()=>R(()=>import("./money-tides-MapNotesLayerView2D-ChaslipR.js"),__vite__mapDeps([265,3,4,1,2,5,6,7,233,211,12,13,14,185,223,224,225,86,84,85,57,203,163,226,210,204,205,58,162,114,142,145,207,93,94,88,95,92,96,208,154,209,89,90,100,222,213,124,214,26,83,87,41,40,101,106,81,235,240]))),media:()=>Ne().then(()=>R(()=>import("./money-tides-MediaLayerView2D-CQMn9NN5.js"),__vite__mapDeps([266,1,2,3,4,5,6,7,267,106,92,93,94,88,95,96,85,213,124,214,26,12,13,14,211,210,84,57,204,205,58,162,163,114,142,145,215,208,203,154,209,89,109,216,217,141,207,86,90,100,97,98,152,153,222,83,87,41,40,101,81,220,99,268,221,233,185,235]))),"ogc-feature":()=>Ne().then(()=>R(()=>import("./money-tides-OGCFeatureLayerView2D-BRLkp4fK.js"),__vite__mapDeps([269,3,4,1,2,5,6,7,241,207,93,94,88,95,92,96,85,208,163,203,204,154,86,12,209,89,205,58,162,57,210,84,114,211,142,145,90,100,242,243,244,13,14,41,48,233,185,225,226,109,107,101,212,245,168,50,103,239,235,236,240]))),"open-street-map":bp,"oriented-imagery":pa,route:()=>Ne().then(()=>R(()=>import("./money-tides-RouteLayerView2D-D5szSd9Y.js"),__vite__mapDeps([270,1,2,3,4,5,6,7,271,13,14,272,233,211,12,185,223,224,225,86,84,85,57,203,163,226,210,204,205,58,162,114,142,145,207,93,94,88,95,92,96,208,154,209,89,90,100,222,213,124,214,26,83,87,41,40,101,106,81,235,240]))),stream:()=>Ne().then(()=>R(()=>import("./money-tides-StreamLayerView2D-C1pjISUp.js"),__vite__mapDeps([273,3,4,1,2,5,6,7,241,207,93,94,88,95,92,96,85,208,163,203,204,154,86,12,209,89,205,58,162,57,210,84,114,211,142,145,90,100,242,243,244,13,14,41,48,233,185,225,226,109,107,101,212,245,168,50,103,239,235,236,240]))),"subtype-group":()=>Ne().then(()=>R(()=>import("./money-tides-SubtypeGroupLayerView2D-ZBxVaZft.js"),__vite__mapDeps([274,3,4,1,2,5,6,7,241,207,93,94,88,95,92,96,85,208,163,203,204,154,86,12,209,89,205,58,162,57,210,84,114,211,142,145,90,100,242,243,244,13,14,41,48,233,185,225,226,109,107,101,212,245,168,50,103,239,235,236,240]))),tile:bp,"vector-tile":()=>Ne().then(()=>R(()=>import("./money-tides-VectorTileLayerView2D-BmGKML6e.js"),__vite__mapDeps([275,3,4,1,2,5,6,7,96,92,141,217,12,142,95,163,205,58,162,210,84,85,57,204,114,211,145,226,39,143,144,124,233,13,14,185,235,236]))),video:()=>Ne().then(()=>R(()=>import("./money-tides-VideoLayerView2D-CyB5Q5gQ.js"),__vite__mapDeps([276,3,4,1,2,5,6,7,277,13,14,178,177,268,114,210,84,85,57,204,205,58,162,163,211,12,142,145,207,93,94,88,95,92,96,208,203,154,86,209,89,90,100,221,278,233,185,223,224,225,226,222,213,124,214,26,83,87,41,40,101,106,81,235]))),wcs:()=>Ne().then(()=>R(()=>import("./money-tides-ImageryTileLayerView2D-C_Hzi--f.js"),__vite__mapDeps([257,3,4,1,2,5,6,7,258,13,14,256,205,58,162,163,57,129,210,84,85,204,114,211,12,142,145,123,121,233,185,126,259,226,208,203,154,221,209,89,232,260,127,240,195,242,239,235,236]))),"web-tile":bp,wfs:pa,wms:()=>Ne().then(()=>R(()=>import("./money-tides-WMSLayerView2D-BtazaDw_.js"),__vite__mapDeps([279,3,4,1,2,5,6,7,247,210,84,85,57,204,205,58,162,163,114,211,12,142,145,231,208,203,154,232,233,13,14,185,248,235,236,242]))),wmts:()=>Ne().then(()=>R(()=>import("./money-tides-WMTSLayerView2D-DPZKBRBt.js"),__vite__mapDeps([280,3,4,1,2,5,6,7,230,231,211,12,208,163,203,204,154,232,210,84,85,57,205,58,162,114,142,145,226,233,13,14,185,235,236]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function KH(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",r=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new I(`${r}:view-not-supported`,`${e} is not supported in 2D`)}const Ov={hasLayerViewModule:t=>Pv[t.type]!=null,importLayerView:t=>{const e=Pv[t.type];if(e==null)throw KH(t);return e(t)}};var di;let sp=(di=class{static getId(e,r,i,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${r}/${i}/${s}`}constructor(e,r,i,s){this.set(e,r,i,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|e<<8|i}acquire(e,r,i,s){this.set(e,r,i,s)}contains(e){const r=e.level-this.level;return r>=0&&this.row===e.row>>r&&this.col===e.col>>r&&this.world===e.world}containsChild(e){const r=e.level-this.level;return r>0&&this.row===e.row>>r&&this.col===e.col>>r&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new di(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,r,i,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[n,o,l,c]=e.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(l),this.world=parseFloat(c)}else this.level=+e,this.row=+r,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new di(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,r,i){const s=this.clone();return s.col+=e,s.row+=r,i.normalizeKey(s),s}getChildKeys(){const e=this.level+1,r=this.row<<1,i=this.col<<1,s=this.world;return[new di(e,r,i,s),new di(e,r,i+1,s),new di(e,r+1,i,s),new di(e,r+1,i+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},di.pool=new D2(()=>new di(""),null,null,25,50),di);function ql(t,e){return[t,e]}function da(t,e,r){return t[0]=e,t[1]=r,t}function YH(t,e,r,i,s){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t}const Qi=new sp("0/0/0/0");let XH=class JI{static create(e,r,i=null){const s=Ir(e.spatialReference),n=r.origin||ql(e.origin.x,e.origin.y),o=ql(e.size[0]*r.resolution,e.size[1]*r.resolution),l=ql(-1/0,-1/0),c=ql(1/0,1/0),d=ql(1/0,1/0);i!=null&&(da(l,Math.max(0,Math.floor((i.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymax)/o[1]))),da(c,Math.max(0,Math.floor((i.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymin)/o[1]))),da(d,c[0]-l[0]+1,c[1]-l[1]+1));const{cols:h,rows:y}=r;let f,m,g,v;return!i&&h&&y&&(da(l,h[0],y[0]),da(c,h[1],y[1]),da(d,h[1]-h[0]+1,y[1]-y[0]+1)),e.isWrappable?(f=ql(Math.ceil(Math.round((s.valid[1]-s.valid[0])/r.resolution)/e.size[0]),d[1]),m=!0,g=s.origin,v=s.valid):(f=d,m=!1),new JI(r.level,r.resolution,r.scale,n,l,c,d,o,f,m,g,v)}constructor(e,r,i,s,n,o,l,c,d,h,y,f){this.level=e,this.resolution=r,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=l,this.norm=c,this.worldSize=d,this.wrap=h,this._spatialReferenceOrigin=y,this._spatialReferenceValid=f}normalizeCol(e){if(!this.wrap)return e;const r=this.worldSize[0];return e<0?r-1-Math.abs((e+1)%r):e%r}normalizeKey(e){if(!this.wrap)return;const r=this.worldSize[0],i=e.col;i<0?(e.col=i+r,e.world-=1):i>=r&&(e.col=i-r,e.world+=1)}denormalizeCol(e,r){return this.wrap?this.worldSize[0]*r+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const r=this.origin[0]+e*this.norm[0],i=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&i&&s?r===i[0]?s[0]:this.origin[0]===i[0]&&e===this.worldSize[0]?s[1]:r:r}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,r,i=!1){Qi.set(r);const s=i?Qi.col:this.denormalizeCol(Qi.col,Qi.world),n=Qi.row;return YH(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,r,i=!1){Qi.set(r);const s=i?Qi.col:this.denormalizeCol(Qi.col,Qi.world);return Array.isArray(e)?da(e,this.getXForColumn(s),this.getYForRow(Qi.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(Qi.row)),e}};var hl;let G6=(hl=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:r,colFrom:i,colTo:s}of this.spans)for(let n=i;n<=s;n++){const o=e.getWorldForColumn(n);yield new sp(e.level,r,e.normalizeCol(n),o)}}forEach(e,r){const{spans:i,lodInfo:s}=this,{level:n}=s;if(i.length!==0)for(const{row:o,colFrom:l,colTo:c}of i)for(let d=l;d<=c;d++)e.call(r,n,o,s.normalizeCol(d),s.getWorldForColumn(d))}},hl.pool=new D2(()=>new hl),hl),Iy=class{constructor(e,r,i){this.row=e,this.colFrom=r,this.colTo=i}};const ze=new sp("0/0/0/0");let eW=class QI{static create(e,r){e[1]>r[1]&&([e,r]=[r,e]);const[i,s]=e,[n,o]=r,l=n-i,c=o-s,d=c!==0?l/c:0,h=(Math.ceil(s)-s)*d,y=(Math.floor(s)-s)*d;return new QI(i,Math.floor(s),Math.ceil(o),d,l<0?h:y,l<0?y:h,l<0?n:i,l<0?i:n)}constructor(e,r,i,s,n,o,l,c){this.x=e,this.ymin=r,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=l,this.rightBound=c}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Xr=[[0,0],[0,0],[0,0],[0,0]],tW=1e-6;let rW=class{constructor(e,r=null,i=e.lods[0].level,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=e.lods.filter(l=>l.level>=i&&l.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(l=>XH.create(e,l,r));n.forEach((l,c)=>{this._infoByLevel[l.level]=o[c],this._infoByScale[l.scale]=o[c],this.scales[c]=l.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,r,i=!1){ze.set(r);const s=this._infoByLevel[ze.level];return s?s.getTileBounds(e,ze,i):e}getTileCoords(e,r,i=!1){ze.set(r);const s=this._infoByLevel[ze.level];return s?s.getTileCoords(e,ze,i):e}getTileCoverage(e,r=192,i=!0,s="closest"){if(!i&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=G6.pool.acquire(n),l=this._wrap;let c,d,h,y=1/0,f=-1/0;const m=o.spans;Xr[0][0]=Xr[0][1]=Xr[1][1]=Xr[3][0]=-r,Xr[1][0]=Xr[2][0]=e.size[0]+r,Xr[2][1]=Xr[3][1]=e.size[1]+r;for(const S of Xr)e.toMap(S,S),S[0]=n.getColumnForX(S[0]),S[1]=n.getRowForY(S[1]);const g=[];let v=3;for(let S=0;S<4;S++){if(Xr[S][1]===Xr[v][1]){v=S;continue}const $=eW.create(Xr[S],Xr[v]);y=Math.min($.ymin,y),f=Math.max($.ymax,f),g[$.ymin]===void 0&&(g[$.ymin]=[]),g[$.ymin].push($),v=S}if(y==null||f==null||f-y>100)return null;let b=[];for(c=y;c<f;){g[c]!=null&&(b=b.concat(g[c])),d=1/0,h=-1/0;for(let S=b.length-1;S>=0;S--){const $=b[S];d=Math.min(d,$.getLeftCol()),h=Math.max(h,$.getRightCol())}if(d=Math.floor(d),h=Math.floor(h),c>=n.first[1]&&c<=n.last[1])if(l)if(n.size[0]<n.worldSize[0]){const S=Math.floor(h/n.worldSize[0]);for(let $=Math.floor(d/n.worldSize[0]);$<=S;$++)m.push(new Iy(c,Math.max(n.getFirstColumnForWorld($),d),Math.min(n.getLastColumnForWorld($),h)))}else m.push(new Iy(c,d,h));else d>n.last[0]||h<n.first[0]||(d=Math.max(d,n.first[0]),h=Math.min(h,n.last[0]),m.push(new Iy(c,d,h)));c+=1;for(let S=b.length-1;S>=0;S--){const $=b[S];$.ymax>=c?$.incrRow():b.splice(S,1)}}return o}getTileParentId(e){ze.set(e);const r=this._infoByLevel[ze.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(ze,this._lodInfos[i],ze),ze.id)}getTileResolution(e){const r=this._infoByLevel[typeof e=="object"?e.level:e];return r?r.resolution:-1}getTileScale(e){const r=this._infoByLevel[e.level];return r?r.scale:-1}intersects(e,r){ze.set(r);const i=this._infoByLevel[ze.level],s=e.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(ze,s,ze);const o=s.denormalizeCol(ze.col,ze.world);for(const l of e.spans)if(l.row===ze.row&&l.colFrom<=o&&l.colTo>=o)return!0}if(s.resolution<i.resolution){const[o,l,c,d]=e.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),h=i.denormalizeCol(ze.col,ze.world),y=s.getColumnForX(i.getXForColumn(h)),f=s.getRowForY(i.getYForRow(ze.row)),m=s.getColumnForX(i.getXForColumn(h+1))-1,g=s.getRowForY(i.getYForRow(ze.row+1))-1;return!(y>d||m<c||f>l||g<o)}const n=s.denormalizeCol(ze.col,ze.world);return e.spans.some(o=>o.row===ze.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(e,r,i){if(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],this._wrap){const s=Ir(this.tileInfo.spatialReference),n=-i*(s.valid[1]-s.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const r=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(e>r[i]+tW)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(e){const r=this.scales;return this._infoByScale[e]||(e=r.reduce((i,s)=>Math.abs(s-e)<Math.abs(i-e)?s:i,r[0])),this._infoByScale[e]}scaleToLevel(e){const r=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let i=r.length-1;i>=0;i--)if(e<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-e)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,r,i){const s=this._infoByLevel[i.level];return e.set(i),r.resolution<s.resolution?null:(r.resolution===s.resolution||(e.level=r.level,e.col=Math.floor(i.col*s.resolution/r.resolution+.01),e.row=Math.floor(i.row*s.resolution/r.resolution+.01)),e)}},iW=class{constructor(e,r){this.item=e,this.controller=r,this.promise=null}},sW=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new Bu,this._controllers=new Bu,this._processingItems=new Bu,this._pausedSignal=Ac(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Jd(e.peeker),this.process=e.process;const r=e.scheduler;e.priority&&r&&(this._task=r.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Je(this._schedule),this._task=Je(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const r=this._controllers.get(e);r&&r.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(r=>e.push(r)),this._controllers.clear(),e.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((r,i)=>e(i))}get(e){const r=this._deferreds.get(e);return r?r.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,r){const i=this.get(e);if(i)return i;const s=new AbortController;let n=null;r&&(n=Rc(r,()=>s.abort()));const o=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),l(),d.reject(Mt())},l=()=>{c.remove(),n?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},c=g5(s.signal,o),d=ta();return this._deferreds.set(e,d),this._controllers.set(e,s),d.promise.then(l,l),this._queue.push(e),this._scheduleNext(),d.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Mt()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of e)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=wh(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,r){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(r))}_processError(e,r){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(r))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let r;const i=new AbortController,s=new iW(e,i);this._processingItems.set(e,s);try{r=this.process(e,i.signal)}catch(n){this._processError(s,n)}Tr(r)?(s.promise=r,r.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,r)}get test(){}};const Rv=[0,0];let mn=class extends Z{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:r,scheduler:i,priority:s}=this;this._queue=new sW({concurrency:e,scheduler:i,priority:s,process:(n,o)=>{const l=this._keyToItem.get(n);return r(l,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=st(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const r=typeof e=="string"?e:e.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const r=e.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),s=this.tileInfoView.getTileScale(e.key),n=xh(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(e.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(r)};return n.add(e.key),this._keyToItem.set(r,e),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const r=new Set;for(const o of e)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,l]of this._tilesByScale)if(BR(l,c=>r.has(c))){const c=Math.abs(o-i);c<n&&(s=l,n=c)}return this._getClosestTileKey(s,e).id}_getClosestTileKey(e,r){const i=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const l of e)if(r.has(l.id)){i.getTileCoords(Rv,l);const c=t4(Rv,s);c<o&&(o=c,n=l)}return n}};a([u({constructOnly:!0})],mn.prototype,"concurrency",void 0),a([u({constructOnly:!0})],mn.prototype,"priority",void 0),a([u({constructOnly:!0})],mn.prototype,"process",void 0),a([u({constructOnly:!0})],mn.prototype,"scheduler",void 0),a([u()],mn.prototype,"state",void 0),a([u({constructOnly:!0})],mn.prototype,"tileInfoView",void 0),mn=a([_("esri.views.2d.tiling.TileQueue")],mn);const Zce=mn;let nW=class{constructor(e,r,i){this.maxSize=e,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const r=this._tilePerId.get(e);if(!r)return;const i=r.key.level,s=this._tileKeysPerLevel[i];Cv(this._tilePerId,e);for(let n=0;n<s.length;n++)if(s[n].id===e){s.splice(n,1);break}return r.visible=!0,r}add(e){e.visible=!1;const r=e.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=r.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(r)}prune(e,r,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,r,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,r,i,e))}_pruneAroundCenterTile(e,r,i,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return e;const{size:o,origin:l}=this._tileInfoView.tileInfo,c=i*o[0],d=i*o[1],h=[0,0],y=[0,0];for(n.sort((f,m)=>(h[0]=l.x+c*(f.col+.5),h[1]=l.y-d*(f.row+.5),y[0]=l.x+c*(m.col+.5),y[1]=l.y-d*(m.row+.5),th(h,r)-th(y,r)));n.length>0;){const f=n.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const r=this._tilePerId.get(e);this._removedFunc&&r&&this._removedFunc(r),Cv(this._tilePerId,e)}};function Cv(t,e){t.delete(e)}const ha=new sp(0,0,0,0),tn=new Map,_p=[],My=[];let Qce=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new nW(e.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:r,tileIndex:i}=this,{scale:s,center:n,resolution:o}=e.state,{minScale:l,maxScale:c}=this.tileInfoView,d=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!r&&(s>l||s<c))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:y,lodInfo:f}=h,{level:m}=f;this.tiles.length=0,i.forEach(S=>S.visible=!0);let g=0,v=0;if(y.length>0)for(const{row:S,colFrom:$,colTo:E}of y)for(let T=$;T<=E;T++){g++;const O=ha.set(m,S,f.normalizeCol(T),f.getWorldForColumn(T)).id;let C=i.get(O);if(C)C.isReady?(tn.set(O,C),v++):d||this._addParentTile(O,tn);else{if(this._tileCache?.has(O)){if(C=this._tileCache.pop(O),this.tileIndex.set(O,C),C.isReady){tn.set(O,C),v++;continue}}else C=this.acquireTile(ha),this.tileIndex.set(O,C);d||this._addParentTile(O,tn)}}const b=v===g;for(const[S,$]of i){if(tn.has(S))continue;ha.set(S);const E=this.tileInfoView.intersects(h,ha),T=this.cachePolicy==="purge"?ha.level!==m:ha.level>m;!E||!d&&b?!T&&E||_p.push($):$.isReady?T&&this.cachePolicy==="purge"&&this._hasReadyAncestor(ha,m)?_p.push($):My.push($):T&&_p.push($)}for(const S of My)S.isReady&&tn.set(S.key.id,S);for(const S of _p)this._tileCache?this._tileCache.add(S):this.releaseTile(S),i.delete(S.key.id);for(const S of tn.values())this.tiles.push(S);for(const S of i.values())tn.has(S.key.id)||(S.visible=!1);this._tileCache?.prune(m,n,o),G6.pool.release(h),My.length=0,_p.length=0,tn.clear()}clear(){const{tileIndex:e}=this;for(const r of e.values())this.releaseTile(r);e.clear()}refresh(e){for(const r of this.tileIndex.values())e(r);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,r){let i=e,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s?.isReady){r.has(s.key.id)||r.set(s.key.id,s);break}}else if(this._tileCache?.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s?.isReady)){r.has(s.key.id)||r.set(s.key.id,s);break}}_hasReadyAncestor(e,r){const i=Wr();this.tileInfoView.getTileBounds(i,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=r&&s.key.level<e.level){const n=Wr();if(this.tileInfoView.getTileBounds(n,s.key,!0),TA(n,i))return!0}return!1}};const oW={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>R(()=>import("./money-tides-ElevationProfileAnalysisView2D-BhpUqflb.js"),__vite__mapDeps([281,3,4,1,2,5,6,7,124,171,12,282,228,283,284,285,286,287,288,21,289,290,291,13,14,292,293,112,113,294,295,296,18,297,298,136,68,118,119,132,174,66,299,105,145,151,131])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function aW(t){const e=oW[t.type];if(!e)throw new I("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let lW=class{constructor(e,r={}){this.events=new S_,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):r.canvas!=null&&(this._canvas=r.canvas);const i={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let s=this._canvas.getContext("webgl2",i);s||(s=this._canvas.getContext("webgl2",{...i,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=s,this._handles=I5([T5(this._canvas,"webglcontextlost",n=>this.events.emit("webgl-context-lost",n))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,r){if(this._hasMajorPerformanceCaveat||ie("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=ie("esri-performance-mode-frames-between-render")&&(r(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[i,s,n,o,l,c]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${i}, ${s}, ${n}, ${o}, ${l}, ${c})`}}else r()}resize(e){const r=this._canvas,i=r.style,{state:{size:s},pixelRatio:n}=e,o=s[0],l=s[1],c=Math.round(o*n),d=Math.round(l*n);r.width===c&&r.height===d||(r.width=c,r.height=d),i.width=o+"px",i.height=l+"px"}_computeViewTransform(e,r){const[i,s]=e.center,[n,o]=r.center,[l,c]=e.toScreen([0,0],n,o),[d,h]=e.toScreen([0,0],i,s),y=d-l,f=h-c,m=e.scale/r.scale,g=r.rotation-e.rotation,v=Zs();return sI(v),y4(v,v,[m,m]),Bh(v,v,Oh(g)),Qc(v,v,[y,f]),v}};function uW(t,e,r,i,s){KI(t,e,r||0,i||t.length-1,s||cW)}function KI(t,e,r,i,s){for(;i>r;){if(i-r>600){var n=i-r+1,o=e-r+1,l=Math.log(n),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(n-c)/n)*(o-n/2<0?-1:1);KI(t,e,Math.max(r,Math.floor(e-o*c/n+d)),Math.min(i,Math.floor(e+(n-o)*c/n+d)),s)}var h=t[e],y=r,f=i;for(Sp(t,r,e),s(t[i],h)>0&&Sp(t,r,i);y<f;){for(Sp(t,y,f),y++,f--;s(t[y],h)<0;)y++;for(;s(t[f],h)>0;)f--}s(t[r],h)===0?Sp(t,r,f):Sp(t,++f,i),f<=e&&(r=f+1),e<=f&&(i=f-1)}}function Sp(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function cW(t,e){return t<e?-1:t>e?1:0}function P2(t,e){if(!(this instanceof P2))return new P2(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function pW(t,e,r){if(!r)return e.indexOf(t);for(var i=0;i<e.length;i++)if(r(t,e[i]))return i;return-1}function Gl(t,e){Yp(t,0,t.children.length,e,t)}function Yp(t,e,r,i,s){s||(s=vu(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=e;o<r;o++)n=t.children[o],Xp(s,t.leaf?i(n):n);return s}function Xp(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Lv(t,e){return t.minX-e.minX}function kv(t,e){return t.minY-e.minY}function Ey(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function S1(t){return t.maxX-t.minX+(t.maxY-t.minY)}function dW(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function hW(t,e){var r=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),n=Math.min(t.maxY,e.maxY);return Math.max(0,s-r)*Math.max(0,n-i)}function Py(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function x1(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function vu(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Av(t,e,r,i,s){for(var n,o=[e,r];o.length;)(r=o.pop())-(e=o.pop())<=i||(n=e+Math.ceil((r-e)/i/2)*i,uW(t,n,e,r,s),o.push(e,n,n,r))}P2.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],i=this.toBBox;if(!x1(t,e))return r;for(var s,n,o,l,c=[];e;){for(s=0,n=e.children.length;s<n;s++)o=e.children[s],x1(t,l=e.leaf?i(o):o)&&(e.leaf?r.push(o):Py(t,l)?this._all(o,r):c.push(o));e=c.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!x1(t,e))return!1;for(var i,s,n,o,l=[];e;){for(i=0,s=e.children.length;i<s;i++)if(n=e.children[i],x1(t,o=e.leaf?r(n):n)){if(e.leaf||Py(t,o))return!0;l.push(n)}e=l.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=vu([]),this},remove:function(t,e){if(t==null)return this;for(var r,i,s,n,o=this.data,l=this.toBBox(t),c=[],d=[];o||c.length;){if(o||(o=c.pop(),i=c[c.length-1],r=d.pop(),n=!0),o.leaf&&(s=pW(t,o.children,e))!==-1)return o.children.splice(s,1),c.push(o),this._condense(c),this;n||o.leaf||!Py(o,l)?i?(r++,o=i.children[r],n=!1):o=null:(c.push(o),d.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:Lv,compareMinY:kv,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,i){var s,n=r-e+1,o=this._maxEntries;if(n<=o)return Gl(s=vu(t.slice(e,r+1)),this.toBBox),s;i||(i=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,i-1))),(s=vu([])).leaf=!1,s.height=i;var l,c,d,h,y=Math.ceil(n/o),f=y*Math.ceil(Math.sqrt(o));for(Av(t,e,r,f,this.compareMinX),l=e;l<=r;l+=f)for(Av(t,l,d=Math.min(l+f-1,r),y,this.compareMinY),c=l;c<=d;c+=y)h=Math.min(c+y-1,d),s.children.push(this._build(t,c,h,i-1));return Gl(s,this.toBBox),s},_chooseSubtree:function(t,e,r,i){for(var s,n,o,l,c,d,h,y;i.push(e),!e.leaf&&i.length-1!==r;){for(h=y=1/0,s=0,n=e.children.length;s<n;s++)c=Ey(o=e.children[s]),(d=dW(t,o)-c)<y?(y=d,h=c<h?c:h,l=o):d===y&&c<h&&(h=c,l=o);e=l||e.children[0]}return e},_insert:function(t,e,r){var i=this.toBBox,s=r?t:i(t),n=[],o=this._chooseSubtree(s,this.data,e,n);for(o.children.push(t),Xp(o,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},_split:function(t,e){var r=t[e],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);var n=this._chooseSplitIndex(r,s,i),o=vu(r.children.splice(n,r.children.length-n));o.height=r.height,o.leaf=r.leaf,Gl(r,this.toBBox),Gl(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(t,e){this.data=vu([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Gl(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var i,s,n,o,l,c,d,h;for(c=d=1/0,i=e;i<=r-e;i++)o=hW(s=Yp(t,0,i,this.toBBox),n=Yp(t,i,r,this.toBBox)),l=Ey(s)+Ey(n),o<c?(c=o,h=i,d=l<d?l:d):o===c&&l<d&&(d=l,h=i);return h},_chooseSplitAxis:function(t,e,r){var i=t.leaf?this.compareMinX:Lv,s=t.leaf?this.compareMinY:kv;this._allDistMargin(t,e,r,i)<this._allDistMargin(t,e,r,s)&&t.children.sort(i)},_allDistMargin:function(t,e,r,i){t.children.sort(i);var s,n,o=this.toBBox,l=Yp(t,0,e,o),c=Yp(t,r-e,r,o),d=S1(l)+S1(c);for(s=e;s<r-e;s++)n=t.children[s],Xp(l,t.leaf?o(n):n),d+=S1(l);for(s=r-e-1;s>=e;s--)n=t.children[s],Xp(c,t.leaf?o(n):n),d+=S1(c);return d},_adjustParentBBoxes:function(t,e,r){for(var i=r;i>=0;i--)Xp(e[i],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)t[r].children.length===0?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():Gl(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function yW(t,{timeZone:e,timeExtent:r}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:r?.start,currentEnd:r?.end}}}}let Fv=class YI{constructor(e,r){this.key=new sp(0,0,0,0),this.bounds=Wr(),this.objectIds=new Set,this.key.set(r);const i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=e.zoomToScale(i.level-1),this.maxScale=e.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return SA(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return yW(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),r=hs.acquire();for(let i=0;i<e.length;i++)r[i]=new YI(this.tileInfoView,e[i]);return r}getQuantizationParameters(){return Eo.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const ya={added:[],removed:[]},Oy=new Set,fW=new sp(0,0,0,0);function mW(t,e){const r=Ir(e);if(!r)return null;const[i,s]=r.valid;return t[2]>s?[Wr([t[0],t[1],s,t[3]]),Wr([i,t[1],i+t[2]-s,t[3]])]:t[0]<i?[Wr([i,t[1],t[2],t[3]]),Wr([s-(i-t[0]),t[1],s,t[3]])]:null}let gW=class extends HR{constructor(e){super(),this._tiles=new Map,this._index=P2(9,ie("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||J5(e)===0||Q5(e)===0)return[];const r=mW(e,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const r={added:[],removed:[]};for(const i of e.added)if(!this.has(i)){const s=new Fv(this.tileScheme,i);this._tiles.set(i,s),this._index.insert(s),r.added.push(s)}for(const i of e.removed)if(this.has(i)){const s=this.get(i);this._tiles.delete(i),this._index.remove(s),r.removed.push(s)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(e){const r=this.tileScheme.getTileCoverage(e,0);if(!r)return;const{spans:i,lodInfo:s}=r,{level:n}=s;if(i.length>0)for(const{row:o,colFrom:l,colTo:c}of i)for(let d=l;d<=c;d++){const h=fW.set(n,o,s.normalizeCol(d),s.getWorldForColumn(d)).id;if(Oy.add(h),!this.has(h)){const y=new Fv(this.tileScheme,h);this._tiles.set(h,y),this._index.insert(y),this.tiles.push(y),ya.added.push(y)}}for(let o=this.tiles.length-1;o>=0;o--){const l=this.tiles[o];Oy.has(l.id)||(this._tiles.delete(l.id),this.tiles.splice(o,1),this._index.remove(l),ya.removed.push(l))}(ya.added.length||ya.removed.length)&&this.emit("update",ya),G6.pool.release(r),Oy.clear(),ya.added.length=0,ya.removed.length=0}};const epe=1e-30,Nv=512,$1=16777216,tpe=8,rpe=29,ipe=24,spe=4,npe=0,ope=0,ape=0,lpe=1,upe=2,cpe=3,ppe=4,dpe=5,hpe=6,ype=12,fpe=13,mpe=5,vW=6,gpe=5,vpe=6,XI=6,wW=1<<XI,wpe=wW<<1,bpe=1.05,_pe=3,Spe=1,xpe=3,$pe=3,Tpe=5,Ipe=6,Mpe=1.15,bW=4,Epe=128,_W=256,Ppe=_W-2*bW,Ope=2,Rpe=128,Cpe=1,Lpe=10,kpe=1024,Ape=128,Fpe=4,Npe=1,Dpe=1<<20,jpe=.75,Vpe=10,zpe=.75,Upe=256,qpe=32,Gpe=512,Bpe=0,Hpe=1,SW=1,Wpe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Zpe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],xp=256,xW=()=>N.getLogger("esri.views.webgl.checkWebGLError");function eM(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const tM=!!ie("enable-feature:webgl-debug");function rM(){return tM}function Jpe(){return tM}function fa(t,e=rM()){if(e){const r=eM(t);if(r){const i=new Error().stack;xW().error(new I("webgl-error","WebGL error occurred",{message:r,stack:i}))}}}const Qpe={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ma={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Y={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},$W=Object.values(Y),O2={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},Nd={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},G3={FLOAT:ma.FLOAT,UNSIGNED_BYTE:ma.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:ma.BYTE,UNSIGNED_SHORT:ma.UNSIGNED_SHORT,SHORT:ma.SHORT,UNSIGNED_INT:ma.UNSIGNED_INT,INT:ma.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},Kpe=33984,Dv={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},Ype=1029,Xpe=0,ede=36064,tde=36065,rde=36066,ide=36067,sde=33306,nde=36096,ode=36128,er={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function ade(t,e,r,i=0){const s=t.gl;t.bindBuffer(r);for(const n of r.layout){const o=e.get(n.name);if(o==null){console.warn(`There is no location for vertex attribute '${n.name}' defined.`);continue}const l=i*n.stride;if(n.count<=4)s.vertexAttribPointer(o,n.count,n.type,n.normalized,n.stride,n.offset+l),s.enableVertexAttribArray(o),n.divisor>0&&s.vertexAttribDivisor(o,n.divisor);else if(n.count===9)for(let c=0;c<3;c++)s.vertexAttribPointer(o+c,3,n.type,n.normalized,n.stride,n.offset+12*c+l),s.enableVertexAttribArray(o+c),n.divisor>0&&s.vertexAttribDivisor(o+c,n.divisor);else if(n.count===16)for(let c=0;c<4;c++)s.vertexAttribPointer(o+c,4,n.type,n.normalized,n.stride,n.offset+16*c+l),s.enableVertexAttribArray(o+c),n.divisor>0&&s.vertexAttribDivisor(o+c,n.divisor);else console.error("Unsupported vertex attribute element count: "+n.count);if(rM()){const c=eM(t.gl);c&&console.error(`Unable to bind vertex attribute "${n.name}" with baseInstanceOffset ${l}:`,c,n)}}}function lde(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function TW(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Y.R8:case Y.R8I:case Y.R8UI:case Y.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Y.RGBA4:case Y.R16F:case Y.R16I:case Y.R16UI:case Y.RG8:case Y.RG8I:case Y.RG8UI:case Y.RG8_SNORM:case Y.RGB565:case Y.RGB5_A1:case Nd.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Y.RGB8:case Y.RGB8I:case Y.RGB8UI:case Y.RGB8_SNORM:case Y.SRGB8:case Nd.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Y.RGBA8:case Y.R32F:case Y.R11F_G11F_B10F:case Y.RG16F:case Y.R32I:case Y.R32UI:case Y.RG16I:case Y.RG16UI:case Y.RGBA8I:case Y.RGBA8UI:case Y.RGBA8_SNORM:case Y.SRGB8_ALPHA8:case Y.RGB9_E5:case Y.RGB10_A2UI:case Y.RGB10_A2:case Nd.DEPTH_COMPONENT32F:case O2.DEPTH24_STENCIL8:return 4;case O2.DEPTH32F_STENCIL8:return 5;case Y.RGB16F:case Y.RGB16I:case Y.RGB16UI:return 6;case Y.RG32F:case Y.RG32I:case Y.RG32UI:case Y.RGBA16F:case Y.RGBA16I:case Y.RGBA16UI:return 8;case Y.RGB32F:case Y.RGB32I:case Y.RGB32UI:return 12;case Y.RGBA32F:case Y.RGBA32I:case Y.RGBA32UI:return 16;case er.COMPRESSED_RGB_S3TC_DXT1_EXT:case er.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case er.COMPRESSED_RGBA_S3TC_DXT3_EXT:case er.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case er.COMPRESSED_R11_EAC:case er.COMPRESSED_SIGNED_R11_EAC:case er.COMPRESSED_RGB8_ETC2:case er.COMPRESSED_SRGB8_ETC2:case er.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case er.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case er.COMPRESSED_RG11_EAC:case er.COMPRESSED_SIGNED_RG11_EAC:case er.COMPRESSED_RGBA8_ETC2_EAC:case er.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let iM=class{constructor(e=0,r=e){this.width=e,this.height=r,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=G3.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function IW(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:TW(t.internalFormat))*(t.target===34067?6:1))}const $p=()=>N.getLogger("esri/views/webgl/textureUtils");function Tp(t){const{width:e,height:r,depth:i}=t;(e!=null&&e<0||r!=null&&r<0||i!=null&&i<0)&&$p().error("Negative dimension parameters are not allowed!");const{internalFormat:s}=t;if(s&&(sM(s)||nM(s))){const{linearFilterDepth:n,compareEnabled:o,samplingMode:l,hasMipmap:c}=t;c&&$p().error("Depth textures cannot have mipmaps"),n?l!==9729&&l!==9728&&$p().error("Depth textures cannot sample mipmaps"):(l!==9728&&$p().error("Depth textures without filtering must use NEAREST filtering"),o&&$p().error("Depth textures without filtering cannot use compare function"))}}function MW(t){return $W.includes(t)}function sM(t){return q2(Nd,t)}function nM(t){return q2(O2,t)}function EW(t){return t!=null&&q2(er,t)}function wu(t){return t!=null&&"type"in t&&t.type==="compressed"}function PW(t){return t!=null&&"byteLength"in t}function jv(t){return t!=null&&!wu(t)&&!PW(t)}function Bl(t){return t===32879||t===35866}function Vv(t,e,r,i=1){let s=Math.max(e,r);return t===32879&&(s=Math.max(s,i)),Math.floor(Math.log2(s))+1}function T1(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case G3.FLOAT:switch(t.pixelFormat){case 6408:return Y.RGBA32F;case 6407:return Y.RGB32F;default:throw new I("texture:unknown-format","Unable to derive format")}case G3.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Y.RGBA8;case 6407:return Y.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?O2.DEPTH24_STENCIL8:e===6402?Nd.DEPTH_COMPONENT24:e,t.internalFormat}function OW(t){let e="width"in t?t.width:t.codedWidth,r="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,r=t.videoHeight),{width:e,height:r,depth:1}}let RW=class oM extends iM{constructor(e,r){switch(super(),this.context=e,Object.assign(this,r),this.internalFormat){case Y.R16F:case Y.R32F:case Y.R8_SNORM:case Y.R8:this.pixelFormat=6403;break;case Y.R8I:case Y.R8UI:case Y.R16I:case Y.R16UI:case Y.R32I:case Y.R32UI:this.pixelFormat=36244}}static validate(e,r){return new oM(e,r)}};const CW=!!ie("esri-tests-disable-gpu-memory-measurements"),rn=()=>N.getLogger("esri/views/webgl/Texture");var gt;let LW=(gt=class{constructor(e,r=null,i=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,i=r;else{const s=RW.validate(e,r);if(!s)throw new I("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=s}this._descriptor.target===34067?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return CW?0:IW(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(Dv.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,r){const i=this._descriptor;if(i.width!==e||i.height!==r){if(this._wasImmutablyAllocated)throw new I("texture:immutable-resize","Immutable textures can't be resized!");i.width=e,i.height=r,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!wu(e)&&this._descriptor.internalFormat&&q2(er,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!wu(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,r,i,s,n,o,l=0){o||rn().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||rn().error("An attempt to update uninitialized texture!");const c=this._descriptor;c.internalFormat=T1(c);const{context:d,pixelFormat:h,dataType:y,target:f,isImmutable:m}=c;if(m&&!this._wasImmutablyAllocated)throw new I("texture:uninitialized","Cannot update immutable texture before allocation!");const g=d.bindTexture(this,gt.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+s>c.width||i+n>c.height)&&rn().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:v}=d;l&&(s&&n||rn().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),v.pixelStorei(v.UNPACK_SKIP_ROWS,l)),jv(o)?v.texSubImage2D(f,e,r,i,s,n,h,y,o):wu(o)?v.compressedTexSubImage2D(f,e,r,i,s,n,c.internalFormat,o.levels[e]):v.texSubImage2D(f,e,r,i,s,n,h,y,o),l&&v.pixelStorei(v.UNPACK_SKIP_ROWS,0),d.bindTexture(g,gt.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,r,i,s,n,o,l,c){c||rn().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||rn().error("An attempt to update an uninitialized texture!");const d=this._descriptor;d.internalFormat=T1(d);const{context:h,pixelFormat:y,dataType:f,isImmutable:m,target:g}=d;if(m&&!this._wasImmutablyAllocated)throw new I("texture:uninitialized","Cannot update immutable texture before allocation!");Bl(g)||rn().warn("Attempting to set 3D texture data on a non-3D texture");const v=h.bindTexture(this,gt.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(gt.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||s<0||r+n>d.width||i+o>d.height||s+l>d.depth)&&rn().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=h;if(wu(c))c=c.levels[e],b.compressedTexSubImage3D(g,e,r,i,s,n,o,l,d.internalFormat,c);else{const S=c;b.texSubImage3D(g,e,r,i,s,n,o,l,y,f,S)}h.bindTexture(v,gt.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new I("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,Tp(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const r=this._descriptor.context.bindTexture(this,gt.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(gt.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(r,gt.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new I("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,Tp(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,Tp(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),Tp(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=ml(this._compressionAbortController)}_setData(e,r){const i=this._descriptor,s=i.context?.gl;if(!s)return;fa(s),this.hasWebGLTextureObject||(this._glName=s.createTexture(),i.context.instanceCounter.increment(Dv.Texture,this)),Tp(i);const n=i.context.bindTexture(this,gt.TEXTURE_UNIT_FOR_UPDATES);i.context.setActiveTexture(gt.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),fa(s);const o=r??i.target,l=Bl(o);if(jv(e))this._setDataFromTexImageSource(e,o);else{const{width:c,height:d,depth:h}=i;if(c==null||d==null)throw new I("texture:missing-size","Width and height must be specified!");if(l&&h==null)throw new I("texture:missing-depth","Depth must be specified!");if(i.internalFormat=T1(i),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,i.internalFormat,i.hasMipmap,c,d,h),wu(e)){if(!EW(i.internalFormat))throw new I("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,i.internalFormat,o)}else this._texImage(o,0,i.internalFormat,c,d,h,e),fa(s),i.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),fa(s),i.context.bindTexture(n,gt.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let r=34069;r<=34074;r++)this._setData(e,r)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:s}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,r),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(e,r){const{gl:i}=this._descriptor.context,s=this._descriptor;s.internalFormat=T1(s);const n=Bl(r),{width:o,height:l,depth:c}=OW(e);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=l),n&&s.depth,n&&(s.depth=c),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,s.internalFormat,s.hasMipmap,o,l,c),this._texImage(r,0,s.internalFormat,o,l,c,e),fa(i),s.hasMipmap&&(this.generateMipmap(),fa(i))}_setDataFromCompressedSource(e,r,i){const s=this._descriptor,{width:n,height:o,depth:l}=s,c=e.levels,d=Vv(i,n,o,l),h=Math.min(d,c.length)-1;this._descriptor.context.gl.texParameteri(s.target,33085,h),this._forEachMipmapLevel((y,f,m,g)=>{const v=c[Math.min(y,c.length-1)];this._compressedTexImage(i,y,r,f,m,g,v)},h)}_texStorage(e,r,i,s,n,o){const{gl:l}=this._descriptor.context;if(!MW(r)&&!sM(r)&&!nM(r))throw new I("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const c=i?Vv(e,s,n,o):1;if(Bl(e)){if(o==null)throw new I("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texStorage3D(e,c,r,s,n,o)}else l.texStorage2D(e,c,r,s,n);this._wasImmutablyAllocated=!0}_texImage(e,r,i,s,n,o,l){const c=this._descriptor.context.gl,d=Bl(e),{isImmutable:h,pixelFormat:y,dataType:f}=this._descriptor;if(h){if(l!=null){const m=l;if(d){if(o==null)throw new I("texture:missing-depth","Missing depth dimension for 3D texture upload");c.texSubImage3D(e,r,0,0,0,s,n,o,y,f,m)}else c.texSubImage2D(e,r,0,0,s,n,y,f,m)}}else{const m=l;if(d){if(o==null)throw new I("texture:missing-depth","Missing depth dimension for 3D texture upload");c.texImage3D(e,r,i,s,n,o,0,y,f,m)}else c.texImage2D(e,r,i,s,n,0,y,f,m)}}_compressedTexImage(e,r,i,s,n,o,l){const c=this._descriptor.context.gl,d=Bl(e);if(this._descriptor.isImmutable){if(l!=null)if(d){if(o==null)throw new I("texture:missing-depth","Missing depth dimension for 3D texture upload");c.compressedTexSubImage3D(e,r,0,0,0,s,n,o,i,l)}else c.compressedTexSubImage2D(e,r,0,0,s,n,i,l)}else if(d){if(o==null)throw new I("texture:missing-depth","Missing depth dimension for 3D texture upload");c.compressedTexImage3D(e,r,i,s,n,o,0,l)}else c.compressedTexImage2D(e,r,i,s,n,0,l)}async _compressOnWorker(e){const{width:r,height:i,context:s,flipped:n,preMultiplyAlpha:o,hasMipmap:l}=this._descriptor,c=this._descriptor.compress?.compressionTracker,d=this._descriptor.compress?.compressionCallback,{compressedTextureETC:h,compressedTextureS3TC:y}=s.capabilities;if(!gt.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!h&&!y)return;this.abortCompression();const f=new AbortController;let m;this._compressionAbortController=f,c?.increment();try{e instanceof Uint8Array?m=e.buffer:(m=await createImageBitmap(e,{imageOrientation:n?"flipY":"none"}),Ce(f));const g={data:m,width:r,height:i,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:l,hasETC:!!h,hasS3TC:!!y},v=await gt.compressionWorkerHandle.invoke(g,f.signal,"low");if(Ce(f),v.compressedTexture&&this.hasWebGLTextureObject){const b=this.usedMemory;this._descriptor.internalFormat=v.internalFormat,this._setData(v.compressedTexture),d?.(b-this.usedMemory)}}catch(g){vi(g)||rn().error("Texture compression failed!")}finally{c?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),m instanceof ImageBitmap&&m.close()}}_forEachMipmapLevel(e,r=1/0){let{width:i,height:s,depth:n,hasMipmap:o,target:l}=this._descriptor;const c=l===32879;if(i==null||s==null||c&&n==null)throw new I("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let d=0;e(d,i,s,n),o&&(i!==1||s!==1||c&&n!==1)&&!(d>=r);++d)i=Math.max(1,i>>1),s=Math.max(1,s>>1),c&&(n=Math.max(1,n>>1))}_applySamplingMode(){const e=this._descriptor,r=e.context?.gl;let i=e.samplingMode,s=e.samplingMode;i===9985||i===9987?(i=9729,e.hasMipmap||(s=9729)):i!==9984&&i!==9986||(i=9728,e.hasMipmap||(s=9728)),r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,i),r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){const e=this._descriptor,r=e.context?.gl;typeof e.wrapMode=="number"?(r.texParameteri(e.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,e.wrapMode)):(r.texParameteri(e.target,r.TEXTURE_WRAP_S,e.wrapMode.s),r.texParameteri(e.target,r.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,r=e.context?.gl,i=e.compareEnabled?r.COMPARE_REF_TO_TEXTURE:r.NONE;r.texParameteri(e.target,r.TEXTURE_COMPARE_MODE,i),e.compareEnabled&&r.texParameteri(e.target,r.TEXTURE_COMPARE_FUNC,r.GREATER),fa(r)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,r=e.context.capabilities.textureFilterAnisotropic;r&&e.context.gl.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},gt.TEXTURE_UNIT_FOR_UPDATES=0,gt.compressionWorkerHandle=null,gt);const Ry=()=>N.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function kW(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const AW=[0,0,0,0];let aM=class{constructor(){this.type="single",this._highlightOptions=new Bo,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*xp),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,r){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,vW),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<XI)-1,activeGradient:this}]}_updateGradientTexture(e){const r=FW(this._highlightOptions);if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,kW(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,s=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,n=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,l=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,c=Math.sqrt(Math.PI/2)*SW,d=Math.abs(s)>c?Math.round(10*(Math.abs(s)-c))/10:0,h=Math.abs(l)>c?Math.round(10*(Math.abs(l)-c))/10:0;let y;d&&!h?Ry().error("The outer rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!d&&h?Ry().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):d&&h&&Ry().error("The highlight is "+Math.max(d,h)+"px away from the edge of the feature; consider reducing some width values.");const f=[void 0,void 0,void 0,void 0];function m(v,b,S){f[0]=(1-S)*v[0]+S*b[0],f[1]=(1-S)*v[1]+S*b[1],f[2]=(1-S)*v[2]+S*b[2],f[3]=(1-S)*v[3]+S*b[3]}const{_texelData:g}=this;for(let v=0;v<xp;++v)y=s+v/(xp-1)*(l-s),y<s?(f[0]=0,f[1]=0,f[2]=0,f[3]=0):y<n?m(AW,i.outlineColor,(y-s)/(n-s)):y<o?[f[0],f[1],f[2],f[3]]=i.outlineColor:y<l?m(i.outlineColor,i.fillColor,(y-o)/(l-o)):[f[0],f[1],f[2],f[3]]=i.fillColor,g[4*v]=255*f[0],g[4*v+1]=255*f[1],g[4*v+2]=255*f[2],g[4*v+3]=255*f[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=l,!this._shadeTex){const v=new iM(xp,1);v.wrapMode=33071,this._shadeTex=new LW(e,v)}this._shadeTex.updateData(0,0,0,xp,1,this._texelData)}};function FW(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let NW=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let r=0;r<e.length;r++)this.gradients[r]||(this.gradients[r]=new aM),this.gradients[r].setHighlightOptions(e[r]);for(let r=e.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const r=[];for(let i=0;i<this.gradients.length;i++){const s=this.gradients[i];r.push({activeReasons:e,activeGradient:s}),e<<=1}return r}};const lM={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},DW={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},jW={...lM,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function VW({pixelRatio:t,state:e,displayLevel:r,requiredLevel:i},s){const n=1/2**(r-s.key.level),o=1/2**(i-s.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:e.scale,currentZoom:r,metersPerSRUnit:_i(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function uM(t){return t.passOptions?.type==="highlight"}function cM(t){return t.passOptions?.type==="hittest"}function zW(t){if(!cM(t))return null;const{position:e,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}=t.passOptions;return{position:e,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}}function UW(t){if(!uM(t))return null;const{activeReasons:e,highlightAll:r}=t.passOptions;return{activeReasons:e,highlightAll:r?1:0}}function dde(t,e,r){const i={};for(const s in r)typeof r[s]!="function"?i[s]=r[s]:i[s]=r[s](t,e);return i}function hde(t,e){const{attributeView:r,context:i}=t;return{storage:r.getUniforms(i),view:VW(t,e),hittestRequest:zW(t),highlight:UW(t)}}function yde(t){return{inside:t.selection===2,outside:t.selection===3}}function qW(t){return cM(t)?DW:uM(t)&&t.passOptions.stepType==="clear"?jW:lM}function fde(t){const{row:e,col:r}=t.key,i=r*Nv,s=e*Nv;return{tileOffsetFromLocalOrigin:[i%$1,s%$1],maxIntsToLocalOrigin:[Math.floor(i/$1),Math.floor(s/$1)]}}const GW=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function mde(t){return GW.toJSON(t)}function gde(t){const{bandCount:e,attributeTable:r,colormap:i,pixelType:s}=t.raster.rasterInfo;return e===1&&(r!=null||i!=null||s==="u8"||s==="s8")}function BW(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new NW:new aM),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function vde(t,e,r,i){const{painter:s,highlightGradient:n}=t,{highlight:o}=s.effects;if(!n)return;const l=t.passOptions,c=n.getReasonsWithGradients();for(let d=0;d<c.length;d++){const h={...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:c[d].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(h),r(h),d<c.length-1){let f=0;for(let m=d+1;m<c.length;m++)f|=c[m].activeReasons;r({...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:f,stepType:"clear",highlightAll:e}})}const y={...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:c[d].activeReasons,stepType:"draw",highlightAll:e}};s.setPipelineState(qW(t)),s.updatePipelineState(t.context),o.draw(y),o.unbind()}t.passOptions=l}const I1=t=>parseFloat(t)/100;function HW(t,e,r){const i=typeof t.left=="string"?I1(t.left)*e:t.left,s=typeof t.right=="string"?I1(t.right)*e:t.right,n=typeof t.top=="string"?I1(t.top)*r:t.top,o=typeof t.bottom=="string"?I1(t.bottom)*r:t.bottom,l=n;return{xmin:i,xmax:Math.max(e-s,i),ymin:l,ymax:Math.max(r-o,n)}}function pM(t,e,r,i){switch(e.type){case"rect":{const{width:s,height:n}=t,{xmin:o,xmax:l,ymin:c,ymax:d}=HW(e,s,n),{x:h,y}=r;return h>o&&h<l&&y>c&&y<d}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||z5(e.path,[r.x,r.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?V5(e.geometry,i):Eh(e.geometry,i))}}function WW(t){if(!t.highlights)return null;const e=t.highlights.findIndex(r=>r.name==="default");return e===-1?null:t.highlights.items[e]}function ZW(t,e){if(!t.highlights){if(!e)return;t.highlights=new U([new Bo])}const r=t.highlights.findIndex(i=>i.name==="default");e?t.highlights.items[r].assignFrom(e):(t.highlights.removeAt(r),t.highlights.length===0&&(t.highlights=null))}async function JW(t,e,r){const i=BT(e)?GT(t,e):e;if(!t.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set;const n=new Set;let o=!1,l=null,c=null;r?.include?Uv(r.include,zv(t,f=>{s.add(f),Cy(f,m=>n.add(m))},(f,m)=>{n.add(f),s.add(m)},f=>{l||(l=new Set),l.add(f)},f=>s.add(f),()=>o=!0)):(o=!0,s=new Set(t.allLayerViews),s.forEach(f=>{Cy(f,m=>n.add(m))})),r?.exclude&&Uv(r.exclude,zv(t,f=>{s.delete(f),Cy(f,m=>n.delete(m))},f=>n.delete(f),f=>{c||(c=new Set),c.add(f)}));const d=t.toMap(i),h=t.allLayerViews.filter(f=>!f.suspended&&s.has(f)&&f.clips.every(m=>pM(t,m,i,d))).reverse();let y=[...o?t.graphicsView.hitTest(d).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:d})):[],...await Promise.all(h.map(f=>f.hitTest(d,i)).toArray())].filter(wi).flat().filter(wi);return y=y.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||n.has(f.graphic.layer)),l&&(y=y.filter(f=>!("graphic"in f)||!f.graphic||l?.has(B3(f.graphic)))),c&&(y=y.filter(f=>!("graphic"in f)||!f.graphic||!c?.has(B3(f.graphic)))),{screenPoint:i,results:y}}function zv(t,e,r,i,s,n){return o=>{if(o instanceof He){if(o.layer===t)n?.();else{const l=t.allLayerViews.find(c=>c.layer===o.layer);l&&s?.(l)}i(B3(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const l=t.allLayerViews.find(c=>c.layer===o.parent);l&&r(o,l)}else{const l=t.allLayerViews.find(c=>c.layer===o);l&&e(l)}}}function Uv(t,e){if(t)if(K9(t))for(const r of t)if(K9(r))for(const i of r)e(i);else e(r);else e(t)}function B3(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function Cy(t,e){const r=t.layer;r?.type==="subtype-group"&&r.sublayers.forEach(i=>{e(i)})}let Ip=null,R2=!0;function QW(t,e,r){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(R2)try{return new ImageData(t,e)}catch{R2=!1}return dM(t,e,r)}function wde(t,e,r,i){if(!e||!r)throw new Error("Cannot construct image data without dimensions");if(R2)try{return new ImageData(t,e,r)}catch{R2=!1}const s=dM(e,r,i);return s.data.set(t,0),s}function KW(){return Ip||(Ip=document.createElement("canvas"),Ip.width=1,Ip.height=1),Ip}function dM(t,e,r){return r||(r=KW()),r.getContext("2d").createImageData(t,e)}async function YW(t,e){const r=window.URL.createObjectURL(t);try{const{data:i}=await Te(r,{...e,responseType:"image"});return i}catch(i){throw vi(i)?i:new I("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function bde(t,e){const{arrayBuffer:r,mediaType:i}=await XW(t,e),s=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await R(()=>import("./money-tides-gif-C-HzhJTN.js"),__vite__mapDeps([300,3,4,1,2,5,6,7]));if(n(r))return o(r,e)}if(s){const{isAnimatedPNG:n,parseApng:o}=await R(()=>import("./money-tides-apng-DV_fKoow.js"),__vite__mapDeps([301,33,3,4,1,2,5,6,7]));if(n(r))return o(r,e)}return YW(new Blob([r],{type:i}),e)}async function XW(t,e){const r=__(t);if(r?.isBase64)return{arrayBuffer:WR(r.data),mediaType:r.mediaType};const i=await Te(t,{responseType:"array-buffer",...e});return{arrayBuffer:i.data,mediaType:i.getHeader?.("Content-Type")??""}}function hM(t,e,r){const{ctx:i,canvas:s}=fM(t,r),n=i.getImageData(0,0,t.width,t.height),o=gM(s,e);return mM(s),{dataUrl:o,data:n}}function yM(t,e){const{ctx:r,canvas:i}=fM(t,e),s=r.getImageData(0,0,t.width,t.height);return mM(i),s}function fM(t,e){const r=eZ();e.premultipliedAlpha&&sZ(t),r.width=t.width,r.height=t.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(t,0,0),e.flipY&&iZ(i),{ctx:i,canvas:r}}function mM(t){t.width=0,t.height=0}function eZ(){return Ly==null&&(Ly=document.createElement("canvas")),Ly}let Ly=null;function gM(t,e){const r=nZ[e.format],i=e.quality/100;return t.toDataURL(r,i)}function vM(t,e){const r=rZ(t),i=aZ[r];return{format:r,quality:bi(e??i,0,100)}}function wM(t,e){return e/Math.max(t[0],t[1])}function tZ(t,e,r,i=0,s=0,n=t.width-i,o=t.height-s,l=!1){const{data:c}=t,{width:d,height:h,data:y}=e,f=n/d,m=o/h,g=Math.ceil(f/2),v=Math.ceil(m/2),b=t.width;for(let S=0;S<h;S++)for(let $=0;$<d;$++){const E=4*($+(l?h-S-1:S)*d);let T=0,O=0,C=0,z=0,q=0,J=0;const oe=(S+.5)*m;for(let le=Math.floor(S*m);le<(S+1)*m;le++){const re=Math.abs(oe-(le+.5))/v,Ie=($+.5)*f,pe=re*re;for(let _t=Math.floor($*f);_t<($+1)*f;_t++){const Er=Math.abs(Ie-(_t+.5))/g,Ot=Math.sqrt(pe+Er*Er);if(Ot>=1)continue;let he=2*Ot*Ot*Ot-3*Ot*Ot+1;const Vt=4*(i+_t+(s+le)*b);J+=he*c[Vt+3],O+=he,!r&&c[Vt+3]<255&&(he=he*c[Vt+3]/255),C+=he*c[Vt],z+=he*c[Vt+1],q+=he*c[Vt+2],T+=he}}y[E]=C/T,y[E+1]=z/T,y[E+2]=q/T,y[E+3]=J/O}return e}function rZ(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return oZ}}function iZ(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function sZ(t){const e=t.data,r=e.length;for(let i=0;i<r;i+=4){const s=e[i+3];if(s!==255&&s>0){const n=255/s;e[i]=e[i]*n,e[i+1]=e[i+1]*n,e[i+2]=e[i+2]*n}}}const nZ={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},qv=98,oZ="png",aZ={png:100,jpg:qv,jpeg:qv},_de=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:QW,encode:hM,encodeData:yM,getFormatAndQuality:vM,getMaximumResolutionScale:wM,resampleHermite:tZ,toDataUrl:gM},Symbol.toStringTag,{value:"Module"})),bM={flipY:!0,premultipliedAlpha:!0};async function lZ(t,e){const r=await _M(t,e),{format:i,quality:s}=vM(e?.format,e?.quality);return hM(r,{format:i,quality:s},bM)}async function uZ(t,e){const r=await _M(t,e);return yM(r,bM)}function _M(t,e){const r=dZ(e||{},pZ(t.stage,t.size),t.size,t.padding),i=cZ(e,t.allLayerViews);return t.stage.takeScreenshot(r,i,t.backgroundColor,e?.rotation)}function cZ(t={},e){if(!t.layers)return;const r=[];return t.layers.forEach(i=>{const s=e.find(n=>n.layer.id===i.id);s?.container&&r.push(s.container)}),r}function pZ(t,e){return Math.min(4,wM(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function dZ(t,e,r,i){t.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const n=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let l,c,d=t.area||{x:0,y:0,width:n,height:o};if(s){const h=n/o,y=s[0]/s[1];if(y>h){const f=d.width/y;d={x:d.x,y:Math.round(d.y+(d.height-f)/2),width:d.width,height:Math.round(f)}}else{const f=d.height*y;d={x:Math.round(d.x+(d.width-f)/2),y:d.y,width:Math.round(f),height:d.height}}}else s=[d.width,d.height];return s[0]>d.width?(l=Math.min(s[0]/d.width,e),c=s[0]/d.width/l):(l=1,c=s[0]/d.width),{cropArea:{x:Math.round((d.x+i.left)*l),y:Math.round((d.y+i.top)*l),width:Math.round(d.width*l),height:Math.round(d.height*l)},outputScale:c,resolutionScale:l}}const hZ=t=>t.includes("Brush");let SM=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),hZ(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const Gv=Symbol("analyses-owner-handles");let $o=class extends Z{constructor(e){super(e),this._allAnalysisViews=new U,this._creatingViewCount=0,this._attachedToViewResolver=Bv(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(r,i)=>this.view.emit(r,i)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Mt("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Mt()),this._attachedToViewResolver=Bv()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const r=this._items.get(e);if(r==null||r.state.list===1)throw new I("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return r.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),Gv)}_disconnectOwners(){this.removeHandles(Gv),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const s of e)this._addAnalysis(s);const r=e.on("after-add",s=>this._addAnalysis(s.item)),i=e.on("after-remove",s=>this._removeAnalysis(s.item));return Zr(()=>{r.remove(),i.remove();for(const s of e)this._removeAnalysis(s)})}_addAnalysis(e){const r=this._items.get(e);if(r==null){const i={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,i),i.createAnalysisViewTask=Th(s=>this._createAnalysisViewPromise(i,s).then(n=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:n}),n),n=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:n}),n}))}else r.state.list=0}_removeAnalysis(e){const r=this._items.get(e);r!=null?(r.state.list=1,this._scheduleUpdate()):N.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=wh(()=>this._update()))}_update(){this._scheduledUpdateHandle=Je(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:r,view:i}=e;switch(this._items.delete(r),e.state.view){case 0:e.createAnalysisViewTask=ml(e.createAnalysisViewTask);break;case 1:i!=null&&(this._allAnalysisViews.remove(i),e.view=st(i),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:r,analysisView:i}))}})}async _createAnalysisViewPromise(e,r){const{analysis:i}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(i.type))try{this._moduleMap.set(i.type,await this.importAnalysisViewModule(i))}catch{throw this._creatingViewCount-=1,new I("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${i.type}" is not supported`)}if(Gs(r))throw this._creatingViewCount-=1,Mt("AnalysisView creation aborted");const s=new(this._moduleMap.get(i.type)).default({analysis:i,view:this.view});let n=!0;Rc(r,()=>{n&&this._destroyAnalysisView(i,s)});try{await s.when()}catch(o){throw n=!1,this._destroyAnalysisView(i,s),o}if(Gs(r))throw Mt();return n=!1,e.view=s,e.state.view=1,this._allAnalysisViews.add(s),this._creatingViewCount-=1,s}_destroyAnalysisView(e,r){r.destroyed||(this._creatingViewCount-=1,r.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:r}))}};a([u()],$o.prototype,"updating",null),a([u({constructOnly:!0})],$o.prototype,"importAnalysisViewModule",void 0),a([u({constructOnly:!0})],$o.prototype,"view",void 0),a([u()],$o.prototype,"_allAnalysisViews",void 0),a([u()],$o.prototype,"_creatingViewCount",void 0),$o=a([_("esri.views.support.AnalysisViewManager")],$o);const yZ=$o;function Bv(){const t=ta();return t.promise.catch(()=>{}),t}let fZ=class{constructor(e){this.getUnmaskedRenderer=e}};function mZ(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new fZ(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let Hv;function gZ(){return Hv??=bZ(),Hv}let vZ=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function wZ(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let r=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=e.getContext("webgl2"),r!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=mZ(r)?.getUnmaskedRenderer()??"unknown")),r==null)return r;t.available=!0,t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(t.supportsHighPrecisionFragment=i.precision>0),r}function bZ(){const t=new vZ,e=wZ(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function _Z(t){const e=gZ();return e.available?t==="3d"&&e.majorPerformanceCaveat?new I("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new I("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new I("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new I("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function SZ(t){return t&&"nodeType"in t}function xZ(t){return t&&typeof t.render=="function"}const Wv={component:"esri-component"};let ka=class extends Z{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const r=this._get("node");e!==r&&(e&&e.classList.add(Wv.component),r&&r.classList.remove(Wv.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||SZ(e)?(this._set("widget",null),g_(e)):(xZ(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};a([u()],ka.prototype,"id",null),a([u()],ka.prototype,"node",null),a([xe("node")],ka.prototype,"castNode",null),a([u({readOnly:!0})],ka.prototype,"widget",void 0),ka=a([_("esri.views.ui.Component")],ka);const L0=ka,$Z={left:0,top:0,bottom:0,right:0},xM={bottom:30,top:15,right:15,left:15},sn="esri-ui",Pr={ui:sn,corner:`${sn}-corner`,innerContainer:`${sn}-inner-container`,manualContainer:`${sn}-manual-container`,cornerContainer:`${sn}-corner-container`,topLeft:`${sn}-top-left`,topRight:`${sn}-top-right`,bottomLeft:`${sn}-bottom-left`,bottomRight:`${sn}-bottom-right`};function TZ(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function M1(t){return t===0?"0":`${t}px`}function ky(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function Ay(t,{top:e,bottom:r,left:i,right:s}){t.style.top=e,t.style.bottom=r,t.style.left=i,t.style.right=s}let Ps=class extends N2{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Bn(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&Ay(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&Ay(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([X(()=>[this.view?.padding,this.container],this._applyViewPadding,lr),X(()=>this.padding,this._applyUIPadding,lr),X(()=>[this.container,this._locale],([e,r])=>{e&&e.setAttribute("lang",r)},lr),ZR(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const r=this._get("container");e!==r&&(e&&(e.classList.add(Pr.ui),$C(e),this._attachContainers(e)),r&&(r.classList.remove(Pr.ui),Ay(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const r=this._getViewPadding(),{top:i,bottom:s}=r;return Math.max(e-i-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...xM,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const r=this._getViewPadding(),{left:i,right:s}=r;return Math.max(e-i-s,0)}add(e,r){let i,s,n;if(Array.isArray(e))return void e.forEach(l=>this.add(l,r));const o=ky(e);o&&({index:i,position:r,component:e,key:s}=o),r&&typeof r=="object"&&({index:i,key:s,position:r,internal:n}=r),!e||r&&!this._isValidPosition(r)||this._add(e,r,i??this._getNumComponentsAtPosition(r),s,n)}remove(e,r){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,r));const i=this._find(e);if(i){const s=this._componentMap.get(i);if(!s||s.key!==r)return;const n=this._components.indexOf(i);return i.node.parentNode?.removeChild(i.node),this._componentMap.delete(i),i.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(l=>{const c=this._componentMap.get(l);c&&c.position===s.position&&c.index>s.index&&c.index--}),this._components.splice(n,1)[0]}}empty(e,r={removeInternal:!1}){if(Array.isArray(e)){for(const n of e)this.empty(n,r);return}const i=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(n=>n==null?!1:!(this._componentMap.get(n)?.internal??!1)||r.removeInternal);for(const n of s)this.remove(n)}move(e,r){if(Array.isArray(e)&&e.forEach(o=>this.move(o,r)),!e)return;let i;const s=ky(e)||ky(r);if(s&&(i=s.index,r=s.position,e=s.component||e),r&&!this._isValidPosition(r))return;const n=this.remove(e);n&&this.add(n,{position:r,index:i})}find(e){if(!e)return null;const r=this._findById(e);return r&&(r.widget||r.node)}getComponents(e,r={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(e,r):this._components.filter(i=>r.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:s})=>i??s)}getPosition(e){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(e))return r;return null}_add(e,r,i,s,n){e instanceof L0||(e=new L0({node:e}));const{widget:o}=e;o!=null&&o instanceof Z&&o.addHandles(Zr(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const l=this._positionNameToContainerLookup[r];this._components.some(c=>{const d=this._componentMap.get(c)?.position,h=d?this._positionNameToContainerLookup[d]:null;return l===h&&this._componentMap.get(c)?.index===i})&&this._components.forEach(c=>{const d=this._componentMap.get(c),h=d?.position,y=h?this._positionNameToContainerLookup[h]:null;d&&y===l&&d.index>=i&&d.index++}),this._place({component:e,position:r,index:i}),this._components.push(e),this._componentMap.set(e,{key:s,position:r,internal:n,index:i})}_find(e){return e?e instanceof L0?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??$Z}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Pr.innerContainer,Pr.cornerContainer);const r=document.createElement("div");r.classList.add(Pr.innerContainer,Pr.manualContainer);const i=document.createElement("div");i.classList.add(Pr.topLeft,Pr.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(Pr.topRight,Pr.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(Pr.bottomLeft,Pr.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(Pr.bottomRight,Pr.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=r;const l=JR();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":l?s:i,"top-trailing":l?i:s,"bottom-leading":l?o:n,"bottom-trailing":l?n:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const r=e.position??"manual",{component:i,index:s}=e,n=this._positionNameToContainerLookup[r],o=s!=null&&s>-1;if(TZ(i.widget)&&i.widget.startup(),!o)return void n.appendChild(i.node);const l=Array.from(n.children);if(l.length!==0){for(const c of l){const d=this._findByNode(c);if(d&&s<(this._componentMap.get(d)?.index??0))return void c.parentNode?.insertBefore(i.node,c)}n.appendChild(i.node)}else n.appendChild(i.node)}_toPixelPosition(e){return{top:M1(e.top),left:M1(e.left),right:M1(e.right),bottom:M1(e.bottom)}}_findByComponent(e){return this._components.find(r=>r===e)??null}_findById(e){return this._components.find(({id:r})=>r===e)??null}_findByNode(e){return e?this._components.find(({node:r})=>r===e):null}_getComponentsAtPosition(e,r){const i=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(wi).filter(s=>r.includeInternal||!this._componentMap.get(s)?.internal).map(({widget:s,node:n})=>s??n)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};a([u()],Ps.prototype,"_locale",void 0),a([u()],Ps.prototype,"container",null),a([u()],Ps.prototype,"height",null),a([u({value:xM})],Ps.prototype,"padding",null),a([xe("padding")],Ps.prototype,"castPadding",null),a([u()],Ps.prototype,"view",void 0),a([u()],Ps.prototype,"width",null),Ps=a([_("esri.views.ui.UI")],Ps);const IZ=Ps,MZ=new Map;function EZ(t){return MZ.get(t)}function Zv(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function PZ(t,e){return t.length!==e.length||t.some((r,i)=>r.text!==e[i].text)}function E1(t,e,r){!r||!e||t.find(i=>i.layerView===e&&i.text===r)||t.push({text:r,layerView:e})}function OZ(t){return t.type==="bing-maps"}const _s=[];let bu=class extends Z{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new U,this.view=null,this._allLayerViewsChange=r=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=this.view?.allLayerViews;i&&(this.addHandles(i.map(s=>X(()=>[s.suspended,s.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),r?.removed&&r.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Ui(()=>this.view?.allLayerViews,"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),zi(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,r=e?.allLayerViews;_s.length=0;let i=!1,s=null;if(!e||!r)return void this._clear();r.forEach(o=>{if(o.suspended||!o.layer?.attributionVisible)return;const l=o.layer;if(Zv(l,"user"))return void E1(_s,o,l.copyright);if(l.type==="integrated-mesh-3dtiles"&&l.hasGoogleUrl&&(i=!0,s=o),l.hasAttributionData){if(this._fetchedAttributionData.has(o)){const d=this._fetchedAttributionData.get(o);return void(d?E1(_s,o,this._getDynamicAttribution(d,e,l)):Zv(l)&&E1(_s,o,l.copyright))}return void this._fetchAttributionData(o)}const c="portalItem"in l?l.portalItem?.accessInformation:void 0;E1(_s,o,c||l.copyright)});const n=r.find(o=>o.layer?.type==="integrated-mesh-3dtiles");if(this.view&&n){const o=EZ(this.view);if(o){const l=o.getAttributionText();for(let c=l.length-1;c>-1;--c)_s.unshift({text:l[c],layerView:n})}}i&&s&&_s.unshift({text:"Google Maps",layerView:s}),PZ(this.items,_s)&&(this.items.removeAll(),this.items.addMany(_s)),_s.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const r=await B2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=r.ok?this._createContributionIndex(r.value,OZ(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,r){const i=e.contributors,s={};if(!i)return s;for(let n=0;n<i.length;n++){const o=i[n],l=o.coverageAreas;if(!l)return;for(const c of l){const d=c.bbox,h=c.zoomMin-(r&&c.zoomMin?1:0),y=c.zoomMax-(r&&c.zoomMax?1:0),f=new ue({xmin:d[1],ymin:d[0],xmax:d[3],ymax:d[2],spatialReference:B.WGS84}),m={extent:Go(f),attribution:o.attribution||"",score:c.score!=null?c.score:100,id:n};for(let g=h;g<=y;g++)s[g]??=[],s[g].push(m)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,r,i){const{extent:s,scale:n}=r;let o=i.tileInfo?.scaleToZoom(n)??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const l=e[o],c=Ih(s.center.clone().normalize(),B.WebMercator),d=new Set;return l?l.filter(h=>{const y=h.id,f=!d.has(y)&&c&&h.extent&&Eh(h.extent,c);return f&&d.add(y),f}).sort((h,y)=>y.score-h.score||h.objectId-y.objectId).map(h=>h.attribution).join(", "):""}};a([u({readOnly:!0,type:U})],bu.prototype,"items",void 0),a([u({readOnly:!0})],bu.prototype,"state",null),a([u()],bu.prototype,"view",void 0),bu=a([_("esri.widgets.Attribution.AttributionViewModel")],bu);const $M=bu,Js={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function RZ(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:LZ(t[e])}}}function CZ(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function LZ(t){return function(e,...r){CZ(e)?QR(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...r)}}const Hl="esri-attribution",Wl={base:Hl,poweredBy:`${Hl}__powered-by`,sources:`${Hl}__sources`,open:`${Hl}--open`,sourcesOpen:`${Hl}__sources--open`,link:`${Hl}__link`};let dr=class extends V2{constructor(e,r){super(e,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(i=>{i.forEach(({target:s})=>{this._scheduleOverflowCheck(s)})}),this._mutationObserver=new MutationObserver(i=>{let s=!1;for(const n of i)if(n.type==="childList"||n.type==="characterData"||n.type==="attributes"){s=!0;break}s&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new $M}initialize(){this.addHandles(Ui(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,r)=>(e.includes(r.text)||e.push(r.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Wl.open]:this._isOpen};return Br("div",{bind:this,class:this.classes(Wl.base,Js.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Br("div",{class:Wl.poweredBy},"Powered by"," ",Br("a",{class:Wl.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:s}=this,n={[Wl.sourcesOpen]:e,[Js.interactive]:r};return Br("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Wl.sources,n),innerHTML:s,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let r=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=e,o=n>s,l=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,l&&(r=!0),this._isOpen){const c=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,c&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};a([u()],dr.prototype,"_isOpen",void 0),a([u()],dr.prototype,"_isInteractive",null),a([u()],dr.prototype,"_attributionTextOverflowed",void 0),a([u()],dr.prototype,"_prevSourceNodeHeight",void 0),a([u({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],dr.prototype,"attributionText",null),a([u()],dr.prototype,"icon",null),a([u()],dr.prototype,"itemDelimiter",void 0),a([u()],dr.prototype,"label",null),a([u(),G2("esri/widgets/Attribution/t9n/Attribution")],dr.prototype,"messages",void 0),a([u()],dr.prototype,"view",null),a([u({type:$M})],dr.prototype,"viewModel",void 0),a([RZ()],dr.prototype,"_toggleState",null),dr=a([_("esri.widgets.Attribution")],dr);const kZ=dr;function AZ(){const t=ie("mapview-essential-goto-duration");return t==null?t:We(t)}function FZ(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function NZ(t,e,r){return t.goTo(e,r)}const DZ=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return j2(s),this.goToOverride?this.goToOverride(s,i):NZ(s,i.target,i.options)}};return a([u()],r.prototype,"goToOverride",void 0),a([u()],r.prototype,"view",void 0),r=a([_("esri.widgets.support.GoTo")],r),r};let Aa=class extends DZ(Z){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(lr)}destroy(){this.view=null}get canShowNorth(){return FZ(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:AZ()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const r=-e.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?X(()=>e?.rotation,this._updateForRotation,lr):X(()=>e?.camera,this._updateForCamera,lr))}_watchForView(e){this.addHandles(X(()=>this.view,this._updateRotationWatcher,e))}};a([u({readOnly:!0})],Aa.prototype,"canShowNorth",null),a([u({readOnly:!0})],Aa.prototype,"orientation",void 0),a([u({readOnly:!0})],Aa.prototype,"state",null),a([u()],Aa.prototype,"view",void 0),Aa=a([_("esri.widgets.Compass.CompassViewModel")],Aa);const TM=Aa,Jv="esri-compass",Qv={base:Jv,iconContainer:`${Jv}__icon-container`};let gn=class extends V2{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new TM,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return P5({button:()=>R(()=>import("./money-tides-index-COCgdyfT.js"),__vite__mapDeps([302,303,6,7,304,305,306,14,307,308,309,310,311,312,313,314,315])),icon:()=>R(()=>import("./money-tides-index-FX0Z4iUl.js").then(e=>e.i),__vite__mapDeps([307,6,7,308,309]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:r}=this.viewModel,{messages:i}=this;return Br("div",{class:this.classes(Qv.base,Js.widget)},Br("calcite-button",{class:Js.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},Br("div",{"aria-hidden":"true",class:Qv.iconContainer,title:i.reset},Br("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};a([u()],gn.prototype,"goToOverride",null),a([u()],gn.prototype,"icon",null),a([u()],gn.prototype,"label",null),a([u(),G2("esri/widgets/Compass/t9n/Compass")],gn.prototype,"messages",void 0),a([u()],gn.prototype,"view",null),a([u({type:TM})],gn.prototype,"viewModel",void 0),gn=a([_("esri.widgets.Compass")],gn);const jZ=gn,Kv="esri-navigation-toggle",Yv={base:Kv,isLayoutHorizontal:`${Kv}--horizontal`};let _u=class extends Z{constructor(e){super(e),this._navigationMode="pan",this.view=null,e?.isDefaultViewModel||KR(N.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:r,...i}=e;return i}initialize(){this.addHandles(zi(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const e=this.view?.navigation?.actionMap;if(!e)return;const r=this._navigationMode==="pan";e.dragPrimary=r?"pan":"rotate",e.dragSecondary=r?"rotate":"pan"}};a([u({readOnly:!0})],_u.prototype,"state",null),a([u()],_u.prototype,"_navigationMode",void 0),a([u()],_u.prototype,"view",void 0),_u=a([_("esri.widgets.NavigationToggle.NavigationToggleViewModel")],_u);const IM=_u;let vn=class extends V2{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new IM({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const i=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;YR(i),this.toggle()},e?.isDefaultUI||XR(N.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:r,...i}=e;return i}loadDependencies(){return P5({button:()=>R(()=>import("./money-tides-index-COCgdyfT.js"),__vite__mapDeps([302,303,6,7,304,305,306,14,307,308,309,310,311,312,313,314,315]))})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",r=this.viewModel?.navigationMode==="pan",i=this.messages.toggle;return Br("div",{class:this.classes(Yv.base,Js.widget,{[Yv.isLayoutHorizontal]:this.layout==="horizontal"})},Br("calcite-button",{afterCreate:s=>{this._panButton=s},appearance:r?"outline-fill":"solid",class:Js.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),Br("calcite-button",{afterCreate:s=>{this._rotateButton=s},appearance:r?"solid":"outline-fill",class:Js.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};a([u()],vn.prototype,"icon",null),a([u()],vn.prototype,"label",null),a([u({value:"vertical"})],vn.prototype,"layout",null),a([u(),G2("esri/widgets/NavigationToggle/t9n/NavigationToggle")],vn.prototype,"messages",void 0),a([u()],vn.prototype,"view",null),a([u({type:IM})],vn.prototype,"viewModel",void 0),vn=a([_("esri.widgets.NavigationToggle")],vn);const VZ=vn;let Fa=class extends Z{get canZoomIn(){if(!this.view?.ready)return!1;const r=this.view?.constraints?.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const i=e.constraints?.effectiveMinScale;return i===0||this._scale<i}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};a([u({readOnly:!0})],Fa.prototype,"canZoomIn",null),a([u({readOnly:!0})],Fa.prototype,"canZoomOut",null),a([u()],Fa.prototype,"view",void 0),a([u()],Fa.prototype,"_scale",null),Fa=a([_("esri.widgets.Zoom.ZoomConditions2D")],Fa);const zZ=Fa;let Su=class extends Z{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};a([u({readOnly:!0})],Su.prototype,"canZoomIn",null),a([u({readOnly:!0})],Su.prototype,"canZoomOut",null),a([u()],Su.prototype,"view",void 0),Su=a([_("esri.widgets.Zoom.ZoomConditions3D")],Su);const UZ=Su;let To=class extends Z{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new zZ({view:e}):e.type==="3d"&&(this._zoomConditions=new UZ({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():Zd(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():Zd(e.goTo({zoomFactor:.5})))}};a([u()],To.prototype,"_zoomConditions",void 0),a([u()],To.prototype,"canZoomIn",null),a([u()],To.prototype,"canZoomOut",null),a([u({readOnly:!0})],To.prototype,"state",null),a([u()],To.prototype,"view",null),To=a([_("esri.widgets.Zoom.ZoomViewModel")],To);const MM=To,Xv={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let wn=class extends V2{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new MM,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return P5({button:()=>R(()=>import("./money-tides-index-COCgdyfT.js"),__vite__mapDeps([302,303,6,7,304,305,306,14,307,308,309,310,311,312,313,314,315]))})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[Xv.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return Br("div",{class:this.classes(Xv.base,Js.widget,e)},Br("calcite-button",{class:Js.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),Br("calcite-button",{class:Js.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};a([u()],wn.prototype,"icon",null),a([u()],wn.prototype,"label",null),a([u({value:"vertical"})],wn.prototype,"layout",null),a([u(),G2("esri/widgets/Zoom/t9n/Zoom")],wn.prototype,"messages",void 0),a([u()],wn.prototype,"view",null),a([u({type:MM})],wn.prototype,"viewModel",void 0),wn=a([_("esri.widgets.Zoom")],wn);const qZ=wn;function GZ(t){return t?.view!==void 0}let k0=class extends IZ{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const s=this._find(i),n=s?.widget;GZ(n)&&(n.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([X(()=>this.components,this._componentsWatcher,lr),X(()=>this.view,this._updateViewAwareWidgets,lr)])}_add(e,r,i,s,n){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,r,i,s,n)}_removeComponents(e){e.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(e){this.constructed&&e.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(e){const r=this._createWidget(e);return new L0({id:e,node:r})}_createWidget(e){const r=this.view;switch(e){case"attribution":return new kZ({view:r});case"compass":return new jZ({view:r});case"navigation-toggle":return new VZ({view:r,isDefaultUI:!0});case"zoom":return new qZ({view:r})}}};a([u()],k0.prototype,"components",void 0),k0=a([_("esri.views.ui.DefaultUI")],k0);const EM=k0;let A0=class extends EM{constructor(e){super(e),this.components=["attribution","zoom"]}};a([u()],A0.prototype,"components",void 0),A0=a([_("esri.views.ui.2d.DefaultUI2D")],A0);const PM=A0;let BZ=class{constructor(e={},r={},i=8,s=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=r,this.maxAnisotropy=i,this.maxPreferredTexturePixels=s}},B6=class H3{constructor(e,r,i=""){this.major=e,this.minor=r,this._context=i}lessThan(e,r){return this.major<e||e===this.major&&this.minor<r}greaterEqual(e,r){return!this.lessThan(e,r)}validate(e){if(this.major!==e.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new I(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new H3(this.major,this.minor,this._context)}static parse(e,r=""){const[i,s]=e.split("."),n=/^\s*\d+\s*$/;if(!i?.match||!n.test(i))throw new I((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!s?.match||!n.test(s))throw new I((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(i,10),l=parseInt(s,10);return new H3(o,l,r)}},HZ=class extends B6{constructor(e,r){super(e,r,"webmap")}};function Fy(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new HZ(2,35);var W3;let F0=W3=class extends F{constructor(t){super(t),this.color=new K([0,0,0,1])}clone(){return new W3(P({color:this.color}))}};a([u({type:K,json:{write:!0}})],F0.prototype,"color",void 0),F0=W3=a([_("esri.webmap.background.ColorBackground")],F0);const WZ=F0;let OM,RM,CM,LM,kM,AM,FM;async function ZZ(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:r,MapViewNavigation:i,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([R(()=>import("./money-tides-webglDeps-Q4hh_CJf.js"),__vite__mapDeps([202,163,4,3,1,2,5,6,7,203,204,205,58,12,13,14])),R(()=>import("./money-tides-mapViewDeps-khFEIV7E.js"),__vite__mapDeps([206,1,2,3,4,5,6,7,12,124,93,94,88,95,92,96,85,207,208,163,203,204,154,86,209,89,205,58,162,57,210,84,114,211,142,145,90,100,212,97,98,213,214,26,13,14,202,215,109,216,217,141,218,152,153,219,83,87,41,40,220,99,221,91,19,20,21,222,101,106,81,223,224,225,226,159,227,228]))]);RM=t,CM=e,LM=r,kM=i,AM=s,FM=n,OM=o}var xc;let ge=(xc=class extends vH(JG(Ij(Hj(Rj(_q))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Gr({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new h4({actionMap:new C6({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new Wc,this.analysisViewManager=new yZ({importAnalysisViewModule:r=>aW(r),view:this}),this.floors=new U,this.grid=null,this.map=null,this.timeline=new SM,this.type="2d",this.view2dType=null,this.ui=new PM,this.animationsEnabled=!0,this.test={takeScreenshot:async r=>uZ(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},Sj()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=st(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new gW(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,r=this.spatialReference;return{lods:e?.spatialReference?.equals(r)?e.lods:null,spatialReference:r}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:r,center:i,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!n&&(r?.effectiveLODs||(o=-1),(!i||e===0&&o===-1)&&(s?.targetGeometry==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const r=e.targetGeometry,i=this.spatialReference;return Cx(r.spatialReference,i)}get background(){return Fy(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return WW(this)}set highlightOptions(e){ZW(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&N.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),r=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(i=>!i.destroyed&&!("layerViews"in i)&&i.updating===!0)||e);if(ie("esri-2d-log-updating")){const i=this.allLayerViews.reduce((s,n)=>({...s,[`${n.layer.id}(${n.layer.type})`]:!n.destroyed&&!("layerViews"in n)&&n.updating}),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(i)}
-> updatingMagnifier: ${e}
`)}return r}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new Ve({rings:[e.map(r=>[r[0],r[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,r){return JW(this,e,r)}async takeScreenshot(e){return lZ(this._getScreenshotView(e),e)}toScreen(e,r){return this.stateManager.toScreen(e,r)}async whenAnalysisView(e){if(e.parent==null)throw new I("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return Fy(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return Fy(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return Ov.hasLayerViewModule(e)}importLayerView(e){return Ov.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(N.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const r=this.toMap(e),i=await this.hitTest(e),s=this.allLayerViews.toArray().filter(d=>d.clips.every(h=>pM(this,h,e,r))).reverse(),n=new globalThis.Map(s.map(d=>[d.layer.uid,d])),o=[];let l=0,c=0;for(;l<i.results.length||c<s.length;){const d=i.results.at(l);if(d&&d.type!=="graphic"){++l;continue}const h=n.get((d?.layer??d?.graphic.layer)?.uid);if((!d||h)&&c<s.length&&s.at(c)!==h){const y=s.at(c);"fetchPopupFeaturesAtLocation"in y&&o.push({mapPoint:r,layerView:y}),++c}else d&&(o.push({graphic:d.graphic,layerView:h}),++l)}return{hits:o,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=_Z(this.type);if(ie("safari")&&ie("safari")<9&&(e=new I("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ie("safari")})),e!=null)throw N.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return ZZ()}_getDefaultViewpoint(){const{constraints:e,initialExtent:r,map:i,padding:s,size:n}=this;if(!e)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,l=this.stateManager.getUserStartupOptions(this.size),c=o?.viewpoint,d=c?.targetGeometry?.extent??r,h=d?.center,y=c?.rotation??0,f=c?.scale||d&&f4(d,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),m=l.center??h,g=l.rotation??y,v=l.scale??f;return m&&v?new Vi({targetGeometry:m,scale:v,rotation:g}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const r=new lW(this.surface),i=new OM(this.surface,{canvas:this.renderCanvas,contextOptions:new BZ(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},r);this.stage=i,this._magnifierView=new AM,this._magnifierView.magnifier=this.magnifier,this._gridView=new FM;const s=new LM({view:this});this._set("labelManager",s);const n=new QH({view:this});this._set("animationManager",n);const o=new kM({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",c=>this.fatalError=c.error),X(()=>this.stationary,c=>i.stationary=c,vr),X(()=>this.background,c=>{i.backgroundColor=c?.color,this._magnifierView.backgroundColor=c?.color},vr),X(()=>this.magnifier,c=>this._magnifierView.magnifier=c,vr),X(()=>this.grid,c=>this._gridView.grid=c,vr),X(()=>this.renderingOptions,c=>i.renderingOptions=c,vr),X(()=>this.highlights.items.map(c=>({name:c.name,options:{fillColor:c.color,haloColor:c.haloColor,fillOpacity:c.fillOpacity,haloOpacity:c.haloOpacity,haloWidth:c.haloWidth,haloBlur:c.haloBlur}})),()=>{i.highlightGradient=BW(i.highlightGradient,this.highlights.items)},vr),X(()=>this.state.id,()=>i.state=this.state,vr),X(()=>this.animationsEnabled,c=>{this.stage.animationsEnabled=c},vr)],"map-view"),this._updateStageChildren();const l=this._resolveWhenReady;this._resolveWhenReady=[],l.forEach(c=>c(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(r=>{this.stage.addChild(r.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new rW(pr.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const r=new RM({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new CM(e)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:r,padding:i,size:s,stage:n}=this;return{allLayerViews:r,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:i,size:s,stage:n}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},xc.type="2d",xc);a([u({constructOnly:!0})],ge.prototype,"deactivatedWebGLExtensions",void 0),a([u({constructOnly:!0})],ge.prototype,"debugWebGLExtensions",void 0),a([u({readOnly:!0})],ge.prototype,"featuresTilingScheme",void 0),a([u({readOnly:!0})],ge.prototype,"graphicsTileStore",null),a([u()],ge.prototype,"graphicsView",void 0),a([u()],ge.prototype,"constraintsInfo",null),a([u()],ge.prototype,"initialExtentRequired",null),a([u()],ge.prototype,"labelManager",void 0),a([u({type:h4,nonNullable:!0})],ge.prototype,"navigation",void 0),a([u({constructOnly:!0})],ge.prototype,"renderCanvas",void 0),a([u()],ge.prototype,"renderingOptions",void 0),a([u({constructOnly:!0})],ge.prototype,"supersampleScreenshotsEnabled",void 0),a([u()],ge.prototype,"defaultsFromMapSettings",null),a([u({readOnly:!0})],ge.prototype,"typeSpecificPreconditionsReady",null),a([u(f2(Wc,"analyses"))],ge.prototype,"analyses",void 0),a([u()],ge.prototype,"analysisViewManager",void 0),a([u({type:WZ})],ge.prototype,"background",null),a([u()],ge.prototype,"center",null),a([u({type:U})],ge.prototype,"floors",void 0),a([u()],ge.prototype,"grid",void 0),a([u({type:Bo})],ge.prototype,"highlightOptions",null),a([u()],ge.prototype,"map",void 0),a([u()],ge.prototype,"padding",null),a([u({readOnly:!0})],ge.prototype,"rendering",null),a([u({readOnly:!0})],ge.prototype,"resolution",null),a([u()],ge.prototype,"scale",null),a([u({type:Boolean,value:!1})],ge.prototype,"spatialReferenceLocked",null),a([u({readOnly:!0})],ge.prototype,"tileInfo",null),a([u({type:SM,readOnly:!0})],ge.prototype,"timeline",void 0),a([u({readOnly:!0})],ge.prototype,"type",void 0),a([u({readOnly:!0})],ge.prototype,"updating",null),a([u({readOnly:!0})],ge.prototype,"view2dType",void 0),a([u({readOnly:!0})],ge.prototype,"visibleArea",null),a([u()],ge.prototype,"zoom",null),a([u({readOnly:!0})],ge.prototype,"navigating",null),a([u(),xe(t=>t instanceof EM?t:Cc(PM,t))],ge.prototype,"ui",void 0),a([u()],ge.prototype,"animationsEnabled",void 0),ge=a([_("esri.views.View2D")],ge);const JZ=ge;let N0=class extends JZ{constructor(e){super(e),this.view2dType="map"}};a([u({readOnly:!0})],N0.prototype,"view2dType",void 0),N0=a([_("esri.views.MapView")],N0);const QZ=N0;let KZ=class NM{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(wf),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const r=new NM,i=this._originStores[0];i&&i.forEach((s,n)=>{r.set(n,P(s),0)});for(let s=2;s<wf;s++){const n=this._originStores[s];n&&n.forEach((o,l)=>{e&&e.has(l)||r.set(l,P(o),s)})}return r}get(e,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(e):void 0}keys(e){const r=e==null?this._values:this._originStores[e];return r?[...r.keys()]:[]}set(e,r,i=7){let s=this._originStores[i];if(s||(s=new Map,this._originStores[i]=s),s.set(e,r),!this._values.has(e)||this._propertyOriginMap.get(e)<=i){const n=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,i),n!==r}return!1}delete(e,r=7){const i=this._originStores[r];if(!i)return;const s=i.get(e);if(i.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===r){this._values.delete(e);for(let n=r-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,n);break}}}return s}has(e,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(e)}revert(e,r){for(;r>0&&!this.has(e,r);)--r;const i=this._originStores[r],s=i?.get(e),n=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,r),n!==s}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,r){return this.has(e,r)&&this.originOf(e)===r}isBelowOrigin(e,r){return!this.has(e)||this.originOf(e)<r}forEach(e){this._values.forEach(e)}};const DM=t=>{const e=t;let r=class extends e{constructor(...i){super(...i);const s=Jr(this),n=s.store,o=new KZ;s.store=o,TC(s,n,o)}read(i,s){IC(this,i,s)}getAtOrigin(i,s){const n=Ny(this),o=Di(s);if(typeof i=="string")return n.get(i,o);const l={};return i.forEach(c=>{l[c]=n.get(c,o)}),l}originOf(i){return n2(this.originIdOf(i))}originIdOf(i){return Ny(this).originOf(i)}revert(i,s){const n=Ny(this),o=Di(s),l=Jr(this);let c;c=typeof i=="string"?i==="*"?n.keys(o):[i]:i,c.forEach(d=>{l.invalidate(d),n.revert(d,o),l.commit(d)})}};return r=a([_("esri.core.ReadOnlyMultiOriginJSONSupport")],r),r};function Ny(t){return Jr(t).store}DM(Z);const YZ=t=>{const e=t;let r=class extends e{constructor(...i){super(...i)}clear(i,s="user"){Jr(this).clearOrigin(i,Di(s))}write(i,s){return MC(this,i=i||{},s),i}setAtOrigin(i,s,n){Jr(this).setAtOrigin(i,s,Di(n))}removeOrigin(i){const s=ew(this),n=Di(i),o=s.keys(n);for(const l of o)s.originOf(l)===n&&s.set(l,s.get(l,n),7)}updateOrigin(i,s){const n=ew(this),o=Di(s),l=Pp(this,i);for(let c=o+1;c<wf;++c)n.delete(i,c);n.set(i,l,o)}toJSON(i){return this.write({},i)}};return r=a([_("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function ew(t){return Jr(t).store}const np=t=>{const e=YZ(DM(t));let r=class extends e{};return r=a([_("esri.core.MultiOriginJSONSupport")],r),r},XZ=np(Z),ke=(t=>t)(["operational-layers","basemap-base-layers","basemap-ground-layers","ground"]);var Z3;let Na=Z3=class extends F{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Z3({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a([u({type:String,json:{write:!0}})],Na.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],Na.prototype,"name",void 0),a([u({type:["boolean","date","number","string"],json:{write:!0}})],Na.prototype,"returnType",void 0),a([u({type:String,json:{write:!0}})],Na.prototype,"title",void 0),Na=Z3=a([_("esri.form.ExpressionInfo")],Na);const eJ=Na;let qr=class extends F{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};a([u({type:String,json:{write:!0}})],qr.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],qr.prototype,"label",void 0),a([u()],qr.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],qr.prototype,"visibilityExpression",void 0),qr=a([_("esri.form.elements.Element")],qr);let D0=class extends de(F){constructor(e){super(e),this.type=null}};a([u()],D0.prototype,"type",void 0),D0=a([_("esri.form.elements.inputs.attachments.Input")],D0);const ea=D0,v4=["any","capture","upload"];let xu=class extends ea{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};a([u({type:["audio"],readOnly:!0,json:{write:!0}})],xu.prototype,"type",void 0),a([u({type:v4,json:{write:!0}})],xu.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],xu.prototype,"maxDuration",void 0),xu=a([_("esri.form.elements.inputs.attachments.AudioInput")],xu);const tw=xu;let ed=class extends ea{constructor(e){super(e),this.type="document",this.maxFileSize=null}};a([u({type:["document"],readOnly:!0,json:{write:!0}})],ed.prototype,"type",void 0),a([u({type:Number,json:{write:!0}})],ed.prototype,"maxFileSize",void 0),ed=a([_("esri.form.elements.inputs.attachments.DocumentInput")],ed);const rw=ed;let $u=class extends ea{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};a([u({type:["image"],readOnly:!0,json:{write:!0}})],$u.prototype,"type",void 0),a([u({type:v4,json:{write:!0}})],$u.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],$u.prototype,"maxImageSize",void 0),$u=a([_("esri.form.elements.inputs.attachments.ImageInput")],$u);const iw=$u;let td=class extends ea{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};a([u({type:["signature"],readOnly:!0,json:{write:!0}})],td.prototype,"type",void 0),a([u({type:v4,json:{write:!0}})],td.prototype,"inputMethod",void 0),td=a([_("esri.form.elements.inputs.attachments.SignatureInput")],td);const sw=td;let Tu=class extends ea{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};a([u({type:["video"],readOnly:!0,json:{write:!0}})],Tu.prototype,"type",void 0),a([u({type:v4,json:{write:!0}})],Tu.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],Tu.prototype,"maxDuration",void 0),Tu=a([_("esri.form.elements.inputs.attachments.VideoInput")],Tu);const nw=Tu;function jM(t){return{nestableTypes:{base:ea,key:"type",typeMap:{audio:tw,document:rw,image:iw,signature:sw,video:nw}},allTypes:{base:ea,key:"type",typeMap:{attachment:t,audio:tw,document:rw,image:iw,signature:sw,video:nw}}}}function tJ(t,e,r){return t?t.map(i=>fl(e.nestableTypes,i)):null}function rJ(t,e,r){if(!t)return null;const i=e.nestableTypes.typeMap;return t.filter(s=>i[s.type]).map(s=>i[s.type].fromJSON(s))}function iJ(t,e,r){if(!t)return null;const i=e.nestableTypes.typeMap;return t.filter(s=>i[s.type]).map(s=>s.toJSON())}let Ls=class extends ea{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return tJ(e,Dy)}readInputs(e,r){return rJ(r.inputTypes,Dy)}writeInputs(e,r){r.inputTypes=iJ(e,Dy)}};a([u({type:["attachment"],readOnly:!0,json:{write:!0}})],Ls.prototype,"type",void 0),a([u({type:["any","exact","exactOrNone"],json:{write:!0}})],Ls.prototype,"attachmentAssociationType",void 0),a([u({json:{write:{isRequired:!0}}})],Ls.prototype,"inputTypes",void 0),a([xe("inputTypes")],Ls.prototype,"castInputs",null),a([A("inputTypes")],Ls.prototype,"readInputs",null),a([j("inputTypes")],Ls.prototype,"writeInputs",null),Ls=a([_("esri.form.elements.inputs.attachments.AttachmentInput")],Ls);const Dy=jM(Ls),sJ=Ls;var J3;const nJ=jM(sJ);let ni=J3=class extends qr{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new J3({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};a([u({type:Boolean,json:{write:!0}})],ni.prototype,"allowUserRename",void 0),a([u({type:String,json:{write:{isRequired:!0}}})],ni.prototype,"attachmentKeyword",void 0),a([u({type:Boolean,json:{write:!0}})],ni.prototype,"displayFilename",void 0),a([u({type:String,json:{write:!0}})],ni.prototype,"editableExpression",void 0),a([u({type:String,json:{write:!0}})],ni.prototype,"filenameExpression",void 0),a([u({types:nJ.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],ni.prototype,"input",void 0),a([u({type:Number,json:{write:!0}})],ni.prototype,"maxAttachmentCount",void 0),a([u({type:Number,json:{write:!0}})],ni.prototype,"minAttachmentCount",void 0),a([u({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],ni.prototype,"type",void 0),a([u({type:Boolean,json:{write:!0}})],ni.prototype,"useOriginalFilename",void 0),ni=J3=a([_("esri.form.elements.AttachmentElement")],ni);const ow=ni;let j0=class extends F{constructor(e){super(e),this.type=null}};a([u()],j0.prototype,"type",void 0),j0=a([_("esri.form.elements.inputs.Input")],j0);const ro=j0;let rd=class extends ro{constructor(e){super(e),this.maxLength=null,this.minLength=0}};a([u({type:Number,json:{write:!0}})],rd.prototype,"maxLength",void 0),a([u({type:Number,json:{write:!0}})],rd.prototype,"minLength",void 0),rd=a([_("esri.form.elements.inputs.TextInput")],rd);const H6=rd;var Q3;let V0=Q3=class extends H6{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new Q3({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["barcode-scanner"],json:{read:!1,write:!0}})],V0.prototype,"type",void 0),V0=Q3=a([_("esri.form.elements.inputs.BarcodeScannerInput")],V0);const oJ=V0;var K3;let Iu=K3=class extends ro{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new K3({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};a([u({type:String,json:{write:!0}})],Iu.prototype,"noValueOptionLabel",void 0),a([u({type:Boolean,json:{write:!0}})],Iu.prototype,"showNoValueOption",void 0),a([u({type:["combo-box"],json:{read:!1,write:!0}})],Iu.prototype,"type",void 0),Iu=K3=a([_("esri.form.elements.inputs.ComboBoxInput")],Iu);const aJ=Iu;var Y3;function aw(t){return t??null}function lw(t){return t??null}let Os=Y3=class extends ro{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return aw(e.max)}writeMax(t,e){e.max=lw(t)}readMin(t,e){return aw(e.min)}writeMin(t,e){e.min=lw(t)}clone(){return new Y3({max:this.max,min:this.min})}};a([u({type:String,json:{type:String,write:!0}})],Os.prototype,"max",void 0),a([A("max")],Os.prototype,"readMax",null),a([j("max")],Os.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],Os.prototype,"min",void 0),a([A("min")],Os.prototype,"readMin",null),a([j("min")],Os.prototype,"writeMin",null),a([u({type:["date-picker"],json:{read:!1,write:!0}})],Os.prototype,"type",void 0),Os=Y3=a([_("esri.form.elements.inputs.DatePickerInput")],Os);const lJ=Os;var X3;function jy(t){return t??null}function Vy(t){return t??null}let Lr=X3=class extends ro{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return jy(e.max)}writeMax(t,e){e.max=Vy(t)}readMin(t,e){return jy(e.min)}writeMin(t,e){e.min=Vy(t)}readTimeResolution(t,e){return jy(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Vy(t)}clone(){return new X3({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};a([u({type:Boolean,json:{write:!0}})],Lr.prototype,"includeTimeOffset",void 0),a([u({type:String,json:{type:String,write:!0}})],Lr.prototype,"max",void 0),a([A("max")],Lr.prototype,"readMax",null),a([j("max")],Lr.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],Lr.prototype,"min",void 0),a([A("min")],Lr.prototype,"readMin",null),a([j("min")],Lr.prototype,"writeMin",null),a([u({type:String,json:{type:String,write:!0}})],Lr.prototype,"timeResolution",void 0),a([A("timeResolution")],Lr.prototype,"readTimeResolution",null),a([j("timeResolution")],Lr.prototype,"writeTimeResolution",null),a([u({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Lr.prototype,"type",void 0),Lr=X3=a([_("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Lr);const uJ=Lr;var eg;function uw(t){return t!=null?new Date(t):null}function cw(t){return t?t.getTime():null}let ts=eg=class extends ro{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return uw(e.max)}writeMax(t,e){e.max=cw(t)}readMin(t,e){return uw(e.min)}writeMin(t,e){e.min=cw(t)}clone(){return new eg({includeTime:this.includeTime,max:this.max,min:this.min})}};a([u({type:Boolean,json:{write:!0}})],ts.prototype,"includeTime",void 0),a([u({type:Date,json:{type:Number,write:!0}})],ts.prototype,"max",void 0),a([A("max")],ts.prototype,"readMax",null),a([j("max")],ts.prototype,"writeMax",null),a([u({type:Date,json:{type:Number,write:!0}})],ts.prototype,"min",void 0),a([A("min")],ts.prototype,"readMin",null),a([j("min")],ts.prototype,"writeMin",null),a([u({type:["datetime-picker"],json:{read:!1,write:!0}})],ts.prototype,"type",void 0),ts=eg=a([_("esri.form.elements.inputs.DateTimePickerInput")],ts);const cJ=ts;var tg;let Mu=tg=class extends ro{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new tg({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};a([u({type:String,json:{write:!0}})],Mu.prototype,"noValueOptionLabel",void 0),a([u({type:Boolean,json:{write:!0}})],Mu.prototype,"showNoValueOption",void 0),a([u({type:["radio-buttons"],json:{read:!1,write:!0}})],Mu.prototype,"type",void 0),Mu=tg=a([_("esri.form.elements.inputs.RadioButtonsInput")],Mu);const pJ=Mu;var rg;let Eu=rg=class extends ro{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new rg({offValue:this.offValue,onValue:this.onValue})}};a([u({type:[String,Number],json:{write:!0}})],Eu.prototype,"offValue",void 0),a([u({type:[String,Number],json:{write:!0}})],Eu.prototype,"onValue",void 0),a([u({type:["switch"],json:{read:!1,write:!0}})],Eu.prototype,"type",void 0),Eu=rg=a([_("esri.form.elements.inputs.SwitchInput")],Eu);const dJ=Eu;var ig;let z0=ig=class extends H6{constructor(t){super(t),this.type="text-area"}clone(){return new ig({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["text-area"],json:{read:!1,write:!0}})],z0.prototype,"type",void 0),z0=ig=a([_("esri.form.elements.inputs.TextAreaInput")],z0);const hJ=z0;var sg;let U0=sg=class extends H6{constructor(t){super(t),this.type="text-box"}clone(){return new sg({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["text-box"],json:{read:!1,write:!0}})],U0.prototype,"type",void 0),U0=sg=a([_("esri.form.elements.inputs.TextBoxInput")],U0);const yJ=U0;var ng;function zy(t){return t??null}function Uy(t){return t??null}let oi=ng=class extends ro{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return zy(e.max)}writeMax(t,e){e.max=Uy(t)}readMin(t,e){return zy(e.min)}writeMin(t,e){e.min=Uy(t)}readTimeResolution(t,e){return zy(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Uy(t)}clone(){return new ng({max:this.max,min:this.min,timeResolution:this.timeResolution})}};a([u({type:String,json:{type:String,write:!0}})],oi.prototype,"max",void 0),a([A("max")],oi.prototype,"readMax",null),a([j("max")],oi.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],oi.prototype,"min",void 0),a([A("min")],oi.prototype,"readMin",null),a([j("min")],oi.prototype,"writeMin",null),a([u({type:String,json:{type:String,write:!0}})],oi.prototype,"timeResolution",void 0),a([A("timeResolution")],oi.prototype,"readTimeResolution",null),a([j("timeResolution")],oi.prototype,"writeTimeResolution",null),a([u({type:["time-picker"],json:{read:!1,write:!0}})],oi.prototype,"type",void 0),oi=ng=a([_("esri.form.elements.inputs.TimePickerInput")],oi);const fJ=oi,mJ=oJ,gJ=aJ,vJ=lJ,wJ=uJ,bJ=cJ,_J=pJ,SJ=dJ,xJ=hJ,$J=yJ,TJ=fJ,IJ={base:ro,key:"type",typeMap:{"barcode-scanner":mJ,"combo-box":gJ,"date-picker":vJ,"datetime-picker":bJ,"datetimeoffset-picker":wJ,"radio-buttons":_J,switch:SJ,"text-area":xJ,"text-box":$J,"time-picker":TJ}};var og;let ui=og=class extends qr{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new og({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};a([u({types:NT,json:{read:{reader:d4},write:!0}})],ui.prototype,"domain",void 0),a([u({type:Boolean,json:{write:!0}})],ui.prototype,"editable",void 0),a([u({type:String,json:{write:!0}})],ui.prototype,"editableExpression",void 0),a([u({type:String,json:{write:!0}})],ui.prototype,"fieldName",void 0),a([u({type:String,json:{write:!0}})],ui.prototype,"hint",void 0),a([u({types:IJ,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ui.prototype,"input",void 0),a([u({type:String,json:{write:!0}})],ui.prototype,"requiredExpression",void 0),a([u({type:String,json:{read:!1,write:!0}})],ui.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],ui.prototype,"valueExpression",void 0),ui=og=a([_("esri.form.elements.FieldElement")],ui);var ag;let bn=ag=class extends qr{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ag({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:P(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};a([u({type:Number,json:{write:!0}})],bn.prototype,"displayCount",void 0),a([u({type:["list"],json:{write:!0}})],bn.prototype,"displayType",void 0),a([u({type:String,json:{write:!0}})],bn.prototype,"editableExpression",void 0),a([u({type:[_6],json:{write:!0}})],bn.prototype,"orderByFields",void 0),a([u({type:Number,json:{write:!0}})],bn.prototype,"relationshipId",void 0),a([u({type:["relationship"],json:{read:!1,write:!0}})],bn.prototype,"type",void 0),bn=ag=a([_("esri.form.elements.RelationshipElement")],bn);const pw=bn;var lg;let Pu=lg=class extends qr{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new lg({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};a([u({type:String,json:{write:!0}})],Pu.prototype,"text",void 0),a([u({type:String,json:{write:!0}})],Pu.prototype,"textFormat",void 0),a([u({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Pu.prototype,"type",void 0),Pu=lg=a([_("esri.form.elements.TextElement")],Pu);const dw=Pu;let Ou=class extends de(qr){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};a([u({type:[uT],json:{write:{isRequired:!0}}})],Ou.prototype,"associationTypes",void 0),a([u({type:String,json:{write:!0}})],Ou.prototype,"editableExpression",void 0),a([u({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Ou.prototype,"type",void 0),Ou=a([_("esri.form.elements.UtilityNetworkAssociationsElement")],Ou);const hw=Ou,MJ=t=>t.type==="field",EJ=t=>t.type==="group",PJ=t=>t.type==="text";function VM(t){return{typesWithGroup:{base:qr,key:"type",typeMap:{attachment:ow,field:ui,group:t,relationship:pw,text:dw,utilityNetworkAssociations:hw}},typesWithoutGroup:{base:qr,key:"type",typeMap:{attachment:ow,field:ui,relationship:pw,text:dw,utilityNetworkAssociations:hw}}}}function zM(t,e,r=!0){if(!t)return null;const i=r?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>i[s.type]).map(s=>i[s.type].fromJSON(s))}function UM(t,e,r=!0){if(!t)return null;const i=r?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>i[s.type]).map(s=>s.toJSON())}function qM(t,e,r=!0){return t?t.map(i=>fl(r?e.typesWithGroup:e.typesWithoutGroup,i)):null}var ug;let ks=ug=class extends qr{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return qM(t,qy,!1)}readElements(t,e){return zM(e.formElements,qy,!1)}writeElements(t,e){e.formElements=UM(t,qy,!1)}clone(){return new ug({description:this.description,elements:P(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};a([u({json:{write:!0}})],ks.prototype,"elements",void 0),a([xe("elements")],ks.prototype,"castElements",null),a([A("elements",["formElements"])],ks.prototype,"readElements",null),a([j("elements")],ks.prototype,"writeElements",null),a([u({type:["collapsed","expanded"],json:{write:!0}})],ks.prototype,"initialState",void 0),a([u({type:String,json:{read:!1,write:!0}})],ks.prototype,"type",void 0),ks=ug=a([_("esri.form.elements.GroupElement")],ks);const qy=VM(ks),OJ=ks;var cg;const Gy=VM(OJ);let rs=cg=class extends F{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return qM(t,Gy)}readElements(t,e){return zM(e.formElements,Gy)}writeElements(t,e){e.formElements=UM(t,Gy)}clone(){return new cg({description:this.description,expressionInfos:P(this.expressionInfos),elements:P(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const r=new Set,{description:i,elements:s,expressionInfos:n,title:o}=this;if(Dd(r,t,i),Dd(r,t,o),!s)return[];const l=RJ(s,n).map(c=>cr(r,t,null,c));await Promise.all(l);for(const c of s)GM(r,{fieldsIndex:t,relationships:e},c);return Array.from(r).sort()}};function GM(t,e,r){const{fieldsIndex:i}=e;if(!i||i.fields.length!==t.size)switch(Dd(t,i,r.label),Dd(t,i,r.description),r.type){case"field":ur(t,i,r.fieldName);break;case"group":r.elements.forEach(s=>GM(t,e,s));break;case"relationship":if(e.relationships){const s=e.relationships.find(n=>n.id===r.relationshipId);s&&ur(t,i,s.keyField)}Il(t,i,r.orderByFields?.map(s=>s.field));break;case"text":Dd(t,i,r.text)}}function RJ(t,e){if(!e||e.length===0)return[];const r=BM(t),i=[];for(const s of e)r.has(s.name)&&i.push(s.expression);return i}function BM(t){const e=new Set;for(const r of t)if(Y9(e,r.visibilityExpression),!PJ(r)){if(EJ(r))X9(e,BM(r.elements));else if(Y9(e,r.editableExpression),MJ(r)){const{requiredExpression:i,valueExpression:s}=r;X9(e,[i,s])}}return e}function Dd(t,e,r){Il(t,e,g6(r))}a([u({type:String,json:{write:!0}})],rs.prototype,"description",void 0),a([u({json:{write:!0}})],rs.prototype,"elements",void 0),a([xe("elements")],rs.prototype,"castElements",null),a([A("elements",["formElements"])],rs.prototype,"readElements",null),a([j("elements")],rs.prototype,"writeElements",null),a([u({type:[eJ],json:{write:!0}})],rs.prototype,"expressionInfos",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],rs.prototype,"preserveFieldValuesWhenHidden",void 0),a([u({type:String,json:{write:!0}})],rs.prototype,"title",void 0),rs=cg=a([_("esri.form.FormTemplate")],rs);const W6=Symbol("getSliceableSymbol");let Ml=class{};Ml=a([_("esri.graphic.GraphicOrigin")],Ml);const CJ=Symbol("isFeatureGraphicOrigin");var yw;let LJ=class extends Ml{get[(yw=CJ,Nh)](){return this.layer}get[$6](){return this.layer}get[W6](){return this.layer}constructor(e){super(),this[yw]=!0,this.type="feature",this.layer=e}get id(){return this.layer.id}};function fw(t,e,r){if(t.hasM==null||t.hasZ)for(const i of e)for(const s of i)s.length>2&&(s[2]*=r)}function kJ(t,e,r){if(!t&&!e||!r)return;const i=Nc(r);mw(t,r,i),mw(e,r,i)}function mw(t,e,r){if(t)for(const i of t)AJ(i.geometry,e,r)}function AJ(t,e,r){if(!t?.spatialReference||at(t.spatialReference,e))return;const i=Nc(t.spatialReference)/r;if(i!==1){if("x"in t)t.z!=null&&(t.z*=i);else if("rings"in t)fw(t,t.rings,i);else if("paths"in t)fw(t,t.paths,i);else if("points"in t&&(t.hasM==null||t.hasZ))for(const s of t.points)s.length>2&&(s[2]*=i)}}function pg(t,e,r){if(!r?.features||!r.hasZ)return;const i=l6(r.geometryType,e,t.outSpatialReference);if(i!=null)for(const s of r.features)i(s.geometry)}var dg;const hg=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let pt=dg=class extends F{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,He)}writeGeometryType(t,e,r,i){if(t)return void hg.write(t,e,r,i);const{features:s}=this;if(s){for(const n of s)if(n?.geometry!=null)return void hg.write(n.geometry.type,e,r,i)}}readQueryGeometry(t,e){if(!t)return null;const r=!!t.spatialReference,i=Xo(t);return i&&!r&&e.spatialReference&&(i.spatialReference=B.fromJSON(e.spatialReference)),i}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(e.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new dg(this.cloneProperties())}cloneProperties(){return P({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let r=0;r<e.features.length;r++){const i=e.features[r];if(i.geometry){const s=t?.[r];i.geometry=s?.toJSON()||i.geometry}}return e}quantize(t){const{scale:[e,r],translate:[i,s]}=t,n=d=>Math.round((d-i)/e),o=d=>Math.round((s-d)/r),l=this.features,c=this._getQuantizationFunction(this.geometryType,n,o);for(let d=0,h=l.length;d<h;d++)c?.(l[d].geometry)||(l.splice(d,1),d--,h--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[n,o]}=r,l=f=>f*n+i,c=f=>s-f*o;let d=null,h=null;if(this.hasZ&&r?.scale?.[2]!=null){const{translate:[,,f],scale:[,,m]}=r;d=g=>g*m+f}if(this.hasM&&r?.scale?.[3]!=null){const{translate:[,,,f],scale:[,,,m]}=r;h=g=>g==null?g:g*m+f}const y=this._getHydrationFunction(t,l,c,d,h);for(const{geometry:f}of e)f!=null&&y&&y(f);return this.transform=null,this}readFeaturesWithClass(t,e,r){const i=B.fromJSON(e.spatialReference),s=[];for(let n=0;n<t.length;n++){const o=t[n],l=r.fromJSON(o),c=o.geometry?.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=i);const d=o.aggregateGeometries,h=l.aggregateGeometries;if(d&&h!=null)for(const y in h){const f=h[y],m=d[y],g=m?.spatialReference;f==null||g||(f.spatialReference=i)}s.push(l)}return s}_quantizePoints(t,e,r){let i,s;const n=[];for(let o=0,l=t.length;o<l;o++){const c=t[o];if(o>0){const d=e(c[0]),h=r(c[1]);d===i&&h===s||(n.push([d-i,h-s]),i=d,s=h)}else i=e(c[0]),s=r(c[1]),n.push([i,s])}return n.length>0?n:null}_getQuantizationFunction(t,e,r){return t==="point"?i=>(i.x=e(i.x),i.y=r(i.y),i):t==="polyline"||t==="polygon"?i=>{const s=nl(i)?i.rings:i.paths,n=[];for(let o=0,l=s.length;o<l;o++){const c=s[o],d=this._quantizePoints(c,e,r);d&&n.push(d)}return n.length>0?(nl(i)?i.rings=n:i.paths=n,i):null}:t==="multipoint"?i=>{const s=this._quantizePoints(i.points,e,r);return s&&s.length>0?(i.points=s,i):null}:t==="extent"?i=>i:null}_getHydrationFunction(t,e,r,i,s){return t==="point"?n=>{n.x=e(n.x),n.y=r(n.y),i&&(n.z=i(n.z))}:t==="polyline"||t==="polygon"?n=>{const o=nl(n)?n.rings:n.paths;let l,c;for(let d=0,h=o.length;d<h;d++){const y=o[d];for(let f=0,m=y.length;f<m;f++){const g=y[f];f>0?(l+=g[0],c+=g[1]):(l=g[0],c=g[1]),g[0]=e(l),g[1]=r(c)}}if(i&&s)for(let d=0,h=o.length;d<h;d++){const y=o[d];for(let f=0,m=y.length;f<m;f++){const g=y[f];g[2]=i(g[2]),g[3]=s(g[3])}}else if(i)for(let d=0,h=o.length;d<h;d++){const y=o[d];for(let f=0,m=y.length;f<m;f++){const g=y[f];g[2]=i(g[2])}}else if(s)for(let d=0,h=o.length;d<h;d++){const y=o[d];for(let f=0,m=y.length;f<m;f++){const g=y[f];g[2]=s(g[2])}}}:t==="extent"?n=>{n.xmin=e(n.xmin),n.ymin=r(n.ymin),n.xmax=e(n.xmax),n.ymax=r(n.ymax),i&&n.zmax!=null&&n.zmin!=null&&(n.zmax=i(n.zmax),n.zmin=i(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:t==="multipoint"?n=>{const o=n.points;let l,c;for(let d=0,h=o.length;d<h;d++){const y=o[d];d>0?(l+=y[0],c+=y[1]):(l=y[0],c=y[1]),y[0]=e(l),y[1]=r(c)}if(i&&s)for(let d=0,h=o.length;d<h;d++){const y=o[d];y[2]=i(y[2]),y[3]=s(y[3])}else if(i)for(let d=0,h=o.length;d<h;d++){const y=o[d];y[2]=i(y[2])}else if(s)for(let d=0,h=o.length;d<h;d++){const y=o[d];y[2]=s(y[2])}}:null}};a([u({type:String,json:{write:!0}})],pt.prototype,"displayFieldName",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pt.prototype,"exceededTransferLimit",void 0),a([u({type:[He],json:{write:!0}})],pt.prototype,"features",void 0),a([A("features")],pt.prototype,"readFeatures",null),a([u({type:[Tt],json:{write:!0}})],pt.prototype,"fields",void 0),a([u({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:hg.read}}})],pt.prototype,"geometryType",void 0),a([j("geometryType")],pt.prototype,"writeGeometryType",null),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pt.prototype,"hasM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pt.prototype,"hasZ",void 0),a([u({types:Ah,json:{write:!0}})],pt.prototype,"queryGeometry",void 0),a([A("queryGeometry")],pt.prototype,"readQueryGeometry",null),a([u({type:B,json:{write:!0}})],pt.prototype,"spatialReference",void 0),a([j("spatialReference")],pt.prototype,"writeSpatialReference",null),a([u({json:{write:!0}})],pt.prototype,"transform",void 0),pt=dg=a([_("esri.rest.support.FeatureSet")],pt),pt.prototype.toJSON.isDefaultToJSON=!0;let FJ=0,Pn=class extends D_(eC(U)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const r=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,r);pg(e,this.layer.spatialReference,i);const s=pt.fromJSON(i);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return s;const n=this.layer.objectIdField;for(const o of s.features){const l=o.attributes[n],c=this._idToClientGeometry.get(l);c!==void 0&&(o.geometry=c)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,r={}){if(this._requiresClientGraphicMapping())throw new I("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,r);return pg(e,this.layer.spatialReference,i),i}queryFeatureCount(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,r))}queryObjectIds(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,r))}queryExtent(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,r)).then(i=>({count:i.count,extent:ue.fromJSON(i.extent)}))}querySnapping(e,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",e,r))}async queryAttributeBins(e,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),r)}async _applyEdits(e){if(!this._connection)throw new I("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[r]!=null?h.attributes[r]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const y=o(h);y!=null&&s.push(y)}const l=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(n.push(this._serializeFeature(h)),l&&h.geometry!=null){const y=o(h);y!=null&&l.set(y,h)}}kJ(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:c,featureEditResults:d}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:s});return this.fullExtent=c,i&&i.finish(d.uidToObjectId),this._updateIdToClientGeometries(l,d),this._createEditsResult(d)}async _prepareClientMapping(e,r){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const i=[];for(const{geometry:s}of e)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||i.push(s.load({signal:r}));i.length&&await Promise.all(i)}_updateIdToClientGeometries(e,r){if(this._idToClientGeometry){if(e)for(const i of r.updateResults){if(!i.success)continue;const s=e.get(i.objectId);s!=null&&this._addIdToClientGeometry(s)}for(const i of r.deleteResults)i.success&&this._idToClientGeometry.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const r=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:r?new I("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(e){const r=new Map,i=new Array(e.length);let s=null;for(let o=0;o<e.length;o++){const l=e[o],c=this._serializeFeature(l);s||l.geometry==null||(s=l.geometry.type),i[o]=c,r.set(`${c.uid}`,l)}const n=this;return{features:i,inferredGeometryType:s,finish(o){const l=n.sourceJSON.objectIdField;for(const c in o){const d=o[c],h=r.get(c);h&&(h.attributes||(h.attributes={}),d===-1?delete h.attributes[l]:h.attributes[l]=d,n._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;const r=this.sourceJSON.objectIdField,i=e.attributes?.[r];i!=null&&this._idToClientGeometry.set(i,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:r}=e,i=this._geometryForSerialization(e),s=(FJ++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:r}:{uid:s,attributes:r}}_geometryForSerialization(e){const{geometry:r}=e;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Ve.fromExtent(r.extent):null:r}async _startWorker(e){this._connection=await xj("MemorySourceWorker",{strategy:ie("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:s,hasM:n,hasZ:o,timeInfo:l,dateFieldsTimeZone:c}=this.layer,d=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{N.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const y={features:h.features,fields:r?.map(g=>g.toJSON()),geometryType:J8.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:d?null:i&&i.toJSON(),timeInfo:l?.toJSON()??null,dateFieldsTimeZone:c},f=await this._connection.invoke("load",y,{signal:e});for(const g of f.warnings)N.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});f.featureErrors.length&&N.getLogger(this.layer).warn("#load()",`Encountered ${f.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:f.featureErrors});const m=f.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(m.geometryType=J8.toJSON(h.inferredGeometryType)),this.sourceJSON=m,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(f.assignedObjectIds)}};a([O5({Type:He,ensureType:Yr(He)})],Pn.prototype,"itemType",void 0),a([u()],Pn.prototype,"type",void 0),a([u({constructOnly:!0})],Pn.prototype,"layer",void 0),a([u({readOnly:!0})],Pn.prototype,"_workerGeometryType",null),a([u()],Pn.prototype,"sourceJSON",void 0),Pn=a([_("esri.layers.graphics.sources.MemorySource")],Pn);function NJ(t){return"portalItem"in t}const HM=t=>{const e=t;let r=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):NJ(this)?this.portalItem?.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return a([u({type:String})],r.prototype,"apiKey",null),r=a([_("esri.layers.mixins.APIKeyMixin")],r),r},WM=t=>{const e=t;let r=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Zo(this.url);if(i?.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",tC(i,N.getLogger(this)))}};return a([u()],r.prototype,"title",null),a([u({type:String})],r.prototype,"url",null),r=a([_("esri.layers.mixins.ArcGISService")],r),r};let gw=class extends SyntaxError{constructor(e,r,i,s){super(e),this.expected=r,this.found=i,this.location=s,this.name="SyntaxError"}format(e){let r="Error: "+this.message;if(this.location){let i=null;const s=e.find(c=>c.source===this.location.source);s&&(i=s.text.split(/\r\n|\n|\r/g));const n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,l=this.location.source+":"+o.line+":"+o.column;if(i){const c=this.location.end,d="".padEnd(o.line.toString().length," "),h=i[n.line-1],y=(n.line===c.line?c.column:h.length+1)-n.column||1;r+=`
 --> `+l+`
`+d+` |
`+o.line+" | "+h+`
`+d+" | "+"".padEnd(n.column-1," ")+"".padEnd(y,"^")}else r+=`
 at `+l}return r}static buildMessage(e,r){function i(f){return f.codePointAt(0).toString(16).toUpperCase()}const s=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(f){return s?f.replace(s,m=>"\\u{"+i(m)+"}"):f}function o(f){return n(f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,m=>"\\x0"+i(m)).replace(/[\x10-\x1F\x7F-\x9F]/g,m=>"\\x"+i(m)))}function l(f){return n(f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,m=>"\\x0"+i(m)).replace(/[\x10-\x1F\x7F-\x9F]/g,m=>"\\x"+i(m)))}const c={literal:f=>'"'+o(f.text)+'"',class(f){const m=f.parts.map(g=>Array.isArray(g)?l(g[0])+"-"+l(g[1]):l(g));return"["+(f.inverted?"^":"")+m.join("")+"]"+(f.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:f=>f.description};function d(f){return c[f.type](f)}function h(f){const m=f.map(d);if(m.sort(),m.length>0){let g=1;for(let v=1;v<m.length;v++)m[v-1]!==m[v]&&(m[g]=m[v],g++);m.length=g}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function y(f){return f?'"'+o(f)+'"':"end of input"}return"Expected "+h(e)+" but "+y(r)+" found."}};function DJ(t,e){const r={},i=(e=e!==void 0?e:{}).grammarSource,s={start:z9};let n=z9;const o="none",l=")",c=",",d="(",h="%",y="px",f="cm",m="mm",g="in",v="pt",b="pc",S="deg",$="rad",E="grad",T="turn",O="#",C=".",z="e",q=/^[ \t\n\r]/,J=/^[a-z\-]/,oe=/^[0-9a-fA-F]/,le=/^[+\-]/,re=/^[0-9]/,Ie=no("none"),pe=Rt("none",!1),_t=Rt(")",!1),Er=Rt(",",!1),Ot=dp([" ","	",`
`,"\r"],!1,!1,!1),he=no("function"),Vt=Rt("(",!1),L4=no("identifier"),ca=dp([["a","z"],"-"],!1,!1,!1),io=no("percentage"),Fl=Rt("%",!1),mO=no("length"),gO=Rt("px",!1),vO=Rt("cm",!1),wO=Rt("mm",!1),bO=Rt("in",!1),_O=Rt("pt",!1),SO=Rt("pc",!1),xO=no("angle"),$O=Rt("deg",!1),TO=Rt("rad",!1),IO=Rt("grad",!1),MO=Rt("turn",!1),EO=no("number"),PO=no("color"),OO=Rt("#",!1),N9=dp([["0","9"],["a","f"],["A","F"]],!1,!1,!1),D9=dp(["+","-"],!1,!1,!1),so=dp([["0","9"]],!1,!1,!1),RO=Rt(".",!1),CO=Rt("e",!1);function LO(){return[]}function kO(x,L){return{type:"function",name:x,parameters:L||[]}}function AO(x,L){return L.length>0?yR(x,L,3):[x]}function FO(x){return{type:"quantity",value:x.value,unit:x.unit}}function NO(x){return{type:"color",colorType:x.type,value:x.value}}function Hse(x){return x}function DO(){return e1()}function jO(x){return{value:x,unit:"%"}}function VO(x){return{value:x,unit:"px"}}function zO(x){return{value:x,unit:"cm"}}function UO(x){return{value:x,unit:"mm"}}function qO(x){return{value:x,unit:"in"}}function GO(x){return{value:x,unit:"pt"}}function BO(x){return{value:x,unit:"pc"}}function HO(x){return{value:x,unit:"deg"}}function WO(x){return{value:x,unit:"rad"}}function ZO(x){return{value:x,unit:"grad"}}function JO(x){return{value:x,unit:"turn"}}function QO(x){return{value:x,unit:null}}function KO(){return{type:"hex",value:e1()}}function YO(x){return{type:"function",value:x}}function XO(){return{type:"named",value:e1()}}function eR(){return parseFloat(e1())}let k=0|e.peg$currPos,Ge=k;const Nl=[{line:1,column:1}];let pp,Hi=k,Xh=e.peg$maxFailExpected||[],se=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');n=s[e.startRule]}function e1(){return t.substring(Ge,k)}function tR(x=k){const L=t.codePointAt(x);return L===void 0?"":String.fromCodePoint(L)}function Rt(x,L){return{type:"literal",text:x,ignoreCase:L}}function dp(x,L,V,ce){return{type:"class",parts:x,inverted:L,ignoreCase:V,unicode:ce}}function rR(){return{type:"end"}}function no(x){return{type:"other",description:x}}function j9(x){let L,V=Nl[x];if(V)return V;if(x>=Nl.length)L=Nl.length-1;else for(L=x;!Nl[--L];);for(V=Nl[L],V={line:V.line,column:V.column};L<x;)t.charCodeAt(L)===10?(V.line++,V.column=1):V.column++,L++;return Nl[x]=V,V}function V9(x,L,V){const ce=j9(x),Me=j9(L);return{source:i,start:{offset:x,line:ce.line,column:ce.column},end:{offset:L,line:Me.line,column:Me.column}}}function ye(x){k<Hi||(k>Hi&&(Hi=k,Xh=[]),Xh.push(x))}function iR(x,L,V){return new gw(gw.buildMessage(x,L),x,L,V)}function z9(){let x;return x=sR(),x===r&&(x=nR()),x}function sR(){let x,L;return se++,x=k,Ct(),t.substr(k,4)===o?(L=o,k+=4):(L=r,se===0&&ye(pe)),L!==r?(Ct(),Ge=x,x=LO()):(k=x,x=r),se--,x===r&&se===0&&ye(Ie),x}function nR(){let x,L;if(x=[],L=k4(),L!==r)for(;L!==r;)x.push(L),L=k4();else x=r;return x}function k4(){let x,L,V,ce;return x=k,Ct(),L=aR(),L!==r?(Ct(),V=oR(),V===r&&(V=null),Ct(),t.charCodeAt(k)===41?(ce=l,k++):(ce=r,se===0&&ye(_t)),ce!==r?(Ct(),Ge=x,x=kO(L,V)):(k=x,x=r)):(k=x,x=r),x}function oR(){let x,L,V,ce,Me,Ye,St,Zt;if(x=k,L=A4(),L!==r){for(V=[],ce=k,Me=Ct(),t.charCodeAt(k)===44?(Ye=c,k++):(Ye=r,se===0&&ye(Er)),Ye===r&&(Ye=null),St=Ct(),Zt=A4(),Zt!==r?(Me=[Me,Ye,St,Zt],ce=Me):(k=ce,ce=r);ce!==r;)V.push(ce),ce=k,Me=Ct(),t.charCodeAt(k)===44?(Ye=c,k++):(Ye=r,se===0&&ye(Er)),Ye===r&&(Ye=null),St=Ct(),Zt=A4(),Zt!==r?(Me=[Me,Ye,St,Zt],ce=Me):(k=ce,ce=r);Ge=x,x=AO(L,V)}else k=x,x=r;return x}function A4(){let x,L;return x=k,L=lR(),L===r&&(L=uR(),L===r&&(L=cR(),L===r&&(L=pR()))),L!==r&&(Ge=x,L=FO(L)),x=L,x===r&&(x=k,L=dR(),L!==r&&(Ge=x,L=NO(L)),x=L),x}function Ct(){let x,L;for(se++,x=[],L=t.charAt(k),q.test(L)?k++:(L=r,se===0&&ye(Ot));L!==r;)x.push(L),L=t.charAt(k),q.test(L)?k++:(L=r,se===0&&ye(Ot));return se--,x}function aR(){let x,L,V;return se++,x=k,L=U9(),L!==r?(t.charCodeAt(k)===40?(V=d,k++):(V=r,se===0&&ye(Vt)),V!==r?(Ge=x,x=L):(k=x,x=r)):(k=x,x=r),se--,x===r&&(L=r,se===0&&ye(he)),x}function U9(){let x,L,V;if(se++,x=k,L=[],V=t.charAt(k),J.test(V)?k++:(V=r,se===0&&ye(ca)),V!==r)for(;V!==r;)L.push(V),V=t.charAt(k),J.test(V)?k++:(V=r,se===0&&ye(ca));else L=r;return L!==r&&(Ge=x,L=DO()),x=L,se--,x===r&&(L=r,se===0&&ye(L4)),x}function lR(){let x,L,V;return se++,x=k,Ct(),L=Si(),L!==r?(t.charCodeAt(k)===37?(V=h,k++):(V=r,se===0&&ye(Fl)),V!==r?(Ge=x,x=jO(L)):(k=x,x=r)):(k=x,x=r),se--,x===r&&se===0&&ye(io),x}function uR(){let x,L,V;return se++,x=k,Ct(),L=Si(),L!==r?(t.substr(k,2)===y?(V=y,k+=2):(V=r,se===0&&ye(gO)),V!==r?(Ge=x,x=VO(L)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),L=Si(),L!==r?(t.substr(k,2)===f?(V=f,k+=2):(V=r,se===0&&ye(vO)),V!==r?(Ge=x,x=zO(L)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),L=Si(),L!==r?(t.substr(k,2)===m?(V=m,k+=2):(V=r,se===0&&ye(wO)),V!==r?(Ge=x,x=UO(L)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),L=Si(),L!==r?(t.substr(k,2)===g?(V=g,k+=2):(V=r,se===0&&ye(bO)),V!==r?(Ge=x,x=qO(L)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),L=Si(),L!==r?(t.substr(k,2)===v?(V=v,k+=2):(V=r,se===0&&ye(_O)),V!==r?(Ge=x,x=GO(L)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),L=Si(),L!==r?(t.substr(k,2)===b?(V=b,k+=2):(V=r,se===0&&ye(SO)),V!==r?(Ge=x,x=BO(L)):(k=x,x=r)):(k=x,x=r)))))),se--,x===r&&se===0&&ye(mO),x}function cR(){let x,L,V;return se++,x=k,L=Si(),L!==r?(t.substr(k,3)===S?(V=S,k+=3):(V=r,se===0&&ye($O)),V!==r?(Ge=x,x=HO(L)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,L=Si(),L!==r?(t.substr(k,3)===$?(V=$,k+=3):(V=r,se===0&&ye(TO)),V!==r?(Ge=x,x=WO(L)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,L=Si(),L!==r?(t.substr(k,4)===E?(V=E,k+=4):(V=r,se===0&&ye(IO)),V!==r?(Ge=x,x=ZO(L)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,L=Si(),L!==r?(t.substr(k,4)===T?(V=T,k+=4):(V=r,se===0&&ye(MO)),V!==r?(Ge=x,x=JO(L)):(k=x,x=r)):(k=x,x=r)))),se--,x===r&&(L=r,se===0&&ye(xO)),x}function pR(){let x,L;return se++,x=k,Ct(),L=Si(),L!==r?(Ge=x,x=QO(L)):(k=x,x=r),se--,x===r&&se===0&&ye(EO),x}function dR(){let x,L,V,ce;if(se++,x=k,t.charCodeAt(k)===35?(L=O,k++):(L=r,se===0&&ye(OO)),L!==r){if(V=[],ce=t.charAt(k),oe.test(ce)?k++:(ce=r,se===0&&ye(N9)),ce!==r)for(;ce!==r;)V.push(ce),ce=t.charAt(k),oe.test(ce)?k++:(ce=r,se===0&&ye(N9));else V=r;V!==r?(Ge=x,x=KO()):(k=x,x=r)}else k=x,x=r;return x===r&&(x=k,L=k4(),L!==r&&(Ge=x,L=YO(L)),x=L,x===r&&(x=k,L=U9(),L!==r&&(Ge=x,L=XO()),x=L)),se--,x===r&&(L=r,se===0&&ye(PO)),x}function Si(){let x,L,V,ce,Me,Ye,St,Zt;for(x=k,L=t.charAt(k),le.test(L)?k++:(L=r,se===0&&ye(D9)),L===r&&(L=null),V=k,ce=[],Me=t.charAt(k),re.test(Me)?k++:(Me=r,se===0&&ye(so));Me!==r;)ce.push(Me),Me=t.charAt(k),re.test(Me)?k++:(Me=r,se===0&&ye(so));if(t.charCodeAt(k)===46?(Me=C,k++):(Me=r,se===0&&ye(RO)),Me!==r){if(Ye=[],St=t.charAt(k),re.test(St)?k++:(St=r,se===0&&ye(so)),St!==r)for(;St!==r;)Ye.push(St),St=t.charAt(k),re.test(St)?k++:(St=r,se===0&&ye(so));else Ye=r;Ye!==r?(ce=[ce,Me,Ye],V=ce):(k=V,V=r)}else k=V,V=r;if(V===r)if(V=[],ce=t.charAt(k),re.test(ce)?k++:(ce=r,se===0&&ye(so)),ce!==r)for(;ce!==r;)V.push(ce),ce=t.charAt(k),re.test(ce)?k++:(ce=r,se===0&&ye(so));else V=r;if(V!==r){if(ce=k,t.charCodeAt(k)===101?(Me=z,k++):(Me=r,se===0&&ye(CO)),Me!==r){if(Ye=t.charAt(k),le.test(Ye)?k++:(Ye=r,se===0&&ye(D9)),Ye===r&&(Ye=null),St=[],Zt=t.charAt(k),re.test(Zt)?k++:(Zt=r,se===0&&ye(so)),Zt!==r)for(;Zt!==r;)St.push(Zt),Zt=t.charAt(k),re.test(Zt)?k++:(Zt=r,se===0&&ye(so));else St=r;St!==r?(Me=[Me,Ye,St],ce=Me):(k=ce,ce=r)}else k=ce,ce=r;ce===r&&(ce=null),Ge=x,x=eR()}else k=x,x=r;return x}function hR(x,L){return x.map(function(V){return V[L]})}function yR(x,L,V){return[x].concat(hR(L,V))}pp=n();const F4=pp!==r&&k===t.length;function q9(){throw pp!==r&&k<t.length&&ye(rR()),iR(Xh,Hi<t.length?tR(Hi):null,Hi<t.length?V9(Hi,Hi+1):V9(Hi,Hi))}return e.peg$library?{peg$result:pp,peg$currPos:k,peg$FAILED:r,peg$maxFailExpected:Xh,peg$maxFailPos:Hi,peg$success:F4,peg$throw:F4?void 0:q9}:F4?pp:void q9()}function ZM(t){if(!t||t.length===0)return null;if(typeof t=="string"){const r=vw(t);return r&&r.length!==0?r:null}const e=t.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new I("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:vw(r.value)}});e.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<e.length-1;r++){if(!UD(e[r].effects,e[r+1].effects))throw new I("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[r].effects,b:e[r+1].effects});qD(e[r].effects,e[r+1].effects)}return e.sort((r,i)=>i.scale-r.scale),e}function vw(t){let e;if(!t)return[];try{e=DJ(t)}catch(r){throw new I("effect:invalid-syntax","Invalid effect syntax",{value:t,error:r})}return e.map(r=>jJ(r))}function jJ(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return VJ(t);case"opacity":return zJ(t);case"hue-rotate":return UJ(t);case"blur":return qJ(t);case"drop-shadow":return GJ(t);case"bloom":return BJ(t)}}catch(e){throw e.details.filter=t,e}throw new I("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function VJ(t){let e=1;return op(t.parameters,1),t.parameters.length===1&&(e=cs(t.parameters[0])),new Kf(t.name,e)}function zJ(t){let e=1;return op(t.parameters,1),t.parameters.length===1&&(e=cs(t.parameters[0])),new n$(e)}function UJ(t){let e=0;return op(t.parameters,1),t.parameters.length===1&&(e=KJ(t.parameters[0])),new i$(e)}function qJ(t){let e=0;return op(t.parameters,1),t.parameters.length===1&&(e=Q6(t.parameters[0]),Hh(e,t.parameters[0])),new Yx(e)}function GJ(t){const e=[];let r=null;for(const i of t.parameters)if(i.type==="color"){if(e.length&&Object.freeze(e),r)throw new I("effect:type-error","Accepts only one color",{});r=YJ(i)}else{const s=Q6(i);if(Object.isFrozen(e))throw new I("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&Hh(s,i)}if(e.length<2||e.length>3)throw new I("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new t$(e[0],e[1],e[2]||0,r||JM("black"))}function BJ(t){let e=1,r=0,i=0;return op(t.parameters,3),t.parameters[0]&&(e=cs(t.parameters[0])),t.parameters[1]&&(r=Q6(t.parameters[1]),Hh(r,t.parameters[1])),t.parameters[2]&&(i=cs(t.parameters[2])),new Qx(e,r,i)}function op(t,e){if(t.length>e)throw new I("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function w4(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in J6)return"<length>";if(t.unit in Z6)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Hh(t,e){if(t<0)throw new I("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function HJ(t){if(t.type!=="quantity"||t.unit!==null)throw new I("effect:type-error",`Expected <double>, Actual: ${w4(t)}`,{term:t})}function WJ(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new I("effect:type-error",`Expected <double> or <percentage>, Actual: ${w4(t)}`,{term:t})}const Z6={deg:1,grad:.9,rad:180/Math.PI,turn:360};function ZJ(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&Z6[t.unit]!=null))throw new I("effect:type-error",`Expected <angle>, Actual: ${w4(t)}`,{term:t})}const J6={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function JJ(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&J6[t.unit]!=null))throw new I("effect:type-error",`Expected <length>, Actual: ${w4(t)}`,{term:t})}function cs(t){WJ(t);const e=t.value;return Hh(e,t),t.unit==="%"?.01*e:e}function QJ(t){return HJ(t),Hh(t.value,t),t.value}function KJ(t){return ZJ(t),t.value*Z6[t.unit]||0}function Q6(t){return JJ(t),t.value*J6[t.unit]||0}function YJ(t){switch(t.colorType){case"hex":return Ak(t.value);case"named":return JM(t.value);case"function":return tQ(t.value)}}function JM(t){if(!bS(t))throw new I("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return kk(t)}const XJ=/^rgba?/i,eQ=/^hsla?/i;function tQ(t){if(op(t.parameters,4),XJ.test(t.name))return[cs(t.parameters[0]),cs(t.parameters[1]),cs(t.parameters[2]),t.parameters[3]?cs(t.parameters[3]):1];if(eQ.test(t.name))return _S(QJ(t.parameters[0]),cs(t.parameters[1]),cs(t.parameters[2]),t.parameters[3]?cs(t.parameters[3]):1);throw new I("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function dh(t,e,r){try{return iQ(t)}catch(i){r?.messages?.push(i)}return null}function hh(t,e,r,i){try{const s=rQ(t);Kr(r,s,e)}catch(s){i.messages&&i.messages.push(s)}}function rQ(t){const e=ZM(t);return e?GD(e)?e.map(r=>r.toJSON()):e.map(({scale:r,effects:i})=>({scale:r,value:i.map(s=>s.toJSON())})):null}function iQ(t){if(!t||t.length===0)return null;if(sQ(t)){const e=[];for(const r of t)e.push({scale:r.scale,value:ww(r.value)});return e}return ww(t)}function sQ(t){const e=t[0];return!!e&&"scale"in e}function ww(t){if(!t?.length)return"";const e=[];for(const r of t){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[nn(r,"amount")];break;case"blur":i=[nn(r,"radius","pt")];break;case"hue-rotate":i=[nn(r,"angle","deg")];break;case"drop-shadow":i=[nn(r,"xoffset","pt"),nn(r,"yoffset","pt"),nn(r,"blurRadius","pt"),nQ(r,"color")];break;case"bloom":i=[nn(r,"strength"),nn(r,"radius","pt"),nn(r,"threshold")]}const s=`${r.type}(${i.filter(Boolean).join(" ")})`;ZM(s),e.push(s)}return e.join(" ")}function nn(t,e,r){if(t[e]==null)throw new I("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return r?t[e]+r:""+t[e]}function nQ(t,e){if(t[e]==null)throw new I("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const r=t[e];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const oQ={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:ke}},"portal-item":{read:!0,write:{layerContainerTypes:ke}}}}},bw={read:{reader:dh},write:{allowNull:!0,writer:hh,layerContainerTypes:ke}},aQ={json:{read:!1,write:!1,origins:{"web-map":bw,"portal-item":bw}}},Wh=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return a([u(oQ)],r.prototype,"blendMode",void 0),a([u(aQ)],r.prototype,"effect",void 0),r=a([_("esri.layers.mixins.BlendLayer")],r),r},QM=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.customParameters=null}};return a([u({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],r.prototype,"customParameters",void 0),r=a([_("esri.layers.mixins.CustomParametersMixin")],r),r},KM=96;function yg(t,e){const r=t.extent,i=t.width,s=_i(r?.spatialReference);return r&&i?r.width/i*s*D5*KM:0}function she(t,e){return t/(_i(e)*D5*KM)}function lQ(t,e,r){return uQ(t,e)&&cQ(t,r)}function uQ(t,e){return e===0||gi(t,e)||t<e}function cQ(t,e){return e===0||gi(t,e)||t>e}function pQ(t,e){return gi(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const _w={write:{overridePolicy:(t,e,r)=>({enabled:!r||r.filterMode==="scale"})}};let On=class extends de(F){constructor(e){super(e),this.id=$5(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};a([u({type:String,json:{write:!0}})],On.prototype,"id",void 0),a([u({type:Number,json:_w})],On.prototype,"maxScale",void 0),a([u({type:Number,json:_w})],On.prototype,"minScale",void 0),a([u({type:String,json:{write:!0}})],On.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],On.prototype,"where",void 0),On=a([_("esri.layers.support.DisplayFilter")],On);function dQ(t,e){return{...e,filterMode:t.mode}}function ohe(t,e){return YM(t,e).next().value??null}function ahe(t,e,r){const i=hQ(t);if(i&&(PS(e,i[0])||Cf(r,i[1])))return"";const s=Array.from(YM(t,e,r)),n=yQ(s,e,r)?"1=1":s.map(o=>o.where||"1=1").reduce((o,l)=>Kj(o,l),"");return n&&n!=="1=1"?n:""}function hQ(t){if(XM(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of t.filters)e[0]=Math.max(e[0],yh(r)),e[1]=Math.min(e[1],C2(i));return e}function*YM(t,e,r){if(XM(t)==="manual"){const i=t.filters.find(s=>s.id===t.activeFilterId);i&&(yield i)}else{typeof e=="object"&&(e=e.scale);for(const i of t.filters)fQ(i.minScale,i.maxScale,e,r)&&(yield i)}}function yQ(t,e,r){if(t.length===0)return!0;const i=yh(t.at(0)?.minScale),s=C2(t.at(-1)?.maxScale);if(Cf(i,e)||PS(s,r))return!0;for(let n=0;n<t.length-1;n++){const o=t[n],l=t[n+1];if(Cf(yh(l.minScale),C2(o.maxScale)))return!0}return!1}function fQ(t,e,r,i){return t=yh(t),r=yh(r),e=C2(e),!(!gi(r,t)&&(i??r)>t)&&!Dk(e,r)&&(i===void 0||!gi(i,t))}function XM(t){return"mode"in t?t.mode:t.filterMode}function yh(t){return t||Number.POSITIVE_INFINITY}function C2(t){return t||0}let Da=class extends de(F){constructor(e){super(e),this.activeFilterId=null,this.filters=new(U.ofType(On)),this.mode="manual"}writeFilters(e,r,i,s){const n=e.toArray();this.mode==="scale"&&n.sort((o,l)=>{const c=pQ(l.minScale,o.minScale),d=o.maxScale-l.maxScale;return c===0?d:c}),r[i]=n.map(o=>o.toJSON(s))}write(e,r){return super.write(e,dQ(this,r))}};a([u({type:String,json:{write:{overridePolicy:(t,e,r)=>({enabled:r.filterMode==="manual",isRequired:!0})}}})],Da.prototype,"activeFilterId",void 0),a([u({type:U.ofType(On),nonNullable:!0,json:{write:!0}})],Da.prototype,"filters",void 0),a([j("filters")],Da.prototype,"writeFilters",null),a([u({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Da.prototype,"mode",void 0),Da=a([_("esri.layers.support.DisplayFilterInfo")],Da);const mQ=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return a([u(gQ)],r.prototype,"displayFilterEnabled",void 0),a([u(vQ)],r.prototype,"displayFilterInfo",void 0),r=a([_("esri.layers.mixins.DisplayFilteredLayer")],r),r},gQ={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:ke,writer(t,e,r){Kr(r,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},vQ={type:Da,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:ke},origins:{"web-scene":{write:!1,read:!1}}}},wQ=rC(),eE=new Map,tE=new Map;async function uhe(t,e,r){if(!t||!r)return!1;if(!e)return!0;const i=new URL(t).host;let s=eE.get(i);if(!s){const n=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Te(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===e}async function che(t,e,r=!1){if(!t||!e)return!0;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=tE.get(i)?.entries();if(s){for(const[n,o]of s)if(o.name===e){const l=!o.stack?.hasForwardEdits();if(!l&&r){const[{deleteForwardEdits:c},{default:d}]=await Promise.all([R(()=>import("./money-tides-deleteForwardEdits-DTaQSfE3.js"),__vite__mapDeps([316,3,4,1,2,5,6,7,12,13,14])),R(()=>import("./money-tides-DeleteForwardEditsParameters-1pcGD-bZ.js"),__vite__mapDeps([317,3,4,1,2,5,6,7,13,14]))]),h=await c(i,n,new d({sessionId:wQ,moment:o.moment}));return h.success&&o.stack?.clearForwardEdits(),h.success}return l}}return!0}function bQ(t,e){if(!t)return!1;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=tE.get(r)?.entries();if(i){for(const[s,n]of i)if(n.name===e)return n.lockType==="edit"}return!1}const K6=new S_;function _Q(t){return K6.on("apply-edits",new WeakRef(t))}function SQ(t){return K6.on("update-moment",new WeakRef(t))}function phe(t,e,r=null,i=!1){const s=ta();return i=e==null||i,K6.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:r,mayReceiveServiceEdits:i,result:s.promise}),s}const rE=Symbol();function dhe(t){return t!=null&&typeof t=="object"&&rE in t}function Mp(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function By(t,e,r){const i=new URL(t).host,s=eE.get(i),n=o=>!o||o===s;return n(e)&&n(r)||e===r}const xQ=t=>{var s;var e;const r=t;let i=(s=class extends r{constructor(...n){super(...n),this[e]=!0,this._applyEditsHandler=o=>{const{serviceUrl:l,layerId:c,gdbVersion:d,mayReceiveServiceEdits:h,result:y}=o,f=l===this.url,m=c!=null&&this.layerId!=null&&c===this.layerId,g=Mp(this),v=Mp(this)&&By(l,d,this.gdbVersion);if(!f||g&&!v||!m&&!h)return;const b=y.then(S=>{if(this.lastEditsEventDate=new Date,m&&(S.addedFeatures.length||S.updatedFeatures.length||S.deletedFeatures.length||S.addedAttachments.length||S.updatedAttachments.length||S.deletedAttachments.length))return this.emit("edits",P(S)),S;const $=S.editedFeatures?.find(({layerId:T})=>T===this.layerId);if($){const{adds:T,updates:O,deletes:C}=$.editedFeatures,z={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:T?T.map(({attributes:q})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],deletedFeatures:C?C.map(({attributes:q})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],updatedFeatures:O?O.map(({current:{attributes:q}})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],editedFeatures:P(S.editedFeatures),exceededTransferLimit:!1,historicMoment:P(S.historicMoment)};return this.emit("edits",z),z}const E={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:P(S.editedFeatures),exceededTransferLimit:!1,historicMoment:P(S.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(l,d,E.historicMoment)&&this.emit("edits",E),E}).then(S=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(l,d,S.historicMoment)&&(this.historicMoment=S.historicMoment),S));this.emit("apply-edits",{result:b})},this._updateMomentHandler=o=>{const{serviceUrl:l,gdbVersion:c,moment:d}=o,h=l===this.url,y=Mp(this),f=Mp(this)&&By(l,c,this.gdbVersion),m=Mp(this)&&!By(l,this.gdbVersion,null);h&&y&&f&&m&&"historicMoment"in this&&this.historicMoment!==d&&(this.historicMoment=d)},this.when().then(()=>{this.addHandles(_Q(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(SQ(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(n,o,l){return"historicMoment"in this&&this.historicMoment!==l&&bQ(n,o)}},e=rE,s);return a([u()],i.prototype,"lastEditsEventDate",void 0),i=a([_("esri.layers.mixins.EditBusLayer")],i),i};var fg;const Hy=new be({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Wy=new be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Rs=fg=class extends F{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:o,distance:l}=this;return new W({geometry:P(r),objectIds:P(n),spatialRelationship:i,timeExtent:P(s),where:e,units:o,distance:l,...t})}clone(){const{where:t,geometry:e,spatialRelationship:r,timeExtent:i,objectIds:s,units:n,distance:o}=this;return new fg({geometry:P(e),objectIds:P(s),spatialRelationship:r,timeExtent:P(i),where:t,units:n,distance:o})}};a([u({type:String,json:{write:!0}})],Rs.prototype,"where",void 0),a([u({types:Ah,json:{write:!0}})],Rs.prototype,"geometry",void 0),a([u({type:Hy.apiValues,json:{name:"spatialRel",read:{reader:Hy.read},write:{allowNull:!1,writer:Hy.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Rs.prototype,"spatialRelationship",void 0),a([u({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Rs.prototype,"distance",void 0),a([u({type:[Number],json:{write:!0}})],Rs.prototype,"objectIds",void 0),a([u({type:Wy.apiValues,json:{read:Wy.read,write:{writer:Wy.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Rs.prototype,"units",void 0),a([u({type:it,json:{write:!0}})],Rs.prototype,"timeExtent",void 0),Rs=fg=a([_("esri.layers.support.FeatureFilter")],Rs);const $Q=Rs;var mg;const Sw={read:{reader:dh},write:{writer:hh,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},xw={read:{reader:dh},write:{writer:hh,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},$w={name:"showExcludedLabels",default:!0};let ja=mg=class extends F{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){const r=super.write(t,e);if(e?.origin){if(r.filter){const i=Object.keys(r.filter);if(i.length>1||i[0]!=="where")return e.messages?.push(new I("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in r)return e.messages?.push(new I("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return r}clone(){return new mg({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};a([u({type:$Q,json:{write:{allowNull:!0,writer(t,e,r,i){const s=t?.write({},i);s&&Object.keys(s).length!==0?Kr(r,s,e):Kr(r,null,e)}}}})],ja.prototype,"filter",void 0),a([u({json:{read:dh,write:{writer:hh,allowNull:!0},origins:{"web-map":Sw,"portal-item":Sw}}})],ja.prototype,"includedEffect",void 0),a([u({json:{read:dh,write:{writer:hh,allowNull:!0},origins:{"web-map":xw,"portal-item":xw}}})],ja.prototype,"excludedEffect",void 0),a([u({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":$w,"portal-item":$w}}})],ja.prototype,"excludedLabelsVisible",void 0),ja=mg=a([_("esri.layers.support.FeatureEffect")],ja);const Tw={write:{allowNull:!0}},TQ={type:ja,json:{origins:{"web-map":Tw,"portal-item":Tw}}},IQ=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return a([u(TQ)],r.prototype,"featureEffect",void 0),r=a([_("esri.layers.mixins.FeatureEffectLayer")],r),r};var gg;let id=gg=class extends F{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return cr(t,e,null,this.expression)}clone(){return new gg({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};a([u({type:String,json:{write:{isRequired:!0}}})],id.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],id.prototype,"title",void 0),id=gg=a([_("esri.symbols.support.FeatureExpressionInfo")],id);const Iw=id,b4={unknown:1,inches:tt(1,"meters","inches"),feet:tt(1,"meters","feet"),"us-feet":tt(1,"meters","us-feet"),yards:tt(1,"meters","yards"),miles:tt(1,"meters","miles"),"nautical-miles":tt(1,"meters","nautical-miles"),millimeters:tt(1,"meters","millimeters"),centimeters:tt(1,"meters","centimeters"),decimeters:tt(1,"meters","decimeters"),meters:tt(1,"meters","meters"),kilometers:tt(1,"meters","kilometers"),"decimal-degrees":1/$L(1,"meters",Ke.radius)};function hhe(t){return!!t&&b4[t]!=null}function yhe(t){return 1/(b4[t]||1)}function MQ(){const t=Object.keys(b4);return P_(t,"decimal-degrees"),t.sort(),t}const EQ=MQ(),P1=Wt()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Mw=new be({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let ns=class extends de(F){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,r){return e!=null?e.expression?e:void 0:r.featureExpression&&r.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,r,i,s){r[i]=e.write({},s),e.expression==="0"&&(r.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:r}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||r?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&iC(this.featureExpressionInfo,e.featureExpressionInfo)}};a([u({type:Iw,json:{write:!0}})],ns.prototype,"featureExpressionInfo",void 0),a([A("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ns.prototype,"readFeatureExpressionInfo",null),a([j("featureExpressionInfo",{featureExpressionInfo:{type:Iw},"featureExpression.value":{type:[0]}})],ns.prototype,"writeFeatureExpressionInfo",null),a([u({type:P1.apiValues,nonNullable:!0,json:{type:P1.jsonValues,read:P1.read,write:{writer:P1.write,isRequired:!0}}})],ns.prototype,"mode",null),a([u({type:Number,json:{write:!0}})],ns.prototype,"offset",void 0),a([u({type:EQ,json:{type:String,read:Mw.read,write:Mw.write}})],ns.prototype,"unit",null),ns=a([_("esri.symbols.support.ElevationInfo")],ns);let Ru=class extends F{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};a([u({type:String,json:{write:!0}})],Ru.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],Ru.prototype,"label",void 0),a([u()],Ru.prototype,"type",void 0),Ru=a([_("esri.tables.elements.AttributeTableElement")],Ru);const ap=Ru;let sd=class extends de(ap){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};a([u({type:["auto"],json:{write:!0}})],sd.prototype,"displayType",void 0),a([u({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],sd.prototype,"type",void 0),sd=a([_("esri.tables.elements.AttributeTableAttachmentElement")],sd);const iE=sd;let Va=class extends de(ap){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};a([u({type:String,json:{read:!1,write:!1}})],Va.prototype,"description",void 0),a([u({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Va.prototype,"fieldName",void 0),a([u({type:String,json:{read:!1,write:!1}})],Va.prototype,"label",void 0),a([u({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Va.prototype,"type",void 0),Va=a([_("esri.tables.elements.AttributeTableFieldElement")],Va);const sE=Va;let nd=class extends de(ap){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};a([u({type:Number,json:{type:ve,write:{enabled:!0,isRequired:!0}}})],nd.prototype,"relationshipId",void 0),a([u({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],nd.prototype,"type",void 0),nd=a([_("esri.tables.elements.AttributeTableRelationshipElement")],nd);const nE=nd,oE={base:ap,key:"type",typeMap:{attachment:iE,field:sE,relationship:nE}};function PQ(t){return{typesWithGroup:{base:ap,key:"type",typeMap:{attachment:iE,field:sE,group:t,relationship:nE}},typesWithoutGroup:oE}}let od=class extends de(ap){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};a([u({types:[oE],json:{name:"attributeTableElements",write:!0}})],od.prototype,"elements",void 0),a([u({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],od.prototype,"type",void 0),od=a([_("esri.tables.elements.AttributeTableGroupElement")],od);const OQ=od;let ad=class extends de(F){constructor(e){super(e),this.field=null,this.order=null}};a([u({type:String,json:{write:!0}})],ad.prototype,"field",void 0),a([u({type:["asc","desc"],json:{write:!0}})],ad.prototype,"order",void 0),ad=a([_("esri.tables.support.FieldOrder")],ad);const RQ=ad;var vg;const CQ=PQ(OQ);let ld=vg=class extends F{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new vg({elements:P(this.elements),orderByFields:P(this.orderByFields)})}};a([u({types:[CQ.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],ld.prototype,"elements",void 0),a([u({type:[RQ],json:{write:!0}})],ld.prototype,"orderByFields",void 0),ld=vg=a([_("esri.tables.AttributeTableTemplate")],ld);const aE=ld,LQ={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:ke}}},Zh={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,r){e[r]=!t}}}},_4={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:ke}}},Y6={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Wd}}},lE={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:ke}}},kQ={value:null,type:ns,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:ke}}};function She(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const uE={write:{enabled:!0,layerContainerTypes:ke},read:!0},wg={type:Number,json:{origins:{"web-document":uE,"portal-item":{write:{layerContainerTypes:ke}}}}},AQ={...wg,json:{...wg.json,origins:{"web-document":{...uE,write:{enabled:!0,layerContainerTypes:ke,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,r)=>r&&r.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?Xd(e.layerDefinition.drawingInfo.transparency):void 0:Xd(e.drawingInfo.transparency)}}},xhe={type:ue,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const r=ue.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(r.spatialReference=B.fromJSON(e.spatialReference)),r}}}},read:!1}},cE={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},FQ={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:ke}}},NQ={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:ke}}},pE={json:{write:{ignoreOrigin:!0,layerContainerTypes:ke},origins:{"web-map":{read:!1,write:!1}}}},DQ={type:aE,json:{name:"attributeTableInfo",write:!0}};let _n=class extends de(F){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};a([u()],_n.prototype,"creatorField",void 0),a([u()],_n.prototype,"creationDateField",void 0),a([u()],_n.prototype,"editorField",void 0),a([u()],_n.prototype,"editDateField",void 0),a([u()],_n.prototype,"realm",void 0),a([u(Vc("dateFieldsTimeReference",!0))],_n.prototype,"timeZone",void 0),_n=a([_("esri.layers.support.EditFieldsInfo")],_n);let As=class extends de(F){constructor(e){super(e)}};a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"name",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"fields",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"isAscending",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"indexType",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"isUnique",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"description",void 0),As=a([_("esri.layers.support.FeatureIndex")],As);async function jQ(t,e,r){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=dE(t));const i=VQ(t),s=t.capabilities.query.supportsPagination;e.start=0,e.num=i;let n=null;for(;;){const o=await t.source.queryFeaturesJSON(e,r);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;e.start+=i}return n}function VQ(t){return dE(t)*zQ(t)}function zQ(t){return t.capabilities.query.maxRecordCount||2e3}function dE(t){return t.capabilities.query.supportsMaxRecordCountFactor?W.MAX_MAX_RECORD_COUNT_FACTOR:1}var bg;let ud=bg=class extends F{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new bg({minValue:this.minValue,maxValue:this.maxValue})}};a([u({type:Number,json:{write:!0}})],ud.prototype,"minValue",void 0),a([u({type:Number,json:{write:!0}})],ud.prototype,"maxValue",void 0),ud=bg=a([_("esri.renderers.support.AuthoringInfoClassBreakInfo")],ud);var _g;let Po=_g=class extends F{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new _g({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:P(this.classBreakInfos)})}};a([u({type:String,json:{write:!0}})],Po.prototype,"field",void 0),a([u({type:String,json:{write:!0}})],Po.prototype,"normalizationField",void 0),a([u({type:String,json:{write:!0}})],Po.prototype,"label",void 0),a([u({type:[ud],json:{write:!0}})],Po.prototype,"classBreakInfos",void 0),Po=_g=a([_("esri.renderers.support.AuthoringInfoFieldInfo")],Po);var Sg;let Cu=Sg=class extends F{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new Sg({label:this.label,value:this.value,size:this.size})}};a([u({type:String,json:{write:!0}})],Cu.prototype,"label",void 0),a([u({type:Number,json:{write:!0}})],Cu.prototype,"size",void 0),a([u({type:Number,json:{write:!0}})],Cu.prototype,"value",void 0),Cu=Sg=a([_("esri.renderers.support.AuthoringInfoSizeStop")],Cu);const UQ=Cu;var xg;const O1=new be({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),R1=new be({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Ew={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Pw=["high-to-low","above-and-below","centered-on","extremes"],Ow=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],Rw=["seconds","minutes","hours","days","months","years"],qQ=["circle","diamond","hexagon-flat","hexagon-pointy","square"],GQ=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let xt=xg=class extends F{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new xg({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:P(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};a([u({types:Ew,json:{write:!0}})],xt.prototype,"endTime",void 0),a([xe("endTime")],xt.prototype,"castEndTime",null),a([u({type:String,json:{write:!0}})],xt.prototype,"field",void 0),a([u({type:Number,json:{write:!0}})],xt.prototype,"maxSliderValue",void 0),a([u({type:Number,json:{write:!0}})],xt.prototype,"minSliderValue",void 0),a([u({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],xt.prototype,"normalizationField",null),a([u({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],xt.prototype,"referenceSizeScale",null),a([u({type:qQ,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],xt.prototype,"referenceSizeSymbolStyle",null),a([u({type:GQ,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],xt.prototype,"spikeSymbolStyle",null),a([u({types:Ew,json:{write:!0}})],xt.prototype,"startTime",void 0),a([xe("startTime")],xt.prototype,"castStartTime",null),a([u({type:[UQ],json:{origins:{"web-scene":{write:!1}},write:!0}})],xt.prototype,"sizeStops",null),a([u({type:O1.apiValues,value:null,json:{type:O1.jsonValues,read:O1.read,write:O1.write}})],xt.prototype,"style",null),a([u({type:Ow,value:null,json:{type:Ow,origins:{"web-scene":{type:Pw,write:{writer:(t,e)=>{Pw.includes(t)&&(e.theme=t)}}}},write:!0}})],xt.prototype,"theme",null),a([u({type:R1.apiValues,json:{type:R1.jsonValues,read:R1.read,write:R1.write}})],xt.prototype,"type",void 0),a([u({type:Rw,json:{type:Rw,write:!0}})],xt.prototype,"units",void 0),xt=xg=a([_("esri.renderers.support.AuthoringInfoVisualVariable")],xt);const BQ=xt;let rc=class extends F{constructor(e){super(e),this.type=null}};a([u({readOnly:!0,json:{read:!1,write:!0}})],rc.prototype,"type",void 0),rc=a([_("esri.rest.support.ColorRamp")],rc);var $g;let jn=$g=class extends rc{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new $g({fromColor:P(this.fromColor),toColor:P(this.toColor),algorithm:this.algorithm})}};a([te({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],jn.prototype,"algorithm",void 0),a([u({type:K,json:{type:[ve],write:{isRequired:!0}}})],jn.prototype,"fromColor",void 0),a([u({type:K,json:{type:[ve],write:{isRequired:!0}}})],jn.prototype,"toColor",void 0),a([u({type:["algorithmic"],json:{write:{isRequired:!0}}})],jn.prototype,"type",void 0),jn=$g=a([_("esri.rest.support.AlgorithmicColorRamp")],jn);var Tg;let Rn=Tg=class extends rc{constructor(t){super(t),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(t,e,r,i){const s=t?.map(o=>o.toJSON(i)),{weights:n}=this;if(s&&n?.length&&s.length===n?.length){const o=100/n.reduce((c,d)=>c+d);let l=0;s.forEach((c,d)=>{c.start=l,l+=n[d]*o,c.stop=l})}e.colorRamps=s}readWeights(t,e){const r=e.colorRamps?.map(({start:i,stop:s})=>i==null||s==null?-1:s-i);if(!r?.some(i=>i<0))return r}clone(){return new Tg({colorRamps:P(this.colorRamps)})}};a([u({type:[jn],json:{write:{isRequired:!0}}})],Rn.prototype,"colorRamps",void 0),a([j("colorRamps")],Rn.prototype,"writeColorRamps",null),a([u({type:["multipart"],json:{write:{isRequired:!0}}})],Rn.prototype,"type",void 0),a([u({type:[Number]})],Rn.prototype,"weights",void 0),a([A("weights",["colorRamps"])],Rn.prototype,"readWeights",null),Rn=Tg=a([_("esri.rest.support.MultipartColorRamp")],Rn);const HQ={key:"type",base:rc,typeMap:{algorithmic:jn,multipart:Rn}};function WQ(t){return t?.type?t.type==="algorithmic"?jn.fromJSON(t):t.type==="multipart"?Rn.fromJSON(t):null:null}var Ig;const ga=new be({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),C1=new be({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Cw=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],ZQ=["high-to-low","above-and-below","above","below"],JQ=["flow-line","wave-front"],QQ=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let qe=Ig=class extends F{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?WQ(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new Ig({classificationMethod:this.classificationMethod,colorRamp:P(this.colorRamp),fadeRatio:P(this.fadeRatio),fields:this.fields?.slice(),field1:P(this.field1),field2:P(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};a([u({type:ga.apiValues,value:null,json:{type:ga.jsonValues,read:ga.read,write:ga.write,origins:{"web-document":{default:"manual",type:ga.jsonValues,read:ga.read,write:ga.write}}}})],qe.prototype,"classificationMethod",null),a([u({types:HQ,json:{write:!0}})],qe.prototype,"colorRamp",void 0),a([A("colorRamp")],qe.prototype,"readColorRamp",null),a([u({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],qe.prototype,"fadeRatio",void 0),a([u({type:[String],value:null,json:{write:!0}})],qe.prototype,"fields",null),a([u({type:Po,value:null,json:{write:!0}})],qe.prototype,"field1",null),a([u({type:Po,value:null,json:{write:!0}})],qe.prototype,"field2",null),a([u({type:JQ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],qe.prototype,"flowTheme",null),a([u({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],qe.prototype,"focus",null),a([u({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],qe.prototype,"isAutoGenerated",void 0),a([u({type:Number,value:null,json:{type:ve,write:!0}})],qe.prototype,"numClasses",null),a([u({type:Cw,json:{type:Cw,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],qe.prototype,"lengthUnit",void 0),a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],qe.prototype,"maxSliderValue",void 0),a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],qe.prototype,"minSliderValue",void 0),a([u({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],qe.prototype,"statistics",null),a([u({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],qe.prototype,"standardDeviationInterval",null),a([u({type:C1.apiValues,value:null,json:{type:C1.jsonValues,read:C1.read,write:C1.write}})],qe.prototype,"type",null),a([u({type:[BQ],json:{write:!0}})],qe.prototype,"visualVariables",void 0),a([u({type:QQ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],qe.prototype,"univariateSymbolStyle",null),a([u({type:ZQ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],qe.prototype,"univariateTheme",null),qe=Ig=a([_("esri.renderers.support.AuthoringInfo")],qe);const Zy=new be({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let mi=class extends F{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,e),Array.from(r).sort()}getSymbol(e,r){}async getSymbolAsync(e,r){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};a([u({type:qe,json:{write:!0}})],mi.prototype,"authoringInfo",void 0),a([u({type:Zy.apiValues,readOnly:!0,json:{type:Zy.jsonValues,read:!1,write:{writer:Zy.write,ignoreOrigin:!0,isRequired:!0}}})],mi.prototype,"type",void 0),mi=a([_("esri.renderers.Renderer")],mi);let cd=class extends de(F){constructor(){super(...arguments),this.showLegend=null,this.title=null}};a([u({type:Boolean,json:{write:!0}})],cd.prototype,"showLegend",void 0),a([u({type:String,json:{write:!0}})],cd.prototype,"title",void 0),cd=a([_("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],cd);const hE=cd,Jy=new be({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let tr=class extends F{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(N.getLogger(this).error(".field: field must be a string value"),null):z2(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};a([u()],tr.prototype,"index",void 0),a([u({type:Jy.apiValues,readOnly:!0,json:{read:Jy.read,write:{writer:Jy.write,isRequired:!0}}})],tr.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],tr.prototype,"field",void 0),a([xe("field")],tr.prototype,"castField",null),a([u({type:String,json:{write:!0}})],tr.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],tr.prototype,"valueExpressionTitle",void 0),a([u({readOnly:!0})],tr.prototype,"arcadeRequired",null),a([u({type:hE,json:{write:!0}})],tr.prototype,"legendOptions",void 0),tr=a([_("esri.renderers.visualVariables.VisualVariable")],tr);var Mg;let za=Mg=class extends F{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,r){e[r]=t??0}clone(){return new Mg({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};a([u({type:K,json:{type:[ve],write:{isRequired:!0}}})],za.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],za.prototype,"label",void 0),a([u({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],za.prototype,"value",void 0),a([j("value")],za.prototype,"writeValue",null),za=Mg=a([_("esri.renderers.visualVariables.support.ColorStop")],za);const KQ=za;var Eg;let Oo=Eg=class extends tr{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,r)=>e.value-r.value),this._set("stops",t)}clone(){return new Eg({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};a([u({readOnly:!0})],Oo.prototype,"cache",null),a([u({type:["color"],json:{type:["colorInfo"]}})],Oo.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Oo.prototype,"normalizationField",void 0),a([u({type:[KQ],json:{write:!0}})],Oo.prototype,"stops",null),Oo=Eg=a([_("esri.renderers.visualVariables.ColorVariable")],Oo);var Pg;let Io=Pg=class extends F{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return Xd(e.transparency)}writeOpacity(t,e,r){e[r]=K2(t)}clone(){return new Pg({label:this.label,opacity:this.opacity,value:this.value})}};a([u({type:String,json:{write:!0}})],Io.prototype,"label",void 0),a([u({type:Number,json:{type:ve,write:{target:"transparency",isRequired:!0}}})],Io.prototype,"opacity",void 0),a([A("opacity",["transparency"])],Io.prototype,"readOpacity",null),a([j("opacity")],Io.prototype,"writeOpacity",null),a([u({type:Number,json:{write:{isRequired:!0}}})],Io.prototype,"value",void 0),Io=Pg=a([_("esri.renderers.visualVariables.support.OpacityStop")],Io);const YQ=Io;var Og;let Vn=Og=class extends tr{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,r)=>e.value-r.value),this._set("stops",t)}clone(){return new Og({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};a([u({readOnly:!0})],Vn.prototype,"cache",null),a([u({type:["opacity"],json:{type:["transparencyInfo"]}})],Vn.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Vn.prototype,"normalizationField",void 0),a([u({type:[YQ],json:{write:!0}})],Vn.prototype,"stops",null),Vn=Og=a([_("esri.renderers.visualVariables.OpacityVariable")],Vn);var Rg;let Ro=Rg=class extends tr{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new Rg({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};a([u({readOnly:!0})],Ro.prototype,"cache",null),a([u({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Ro.prototype,"axis",void 0),a([u({type:["rotation"],json:{type:["rotationInfo"]}})],Ro.prototype,"type",void 0),a([u({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Ro.prototype,"rotationType",void 0),Ro=Rg=a([_("esri.renderers.visualVariables.RotationVariable")],Ro);function XQ(t){return _e(t)}var Cg;let ps=Cg=class extends F{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new Cg({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};a([u({type:String,json:{write:!0}})],ps.prototype,"label",void 0),a([u({type:Number,cast:_e,json:{write:{isRequired:!0}}})],ps.prototype,"size",void 0),a([u({type:Number,json:{write:{isRequired:!0}}})],ps.prototype,"value",void 0),a([u({type:Boolean,json:{write:!1}})],ps.prototype,"useMinValue",void 0),a([u({type:Boolean,json:{write:!1}})],ps.prototype,"useMaxValue",void 0),ps=Cg=a([_("esri.renderers.visualVariables.support.SizeStop")],ps);let q0=class extends hE{constructor(){super(...arguments),this.customValues=null}};a([u({type:[Number],json:{write:!0}})],q0.prototype,"customValues",void 0),q0=a([_("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],q0);const eK=q0;function Gu(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function El(t){return t!=null&&!isNaN(t)&&isFinite(t)}function yE(t){return t.valueExpression?"expression":t.field&&typeof t.field=="string"?"field":"unknown"}function tK(t,e){const r=e||yE(t),i=t.valueUnit||"unknown";return r==="unknown"?"constant":t.stops?"stops":t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?"clamped-linear":i==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}const fE=()=>N.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),S4=t=>fE().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),x4=()=>fE().error("Use of arcade expressions requires an arcade context"),Lw=new He,G0=Math.PI,mE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function gE(t,e,r){const i="visualVariables"in t?t.visualVariables?.find(g=>g.type==="color"):t;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void S4("ColorVariable");const s=typeof e=="number",n=s?null:e,o=n?.attributes;let l=s?e:null;const c=i.field,{ipData:d,hasExpression:h}=i.cache;let y=i.cache.compiledFunc;if(!c&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof l!="number")if(h){if(r?.arcade==null)return void x4();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,b=v.getViewInfo(g),S=v.createExecContext(n,b,r.timeZone);if(!y){const $=v.createSyntaxTree(i.valueExpression);y=v.createFunction($),i.cache.compiledFunc=y}l=v.executeFunction(y,S)}else o&&(l=o[c]);const f=i.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(l!=null&&(!f||s||!isNaN(m)&&m!==0)){El(m)&&!s&&(l/=m);const g=X6(l,d);if(g){const v=g[0],b=g[1],S=v===b?i.stops[v].color:K.blendColors(i.stops[v].color,i.stops[b].color,g[2],r?.color);return new K(S)}}}function vE(t,e,r){const i="visualVariables"in t?t.visualVariables?.find(g=>g.type==="opacity"):t;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void S4("OpacityVariable");const s=typeof e=="number",n=s?null:e,o=n?.attributes;let l=s?e:null;const c=i.field,{ipData:d,hasExpression:h}=i.cache;let y=i.cache.compiledFunc;if(!c&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof l!="number")if(h){if(r?.arcade==null)return void x4();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,b=v.getViewInfo(g),S=v.createExecContext(n,b,r.timeZone);if(!y){const $=v.createSyntaxTree(i.valueExpression);y=v.createFunction($),i.cache.compiledFunc=y}l=v.executeFunction(y,S)}else o&&(l=o[c]);const f=i.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(l!=null&&(!f||s||!isNaN(m)&&m!==0)){El(m)&&!s&&(l/=m);const g=X6(l,d);if(g){const v=g[0],b=g[1];if(v===b)return i.stops[v].opacity;{const S=i.stops[v].opacity;return S+(i.stops[b].opacity-S)*g[2]}}}}function wE(t,e,r){const i="visualVariables"in t?t.visualVariables?.find(m=>m.type==="rotation"):t;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void S4("RotationVariable");const s=i.axis||"heading",n=s==="heading"&&i.rotationType==="arithmetic"?90:0,o=s==="heading"&&i.rotationType==="arithmetic"?-1:1,l=typeof e=="number"?null:e,c=l?.attributes,d=i.field,{hasExpression:h}=i.cache;let y=i.cache.compiledFunc,f=null;if(!d&&!h)return f;if(h){if(r?.arcade==null)return void x4();const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(m),b=g.createExecContext(l,v,r.timeZone);if(!y){const S=g.createSyntaxTree(i.valueExpression);y=g.createFunction(S),i.cache.compiledFunc=y}f=g.executeFunction(y,b)}else c&&(f=c[d]);return f=typeof f!="number"||isNaN(f)?null:n+o*f,f}function rK(t,e,r){const i=typeof e=="number",s=i?null:e,n=s?.attributes;let o=i?e:null;const{isScaleDriven:l}=t.cache;let c=t.cache.compiledFunc;if(l){const h=r?.scale,y=r?.view;o=h==null||y==="3d"?iK(t):h}else if(!i)switch(t.inputValueType){case"expression":{if(r?.arcade==null)return void x4();const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,f=y.getViewInfo(h),m=y.createExecContext(s,f,r.timeZone);if(!c){const g=y.createSyntaxTree(t.valueExpression);c=y.createFunction(g),t.cache.compiledFunc=c}o=y.executeFunction(c,m);break}case"field":n&&(o=n[t.field]);break;case"unknown":o=null}if(!El(o))return null;if(i||!t.normalizationField)return o;const d=n?parseFloat(n[t.normalizationField]):null;return El(d)&&d!==0?o/d:null}function iK(t){let e=null,r=null;const i=t.stops;return i?(e=i[0].value,r=i[i.length-1].value):(e=t.minDataValue||0,r=t.maxDataValue||0),(e+r)/2}function $4(t,e,r){const i="visualVariables"in t?t.visualVariables?.find(n=>n.type==="size"):t;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void S4("SizeVariable");const s=_E(rK(i,e,r),i,e,r,i.cache.ipData);return s==null||isNaN(s)?void 0:s}function Qr(t,e,r){return t==null?null:Gu(t)?$4(t,e,r):El(t)?t:null}function bE(t,e,r){return El(r)&&t>r?r:El(e)&&t<e?e:t}function sK(t,e,r,i){const s=Qr(e.minSize,r,i)||e.minDataValue;return t==null&&s==null?null:(t??0)+(s??0)}function nK(t,e,r){const i=t.stops;let s=i?.length&&i[0].size;return s==null&&(s=t.minSize),Qr(s,e,r)}function oK(t,e,r,i){const s=Qr(e.minSize,r,i);if(t==null)return s;const{minDataValue:n,maxDataValue:o}=e;if(n==null||o==null)return null;const l=(t-n)/(o-n),c=Qr(e.maxSize,r,i),d=i?.shape;if(t<=n)return s;if(t>=o)return c;if(s==null||c==null)return null;if(e.scaleBy==="area"&&d){const h=d==="circle",y=h?G0*(s/2)**2:s*s,f=y+l*((h?G0*(c/2)**2:c*c)-y);return h?2*Math.sqrt(f/G0):Math.sqrt(f)}return s+l*(c-s)}function aK(t,e,r,i){const s=Qr(e.minSize,r,i);if(t==null||s==null)return s;const n=i?.shape,{minDataValue:o}=e;if(o==null)return null;const l=t/o,c=Qr(e.maxSize,r,i);let d=null;return d=n==="circle"?2*Math.sqrt(l*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(l*s**2):l*s,bE(d,s,c)}function lK(t,e,r,i,s){if(t==null)return null;const[n,o,l]=X6(t,s);if(n===o)return Qr(e.stops?.[n].size,r,i);{const c=Qr(e.stops?.[n].size,r,i),d=Qr(e.stops?.[o].size,r,i);return c==null||d==null?null:c+(d-c)*l}}function uK(t,e,r,i){const s=(i?.resolution??1)*b4[e.valueUnit],n=Qr(e.minSize,r,i),o=Qr(e.maxSize,r,i),{valueRepresentation:l}=e;if(t==null)return n;let c=null;return c=l==="area"?2*Math.sqrt(t/G0)/s:l==="radius"||l==="distance"?2*t/s:t/s,bE(c,n,o)}function _E(t,e,r,i,s){switch(e.transformationType){case"additive":return sK(t,e,r,i);case"constant":return nK(e,r,i);case"clamped-linear":return oK(t,e,r,i);case"proportional":return aK(t,e,r,i);case"stops":return lK(t,e,r,i,s);case"real-world-size":return uK(t,e,r,i);case"identity":return t;case"unknown":return null}}function cK(t,e,r){const{isScaleDriven:i}=t.cache;if(!(i&&r==="3d"||e))return null;const s={scale:e,view:r};let n=Qr(t.minSize,Lw,s),o=Qr(t.maxSize,Lw,s);if(n!=null||o!=null){if(n>o){const l=o;o=n,n=l}return{minSize:n,maxSize:o}}}function pK(t,e,r){if(!t.visualVariables)return;const i=[],s=[],n=[],o=[],l=[];for(const c of t.visualVariables)switch(c.type){case"color":s.push(c);break;case"opacity":n.push(c);break;case"rotation":l.push(c);break;case"size":o.push(c)}return s.forEach(c=>{const d=gE(c,e,r);i.push({variable:c,value:d})}),n.forEach(c=>{const d=vE(c,e,r);i.push({variable:c,value:d})}),l.forEach(c=>{const d=wE(c,e,r);i.push({variable:c,value:d})}),o.forEach(c=>{const d=$4(c,e,r);i.push({variable:c,value:d})}),i}function X6(t,e){if(!e)return;let r=0,i=e.length-1;return e.some((s,n)=>t<s?(i=n,!0):(r=n,!1)),[r,i,(t-e[r])/(e[i]-e[r])]}function dK(t,e,r){const i=["proportional","proportional","proportional"];for(const s of t){const n=s.useSymbolValue?"symbol-value":$4(s,e,r)??"proportional";switch(s.axis){case"width":i[0]=n;break;case"depth":i[1]=n;break;case"height":i[2]=n;break;case"width-and-depth":i[0]=n,i[1]=n;break;case"all":case void 0:case null:i[0]=n,i[1]=n,i[2]=n;break;default:O_(s.axis)}}return i}const Rhe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:dK,getColor:gE,getOpacity:vE,getRotationAngle:wE,getSize:$4,getSizeForValue:_E,getSizeFromNumberOrVariable:Qr,getSizeRangeAtScale:cK,getVisualVariableValues:pK,viewScaleRE:mE},Symbol.toStringTag,{value:"Module"}));var Lg;const L1=new be({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),kg=new be({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function kw(t){if(t!=null)return typeof t=="string"||typeof t=="number"?XQ(t):t.type==="size"?Gu(t)?t:(delete(t={...t}).type,new Se(t)):void 0}function Aw(t,e,r){if(typeof t!="object")return t;const i=new Se;return i.read(t,r),i}let Se=Lg=class extends tr{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&mE.test(this.valueExpression)}}set index(t){Gu(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Gu(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return yE(this)}set maxDataValue(t){t&&this.stops&&(N.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(N.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return kw(t)}readMaxSize(t,e,r){return Aw(t,e,r)}set minDataValue(t){t&&this.stops&&(N.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(N.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return kw(t)}readMinSize(t,e,r){return Aw(t,e,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,r)=>e.value-r.value):t&&(N.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return tK(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,r,i){if(t==="$view.scale"){if(i?.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;i.messages.push(new I("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:i}))}}else e[r]=t}readValueUnit(t){return t?kg.read(t):null}clone(){return new Lg({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Gu(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Gu(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType==="stops"){const t=this.stops;if(!t)return this;const e=t.map(i=>i.size).reverse(),r=t.length;for(let i=0;i<r;i++)t[i].size=e[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(t=>t.value||0)}};a([u({readOnly:!0})],Se.prototype,"cache",null),a([u({type:L1.apiValues,json:{type:L1.jsonValues,origins:{"web-map":{read:!1}},read:L1.read,write:L1.write}})],Se.prototype,"axis",void 0),a([u()],Se.prototype,"index",null),a([u({type:String,readOnly:!0})],Se.prototype,"inputValueType",null),a([u({type:eK,json:{write:!0}})],Se.prototype,"legendOptions",void 0),a([u({type:Number,value:null,json:{write:!0}})],Se.prototype,"maxDataValue",null),a([u({type:Number,value:null,json:{write:!0}})],Se.prototype,"maxSize",null),a([xe("maxSize")],Se.prototype,"castMaxSize",null),a([A("maxSize")],Se.prototype,"readMaxSize",null),a([u({type:Number,value:null,json:{write:!0}})],Se.prototype,"minDataValue",null),a([u({type:Number,value:null,json:{write:!0}})],Se.prototype,"minSize",null),a([xe("minSize")],Se.prototype,"castMinSize",null),a([A("minSize")],Se.prototype,"readMinSize",null),a([u({type:String,json:{write:!0}})],Se.prototype,"normalizationField",void 0),a([u({readOnly:!0})],Se.prototype,"arcadeRequired",null),a([u({type:String})],Se.prototype,"scaleBy",void 0),a([u({type:[ps],value:null,json:{write:!0}})],Se.prototype,"stops",null),a([u({type:["outline"],json:{write:!0}})],Se.prototype,"target",void 0),a([u({type:String,readOnly:!0})],Se.prototype,"transformationType",null),a([u({type:["size"],json:{type:["sizeInfo"]}})],Se.prototype,"type",void 0),a([u({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Se.prototype,"useSymbolValue",void 0),a([u({type:String,json:{write:!0}})],Se.prototype,"valueExpression",void 0),a([A("valueExpression",["valueExpression","expression"])],Se.prototype,"readValueExpression",null),a([j("web-scene","valueExpression")],Se.prototype,"writeValueExpressionWebScene",null),a([u({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Se.prototype,"valueRepresentation",void 0),a([u({type:kg.apiValues,json:{write:kg.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Se.prototype,"valueUnit",void 0),a([A("valueUnit")],Se.prototype,"readValueUnit",null),Se=Lg=a([_("esri.renderers.visualVariables.SizeVariable")],Se);const hK={color:Oo,size:Se,opacity:Vn,rotation:Ro},yK=new be({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),fK=/^\[([^\]]+)\]$/i;let B0=class extends Z{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(r=>!!r),e?.length){for(const r of e)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&e.sort((r,i)=>{let s=null;return s=r.target===i.target?0:r.target?1:-1,s});for(let r=0;r<e.length;r++)e[r].index=r;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,r,i){const{rotationExpression:s,rotationType:n}=r,o=s?.match(fK),l=o?.[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:l})),e)return e.map(c=>{const d=yK.read(c.type),h=hK[d];h||(N.getLogger(this).warn(`Unknown variable type: ${d}`),i?.messages&&i.messages.push(new vs("visual-variable:unsupported",`visualVariable of type '${d}' is not supported`,{definition:c,context:i})));const y=new h;return y.read(c,i),y})}writeVariables(e,r){const i=[];for(const s of e){const n=s.toJSON(r);n&&i.push(n)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};a([u()],B0.prototype,"visualVariables",null),B0=a([_("esri.renderers.visualVariables.VisualVariableFactory")],B0);const mK={base:tr,key:"type",typeMap:{opacity:Vn,color:Oo,rotation:Ro,size:Se}},lp=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this._vvFactory=new B0}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,n){return this._vvFactory.readVariables(i,s,n)}writeVisualVariables(i,s,n,o){s[n]=this._vvFactory.writeVariables(i,o)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:i})=>i)??!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){return this.visualVariables?.filter(n=>n.type===i&&(typeof s=="string"?n.target===s:s!==!1||!n.target))??[]}async collectVVRequiredFields(i,s){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const o of n)o&&(o.field&&ur(i,s,o.field),o.normalizationField&&ur(i,s,o.normalizationField),o.valueExpression&&(gK(o.valueExpression,i,s)||await cr(i,s,null,o.valueExpression)))}};return a([u({types:[mK],value:null,json:{write:!0}})],r.prototype,"visualVariables",null),a([A("visualVariables",["visualVariables","rotationType","rotationExpression"])],r.prototype,"readVisualVariables",null),a([j("visualVariables")],r.prototype,"writeVisualVariables",null),r=a([_("esri.renderers.mixins.VisualVariablesMixin")],r),r};function gK(t,e,r){const i=dV(t);return i!=null&&(ur(e,r,i),!0)}const e9=[252,146,31,255],vK=[153,153,153,255],wK={type:"esriSMS",style:"esriSMSCircle",size:6,color:e9,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},bK={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e9},_K={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},SK={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},xK={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},$K={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},TK={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},L2=bt.fromJSON(wK),t9=dt.fromJSON(bK),SE=hi.fromJSON(_K),IK=Pe.fromJSON(SK);function Lhe(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return L2;case"polyline":return t9;case"polygon":case"extent":return SE}return null}const khe=bt.fromJSON(xK),Ahe=dt.fromJSON($K),Fhe=hi.fromJSON(TK),MK=_r.fromSimpleMarkerSymbol(L2),EK=gs.fromSimpleLineSymbol(t9),PK=ji.fromSimpleFillSymbol(SE),OK=new Un({symbolLayers:new U([new wr({material:{color:e9},edges:new pT({size:qi(1),color:new K(vK)})})])}),RK=new gs({symbolLayers:new U([new gr({material:{color:new K([0,0,0])},size:qi(1)})])}),CK=new ji({symbolLayers:new U([new wr({outline:{color:new K([0,0,0]),size:qi(1)}})])});function Nhe(t){if(t==null)return null;switch(t.type){case"mesh":return OK;case"point":case"multipoint":return MK;case"polyline":return EK;case"polygon":case"extent":return PK}return null}const Fw="#useCIMFallbackSymbology()",Zl={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function LK(t,e=Zl){if(!t)return{symbol:null};const{retainId:r=Zl.retainId,ignoreDrivers:i=Zl.ignoreDrivers,hasLabelingContext:s=Zl.hasLabelingContext,retainCIM:n=Zl.retainCIM,cimFallbackEnabled:o=Zl.cimFallbackEnabled}=e;let l=null;if(O6(t))l=t.clone();else if(t.type==="web-style")l=t.clone();else if(t.type==="cim"){const c=t.data?.symbol?.type;switch(c){case"CIMPointSymbol":l=n?t.clone():_r.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(l=RK.clone(),e?.logWarning?.(Fw,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=CK.clone(),e?.logWarning?.(Fw,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new I("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof dt)l=gs.fromSimpleLineSymbol(t);else if(t instanceof bt)l=_r.fromSimpleMarkerSymbol(t);else if(t instanceof mr)l=_r.fromPictureMarkerSymbol(t);else if(t instanceof hi)l=e.geometryType&&e.geometryType==="mesh"?Un.fromSimpleFillSymbol(t):ji.fromSimpleFillSymbol(t);else{if(!(t instanceof Pe))return{error:new I("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};l=s?us.fromTextSymbol(t):_r.fromTextSymbol(t)}return r&&l&&l.type!=="cim"&&(l.id=t.id),!i||l.type==="cim"||l instanceof Gt||l.symbolLayers.forEach(c=>c.ignoreDrivers=!0),{symbol:l}}function k2(t,e,r,i){const s=xE(t,{},{context:i,isLabelSymbol:!1});s!=null&&Kr(r,s,e)}function Nw(t,e,r,i){const s=xE(t,{},{context:i,isLabelSymbol:!0});s!=null&&(e[r]=s)}function Dw(t){return O6(t)||t instanceof Gt}function kK(t){return t?.type==="polygon-3d"||t?.type==="line-3d"}function xE(t,e,r){if(t==null)return null;const{context:i,isLabelSymbol:s}=r,n=i?.origin,o=i?.messages;if(n==="web-scene"&&!Dw(t)){const l=LK(t,{retainCIM:!0,hasLabelingContext:s});return l.symbol!=null?l.symbol.write(e,i):(o?.push(new I("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:i,error:l.error})),null)}return Of(i?.layer)&&kK(t)?(o?.push(new I("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${i?.layer?.declaredClass}'.`,{symbol:t,context:i})),null):(n==="web-map"||n==="portal-item"&&!Of(i?.layer))&&Dw(t)?(o?.push(new I("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:i})),null):t.write(e,i)}function Dhe(t,e){return cU(t,null,e)}const T4={types:LT,json:{write:{writer:k2},origins:{"web-scene":{types:P7,write:{writer:k2},read:{reader:Sh({types:P7})}}}}},r9=R_({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},T4),i9={types:{base:ot,key:"type",typeMap:{"simple-fill":jo.typeMap["simple-fill"],"picture-fill":jo.typeMap["picture-fill"],"polygon-3d":jo.typeMap["polygon-3d"],cim:jo.typeMap.cim}},json:{write:{writer:k2},origins:{"web-scene":{type:ji,write:{writer:k2}}}}},H0={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t?.toString()}}}};var Ag;let Sr=Ag=class extends lp(mi){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(r=>r.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new Ag({description:this.description,label:this.label,symbol:P(this.symbol),visualVariables:P(this.visualVariables),authoringInfo:P(this.authoringInfo)})}};a([u({type:String,json:{write:!0}})],Sr.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],Sr.prototype,"label",void 0),a([u(r9)],Sr.prototype,"symbol",void 0),a([te({simple:"simple"})],Sr.prototype,"type",void 0),Sr=Ag=a([_("esri.renderers.SimpleRenderer")],Sr);const AK=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function Fg(t){return t instanceof Z}function jw(t){return t instanceof U?Object.keys(t.items):Fg(t)?Jr(t).keys():t?Object.keys(t):[]}function k1(t,e){return t instanceof U?t.items[e]:t[e]}function FK(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function jd(t){return t?t.declaredClass:null}function $E(t,e){const r=t.diff;if(r&&typeof r=="function")return r(t,e);const i=jw(t),s=jw(e);if(i.length===0&&s.length===0)return;if(!i.length||!s.length||FK(t,e))return{type:"complete",oldValue:t,newValue:e};const n=s.filter(y=>!i.includes(y)),o=i.filter(y=>!s.includes(y)),l=i.filter(y=>s.includes(y)&&k1(t,y)!==k1(e,y)).concat(n,o).sort(),c=jd(t);if(c&&AK.has(c)&&l.length)return{type:"complete",oldValue:t,newValue:e};let d;const h=Fg(t)&&Fg(e);for(const y of l){const f=k1(t,y),m=k1(e,y);let g;if((h||typeof f!="function"&&typeof m!="function")&&f!==m&&(f!=null||m!=null)){if(r&&r[y]&&typeof r[y]=="function")g=r[y]?.(f,m);else if(f instanceof Date&&m instanceof Date){if(f.getTime()===m.getTime())continue;g={type:"complete",oldValue:f,newValue:m}}else g=typeof f=="object"&&typeof m=="object"&&jd(f)===jd(m)?$E(f,m):{type:"complete",oldValue:f,newValue:m};g!=null&&(d!=null?d.diff[y]=g:d={type:"partial",diff:{[y]:g}})}}return d}function jhe(t,e){if(t==null)return!1;const r=e.split(".");let i=t;for(const s of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const n=i.diff[s];if(!n)return!1;i=n}}return!0}function NK(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&jd(t)!==jd(e)?{type:"complete",oldValue:t,newValue:e}:$E(t,e)}function A1(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const r of e.added)if(!A1(r))return!1;for(const r of e.removed)if(!A1(r))return!1;for(const r of e.changed)if(!A1(r))return!1;return!0}case"partial":for(const e in t.diff)if(!A1(t.diff[e]))return!1;return!0}}var Ng;const DK=Wt()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let pd=Ng=class extends de(F){static from(t){return Cc(Ng,t)}constructor(t){super(t),this.title=null,this.order=null}};a([u({type:String,json:{write:!0}})],pd.prototype,"title",void 0),a([te(DK)],pd.prototype,"order",void 0),pd=Ng=a([_("esri.renderers.support.RendererLegendOptions")],pd);const s9=pd;let fs=class extends de(F){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};a([u(H0)],fs.prototype,"value",void 0),a([u(H0)],fs.prototype,"value2",void 0),a([u(H0)],fs.prototype,"value3",void 0),fs=a([_("esri.renderers.support.UniqueValue")],fs);let Cn=class extends de(F){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const r=typeof(e=Array.isArray(e)?e:[e])[0];return r==="string"||r==="number"?e.map(i=>new fs({value:i})):r==="object"?e[0]instanceof fs?e:e.map(i=>new fs(i)):null}};a([u({type:String,json:{write:!0}})],Cn.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],Cn.prototype,"label",void 0),a([u(T4)],Cn.prototype,"symbol",void 0),a([u({type:[fs],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new fs({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const r=[];for(const i of t){const s=[i.value,i.value2,i.value3].filter(wi).map(n=>n.toString());r.push(s)}e.values=r}}}})],Cn.prototype,"values",void 0),a([xe("values")],Cn.prototype,"castValues",null),Cn=a([_("esri.renderers.support.UniqueValueClass")],Cn);let rl=class extends de(F){constructor(e){super(e),this.heading=null,this.classes=null}};a([u({type:String,json:{write:!0}})],rl.prototype,"heading",void 0),a([u({type:[Cn],json:{write:{isRequired:!0}}})],rl.prototype,"classes",void 0),rl=a([_("esri.renderers.support.UniqueValueGroup")],rl);var Dg;let ys=Dg=class extends F{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new Dg({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${t}`}};a([u({type:String,json:{write:!0}})],ys.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],ys.prototype,"label",void 0),a([u(r9)],ys.prototype,"symbol",void 0),a([u(H0)],ys.prototype,"value",void 0),ys=Dg=a([_("esri.renderers.support.UniqueValueInfo")],ys);const Vw=new Map;async function jK(t,e){try{return{data:(await qK(t,e)).data,baseUrl:sC(t),styleUrl:t}}catch(r){return nr(r),null}}function VK(t,e,r){const i=e.portal!=null?e.portal:D.getDefault();let s;const n=`${i.url} - ${i.user?.username} - ${t}`,o=Vw.get(n);if(o)return o;const l=zK(t,i,r).then(c=>(s=c,c.fetchData())).then(c=>({data:c,baseUrl:s.itemUrl??"",styleName:t}));return Vw.set(n,l),l}function zK(t,e,r){return e.load(r).then(()=>{const i=new rt({disableExtraQuery:!0,query:`owner:${zw} AND type:${Uw} AND typekeywords:"${t}"`});return e.queryItems(i,r)}).then(({results:i})=>{let s=null;const n=t.toLowerCase();if(i&&Array.isArray(i)){for(const o of i)if(o.typeKeywords?.some(c=>c.toLowerCase()===n)&&o.type===Uw&&o.owner===zw){s=o;break}}if(!s)throw new I("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(r)})}function UK(t,e,r){return t?.styleUrl!=null?jK(t.styleUrl,r):t?.styleName!=null?VK(t.styleName,e,r):Promise.reject(new I("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function qhe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function Ghe(t,e){for(const r of e)switch(r){case"cim":if(t.cimRef)return{format:r,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const i=Qy(t,"gltf_basisu");if(i)return{format:r,url:i};break}case"web-gltf":{const i=Qy(t,"gltf");if(i)return{format:r,url:i};break}case"web":{const i=Qy(t,"gltf");if(i)return{format:"web-gltf",url:i};if(t.webRef)return{format:r,url:encodeURI(t.webRef)};break}}}function Qy(t,e){if(!ie("enable-feature:force-wosr"))return t.formatInfos?.find(r=>r.type===e)?.href}function qK(t,e){const r={responseType:"json",query:{f:"json"},...e};return Te(Hd(t),r)}const zw="esri_en",Uw="Style",Bhe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var dd;const qw="uvInfos-watcher",Gw="uvGroups-watcher",GK=",",BK=Yr(ys);function HK(t){const{field1:e,field2:r,field3:i,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=t,l=!(!e||!r);return[{classes:(n??[]).map(c=>{const{symbol:d,label:h,value:y,description:f}=c,[m,g,v]=l?y?.toString()?.split(s||"")||[]:[y],b=[];return(e||o)&&b.push(m),r&&b.push(g),i&&b.push(v),{symbol:d,label:h,values:[b],description:f}})}]}function Jl(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Ae=dd=class extends lp(mi){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,r){if(!e&&!r)return;if(!e||!r)return{type:"complete",oldValue:e,newValue:r};let i=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<r.length;n++){const o=e.find(l=>l.value===r[n].value);o?NK(o,r[n])?(s.changed.push({type:"complete",oldValue:o,newValue:r[n]}),i=!0):s.unchanged.push({oldValue:o,newValue:r[n]}):(s.added.push(r[n]),i=!0)}for(let n=0;n<e.length;n++)r.find(o=>o.value===e[n].value)||(s.removed.push(e[n]),i=!0);return i?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:z2(t)}writeField(t,e,r,i){typeof t=="string"?e[r]=t:i?.messages?i.messages.push(new I("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):N.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,r){return r.portal||D.getDefault()}readStyleOrigin(t,e,r){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const i=_h(e.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(t,e,r,i){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Bd(t.styleUrl,i))}set uniqueValueGroups(t){this.styleOrigin?N.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?N.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){if(this.styleOrigin)return void N.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof t=="object"?BK(t):new ys({value:t,symbol:kT(e)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[Jl(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void N.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let r=0;r<e.length;r++){const i=e[r];if(String(i.value)===String(t)){delete this._valueInfoMap[Jl(t)],e.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let r=e;return this.valueExpression&&e?.arcade==null&&(r={...r,arcade:await Tl()}),this._getUniqueValueInfo(t,r)}getSymbol(t,e){return this.valueExpression&&e?.arcade==null?void N.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(t,e)?.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let r=e;if(this.valueExpression&&r?.arcade==null){const s=await Tl(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}return this._getUniqueValueInfo(t,r)?.symbol||this.defaultSymbol}get symbols(){const t=[];if(this._isInfosSource)for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);else for(const e of this.uniqueValueGroups??[])for(const r of e.classes??[])r.symbol&&t.push(r.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce((i,s)=>i+s.getMeshHash(),"");return`${t}.${e}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new dd({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:P(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:P(this.visualVariables),legendOptions:P(this.legendOptions),authoringInfo:P(this.authoringInfo),backgroundFillSymbol:P(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=P(this.uniqueValueInfos),r=P(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(P(this.styleOrigin))),Object.freeze(e),Object.freeze(r)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",r),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const r=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(r)}async collectSymbolFields(t,e){const r=[...this.symbols.map(i=>i.collectRequiredFields(t,e)),cr(t,e,null,this.valueExpression)];ur(t,e,this.field),ur(t,e,this.field2),ur(t,e,this.field3),await Promise.all(r)}populateFromStyle(){return UK(this.styleOrigin,{portal:this.portal}).then(t=>{const e=[];return this._valueInfoMap={},t?.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const i=new Gt({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new ys({value:r.name,symbol:i});e.push(s),this._valueInfoMap[Jl(r.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",GK)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[Jl(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(qw);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const r of t)e.push(X(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,s)=>{i!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,qw)}}_watchUniqueValueGroups(){this.removeHandles(Gw);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const r of t){e.push(X(()=>({classes:r.classes}),(i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])e.push(X(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,Gw)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:r,field3:i,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!e||!r);for(const c of n)for(const d of c.classes??[]){const{symbol:h,label:y,values:f,description:m}=d;for(const g of f??[]){const{value:v,value2:b,value3:S}=g,$=[v];r&&$.push(b),i&&$.push(S);const E=l?$.join(s||""):$[0]??void 0;t.push(new ys({symbol:h,label:y,value:E,description:m}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:r,valueExpression:i,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!e&&!i||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!r),l=n.map(d=>{const{symbol:h,label:y,value:f,description:m}=d,[g,v,b]=o?f?.toString()?.split(s||"")||[]:[f];return new Cn({symbol:h,label:y,description:m,values:[new fs({value:g,value2:v,value3:b})]})}),c=[new rl({classes:l})];t&&Object.freeze(c),this._set("uniqueValueGroups",c),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=e??{};let l=this._cache.compiledFunc;const c=n.arcadeUtils;if(!l){const h=c.createSyntaxTree(this.valueExpression);l=c.createFunction(h),this._cache.compiledFunc=l}const d=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._valueInfoMap[Jl(d)]}_getUnqiueValueInfoForFields(t){const e=this.field,r=t.attributes;let i;if(this.field2){const s=this.field2,n=this.field3,o=[];e&&o.push(r[e]),s&&o.push(r[s]),n&&o.push(r[n]),i=o.join(this.fieldDelimiter||"")}else e&&(i=r[e]);return this._valueInfoMap[Jl(i)]}static fromPortalStyle(t,e){const r=new dd(e?.properties);r._set("styleOrigin",Object.freeze({styleName:t})),r._set("portal",e?.portal||D.getDefault());const i=r.populateFromStyle();return i.catch(s=>{N.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)}),i}static fromStyleUrl(t,e){const r=new dd(e?.properties);r._set("styleOrigin",Object.freeze({styleUrl:t}));const i=r.populateFromStyle();return i.catch(s=>{N.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),i}};a([u({readOnly:!0})],Ae.prototype,"_cache",null),a([te({uniqueValue:"unique-value"})],Ae.prototype,"type",void 0),a([u(i9)],Ae.prototype,"backgroundFillSymbol",void 0),a([u({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Ae.prototype,"field",null),a([xe("field")],Ae.prototype,"castField",null),a([j("field")],Ae.prototype,"writeField",null),a([u({type:String,value:null,json:{write:!0}})],Ae.prototype,"field2",null),a([u({type:String,value:null,json:{write:!0}})],Ae.prototype,"field3",null),a([u({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Ae.prototype,"orderByClassesEnabled",void 0),a([u({type:String,value:null,json:{write:!0}})],Ae.prototype,"valueExpression",null),a([u({type:String,json:{write:!0}})],Ae.prototype,"valueExpressionTitle",void 0),a([u({type:s9,json:{write:!0}})],Ae.prototype,"legendOptions",void 0),a([u({type:String,json:{write:!0}})],Ae.prototype,"defaultLabel",void 0),a([u(R_({...T4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Ae.prototype,"defaultSymbol",null),a([u({type:String,value:null,json:{write:!0}})],Ae.prototype,"fieldDelimiter",null),a([u({type:D,readOnly:!0})],Ae.prototype,"portal",void 0),a([A("portal",["styleName"])],Ae.prototype,"readPortal",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Ae.prototype,"styleOrigin",void 0),a([A("styleOrigin",["styleName","styleUrl"])],Ae.prototype,"readStyleOrigin",null),a([j("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Ae.prototype,"writeStyleOrigin",null),a([u({type:[rl],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,r)=>(e.uniqueValueGroups||HK(e)).map(i=>rl.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ae.prototype,"uniqueValueGroups",null),a([u({type:[ys],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Ae.prototype,"uniqueValueInfos",null),Ae=dd=a([_("esri.renderers.UniqueValueRenderer")],Ae);var jg,$c;let ft=($c=class extends F{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10}clone(){return new jg(P({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},jg=$c,$c);a([u({type:[String],json:{write:!0}})],ft.prototype,"attachmentTypes",void 0),a([u({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],ft.prototype,"attachmentsWhere",void 0),a([u({type:Boolean,json:{write:!0}})],ft.prototype,"cacheHint",void 0),a([u({type:[String],json:{write:!0}})],ft.prototype,"keywords",void 0),a([u({type:[String],json:{write:!0}})],ft.prototype,"globalIds",void 0),a([u({json:{write:!0}})],ft.prototype,"name",void 0),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],ft.prototype,"num",void 0),a([u({type:[Number],json:{write:!0}})],ft.prototype,"objectIds",void 0),a([u({type:[String],json:{write:!0}})],ft.prototype,"orderByFields",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],ft.prototype,"returnMetadata",void 0),a([u({type:[Number],json:{write:!0}})],ft.prototype,"size",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],ft.prototype,"start",void 0),a([j("start"),j("num")],ft.prototype,"writeStart",null),a([u({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ft.prototype,"where",void 0),ft=jg=a([_("esri.rest.support.AttachmentQuery")],ft),ft.from=Yr(ft);const TE=Wt()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),Bw="percent-of-total",Hw="field",Hhe=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const s=!!this.normalizationField,n=this.normalizationTotal!=null;return s||n?(i=s&&Hw||n&&Bw||null,s&&n&&N.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==Hw&&i!==Bw||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return a([u({type:String,json:{name:"parameters.normalizationField",write:!0}})],r.prototype,"normalizationField",void 0),a([u({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],r.prototype,"normalizationMaxValue",void 0),a([u({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],r.prototype,"normalizationMinValue",void 0),a([u({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],r.prototype,"normalizationTotal",void 0),a([te(TE,{name:"parameters.normalizationType"})],r.prototype,"normalizationType",null),r=a([_("esri.rest.support.NormalizationBinParametersMixin")],r),r};var Vg,Tc;let De=(Tc=class extends F{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,r){r.historicMoment=e&&e.getTime()}writeStart(e,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(r.definitionExpression="1=1")}clone(){return new Vg(P({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},Vg=Tc,Tc);a([u({type:Boolean,json:{write:!0}})],De.prototype,"cacheHint",void 0),a([u({type:br,json:{write:!0}})],De.prototype,"dynamicDataSource",void 0),a([u({type:String,json:{write:!0}})],De.prototype,"gdbVersion",void 0),a([u({type:Number,json:{write:!0}})],De.prototype,"geometryPrecision",void 0),a([u({type:Date})],De.prototype,"historicMoment",void 0),a([j("historicMoment")],De.prototype,"_writeHistoricMoment",null),a([u({type:Number,json:{write:!0}})],De.prototype,"maxAllowableOffset",void 0),a([u({json:{write:!0}})],De.prototype,"objectIds",void 0),a([u({type:[String],json:{write:!0}})],De.prototype,"orderByFields",void 0),a([u({type:[String],json:{write:!0}})],De.prototype,"outFields",void 0),a([u({type:B,json:{read:{source:"outSR"},write:{target:"outSR"}}})],De.prototype,"outSpatialReference",void 0),a([u({json:{write:!0}})],De.prototype,"relationshipId",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],De.prototype,"start",void 0),a([j("start"),j("num")],De.prototype,"writeStart",null),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],De.prototype,"num",void 0),a([u({json:{write:!0}})],De.prototype,"returnGeometry",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],De.prototype,"returnM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],De.prototype,"returnZ",void 0),a([u({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],De.prototype,"where",void 0),De=Vg=a([_("esri.rest.support.RelationshipQuery")],De),De.from=Yr(De);const Ww=Object.freeze(Object.defineProperty({__proto__:null,get default(){return De}},Symbol.toStringTag,{value:"Module"})),zg=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function WK(t,e,r,i){const s=await ua(t);if(await n9(t,e,i),!s.addAttachment)throw new I(i,"Layer source does not support addAttachment capability");return s.addAttachment(e,r)}function n9(t,e,r){const{attributes:i}=e,{objectIdField:s}=t;return t.capabilities?.data?.supportsAttachment?e?i?s&&i[s]?Promise.resolve():Promise.reject(new I(r,`feature is missing the identifying attribute ${s}`)):Promise.reject(new I(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new I(r,"A feature is required to add/delete/update attachments")):Promise.reject(new I(r,"this layer doesn't support attachments"))}async function ZK(t,e,r,i,s){const n=await ua(t);if(await n9(t,e,s),!n.updateAttachment)throw new I(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(e,r,i)}async function JK(t,e,r){const{applyEdits:i}=await R(()=>import("./money-tides-editingSupport-BcT3Ul76.js"),__vite__mapDeps([318,3,4,1,2,5,6,7,12,13,14])),s=await t.load();let n=r;return s.type==="feature"&&s.infoFor3D&&e.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await gY(s,e.deleteFeatures,s.globalIdField)}),i(s,s.source,e,r)}async function QK(t,e,r){const{uploadAssets:i}=await R(()=>import("./money-tides-editingSupport-BcT3Ul76.js"),__vite__mapDeps([318,3,4,1,2,5,6,7,12,13,14])),s=await t.load();return i(s,s.source,e,r)}async function KK(t,e,r,i){const s=await ua(t);if(await n9(t,e,i),!s.deleteAttachments)throw new I(i,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,r)}async function YK(t,e,r){const i=(await t.load({signal:e?.signal})).source;if(!i.fetchRecomputedExtents)throw new I(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(e)}async function XK(t,e,r,i){e=ft.from(e),await t.load();const s=t.source,n=t.capabilities;if(!n?.data?.supportsAttachment)throw new I(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:c,num:d,size:h,start:y,where:f}=e;if(!n?.operations?.supportsQueryAttachments&&(o?.length>0||c?.length>0||h?.length>0||d||y||f))throw new I(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(l?.length||c?.length||f))throw new I(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new I(i,"Layer source does not support queryAttachments capability",e);return!n?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),s.queryAttachments(e)}async function eY(t,e,r,i){const s=await ua(t);if(!s.queryObjectIds)throw new I(i,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(W.from(e)??t.createQuery(),r)}async function tY(t,e,r,i){const s=await ua(t);if(!s.queryFeatureCount)throw new I(i,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(W.from(e)??t.createQuery(),r)}async function rY(t,e,r,i){const s=await ua(t);if(!s.queryExtent)throw new I(i,"Layer source does not support queryExtent capability");return s.queryExtent(W.from(e)??t.createQuery(),r)}async function iY(t,e,r,i){const s=await ua(t);if(!s.queryRelatedFeatures)throw new I(i,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(De.from(e),r)}async function sY(t,e,r,i){const s=await ua(t);if(!s.queryRelatedFeaturesCount)throw new I(i,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(De.from(e),r)}async function nY(t){const e=t.source;if(e?.refresh)try{const{dataChanged:r,updates:i}=await e.refresh();if(i!=null&&(t.sourceJSON={...t.sourceJSON,...i},t.read(i,{origin:"service",url:t.parsedUrl})),r)return!0}catch{}if(t.definitionExpression)try{return(await x$(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function oY(t){const e=new W;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const r=t.capabilities?.query;r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference);const i=t.capabilities?.data;i?.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i?.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:s,timeExtent:n}=t;return e.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,e}function IE(t){const{globalIdField:e,fields:r}=t;if(e)return e;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function ME(t){const{objectIdField:e,fields:r}=t;if(e)return e;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function aY(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function lY(t,e,r,i){const s=r?.feature,n=!!t.subtypes?.length;if(n&&!r?.excludeImpliedDomains){const c=cY(t,e);if(c)return c}const o=n&&uY(t,s);if(o){const c=o?.domains?.[e];return c?.type==="inherited"?i:c}const l=a9(t.types,t.typeIdField,s);if(l){const c=l.domains&&l.domains[e];if(c&&c?.type!=="inherited")return c}if(i)return i;if(!r?.excludeImpliedDomains){const c=pY(t,e);if(c)return c}return null}function uY(t,e){const{subtypes:r,subtypeField:i}=t;if(!e?.attributes||!r?.length||!i)return null;const s=e.attributes[i];return s==null?null:r.find(n=>n.code===s)}function cY(t,e){const{fieldsIndex:r,subtypeField:i}=t,{name:s,type:n}=r.get(e)??{};if(!s)return null;if((i&&r.get(i)?.name)===s&&t.subtypes?.length){const o=t.subtypes.map(l=>new el({code:EE(l.code,n),name:l.name}));if(o?.length)return new zo({codedValues:o})}return null}function pY(t,e){const{fieldsIndex:r}=t,{name:i,type:s}=r.get(e)??{};if(!i)return null;if(("typeIdField"in t?r.get(t.typeIdField)?.name:null)===i&&"types"in t&&t.types?.length){const n=t.types.map(o=>new el({code:EE(o.id,s),name:o.name}));return new zo({codedValues:n})}return null}function EE(t,e){return e?N$({type:e})&&typeof t=="number"?`${t}`:VV({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function ua(t){return(await t.load()).source}async function Whe(t,e){if(!nt)return;const r=nt.findCredential(t);if(r)return r.userId;let i;try{const s=await q5(t,e);s&&(i=await nt.checkSignInStatus(`${s}/sharing`))}catch{}return i?i.userId:null}async function PE(t,e){if(!nt||nt.findCredential(t))return;let r;try{const i=await q5(t,e);i&&(r=await nt.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=e!=null?e.signal:null;await nt.getCredential(t,{signal:i})}catch{}}async function dY(t,e,r){const i=t.parsedUrl?.path;i&&t.authenticationTriggerEvent===e&&await PE(i,r)}async function Zhe(t){const e=t.parsedUrl?.path;e&&hY(t)&&await PE(e)}function hY(t){return yY(t)&&("serviceDefinitionExpression"in t&&A2(t.serviceDefinitionExpression)||"definitionExpression"in t&&A2(t.definitionExpression))}function yY(t){return!(!vS(t)||!t.capabilities?.query.supportsCurrentUser)}function A2(t){return!!t?.toLowerCase().includes("current_user")}function fY(t){return!W0(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const Ky=Sh({types:LT});function o9(t,e){if(t.defaultSymbol)return t.types?.length?new Ae({defaultSymbol:Ky(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:Ky(r.symbol,r,e)}))}):new Sr({symbol:Ky(t.defaultSymbol,t,e)})}function mY(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const r=t.editingInfo?.lastEditDate?.getTime();return r==null||(e*=1e3,Date.now()-r<e)}async function gY(t,e,r){if(e==null)return null;const i=[],{objectIdField:s}=t;if(e.forEach(d=>{let h=null;if("attributes"in d){const{attributes:y}=d;h={globalId:y[r],objectId:y[s]!=null&&y[s]!==-1?y[s]:null}}else h={globalId:d.globalId,objectId:d.objectId!=null&&d.objectId!==-1?d.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||i.push(h.globalId))}),i.length===0)return null;const n=t.createQuery();n.where=i.map(d=>`${r}='${d}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,r],n.cacheHint=!1;const o=await VC(jQ(t,n));if(!o.ok)return null;const l=new Map,c=o.value.features;for(const d of c){const h=d.attributes[r],y=d.attributes[s];h!=null&&y!=null&&y!==-1&&l.set(nC(h),y)}return l}function a9(t,e,r){if(!e||!r||!t)return null;const i=r.getAttribute(e);return i==null?null:t.find(s=>{const{id:n}=s;return n!=null&&n.toString()===i.toString()})??null}function W0(t){return t.sourceJSON?.isMultiServicesView||vY(t)}function vY(t){return!!t.sourceJSON?.capabilities?.toLowerCase().split(",").map(e=>e.trim()).includes("map")}function wY(t,e,r){const i=e?.queryAttributeBins;if(!e?.operations?.supportsQueryBins||!i)throw new I(r,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new I(r,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!i.supportsNormalization||!Zw(t.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new I(r,"Layer source does not support normalization binning");break;case"date":if(!i.supportsDate)throw new I(r,"Layer source does not support date binning");if(t.binParameters.snapToData&&!i.supportsSnapToData)throw new I(r,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!i.supportsReturnFullIntervalBin)throw new I(r,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new I(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new I(r,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!i.supportsNormalization||!Zw(t.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new I(r,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!i.supportsStackBy)throw new I(r,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!i.supportsSplitBy)throw new I(r,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!i.supportsFirstDayOfWeek)throw new I(r,"Layer source does not support firstDayOfWeek binning");const s=i?.supportedStatistics;if(t.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const l=n.get(o);if(l&&!s[l])throw new I(r,`Layer source does not support ${o} statistic type`)}}}function Zw(t,e){return t!=null&&!!e?.[TE.toJSON(t)]}let Lu=class extends de(F){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};a([u({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Lu.prototype,"shapeAreaField",void 0),a([u({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Lu.prototype,"shapeLengthField",void 0),a([u({type:String,json:{read:t=>RL.read(t)||CL.read(t)}})],Lu.prototype,"units",void 0),Lu=a([_("esri.layers.support.GeometryFieldsInfo")],Lu);var Ug;let Ha=Ug=class extends F{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new U}clone(){return new Ug({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};a([u({type:String,json:{write:{isRequired:!0}}})],Ha.prototype,"floorField",void 0),a([u({json:{read:!1,write:!1}})],Ha.prototype,"viewAllMode",void 0),a([u({json:{read:!1,write:!1}})],Ha.prototype,"viewAllLevelIds",void 0),Ha=Ug=a([_("esri.layers.support.LayerFloorInfo")],Ha);function bY(t){const{nonStandardUrlAllowed:e=!1,separator:r}=t??{},i=P(Y6),s=i.json?.write;return typeof s=="object"&&s&&(s.writer=function(n,o,l,c){oC(this,n,r,o,c)}),{...i,set:function(n){if(n==null)return void this._set("url",n);const o=aC({layer:this,url:n,nonStandardUrlAllowed:e,logger:N.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}}}function _Y(t,e){const{separator:r}=e??{},i=Qs(t.url);return i!=null&&(t.dynamicDataSource!=null?i.path=vl(i.path,"dynamicLayer"):t.layerId!=null&&(i.path=vl(i.path,r??"",t.layerId.toString()))),i}const Jw=new be({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Qw=new be({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Nr=class extends de(F){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};a([u({json:{read:Jw.read,write:Jw.write}})],Nr.prototype,"cardinality",void 0),a([u({json:{name:"catalogID"}})],Nr.prototype,"catalogId",void 0),a([u({json:{read:!0,write:!0}})],Nr.prototype,"composite",void 0),a([u({json:{read:!0,write:!0}})],Nr.prototype,"id",void 0),a([u({json:{read:!0,write:!0}})],Nr.prototype,"keyField",void 0),a([u({json:{read:!0,write:!0}})],Nr.prototype,"keyFieldInRelationshipTable",void 0),a([u({json:{read:!0,write:!0}})],Nr.prototype,"name",void 0),a([u({json:{read:!0,write:!0}})],Nr.prototype,"relatedTableId",void 0),a([u({json:{read:!0,write:!0}})],Nr.prototype,"relationshipTableId",void 0),a([u({json:{read:Qw.read,write:Qw.write}})],Nr.prototype,"role",void 0),Nr=a([_("esri.layers.support.Relationship")],Nr);const SY=[["binary","application/octet-stream","bin",""]];function Khe(t,e){return kE(e.name,t?.supportedFormats??[])!=null}function Yhe(t,e){if(!t)return!1;const r=xY(e,t.supportedFormats??[]);return r!=null&&t.editFormats.includes(r)}function OE(t,e){return u9(IY(t,e))}function RE(t,e){return u9(kE(t,e))}function Xhe(t,e){return AE(TY(t,e))}function xY(t,e){return RE(t.name,e)??OE(t.type,e)}function I4(t,e,r){return OE(t,r)??RE(e,r)}function CE({supportedFormats:t}){return I4("model/gltf-binary","glb",t)}function e1e(t){const e=CE(t);return e!=null&&t.editFormats.includes(e)}function $Y({supportedFormats:t}){return I4("model/gltf+json","gltf",t)}function LE(t){if(!t)return null;const e=CE(t),r=$Y(t);let i=null;for(const s of t.queryFormats){if(s===e)return s;s===r&&(i=s)}return i}function t1e({supportedFormats:t}){return I4("application/esri3do-SR_world","wld",t)}function r1e({supportedFormats:t}){return I4("application/esri3do-SR_prj","prj",t)}function l9(t){return[...SY,...t]}function TY(t,e){return l9(e).find(r=>u9(r)===t)}function IY(t,e){const r=t.toLowerCase();return l9(e).find(i=>AE(i)===r)}function kE(t,e){const r=t.toLowerCase();return l9(e).find(i=>MY(i).some(s=>r.endsWith(s)))}function u9(t){return t?.[0]}function AE(t){return t?.[1].toLowerCase()}function MY(t){return t?.[2].split(",").map(e=>e.toLowerCase())??[]}function i1e(t){return t.tables?.find(e=>e.role==="assetMaps")}function G(t,e,r){return!!FE(t,e,r)}function ku(t,e,r){return FE(t,e,r)}function FE(t,e,r){return t&&t.hasOwnProperty(e)?t[e]:r}const EY={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function PY(t){const e=t?.supportedSpatialAggregationStatistics?.map(r=>r.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function Jh(t,e){return!!t?.supportedOperationsWithCacheHint?.map(i=>i.toLowerCase())?.includes(e.toLowerCase())}function OY(t){const e=t?.supportedStatisticTypes?.map(r=>r.toLowerCase());return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_cont"),percentileDiscrete:!!e?.includes("percentile_disc"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function RY(t){const e=t?.supportedNormalizationTypes?.map(r=>r.toLowerCase());return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function c9(t,e){return{analytics:CY(t),attachment:LY(t),data:kY(t),metadata:AY(t),operations:FY(t.capabilities,t,e),query:NY(t,e),queryAttributeBins:VY(t),queryRelated:DY(t),queryTopFeatures:jY(t),editing:zY(t)}}function CY(t){return{supportsCacheHint:Jh(t.advancedQueryCapabilities,"queryAnalytics")}}function LY(t){const e=t.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Jh(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:G(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:G(t,"supportsAttachmentsResizing",!1),supportsTypeWildcard:G(t.advancedQueryCapabilities,"supportsQueryAttachmentWithTypeWildcard",!1)};return e&&Array.isArray(e)&&e.forEach(i=>{const s=EY[i.name];s&&(r[s]=!!i.isEnabled)}),r}function kY(t){return{isVersioned:G(t,"isDataVersioned",!1),isBranchVersioned:G(t,"isDataBranchVersioned",!1),supportsAttachment:G(t,"hasAttachments",!1),supportsM:G(t,"hasM",!1),supportsZ:G(t,"hasZ",!1)}}function AY(t){return{supportsAdvancedFieldProperties:G(t,"supportsFieldDescriptionProperty",!1)}}function FY(t,e,r){const i=t?.toLowerCase().split(",").map(f=>f.trim())??[],s=r?Zo(r):null,n=i.includes(s?.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!e.datesInUnknownTimezone&&e.uniqueIdInfo?.OIDFieldContainsHashValue!==!0;let l=o&&i.includes("create"),c=o&&i.includes("delete"),d=o&&i.includes("update");const h=i.includes("changetracking"),y=e.advancedQueryCapabilities;return o&&!(l||c||d)&&(l=c=d=!0),{supportsCalculate:G(e,"supportsCalculate",!1),supportsTruncate:G(e,"supportsTruncate",!1),supportsValidateSql:G(e,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:c,supportsEditing:o,supportsChangeTracking:h,supportsQuery:n,supportsQueryAnalytics:G(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:G(y,"supportsQueryAttachments",!1),supportsQueryBins:G(y,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryPivot:G(y,"supportsQueryPivot",!1),supportsQueryTopFeatures:G(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:G(e,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:d,supportsExceedsLimitStatistics:G(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:G(e,"supportsAsyncConvert3D",!1)}}function NY(t,e){const r=t.advancedQueryCapabilities,i=t.ownershipBasedAccessControlForFeatures,s=t.archivingInfo,n=t.currentVersion,o=e?.includes("MapServer"),l=!o||n>=ie("mapserver-pbf-version-support"),c=x_(e),d=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:ku(t,"maxRecordCount",void 0),maxRecordCountFactor:ku(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:ku(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:ku(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:PY(r),supportsCacheHint:G(r,"supportsQueryWithCacheHint",!1)||Jh(r,"query"),supportsCentroid:G(r,"supportsReturningGeometryCentroid",!1),supportsCentroidOnDegeneratedQuantizedGeometry:c||e==null,supportsCompactGeometry:c,supportsCurrentUser:G(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:G(r,"supportsDefaultSR",!1),supportsDegeneratedQuantizedGeometry:G(r,"supportsDegeneratedQuantizedGeometry",!1),supportsDisjointSpatialRelationship:G(r,"supportsDisjointSpatialRel",!1),supportsDistance:G(r,"supportsQueryWithDistance",!1),supportsDistinct:G(r,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:G(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&d.has("pbf"),supportsFullTextSearch:G(r,"supportsFullTextSearch",!1),supportsGeometryProperties:G(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:G(r,"supportsHavingClause",!1),supportsHistoricMoment:G(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:G(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:G(r,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:G(r,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:G(r,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:G(r,"supportsPercentileStatistics",!1),supportsQuantization:G(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:G(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:G(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:G(i,"allowOthersToQuery",!0),supportsQueryGeometry:G(t,"supportsReturningQueryGeometry",!1),supportsResultType:G(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!LE(t.infoFor3D),supportsSpatialAggregationStatistics:G(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:G(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:G(t,"useStandardizedQueries",!1),supportsStatistics:G(r,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:G(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:G(r,"supportsTrueCurve",!1),tileMaxRecordCount:ku(t,"tileMaxRecordCount",void 0)}}function DY(t){const e=t.advancedQueryCapabilities,r=G(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:G(e,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:Jh(e,"queryRelated")}}function jY(t){return{supportsCacheHint:Jh(t.advancedQueryCapabilities,"queryTopFilter")}}function VY(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:G(e,"supportsDateBin",!1),supportsFixedInterval:G(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:G(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:G(e,"supportsFixedBoundariesBin",!1),supportsStackBy:G(e,"supportsStackBy",!1),supportsSplitBy:G(e,"supportsSplitBy",!1),supportsSnapToData:G(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:G(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:G(e,"supportsFirstDayOfWeek",!1),supportsNormalization:G(e,"supportsNormalization",!1),supportedStatistics:OY(e),supportedNormalizationTypes:RY(e)}}function zY(t){const e=t.ownershipBasedAccessControlForFeatures,r=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:G(t,"allowGeometryUpdates",!0),supportsGlobalId:G(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:G(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:G(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:G(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:G(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:G(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:G(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:G(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:G(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:G(r,"supportsAsyncApplyEdits",!1),zDefault:ku(t,"zDefault",void 0)}}function s1e(t){return{operations:{supportsAppend:G(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:G(t,"supportsExportClip",!1),supportsExportFrameset:G(t,"supportsExportFrameset",!1),supportsMensuration:G(t,"supportsMensuration",!1),supportsPreviews:G(t,"supportsPreviews",!1),supportsUpdate:G(t,"supportsUpdate",!1)}}}let Sn=class extends de(F){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const r={};for(const i of Object.keys(e))r[i]=d4(e[i]);return r}writeDomains(e,r){if(!e)return;const i={};for(const s of Object.keys(e))e[s]&&(i[s]=e[s]?.toJSON());r.domains=i}};a([u({type:Number,json:{write:!0}})],Sn.prototype,"code",void 0),a([u({type:Object,json:{write:!0}})],Sn.prototype,"defaultValues",void 0),a([u({json:{write:!0}})],Sn.prototype,"domains",void 0),a([A("domains")],Sn.prototype,"readDomains",null),a([j("domains")],Sn.prototype,"writeDomains",null),a([u({type:String,json:{write:!0}})],Sn.prototype,"name",void 0),Sn=a([_("esri.layers.support.Subtype")],Sn);async function UY(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Qa(t);const r=B.WGS84;return await c6(e,r),ia(t,r)}function qY(t,e){if(!ic(t,e)){const r=t.typeKeywords;r?r.push(e):t.typeKeywords=[e]}}function ic(t,e){return!!t.typeKeywords?.includes(e)}function Kw(t){return ic(t,NE.HOSTED_SERVICE)}function GY(t,e){const r=t.typeKeywords;if(r){const i=r.indexOf(e);i>-1&&r.splice(i,1)}}function o1e(t,e,r){r?qY(t,e):GY(t,e)}async function a1e(t){const e=t.clone().normalize();let r;if(e.length>1)for(const i of e)r?i.width>r.width&&(r=i):r=i;else r=e[0];return UY(r)}const NE={CHARTS:"Charts",DYNAMIC:"Dynamic",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function BY(t){const{portal:e,isOrgItem:r,itemControl:i}=t,s=e.user?.privileges;let n=!s||s.includes("features:user:edit"),o=!!r&&!!s?.includes("features:user:fullEdit");const l=i==="update"||i==="admin";return l?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:l}}}const HY=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(U.ofType(As)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=B.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(i,s){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:n,operations:o,editing:l}=i;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||o.supportsEditing&&!(l.supportsUpdateByOthers&&l.supportsUpdateByAnonymous&&l.supportsDeleteByOthers&&l.supportsDeleteByAnonymous))return"load"}if(A2(this.serviceDefinitionExpression)||A2(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(mY(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const s=this.editFieldsInfo;return(s?.creatorField||s?.editorField)&&i?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(i,s){return c9(s,this.url)}readEditingInfo(i,s){const{editingInfo:n}=s;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const s=P(i),{operations:n,editing:o}=s;return W0(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),s):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,s):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=o.supportsGeometryUpdate=!0),s)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,s){return IE(s)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||W0(this))return!1;const{operations:s,editing:n}=i;return s.supportsEditing&&!(s.supportsAdd&&s.supportsDelete&&s.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:s,editing:n}=i;return W0(this)?!s.supportsQuery:!(s.supportsAdd&&s.supportsDelete&&s.supportsEditing&&s.supportsQuery&&s.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,s){return s.type==="Table"}readMaxScale(i,s){return s.effectiveMaxScale||i||0}readMinScale(i,s){return s.effectiveMinScale||i||0}readObjectIdFieldFromService(i,s){return ME(s)}get parsedUrl(){return _Y(this)}readServiceDefinitionExpression(i,s){return s.definitionQuery||s.definitionExpression}readUniqueIdFields(i,s){return s.uniqueIdInfo?.OIDFieldContainsHashValue?s.uniqueIdInfo.fields:null}readVersion(i,s){return aY(s)}get isUrlHostModified(){const{loaded:i,url:s,_isUrlHostModified:n}=this;if(n)return!0;if(!i||!s||this.originIdOf("url")<7)return!1;const o=this.sourceJSON?.preferredHost;if(!o||!D4(s,`https://${o}`,!0))return!1;for(let l=6;l>=3;l--){const c=this.getAtOrigin("url",n2(l));if(c)return!D4(s,c,!0)}return!1}applyPreferredHost(i){const{url:s,portalItem:n}=this;!s||Rf(n)}applyHostFromPortalItem(){const{url:i,portalItem:s}=this;if(!i||this.originIdOf("url")===7||!s?.url||!Rf(s)||!ic(s,NE.HOSTED_SERVICE)||D4(i,s.url,!0)||!this._isUrlHostModificationEnabled)return;const n=lC(s.url);this._set("url",uC(i,n)),this._isUrlHostModified=!0}};return a([u({readOnly:!0})],r.prototype,"authenticationTriggerEvent",null),a([u({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0),a([u({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],r.prototype,"capabilities",void 0),a([A("service","capabilities")],r.prototype,"readCapabilitiesFromService",null),a([u(Vc("dateFieldsTimeReference"))],r.prototype,"dateFieldsTimeZone",void 0),a([u({type:Boolean})],r.prototype,"datesInUnknownTimezone",void 0),a([u({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],r.prototype,"definitionExpression",void 0),a([u({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0),a([u({readOnly:!0,type:_n})],r.prototype,"editFieldsInfo",void 0),a([u({readOnly:!0})],r.prototype,"editingInfo",void 0),a([A("editingInfo")],r.prototype,"readEditingInfo",null),a([u({readOnly:!0})],r.prototype,"effectiveCapabilities",null),a([u()],r.prototype,"effectiveEditingEnabled",null),a([u((()=>{const i=P(kQ),s=i.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},i})())],r.prototype,"elevationInfo",void 0),a([u()],r.prototype,"fieldsIndex",void 0),a([u({type:Ha,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:ke}}})],r.prototype,"floorInfo",void 0),a([u({type:ue,json:{origins:{service:{read:{source:"extent"}}}}})],r.prototype,"fullExtent",void 0),a([u()],r.prototype,"gdbVersion",void 0),a([u({readOnly:!0,type:Lu,json:{read:{source:"geometryProperties"}}})],r.prototype,"geometryFieldsInfo",void 0),a([u({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:zg.read}}}})],r.prototype,"geometryType",void 0),a([u({type:String})],r.prototype,"globalIdField",void 0),a([A("service","globalIdField",["globalIdField","fields"])],r.prototype,"readGlobalIdFieldFromService",null),a([u({readOnly:!0})],r.prototype,"hasFullEditingRestrictions",null),a([u({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasM",void 0),a([u({readOnly:!0})],r.prototype,"hasUpdateItemRestrictions",null),a([u({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasZ",void 0),a([u({readOnly:!0,type:fr})],r.prototype,"heightModelInfo",void 0),a([u({type:Date})],r.prototype,"historicMoment",void 0),a([u({type:U.ofType(As),readOnly:!0})],r.prototype,"indexes",void 0),a([u({readOnly:!0})],r.prototype,"isTable",void 0),a([A("service","isTable",["type"])],r.prototype,"readIsTableFromService",null),a([u({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],r.prototype,"layerId",void 0),a([u(NQ)],r.prototype,"maxScale",void 0),a([A("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null),a([u(FQ)],r.prototype,"minScale",void 0),a([A("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null),a([u({type:String})],r.prototype,"objectIdField",void 0),a([A("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null),a([u({readOnly:!0})],r.prototype,"parsedUrl",null),a([u(Vc("preferredTimeReference"))],r.prototype,"preferredTimeZone",void 0),a([u({type:[Nr],readOnly:!0})],r.prototype,"relationships",void 0),a([u({type:Boolean})],r.prototype,"returnM",void 0),a([u({type:Boolean})],r.prototype,"returnZ",void 0),a([u({readOnly:!0,json:{write:!1}})],r.prototype,"serverGens",void 0),a([u({readOnly:!0})],r.prototype,"serviceDefinitionExpression",void 0),a([A("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],r.prototype,"readServiceDefinitionExpression",null),a([u({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"serviceItemId",void 0),a([u()],r.prototype,"sourceJSON",void 0),a([u({type:B,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],r.prototype,"spatialReference",void 0),a([u({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],r.prototype,"subtypeField",void 0),a([u({type:[Sn],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"subtypes",void 0),a([u({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0),a([u({type:[String],readOnly:!0})],r.prototype,"uniqueIdFields",void 0),a([A("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],r.prototype,"readUniqueIdFields",null),a([u(bY({nonStandardUrlAllowed:!0}))],r.prototype,"url",void 0),a([u({json:{origins:{service:{read:!0}},read:!1}})],r.prototype,"version",void 0),a([A("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],r.prototype,"readVersion",null),a([u({readOnly:!0})],r.prototype,"isUrlHostModified",null),r=a([_("esri.layers.mixins.FeatureLayerBase")],r),r};let WY=class extends Ml{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[Nh](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},Lo=class extends de(F){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};a([u({type:String,json:{write:!0}})],Lo.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],Lo.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],Lo.prototype,"returnType",void 0),Lo=a([_("esri.layers.support.ExpressionInfo")],Lo);var qg,Ic;let ir=(Ic=class extends F{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new qg({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:P(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},qg=Ic,Ic);a([u({type:Boolean,json:{write:!0}})],ir.prototype,"isAutoGenerated",void 0),a([u({type:String,json:{write:!0}})],ir.prototype,"name",void 0),a([u({type:String,json:{write:!0}})],ir.prototype,"alias",void 0),a([u({type:String,json:{write:!0}})],ir.prototype,"onStatisticField",void 0),a([u({type:Lo,json:{write:!0}})],ir.prototype,"onStatisticExpression",void 0),a([u({type:String,json:{write:!0}})],ir.prototype,"statisticType",void 0),ir=qg=a([_("esri.layers.support.AggregateField")],ir);let Ho=class extends F{constructor(){super(...arguments),this.type=null}};a([u({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Ho.prototype,"type",void 0),Ho=a([_("esri.layers.support.FeatureReduction")],Ho);const p9="__begin__",d9="__end__",ZY=new RegExp(p9,"ig"),JY=new RegExp(d9,"ig"),Yw=new RegExp("^"+p9,"i"),Xw=new RegExp(d9+"$","i"),F2='"',QY=F2+" + ",KY=" + "+F2;function YY(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function XY(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function h9(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=YY(t.labelExpression),e.type="conventional"),e}function eX(t){const e=h9(t);if(!e)return null;switch(e.type){case"conventional":return Gg(e.expression);case"arcade":return e.expression}return null}function tX(t){const e=h9(t);if(!e)return null;switch(e.type){case"conventional":return iX(e.expression);case"arcade":return DE(e.expression)}return null}function Gg(t){let e;return t?(e=Ol(t,r=>p9+'$feature["'+r+'"]'+d9),e=Yw.test(e)?e.replace(Yw,""):F2+e,e=Xw.test(e)?e.replace(Xw,""):e+F2,e=e.replaceAll(ZY,QY).replaceAll(JY,KY)):e='""',e}const rX=/^\s*\{([^}]+)\}\s*$/i;function iX(t){return t?.match(rX)?.[1].trim()||null}const sX=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,nX=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,oX=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function DE(t){if(!t)return null;let e=sX.exec(t)||nX.exec(t);return e?e[1]||e[3]:(e=oX.exec(t),e?e[2]:null)}var Bg,Mc;let Ln=(Mc=class extends F{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,r){return r.value?Gg(r.value):e}writeExpression(e,r,i){this.value!=null&&(e=Gg(this.value)),e!=null&&(r[i]=e)}clone(){return new Bg({expression:this.expression,title:this.title,value:this.value})}},Bg=Mc,Mc);a([u({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Ln.prototype,"expression",void 0),a([A("expression",["expression","value"])],Ln.prototype,"readExpression",null),a([j("expression")],Ln.prototype,"writeExpression",null),a([u({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ln.prototype,"title",void 0),a([u({json:{read:!1,write:!1}})],Ln.prototype,"value",void 0),Ln=Bg=a([_("esri.layers.support.LabelExpressionInfo")],Ln);var Hg;const F1=new be({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function N1(t,e,r){return{enabled:!Of(r?.layer)}}function jE(t){return!t||t.origin!=="service"&&t.layer?.type!=="map-image"}function aX(t){return t?.type==="map-image"}function VE(t){return!!aX(t)&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function lX(t){return jE(t)||VE(t?.layer)}var Ec;let Fe=(Ec=class extends F{static evaluateWhere(e,r){const i=(s,n,o)=>{switch(n){case"=":return s==o;case"<>":return s!=o;case">":return s>o;case">=":return s>=o;case"<":return s<o;case"<=":return s<=o}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return i(r[s[0]],s[1],s[2]);if(s.length===7){const n=i(r[s[0]],s[1],s[2]),o=s[3],l=i(r[s[4]],s[5],s[6]);switch(o){case"AND":return n&&l;case"OR":return n||l}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=IK,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,r){const i=r.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,r,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=XY(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=DE(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(r[i]=e)}writeLabelExpressionInfo(e,r,i,s){if(e==null&&this.labelExpression!=null&&jE(s))e=new Ln({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(s);n.expression&&(r[i]=n)}writeMaxScale(e,r){(e||this.minScale)&&(r.maxScale=e)}writeMinScale(e,r){(e||this.maxScale)&&(r.minScale=e)}getLabelExpression(){return h9(this)}getLabelExpressionArcade(){return eX(this)}getLabelExpressionSingleField(){return tX(this)}hash(){return JSON.stringify(this)}clone(){return new Hg({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:P(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:P(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},Hg=Ec,Ec);a([u({type:String,json:{write:!0}})],Fe.prototype,"name",void 0),a([u({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:N1}}}}})],Fe.prototype,"allowOverrun",void 0),a([u({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:N1}}}}})],Fe.prototype,"deconflictionStrategy",void 0),a([u({type:String,json:{write:{overridePolicy(t,e,r){return this.labelExpressionInfo&&r?.origin==="service"&&VE(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Fe.prototype,"labelExpression",void 0),a([A("labelExpression")],Fe.prototype,"readLabelExpression",null),a([j("labelExpression")],Fe.prototype,"writeLabelExpression",null),a([u({type:Ln,json:{write:{overridePolicy:(t,e,r)=>lX(r)?{allowNull:!0}:{enabled:!1}}}})],Fe.prototype,"labelExpressionInfo",void 0),a([j("labelExpressionInfo")],Fe.prototype,"writeLabelExpressionInfo",null),a([u({type:F1.apiValues,json:{type:F1.jsonValues,read:F1.read,write:F1.write}})],Fe.prototype,"labelPlacement",void 0),a([u({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Fe.prototype,"labelPosition",void 0),a([u({type:Number})],Fe.prototype,"maxScale",void 0),a([j("maxScale")],Fe.prototype,"writeMaxScale",null),a([u({type:Number})],Fe.prototype,"minScale",void 0),a([j("minScale")],Fe.prototype,"writeMinScale",null),a([u({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:N1}}}}})],Fe.prototype,"repeatLabel",void 0),a([u({type:Number,cast:_e,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:N1}}}}})],Fe.prototype,"repeatLabelDistance",void 0),a([u({types:pU,json:{origins:{"web-scene":{types:dU,write:Nw,default:null}},write:Nw,default:null}})],Fe.prototype,"symbol",void 0),a([u({type:Boolean,json:{write:!0}})],Fe.prototype,"useCodedValues",void 0),a([u({type:String,json:{write:!0}})],Fe.prototype,"where",void 0),Fe=Hg=a([_("esri.layers.support.LabelClass")],Fe);var Wg;let ds=Wg=class extends F{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new Wg({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};a([u({type:String,json:{write:!0}})],ds.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],ds.prototype,"label",void 0),a([u({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],ds.prototype,"minValue",void 0),a([u({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],ds.prototype,"maxValue",void 0),a([u(r9)],ds.prototype,"symbol",void 0),ds=Wg=a([_("esri.renderers.support.ClassBreakInfo")],ds);var Zg;const zE="log",Z0="percent-of-total",J0="field",D1=new be({esriNormalizeByLog:zE,esriNormalizeByPercentOfTotal:Z0,esriNormalizeByField:J0}),uX=Yr(ds);let ut=Zg=class extends lp(mi){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,r){if(!Array.isArray(t))return;let i=e.minValue;return t.map(s=>{const n=new ds;return n.read(s,r),n.minValue==null&&(n.minValue=i),n.maxValue==null&&(n.maxValue=n.minValue),i=n.maxValue,n})}writeClassBreakInfos(t,e,r,i){const s=t.map(n=>n.write({},i));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),e[r]=s}castField(t){return t==null?t:typeof t=="function"?(N.getLogger(this).error(".field: field must be a string value"),null):z2(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,r=this.normalizationTotal!=null;return e||r?(t=e&&J0||r&&Z0||null,e&&r&&N.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==J0&&t!==Z0||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,r){let i=null;i=typeof t=="number"?new ds({minValue:t,maxValue:e,symbol:kT(r)}):uX(P(t)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(t,e){return this.valueExpression&&e?.arcade==null&&N.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let r=e;this.valueExpression&&e?.arcade==null&&(r={...r,arcade:await Tl()});const i=this.getBreakIndex(t,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(t,e){if(this.valueExpression&&e?.arcade==null)return void N.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(t,e);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let r=e;if(this.valueExpression&&e?.arcade==null){const s=await Tl(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}const i=this.getBreakIndex(t,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((i,s)=>i+s.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new Zg({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:P(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:P(this.visualVariables),legendOptions:P(this.legendOptions),authoringInfo:P(this.authoringInfo)})}async collectRequiredFields(t,e){const r=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(r)}async collectSymbolFields(t,e){const r=[...this.symbols.map(i=>i.collectRequiredFields(t,e)),cr(t,e,null,this.valueExpression)];ur(t,e,this.field),ur(t,e,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(t,e){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=e??{},{valueExpression:l}=this;let c=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const d=n.arcadeUtils;if(!c){const y=d.createSyntaxTree(l);c=d.createFunction(y),this._compiledValueExpression.compiledFunction=c}this._compiledValueExpression.valueExpression=l;const h=d.executeFunction(c,d.createExecContext(t,d.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){const e=this.field,r=t.attributes,i=this.normalizationType;let s=parseFloat(r[e]);if(i){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===zE)s=Math.log(s)*Math.LOG10E;else if(i!==Z0||n==null||isNaN(n)){if(i===J0&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=t&&(e?t<=i[1]:t<i[1]))return r}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let r=1;r<e;r++)if(t[r-1].maxValue!==t[r].minValue)return!1;return!0}};a([u(i9)],ut.prototype,"backgroundFillSymbol",void 0),a([u({type:[ds],json:{write:{isRequired:!0}}})],ut.prototype,"classBreakInfos",void 0),a([A("classBreakInfos")],ut.prototype,"readClassBreakInfos",null),a([j("classBreakInfos")],ut.prototype,"writeClassBreakInfos",null),a([u({type:String,json:{write:!0}})],ut.prototype,"defaultLabel",void 0),a([u(T4)],ut.prototype,"defaultSymbol",void 0),a([u({type:String,json:{write:!0}})],ut.prototype,"field",void 0),a([xe("field")],ut.prototype,"castField",null),a([u({type:Boolean})],ut.prototype,"isMaxInclusive",void 0),a([u({type:s9,json:{write:!0}})],ut.prototype,"legendOptions",void 0),a([u({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],ut.prototype,"minValue",null),a([u({type:String,json:{write:!0}})],ut.prototype,"normalizationField",void 0),a([u({type:Number,json:{write:!0}})],ut.prototype,"normalizationTotal",void 0),a([u({type:D1.apiValues,value:null,json:{type:D1.jsonValues,read:D1.read,write:D1.write}})],ut.prototype,"normalizationType",null),a([te({classBreaks:"class-breaks"})],ut.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],ut.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],ut.prototype,"valueExpressionTitle",void 0),ut=Zg=a([_("esri.renderers.ClassBreaksRenderer")],ut);const Jg=-3,cX=Jg-1,pX=!!ie("esri-tests-disable-gpu-memory-measurements");let dX=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,r){return this._db.get(e.id+r)?.size??0}put(e,r,i,s,n){r=e.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,0)),s>this._maxSize)return void this._notifyRemove(r,i,s,0);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return pX||console.warn(`Refusing to cache entry with size ${s} for key ${r}`),void this._notifyRemove(r,i,0,0);const l=1+Math.max(n,cX)-Jg;this._db.set(r,new hX(i,s,l)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,r){r=e.id+r;const i=this._db.get(r);if(!i)return;this._size-=i.size,e.size-=i.size;let s=i.entry.usedMemory;for(;s>this._maxSize;){const n=this._notifyRemove(r,i.entry,s,1);if(!(n!=null&&n>0))return void this._db.delete(r);s=n}i.size=s,this._size+=s,e.size+=s,this._checkSize()}pop(e,r){r=e.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(e,r){r=e.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(e,r){const i=this._db.get(e.id+r);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,l)=>{const c=o.lifetime;i[c]=(i[c]||0)+o.size,this._users.forEach(d=>{const{id:h,name:y}=d;if(l.startsWith(h)){const f=r[y]||0;r[y]=f+o.size}})});const s={};this._users.forEach(o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const c=r[l]||0;r[l]=c,s[l]=Math.round(100*o.hitRate)+"%"}else s[l]="0%"});const n=Object.keys(r);n.sort((o,l)=>r[l]-r[o]),n.forEach(o=>e[o]=Math.round(r[o]/2**20)+"MB / "+s[o]);for(let o=i.length-1;o>=0;--o){const l=i[o];l&&(e["Priority "+(o+Jg-1)]=Math.round(l/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const r=e.id;this._db.forEach((i,s)=>{s.startsWith(r)&&(this._size-=i.size,this._db.delete(s),this._notifyRemove(s,i.entry,i.size,0))}),e.size=0}clearAll(){this._db.forEach((e,r)=>this._notifyRemove(r,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[r,i]of this._db)r.startsWith(e.id)&&(yield i.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,r,i,s){const n=this._users.get(e.split(Yy)[0])?.removeFunc,o=n?.(r,s,i);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach((e,r)=>this._checkSizeLimits(e,r)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,r){r==null||r<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,r)}_checkSizeLimits(e,r){const i=r??this;if(i.size<=e)return;const s=r?.id;let n=!0;for(;n;){n=!1;for(const[o,l]of this._db)if(l.lifetime===0&&(!s||o.startsWith(s))){const c=r??this._users.get(o.split(Yy)[0]);if(this._purgeItem(o,l,c),i.size<=.9*e)return;n||=this._db.has(o)}}for(const[o,l]of this._db)if(!s||o.startsWith(s)){const c=r??this._users.get(o.split(Yy)[0]);if(this._purgeItem(o,l,c),i.size<=.9*e)return}}_purgeItem(e,r,i){if(this._db.delete(e),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const s=this._notifyRemove(e,r.entry,r.size,1);s!=null&&s>0&&(this._size+=s,i&&(i.size+=s),r.lives=r.lifetime,r.size=s,this._db.set(e,r))}else--r.lives,this._db.set(e,r)}},hX=class{constructor(e,r,i){this.entry=e,this.size=r,this.lifetime=i,this.lives=i}};const Yy=":";let yX=class{constructor(e,r){this.removeFunc=r,this._storage=new dX,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,r,i=1){this._storage.put(this,e,r,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},eb=class UE{static parse(e,r,i){const s=[],n=[],o=e.split(";");for(let l=0;l<o.length;l++){const c=o[l];if(c){if(c.includes("po:")){const d=c.slice(3).split("|");if(d.length===3){const[h,y,f]=d,m=mX(h,y,f);m&&n.push(m)}continue}if(c.includes("|")){for(const d of c.split("|"))if(r.has(d)){s.push(d);break}}else if(r.has(c))s.push(c);else if(l===0){s.length=0,s.push(gX(i));break}}}return new UE(s,n)}constructor(e,r){this.partNames=e,this.overrides=r}};function fX(t,e){if(t==="DashTemplate")return e.split(" ").map(r=>Number(r));if(t==="Color"){const r=new K(e).toRgba();return[r[0],r[1],r[2],255*r[3]]}return Number(e)}function mX(t,e,r){return{primitiveName:t,propertyName:e,value:fX(e,r),defaultValue:null}}function gX(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var Pc;let js=(Pc=class{},Pc.instance=new bh("Etc/UTC"),Pc);function vX(t){return t instanceof $_?t===js.instance:t?.toString().toLowerCase()==="unknown"}function y1e(t){return vX(t)?js.instance:t}function wX(t){return"timeZone"in t}function bX(t){return"timeZone"in t}function _X(t){return"dateFieldsTimeZone"in t}const SX=new Map;let fh=class Q0{static fromJSON(e){return new Q0(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new Q0(e.fields??[],rb(e))}static fromLayerJSON(e){return new Q0(e.fields??[],rb(e))}constructor(e=[],r){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const s of this.fields){const n=s?.name,o=tb(n);if(n&&o){const l=Wa(n);this._fieldsMap.set(n,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(o,s),i.push(`${l}:${s.type}:${this._timeZoneByFieldName?.get(n)}`),D$(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):m6(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),f7(s)||m7(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)f7(e)||m7(e)||e.nullable||OV(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return this.get(e)!=null}get(e){if(!e)return;let r=this._fieldsMap.get(e);return r||(r=this._fieldsMap.get(Wa(e))??this._normalizedFieldsMap.get(tb(e)),r&&this._fieldsMap.set(e,r),r)}getTimeZone(e){const r=this.get(e&&typeof e!="string"?e.name:e);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(N.getLogger("esri.layers.support.FieldsIndex").errorOnce(new I("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),Gd):qE.has(r.type)?gl:null:null}getLuxonTimeZone(e){const r=this.getTimeZone(e);return r?r===gl?js.instance:r===Gd?Lc.utcInstance:xh(SX,r,()=>bh.create(r)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return j$(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>m5(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Wa(t){return t.trim().toLowerCase()}function tb(t){return mV(t)?.toLowerCase()??""}const qE=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function rb(t){const e=new Map;if(!t.fields)return e;const r=t.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:s}=t,n=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",l=_X(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?Q1(t.dateFieldsTimeReference):null,c=s?wX(s)?s.timeZone??l:s.dateFieldsTimeReference?Q1(s.dateFieldsTimeReference):l??Gd:null,d=i?bX(i)?i.timeZone??l:i.timeReference?Q1(i.timeReference):l:null,h=new Map([[Wa(s?.creationDateField??""),c],[Wa(s?.editDateField??""),c],[Wa(n),d],[Wa(o),d]]);for(const{name:y,type:f}of t.fields)if(qE.has(f))e.set(y,gl);else if(f!=="date"&&f!=="esriFieldTypeDate")e.set(y,null);else if(r)e.set(y,gl);else{const m=h.get(Wa(y??""))??l;e.set(y,m)}return e}const GE={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};let xX=class extends Error{constructor(...e){super(...e)}},ib=class BE extends xX{constructor(e,r){super(y9(r)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,BE),r?.loc&&(this.loc=r.loc)}},$X=class HE extends Error{constructor(e,r,i,s){super("Execution error - "+y9(i)+Ol(GE[r],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,HE),i?.loc&&(this.loc=i.loc)}};function y9(t){return t&&t.loc?`Line : ${t.loc.start?.line}, ${t.loc.start?.column}: `:""}let m1e=class WE extends Error{constructor(e,r,i,s){super("Compilation error - "+y9(i)+Ol(GE[r],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,WE),i?.loc&&(this.loc=i.loc)}},g1e=class ZE extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,ZE)}};function v1e(t,e,r){return r.declaredRootClass==="esri.arcade.arcadeexecutionerror"||r.declaredRootClass==="esri.arcade.arcadecompilationerror"?r.loc===null&&e?.loc?new ib(r,{cause:r}):r:(r.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||r.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||r.declaredRootClass,e?.loc?new ib(r,{cause:r}):r)}const TX={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};let w1e=class JE extends Error{constructor(e,r){super(Ol(TX[e],r)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,JE)}};function K0(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let b1e=class{constructor(e,r){const i=new Map;for(const s of e){const n=K0(s);if(i.has(n))throw new Error(`${s} already added as ${i.get(n)}`);i.set(n,s)}if(r!=null)for(const[s,n]of r){const o=K0(s);if(i.has(o))throw new Error(`${s} already associated with ${i.get(o)}`);i.set(o,n)}this._enumMap=i}lookup(e){return this._enumMap.get(K0(e))}get(e){const r=this.lookup(e);if(r==null)throw new $X(null,"InvalidParameter",null);return r}};const IX={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};let MX=class QE extends Error{constructor(e,r){super(Ol(IX[e],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,QE)}};function Ql(t,e,r){return t<e?t-e:t>r?t-r:0}function Kl(t,e,r){return t<e?e:t>r?r:t}let qn=class lt{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,r=1,i=1,s=0,n=0,o=0,l=0,c){if(isNaN(e)||isNaN(r)||isNaN(i)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(l))return null;const d=Re.local(e,r).daysInMonth;let h=Re.fromObject({day:Kl(i,1,d),year:e,month:Kl(r,1,12),hour:Kl(s,0,23),minute:Kl(n,0,59),second:Kl(o,0,59),millisecond:Kl(l,0,999)},{zone:Fs(c)});return h=h.plus({months:Ql(r,1,12),days:Ql(i,1,d),hours:Ql(s,0,23),minutes:Ql(n,0,59),seconds:Ql(o,0,59),milliseconds:Ql(l,0,999)}),new lt(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,r){const i=Fs(r);return e.isUnknownTimeZone||i===js.instance?lt.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,i):new lt(e._date.setZone(i))}static dateJSToArcadeDate(e){return new lt(Re.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,r="system"){const i=Fs(r);return new lt(Re.fromJSDate(e,{zone:i}))}static unknownEpochToArcadeDate(e){return new lt(Re.fromMillis(e,{zone:js.instance}))}static unknownDateJSToArcadeDate(e){return new lt(Re.fromMillis(e.getTime(),{zone:js.instance}))}static epochToArcadeDate(e,r="system"){const i=Fs(r);return new lt(Re.fromMillis(e,{zone:i}))}static dateTimeToArcadeDate(e){return new lt(e)}clone(){return new lt(this._date)}changeTimeZone(e){const r=Fs(e);return lt.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(e,r){const i=Fs(r);return e.zone===js.instance||i===js.instance?lt.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,i):new lt(e.setZone(i))}static nowToArcadeDate(e){const r=Fs(e);return new lt(Re.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new lt(Re.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===lt.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===js.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new lt(this._date.plus(e))}diff(e,r){return this._date.diff(e._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,r){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(e,r){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new lt(this._date.toUTC())}toLocal(){return new lt(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const r=Re.fromISO(e,{setZone:!0});return new lt(r)}};function Fs(t,e=!0){if(t instanceof $_)return t;switch(K0(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return js.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(t)){const i=Lc.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(i)return i}const r=bh.create(t);if(!r.isValid){if(e)throw new MX("TimeZoneNotRecognized");return null}return r}function sb(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const r=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of t.match(r)||[])switch(i){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=i;break;default:i.length>=2&&i.startsWith("[")&&i.endsWith("]")?e+=`'${i.slice(1,-1)}'`:e+=`'${i}'`}return e}const nb="esri.core.sql.dateonly";let EX=class ai{constructor(e,r,i){this._year=e,this._month=r,this._day=i,this.declaredRootClass=nb}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===nb}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return ai.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new ai(this._year,this._month,this._day)}toDateTime(e){return Re.fromObject({day:this.day,month:this.month,year:this.year},{zone:Fs(e)})}toDateTimeLuxon(e){return Re.fromObject({day:this.day,month:this.month,year:this.year},{zone:Fs(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,r=!0){if(e===null||e==="")return this.toString();if(r&&(e=sb(e)),!e)return"";const i=this.toDateTime("unknown");return qn.dateTimeToArcadeDate(i).toFormat(e,{locale:Bn(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return qn.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,r){return ai.fromDateTime(this.toUTCDateTime().plus({[e]:r}))}toUTCDateTime(){return Re.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const r=Re.fromMillis(e,{zone:Lc.utcInstance});return r.isValid?ai.fromParts(r.year,r.month,r.day):null}static fromSeconds(e){const r=Re.fromSeconds(e,{zone:Lc.utcInstance});return r.isValid?ai.fromParts(r.year,r.month,r.day):null}static fromReader(e){if(!e)return null;const r=e.split("-");return r.length!==3?null:new ai(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10))}static fromParts(e,r,i){const s=new ai(e,r,i);return s.isValid===!1?null:s}static fromDateJS(e){return ai.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return ai.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,r=null){if(e===""||e===null)return null;const i=[];if(r)(r=sb(r))&&i.push(r);else if(r===null||r===""){const s=Re.fromISO(e,{setZone:!0});return s.isValid?ai.fromParts(s.year,s.month,s.day):null}for(const s of i){const n=Re.fromFormat(e,r??s);if(n.isValid)return new ai(n.year,n.month,n.day)}return null}static fromNow(e="system"){const r=Re.fromJSDate(new Date).setZone(Fs(e));return new ai(r.year,r.month,r.day)}};function S1e(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new ue({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function x1e(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function j1(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function ob(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let r="";for(const i of t.match(e)||[])switch(i){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":r+=i;break;case"A":case"a":r+="a";break;default:r+=`'${i}'`}return r}const ab="esri.core.sql.timeonly";let PX=class Cs{constructor(e,r,i,s){this._hour=e,this._minute=r,this._second=i,this._millisecond=s,this.declaredRootClass=ab}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===ab}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Cs.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Cs(this.hour,this.minute,this.second,this.millisecond)}isValid(){return j1(this.hour)&&j1(this.minute)&&j1(this.second)&&j1(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=ob(e))?Re.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:Bn(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,r,i,s){const n=new Cs(e,r,i,s);return n.isValid()?n:null}static fromReader(e){if(!e)return null;const r=e.split(":");return r.length!==3?null:new Cs(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const r=Math.floor(e/1e3%60),i=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),n=Math.floor(e%1e3);return new Cs(s,i,r,n)}static fromDateJS(e){return new Cs(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Cs(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,r=null){if(e===""||e===null)return null;const i=[];r?(r=ob(r))&&i.push(r):r!==null&&r!==""||(i.push("HH:mm:ss"),i.push("HH:mm:ss.SSS"),i.push("hh:mm:ss a"),i.push("hh:mm:ss.SSS a"),i.push("HH:mm"),i.push("hh:mm a"),i.push("H:mm"),i.push("h:mm a"),i.push("H:mm:ss"),i.push("h:mm:ss a"),i.push("H:mm:ss.SSS"),i.push("h:mm:ss.SSS a"));for(const s of i){const n=Re.fromFormat(e,s);if(n.isValid)return new Cs(n.hour,n.minute,n.second,n.millisecond)}return null}plus(e,r){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Cs.fromDateTime(this.toUTCDateTime().plus({[e]:r}))}return null}toUTCDateTime(){return Re.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const OX=["geometry","scale","timeProperties"];function $1e(t,e){if(e!=null)for(const r of OX)e.hasArcadeDependency(r)&&t.add(r);return t}function T1e(t,e){return KE.create(t,e,null,["$feature","$view"])}function RX(t,e,r){return KE.create(t,e,r,["$feature","$view","$config"])}let KE=class YE{static async create(e,r,i,s){const{arcade:n,Dictionary:o}=await Tl();let l;try{l=n.parseScript(e)}catch(m){throw new I("arcade-bad-expression","Failed to parse arcade script",{script:e,error:m})}const c=n.scriptUsesGeometryEngine(l);c&&await n.enableGeometrySupport(),await n.loadDependentModules(new Set,l,null,!1,c);const d={vars:s.reduce((m,g)=>({...m,[g]:null}),{}),spatialReference:r,useAsync:!1},h=n.compileScript(l,d);let y=null;i!=null&&(y=new o(i),y.immutable=!0);const f=new o;return f.immutable=!1,f.setField("scale",0),new YE(e,n,l,h,r,f,y,o)}constructor(e,r,i,s,n,o,l,c){this.script=e,this._arcade=r,this._syntaxTree=i,this._compiled=s,this._spatialReference=n,this._viewDict=o,this._configDict=l,this._dictionaryCtor=c,this._dependencies=new Map,this._featureReader=new XE,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,r){const i=r.$view?.timeZone;if(r.$view){let s;if(this._viewDict.setField("scale",r.$view.scale),r.$view.timeProperties!=null){const{currentStart:n,currentEnd:o}=r.$view.timeProperties;s=new this._dictionaryCtor({currentStart:n!=null?i!=null?qn.epochToArcadeDate(n,i):qn.unknownEpochToArcadeDate(n):void 0,currentEnd:o!=null?i!=null?qn.epochToArcadeDate(o,i):qn.unknownEpochToArcadeDate(o):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:i})}repurposeFeature(e,r){return this._featureReader.bind(e,r,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},XE=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,r,i){const s=r??new fh(eP(e.attributes));this._boundTarget=e,this._boundSchema.fields=s.fields,this._boundSchema.fieldsIndex=s,this._boundSchema.spatialReference=i}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Xo(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===gl}field(e,r=!0){const i=this._getField(e);if(i){const s=this._boundTarget.attributes[i.name];if(s==null)return null;switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return EX.fromReader(s);case"time-only":case"esriFieldTypeTimeOnly":return PX.fromReader(s);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return qn.fromReaderAsTimeStampOffset(s);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?qn.unknownEpochToArcadeDate(s):qn.epochToArcadeDate(s,this.contextTimeZone??Qn);default:return s}}if(r)throw new Error(`Field ${e} does not exist`);return null}setField(e,r){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:e?.keepGeometryType===!0?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,r=null){return Promise.resolve(this.castAsJson(r))}};function eP(t){const e=[];for(const r in t)e.push({name:r,alias:r,type:typeof t[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let CX=class tP{static async from(e,r,i){const s=e.dictionary_version?B6.parse(e.dictionary_version):null,n=new Set(e.itemsNames),o={};if(r)for(const y in r)o[y]=r[y];if(e.authoringInfo.configuration)for(const y of e.authoringInfo.configuration)o.hasOwnProperty(y.name)||(o[y.name]=y.value);const l=new Set(e.authoringInfo.symbol);for(const y of Object.keys(i))l.delete(y);l.size&&N.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:l});const c=await RX(e.expression,null,o);if(!c)throw new I("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const d=!s||!s.greaterEqual(4,0);d&&N.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:s});const h=new LX(i,d);return new tP(d,n,c,h)}constructor(e,r,i,s){this._requiresFieldCoercionToString=e,this._itemNames=r,this._compiled=i,this._reader=s}get itemNames(){return this._itemNames}evaluate(e,r,i,s){try{return this._reader.bind(e,i,s),this._compiled.evaluate(this._reader,{$view:{scale:r}})}catch(n){N.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:n})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new fh(e);const r=e.map(i=>({...i,type:"esriFieldTypeString"}));return new fh(r)}},LX=class extends XE{constructor(e,r){super(),this._fieldMap=e,this._requiresFieldCoercionToString=r}_getField(e){const r=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(r)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const r=this._getField(e);return r==null||this._boundTarget.attributes[r.name]==null?"":""+this._boundTarget.attributes[r.name]}};const lb={Relative:0,Absolute:1},kX={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Qg={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:lb.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:lb.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function AX(t){return typeof t=="function"}function E1e(t,e,r,i){return AX(t)?t(e,r,i):t}function P1e(t){return[t.r,t.g,t.b,t.a]}const FX=` /-,
`;function ub(t){let e=t.length;for(;e--;)if(!FX.includes(t.charAt(e)))return!1;return!0}function O1e(t,e){const r=[];let i=0,s=-1;do if(s=t.indexOf("[",i),s>=i){if(s>i){const n=t.slice(i,s);r.push([n,null,ub(n)])}if(i=s+1,s=t.indexOf("]",i),s>=i){if(s>i){const n=e[t.slice(i,s)];n&&r.push([null,n,!1])}i=s+1}}while(s!==-1);if(i<t.length){const n=t.slice(i);r.push([n,null,ub(n)])}return r}function R1e(t,e,r){let i="",s=null;for(const n of e){const[o,l,c]=n;if(o!=null&&o!=="")c?s=o:(s!=null&&(i+=s,s=null),i+=o);else{const d=t.readAttribute(l);d!=null&&d!==""&&(s!==null&&(i+=s,s=null),i+=d)}}return rP(i,r)}function C1e(t,e,r,i){let s="",n=null;for(const o of e){const[l,c,d]=o;if(l!=null&&l!=="")d?n=l:(n!=null&&(s+=n,n=null),s+=l);else{let h=c;r!=null&&(h=GX(c,r));const y=t.attributes[h];y!=null&&y!==""&&(n!=null&&(s+=n,n=null),s+=y)}}return rP(s,i)}function rP(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function L1e(t,e,r,i,s,n,o=!0){const l=e/s,c=r/n,d=Math.ceil(l/2),h=Math.ceil(c/2);for(let y=0;y<n;y++)for(let f=0;f<s;f++){const m=4*(f+(o?n-y-1:y)*s);let g=0,v=0,b=0,S=0,$=0,E=0,T=0;const O=(y+.5)*c;for(let C=Math.floor(y*c);C<(y+1)*c;C++){const z=Math.abs(O-(C+.5))/h,q=(f+.5)*l,J=z*z;for(let oe=Math.floor(f*l);oe<(f+1)*l;oe++){let le=Math.abs(q-(oe+.5))/d;const re=Math.sqrt(J+le*le);re>=-1&&re<=1&&(g=2*re*re*re-3*re*re+1,g>0&&(le=4*(oe+C*e),T+=g*t[le+3],b+=g,t[le+3]<255&&(g=g*t[le+3]/250),S+=g*t[le],$+=g*t[le+1],E+=g*t[le+2],v+=g))}}i[m]=S/v,i[m+1]=$/v,i[m+2]=E/v,i[m+3]=T/b}}function NX(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function k1e(t){return t.data?.symbol??null}function A1e(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function F1e(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function N1e(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function DX(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const D1e=(t,e=0)=>t==null||isNaN(t)?e:t,j1e=(t,e)=>t??e,V1e=(t,e)=>t??e,z1e=t=>t.tintColor?NX(t.tintColor):[255,255,255,1];let jX=class{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}};function q1e(t){return new jX(t)}function G1e(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function B1e(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function H1e(t){let e="normal",r="normal";if(t){const i=t.toLowerCase();i.includes("italic")?e="italic":i.includes("oblique")&&(e="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:e,weight:r}}function W1e(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function cb(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const r=cb(e);if(r!=null)return r}break;case"CIMTextSymbol":return cb(t.symbol);case"CIMSolidFill":return t.color}return null}function pb(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const r of e){const i=pb(r);if(i!=null)return i}break}case"CIMTextSymbol":return pb(t.symbol);case"CIMSolidStroke":return t.color}}function Z1e(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function db(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const r=db(e);if(r!==void 0)return r}break;case"CIMTextSymbol":return db(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function J1e(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Q1e(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function K1e(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Y1e=t=>t.includes("data:image/svg+xml");function X1e(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function M4(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function e0e(t,e,r,i,s,n,o=!0){const{infos:l}=n;let c=1,d=0,h=0,y=0,f=1;for(const{absoluteAnchorPoint:v,offsetX:b,offsetY:S,rotation:$,size:E,frameHeight:T,rotateClockWise:O,scaleSymbolsProportionally:C}of l)f=v?1:c,h=yb(b,S,d,f,h),y=hb(b,S,d,f,y),T&&(C||o)&&(c*=E/T),d=fb($,O,d);const m=yb(i,s,d,f,h),g=hb(i,s,d,f,y);return{size:t*c,rotation:fb(e,r,d),offsetX:m,offsetY:g}}function VX(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>VX(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function zX(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...kX[e]];const r=Qg[t];if(!r)throw new Error(`InternalError: default value for type ${t}.`);return r[e]}function UX(t){return t.split(" ").map(e=>Number(e))}function qX(t){return typeof t=="string"?UX(t):t}function t0e(t){return t?.dashTemplate&&(t.dashTemplate=qX(t.dashTemplate)),t}function Kg(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const r of e)if(r.type==="CIMVectorMarker")return Kg(r)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const r of e)if(r.symbol)return Kg(r.symbol)}}return"Normal"}function r0e(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const r of t.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??Qg.CIMVectorMarker.size;i>e&&(e=i);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const r of t.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>e&&(e=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&DX(r.markerPlacement)){const i=r.size??Qg.CIMVectorMarker.size;i>e&&(e=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>e&&(e=i)}}}return e}}}function GX(t,e){if(e!==null){const r=e.get(t);return r?r.name:t}return t}function i0e(t){return t.map(e=>({...e,propertyName:M4(e.propertyName)}))}function s0e(t){const e={};for(const r in t){const i=t[r];e[M4(r)]=i}return e}function hb(t,e,r,i,s){const n=r*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*t+o*e)*i+s}return e*i+s}function yb(t,e,r,i,s){const n=r*Math.PI/180;return n?(Math.cos(n)*t-Math.sin(n)*e)*i+s:t*i+s}function fb(t,e,r){return e?r-t:r+t}function n0e(t,e,r){const i=r==="Color"||r==="TintColor"||r==="ToColor",s=r==="Rotation"||r==="Angle"||r==="ToRotation";let n=e[M4(r)];if(n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=zX(e.type,r.toLowerCase()),n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const l=o[r];l==null||(typeof l=="string"||typeof l=="number"||Array.isArray(l)?(n=l,n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:l,defaultValue:n},n!=null&&(i?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return n}function o0e(t,e,r){if(e[M4(r)]!=null)return!0;if(e.primitiveName!=null){const i=t[e.primitiveName];if(i!=null&&i[r]!=null)return!0}return!1}function a0e(t,e){return Math.max(Math.min((t??e)/100,1),0)}const BX={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let iP=class{constructor(e,r,i,s){this.url=e,this.fieldMap=i,this.dictionaryInfo=s,this._symbolPartCache=new yX(100);const n=async()=>CX.from(await s,r,i);this._evaluator=n()}async getSymbolAsync(e,r,i=!0){const s=await this._evaluator,n=r?.fields??eP(e.attributes),o=s.createDictionaryFieldsIndex(n),l=s.evaluate(e,r?.scale??0,o,r?.spatialReference);if(l==null)return null;const c=kh(e.geometry),d=eb.parse(l,s.itemNames,c),h=c==="esriGeometryPoint"&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,d.partNames,d.overrides,h,r,i,o)}async getSymbolForControlString(e,r,i){const s=await this._evaluator,n=eb.parse(e,s.itemNames,r),o=r==="esriGeometryPoint"&&!i,l=mb(await Promise.all(n.partNames.map(c=>this._getSymbolPart(c))),n.overrides,o);return new sr({data:l})}async _cimPartsToCIMSymbol(e,r,i,s,n,o,l){const c=r.map(y=>this._getSymbolPart(y,n));let d=await Promise.all(c);if(o&&this.fieldMap&&d.length>0){const{OverrideHelper:y}=await R(()=>import("./money-tides-OverrideHelper-CK3ryWwX.js"),__vite__mapDeps([213,124,4,214,3,1,2,5,6,7,26,12,13,14]));d=P(d);for(const f of d)y.applyDictionaryTextOverrides(f,e,this.fieldMap,l,Kg(f))}const h=mb(d,i,s);return new sr({data:h})}async _fetchSymbolPart(e,r){const i=await this.dictionaryInfo,s=(this.url+"/"+i.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:n}=await Te(s,{responseType:"json",query:{f:"json"},...r});return n}async _getSymbolPart(e,r){let i=this._symbolPartCache.get(e);return i||(i=this._fetchSymbolPart(e,r),this._symbolPartCache.put(e,i)),i}};function mb(t,e,r){if(!t||t.length===0)return null;const i={...t[0]};if(t.length>1){i.effects=null,i.symbolLayers=[];for(const s of t){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);i.symbolLayers.unshift(...n.symbolLayers)}}return r&&(i.callout=BX),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:e}}var Yg;let is=Yg=class extends lp(mi){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new iP(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,r,i){i?.origin||super.writeVisualVariables(t,e,r,i)}clone(){return new Yg({config:P(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:P(this.fieldMap),url:P(this.url),visualVariables:P(this.visualVariables)})}async getSymbolAsync(t,e,r=!0){return this._loader.getSymbolAsync(t,e,r)}async getSymbolForControlString(t,e,r){return this._loader.getSymbolForControlString(t,e,r)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await cr(t,e,null,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];e.has(i)&&t.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await Te(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};a([u({type:iP})],is.prototype,"_loader",null),a([u({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],is.prototype,"config",void 0),a([u({type:Object,json:{write:!0}})],is.prototype,"fieldMap",void 0),a([u({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],is.prototype,"scaleExpression",void 0),a([j("scaleExpression")],is.prototype,"writeData",null),a([u({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],is.prototype,"scaleExpressionTitle",void 0),a([u({type:String,json:{write:!0}})],is.prototype,"url",void 0),a([j("visualVariables")],is.prototype,"writeVisualVariables",null),is=Yg=a([_("esri.renderers.DictionaryRenderer")],is);var Xg;let xn=Xg=class extends F{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(N.getLogger(this).error(".field: field must be a string value"),null):z2(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new Xg({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};a([u({type:K,json:{type:[Number],write:!0}})],xn.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],xn.prototype,"field",void 0),a([xe("field")],xn.prototype,"castField",null),a([u({type:String,json:{write:!0}})],xn.prototype,"label",void 0),a([u({type:String,json:{write:!0}})],xn.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],xn.prototype,"valueExpressionTitle",void 0),xn=Xg=a([_("esri.renderers.support.AttributeColorInfo")],xn);const sP=xn;var e5;let Y0=e5=class extends F{constructor(){super(...arguments),this.unit=null}clone(){return new e5({unit:this.unit})}};a([u({type:String,json:{write:!0}})],Y0.prototype,"unit",void 0),Y0=e5=a([_("esri.renderers.support.DotDensityLegendOptions")],Y0);const HX=Y0;var t5;let kr=t5=class extends lp(mi){constructor(t){super(t),this.attributes=null,this.backgroundColor=new K([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new dt,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(t){super.visualVariables=t}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new hi({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new t5({attributes:P(this.attributes),backgroundColor:P(this.backgroundColor),dotBlendingEnabled:P(this.dotBlendingEnabled),dotShape:P(this.dotShape),dotSize:P(this.dotSize),dotValue:P(this.dotValue),legendOptions:P(this.legendOptions),outline:P(this.outline),referenceScale:P(this.referenceScale),seed:P(this.seed),visualVariables:P(this.visualVariables),authoringInfo:P(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const r of this.attributes??[])r.valueExpression&&await cr(t,e,null,r.valueExpression),r.field&&t.add(r.field)}};a([u({type:[sP],json:{write:!0}})],kr.prototype,"attributes",void 0),a([u({type:K,json:{write:!0}})],kr.prototype,"backgroundColor",void 0),a([u({type:Boolean,json:{write:!0}})],kr.prototype,"dotBlendingEnabled",void 0),a([u({type:String,json:{write:!1}})],kr.prototype,"dotShape",void 0),a([u({type:Number,json:{write:!0}})],kr.prototype,"dotSize",void 0),a([u({type:HX,json:{write:!0}})],kr.prototype,"legendOptions",void 0),a([u({type:dt,json:{default:null,write:!0}})],kr.prototype,"outline",void 0),a([u({type:Number,json:{write:!0}})],kr.prototype,"dotValue",void 0),a([u({type:Number,json:{write:!0}})],kr.prototype,"referenceScale",void 0),a([u({type:Number,json:{write:!0}})],kr.prototype,"seed",void 0),a([te({dotDensity:"dot-density"})],kr.prototype,"type",void 0),kr=t5=a([_("esri.renderers.DotDensityRenderer")],kr);var r5;let Uo=r5=class extends F{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new r5({color:this.color&&this.color.clone(),ratio:this.ratio})}};a([u({type:K,json:{type:[ve],default:null,write:{isRequired:!0}}})],Uo.prototype,"color",void 0),a([u({type:Number,json:{write:{isRequired:!0}}})],Uo.prototype,"ratio",void 0),Uo=r5=a([_("esri.renderers.support.HeatmapColorStop")],Uo);let Au=class extends de(F){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};a([u({type:String,json:{write:!0}})],Au.prototype,"minLabel",void 0),a([u({type:String,json:{write:!0}})],Au.prototype,"maxLabel",void 0),a([u({type:String,json:{write:!0}})],Au.prototype,"title",void 0),Au=a([_("esri.renderers.support.HeatmapLegendOptions")],Au);function WX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ZX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function JX(t,e,r,i,s){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t}function QX(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function nP(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function oP(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function aP(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function KX(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function YX(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function XX(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function eee(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function tee(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function ree(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function iee(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t}function lP(t,e){const r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(r*r+i*i+s*s+n*n)}function uP(t,e){const r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return r*r+i*i+s*s+n*n}function cP(t){const e=t[0],r=t[1],i=t[2],s=t[3];return Math.sqrt(e*e+r*r+i*i+s*s)}function pP(t){const e=t[0],r=t[1],i=t[2],s=t[3];return e*e+r*r+i*i+s*s}function see(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function nee(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function oee(t,e){const r=e[0],i=e[1],s=e[2],n=e[3];let o=r*r+i*i+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=i*o,t[2]=s*o,t[3]=n*o),t}function aee(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function dP(t,e,r,i){const s=e[0],n=e[1],o=e[2],l=e[3];return t[0]=s+i*(r[0]-s),t[1]=n+i*(r[1]-n),t[2]=o+i*(r[2]-o),t[3]=l+i*(r[3]-l),t}function lee(t,e=1){const r=e4;let i,s,n,o,l,c;do i=2*r()-1,s=2*r()-1,l=i*i+s*s;while(l>=1);do n=2*r()-1,o=2*r()-1,c=n*n+o*o;while(c>=1);const d=Math.sqrt((1-l)/c);return t[0]=e*i,t[1]=e*s,t[2]=e*n*d,t[3]=e*o*d,t}function uee(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3];return t[0]=r[0]*i+r[4]*s+r[8]*n+r[12]*o,t[1]=r[1]*i+r[5]*s+r[9]*n+r[13]*o,t[2]=r[2]*i+r[6]*s+r[10]*n+r[14]*o,t[3]=r[3]*i+r[7]*s+r[11]*n+r[15]*o,t}function cee(t,e,r){const i=e[0],s=e[1],n=e[2],o=r[0],l=r[1],c=r[2],d=r[3],h=d*i+l*n-c*s,y=d*s+c*i-o*n,f=d*n+o*s-l*i,m=-o*i-l*s-c*n;return t[0]=h*d+m*-o+y*-c-f*-l,t[1]=y*d+m*-l+f*-o-h*-c,t[2]=f*d+m*-c+h*-l-y*-o,t[3]=e[3],t}function pee(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function dee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function hee(t,e){const r=t[0],i=t[1],s=t[2],n=t[3],o=e[0],l=e[1],c=e[2],d=e[3],h=Mr();return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=h*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-d)<=h*Math.max(1,Math.abs(n),Math.abs(d))}const yee=nP,fee=oP,mee=aP,gee=lP,vee=uP,wee=cP,bee=pP;Object.freeze(Object.defineProperty({__proto__:null,add:QX,ceil:KX,copy:WX,copyVec3:ZX,dist:gee,distance:lP,div:mee,divide:aP,dot:aee,equals:hee,exactEquals:dee,floor:YX,inverse:nee,len:wee,length:cP,lerp:dP,max:eee,min:XX,mul:fee,multiply:oP,negate:see,normalize:oee,random:lee,round:tee,scale:ree,scaleAndAdd:iee,set:JX,sqrDist:vee,sqrLen:bee,squaredDistance:uP,squaredLength:pP,str:pee,sub:yee,subtract:nP,transformMat4:uee,transformQuat:cee},Symbol.toStringTag,{value:"Module"}));function E4(){return[0,0,0,0]}function _ee(t){return[t[0],t[1],t[2],t[3]]}function up(t,e,r,i){return[t,e,r,i]}function See(t,e,r,i){return[t,e,r,i]}function xee(t,e=E4()){const r=Math.min(4,t.length);for(let i=0;i<r;++i)e[i]=t[i];return e}function hP(){return E4()}function yP(){return up(1,1,1,1)}function fP(){return up(1,0,0,0)}function mP(){return up(0,1,0,0)}function gP(){return up(0,0,1,0)}function vP(){return up(0,0,0,1)}const $ee=hP(),Tee=yP(),Iee=fP(),Mee=mP(),Eee=gP(),Pee=vP();Object.freeze(Object.defineProperty({__proto__:null,ONES:Tee,UNIT_W:Pee,UNIT_X:Iee,UNIT_Y:Mee,UNIT_Z:Eee,ZEROS:$ee,clone:_ee,create:E4,freeze:See,fromArray:xee,fromValues:up,ones:yP,unitW:vP,unitX:fP,unitY:mP,unitZ:gP,zeros:hP},Symbol.toStringTag,{value:"Module"}));const f9=2.4;function Oee(t){return qi(t*f9)}function Ree(t){return GN(t)/f9}function Cee(t,e,r,i){let{color:s,ratio:n}=e,{color:o,ratio:l}=r;l===n&&(l===1?n-=1e-6:l+=1e-6);const c=bi((i-n)/(l-n),0,1);dP(t,s.toArray(),o.toArray(),c)}function c0e(t){const r=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:l})=>l>=0&&l<=1).sort((l,c)=>l.ratio-c.ratio).map(({color:l,ratio:c})=>({color:l,ratio:Math.max(c,.001)})),t.length<1)return r;let i=t[0],s=t[0],n=1;const o=E4();for(let l=0;l<512;l++){const c=(l+.5)/512;for(;c>s.ratio&&n<t.length;)i=s,s=t[n++];Cee(o,i,s,c),r.set(o,4*l)}return r}function p0e(t,e,r){const i=Math.sqrt(t**2+e**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function d0e(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var i5;function gb(t){if(t!=null){const{maxDensity:e,minDensity:r,radius:i}=t;if(e!=null||r!=null||i!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...l}=t;return l}}return t}let $t=i5=class extends mi{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Uo({ratio:0,color:new K("rgba(255, 140, 0, 0)")}),new Uo({ratio:.75,color:new K("rgba(255, 140, 0, 1)")}),new Uo({ratio:.9,color:new K("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return gb(t)}get blurRadius(){return Ree(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",Oee(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(f9**2*this.blurRadius**4)}read(t,e){t=gb(t),super.read(t,e)}getSymbol(){return new bt}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&ur(t,e,r),i&&typeof i=="string"&&await cr(t,e,null,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new i5({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:P(this.colorStops),field:this.field,legendOptions:P(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};a([u({type:qe,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],$t.prototype,"authoringInfo",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$t.prototype,"blurRadius",null),a([u({type:[Uo],json:{write:{isRequired:!0}}})],$t.prototype,"colorStops",void 0),a([u({type:String,json:{write:!0}})],$t.prototype,"field",void 0),a([u({type:Au,json:{write:!0}})],$t.prototype,"legendOptions",void 0),a([u({type:Number,json:{write:!0}})],$t.prototype,"maxDensity",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$t.prototype,"maxPixelIntensity",null),a([u({type:Number,json:{write:!0}})],$t.prototype,"minDensity",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$t.prototype,"minPixelIntensity",null),a([u({type:Number,cast:_e,json:{write:!0}})],$t.prototype,"radius",void 0),a([u({type:Number,range:{min:0},json:{default:0,write:!0}})],$t.prototype,"referenceScale",void 0),a([te({heatmap:"heatmap"})],$t.prototype,"type",void 0),a([u({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],$t.prototype,"valueExpression",void 0),a([u({type:String})],$t.prototype,"valueExpressionTitle",void 0),a([u({readOnly:!0})],$t.prototype,"_pixelIntensityToDensity",null),$t=i5=a([_("esri.renderers.HeatmapRenderer")],$t);let Za=class extends de(F){constructor(){super(...arguments),this.color=new K([0,0,0,0]),this.label=null,this.threshold=0}};a([u({type:K,json:{write:!0}})],Za.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],Za.prototype,"label",void 0),a([u({type:Number,range:{min:0,max:1},json:{write:!0}})],Za.prototype,"threshold",void 0),Za=a([_("esri.renderers.support.OthersCategory")],Za);const Lee={base:tr,key:"type",typeMap:{size:Se,opacity:Vn}};let Ar=class extends lp(de(mi)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new K([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Za,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new bt({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(wi)}getAttributeHash(){return this.visualVariables?.reduce((e,r)=>e+r.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,r)=>e+JSON.stringify(r),"")}async collectRequiredFields(e,r){await this.collectVVRequiredFields(e,r);for(const i of this.attributes)i.valueExpression&&await cr(e,r,null,i.valueExpression),i.field&&e.add(i.field)}};a([u({type:[sP],json:{write:!0}})],Ar.prototype,"attributes",void 0),a([u(i9)],Ar.prototype,"backgroundFillSymbol",void 0),a([u({type:K,json:{write:!0}})],Ar.prototype,"defaultColor",void 0),a([u({type:String,json:{write:!0}})],Ar.prototype,"defaultLabel",void 0),a([u({type:Number,range:{min:0,max:1},json:{write:!0}})],Ar.prototype,"holePercentage",void 0),a([u({type:Za,json:{write:!0}})],Ar.prototype,"othersCategory",void 0),a([u({type:s9,json:{write:!0}})],Ar.prototype,"legendOptions",void 0),a([u({type:dt,json:{default:null,write:!0}})],Ar.prototype,"outline",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Ar.prototype,"size",void 0),a([te({pieChart:"pie-chart"})],Ar.prototype,"type",void 0),a([u({types:[Lee]})],Ar.prototype,"visualVariables",void 0),Ar=a([_("esri.renderers.PieChartRenderer")],Ar);const cp={key:"type",base:mi,typeMap:{heatmap:$t,simple:Sr,"unique-value":Ae,"class-breaks":ut,"dot-density":kr,dictionary:is,"pie-chart":Ar},errorContext:"renderer"},wP={key:"type",base:mi,typeMap:{simple:Sr,"unique-value":Ae,"class-breaks":ut,heatmap:$t},errorContext:"renderer",validate:kee};function kee(t){switch(t.type){case"simple":return Aee(t);case"unique-value":return Fee(t);case"class-breaks":return Nee(t);case"heatmap":return t}}function Aee(t){if(t.symbol)return t;N.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Fee(t){const e=t.uniqueValueInfos,r=e?.filter(({symbol:i,label:s},n)=>(i||N.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!i));return r?.length!==e?.length&&(t.uniqueValueInfos=r),t}function Nee(t){const e=t.classBreakInfos,r=e?.filter(({symbol:i,label:s},n)=>(i||N.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!i));return r?.length!==e?.length&&(t.classBreakInfos=r),t}function f0e(t,e){return mh(t,null,e)}const Dee=Sh({types:cp});function mh(t,e,r){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(r?.messages&&r.messages.push(new vs("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:r})),null):Dee(t,e,r):null}var s5;let Ut=s5=class extends Ho{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=_e("12px"),this.fields=[],this.renderer=null}writeFields(t,e,r){const i=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Kr(r,i,e)}readRenderer(t,e,r){const i=e.drawingInfo?.renderer;return i?mh(i,e,r)??void 0:o9(e,r)}clone(){return new s5({fields:P(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:P(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:P(this.popupTemplate),renderer:P(this.renderer),binType:P(this.binType),size:this.size})}};a([te({binning:"binning"})],Ut.prototype,"type",void 0),a([te({geohash:"geohash",square:"square"}),u({type:["geohash","square"]})],Ut.prototype,"binType",void 0),a([u({type:Number,json:{write:!0}})],Ut.prototype,"fixedBinLevel",void 0),a([u({type:[Fe],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Ut.prototype,"labelingInfo",void 0),a([u(_4)],Ut.prototype,"labelsVisible",void 0),a([u({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Ut.prototype,"maxScale",void 0),a([u(Zh)],Ut.prototype,"popupEnabled",void 0),a([u({type:oa,json:{name:"popupInfo",write:!0}})],Ut.prototype,"popupTemplate",void 0),a([u({cast:t=>t==="auto"?t:Ur(_e(t))})],Ut.prototype,"size",void 0),a([u({type:[ir],json:{write:!0}})],Ut.prototype,"fields",void 0),a([j("fields")],Ut.prototype,"writeFields",null),a([u({types:cp,json:{write:{target:"drawingInfo.renderer"}}})],Ut.prototype,"renderer",void 0),a([A("renderer",["drawingInfo.renderer"])],Ut.prototype,"readRenderer",null),Ut=s5=a([_("esri.layers.support.FeatureReductionBinning")],Ut);var n5;function vb(t){return t.type==="simple"&&!t.visualVariables?.length}let ct=n5=class extends F{constructor(t){super(t),this.type="cluster",this.clusterRadius=_e("80px"),this.clusterMinSize=_e("12px"),this.clusterMaxSize=_e("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,r){const i=e.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i?vb(i)?null:mh(i,e,r)??void 0:o9(e,r)}readSymbol(t,e,r){const i=e.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i&&vb(i)?mh(i,e,r)?.symbol:null}writeSymbol(t,e,r,i){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const n=new Sr({symbol:t});e.drawingInfo={renderer:n.write({},i)}}}writeFields(t,e,r){const i=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Kr(r,i,e)}readFields(t,e,r){return t.filter(i=>!i.isAutoGenerated).map(i=>ir.fromJSON(i))}clone(){return new n5({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:P(this.labelingInfo),labelsVisible:this.labelsVisible,fields:P(this.fields),maxScale:this.maxScale,renderer:P(this.renderer),symbol:P(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:P(this.popupTemplate)})}};a([u({type:["cluster"],readOnly:!0,json:{write:!0}})],ct.prototype,"type",void 0),a([u({cast:t=>t==="auto"?t:Ur(_e(t)),json:{write:!0}})],ct.prototype,"clusterRadius",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],ct.prototype,"clusterMinSize",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],ct.prototype,"clusterMaxSize",void 0),a([u({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ct.prototype,"maxScale",void 0),a([u(Zh)],ct.prototype,"popupEnabled",void 0),a([u({type:oa,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ct.prototype,"popupTemplate",void 0),a([u({types:cp,json:{write:{target:"drawingInfo.renderer"}}})],ct.prototype,"renderer",void 0),a([A("renderer",["drawingInfo.renderer"])],ct.prototype,"readRenderer",null),a([u({types:uU})],ct.prototype,"symbol",void 0),a([A("symbol",["drawingInfo.renderer"])],ct.prototype,"readSymbol",null),a([j("symbol")],ct.prototype,"writeSymbol",null),a([u({type:[Fe],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ct.prototype,"labelingInfo",void 0),a([u(_4)],ct.prototype,"labelsVisible",void 0),a([u({type:[ir],json:{write:!0}})],ct.prototype,"fields",void 0),a([j("fields")],ct.prototype,"writeFields",null),a([A("fields")],ct.prototype,"readFields",null),ct=n5=a([_("esri.layers.support.FeatureReductionCluster")],ct);var o5;let Vd=o5=class extends Ho{constructor(t){super(t),this.type="selection"}clone(){return new o5}};a([u({type:["selection"]})],Vd.prototype,"type",void 0),Vd=o5=a([_("esri.layers.support.FeatureReductionSelection")],Vd);const wb={key:"type",base:Ho,typeMap:{cluster:ct,binning:Ut}},jee={types:{key:"type",base:Ho,typeMap:{selection:Vd,cluster:ct,binning:Ut}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:wb},"portal-item":{types:wb},"web-scene":{types:{key:"type",base:Ho,typeMap:{selection:Vd}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:ke}}}}},Vee=()=>N.getLogger("esri.views.2d.layers.support.clusterUtils");ie.add("esri-cluster-arcade-enabled",!0);const zee=ie("esri-cluster-arcade-enabled"),Uee=new Set(["simple-line","simple-fill","picture-fill"]);function bb(t,e){let r=e.clone();if(!qee(r))return r;if(e.symbols.some(i=>Uee.has(i.type))&&(r=new Sr({symbol:new bt})),r.authoringInfo||(r.authoringInfo=new qe),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");i.forEach(s=>{s.type==="rotation"?s.field?s.field=va(t,s.field,"avg_angle","number"):s.valueExpression&&(s.field=Ep(t,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=va(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=va(t,s.field,"avg","number"):s.valueExpression&&(s.field=Ep(t,s.valueExpression,"avg","number"),s.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=va(t,i.field,"sum","number"):i.valueExpression&&(i.field=Ep(t,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=va(t,r.field,"mode","string"):r.valueExpression&&(r.field=Ep(t,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=va(t,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=va(t,r.field,"avg","number"):r.valueExpression&&(r.field=Ep(t,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const qee=t=>{const e=r=>Vee().error(new I("Unsupported-renderer",r,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const r=t.normalizationType;if(r!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!zee){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Gee(t,e,r){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const i=r,s="field",n=e.toLowerCase()+",norm:"+s+","+i.toLowerCase();return"cluster_avg_"+W5(n)}}}function Ep(t,e,r,i){const s=W5(e),n=r==="mode"?`cluster_type_${s}`:r==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some(o=>o.name===n)||t.push(new ir({name:n,isAutoGenerated:!0,onStatisticExpression:new Lo({expression:e,returnType:i}),statisticType:r})),n}function va(t,e,r,i,s){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const n=Gee(r,e,s);return t.some(o=>o.name===n)||(r==="avg_norm"?t.push(new ir({name:n,isAutoGenerated:!0,onStatisticExpression:new Lo({expression:`$feature.${e} / $feature.${s}`,returnType:i}),statisticType:"avg"})):t.push(new ir({name:n,isAutoGenerated:!0,onStatisticField:e,statisticType:r}))),n}const Bee=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.aggregateGraphicOrigin=new WY(this),this.addHandles(X(()=>this.renderer,()=>{if(this.featureReduction){const s=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",s)}},ht))}set featureReduction(i){const s=this._normalizeFeatureReduction(i);this._set("featureReduction",s)}set renderer(i){}_withClusterVariable(i,s,n){const o=i.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(l=>l.type==="size")||o.visualVariables.push(new Se({field:"cluster_count",stops:[new ps({value:1}),new ps({useMinValue:!0,size:s}),new ps({useMaxValue:!0,size:n})]}))),o}_normalizeFeatureReduction(i){if(i?.type!=="cluster")return i;const s=i.clone(),n=[new ir({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(s.fields??[]).filter(f=>!f.isAutoGenerated),l=i.renderer&&!i.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:c,clusterMaxSize:d}=s;if(l){s.fields=[...n,...o];const f=this._withClusterVariable(s.renderer,c,d);return s.effectiveFeatureRenderer=f,s.effectiveClusterRenderer=f,s}if(i.symbol){if(s.fields=[...n,...o],s.renderer=null,!this.renderer)return s.effectiveFeatureRenderer=null,s.effectiveClusterRenderer=null,s;const f=bb(n,this.renderer),m=this._withClusterVariable(f,c,d),g="visualVariables"in m&&m.visualVariables?m.visualVariables:[],v=new Sr({symbol:i.symbol,visualVariables:g});return s.fields=[...n,...o],s.effectiveFeatureRenderer=m,s.effectiveClusterRenderer=v,s}if(!this.renderer)return i;const h=bb(n,this.renderer);s.fields=[...n,...o],s.renderer=h;const y=this._withClusterVariable(h,c,d);return s.effectiveFeatureRenderer=y,s.effectiveClusterRenderer=y,s}};return a([u({readOnly:!0,clonable:!1})],r.prototype,"aggregateGraphicOrigin",void 0),a([u(jee)],r.prototype,"featureReduction",null),r=a([_("esri.layers.mixins.FeatureReductionLayer")],r),r},_b={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Sb={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},xb={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Hee={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":_b,"web-map/basemap-base-layers":Sb,"web-map/tables":xb,"link-chart/operational-layers":{..._b,LinkChartLayer:!0},"link-chart/basemap-base-layers":Sb,"link-chart/tables":xb,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},P4=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,s,n){return n?.portalItem?.type==="Group Layer"?void 0:i}writeListMode(i,s,n,o){(o&&o.layerContainerType==="ground"||i&&L_(this,n,{},o))&&(s[n]=i)}writeOperationalLayerType(i,s,n){i&&(s[n]=i)}writeTitle(i,s){s.title=i??"Layer"}readVisibilityTimeExtent(i){return i?it.fromArray(i):null}writeVisibilityTimeExtent(i,s,n,o){i&&o.layerContainerType!=="tables"&&(i.isEmpty?o?.messages&&o.messages.push(new I("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):s[n]=i.toArray())}read(i,s){s&&(s.layer=this),EC(this,i,n=>super.read(i,n),s)}write(i,s){if(!this.persistenceEnabled&&!s?.ignorePersistenceEnabled)return null;if(s?.origin){const l=`${s.origin}/${s.layerContainerType||"operational-layers"}`;let d=!!Hee[l]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(d=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(d=!1),!d)return s.messages?.push(new I("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(i,{...s,layer:this}),o=!!s&&!!s.messages&&!!s.messages.filter(l=>l instanceof I&&l.name==="web-document-write:property-required").length;return S5(n?.url)?(s?.messages?.push(new I("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return a([u({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,"id",void 0),a([A("id",["id"])],r.prototype,"readId",null),a([u(pE)],r.prototype,"listMode",void 0),a([j("listMode")],r.prototype,"writeListMode",null),a([u({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:ke,isRequired:!0}}}}})],r.prototype,"operationalLayerType",void 0),a([j("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),a([u(wg)],r.prototype,"opacity",void 0),a([u({type:Boolean,readOnly:!1})],r.prototype,"persistenceEnabled",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],r.prototype,"title",void 0),a([j("title"),j(["web-scene"],"title")],r.prototype,"writeTitle",null),a([u({type:it,json:{origins:{"web-scene":{write:{layerContainerTypes:ke}}}}})],r.prototype,"visibilityTimeExtent",void 0),a([A("visibilityTimeExtent")],r.prototype,"readVisibilityTimeExtent",null),a([j(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[ve,cC]]}})],r.prototype,"writeVisibilityTimeExtent",null),a([u({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:ke}}})],r.prototype,"visible",void 0),r=a([_("esri.layers.mixins.OperationalLayer")],r),r};var a5;const V1=new be({asc:"ascending",desc:"descending"});var Oc;let ko=(Oc=class extends F{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new a5({field:this.field,valueExpression:this.valueExpression,order:this.order})}},a5=Oc,Oc);a([u({type:String,json:{write:!0}})],ko.prototype,"field",void 0),a([u({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],ko.prototype,"valueExpression",void 0),a([u({type:V1.apiValues,json:{type:V1.jsonValues,read:V1.read,write:V1.write}})],ko.prototype,"order",void 0),ko=a5=a([_("esri.layers.support.OrderByInfo")],ko);function bP(t,e,r){if(!t)return null;const i=t.find(n=>!!n.field);if(!i)return null;const s=new ko;return s.read(i,r),[s]}function Wee(t,e,r,i){const s=t.find(n=>!!n.field);s&&Kr(r,[s.toJSON()],e)}const Zee={type:[ko],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:bP},write:{writer:Wee}}},Jee=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.orderBy=null}};return a([u(Zee)],r.prototype,"orderBy",void 0),r=a([_("esri.layers.mixins.OrderedLayer")],r),r},O4=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=st(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,n){if(s.itemId)return new ae({id:s.itemId,portal:n?.portal})}writePortalItem(i,s){i?.id&&(s.itemId=i.id)}async loadFromPortal(i,s){if(this.portalItem?.id)try{const{load:n}=await R(()=>import("./money-tides-layersLoader-DutP-fjV.js"),__vite__mapDeps([319,3,4,1,2,5,6,7,320,12,13,14]));return Ce(s),await n({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},s)}catch(n){throw vi(n)||N.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(nr(s),!0)))}async setUserPrivileges(i,s){if(!Hr.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:n,fullEdit:o},content:{updateItem:l}}=await this._fetchUserPrivileges(i,s);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",l)}catch(n){nr(n)}}async _fetchUserPrivileges(i,s){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(s);const o=!nt?.findCredential(this.url),l=i===n.id;if(l&&n.portal.user)return this._getUserPrivileges(n,o);let c,d;if(l)c=n.portal.url;else try{c=await q5(this.url,s)}catch(m){nr(m)}if(!c||!pC(c,n.portal.url))return this._fetchFallbackUserPrivileges(s);try{const m=s!=null?s.signal:null;d=await nt?.getCredential(`${c}/sharing`,{prompt:!1,signal:m})}catch(m){nr(m)}const h=!0,y=!1,f=!1;if(!d)return{features:{edit:h,fullEdit:y},content:{updateItem:f}};try{if(l?await n.reload():(n=new ae({id:i,portal:{url:c}}),await n.load(s)),n.portal.user)return this._getUserPrivileges(n,o)}catch(m){nr(m)}return{features:{edit:h,fullEdit:y},content:{updateItem:f}}}_getUserPrivileges(i,s){const n=BY(i);return s&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(i){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(i)}catch(n){nr(n)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const s=this.url?nt?.findCredential(this.url):null;if(!s)return!0;const n=z1.credential===s?z1.user:await this._fetchEditingUser(i);return z1.credential=s,z1.user=n,n?.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){const s=this.portalItem?.portal?.user;if(s)return s;const n=nt?.findServerInfo(this.url??"");if(!n?.owningSystemUrl)return null;const o=`${n.owningSystemUrl}/sharing/rest`,l=D.getDefault();if(l&&l.loaded&&Hd(l.restUrl)===Hd(o))return l.user;const c=`${o}/community/self`,d=i!=null?i.signal:null,h=await B2(Te(c,{authMode:"no-prompt",query:{f:"json"},signal:d}));return h.ok?Ee.fromJSON(h.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){const n=s?.portal,o=this.portalItem?.id&&(this.portalItem.portal||D.getDefault());return n&&o&&!b_(o.restUrl,n.restUrl)?(s.messages&&s.messages.push(new I("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return a([u({type:ae})],r.prototype,"portalItem",null),a([A("web-document","portalItem",["itemId"])],r.prototype,"readPortalItem",null),a([j("web-document","portalItem",{itemId:{type:String}})],r.prototype,"writePortalItem",null),a([u({clonable:!1})],r.prototype,"resourceReferences",void 0),a([u({type:Boolean,readOnly:!0})],r.prototype,"userHasEditingPrivileges",void 0),a([u({type:Boolean,readOnly:!0})],r.prototype,"userHasFullEditingPrivileges",void 0),a([u({type:Boolean,readOnly:!0})],r.prototype,"userHasUpdateItemPrivileges",void 0),r=a([_("esri.layers.mixins.PortalLayer")],r),r},z1={credential:null,user:null};let hd=class extends Z{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};a([u()],hd.prototype,"updating",void 0),a([u()],hd.prototype,"status",void 0),hd=a([_("esri.layers.support.PublishingInfo")],hd);const Qee=Symbol(),Kee=t=>{var s;var e;const r=t;let i=(s=class extends r{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const o=new hd;return this._checkPublishingStatus(o),o}_checkPublishingStatus(n){let c=0;const d=async y=>{let f;n.updating=!0;try{f=await this.fetchPublishingStatus()}catch{f="unavailable"}f!=="published"&&f!=="unavailable"||(n.status==="publishing"&&this.refresh(),h.remove()),n.status=f,n.updating=!1,h.removed||(c=setTimeout(d,y,y+125))},h={removed:!1,remove(){this.removed=!0,clearTimeout(c)}};this.when().catch(()=>h.remove()),d(250),this.addHandles(h)}},e=Qee,s);return a([u({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=a([_("esri.layers.mixins.PublishableLayer")],i),i},qo=new U,zd=new WeakMap;function Yee(t){ete(t)&&qo.push(new WeakRef(t))}function Xee(t){const e=qo.find(r=>r.deref()===t);e&&qo.remove(e)}function ete(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function _P(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:_P(e,t%e):0}let Xy=0,U1=0;function tte(){const t=Date.now();let e=!1;for(const r of qo){const i=r.deref();i?i.refreshInterval&&t-(zd.get(i)??0)+5>=6e4*i.refreshInterval&&(zd.set(i,t),i.refresh(t)):e=!0}if(e)for(let r=qo.length-1;r>=0;r--)qo.at(r).deref()||qo.removeAt(r)}y_(()=>{const t=Date.now();let e=0;for(const r of qo){const i=r.deref();i&&(e=_P(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?zd.get(i)||zd.set(i,t):zd.delete(i))}if(e!==U1){if(U1=e,clearInterval(Xy),U1===0)return void(Xy=0);Xy=setInterval(tte,U1)}},ht);const $b=.1,m9=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=U2(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Yee(this)},()=>{})}destroy(){Xee(this)}castRefreshInterval(i){return i>=$b?i:i<=0?0:$b}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Zd(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{N.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}get test(){}};return a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:ke}}}}})],r.prototype,"refreshInterval",void 0),a([xe("refreshInterval")],r.prototype,"castRefreshInterval",null),a([u({readOnly:!0})],r.prototype,"refreshTimestamp",void 0),a([u({readOnly:!0})],r.prototype,"refreshParameters",null),r=a([_("esri.layers.mixins.RefreshableLayer")],r),r},Qh=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s?.effectiveScaleRange!==void 0&&rte(i,s.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return a([u({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,"minScale",void 0),a([u({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,"maxScale",void 0),a([u({readOnly:!0})],r.prototype,"effectiveScaleRange",null),r=a([_("esri.layers.mixins.ScaleRangeLayer")],r),r};function rte(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const SP=Wt()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Gn=class extends de(F){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return fS(this.value,this.unit,"milliseconds")}};a([te(SP,{nonNullable:!0})],Gn.prototype,"unit",void 0),a([u({type:Number,json:{write:!0},nonNullable:!0})],Gn.prototype,"value",void 0),Gn=a([_("esri.time.TimeInterval")],Gn);function Tb(t,e){return Gn.fromJSON({value:t,unit:e})}let At=class extends de(F){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?it.fromArray(r.timeExtent):null}writeFullTimeExtent(e,r){e?.start!=null&&e.end!=null?r.timeExtent=e.toArray():r.timeExtent=null}readInterval(e,r){return r.timeInterval&&r.timeIntervalUnits?Tb(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?Tb(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(e,r){r.timeInterval=e?.toJSON().value??null,r.timeIntervalUnits=e?.toJSON().unit??null}};a([u({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],At.prototype,"cumulative",void 0),a([u({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],At.prototype,"endField",void 0),a([u({type:it,json:{write:{enabled:!0,allowNull:!0}}})],At.prototype,"fullTimeExtent",void 0),a([A("fullTimeExtent",["timeExtent"])],At.prototype,"readFullTimeExtent",null),a([j("fullTimeExtent")],At.prototype,"writeFullTimeExtent",null),a([u({type:Boolean,json:{write:!0}})],At.prototype,"hasLiveData",void 0),a([u({type:Gn,json:{write:{enabled:!0,allowNull:!0}}})],At.prototype,"interval",void 0),a([A("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],At.prototype,"readInterval",null),a([j("interval")],At.prototype,"writeInterval",null),a([u({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],At.prototype,"startField",void 0),a([u(Vc("timeReference",!0))],At.prototype,"timeZone",void 0),a([u({type:String,json:{write:{enabled:!0,allowNull:!0}}})],At.prototype,"trackIdField",void 0),a([u({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],At.prototype,"useTime",void 0),a([u({type:[Date],json:{read:!1}})],At.prototype,"stops",void 0),At=a([_("esri.layers.support.TimeInfo")],At);const ite={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:ke}}},g9=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const n=s.timeInfo.exportOptions;if(!n)return null;const o=n.timeOffset,l=SP.fromJSON(n.timeOffsetUnits);return o&&l?new Gn({value:o,unit:l}):null}set timeInfo(i){E$(i,this.fieldsIndex),this._set("timeInfo",i)}};return a([u({type:it,json:{write:!1}})],r.prototype,"timeExtent",void 0),a([u({type:Gn})],r.prototype,"timeOffset",void 0),a([A("service","timeOffset",["timeInfo.exportOptions"])],r.prototype,"readOffset",null),a([u({value:null,type:At,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],r.prototype,"timeInfo",null),a([u(ite)],r.prototype,"useViewTime",void 0),r=a([_("esri.layers.mixins.TemporalLayer")],r),r};let ste=class extends Ml{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[Nh](){return this.trackInfoProvider.trackInfo}},Fi=class extends de(F){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};a([u({type:[Fe],json:{write:!0}})],Fi.prototype,"labelingInfo",void 0),a([u(_4)],Fi.prototype,"labelsVisible",void 0),a([u({types:cp,json:{write:!0}})],Fi.prototype,"renderer",void 0),a([u({type:Boolean,json:{write:!0}})],Fi.prototype,"visible",void 0),Fi=a([_("esri.layers.support.TrackPartInfo")],Fi);let Fr=class extends de(F){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new Fi({renderer:new Sr({symbol:L2.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Fi({renderer:new Sr({symbol:L2.clone()})}),this.trackLines=new Fi({renderer:new Sr({symbol:t9.clone()})}),this.timeField="startTimeField"}writeFields(e,r,i){const s=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Kr(i,s,r)}};a([u({type:Boolean,json:{write:!0}})],Fr.prototype,"enabled",void 0),a([u({type:[ir],json:{write:!0}})],Fr.prototype,"fields",void 0),a([j("fields")],Fr.prototype,"writeFields",null),a([u({type:Fi,json:{write:!0}})],Fr.prototype,"latestObservations",void 0),a([u({type:Gn,json:{write:!0}})],Fr.prototype,"maxDisplayDuration",void 0),a([u({type:Number,json:{write:!0}})],Fr.prototype,"maxDisplayObservationsPerTrack",void 0),a([u(Zh)],Fr.prototype,"popupEnabled",void 0),a([u({type:oa,json:{name:"popupInfo",write:!0}})],Fr.prototype,"popupTemplate",void 0),a([u({type:Fi,json:{write:!0}})],Fr.prototype,"previousObservations",void 0),a([u({type:Fi,json:{write:!0}})],Fr.prototype,"trackLines",void 0),a([u({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Fr.prototype,"timeField",void 0),Fr=a([_("esri.layers.support.TrackInfo")],Fr);const nte=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new ste(this),this.trackInfo=null}};return a([u({readOnly:!0,clonable:!1})],r.prototype,"trackGraphicOrigin",void 0),a([u({type:Fr})],r.prototype,"trackInfo",void 0),r=a([_("esri.layers.mixins.TrackableLayer")],r),r},Ib=new be({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ns=class extends de(F){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};a([u({json:{write:!0}})],Ns.prototype,"name",void 0),a([u({json:{write:!0}})],Ns.prototype,"description",void 0),a([u({json:{read:Ib.read,write:Ib.write}})],Ns.prototype,"drawingTool",void 0),a([u({json:{write:!0}})],Ns.prototype,"prototype",void 0),a([u({json:{write:!0}})],Ns.prototype,"thumbnail",void 0),Ns=a([_("esri.layers.support.FeatureTemplate")],Ns);let os=class extends de(F){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const r={};for(const i of Object.keys(e))r[i]=d4(e[i]);return r}writeDomains(e,r){const i={};for(const s of Object.keys(e))e[s]&&(i[s]=e[s]?.toJSON());r.domains=i}};a([u({json:{write:!0}})],os.prototype,"id",void 0),a([u({json:{write:!0}})],os.prototype,"name",void 0),a([u({json:{write:!0}})],os.prototype,"domains",void 0),a([A("domains")],os.prototype,"readDomains",null),a([j("domains")],os.prototype,"writeDomains",null),a([u({type:[Ns],json:{write:!0}})],os.prototype,"templates",void 0),os=a([_("esri.layers.support.FeatureType")],os);let Ao=class extends de(F){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};a([u({type:String,json:{write:!0}})],Ao.prototype,"alias",void 0),a([u({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Ao.prototype,"name",void 0),a([u({types:H$,json:{write:!0}})],Ao.prototype,"fieldFormat",void 0),Ao=a([_("esri.layers.support.FieldConfiguration")],Ao);function ote(t){const{popupTemplate:e,fieldsIndex:r}=t,i=e?.fieldInfos;if(!i?.length||!r)return;const s=[];for(const n of i){const{fieldName:o,label:l}=n,c=r.get(o);if(!c)continue;const d=l&&l!==c.alias?l:null,h=rz(n,c);(d||h)&&s.push(new Ao({name:c.name,alias:d,fieldFormat:h}))}return s.length?s:null}function ate(t){const{fields:e}=t;if(!e?.length)return;const r=[];for(const i of e){const s=kl(i)?Md(i):null;s&&r.push(new Ao({name:i.name,fieldFormat:s}))}return r.length?r:null}function lte(t,e){const{popupTemplate:r,fieldsIndex:i}=t;if(!r||!i)return;const s=ute(t,e,r.fieldInfos);if(!s)return;const n=r.clone();return n.fieldInfos=s,n}function ute(t,e,r){e??=[],r=P(r)??[];let i=!1;const s=new Map;for(const n of e){const o=t.fieldsIndex.get(n.name);o&&s.set(o.name,n)}for(const n of r){const o=t.fieldsIndex.get(n.fieldName);if(!o)continue;const l=s.get(o.name);n.label=l?.alias||o.alias,n.format=kl(o)&&l?.fieldFormat?w6(l.fieldFormat,o):null,i=!0,s.delete(o.name)}for(const n of s.values()){const o=cte(t,n);o&&(r.push(o),i=!0)}return i?r:null}function cte(t,e){const{name:r,alias:i,fieldFormat:s}=e,n=t.fieldsIndex.get(r);if(!n||!i&&!s)return;const o=i||n.alias,l=kl(n)&&s?w6(s,n):null;return new u4({fieldName:n.name,label:o,format:l,visible:!1,isEditable:C$(n,t)})}function pte(){return{fields:{type:[Tt],value:null,set:function(t){if(t&&ie("big-integer-warning-enabled")){const e=t.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(e.length){const r=e.map(i=>`'${i.name}'`).join(", ");N.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return fh.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t?.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||N.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return a4(this.fieldsIndex,t)}}}}const ef=()=>N.getLogger("esri.layers.support.labelingInfo"),dte=/\[([^[\]]+)\]/gi;function Mb(t,e,r){return t?t.map(i=>{const s=new Fe;if(s.read(i,r),s.labelExpression){const n=e.fields||e.layerDefinition?.fields||this.fields;s.labelExpression=s.labelExpression.replaceAll(dte,(o,l)=>`[${hte(l,n)}]`)}return s}):null}function hte(t,e){if(!e)return t;const r=t.toLowerCase();for(let i=0;i<e.length;i++){const s=e[i].name;if(s.toLowerCase()===r)return s}return t}const Eb=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],yte={esriGeometryPoint:Eb,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:Eb,esriGeometryEnvelope:null};function fte(t,e){const r=[];for(const i of t){const s=i.labelPlacement,n=yte[e];if(!i.symbol)return ef().warn("No ILabelClass symbol specified."),[];if(!n)return ef().error(new I("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(n.includes(s))r.push(i);else{const o=n[0];s&&ef().warn(`Found invalid label placement type ${s} for ${e}. Defaulting to ${o}`);const l=i.clone();l.labelPlacement=o,r.push(l)}}return r}const mte="relationships/",gte="expression/",vte=/<br\s*\/*>/gi;let hr=class extends Z{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||Th(()=>Tl()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??R(()=>import("./money-tides-featureUtils-DCfm_kBl.js"),__vite__mapDeps([176,4,3,1,2,5,6,7,27,12,13,14])).then(e=>this._featureUtils=e)}get calculatedExpressions(){const e=new U;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const i=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(i.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:i,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(i,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return typeof e!="string"?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(r=>e.includes(`{expression/${r.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const i of this.calculatedExpressions?.toArray()??[])try{const s=this._arcadeTask.value.arcade.extractFieldLiterals(i.syntax);for(const n of s){const o=n.split("."),l=this.fieldsIndex.get(o.at(-1)??"");l&&e.add(l.name)}}catch{}const r=this._extractFieldNames(this.workingTitle);for(const i of r){const s=this.fieldsIndex.get(i);s&&e.add(s.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,r,i){const s=r.getObjectId()??r.attributes[e.objectIdField];return(await this.getTitles(e,[r],i)).get(s)??""}async getTitles(e,r,i){const s=new Map,n=i?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:o}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);i?.fetchMissingFields&&(r=await this._checkAndReQueryGraphics(e,r));const{fieldInfoMap:l,workingTitle:c}=this,d=c&&l;r.forEach(h=>{const y=h.getObjectId()??h.attributes[e.objectIdField];let f=d?o({attributes:h.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(e,h,n).global,layer:e,text:c}):"";i?.removeHTML&&(f=dC.sanitize(f).replaceAll(vte," ")),s.set(y,f)})}catch{}return s}async _checkAndReQueryGraphics(e,r){const i=r.map(s=>s.getObjectId()??s.attributes[e.objectIdField]).filter(wi);if(i.length!==r.length)return r;if(r.some(s=>!QV(s,this.requiredFields))){const s=e.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=i;const n=await e.queryFeatures(s);if(n?.features.length===r.length)return n.features}return r}_createFieldInfoMap(e){const r=new Map;if(!e)return r;for(const i of e){if(!i.fieldName)continue;const s=this.fieldsIndex.get(i.fieldName),n=s?.name??i.fieldName;i.fieldName=n,r.set(n.toLowerCase(),i)}return r}_createFormattedAttributes(e,r,i="system"){const s=this.effectivePopupTemplate?.fieldInfos??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const l=this._arcadeTask.value.Feature.createFromGraphicLikeObject(r.geometry,r.attributes,e,null);for(const c of this.calculatedExpressions)try{n[`expression/${c.name}`]=c.func({vars:{$feature:l}})}catch{}}const o={...r.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:o,graphic:r,timeZone:i,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return g6(e).filter(r=>!(r.startsWith(mte)||r.startsWith(gte)))}};a([u({readOnly:!0})],hr.prototype,"_arcadeTask",null),a([u()],hr.prototype,"_featureUtils",void 0),a([u({readOnly:!0})],hr.prototype,"featureUtilsPromise",null),a([u({readOnly:!0})],hr.prototype,"calculatedExpressions",null),a([u()],hr.prototype,"displayField",void 0),a([u()],hr.prototype,"effectivePopupTemplate",void 0),a([u()],hr.prototype,"expressionsUsedInTitle",null),a([u()],hr.prototype,"fieldsIndex",void 0),a([u()],hr.prototype,"fieldInfoMap",null),a([u()],hr.prototype,"fields",void 0),a([u()],hr.prototype,"objectIdField",void 0),a([u()],hr.prototype,"requiredFields",null),hr=a([_("esri.layers.support.TitleCreator")],hr);const Fu=[];function xP(t,e){if(x_(t.url??""))return!0;const{wkid:r}=e;for(const i of Fu){if((t.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}Fu.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Fu.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Fu.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Fu.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Fu.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function $P(t,e,r){const i=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const s=await B2(i.populateFromStyle());if(Ce(r),s.ok===!1){const n=s.error;e?.messages&&e.messages.push(new vs("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:e})),t.clear("renderer",e?.origin)}}}function TP({displayField:t,editFieldsInfo:e,fields:r,objectIdField:i,title:s},n){if(!r)return null;const o=Ste({editFieldsInfo:e,fields:r,objectIdField:i},n);if(!o.length)return null;const l=Tte({titleBase:s,fields:r,displayField:t}),c=$te();return new oa({title:l,content:c,fieldInfos:o})}const wte=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):PV(t,e);function bte({fields:t,ignoreFieldTypes:e,sortDisabled:r}){const i=t;return e&&(t=t.filter(s=>!e.includes(s.type))),t===i&&(t=t.slice()),r!==!0&&t.sort(_te),t}function _te(t,e){return t.type==="oid"?-1:e.type==="oid"?1:Pb(t)?-1:Pb(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function Ste(t,e){const r=e?.visibleFieldNames;return bte({fields:t.fields??[],ignoreFieldTypes:e?.ignoreFieldTypes||Ite,sortDisabled:e?.sortDisabled}).map(i=>new u4({fieldName:i.name,isEditable:C$(i,t),label:i.alias,format:xte(i),visible:wte(i,{...t,visibleFieldNames:r})}))}function xte(t){switch(t.type){case"small-integer":case"integer":return new Zn({digitSeparator:!0,places:0});case"single":case"double":return new Zn({digitSeparator:!0,places:2});case"string":return YV(t.name)?new Zn({digitSeparator:!0,places:0}):void 0;default:return}}function $te(){return[new Jc,new Zc]}function Tte(t){const e=wV(t),{titleBase:r}=t;return e?`${r}: {${e.trim()}}`:r??""}function Pb(t){return(t.name&&t.name.toLowerCase())==="name"?!0:t.alias?.toLowerCase()==="name"}const Ite=["geometry","blob","raster","guid","xml"],kt="FeatureLayer";function q1(t,e){return new I("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Ob(t){return t&&t instanceof U}const tf=pte();function rf(t,e,r){const i=!!r?.writeLayerSchema;return{enabled:i,ignoreOrigin:i}}let H=class extends HY(Bee(IQ(Kee(xQ(mQ(Wh(Jee(g9(nte(Qh(m9(WM(P4(O4(np(QM(HM(de(Oe))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new LJ(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=B.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=U2(async(r,i,s)=>{const{save:n,saveAs:o}=await R(()=>import("./money-tides-featureLayerUtils-B5kLZkl9.js"),__vite__mapDeps([321,1,2,4,3,5,6,7,322,323,320,12,13,14]));switch(r){case 0:return n(this,i);case 1:return o(this,s,i)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,r){return typeof e=="string"?{url:e,...r}:e}load(e){const r=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(r).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(nr).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(r);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new I("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(r))}).then(()=>dY(this,"load",e));return this.addResolvingPromise(i),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return st(e),new hr({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,r){return r=r.layerDefinition||r,c9(r,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,r){return this._readEditingEnabled(r,!1)}readEditingEnabledFromWebMap(e,r,i){return this._readEditingEnabled(r,!0,i)}writeEditingEnabled(e,r){this._writeEditingEnabled(e,r,!1)}writeEditingEnabledToWebMap(e,r,i,s){this._writeEditingEnabled(e,r,!0,s)}get effectiveEditingEnabled(){return fY(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(e){if(this._hasMemorySource()||(this._override("fieldConfigurations",e),!this.loaded))return;const r=lte(this,e);r&&this._set("popupTemplate",r)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden("fieldConfigurations")?this._get("fieldConfigurations"):ote(this)||null}readIsTable(e,r){return(r=r?.layerDefinition??r).type==="Table"||!r.geometryType}writeIsTable(e,r,i,s){s?.writeLayerSchema&&Kr(i,e?"Table":"Feature Layer",r)}readGlobalIdField(e,r){return IE(r.layerDefinition||r)}readObjectIdField(e,r){return ME(r.layerDefinition||r)}writePopupTemplate(e,r,i,s){e&&(r[i]=e.toJSON({...s,writeFieldFormat:!s?.writeLayerSchema}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){nm(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,r,i){r=r.layerDefinition||r;const s=r.drawingInfo?.renderer;if(s){const n=mh(s,r,i)??void 0;return n||N.getLogger(this).error("Failed to create renderer",{rendererDefinition:r.drawingInfo.renderer,layer:this,context:i}),n}return o9(r,i)}set source(e){const r=this._get("source");r!==e&&(Ob(r)&&this._resetMemorySource(r),Ob(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof U?new Pn({layer:this,items:e}):e:null}readSource(e,r){const i=pt.fromJSON(r.featureSet);return new Pn({layer:this,items:i?.features??[]})}readTemplates(e,r){const i=r.editFieldsInfo,s=i?.creatorField,n=i?.editorField;return e=e?.map(o=>Ns.fromJSON(o)),this._fixTemplates(e,s),this._fixTemplates(e,n),e}readTitle(e,r){const i=r.layerDefinition?.name??r.name,s=r.title||r.layerDefinition?.title;if(i){const n=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?hC(this.url,i):i;let o=i;if(!o&&this.url){const l=Zo(this.url);l!=null&&(o=l.title)}return o?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==o&&(o=n+" - "+o),yC(o)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,r){return r.title||r.layerDefinition?.name}readTypeIdField(e,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();const s=r.fields.find(n=>n.name.toLowerCase()===i);s&&(i=s.name)}return i}readTypes(e,r){e=(r=r.layerDefinition||r).types;const i=r.editFieldsInfo,s=i?.creatorField,n=i?.editorField;return e?.map(o=>(o=os.fromJSON(o),this._fixTemplates(o.templates,s),this._fixTemplates(o.templates,n),o))}readVisible(e,r){return r.layerDefinition?.defaultVisibility!=null?!!r.layerDefinition.defaultVisibility:r.visibility!=null?!!r.visibility:void 0}async addAttachment(e,r){const i=await WK(this,e,r,kt);return this.lastEditsEventDate=new Date,i}async updateAttachment(e,r,i){const s=await ZK(this,e,r,i,kt);return this.lastEditsEventDate=new Date,s}async applyEdits(e,r){return JK(this,e,r)}async uploadAssets(e,r){return QK(this,e,r)}createFieldConfigurations(){return ate(this)}createPopupTemplate(e){return TP(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:r}=await Ri(R(()=>import("./money-tides-FeatureLayerSource-w9B3xgck.js"),__vite__mapDeps([324,1,2,3,4,5,6,7,64,13,14,69,325,326,112,113,327,318,12,51,46])),e);return new r({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=oY(this);e.dynamicDataSource=this.dynamicDataSource;const r=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=y6(this.definitionExpression,r);return e.where=i||"1=1",e}async deleteAttachments(e,r){const i=await KK(this,e,r,kt);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(e){return YK(this,e,kt)}async getFeatureTitle(e,r){return this._titleCreator.getTitle(this,e,r)}async getFeatureTitles(e,r){return this._titleCreator.getTitles(this,e,r)}getFeatureType(e){return a9(this.types,this.typeIdField,e)}getFieldAlias(e){const r=this.getField(e);if(r)return this.getFieldConfiguration(r.name)?.alias||r.alias}getFieldConfiguration(e){return e=e.toLowerCase(),this.fieldConfigurations?.find(r=>r.name.toLowerCase()===e)}getFieldDomain(e,r){return lY(this,e,r,this.getField(e)?.domain??null)}async queryAttachments(e,r){return XK(this,e,r,kt)}async queryFeatures(e,r){const i=await this.load(),s=await i.source.queryFeatures(W.from(e)??i.createQuery(),r),n=this.graphicOrigin;if(s?.features)for(const o of s.features)o.layer=o.sourceLayer=i,o.origin=n;return s}async queryObjectIds(e,r){return await eY(this,e,r,kt)}async queryFeatureCount(e,r){return tY(this,e,r,kt)}async queryExtent(e,r){return rY(this,e,r,kt)}async queryRelatedFeatures(e,r){return iY(this,e,r,kt)}async queryRelatedFeaturesCount(e,r){return sY(this,e,r,kt)}async queryPivot(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryPivot||!s?.operations?.supportsQueryPivot)throw new I(kt,"Layer source does not support queryPivot capability");const n=await R(()=>import("./money-tides-PivotQuery-DikvnS0T.js").then(l=>l.P),__vite__mapDeps([328,3,4,1,2,5,6,7,13,14])),o=await i.queryPivot(n.default.from(e),r);if(o?.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryTopFeatures(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryTopFeatures||!s?.query?.supportsTopFeaturesQuery)throw new I(kt,"Layer source does not support queryTopFeatures capability");const n=await R(()=>import("./money-tides-TopFeaturesQuery-BIqKiPrN.js"),__vite__mapDeps([329,3,4,1,2,5,6,7,13,14,12])),o=await i.queryTopFeatures(n.default.from(e),r);if(o?.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryAttributeBins(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryAttributeBins)throw new I(kt,"Layer source does not support queryAttributeBins capability");wY(e,s,kt);const n=await R(()=>import("./money-tides-AttributeBinsQuery-CtXJBo89.js"),__vite__mapDeps([244,3,4,1,2,5,6,7,13,14,41,48,12])),o=await i.queryAttributeBins(n.default.from(e),r);if(o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryTopObjectIds(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryTopObjectIds||!s?.query.supportsTopFeaturesQuery)throw new I(kt,"Layer source does not support queryTopObjectIds capability");const n=await R(()=>import("./money-tides-TopFeaturesQuery-BIqKiPrN.js"),__vite__mapDeps([329,3,4,1,2,5,6,7,13,14,12]));return(await i.queryTopObjectIds(n.default.from(e),r)).filter(eV)}async queryTopFeaturesExtent(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryTopExtents||!s?.query?.supportsTopFeaturesQuery)throw new I(kt,"Layer source does not support queryTopExtents capability");const n=await R(()=>import("./money-tides-TopFeaturesQuery-BIqKiPrN.js"),__vite__mapDeps([329,3,4,1,2,5,6,7,13,14,12]));return i.queryTopExtents(n.default.from(e),r)}async queryTopFeatureCount(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryTopCount||!s?.query?.supportsTopFeaturesQuery)throw new I(kt,"Layer source does not support queryFeatureCount capability");const n=await R(()=>import("./money-tides-TopFeaturesQuery-BIqKiPrN.js"),__vite__mapDeps([329,3,4,1,2,5,6,7,13,14,12]));return i.queryTopCount(n.default.from(e),r)}read(e,r){const i=e.featureCollection;if((i||e.type==="Feature Collection")&&(this.resourceInfo=e),i){const{layers:s,showLegend:n}=i;s?.length===1&&(super.read(s[0],r),n!=null&&super.read({showLegend:n},r))}super.read(e,r),r&&r.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,r){r={...r,origin:r?.origin??void 0,writeLayerSchema:r?.writeLayerSchema??this._hasMemorySource()};const{origin:i,layerContainerType:s,messages:n}=r;if(this.dynamicDataSource)return n?.push(q1(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&s!=="tables")return n?.push(q1(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return n?.push(q1(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&s==="tables")return n?.push(q1(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,r)}clone(){if(this._hasMemorySource())throw new I(kt,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||xP(this,e))}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,r){return this._debouncedSaveOperations(1,r,e)}_readEditingEnabled(e,r,i){let s=e.layerDefinition?.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,r&&i?.origin==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(r=>r.trim()).includes("editing")}_writeEditingEnabled(e,r,i,s){if(!e){const n=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";Kr("layerDefinition.capabilities",n,r),i&&!s?.writeLayerSchema&&(r.capabilities=n)}}_fetchFirstValidLayerId(e){return Te(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(r=>{const i=r.data;if(i)return this.applyPreferredHost(i),this.findFirstValidLayerId(i)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),nm(this.renderer,this.fieldsIndex),E$(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),$P(this,{origin:"service"})}async hasDataChanged(){return nY(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,r){e&&e.forEach(i=>{const s=i.prototype?.attributes;s&&r&&delete s[r]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new I("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new I("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(r=>{r.layer=this,r.sourceLayer=this}),this.addHandles([e.on("after-add",r=>{r.item.layer=this,r.item.sourceLayer=this}),e.on("after-remove",r=>{r.item.layer=null,r.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(r=>{r.layer=null,r.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};a([u({clonable:!1,readOnly:!0})],H.prototype,"_titleCreator",null),a([u(DQ)],H.prototype,"attributeTableTemplate",void 0),a([A("service","capabilities")],H.prototype,"readCapabilities",null),a([u({json:{origins:{"web-scene":{write:!1}},write:!0}})],H.prototype,"charts",void 0),a([u({readOnly:!0})],H.prototype,"createQueryVersion",null),a([u({json:{read:{source:"layerDefinition.copyrightText"}}})],H.prototype,"copyright",void 0),a([u({json:{read:{source:"layerDefinition.displayField"}}})],H.prototype,"displayField",void 0),a([u({types:jo,readOnly:!0})],H.prototype,"defaultSymbol",void 0),a([u({type:br})],H.prototype,"dynamicDataSource",void 0),a([u({type:Boolean})],H.prototype,"editingEnabled",null),a([A(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],H.prototype,"readEditingEnabled",null),a([A("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],H.prototype,"readEditingEnabledFromWebMap",null),a([j(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],H.prototype,"writeEditingEnabled",null),a([j("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],H.prototype,"writeEditingEnabledToWebMap",null),a([u({readOnly:!0})],H.prototype,"effectiveEditingEnabled",null),a([u({clonable:!1,readOnly:!0})],H.prototype,"featureTitleFields",null),a([u({type:[Ao],json:{name:"layerDefinition.fieldConfigurations",write:{overridePolicy(t,e,r){return{enabled:!r?.writeLayerSchema,ignoreOrigin:this.originIdOf(e)===1}}}}})],H.prototype,"fieldConfigurations",null),a([u({...tf.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:rf}}}}})],H.prototype,"fields",void 0),a([u(tf.fieldsIndex)],H.prototype,"fieldsIndex",void 0),a([u({type:rs,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],H.prototype,"formTemplate",void 0),a([u({json:{read:{source:"layerDefinition.extent"}}})],H.prototype,"fullExtent",void 0),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:rf,writer(t,e,r){const i=t?zg.toJSON(t):null;i&&Kr(r,i,e)}}}},read:{source:"layerDefinition.geometryType",reader:zg.read}}})],H.prototype,"geometryType",void 0),a([u({readOnly:!0,clonable:!1})],H.prototype,"graphicOrigin",void 0),a([u({json:{read:{source:"layerDefinition.hasM"}}})],H.prototype,"hasM",void 0),a([u({json:{read:{source:"layerDefinition.hasZ"}}})],H.prototype,"hasZ",void 0),a([u(cE)],H.prototype,"id",void 0),a([u({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"infoFor3D",void 0),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],H.prototype,"isTable",void 0),a([A("service","isTable",["type","geometryType"]),A("isTable",["layerDefinition.type","layerDefinition.geometryType"])],H.prototype,"readIsTable",null),a([j("web-map","isTable")],H.prototype,"writeIsTable",null),a([u(_4)],H.prototype,"labelsVisible",void 0),a([u({type:[Fe],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Mb,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:Mb,write:{layerContainerTypes:ke}}})],H.prototype,"labelingInfo",void 0),a([u((()=>{const t=P(AQ);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,r,i){Kr(i,K2(e),r)}}},t})())],H.prototype,"opacity",void 0),a([u(lE)],H.prototype,"legendEnabled",void 0),a([u({type:["show","hide"],json:(()=>{const t=P(pE.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],H.prototype,"listMode",void 0),a([A("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],H.prototype,"readGlobalIdField",null),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:rf}}}}})],H.prototype,"objectIdField",void 0),a([A("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],H.prototype,"readObjectIdField",null),a([u({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:ke}}})],H.prototype,"operationalLayerType",void 0),a([u(tf.outFields)],H.prototype,"outFields",void 0),a([u({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],H.prototype,"path",void 0),a([u(Zh)],H.prototype,"popupEnabled",void 0),a([u({type:oa,json:{name:"popupInfo",write:!0}})],H.prototype,"popupTemplate",void 0),a([j("popupTemplate")],H.prototype,"writePopupTemplate",null),a([u({readOnly:!0})],H.prototype,"defaultPopupTemplate",null),a([u({types:cp,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:wP,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:ke,overridePolicy:(t,e,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:ke})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:ke})}}})],H.prototype,"renderer",null),a([A("service","renderer",["drawingInfo.renderer","defaultSymbol"]),A("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],H.prototype,"readRenderer",null),a([u()],H.prototype,"resourceInfo",void 0),a([u((()=>{const t=P(LQ);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],H.prototype,"screenSizePerspectiveEnabled",void 0),a([u({clonable:!1})],H.prototype,"source",null),a([xe("source")],H.prototype,"castSource",null),a([A("portal-item","source",["featureSet"]),A("web-map","source",["featureSet"])],H.prototype,"readSource",null),a([u({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],H.prototype,"spatialReference",void 0),a([u({type:Number})],H.prototype,"subtypeCode",void 0),a([u({type:[Ns]})],H.prototype,"templates",void 0),a([A("templates",["editFieldsInfo","creatorField","editorField","templates"])],H.prototype,"readTemplates",null),a([u({type:At})],H.prototype,"timeInfo",void 0),a([u()],H.prototype,"title",void 0),a([A("service","title",["name"]),A("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],H.prototype,"readTitle",null),a([A("web-map","title",["layerDefinition.name","title"])],H.prototype,"readTitleFromWebMap",null),a([u({type:String})],H.prototype,"sublayerTitleMode",void 0),a([u({json:{read:!1}})],H.prototype,"type",void 0),a([u({type:String})],H.prototype,"typeIdField",void 0),a([A("service","typeIdField"),A("typeIdField",["layerDefinition.typeIdField"])],H.prototype,"readTypeIdField",null),a([u({type:[os]})],H.prototype,"types",void 0),a([A("service","types",["types"]),A("types",["layerDefinition.types"])],H.prototype,"readTypes",null),a([u({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:ke}}}}})],H.prototype,"visible",void 0),a([A("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],H.prototype,"readVisible",null),H=a([_("esri.layers.FeatureLayer")],H);const IP=Object.freeze(Object.defineProperty({__proto__:null,get default(){return H}},Symbol.toStringTag,{value:"Module"})),Mte=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,s){const n=s.capabilities&&s.capabilities.split(",").map(T=>T.toLowerCase().trim());if(!n)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const o=this.type,l=o!=="tile"&&!!s.supportsDynamicLayers,c=n.includes("query"),d=n.includes("map"),h=!!s.exportTilesAllowed,y=n.includes("tilemap"),f=n.includes("data"),m=o!=="tile"&&(!s.tileInfo||l),g=o!=="tile"&&(!s.tileInfo||l),v=o!=="tile",b=o!=="tile"&&l&&s.currentVersion>=11.1,S=s.cimVersion?B6.parse(s.cimVersion):null,$=S?.greaterEqual(1,4)??!1,E=S?.greaterEqual(2,0)??!1;return{operations:{supportsExportMap:d,supportsExportTiles:h,supportsIdentify:c,supportsQuery:f,supportsTileMap:y},exportMap:d?{supportsArcadeExpressionForLabeling:$,supportsCIMSymbols:E,supportsDynamicLayers:l,supportsSublayerOrderBy:b,supportsSublayerDefinitionExpression:g,supportsSublayerVisibility:m,supportsSublayersChanges:v}:null,exportTiles:h?{maxExportTilesCount:+s.maxExportTilesCount}:null}}readVersion(i,s){let n=s.currentVersion;return n||(n=s.hasOwnProperty("capabilities")||s.hasOwnProperty("tables")?10:s.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}async fetchRelatedService(i){const s=this.portalItem;if(!s||!Kw(s))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=s.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(o=>o.find(l=>l.type==="Feature Service")??null,()=>null));const n=await this._relatedFeatureServicePromise;return Ce(i),n?{itemId:n.id,url:n.url}:null}async fetchSublayerInfo(i,s){const{source:n}=i;if(this?.portalItem&&this.type==="tile"&&n?.type==="map-layer"&&Kw(this.portalItem)&&i.originIdOf("url")<2){const c=await this.fetchRelatedService(s);c&&(i.url=vl(c.url,n.mapLayerId.toString()),i.layerItemId=c.itemId)}const{url:o}=i;let l;if(n.type==="data-layer")l=(await Te(o,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...s})).data;else if(o&&i.originIdOf("url")>2)try{const c=await this._fetchAllLayersAndTablesFromService(o),d=Zo(o)?.sublayer??n.mapLayerId;l=c.get(d)}catch{}else{let c=i.id;n?.type==="map-layer"&&(c=n.mapLayerId);try{l=(await this.fetchAllLayersAndTables(s)).get(c)}catch{}}return l}async fetchAllLayersAndTables(i){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,i)}async _fetchAllLayersAndTablesFromService(i,s){await this.load(s),this._allLayersAndTablesMap||=new Map;const n=Zo(i),o=xh(this._allLayersAndTablesMap,n?.url.path,()=>Te(vl(n?.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(c=>{const d=new Map,{layers:h,tables:y}=c.data,f=[...h??[],...y??[]];for(const m of f)d.set(m.id,m);return{result:d}},c=>({error:c}))),l=await o;if(Ce(s),"result"in l)return l.result;throw l.error}};return a([u({readOnly:!0})],r.prototype,"capabilities",void 0),a([A("service","capabilities",["capabilities","cimVersion","currentVersion","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],r.prototype,"readCapabilities",null),a([u({json:{read:{source:"copyrightText"}}})],r.prototype,"copyright",void 0),a([u({type:ue})],r.prototype,"fullExtent",void 0),a([u(cE)],r.prototype,"id",void 0),a([u({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],r.prototype,"legendEnabled",void 0),a([u(Zh)],r.prototype,"popupEnabled",void 0),a([u({type:B})],r.prototype,"spatialReference",void 0),a([u({readOnly:!0})],r.prototype,"version",void 0),a([A("service","version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],r.prototype,"readVersion",null),r=a([_("esri.layers.mixins.ArcGISMapService")],r),r},Ete=Symbol("isMapImageGraphicOriginSymbol");var Rb;let Pte=class extends Ml{get[(Rb=Ete,W6)](){return this.layer}constructor(e,r){super(),this[Rb]=!0,this.type="map-image",this.layer=e,this.sublayer=r}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}};const Ote=Symbol("isTileGraphicOriginSymbol");var Cb;let Rte=class extends Ml{get[(Cb=Ote,W6)](){return this.layer}constructor(e,r){super(),this[Cb]=!0,this.type="tile",this.layer=e,this.sublayer=r}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}};function MP(t){const e={};for(const r in t){if(r==="declaredClass")continue;const i=t[r];if(i!=null&&typeof i!="function")if(Array.isArray(i)){e[r]=[];for(let s=0;s<i.length;s++)e[r][s]=MP(i[s])}else typeof i=="object"?i.toJSON&&(e[r]=JSON.stringify(i)):e[r]=i}return e}function Cte(t){return 32+t.length}const EP=16;function Lte(t){if(!t)return 0;let e=b9;for(const r in t)t.hasOwnProperty(r)&&(e+=v9(t[r],!1));return e}function kte(t){if(!t)return 0;if(typeof t[0]=="number")return w9(t);if(Array.isArray(t))return Ate(t);let e=b9;for(const r in t)t.hasOwnProperty(r)&&(e+=v9(t[r]));return e}function Ate(t){const e=t.length;if(e===0||typeof t[0]=="number")return PP(t,8);let r=OP;for(let i=0;i<e;i++)r+=v9(t[i]);return r}function v9(t,e=!0){switch(typeof t){case"object":return e?kte(t):b9;case"string":return Cte(t);case"number":return EP;case"boolean":return 4;default:return 8}}function w9(...t){return t.reduce((e,r)=>e+(r?E_(r)?r.byteLength+Fte:Array.isArray(r)?PP(r,EP):0:0),0)}function PP(t,e){return OP+t.length*e}const b9=32,OP=16,Fte=145,Lb=4294967296,Nte=new TextDecoder("utf-8"),Dte=ie("safari")||ie("ios")?6:ie("ff")?12:32;var qs;let jte=(qs=class{constructor(e,r,i=0,s=e?e.byteLength:0){this._tag=0,this._dataType=99,this._init(e,r,i,s)}_init(e,r,i,s){this._data=e,this._dataView=r,this._pos=i,this._end=s}get usedMemory(){return 64+w9(this._data)}asUnsafe(){return this}clone(){return new qs(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,r=this._pos,i=e.getUint32(r,!0)+e.getUint32(r+4,!0)*Lb;return this._skip(8),i}getSFixed64(){const e=this._dataView,r=this._pos,i=e.getUint32(r,!0)+e.getInt32(r+4,!0)*Lb;return this._skip(8),i}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),r=this._pos,i=this._toString(this._data,r,r+e);return this._skip(e),i}getBytes(){const e=this._getLength(),r=this._pos,i=this._toBytes(this._data,r,r+e);return this._skip(e),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,r,i,s){const n=this.getMessage(),o=e(n,r,i,s);return n.release(),o}processMessage(e){const r=this.getMessage(),i=e(r);return r.release(),i}getMessage(){const e=this._getLength(),r=qs.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),r}release(){qs.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let r=this._pos,i=0,s=0;if(this._end-r>=10)do{if(s=e[r++],i|=127&s,!(128&s)||(s=e[r++],i|=(127&s)<<7,!(128&s))||(s=e[r++],i|=(127&s)<<14,!(128&s))||(s=e[r++],i|=(127&s)<<21,!(128&s))||(s=e[r++],i+=268435456*(127&s),!(128&s))||(s=e[r++],i+=34359738368*(127&s),!(128&s))||(s=e[r++],i+=4398046511104*(127&s),!(128&s))||(s=e[r++],i+=562949953421312*(127&s),!(128&s))||(s=e[r++],i+=72057594037927940*(127&s),!(128&s))||(s=e[r++],i+=9223372036854776e3*(127&s),!(128&s)))break;throw new Error("Varint too long!")}while(!1);else{let n=1;for(;r!==this._end&&(s=e[r],128&s);)++r,i+=(127&s)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=s*n}return this._pos=r,i}_decodeSVarint(){const e=this._data;let r,i=0,s=0;const n=1&e[this._pos];if(s=e[this._pos++],i|=127&s,!(128&s)||(s=e[this._pos++],i|=(127&s)<<7,!(128&s))||(s=e[this._pos++],i|=(127&s)<<14,!(128&s))||(s=e[this._pos++],i|=(127&s)<<21,!(128&s))||(s=e[this._pos++],i+=268435456*(127&s),!(128&s))||(s=e[this._pos++],i+=34359738368*(127&s),!(128&s))||(s=e[this._pos++],i+=4398046511104*(127&s),!(128&s)))return n?-(i+1)/2:i/2;if(r=BigInt(i),s=e[this._pos++],r+=0x2000000000000n*BigInt(127&s),!(128&s)||(s=e[this._pos++],r+=0x100000000000000n*BigInt(127&s),!(128&s))||(s=e[this._pos++],r+=0x8000000000000000n*BigInt(127&s),!(128&s)))return Number(n?-(r+1n)/2n:r/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==2)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,r,i){if((i=Math.min(this._end,i))-r>Dte){const o=e.subarray(r,i);return Nte.decode(o)}let s="",n="";for(let o=r;o<i;++o){const l=e[o];128&l?n+="%"+l.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(l),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(e,r,i){return i=Math.min(this._end,i),new Uint8Array(e.buffer,r,i-r)}},qs.pool=new D2(()=>new qs(null,null),void 0,e=>{e._data=null,e._dataView=null}),qs);const wa=2;let Ht=class Nu{constructor(e=[],r=[]){this.lengths=e??[],this.coords=r??[]}static fromJSON(e){return new Nu(e.lengths,e.coords)}static fromRect(e){const[r,i,s,n]=e,o=s-r,l=n-i;return new Nu([5],[r,i,o,0,0,l,-o,0,0,-l])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,r)=>e+r)}get usedMemory(){return 64+w9(this.lengths,this.coords)}area(){let e=0,r=0;if(!this.lengths.length)return 0;for(let i=0;i<this.lengths.length;i++){const s=this.lengths[i];if(s<3)continue;let n=this.coords[wa*r],o=this.coords[wa*r+1];for(let l=1;l<s;l+=1){const c=this.coords[wa*(l+r)],d=this.coords[wa*(l+r)+1];e+=-.5*(c-n)*(d+o),n=c,o=d}r+=s}return e}forEachVertex(e){let r=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const s=this.lengths[i];for(let n=0;n<s;n++)e(this.coords[wa*(n+r)],this.coords[wa*(n+r)+1]);r+=s}}deltaDecode(){const e=this.clone(),{coords:r,lengths:i}=e;let s=0;for(const n of i){for(let o=1;o<n;o++)r[2*(s+o)]+=r[2*(s+o)-2],r[2*(s+o)+1]+=r[2*(s+o)-1];s+=n}return e}clone(e){if(this.lengths.length===0)return new Nu([],[this.coords[0],this.coords[1]]);const r=(this.lengths.length===0?1:this.lengths.reduce((s,n)=>s+n))*wa,i=this.coords.slice(0,r);return e?(e.set(i),new Nu(this.lengths,e)):new Nu(Array.from(this.lengths),Array.from(i))}};function _9(t,e){return t?e?4:3:e?3:2}function Vte(t,e,r,i){if(!e?.lengths.length)return null;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const s=t.coords,n=[],o=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:l,coords:c}=e,d=_9(r,i);let h=0;for(const y of l){const f=zte(o,c,h,y,r,i);f&&n.push(f),h+=y*d}if(n.sort((y,f)=>{let m=y[2]-f[2];return m===0&&r&&(m=y[4]-f[4]),m}),n.length){let y=6*n[0][2];s[0]=n[0][0]/y,s[1]=n[0][1]/y,r&&(y=6*n[0][4],s[2]=y!==0?n[0][3]/y:0),(s[0]<o[0]||s[0]>o[1]||s[1]<o[2]||s[1]>o[3]||r&&(s[2]<o[4]||s[2]>o[5]))&&(s.length=0)}if(!s.length){const y=e.lengths[0]?Ute(c,0,l[0],r,i):null;if(!y)return null;s[0]=y[0],s[1]=y[1],r&&y.length>2&&(s[2]=y[2])}return t}function zte(t,e,r,i,s,n){const o=_9(s,n);let l=r,c=r+o,d=0,h=0,y=0,f=0,m=0;for(let v=0,b=i-1;v<b;v++,l+=o,c+=o){const S=e[l],$=e[l+1],E=e[l+2],T=e[c],O=e[c+1],C=e[c+2];let z=S*O-T*$;f+=z,d+=(S+T)*z,h+=($+O)*z,s&&(z=S*C-T*E,y+=(E+C)*z,m+=z),S<t[0]&&(t[0]=S),S>t[1]&&(t[1]=S),$<t[2]&&(t[2]=$),$>t[3]&&(t[3]=$),s&&(E<t[4]&&(t[4]=E),E>t[5]&&(t[5]=E))}if(f>0&&(f*=-1),m>0&&(m*=-1),!f)return null;const g=[d,h,.5*f];return s&&(g[3]=y,g[4]=.5*m),g}function Ute(t,e,r,i,s){const n=_9(i,s);let o=e,l=e+n,c=0,d=0,h=0,y=0;for(let f=0,m=r-1;f<m;f++,o+=n,l+=n){const g=t[o],v=t[o+1],b=t[o+2],S=t[l],$=t[l+1],E=t[l+2],T=i?Gte(g,v,b,S,$,E):qte(g,v,S,$);if(T)if(c+=T,i){const O=Hte(g,v,b,S,$,E);d+=T*O[0],h+=T*O[1],y+=T*O[2]}else{const O=Bte(g,v,S,$);d+=T*O[0],h+=T*O[1]}}return c>0?i?[d/c,h/c,y/c]:[d/c,h/c]:r>0?i?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function qte(t,e,r,i){const s=r-t,n=i-e;return Math.sqrt(s*s+n*n)}function Gte(t,e,r,i,s,n){const o=i-t,l=s-e,c=n-r;return Math.sqrt(o*o+l*l+c*c)}function Bte(t,e,r,i){return[t+.5*(r-t),e+.5*(i-e)]}function Hte(t,e,r,i,s,n){return[t+.5*(i-t),e+.5*(s-e),r+.5*(n-r)]}let Pl=class X0{constructor(e=null,r={},i,s,n=0){this.geometry=e,this.attributes=r,this.centroid=i,this.objectId=s,this.displayId=n}static fromJSON(e){const r=e.geometry?Ht.fromJSON(e.geometry):null,i=e.centroid?Ht.fromJSON(e.centroid):null,s=e.objectId;return new X0(r,e.attributes,i,s)}weakClone(){const e=new X0(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){const e=this.geometry?.clone(),r=new X0(e,{...this.attributes},this.centroid?.clone(),this.objectId);return r.displayId=this.displayId,r}ensureCentroid(e){return this.centroid??=Vte(new Ht,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+Lte(this.attributes)+(this.geometry?.usedMemory??0)}};function Wte(t){return!!t.geometry?.coords?.length}let RP=class CP{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new CP;return e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const LP=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let P0e=class{constructor(e){this._options=e,this.geometryTypes=LP,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new RP}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||at(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const r=Nc(this._options.sourceSpatialReference)/Nc(e.spatialReference);if(r!==1)for(const i of e.features){if(!Wte(i))continue;const s=i.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=r}}addFeature(e,r){e.features.push(r)}createFeature(){return new Pl(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new Ht}addField(e,r){e.fields.push(r)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((r,i)=>r+i,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,r){e.coords[this._coordinatePtr++]=r}addCoordinatePoint(e,r){e.coords.push(r)}addLength(e,r){e.lengths.push(r)}addQueryGeometry(e,r){e.queryGeometry=r.queryGeometry,e.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new Ht}};const kb=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],Ab=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],Fb=["upperLeft","lowerLeft"];function Nb(t){return t>=kb.length?null:kb[t]}function Zte(t){return t>=Ab.length?null:Ab[t]}function Db(t){return t>=Fb.length?null:Fb[t]}function jb(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Jte(t,e,r){const s=t.asUnsafe(),n=e.createPointGeometry(r);for(;s.next();)switch(s.tag()){case 3:{const o=s.getUInt32(),l=s.pos()+o;let c=0;for(;s.pos()<l;)e.addCoordinatePoint(n,s.getSInt64(),c++);break}default:s.skip()}return n}function Qte(t,e,r){const n=t.asUnsafe(),o=e.createGeometry(r),l=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const c=n.getUInt32(),d=n.pos()+c;let h=0;for(;n.pos()<d;)e.addLength(o,n.getUInt32(),h++);break}case 3:{const c=n.getUInt32(),d=n.pos()+c;let h=0;for(e.allocateCoordinates(o);n.pos()<d;)e.addCoordinate(o,n.getSInt64(),h),h++,h===l&&(h=0);break}default:n.skip()}return o}function Kte(t){const s=t.asUnsafe(),n=new Ht;let o="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),c=s.pos()+l;for(;s.pos()<c;)n.lengths.push(s.getUInt32());break}case 3:{const l=s.getUInt32(),c=s.pos()+l;for(;s.pos()<c;)n.coords.push(s.getSInt64());break}case 1:o=LP[s.getEnum()];break;default:s.skip()}return{queryGeometry:n,queryGeometryType:o}}function Yte(t){const h=t.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function Xte(t){const l=t.asUnsafe(),c={type:Nb(0)};for(;l.next();)switch(l.tag()){case 1:c.name=l.getString();break;case 2:c.type=Nb(l.getEnum());break;case 3:c.alias=l.getString();break;case 4:c.sqlType=Zte(l.getEnum());break;case 5:l.skip();break;case 6:c.defaultValue=l.getString();break;default:l.skip()}return c}function ere(t){const i={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:i.name=s.getString();break;case 2:i.isSystemMaintained=s.getBool();break;default:s.skip()}return i}function tre(t,e,r,i){const l=e.createFeature(r);let c=0;for(;t.next();)switch(t.tag()){case 1:{const d=i[c++].name;l.attributes[d]=t.processMessage(Yte);break}case 2:l.geometry=t.processMessageWithArgs(Qte,e,r);break;case 4:l.centroid=t.processMessageWithArgs(Jte,e,r);break;default:t.skip()}return l}function rre(t){const n=[1,1,1,1],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function ire(t){const n=[0,0,0,0],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function sre(t){const s={originPosition:Db(0)},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.originPosition=Db(n.getEnum());break;case 2:s.scale=n.processMessage(rre);break;case 3:s.translate=n.processMessage(ire);break;default:n.skip()}return s}function nre(t){const s={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.shapeAreaFieldName=n.getString();break;case 2:s.shapeLengthFieldName=n.getString();break;case 3:s.units=n.getString();break;default:n.skip()}return s}function ore(t,e){const l=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:l.wkid=t.getUInt32();break;case 5:l.wkt=t.getString();break;case 2:l.latestWkid=t.getUInt32();break;case 3:l.vcsWkid=t.getUInt32();break;case 4:l.latestVcsWkid=t.getUInt32();break;default:t.skip()}return l}function are(t,e){const v=e.createFeatureResult(),b=t.asUnsafe();v.geometryType=jb(e,0);let S=!1;for(;b.next();)switch(b.tag()){case 1:v.objectIdFieldName=b.getString();break;case 3:v.globalIdFieldName=b.getString();break;case 4:v.geohashFieldName=b.getString();break;case 5:v.geometryProperties=b.processMessage(nre);break;case 7:v.geometryType=jb(e,b.getEnum());break;case 8:v.spatialReference=b.processMessageWithArgs(ore,e);break;case 10:v.hasZ=b.getBool();break;case 11:v.hasM=b.getBool();break;case 12:v.transform=b.processMessage(sre);break;case 9:v.exceededTransferLimit=b.getBool();break;case 13:e.addField(v,b.processMessage(Xte));break;case 15:S||(e.prepareFeatures(v),S=!0),e.addFeature(v,b.processMessageWithArgs(tre,e,v,v.fields));break;case 2:v.uniqueIdField=b.processMessage(ere);break;default:b.skip()}return e.finishFeatureResult(v),v}function lre(t,e){const s={};let n=null;for(;t.next();)switch(t.tag()){case 4:n=t.processMessageWithArgs(Kte);break;case 1:s.featureResult=t.processMessageWithArgs(are,e);break;default:t.skip()}return n!=null&&s.featureResult&&e.addQueryGeometry(s,n),s}function ure(t,e){try{const i=new jte(new Uint8Array(t),new DataView(t)),s={};for(;i.next();)i.tag()===2?s.queryResult=i.processMessageWithArgs(lre,e):i.skip();return s}catch(r){throw new I("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function cre(t,e){const r=ure(t,e),i=r.queryResult.featureResult,s=r.queryResult.queryGeometry,n=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const o=i.objectIdFieldName;for(const l of i.features)l.attributes&&(l.objectId=l.attributes[o])}return i&&(i.queryGeometry=s,i.queryGeometryType=n),i}function pre(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const r=t.toJSON();return delete r.spatialReference,JSON.stringify(r)}function dre(t,e,r){const{geometry:i}=t,s=t.compactGeometryEnabled??!1,n=t.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const o=n;let l,c,d;if(i&&(c=i.spatialReference,d=Kd(c),o.geometryType=kh(i),o.geometry=pre(i,s),o.inSR=d),n.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds)switch(r?.uniqueIdFields?.length){case void 0:o.objectIds=n.objectIds.join(",");break;case 1:o.uniqueIds=JSON.stringify(n.objectIds),delete o.objectIds;break;default:o.uniqueIds=JSON.stringify(n.objectIds.map(h=>JSON.parse(h))),delete o.objectIds}if(n.orderByFields&&(o.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete o.outFields:n.outFields.includes("*")?o.outFields="*":o.outFields=n.outFields.join(","),n.outSR?(o.outSR=Kd(n.outSR),l=t.outSpatialReference):i&&(n.returnGeometry||n.returnCentroid)&&(o.outSR=o.inSR,l=c),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(o.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(o.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(o.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&c!=null&&t.quantizationParameters?.extent!=null&&c.equals(t.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,o.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(o.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(o.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(o.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const h=n.timeExtent,{start:y,end:f}=h;y==null&&f==null||(o.time=y===f?y:`${y??"null"},${f??"null"}`),delete n.timeExtent}return t.defaultSpatialReferenceEnabled&&c!=null&&l!=null&&c.equals(l)&&(o.defaultSR=o.inSR,delete o.inSR,delete o.outSR),o}const Vb="Layer does not support extent calculation.";function hre(t,e,r){return dre(t,e,r)}async function yre(t,e,r,i,s){const n=e.timeExtent?.isEmpty?{data:{features:[]}}:await Kh(t,e,"json",i,void 0,s);return pg(e,r,n.data),n}async function fre(t,e,r,i,s){if(e.timeExtent?.isEmpty)return{data:r.createFeatureResult()};const n=await mre(t,e,i,s),o=n;return o.data=cre(n.data,r),o}function mre(t,e,r,i){return Kh(t,e,"pbf",r,void 0,i)}function gre(t,e,r,i){return e.timeExtent?.isEmpty?Promise.resolve({data:{objectIds:[]}}):Kh(t,e,"json",r,{returnIdsOnly:!0},i)}function vre(t,e,r,i){return e.timeExtent?.isEmpty?Promise.resolve({data:{count:0}}):Kh(t,e,"json",r,{returnIdsOnly:!0,returnCountOnly:!0},i)}async function wre(t,e,r){if(e.timeExtent?.isEmpty)return{data:{count:0,extent:null}};const i=await Kh(t,e,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),s=i.data;if(s.hasOwnProperty("extent"))return i;if(s.features)throw new Error(Vb);if(s.hasOwnProperty("count"))throw new Error(Vb);return i}function bre(t,e){if(!t.returnIdsOnly||!e.uniqueIdFields)return t;const r={...t,returnUniqueIdsOnly:!0};return delete r.returnIdsOnly,r}async function Kh(t,e,r,i={},s={},n={}){const o=typeof t=="string"?Qs(t):t,l=e.geometry?[e.geometry]:[],c=await pI(l,null,{signal:i.signal}),d=c?.[0];d!=null&&((e=e.clone()).geometry=d);const h=MP({...o.query,f:r,...bre(s,n),...hre(e,s,n)});return Te(vl(o.path,_re(e,s)?"query3d":"query"),{...i,responseType:r==="pbf"?"array-buffer":"json",query:{...h,...i.query}})}function _re(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}async function Sre(t,e,r,i){const s=la(t),{data:n}=await vre(s,W.from(e),r,i);return n.count}async function xre(t,e,r){const i=la(t),s=await wre(i,W.from(e),{...r}),n=s.data.extent;return!n||isNaN(n.xmin)||isNaN(n.ymin)||isNaN(n.xmax)||isNaN(n.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:ue.fromJSON(n)}}async function $re(t,e,r,i){const s=la(t),{data:n}=await gre(s,W.from(e),r,i);return n.objectIds??Ire(n.uniqueIds)??[]}function Tre(t){return!Array.isArray(t[0])}function Ire(t){if(t)return Tre(t)?t:t.map(e=>JSON.stringify(e))}async function R0e(t,e,r,i){const s=await kP(t,e,r,i);return pt.fromJSON(s)}async function kP(t,e,r,i){const s=la(t),n={...r},o=W.from(e),{data:l}=await yre(s,o,o.sourceSpatialReference,n,i);return l}function jt(t,e){return t?e?4:3:e?3:2}const R4=()=>N.getLogger("esri.layers.graphics.featureConversionUtils"),S9={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},Mre=(t,e,r,i,s,n)=>{t[r]=s,t[r+1]=n},zb=(t,e,r,i,s,n)=>{t[r]=s,t[r+1]=n,t[r+2]=e[i+2]},Ere=(t,e,r,i,s,n)=>{t[r]=s,t[r+1]=n,t[r+2]=e[i+3]},Pre=(t,e,r,i,s,n)=>{t[r]=s,t[r+1]=n,t[r+2]=e[i+2],t[r+3]=e[i+3]};function x9(t,e,r,i){if(t){if(r)return e&&i?Pre:zb;if(e&&i)return Ere}else if(e&&i)return zb;return Mre}function sf({scale:t,translate:e},r){return Math.round((r-e[0])/t[0])}function nf({scale:t,translate:e},r){return Math.round((e[1]-r)/t[1])}function of({scale:t,translate:e},r){return Math.round((r-e[0])/t[0])}function af({scale:t,translate:e},r){return Math.round((r-e[1])/t[1])}function lf({scale:t,translate:e},r,i){return r*t[i]+e[i]}function C0e(t,e,r){return t?e?r?I9(t):$9(t):r?T9(t):C4(t):null}function C4(t){const e=t.coords;return{x:e[0],y:e[1]}}function AP(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function $9(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function Ore(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function T9(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function Rre(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function I9(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function Cre(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function Lre(t,e,r,i){let s=C4;r&&i?s=I9:r?s=$9:i&&(s=T9);for(const n of e){const{geometry:o,attributes:l}=n,c=o!=null?s(o):null;t.push({attributes:l,geometry:c})}return t}function M9(t,e){return t&&e?Cre:t?Ore:e?Rre:AP}function kre(t,e,r,i,s){const n=M9(r,i);for(const o of e){const l=o.geometry!=null?n(new Ht,o.geometry):null;t.push(new Pl(l,o.attributes,null,Dh(o,s)))}return t}function Are(t,e,r=M9(e.z!=null,e.m!=null)){return r(t,e)}function Fre(t,e,r,i){for(const{geometry:s,attributes:n}of e)t.push({attributes:n,geometry:s!=null?FP(s,r,i):null});return t}function FP(t,e,r){if(t==null)return null;const i=jt(e,r),s=[];for(let n=0;n<t.coords.length;n+=i){const o=[];for(let l=0;l<i;l++)o.push(t.coords[n+l]);s.push(o)}return e?r?{points:s,hasZ:e,hasM:r}:{points:s,hasZ:e}:r?{points:s,hasM:r}:{points:s}}function Nre(t,e,r,i,s){const n=jt(r,i);for(const o of e){const l=o.geometry!=null?NP(new Ht,o.geometry,n):null;t.push(new Pl(l,o.attributes,null,Dh(o,s)))}return t}function NP(t,e,r=jt(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const i=t.coords;let s=0;for(const n of e.points)for(let o=0;o<r;o++)i[s++]=n[o];return t}function Dre(t,e,r,i){for(const{geometry:s,attributes:n}of e)t.push({attributes:n,geometry:s!=null?DP(s,r,i):null});return t}function DP(t,e,r){if(!t)return null;const i=jt(e,r),{coords:s,lengths:n}=t,o=[];let l=0;for(const c of n){const d=[];for(let h=0;h<c;h++){const y=[];for(let f=0;f<i;f++)y.push(s[l++]);d.push(y)}o.push(d)}return e?r?{paths:o,hasZ:e,hasM:r}:{paths:o,hasZ:e}:r?{paths:o,hasM:r}:{paths:o}}function jre(t,e,r,i,s){const n=jt(r,i);for(const o of e){const l=o.geometry!=null?jP(new Ht,o.geometry,n):null,c=o.centroid!=null?Are(new Ht,o.centroid):null;t.push(new Pl(l,o.attributes,c,Dh(o,s)))}return t}function jP(t,e,r=jt(e.hasZ,e.hasM)){const{lengths:i,coords:s}=t;let n=0;for(const o of e.paths){for(const l of o)for(let c=0;c<r;c++)s[n++]=l[c];i.push(o.length)}return t}function Vre(t,e,r,i){for(const{geometry:s,attributes:n,centroid:o}of e){const l=s!=null?VP(s,r,i):null;if(o!=null){const c=C4(o);t.push({attributes:n,centroid:c,geometry:l})}else t.push({attributes:n,geometry:l})}return t}function VP(t,e,r){if(!t)return null;const i=jt(e,r),{coords:s,lengths:n}=t,o=[];let l=0;for(const c of n){const d=[];for(let h=0;h<c;h++){const y=[];for(let f=0;f<i;f++)y.push(s[l++]);d.push(y)}o.push(d)}return e?r?{rings:o,hasZ:e,hasM:r}:{rings:o,hasZ:e}:r?{rings:o,hasM:r}:{rings:o}}function zre(t,e,r,i,s){for(const n of e){const o=n.geometry!=null?zP(new Ht,n.geometry,r,i):null,l=Dh(n,s);n.centroid!=null?t.push(new Pl(o,n.attributes,AP(new Ht,n.centroid),l)):t.push(new Pl(o,n.attributes,null,l))}return t}function zP(t,e,r=e.hasZ,i=e.hasM){return Ure(t,e.rings,r,i)}function Ure(t,e,r,i){const s=jt(r,i),{lengths:n,coords:o}=t;let l=0;Jn(t);for(const c of e){for(const d of c)for(let h=0;h<s;h++)o[l++]=d[h];n.push(c.length)}return t}const sc=[],Ud=[];function L0e(t,e,r,i,s){sc[0]=t;const[n]=UP(Ud,sc,e,r,i,s);return bs(sc),bs(Ud),n}function UP(t,e,r,i,s,n){if(bs(t),!r){for(const o of e){const l=Dh(o,n);t.push(new Pl(null,o.attributes,null,l))}return t}switch(r){case"esriGeometryPoint":return kre(t,e,i,s,n);case"esriGeometryMultipoint":return Nre(t,e,i,s,n);case"esriGeometryPolyline":return jre(t,e,i,s,n);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return zre(t,e,i,s,n);default:R4().error("convertToFeatureSet:unknown-geometry",new I("internal:geometry",`Unable to parse unknown geometry type '${r}'`)),bs(t)}return t}function k0e(t,e,r,i){Ud[0]=t,GP(sc,Ud,e,r,i);const s=sc[0];return bs(sc),bs(Ud),s}function A0e(t,e,r){if(t==null)return null;const i=new Ht;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&r==null&&(r=t.hasM),d6(t)?M9(e??t.z!=null,r??t.m!=null)(i,t):nl(t)?zP(i,t,e,r):h6(t)?jP(i,t,jt(e,r)):p6(t)?NP(i,t,jt(e,r)):void R4().error("convertFromGeometry:unknown-geometry",new I("internal:geometry",`Unable to parse unknown geometry type '${t}'`))}function qP(t,e,r,i){const s=t&&("coords"in t?t:t.geometry);if(s==null)return null;switch(e){case"esriGeometryPoint":{let n=C4;return r&&i?n=I9:r?n=$9:i&&(n=T9),n(s)}case"esriGeometryMultipoint":return FP(s,r,i);case"esriGeometryPolyline":return DP(s,r,i);case"esriGeometryPolygon":return VP(s,r,i);default:return R4().error("convertToGeometry:unknown-geometry",new I("internal:geometry",`Unable to parse unknown geometry type '${e}'`)),null}}function qre(t,e){for(const r of e)t.push({attributes:r.attributes});return t}function GP(t,e,r,i,s){if(bs(t),r==null)return qre(t,e);switch(r){case"esriGeometryPoint":return Lre(t,e,i,s);case"esriGeometryMultipoint":return Fre(t,e,i,s);case"esriGeometryPolyline":return Dre(t,e,i,s);case"esriGeometryPolygon":return Vre(t,e,i,s);default:R4().error("convertToFeatureSet:unknown-geometry",new I("internal:geometry",`Unable to parse unknown geometry type '${r}'`))}return t}function F0e(t){const{spatialReference:e,transform:r,fields:i,hasM:s,hasZ:n,features:o,geometryType:l,exceededTransferLimit:c,queryGeometry:d,queryGeometryType:h}=t,y={features:GP([],o,l,n,s),fields:i,geometryType:l,spatialReference:e,queryGeometry:qP(d,h,!1,!1)};return r&&(y.transform=r),c&&(y.exceededTransferLimit=c),s&&(y.hasM=s),n&&(y.hasZ=n),y}function N0e(t,e){const r=new RP,{hasM:i,hasZ:s,features:n,spatialReference:o,geometryType:l,exceededTransferLimit:c,transform:d,fields:h}=t;return h&&(r.fields=h),r.geometryType=l??null,r.spatialReference=o??null,n&&UP(r.features,n,l,s,i,e),c&&(r.exceededTransferLimit=c),i&&(r.hasM=i),s&&(r.hasZ=s),d&&(r.transform=d),r}function D0e(t){const{transform:e,features:r,hasM:i,hasZ:s}=t;if(!e)return t;for(const n of r)n.geometry!=null&&u5(n.geometry,n.geometry,i,s,e),n.centroid!=null&&u5(n.centroid,n.centroid,i,s,e);return t.transform=null,t}function j0e(t,e){const{geometryType:r,features:i,hasM:s,hasZ:n}=e;if(!t)return e;for(let o=0;o<i.length;o++){const l=i[o],c=l.weakClone();c.geometry=new Ht,Ub(c.geometry,l.geometry,s,n,r,t),l.centroid&&(c.centroid=new Ht,Ub(c.centroid,l.centroid,s,n,"esriGeometryPoint",t)),i[o]=c}return e.transform=t,e}function Ub(t,e,r,i,s,n,o=r,l=i){if(Jn(t),!e?.coords.length)return null;const c=S9[s],{coords:d,lengths:h}=e,y=jt(r,i),f=jt(r&&o,i&&l),m=x9(r,i,o,l);if(!h.length)return m(t.coords,d,0,0,sf(n,d[0]),nf(n,d[1])),Jn(t,y,0),t;let g,v,b,S,$=0,E=0,T=E;for(const O of h){if(O<c)continue;let C=0;E=T,b=g=sf(n,d[$]),S=v=nf(n,d[$+1]),m(t.coords,d,E,$,b,S),C++,$+=y,E+=f;for(let z=1;z<O;z++,$+=y)b=sf(n,d[$]),S=nf(n,d[$+1]),b===g&&S===v||(m(t.coords,d,E,$,b-g,S-v),E+=f,C++,g=b,v=S);C>=c&&(t.lengths.push(C),T=E)}return bs(t.coords,T),t.coords.length?t:null}function V0e(t,e,r,i,s,n,o=r,l=i){if(Jn(t),!e?.coords.length)return null;const c=S9[s],{coords:d,lengths:h}=e,y=jt(r,i),f=jt(r&&o,i&&l),m=x9(r,i,o,l);if(!h.length)return m(t.coords,d,0,0,d[0],d[1]),Jn(t,y,0),t;let g=0;const v=n*n;for(const b of h){if(b<c){g+=b*y;continue}const S=t.coords.length/f,$=g,E=g+(b-1)*y;m(t.coords,d,t.coords.length,$,d[$],d[$+1]),l5(t.coords,d,y,v,m,$,E),m(t.coords,d,t.coords.length,E,d[E],d[E+1]);const T=t.coords.length/f-S;T>=c?t.lengths.push(T):bs(t.coords,S*f),g+=b*y}return t.coords.length?t:null}function Gre(t,e,r,i){const s=t[e],n=t[e+1],o=t[r],l=t[r+1],c=t[i],d=t[i+1];let h=o,y=l,f=c-h,m=d-y;if(f!==0||m!==0){const g=((s-h)*f+(n-y)*m)/(f*f+m*m);g>1?(h=c,y=d):g>0&&(h+=f*g,y+=m*g)}return f=s-h,m=n-y,f*f+m*m}function l5(t,e,r,i,s,n,o){let l,c=i,d=0;for(let h=n+r;h<o;h+=r)l=Gre(e,h,n,o),l>c&&(d=h,c=l);c>i&&(d-n>r&&l5(t,e,r,i,s,n,d),s(t,e,t.length,d,e[d],e[d+1]),o-d>r&&l5(t,e,r,i,s,d,o))}function z0e(t,e,r,i){if(!e?.coords?.length)return null;const s=jt(r,i);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(e&&e.coords){const d=e.coords;for(let h=0;h<d.length;h+=s){const y=d[h],f=d[h+1];n=Math.min(n,y),l=Math.max(l,y),o=Math.min(o,f),c=Math.max(c,f)}}return Nm(t)?jz(t,n,o,l,c):GS(n,o,l,c,t),t}function u5(t,e,r,i,s){const{coords:n,lengths:o}=e,l=jt(r,i);if(!n.length)return t!==e&&Jn(t),t;j2(s);const{originPosition:c,scale:d,translate:h}=s,y=Wre;y.originPosition=c;const f=y.scale;f[0]=d[0]??1,f[1]=-(d[1]??1),f[2]=d[2]??1,f[3]=d[3]??1;const m=y.translate;if(m[0]=h[0]??0,m[1]=h[1]??0,m[2]=h[2]??0,m[3]=h[3]??0,!o.length){for(let v=0;v<l;++v)t.coords[v]=lf(y,n[v],v);return t!==e&&Jn(t,l,0),t}let g=0;for(let v=0;v<o.length;v++){const b=o[v];t.lengths[v]=b;for(let E=0;E<l;++E)t.coords[g+E]=lf(y,n[g+E],E);let S=t.coords[g],$=t.coords[g+1];g+=l;for(let E=1;E<b;E++,g+=l){S+=n[g]*f[0],$+=n[g+1]*f[1],t.coords[g]=S,t.coords[g+1]=$;for(let T=2;T<l;++T)t.coords[g+T]=lf(y,n[g+T],T)}}return t!==e&&Jn(t,n.length,o.length),t}function U0e(t,e,r,i,s,n){if(Jn(t),t.lengths.push(...e.lengths),r===s&&i===n)for(let o=0;o<e.coords.length;o++)t.coords.push(e.coords[o]);else{const o=jt(r,i),l=x9(r,i,s,n),c=e.coords;for(let d=0;d<c.length;d+=o)l(t.coords,c,t.coords.length,d,c[d],c[d+1])}return t}function Bre(t,e,r,i){let s=0,n=t[i*e],o=t[i*(e+1)];for(let l=1;l<r;l++){const c=n+t[i*(e+l)],d=o+t[i*(e+l)+1],h=(c-n)*(d+o);n=c,o=d,s+=h}return .5*s}function q0e(t,e){const{coords:r,lengths:i}=t;let s=0,n=0;for(let o=0;o<i.length;o++){const l=i[o];n+=Bre(r,s,l,e),s+=l}return Math.abs(n)}function Hre(t,e,r,i){return t*i-r*e===0&&t*r+e*i>0}function G0e(t,e,r,i,s){const n=jt(i,s);if(!t.lengths.length){if(t.coords.length<2)return null;const[y,f]=t.coords,m=of(e,y),g=af(e,f);return new Ht([],[m,g])}const o=new Ht([],[0,0]),l=S9[r],c=r==="esriGeometryPolygon"||r==="esriGeometryPolyline";let d=0,h=0;for(let y=0;y<t.lengths.length;y++){const f=t.lengths[y],m=h;let g=of(e,t.coords[n*d]),v=af(e,t.coords[n*d+1]);o.coords[h++]=g,o.coords[h++]=v;let b=0,S=0,$=1;for(let E=1;E<f;E++){const T=of(e,t.coords[n*(E+d)]),O=af(e,t.coords[n*(E+d)+1]);if(T!==g||O!==v){const C=T-g,z=O-v;c&&Hre(b,S,C,z)?(o.coords[h-2]+=C,o.coords[h-1]+=z,g+=C,v+=z):(o.coords[h++]=T,o.coords[h++]=O,g=T,v=O,b=C,S=z,$+=1)}}$<l?h=m:o.lengths.push($),d+=f}return o.lengths.length===0?null:o}function Jn(t,e=0,r=0){bs(t.lengths,r),bs(t.coords,e)}function bs(t,e=0){t.length!==e&&(t.length=e)}const Wre={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function Zre(t,e){return e}function E9(t,e,r,i){switch(r){case 0:return gh(t,e+i,0);case 1:return t.originPosition==="lowerLeft"?gh(t,e+i,1):Kre(t,e+i,1)}}function BP(t,e,r,i){return r===2?gh(t,e,2):E9(t,e,r,i)}function Jre(t,e,r,i){return r===2?e===0?0:gh(t,e,3):E9(t,e,r,i)}function Qre(t,e,r,i){return r===3?e===0?0:gh(t,e,3):BP(t,e,r,i)}function gh({translate:t,scale:e},r,i){return t[i]+r*e[i]}function Kre({translate:t,scale:e},r,i){return t[i]-r*e[i]}let Yre=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=Zre,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const r=l6(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(r!=null)for(const i of e.features)r(i.geometry)}createSpatialReference(){return{}}addField(e,r){const i=e.fields;j2(i),i.push(r);const s=i.map(n=>n.name);this._attributesConstructor=function(){for(const n of s)this[n]=null}}addFeature(e,r){e.features.push(r)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(r,i,s)=>this.addCoordinatePoint(r,i,s),this.createGeometry=r=>this.createPointGeometry(r);break;case"esriGeometryPolygon":this.addCoordinate=(r,i,s)=>this._addCoordinatePolygon(r,i,s),this.createGeometry=r=>this._createPolygonGeometry(r);break;case"esriGeometryPolyline":this.addCoordinate=(r,i,s)=>this._addCoordinatePolyline(r,i,s),this.createGeometry=r=>this._createPolylineGeometry(r);break;case"esriGeometryMultipoint":this.addCoordinate=(r,i,s)=>this._addCoordinateMultipoint(r,i,s),this.createGeometry=r=>this._createMultipointGeometry(r)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,r,i){this._lengths.length===0&&(this._toAddInCurrentPath=r),this._lengths.push(r)}addQueryGeometry(e,r){const{queryGeometry:i,queryGeometryType:s}=r,n=this._transform?u5(i.clone(),i,!1,!1,this._transform):i.clone(),o=qP(n,s,!1,!1);e.queryGeometryType=s,e.queryGeometry={...o}}createPointGeometry(e){const r={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(r.z=0),e.hasM&&(r.m=0),r}addCoordinatePoint(e,r,i){const s=this._transform;switch(r=this._applyTransform(s,r,i,0),i){case 0:e.x=r;break;case 1:e.y=r;break;case 2:"z"in e?e.z=r:e.m=r;break;case 3:e.m=r}}_transformPathLikeValue(e,r){let i=0;r<=1&&(i=this._previousCoordinate[r],this._previousCoordinate[r]+=e);const s=this._transform;return this._mValueOffset!==null&&e===0&&r>0&&!(r%this._mValueOffset)?0:this._applyTransform(s,e,r,i)}_addCoordinatePolyline(e,r,i){this._dehydratedAddPointsCoordinate(e.paths,r,i)}_addCoordinatePolygon(e,r,i){this._dehydratedAddPointsCoordinate(e.rings,r,i)}_addCoordinateMultipoint(e,r,i){i===0&&e.points.push([]);const s=this._transformPathLikeValue(r,i);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,r,i){i===0&&this._toAddInCurrentPath--===0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(r,i),n=e[e.length-1];i===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),n.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:r,hasM:i}=e;return r&&i?Qre:r?BP:i?Jre:E9}};async function Xre(t,e,r,i){const s=la(t),n={...r},o=W.from(e),l=!o.quantizationParameters,{data:c}=await fre(s,o,new Yre({sourceSpatialReference:o.sourceSpatialReference,applyTransform:l}),n,i);return c}let li=class extends Z{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.uniqueIdFields=null,this.url=null}get parsedUrl(){return Qs(this.url)}async execute(e,r){const i=await this.executeJSON(e,r);return this.featureSetFromJSON(e,i,r)}async executeJSON(e,r){const i=this._normalizeQuery(e),s=e.outStatistics?.[0]!=null,n=ie("featurelayer-pbf-statistics"),o=(!s||n)&&e.returnTrueCurves!==!0;let l;if(this.pbfSupported&&o)try{l=await Xre(this.url,i,r,{uniqueIdFields:this.uniqueIdFields})}catch(c){if(c.name!=="query:parsing-pbf")throw c;this.pbfSupported=!1}return this.pbfSupported&&o||(l=await kP(this.url,i,r,{uniqueIdFields:this.uniqueIdFields})),this._normalizeFields(l.fields),l}async featureSetFromJSON(e,r,i){if(!this._queryIs3DObjectFormat(e)||this.infoFor3D==null||!r.features)return pt.fromJSON(r);const{meshFeatureSetFromJSON:s}=await Ri(R(()=>import("./money-tides-meshFeatureSet-Cqpk2fMJ.js"),__vite__mapDeps([330,3,4,1,2,5,6,7,331,327,112,113,332,13,14,333,64,326,334,69,335,145,61,118,119,60,68,65,66,67,70,55,71,325,12,336])),i);return s(e,this.infoFor3D,r)}executeForCount(e,r){return Sre(this.url,this._normalizeQuery(e),r,{uniqueIdFields:this.uniqueIdFields})}executeForExtent(e,r){return xre(this.url,this._normalizeQuery(e),r)}executeForIds(e,r){return $re(this.url,this._normalizeQuery(e),r,{uniqueIdFields:this.uniqueIdFields})}async executeRelationshipQuery(e,r){const[{default:i},{executeRelationshipQuery:s}]=await Ri(Promise.all([R(()=>Promise.resolve().then(()=>Ww),void 0),R(()=>import("./money-tides-executeRelationshipQuery-CKvERNvp.js"),__vite__mapDeps([337,3,4,1,2,5,6,7,12,13,14]))]),r);return e=i.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,r)}async executeRelationshipQueryForCount(e,r){const[{default:i},{executeRelationshipQueryForCount:s}]=await Ri(Promise.all([R(()=>Promise.resolve().then(()=>Ww),void 0),R(()=>import("./money-tides-executeRelationshipQuery-CKvERNvp.js"),__vite__mapDeps([337,3,4,1,2,5,6,7,12,13,14]))]),r);return e=i.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,r)}async executeAttachmentQuery(e,r){const{executeAttachmentQuery:i,fetchAttachments:s,processAttachmentQueryResult:n}=await Ri(R(()=>import("./money-tides-queryAttachments-D9nyjEQT.js"),__vite__mapDeps([338,3,4,1,2,5,6,7,175,13,14,12])),r),o=la(this.url);return n(o,await(this.queryAttachmentsSupported?i(o,e,r):s(o,e,r)))}async executeAttributeBinsQuery(e,r){const{executeAttributeBinsQuery:i}=await Ri(R(()=>import("./money-tides-executeAttributeBinsQuery-jE7t3OWK.js"),__vite__mapDeps([339,3,4,1,2,5,6,7,243,244,13,14,41,48,12])),r);return i(this.parsedUrl,e,r)}async executePivotQuery(e,r){const{executePivotQuery:i}=await Ri(R(()=>import("./money-tides-executePivotQuery-21reBFbF.js"),__vite__mapDeps([340,3,4,1,2,5,6,7,328,13,14,12])),r);return i(this.parsedUrl,e,r)}async executeTopFeaturesQuery(e,r){const{executeTopFeaturesQuery:i}=await Ri(R(()=>import("./money-tides-executeTopFeaturesQuery-DKv8udFw.js"),__vite__mapDeps([341,342,3,4,1,2,5,6,7,329,13,14,12])),r);return i(this.parsedUrl,e,this.sourceSpatialReference,r)}async executeForTopIds(e,r){const{executeForTopIds:i}=await Ri(R(()=>import("./money-tides-executeForTopIds-Vqwm-u0q.js"),__vite__mapDeps([343,342,3,4,1,2,5,6,7,329,13,14,12])),r);return i(this.parsedUrl,e,r)}async executeForTopExtents(e,r){const{executeForTopExtents:i}=await Ri(R(()=>import("./money-tides-executeForTopExtents-DlaIMwAq.js"),__vite__mapDeps([344,342,3,4,1,2,5,6,7,329,13,14,12])),r);return i(this.parsedUrl,e,r)}async executeForTopCount(e,r){const{executeForTopCount:i}=await Ri(R(()=>import("./money-tides-executeForTopCount-G1tNlHoO.js"),__vite__mapDeps([345,342,3,4,1,2,5,6,7,329,13,14,12])),r);return i(this.parsedUrl,e,r)}_normalizeQuery(e){let r=W.from(e);r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===e?r.clone():r,r.gdbVersion=e.gdbVersion||this.gdbVersion,r.dynamicDataSource=e.dynamicDataSource?br.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:i}=this;if(i!=null&&this._queryIs3DObjectFormat(e)){if(r=r===e?r.clone():r,r.formatOf3DObjects=LE(i),!r.formatOf3DObjects)throw new I("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(r.outSpatialReference&&!at(r.outSpatialReference,this.sourceSpatialReference))throw new I("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(r.outFields==null||!r.outFields.includes("*")){r=r===e?r.clone():r,r.outFields==null&&(r.outFields=[]);const{originX:s,originY:n,originZ:o,translationX:l,translationY:c,translationZ:d,scaleX:h,scaleY:y,scaleZ:f,rotationX:m,rotationY:g,rotationZ:v,rotationDeg:b}=i.transformFieldRoles;r.outFields.push(s,n,o,l,c,d,h,y,f,m,g,v,b)}}return r}_normalizeFields(e){if(this.fieldsIndex!=null&&e!=null)for(const r of e){const i=this.fieldsIndex.get(r.name);i&&Object.assign(r,i.toJSON())}}_queryIs3DObjectFormat(e){return this.infoFor3D!=null&&e.returnGeometry===!0&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};a([u({type:br})],li.prototype,"dynamicDataSource",void 0),a([u()],li.prototype,"fieldsIndex",void 0),a([u()],li.prototype,"gdbVersion",void 0),a([u()],li.prototype,"infoFor3D",void 0),a([u({readOnly:!0})],li.prototype,"parsedUrl",null),a([u()],li.prototype,"pbfSupported",void 0),a([u()],li.prototype,"queryAttachmentsSupported",void 0),a([u()],li.prototype,"sourceSpatialReference",void 0),a([u()],li.prototype,"uniqueIdFields",void 0),a([u({type:String})],li.prototype,"url",void 0),li=a([_("esri.layers.graphics.sources.support.QueryTask")],li);var e2;function uf(t){return t?.type==="esriSMS"}function P9(t,e,r){const i=r.minimumWritableOrigin||r.origin;return!!i&&t.originIdOf(e)>=Di(i)}function yd(t,e,r){const i=P9(this,e,r);return{ignoreOrigin:!0,allowNull:i,enabled:!!r&&r.layer?.type==="map-image"&&(r.writeSublayerStructure||i)}}function c5(t,e,r){return{enabled:!!r&&r.layer?.type==="tile"&&(P9(this,e,r)||this._isOverridden(e))}}function $n(t,e,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function t2(t,e,r){return{ignoreOrigin:!0,enabled:!!r?.writeSublayerStructure&&this.originIdOf(e)>2}}function G1(t,e,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||P9(this,e,r))}}let eie=0;const tie=new Set(["layer","parent","loaded","loadStatus","loadError","loadWarnings"]);var yl;let ee=(yl=class extends np(Ph(ep)){constructor(e){super(e),this.attributeTableTemplate=null,this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.isTable=!1,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.spatialReference=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise(this.reload(e)),this}readCapabilities(e,r){r=r.layerDefinition||r;const{attachment:i,operations:{supportsQuery:s,supportsQueryAttachments:n},query:{supportsFormatPBF:o,supportsOrderBy:l,supportsPagination:c},data:{supportsAttachment:d},queryRelated:h}=c9(r,this.url);return{attachment:{supportsOrderByFields:i?.supportsOrderByFields??!1,supportsResize:i?.supportsResize??!1,supportsTypeWildcard:i?.supportsTypeWildcard??!1},exportMap:{supportsModification:!!r.canModifyLayer},operations:{supportsQuery:s,supportsQueryAttachments:n},data:{supportsAttachment:d},query:{supportsFormatPBF:o,supportsOrderBy:l,supportsPagination:c},queryRelated:h}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:r}=this;return{minScale:e,maxScale:r}}readMaxScaleRange(e,r){return{minScale:(r=r.layerDefinition||r).minScale??0,maxScale:r.maxScale??0}}get fieldsIndex(){return new fh(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,r){if((r=r.layerDefinition||r).globalIdField)return r.globalIdField;if(r.fields){for(const i of r.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get graphicOrigin(){if(!this.layer)return null;switch(this.layer.type){case"tile":return new Rte(this.layer,this);case"map-image":return new Pte(this.layer,this)}}get id(){return this._get("id")??eie++}set id(e){this._get("id")!==e&&(this.layer?.capabilities?.exportMap?.supportsDynamicLayers!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}readIsTable(e,r){return r.type==="Table"}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,r,i,s){e&&e.length&&(r.layerDefinition={drawingInfo:{labelingInfo:e.map(n=>n.write({},s))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers?.forEach(r=>r.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,r){return r.minScale||r.layerDefinition?.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,r){return r.maxScale||r.layerDefinition?.maxScale||0}readObjectIdFieldFromService(e,r){return(r=r.layerDefinition||r).objectIdField?r.objectIdField:r.fields?.find(s=>s.type==="esriFieldTypeOID")?.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,r){const{layerDefinition:i}=r;return 1-.01*(i?.transparency??i?.drawingInfo?.transparency??0)}writeOpacity(e,r,i,s){r.layerDefinition={drawingInfo:{transparency:100-100*e}}}set orderBy(e){this._setAndNotifyLayer("orderBy",e)}writeParent(e,r){this.parent&&this.parent!==this.layer?r.parentLayerId=_5(this.parent.id):r.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{capabilities:e,fieldsIndex:r,layer:i,url:s}=this,{spatialReference:n}=i,o="gdbVersion"in i?i.gdbVersion:void 0,l=ie("featurelayer-pbf")&&e?.query.supportsFormatPBF;return new li({fieldsIndex:r,gdbVersion:o,pbfSupported:l,queryAttachmentsSupported:e?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:n,url:s})}set renderer(e){if(nm(e,this.fieldsIndex),e){for(const r of e.symbols)if(O6(r)){N.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new zn({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Yr(U.ofType(e2),e)}writeSublayers(e,r,i){this.sublayers?.length&&(r[i]=this.sublayers.map(s=>s.id).toArray().reverse())}readTitle(e,r){return r.layerDefinition?.name??r.name}readTypeIdField(e,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();const s=r.fields.find(n=>n.name.toLowerCase()===i);s&&(i=s.name)}return i}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,r=this.source;if(!e)return null;if(this._lastParsedUrl=e,r?.type==="map-layer")return`${e.path}/${r.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${fC(i)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,r,i,s){r[i]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Jr(this),r=new e2;return Jr(r).store=e.clone(tie),this.commitProperty("url"),r._lastParsedUrl=this._lastParsedUrl,r}createPopupTemplate(e){return TP(this,e)}createQuery(){return new W({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const e=(await R(async()=>{const{default:n}=await Promise.resolve().then(()=>IP);return{default:n}},void 0)).default,{layer:r,url:i}=this;let s;if(i&&this.originIdOf("url")>2)s=new e({url:i});else{if(!r?.parsedUrl)throw new I("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const n=r.parsedUrl;s=new e({url:n.path}),n&&this.source&&(this.source.type==="map-layer"?s.layerId=this.source.mapLayerId:s.dynamicDataSource=this.source)}}return r?.refreshInterval!=null&&(s.refreshInterval=r.refreshInterval),this.definitionExpression&&(s.definitionExpression=this.definitionExpression),this.floorInfo&&(s.floorInfo=P(this.floorInfo)),this.originIdOf("labelingInfo")>2&&(s.labelingInfo=P(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(s.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(s.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(s.visible=this.visible),this.originIdOf("minScale")>0&&(s.minScale=this.minScale),this.originIdOf("maxScale")>0&&(s.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(s.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(s.popupTemplate=P(this.popupTemplate)),this.originIdOf("renderer")>2&&(s.renderer=P(this.renderer)),this.source?.type==="data-layer"&&(s.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(s.title=this.title),r?.type==="map-image"&&r.originIdOf("customParameters")>0&&(s.customParameters=r.customParameters),r?.type==="tile"&&r.originIdOf("customParameters")>0&&(s.customParameters=r.customParameters),s}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){return a9(this.types,this.typeIdField,e)}getFieldDomain(e,r){const i=r?.feature,s=this.getFeatureType(i);if(s){const n=s.domains&&s.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}async queryAttachments(e,r){await this.load(),e=ft.from(e);const i=this.capabilities;if(!i?.data?.supportsAttachment)throw new I("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:s,objectIds:n,globalIds:o,num:l,size:c,start:d,where:h}=e;if(!i?.operations?.supportsQueryAttachments&&(s?.length>0||o?.length>0||c?.length>0||l||d||h))throw new I("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(n?.length||o?.length||h))throw new I("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return!i?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),this.queryTask.executeAttachmentQuery(e,r)}async queryFeatureCount(e=this.createQuery(),r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new I("queryFeatureCount:not-supported","this layer doesn't support queries.");if(!this.url)throw new I("queryFeatureCount:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeForCount(e,{...r,query:{...this.layer?.customParameters,token:i}})}async queryFeatures(e=this.createQuery(),r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new I("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new I("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(e,{...r,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(i?.features){const s=this.graphicOrigin;for(const n of i.features)n.sourceLayer=this,n.origin=s}return i}async queryObjectIds(e=this.createQuery(),r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new I("queryObjectIds:not-supported","this layer doesn't support queries.");if(!this.url)throw new I("queryObjectIds:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeForIds(e,{...r,query:{...this.layer?.customParameters,token:i}})}async queryRelatedFeatures(e,r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new I("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new I("queryRelatedFeatures:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeRelationshipQuery(e,{...r,query:{...this.layer?.customParameters,token:i}})}async queryRelatedFeaturesCount(e,r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new I("queryRelatedFeaturesCount:not-supported","this layer doesn't support queries.");if(!this.capabilities.queryRelated.supportsCount)throw new I("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!this.url)throw new I("queryRelatedFeaturesCount:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeRelationshipQueryForCount(e,{...r,query:{...this.layer?.customParameters,token:i}})}async reload(e){if(this.loadStatus==="not-loaded")return this.load(e).then(()=>{});const{layer:r,url:i}=this;if(!r&&!i)throw new I("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const s=r?await r.fetchSublayerInfo(this,e):(await Te(i,{query:{f:"json"},...e})).data;if(this.loaded&&this.originIdOf("url")>2){const n=new Set(["drawingInfo","maxScale","minScale","name"]);if(s!=null)for(const o of Object.keys(s))n.has(o)&&delete s[o]}s&&(this.sourceJSON={...this.sourceJSON,...s},this.read({layerDefinition:s},{origin:"service",layer:r,url:la(i)}))}toExportImageJSON(e){const r={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},i=y6(e,this.definitionExpression);i!=null&&(r.definitionExpression=i);const s=["renderer","labelingInfo","opacity","labelsVisible"].reduce((o,l)=>(o[l]=this.originIdOf(l),o),{});if(Object.keys(s).some(o=>s[o]>2)){const o=r.drawingInfo={};if(s.renderer>2&&(o.renderer=this.renderer?this.renderer.toJSON():null),s.labelsVisible>2&&(o.showLabels=this.labelsVisible),this.labelsVisible&&s.labelingInfo>2)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(c=>!c.labelPlacement)&&N.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let l=this.labelingInfo;this.geometryType!=null&&(l=fte(this.labelingInfo,h2.toJSON(this.geometryType))),o.showLabels=!0,o.labelingInfo=l.filter(c=>c.labelPlacement).map(c=>c.toJSON({origin:"service",layer:this.layer}))}else o.showLabels=!1;s.opacity>2&&(o.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(o.renderer)}return(this.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1)&&this.originIdOf("orderBy")>2&&(r.orderBy=this.orderBy?.map(o=>o.toJSON())??null),r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,r=>{r.color||r.style!=="esriSMSX"&&r.style!=="esriSMSCross"||(r.outline?.color?r.color=r.outline.color:r.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,r){if(e){const i=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const s of i)uf(s.symbol)&&r(s.symbol);"symbol"in e&&uf(e.symbol)&&r(e.symbol),"defaultSymbol"in e&&uf(e.defaultSymbol)&&r(e.defaultSymbol)}}_setAndNotifyLayer(e,r){const i=this.layer,s=this._get(e);let n,o;switch(e){case"definitionExpression":case"floorInfo":n="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",o="supportsModification";break;case"orderBy":n="supportsSublayerOrderBy",o="supportsModification"}const l=Jr(this).getDefaultOrigin();if(l!=="service"){if(n&&this.layer?.capabilities?.exportMap?.[n]===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${n}'`);if(o&&this.capabilities?.exportMap[o]===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${o}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,r),l!=="service"&&s!==r&&i?.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,r){r&&(r.forEach(i=>{i.parent=null,i.layer=null}),this.removeAllHandles()),e&&(e.forEach(i=>{i.parent=this,i.layer=this.layer}),this.addHandles([e.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),e.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),e.on("before-changes",i=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??1)||(N.getLogger(this).error(new I("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(e,r){const{layer:i,declaredClass:s}=this;N.getLogger(s).error(new I("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${i?.id}'`,{reason:r,sublayer:this,layer:i}))}_getLayerDomain(e){return this.fieldsIndex.get(e)?.domain??null}},e2=yl,yl.test={isMapImageLayerOverridePolicy:e=>e===t2||e===$n||e===yd,isTileImageLayerOverridePolicy:e=>e===c5},yl);a([u({type:aE,json:{name:"attributeTableInfo",write:{overridePolicy:yd},origins:{"web-scene":{write:!1}}}})],ee.prototype,"attributeTableTemplate",void 0),a([u({readOnly:!0})],ee.prototype,"capabilities",void 0),a([A("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],ee.prototype,"readCapabilities",null),a([u()],ee.prototype,"defaultPopupTemplate",null),a([u({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:yd}}})],ee.prototype,"definitionExpression",null),a([u({readOnly:!0})],ee.prototype,"effectiveScaleRange",null),a([A("service","maxScaleRange",["minScale","maxScale"])],ee.prototype,"readMaxScaleRange",null),a([u({type:[Tt],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],ee.prototype,"fields",void 0),a([u({readOnly:!0})],ee.prototype,"fieldsIndex",null),a([u({type:Ha,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:yd},origins:{"web-scene":{read:!1,write:!1}}}})],ee.prototype,"floorInfo",null),a([u({type:ue,json:{read:{source:"layerDefinition.extent"}}})],ee.prototype,"fullExtent",void 0),a([u({type:h2.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:h2.read}}}}})],ee.prototype,"geometryType",void 0),a([u({type:String})],ee.prototype,"globalIdField",void 0),a([A("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],ee.prototype,"readGlobalIdFieldFromService",null),a([u({readOnly:!0})],ee.prototype,"graphicOrigin",null),a([u({type:ve,json:{write:{ignoreOrigin:!0}}})],ee.prototype,"id",null),a([u({readOnly:!0})],ee.prototype,"isTable",void 0),a([A("service","isTable",["type"])],ee.prototype,"readIsTable",null),a([u({value:null,type:[Fe],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:t2}}})],ee.prototype,"labelingInfo",null),a([j("labelingInfo")],ee.prototype,"writeLabelingInfo",null),a([u({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:$n}}})],ee.prototype,"labelsVisible",null),a([u({value:null})],ee.prototype,"layer",null),a([u({type:String,json:{write:{overridePolicy:c5}}})],ee.prototype,"layerItemId",void 0),a([u({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:G1}}})],ee.prototype,"legendEnabled",void 0),a([u({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ee.prototype,"listMode",null),a([u({type:Number,value:0,json:{write:{overridePolicy:$n}}})],ee.prototype,"minScale",null),a([A("minScale",["minScale","layerDefinition.minScale"])],ee.prototype,"readMinScale",null),a([u({type:Number,value:0,json:{write:{overridePolicy:$n}}})],ee.prototype,"maxScale",null),a([A("maxScale",["maxScale","layerDefinition.maxScale"])],ee.prototype,"readMaxScale",null),a([u()],ee.prototype,"objectIdField",void 0),a([A("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],ee.prototype,"readObjectIdFieldFromService",null),a([u({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:$n}}})],ee.prototype,"opacity",null),a([A("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],ee.prototype,"readOpacity",null),a([j("opacity")],ee.prototype,"writeOpacity",null),a([u({value:null,type:[ko],json:{name:"layerDefinition.orderBy",read:{reader:bP},write:{overridePolicy:yd},origins:{"web-scene":{read:!1,write:!1}}}})],ee.prototype,"orderBy",null),a([u({json:{type:ve,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:$n}}})],ee.prototype,"parent",void 0),a([j("parent")],ee.prototype,"writeParent",null),a([u({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:G1,writer(t,e,r){e[r]=!t}}}})],ee.prototype,"popupEnabled",void 0),a([u({type:oa,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:G1}}})],ee.prototype,"popupTemplate",void 0),a([u({readOnly:!0})],ee.prototype,"queryTask",null),a([u({type:[Nr],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],ee.prototype,"relationships",void 0),a([u({types:cp,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:t2},origins:{"web-scene":{types:wP,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:t2}}}}})],ee.prototype,"renderer",null),a([u({types:{key:"type",base:null,typeMap:{"data-layer":br,"map-layer":zn}},cast(t){if(t){if("mapLayerId"in t)return Cc(zn,t);if("dataSource"in t)return Cc(br,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:$n}}})],ee.prototype,"source",null),a([u()],ee.prototype,"sourceJSON",void 0),a([u({type:B,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],ee.prototype,"spatialReference",void 0),a([u({value:null,json:{type:[ve],write:{target:"subLayerIds",allowNull:!0,overridePolicy:$n}}})],ee.prototype,"sublayers",null),a([xe("sublayers")],ee.prototype,"castSublayers",null),a([j("sublayers")],ee.prototype,"writeSublayers",null),a([u({type:String,json:{name:"name",write:{overridePolicy:G1}}})],ee.prototype,"title",void 0),a([A("service","title",["name","layerDefinition.name"])],ee.prototype,"readTitle",null),a([u({type:String})],ee.prototype,"typeIdField",void 0),a([u({json:{read:!1},readOnly:!0,value:"sublayer"})],ee.prototype,"type",void 0),a([A("typeIdField",["layerDefinition.typeIdField"])],ee.prototype,"readTypeIdField",null),a([u({type:[os],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],ee.prototype,"types",void 0),a([u({type:String,json:{name:"layerUrl",write:{overridePolicy:c5}}})],ee.prototype,"url",null),a([u({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:$n}}})],ee.prototype,"visible",null),a([j("visible")],ee.prototype,"writeVisible",null),ee=e2=a([_("esri.layers.support.Sublayer")],ee);function qb(t,e,r){return e.flatten(({sublayers:s})=>s).length!==t.length?!0:!!t.some(s=>s.originIdOf("minScale")>r||s.originIdOf("maxScale")>r||s.originIdOf("renderer")>r||s.originIdOf("labelingInfo")>r||s.originIdOf("opacity")>r||s.originIdOf("labelsVisible")>r||s.originIdOf("source")>r)||!HP(t,e)}function rie(t,e,r){return!!t.some(i=>{const s=i.source,n=!s||s.type==="map-layer"&&s.mapLayerId===i.id&&(s.gdbVersion==null||s.gdbVersion===r);i.commitProperty("renderer"),i.commitProperty("labelingInfo"),i.commitProperty("opacity"),i.commitProperty("labelsVisible"),i.commitProperty("orderBy");const o=i.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1;return!n||i.originIdOf("renderer")>2||i.originIdOf("labelingInfo")>2||i.originIdOf("opacity")>2||i.originIdOf("labelsVisible")>2||o&&i.originIdOf("orderBy")>2})||!HP(t,e)}function HP(t,e){if(!t?.length||e==null)return!0;const r=e.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(t.length>r.length)return!1;let i=0;const s=r.length;for(const{id:n}of t){for(;i<s&&r[i]!==n;)i++;if(i>=s)return!1}return!0}function iie(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition?.minScale!=null)}function sie(t,e){const r=[],i={};return t&&t.forEach(s=>{const n=new ee;if(n.read(s,e),i[n.id]=n,s.parentLayerId!=null&&s.parentLayerId!==-1){const o=i[s.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(n)}else r.unshift(n)}),r}const B1=U.ofType(ee);function WP(t,e){t&&t.forEach(r=>{e(r),r.sublayers&&r.sublayers.length&&WP(r.sublayers,e)})}const nie=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.allSublayers=new Gr({getCollections:()=>[this.sublayers],getChildrenFunction:s=>s.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{},6:{}},this.subtables=null,this.addHandles([X(()=>this.sublayers,(s,n)=>this._handleSublayersChange(s,n),ht),X(()=>this.subtables,(s,n)=>this._handleSublayersChange(s,n),ht)])}destroy(){this.allSublayers.destroy()}readSublayers(i,s){if(!s||!i)return;const{sublayersSourceJSON:n}=this,o=Di(s.origin);if(o<2||(n[o]={context:s,visibleLayers:i.visibleLayers||n[o].visibleLayers,layers:i.layers||n[o].layers},o>2))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:l,origin:c}=this.createSublayersForOrigin("web-document"),d=Jr(this);d.setDefaultOrigin(c),this._set("sublayers",new B1(l)),d.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(s=>s.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){let s;const n=Di(i==="web-document"?"web-map":i);let o=2,l=this.sublayersSourceJSON[2].layers,c=this.sublayersSourceJSON[2].context,d=null;const h=[3,4,5].filter(b=>b<=n);for(const b of h){const S=this.sublayersSourceJSON[b];iie(S.layers)&&(o=b,l=S.layers,c=S.context,S.visibleLayers&&(d={visibleLayers:S.visibleLayers,context:S.context}))}const y=[3,4,5].filter(b=>b>o&&b<=n);let f=null;for(const b of y){const{layers:S,visibleLayers:$,context:E}=this.sublayersSourceJSON[b];S&&(f={layers:S,context:E},s??=b),$&&(d={visibleLayers:$,context:E})}const m=sie(l,c),g=new Map,v=new Set;if(f)for(const b of f.layers)g.set(b.id,b);if(d?.visibleLayers)for(const b of d.visibleLayers)v.add(b);return WP(m,b=>{f&&b.read(g.get(b.id),f.context),d&&b.read({defaultVisibility:v.has(b.id)},d.context)}),{origin:n2(o),originWithPartialOverrides:s?n2(s):null,sublayers:new B1({items:m})}}read(i,s){super.read(i,s),this.readSublayers(i,s)}_handleSublayersChange(i,s){s&&(s.forEach(n=>{n.parent=null,n.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(n=>{n.parent=this,n.layer=this}),this.addHandles([i.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),i.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",n=>{N.getLogger("esri.layers.TileLayer").error(new I("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),n.preventDefault()}),"sublayers-owner"))}};return a([u({readOnly:!0})],r.prototype,"allSublayers",void 0),a([u({readOnly:!0,type:U.ofType(ee)})],r.prototype,"serviceSublayers",void 0),a([u({value:null,type:B1,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],r.prototype,"sublayers",void 0),a([u({readOnly:!0})],r.prototype,"sublayersSourceJSON",void 0),a([u({type:B1,json:{read:{source:"tables"}}})],r.prototype,"subtables",void 0),r=a([_("esri.layers.mixins.SublayersOwner")],r),r};function W0e(t){const e=t.layer;return"floorInfo"in e&&e.floorInfo?.floorField&&"floors"in t.view?ZP(t.view.floors,e.floorInfo.floorField):null}function Gb(t,e){return"floorInfo"in e&&e.floorInfo?.floorField?ZP(t,e.floorInfo.floorField):null}function ZP(t,e){if(!t?.length)return null;const r=t.filter(i=>i!=="").map(i=>`'${i}'`);return r.push("''"),`${e} IN (${r.join(",")}) OR ${e} IS NULL`}const oie={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Oi=class extends Z{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(r=>{const i=Gb(this.floors,r);return r.toExportImageJSON(i)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&rie(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",r=>this.notifyChange(oie[r.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(r=>r.id).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,r=this.visibleSublayers.filter(i=>i.definitionExpression!=null||e&&i.floorInfo!=null);return r.length?JSON.stringify(r.reduce((i,s)=>{const n=Gb(this.floors,s),o=y6(n,s.definitionExpression);return o!=null&&(i[s.id]=o),i},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,i=this.scale,s=o=>{o.visible&&(i===0||lQ(i,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(s):e.unshift(o))};r?.forEach(s);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some((o,l)=>e[l]!==o)?e:n}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};a([u({readOnly:!0})],Oi.prototype,"dynamicLayers",null),a([u()],Oi.prototype,"floors",void 0),a([u({readOnly:!0})],Oi.prototype,"hasDynamicLayers",null),a([u()],Oi.prototype,"layer",null),a([u({readOnly:!0})],Oi.prototype,"layers",null),a([u({readOnly:!0})],Oi.prototype,"layerDefs",null),a([u({type:Number})],Oi.prototype,"scale",void 0),a([u({readOnly:!0})],Oi.prototype,"version",null),a([u({readOnly:!0})],Oi.prototype,"visibleSublayers",null),Oi=a([_("esri.layers.support.ExportImageParameters")],Oi);async function JP(t,e,r){let i;try{i=await createImageBitmap(t)}catch(s){throw new I("request:server",`Unable to load ${e}`,{url:e,error:s})}return Ce(r),i}async function J0e(t,e,r,i,s){let n;try{n=await createImageBitmap(t)}catch(o){throw new I("request:server",`Unable to load tile ${e}/${r}/${i}`,{error:o,level:e,row:r,col:i})}return Ce(s),n}let Be=class extends Wh(g9(Qh(nie(Mte(WM(P4(O4(np(m9(HM(QM(Oe)))))))))))){constructor(...e){super(...e),this._exportImageParameters=new Oi({layer:this}),this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.elevationInfo=new ns({mode:"on-the-ground"}),this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeZone=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null,this._debouncedSaveOperations=U2(async(r,i,s)=>{const{save:n,saveAs:o}=await R(()=>import("./money-tides-mapImageLayerUtils-g4e-YVax.js"),__vite__mapDeps([346,323,3,4,1,2,5,6,7,322,320,12,13,14]));switch(r){case 0:return n(this,i);case 1:return o(this,s,i)}})}normalizeCtorArgs(e,r){return typeof e=="string"?{url:e,...r}:e}load(e){const r=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(nr).then(()=>this._fetchService(r))),Promise.resolve(this)}destroy(){this._exportImageParameters.destroy()}readImageFormat(e,r){const i=r.supportedImageFormatTypes;return i&&i.includes("PNG32")?"png32":"png24"}get loaded(){return super.loaded}set portalItem(e){super.portalItem=e}writeSublayers(e,r,i,s){if(!this.loaded||!e)return;const n=e.slice().reverse().flatten(({sublayers:f})=>f&&f.toArray().reverse()).toArray();let o=!1;const l=Di(s.origin);let c;if(this.capabilities?.operations.supportsExportMap&&this.capabilities?.exportMap?.supportsDynamicLayers){if(l===3){const f=this.createSublayersForOrigin("service").sublayers;o=qb(n,f,2)}else if(l>3){const f=this.createSublayersForOrigin("portal-item");o=qb(n,f.sublayers,Di(f.origin)),c=f.originWithPartialOverrides}}const d=[],h={writeSublayerStructure:o,...s,minimumWritableOrigin:c};let y=o||this.hasVisibleLayersForOrigin(l);n.forEach(f=>{const m=f.write({},h);d.push(m),y=y||f.originOf("visible")==="user"}),d.some(f=>Object.keys(f).length>1)&&(r.layers=d),y&&(r.visibleLayers=n.filter(f=>f.visible).map(f=>f.id))}createExportImageParameters(e,r,i,s){const n=s?.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian()),this._exportImageParameters.floors=s?.floors??null,this._exportImageParameters.scale=s?.scale||yg({extent:e,width:r})*n;const o=this._exportImageParameters.toJSON(),l=!s?.rotation||this.version<10.3?{}:{rotation:-s.rotation},c=e?.spatialReference,d=Kd(c);if(s?.scale&&e){const y=e.width/r*(_i(e?.spatialReference)*D5);o.dpi=s.scale/y}o.dpi*=n;const h={};if(s?.timeExtent){const{start:y,end:f}=s.timeExtent.toJSON();h.time=y&&f&&y===f?""+y:`${y??"null"},${f??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(h.time="null,null");return{bbox:e?e.xmin+","+e.ymin+","+e.xmax+","+e.ymax:void 0,bboxSR:d,imageSR:d,size:r+","+i,...o,...l,...h}}async fetchImage(e,r,i,s){const{data:n}=await this._fetchImage("image",e,r,i,s);return n}async fetchImageBitmap(e,r,i,s){const{data:n,url:o}=await this._fetchImage("blob",e,r,i,s);return JP(n,o,s?.signal)}async fetchRecomputedExtents(e={}){const r={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:i}=await Te(this.url,r),{extent:s,fullExtent:n,timeExtent:o}=i,l=s||n;return{fullExtent:l&&ue.fromJSON(l),timeExtent:o&&it.fromJSON({start:o[0],end:o[1]})}}loadAll(){return H2(this,e=>{e(this.allSublayers),e(this.subtables)})}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,r){return this._debouncedSaveOperations(1,r,e)}serviceSupportsSpatialReference(e){return xP(this,e)}async _fetchImage(e,r,i,s,n){const o={responseType:e,signal:n?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(r,i,s,n),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},l=this.parsedUrl.path+"/export";if(o.query?.dynamicLayers!=null&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new I("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o.query});try{const{data:c}=await Te(l,o);return{data:c,url:l}}catch(c){throw vi(c)?c:new I("mapimagelayer:image-fetch-error",`Unable to load image: ${l}`,{error:c})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:r,ssl:i}=await Te(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r,this.read(r,{origin:"service",url:this.parsedUrl})}hasVisibleLayersForOrigin(e){return!(e==null||!this.sublayersSourceJSON[e]?.visibleLayers)}};a([u(Vc("dateFieldsTimeReference"))],Be.prototype,"dateFieldsTimeZone",void 0),a([u({type:Boolean})],Be.prototype,"datesInUnknownTimezone",void 0),a([u()],Be.prototype,"dpi",void 0),a([u()],Be.prototype,"elevationInfo",void 0),a([u()],Be.prototype,"gdbVersion",void 0),a([u()],Be.prototype,"imageFormat",void 0),a([A("imageFormat",["supportedImageFormatTypes"])],Be.prototype,"readImageFormat",null),a([u({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],Be.prototype,"imageMaxHeight",void 0),a([u({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],Be.prototype,"imageMaxWidth",void 0),a([u()],Be.prototype,"imageTransparency",void 0),a([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Be.prototype,"isReference",void 0),a([u({json:{read:!1,write:!1}})],Be.prototype,"labelsVisible",void 0),a([u({type:["ArcGISMapServiceLayer"]})],Be.prototype,"operationalLayerType",void 0),a([u({json:{read:!1,write:!1}})],Be.prototype,"popupEnabled",void 0),a([u(Vc("preferredTimeReference"))],Be.prototype,"preferredTimeZone",void 0),a([u()],Be.prototype,"sourceJSON",void 0),a([u({json:{write:{ignoreOrigin:!0}}})],Be.prototype,"sublayers",void 0),a([j("sublayers",{layers:{type:[ee]},visibleLayers:{type:[ve]}})],Be.prototype,"writeSublayers",null),a([u({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],Be.prototype,"listMode",void 0),a([u({json:{read:!1},readOnly:!0,value:"map-image"})],Be.prototype,"type",void 0),a([u(Y6)],Be.prototype,"url",void 0),Be=a([_("esri.layers.MapImageLayer")],Be);const QP=Be,aie=Object.freeze(Object.defineProperty({__proto__:null,default:QP},Symbol.toStringTag,{value:"Module"})),lie=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function KP(t){return t!=null&&lie.some(([e,r])=>t>=e&&t<=r)}const uie={visible:"visibleSublayers"};let kn=class extends Z{constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",r=>this.notifyChange(uie[r.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,i=e?.sublayers,s=[],n=o=>{const{minScale:l,maxScale:c,sublayers:d,visible:h}=o;h&&(r===0||(l===0||r<=l)&&(c===0||r>=c))&&(d?d.forEach(n):s.push(o))};return i?.forEach(n),s}toJSON(){const{layer:e,layers:r}=this,{imageFormat:i,imageTransparency:s,version:n}=e;return{format:i,request:"GetMap",service:"WMS",styles:"",transparent:s?"TRUE":"FALSE",version:n,layers:r}}};a([u()],kn.prototype,"layer",null),a([u({readOnly:!0})],kn.prototype,"layers",null),a([u({type:Number})],kn.prototype,"scale",void 0),a([u({readOnly:!0})],kn.prototype,"version",null),a([u({readOnly:!0})],kn.prototype,"visibleSublayers",null),kn=a([_("esri.layers.support.ExportWMSImageParameters")],kn);var r2;let cie=0,je=r2=class extends Ph(XZ){constructor(t){super(t),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([Ui(()=>this.sublayers,"after-add",({item:e})=>{e.parent=this,e.layer=this.layer},ht),Ui(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},ht),X(()=>this.sublayers,(e,r)=>{if(r)for(const i of r)i.layer=i.parent=null;if(e)for(const i of e)i.parent=this,i.layer=this.layer},ht),X(()=>this.layer,e=>{if(this.sublayers)for(const r of this.sublayers)r.layer=e},ht)])}get id(){return this._get("id")??cie++}set id(t){this._set("id",t)}readLegendUrl(t,e){return e.legendUrl??e.legendURL??null}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}castSublayers(t){return Yr(U.ofType(r2),t)}set visible(t){this._setAndNotifyLayer("visible",t)}clone(){const t=new r2;return this.hasOwnProperty("description")&&(t.description=this.description),this.hasOwnProperty("fullExtent")&&(t.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(t.fullExtents=this.fullExtents?.map(e=>e.clone())??null),this.hasOwnProperty("legendUrl")&&(t.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(t.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(t.layer=this.layer),this.hasOwnProperty("name")&&(t.name=this.name),this.hasOwnProperty("parent")&&(t.parent=this.parent),this.hasOwnProperty("queryable")&&(t.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(t.sublayers=this.sublayers?.map(e=>e.clone())),this.hasOwnProperty("spatialReferences")&&(t.spatialReferences=this.spatialReferences?.map(e=>e)),this.hasOwnProperty("visible")&&(t.visible=this.visible),this.hasOwnProperty("title")&&(t.title=this.title),t}_setAndNotifyLayer(t,e){const r=this.layer;this._get(t)!==e&&(this._set(t,e),r&&r.emit("wms-sublayer-update",{propertyName:t,id:this.id}))}};a([u()],je.prototype,"description",void 0),a([u({readOnly:!0})],je.prototype,"dimensions",void 0),a([u({type:ue,json:{name:"extent"}})],je.prototype,"fullExtent",void 0),a([u()],je.prototype,"fullExtents",void 0),a([u({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],je.prototype,"id",null),a([u({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],je.prototype,"legendUrl",void 0),a([A("legendUrl",["legendUrl","legendURL"])],je.prototype,"readLegendUrl",null),a([u({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],je.prototype,"legendEnabled",void 0),a([u()],je.prototype,"layer",void 0),a([u()],je.prototype,"maxScale",void 0),a([u()],je.prototype,"minScale",void 0),a([u({readOnly:!0})],je.prototype,"effectiveScaleRange",null),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],je.prototype,"name",void 0),a([u()],je.prototype,"parent",void 0),a([u({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],je.prototype,"popupEnabled",void 0),a([u({type:Boolean,json:{write:{ignoreOrigin:!0}}})],je.prototype,"queryable",void 0),a([u()],je.prototype,"sublayers",void 0),a([xe("sublayers")],je.prototype,"castSublayers",null),a([u({type:[Number],json:{read:{source:"spatialReferences"}}})],je.prototype,"spatialReferences",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],je.prototype,"title",void 0),a([u({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],je.prototype,"visible",null),je=r2=a([_("esri.layers.support.WMSSublayer")],je);const Bb={84:4326,83:4269,27:4267};function pie(t){if(!t)return null;const e={idCounter:-1};typeof t=="string"&&(t=new DOMParser().parseFromString(t,"text/xml"));const r=t.documentElement;if(r.nodeName==="ServiceExceptionReport"){const he=Array.prototype.slice.call(r.childNodes).map(Vt=>Vt.textContent).join(`\r
`);throw new I("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",he)}const i=ar("Capability",r),s=ar("Service",r),n=i&&ar("Request",i);if(!i||!s||!n)return null;const o=ar("Layer",i);if(!o)return null;const l=r.nodeName==="WMS_Capabilities"||r.nodeName==="WMT_MS_Capabilities"?r.getAttribute("version"):"1.3.0",c=Vs("Title",s,"")||Vs("Name",s,""),d=Vs("AccessConstraints",s,""),h=/^none$/i.test(d)?"":d,y=Vs("Abstract",s,""),f=parseInt(Vs("MaxWidth",s,"5000"),10),m=parseInt(Vs("MaxHeight",s,"5000"),10),g=Wb(n,"GetMap"),v=Hb(n,"GetMap"),b=fd(o,l,e);if(!b)return null;let S,$=0;const E=Array.prototype.slice.call(i.childNodes),T=b.sublayers??[],O=he=>{he!=null&&T.push(he)};E.forEach(he=>{he.nodeName==="Layer"&&($===0?S=he:($===1&&b.name&&(b.name="",O(fd(S,l,e))),O(fd(he,l,e))),$++)});const C=b.sublayers??[],z=b.fullExtents??[];C.length===0&&C.push(b),b.extent??=C[0].extent;const q=b.spatialReferences.length>0?b.spatialReferences:YP(b),J=Hb(n,"GetFeatureInfo"),oe=J?Wb(n,"GetFeatureInfo"):null,le=XP(C),re=b.minScale||0,Ie=b.maxScale||0,pe=b.dimensions??[],_t=le.reduce((he,Vt)=>he.concat(Vt.dimensions??[]),[]),Er=pe.concat(_t).filter(tO);let Ot=null;if(Er.length){const he=Er.map(ca=>{const{extent:io}=ca;return yie(io)?io.map(Fl=>Fl.getTime()):io?.map(Fl=>[Fl.min.getTime(),Fl.max.getTime()])}).flat(2).filter(wi),{start:Vt,end:L4}=he.reduce((ca,io)=>({start:Math.min(ca.start,io),end:Math.max(ca.end,io)}),{start:1/0,end:-1/0});Ot={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Vt,L4]}}return{copyright:h,description:y,dimensions:pe,extent:b.extent,fullExtents:z,featureInfoFormats:oe,featureInfoUrl:J,mapUrl:v,maxWidth:f,maxHeight:m,maxScale:Ie,minScale:re,layers:le,spatialReferences:q,supportedImageFormatTypes:g,timeInfo:Ot,title:c,version:l}}function die(t){const e=t.filter(r=>r.popupEnabled&&r.name&&r.queryable);return e.length?e.map(({name:r})=>r).join():null}function YP(t){if(t.spatialReferences.length>0)return t.spatialReferences;if(t.sublayers)for(const e of t.sublayers){const r=YP(e);if(r.length>0)return r}return[]}function XP(t){let e=[];for(const r of t)e.push(r),r.sublayers?.length&&(e=e.concat(XP(r.sublayers)),delete r.sublayers);return e}function i2(t,e,r){return e.getAttribute(t)??r}function hie(t,e,r,i){const s=ar(t,r);return s?i2(e,s,i):i}function ar(t,e){for(let r=0;r<e.childNodes.length;r++){const i=e.childNodes[r];if(eO(i)&&i.nodeName===t)return i}return null}function s2(t,e){if(e==null)return[];const r=[];for(let i=0;i<e.childNodes.length;i++){const s=e.childNodes[i];eO(s)&&s.nodeName===t&&r.push(s)}return r}function Vs(t,e,r){return ar(t,e)?.textContent??r}function cf(t,e,r){const i=parseFloat(t.getAttribute("minx")??"0"),s=parseFloat(t.getAttribute("miny")??"0"),n=parseFloat(t.getAttribute("maxx")??"0"),o=parseFloat(t.getAttribute("maxy")??"0");return{xmin:r?isNaN(s)?-Number.MAX_VALUE:s:isNaN(i)?-Number.MAX_VALUE:i,ymin:r?isNaN(i)?-Number.MAX_VALUE:i:isNaN(s)?-Number.MAX_VALUE:s,xmax:r?isNaN(o)?Number.MAX_VALUE:o:isNaN(n)?Number.MAX_VALUE:n,ymax:r?isNaN(n)?Number.MAX_VALUE:n:isNaN(o)?Number.MAX_VALUE:o,spatialReference:{wkid:e}}}function Hb(t,e){const r=ar(e,t);if(r){const i=ar("DCPType",r);if(i){const s=ar("HTTP",i);if(s){const n=ar("Get",s);if(n){let o=hie("OnlineResource","xlink:href",n,null);if(o){const l=o.indexOf("&");return l!==-1&&l===o.length-1&&(o=o.slice(0,-1)),mie(o,["service","request"])}}}}}return null}function Wb(t,e){const r=s2("Operation",t);if(!r.length)return s2("Format",ar(e,t)).map(({textContent:s})=>s).filter(wi);const i=[];for(const s of r)if(s.getAttribute("name")===e){const n=s2("Format",s);for(const{textContent:o}of n)o!=null&&i.push(o)}return i}function Zb(t,e,r){const i=ar(e,t);if(!i)return r;const{textContent:s}=i;if(s==null||s==="")return r;const n=Number(s);return isNaN(n)?r:n}function fd(t,e,r){if(!t)return null;const i=t.getAttribute("queryable")?.toLowerCase(),s=i==="1"||i==="true",n={id:r.idCounter++,fullExtents:[],parentLayerId:null,queryable:s,spatialReferences:[],sublayers:null},o=ar("LatLonBoundingBox",t),l=ar("EX_GeographicBoundingBox",t),c=o?cf(o,4326):l?{xmin:parseFloat(Vs("westBoundLongitude",l,"0")),ymin:parseFloat(Vs("southBoundLatitude",l,"0")),xmax:parseFloat(Vs("eastBoundLongitude",l,"0")),ymax:parseFloat(Vs("northBoundLatitude",l,"0")),spatialReference:{wkid:4326}}:{xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:{wkid:4326}};n.minScale=Zb(t,"MaxScaleDenominator",0),n.maxScale=Zb(t,"MinScaleDenominator",0);const d=["1.0.0","1.1.0","1.1.1"].includes(e)?"SRS":"CRS";return Array.prototype.slice.call(t.childNodes).forEach(h=>{if(h.nodeName==="Name")n.name=h.textContent||"";else if(h.nodeName==="Title")n.title=h.textContent||"";else if(h.nodeName==="Abstract")n.description=h.textContent||"";else if(h.nodeName==="BoundingBox"){const y=h.getAttribute(d),f=y?.indexOf(":");if(f&&f>-1){let m=parseInt(y.slice(f+1),10);m===0||isNaN(m)||(m=Bb[m]??m);const g=e==="1.3.0"?cf(h,m,KP(m)):cf(h,m);g&&n.fullExtents&&n.fullExtents.push(g)}}else if(h.nodeName===d)(h.textContent?.split(" ")??[]).forEach(y=>{let f=NaN;if(y.includes(":")){const[m,g]=y.toUpperCase().split(":");m!=="CRS"&&m!=="EPSG"||(f=parseInt(g,10))}else f=parseInt(y,10);if(f!==0&&!isNaN(f)){const m=Bb[f]??f;n.spatialReferences.includes(m)||n.spatialReferences.push(m)}});else if(h.nodeName!=="Style"||n.legendUrl){if(h.nodeName==="Layer"){const y=fd(h,e,r);y&&(y.parentLayerId=n.id,n.sublayers||(n.sublayers=[]),n.sublayers.push(y))}}else{const y=ar("LegendURL",h);if(y){const f=ar("OnlineResource",y);f&&(n.legendUrl=f.getAttribute("xlink:href"))}}}),n.extent=c,n.dimensions=s2("Dimension",t).filter(h=>h.getAttribute("name")&&h.getAttribute("units")&&h.textContent).map(h=>{const y=h.getAttribute("name"),f=h.getAttribute("units"),m=h.textContent,g=h.getAttribute("unitSymbol")??void 0,v=h.getAttribute("default")??void 0,b=i2("default",h,"0")!=="0",S=i2("nearestValue",h,"0")!=="0",$=i2("current",h,"0")!=="0";return tO({name:y,units:f})?{name:"time",units:"ISO8601",extent:Kb(m),default:Kb(v),multipleValues:b,nearestValue:S,current:$}:fie({name:y,units:f})?{name:"elevation",units:f,extent:Jb(m),unitSymbol:g,default:Jb(v),multipleValues:b,nearestValue:S}:{name:y,units:f,extent:Qb(m),unitSymbol:g,default:Qb(v),multipleValues:b,nearestValue:S}}),n}function yie(t){return Array.isArray(t)&&t.length>0&&t[0]instanceof Date}function eO(t){return t.nodeType===Node.ELEMENT_NODE}function fie(t){return/^elevation$/i.test(t.name)&&/^(epsg|crs):\d+$/i.test(t.units)}function tO(t){return/^time$/i.test(t.name)&&/^iso8601$/i.test(t.units)}function mie(t,e){const r=[],i=Qs(t);for(const s in i.query)i.query.hasOwnProperty(s)&&(e.includes(s.toLowerCase())||r.push(s+"="+i.query[s]));return i.path+(r.length?"?"+r.join("&"):"")}function Jb(t){if(!t)return;const e=t.includes("/"),r=t.split(",");return e?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:parseFloat(s[0]),max:parseFloat(s[1]),resolution:s.length>=3&&s[2]!=="0"?parseFloat(s[2]):void 0}}).filter(wi):r.map(i=>parseFloat(i))}function Qb(t){if(!t)return;const e=t.includes("/"),r=t.split(",");return e?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:s[0],max:s[1],resolution:s.length>=3&&s[2]!=="0"?s[2]:void 0}}).filter(wi):r}function Kb(t){if(!t)return;const e=t.includes("/"),r=t.split(",");return e?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:pf(s[0]),max:pf(s[1]),resolution:s.length>=3&&s[2]!=="0"?gie(s[2]):void 0}}).filter(wi):r.map(i=>pf(i))}function pf(t){return Re.fromISO(t,{zone:Lc.utcInstance}).toJSDate()}function gie(t){const e=/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i,r=t.match(e);return r?{years:Yl(r[1]),months:Yl(r[2]),days:Yl(r[3]),hours:Yl(r[4]),minutes:Yl(r[5]),seconds:Yl(r[6])}:null}function Yl(t){if(!t)return 0;const e=/(?:\d+(?:\.|,)\d+|\d+)/,r=t.match(e);if(!r)return 0;const i=r[0].replace(",",".");return Number(i)}function df(t){return t.toISOString().replace(/\.[0-9]{3}/,"")}const vie="0000-01-01T00:00:00Z",wie="9999-12-31T23:59:59Z";function Yb(t){if(!t||t.isAllTime||t.isEmpty)return;const{start:e,end:r}=t;return e&&r&&e.getTime()===r.getTime()?`${df(e)}`:`${e?df(e):vie}/${r?df(r):wie}`}const Xb=new Set([102100,3857,102113,900913]),bie=new Set([3395,54004]);function _ie(t,e){let r=t.wkid;return e==null?r:(r!=null&&e.includes(r)||!t.latestWkid||(r=t.latestWkid),r!=null&&Xb.has(r)?e.find(i=>Xb.has(i))||e.find(i=>bie.has(i))||102100:r)}const hf=new be({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function e_(t){return t==="text/html"}function t_(t){return t==="text/plain"}let we=class extends Wh(g9(m9(Qh(P4(O4(np(Oe))))))){constructor(...t){super(...t),this.allSublayers=new Gr({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([Ui(()=>this.sublayers,"after-add",({item:e})=>{e.parent=e.layer=this},ht),Ui(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},ht),X(()=>this.sublayers,(e,r)=>{if(r)for(const i of r)i.layer=i.parent=null;if(e)for(const i of e)i.parent=i.layer=this},ht)])}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}destroy(){this.allSublayers.destroy()}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},t).catch(nr).then(()=>this._fetchService(e)).then(()=>this._checkLayerValidity())),Promise.resolve(this)}set timeInfo(t){super.timeInfo=t}readFullExtentFromItemOrMap(t,e){const r=e.extent;return r?new ue({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(t,e){e.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]]}get featureInfoFormat(){return this.featureInfoFormats==null?null:this.featureInfoFormats.find(e_)??this.featureInfoFormats.find(t_)??null}set featureInfoFormat(t){t==null?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):(e_(t)||t_(t))&&this._override("featureInfoFormat",t)}readImageFormat(t,e){const r=e.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(t,e){return new B(e.spatialReferences[0])}writeSpatialReferences(t,e){const r=this.spatialReference?.wkid;t&&r?(e.spatialReferences=t.filter(i=>i!==r),e.spatialReferences.unshift(r)):e.spatialReferences=t}readSublayersFromItemOrMap(t,e,r){return r_(e.layers,r,e.visibleLayers)}readSublayers(t,e,r){return r_(e.layers,r)}writeSublayers(t,e,r,i){e.layers=[];const s=new Map,n=t.flatten(({sublayers:o})=>o??[]);for(const o of n)if(typeof o.parent?.id=="number"){const l=s.get(o.parent.id);l!=null?l.push(o.id):s.set(o.parent.id,[o.id])}for(const o of n){const l={sublayer:o,...i},c=o.write({parentLayerId:typeof o.parent?.id=="number"?o.parent.id:-1},l);if(s.has(o.id)&&(c.sublayerIds=s.get(o.id)),!o.sublayers&&o.name){const d=o.write({},l);delete d.id,e.layers.push(d)}}e.visibleLayers=n.filter(({visible:o,sublayers:l})=>o&&!l).map(({name:o})=>o).toArray()}set url(t){if(!t)return void this._set("url",t);const{path:e,query:r}=Qs(t);for(const s in r)/^(request|service)$/i.test(s)&&delete r[s];const i=e8(e,r??{});this._set("url",i)}createExportImageParameters(t,e,r,i){const s=i?.pixelRatio??1,n=yg({extent:t,width:e})*s,o=new kn({layer:this,scale:n}),{xmin:l,ymin:c,xmax:d,ymax:h,spatialReference:y}=t,f=_ie(y,this.spatialReferences),m=this.version==="1.3.0"&&KP(f)?`${c},${l},${h},${d}`:`${l},${c},${d},${h}`,g=o.toJSON(),v=this.version==="1.3.0"?"crs":"srs";return{bbox:m,[v]:f==null||isNaN(f)?void 0:"EPSG:"+f,...g}}async fetchImage(t,e,r,i){const s=this.mapUrl,n=this.createExportImageParameters(t,e,r,i);if(!n.layers){const c=document.createElement("canvas");return c.width=e,c.height=r,c}const o=Yb(i?.timeExtent),l={responseType:"image",query:this._mixCustomParameters({width:e,height:r,...n,time:o,...this.refreshParameters}),signal:i?.signal};return Te(s??"",l).then(c=>c.data)}async fetchImageBitmap(t,e,r,i){const s=this.mapUrl??"",n=this.createExportImageParameters(t,e,r,i);if(!n.layers){const d=document.createElement("canvas");return d.width=e,d.height=r,d}const o=Yb(i?.timeExtent),l={responseType:"blob",query:this._mixCustomParameters({width:e,height:r,...n,time:o,...this.refreshParameters}),signal:i?.signal},{data:c}=await Te(s,l);return JP(c,s,i?.signal)}fetchFeatureInfo(t,e,r,i,s){const n=yg({extent:t,width:e}),o=new kn({layer:this,scale:n}),l=die(o.visibleSublayers);if(this.featureInfoUrl==null||l==null)return Promise.resolve([]);if(this.fetchFeatureInfoFunction==null&&this.featureInfoFormat==null)return Promise.resolve([]);const c=this.version==="1.3.0"?{I:i,J:s}:{x:i,y:s},d={query_layers:l,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:e,height:r,...c},h={...this.createExportImageParameters(t,e,r),...d},y=this._mixCustomParameters(h);return this.fetchFeatureInfoFunction!=null?this.fetchFeatureInfoFunction(y):this._defaultFetchFeatureInfoFunction(e8(this.featureInfoUrl,y))}findSublayerById(t){return this.allSublayers.find(e=>e.id===t)}findSublayerByName(t){return this.allSublayers.find(e=>e.name===t)}serviceSupportsSpatialReference(t){return mC(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(e=>{const r=e===900913?B.WebMercator:new B({wkid:e});return at(r,t)})}_defaultFetchFeatureInfoFunction(t){const e=document.createElement("iframe");e.src=gC(vC.sanitizeUrl(Ua(t))),e.style.border="none",e.style.margin="0",e.style.width="100%",e.setAttribute("sandbox","");const r=new oa({title:this.title,content:e}),i=new He({sourceLayer:this,popupTemplate:r});return Promise.resolve([i])}async _fetchService(t){if(!this.resourceInfo&&this.parsedUrl?.path){const{path:e,query:r}=this.parsedUrl,{data:i}=await Te(e,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...r,...this.customParameters},responseType:"xml",signal:t});this.resourceInfo=pie(i)}if(this.parsedUrl){const e=new wC(this.parsedUrl.path),{httpsDomains:r}=Hr.request;e.scheme!=="https"||e.port&&e.port!=="443"||!e.host||r.includes(e.host)||r.push(e.host)}this.read(this.resourceInfo,{origin:"service"})}_checkLayerValidity(){if(!this.allSublayers.length)throw new I("wmslayer:empty-layer","The layer doesn't have any sublayer")}_mixCustomParameters(t){if(!this.customLayerParameters&&!this.customParameters)return t;const e={...this.customParameters,...this.customLayerParameters};for(const r in e)t[r.toLowerCase()]=e[r];return t}};function Sie(t,e){return t.some(r=>{for(const i in r)if(L_(r,i,null,e))return!0;return!1})}function r_(t,e,r){t=t??[];const i=new Map;t.every(n=>n.id==null)&&(t=P(t)).forEach((n,o)=>n.id=o);for(const n of t){const o=new je;o.read(n,e),r&&!r.includes(o.name)&&(o.visible=!1),i.set(o.id,o)}const s=[];for(const n of t){const o=n.id!=null?i.get(n.id):null;if(o)if(n.parentLayerId!=null&&n.parentLayerId>=0){const l=i.get(n.parentLayerId);if(!l)continue;l.sublayers||(l.sublayers=new U),l.sublayers.push(o)}else s.push(o)}return s}a([u({readOnly:!0})],we.prototype,"allSublayers",void 0),a([u({json:{type:Object,write:!0}})],we.prototype,"customParameters",void 0),a([u({json:{type:Object,write:!0}})],we.prototype,"customLayerParameters",void 0),a([u({type:String,json:{write:!0}})],we.prototype,"copyright",void 0),a([u()],we.prototype,"description",void 0),a([u({readOnly:!0})],we.prototype,"dimensions",void 0),a([u({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],we.prototype,"fullExtent",void 0),a([A(["web-document","portal-item"],"fullExtent",["extent"])],we.prototype,"readFullExtentFromItemOrMap",null),a([j(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],we.prototype,"writeFullExtent",null),a([u({type:[ue]})],we.prototype,"fullExtents",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],we.prototype,"featureInfoFormat",null),a([u({type:[String],readOnly:!0})],we.prototype,"featureInfoFormats",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],we.prototype,"featureInfoUrl",void 0),a([u()],we.prototype,"fetchFeatureInfoFunction",void 0),a([u({type:String,json:{origins:{"web-document":{default:"image/png",type:hf.jsonValues,read:{reader:hf.read,source:"format"},write:{writer:hf.write,target:"format"}}}}})],we.prototype,"imageFormat",void 0),a([A("imageFormat",["supportedImageFormatTypes"])],we.prototype,"readImageFormat",null),a([u({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],we.prototype,"imageMaxHeight",void 0),a([u({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],we.prototype,"imageMaxWidth",void 0),a([u()],we.prototype,"imageTransparency",void 0),a([u(lE)],we.prototype,"legendEnabled",void 0),a([u({type:["show","hide","hide-children"]})],we.prototype,"listMode",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],we.prototype,"mapUrl",void 0),a([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],we.prototype,"isReference",void 0),a([u({type:["WMS"]})],we.prototype,"operationalLayerType",void 0),a([u()],we.prototype,"resourceInfo",void 0),a([u({type:B,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],we.prototype,"spatialReference",void 0),a([A(["web-document","portal-item"],"spatialReference",["spatialReferences"])],we.prototype,"readSpatialReferenceFromItemOrDocument",null),a([u({type:[ve],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],we.prototype,"spatialReferences",void 0),a([j(["web-document","portal-item"],"spatialReferences")],we.prototype,"writeSpatialReferences",null),a([u({type:U.ofType(je),json:{write:{target:"layers",overridePolicy(t,e,r){if(Sie(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],we.prototype,"sublayers",void 0),a([A(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],we.prototype,"readSublayersFromItemOrMap",null),a([A("service","sublayers",["layers"])],we.prototype,"readSublayers",null),a([j("sublayers",{layers:{type:[je]},visibleLayers:{type:[String]}})],we.prototype,"writeSublayers",null),a([u({json:{read:!1},readOnly:!0,value:"wms"})],we.prototype,"type",void 0),a([u(Y6)],we.prototype,"url",null),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],we.prototype,"version",void 0),we=a([_("esri.layers.WMSLayer")],we);const md=we,xie=Object.freeze(Object.defineProperty({__proto__:null,default:md},Symbol.toStringTag,{value:"Module"}));async function p5(t,e){const{data:r}=await Te(t,{responseType:"json",query:{f:"json",...e?.customParameters,token:e?.apiKey}});return r}let rO=class{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,r){const i=this._serviceMetadatas.get(e);if(i)return i;const s=await p5(e,r);return this._serviceMetadatas.set(e,s),s}async fetchItemData(e){const{id:r}=e;if(!r)return null;const{_itemDatas:i}=this;if(i.has(r))return i.get(r);const s=await e.fetchData();return i.set(r,s),s}async fetchCustomParameters(e,r){const i=await this.fetchItemData(e);return i&&typeof i=="object"&&(r?r(i):i.customParameters)||null}};const as={BingMapsLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-BingMapsLayer-BdY0X1hZ.js");return{default:t}},__vite__mapDeps([347,3,4,1,2,5,6,7,12,13,14]))).default,BuildingSceneLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-BuildingSceneLayer-CMwvxBpH.js");return{default:t}},__vite__mapDeps([348,3,4,1,2,5,6,7,349,350,322,320,351,15,352,13,14,353,136,68,132,119,113,116,354,117,112,66,67,118,153,239,295,12]))).default,CSVLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-CSVLayer-Cr9sE3SY.js");return{default:t}},__vite__mapDeps([355,3,4,1,2,5,6,7,51,46,12,13,14]))).default,CatalogLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-CatalogLayer-Rq9DgaYt.js");return{default:t}},__vite__mapDeps([356,1,2,3,4,5,6,7,12,28,29,13,14,324,64,69,325,326,112,113,327,318,51,46]))).default,DimensionLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-DimensionLayer-CIpMcVDt.js");return{default:t}},__vite__mapDeps([357,3,4,1,2,5,6,7,358,13,14,12]))).default,ElevationLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-ElevationLayer-ClpE7ppO.js");return{default:t}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))).default,FeatureLayer:async()=>(await R(async()=>{const{default:t}=await Promise.resolve().then(()=>IP);return{default:t}},void 0)).default,GaussianSplatLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-GaussianSplatLayer-a8X9Mqna.js");return{default:t}},__vite__mapDeps([359,3,4,1,2,5,6,7,360,295,12,13,14]))).default,GeoJSONLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-GeoJSONLayer-CvmpUd0x.js");return{default:t}},__vite__mapDeps([361,1,2,3,4,5,6,7,51,46,12,13,14]))).default,GeoRSSLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-GeoRSSLayer-Buf-uXSQ.js");return{default:t}},__vite__mapDeps([362,3,4,1,2,5,6,7,12,13,14]))).default,GroupLayer:async()=>(await R(async()=>{const{default:t}=await Promise.resolve().then(()=>Pse);return{default:t}},void 0)).default,ImageryLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-ImageryLayer-BPhm04zm.js");return{default:t}},__vite__mapDeps([363,1,2,3,4,5,6,7,180,258,13,14,364,122,121,33,123,124,177,178,29,129,195,365,295,12]))).default,ImageryTileLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-ImageryTileLayer-CqSzbu72.js");return{default:t}},__vite__mapDeps([366,1,2,3,4,5,6,7,181,367,258,13,14,364,122,121,33,123,124,177,178,29,129,100,12,260,127,126,125,365,195,128,10,295]))).default,IntegratedMesh3DTilesLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-IntegratedMesh3DTilesLayer-Dkf7qVO2.js");return{default:t}},__vite__mapDeps([368,3,4,1,2,5,6,7,369,13,14,360,295,12]))).default,IntegratedMeshLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-IntegratedMeshLayer-eHSaK0Xq.js");return{default:t}},__vite__mapDeps([370,3,4,1,2,5,6,7,350,322,320,351,15,352,13,14,369,295,12]))).default,KMLLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-KMLLayer-C9JgEzbz.js");return{default:t}},__vite__mapDeps([371,3,4,1,2,5,6,7,13,14,262,12]))).default,KnowledgeGraphLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-KnowledgeGraphLayer-B-EFroJ3.js");return{default:t}},__vite__mapDeps([372,3,4,1,2,5,6,7,373,374,13,14,272,375,376,245,37,38,39,40,41,42,43,44,45,12,46,26,25,27,28,29,47,48,51,177,178]))).default,LineOfSightLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-LineOfSightLayer-R4yUIFFV.js");return{default:t}},__vite__mapDeps([377,3,4,1,2,5,6,7,358,13,14,378,132,119,113,295,12]))).default,LinkChartLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-LinkChartLayer-BVKciuD-.js");return{default:t}},__vite__mapDeps([379,3,4,1,2,5,6,7,373,374,13,14,272,375,376,245,37,38,39,40,41,42,43,44,45,12,46,26,25,27,28,29,47,48,51,177,178]))).default,MapImageLayer:async()=>(await R(async()=>{const{default:t}=await Promise.resolve().then(()=>aie);return{default:t}},void 0)).default,MapNotesLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-MapNotesLayer-Cv6D3GXD.js");return{default:t}},__vite__mapDeps([380,3,4,1,2,5,6,7,79,12,13,14]))).default,MediaLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-MediaLayer-COhB5_05.js");return{default:t}},__vite__mapDeps([381,1,2,3,4,5,6,7,13,14,267,106,278,38,39,158,12]))).default,OGCFeatureLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-OGCFeatureLayer-CNbg85M2.js");return{default:t}},__vite__mapDeps([382,3,4,1,2,5,6,7,108,75,36,51,46,76,349,12,13,14]))).default,OpenStreetMapLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-OpenStreetMapLayer-BvAupyJj.js");return{default:t}},__vite__mapDeps([383,3,4,1,2,5,6,7,384,13,14,12]))).default,OrientedImageryLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-OrientedImageryLayer-BQhqwCjm.js");return{default:t}},__vite__mapDeps([385,3,4,1,2,5,6,7,13,14,12]))).default,ParquetLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-ParquetLayer-DpZeCecm.js");return{default:t}},__vite__mapDeps([386,3,4,1,2,5,6,7,168,50,13,14,103,100,12]))).default,PointCloudLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-PointCloudLayer-DBXwa0l6.js");return{default:t}},__vite__mapDeps([387,3,4,1,2,5,6,7,350,322,320,351,15,13,14,115,295,12]))).default,RouteLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-RouteLayer-BOvEPHhz.js");return{default:t}},__vite__mapDeps([388,3,4,1,2,5,6,7,322,13,14,272,271,375,193,12]))).default,SceneLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-SceneLayer-CYGmLtMI.js");return{default:t}},__vite__mapDeps([389,1,2,3,4,5,6,7,390,326,13,14,112,113,327,350,322,320,351,15,349,352,295,353,136,68,132,119,116,354,117,66,67,118,153,239,12]))).default,StreamLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-StreamLayer-CtxVen8U.js");return{default:t}},__vite__mapDeps([391,1,2,3,4,5,6,7,13,14,90,12]))).default,SubtypeGroupLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-SubtypeGroupLayer-Cs1MAhQ9.js");return{default:t}},__vite__mapDeps([392,1,2,3,4,5,6,7,124,178,177,12,13,14]))).default,TileLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-TileLayer-CvFplQGz.js");return{default:t}},__vite__mapDeps([393,3,4,1,2,5,6,7,8,9,10,12,13,14]))).default,UnknownLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-UnknownLayer-DefYJIPv.js");return{default:t}},__vite__mapDeps([394,3,4,1,2,5,6,7,12,13,14]))).default,UnsupportedLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-UnsupportedLayer-Dpn-7H_B.js");return{default:t}},__vite__mapDeps([395,3,4,1,2,5,6,7,12,13,14]))).default,VectorTileLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-VectorTileLayer-B4qcHRCP.js");return{default:t}},__vite__mapDeps([396,3,4,1,2,5,6,7,8,9,10,320,144,141,95,58,57,124,12,13,14]))).default,VideoLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-VideoLayer-Btb9v9sP.js");return{default:t}},__vite__mapDeps([397,3,4,1,2,5,6,7,13,14,277,178,177,278,66,33,12]))).default,ViewshedLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-ViewshedLayer-DkjOjyMN.js");return{default:t}},__vite__mapDeps([398,3,4,1,2,5,6,7,378,132,119,113,13,14,358,12]))).default,VoxelLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-VoxelLayer-DPDzBcwY.js");return{default:t}},__vite__mapDeps([399,3,4,1,2,5,6,7,350,322,320,351,15,13,14,112,113,12]))).default,WCSLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-WCSLayer-CuE2EQR-.js");return{default:t}},__vite__mapDeps([400,1,2,3,4,5,6,7,367,258,13,14,364,122,121,33,123,124,177,178,29,129,100,12,260,127,126,125,195]))).default,WFSLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-WFSLayer-BDwrgeYM.js");return{default:t}},__vite__mapDeps([401,1,2,3,4,5,6,7,51,46,138,75,36,139,243,12,13,14]))).default,WMSLayer:async()=>(await R(async()=>{const{default:t}=await Promise.resolve().then(()=>xie);return{default:t}},void 0)).default,WMTSLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-WMTSLayer-DFCJTwDr.js");return{default:t}},__vite__mapDeps([402,3,4,1,2,5,6,7,384,13,14,9,139,12]))).default,WebTileLayer:async()=>(await R(async()=>{const{default:t}=await import("./money-tides-WebTileLayer-DL4L6rSw.js").then(e=>e.W);return{default:t}},__vite__mapDeps([384,3,4,1,2,5,6,7,13,14]))).default};function $ie(t){return O9(t,"notes")}function Tie(t){return O9(t,"markup")}function Iie(t){return O9(t,"route")}function O9(t,e){return!(!t.layerType||t.layerType!=="ArcGISFeatureLayer")&&t.featureCollectionType===e}async function iO(t,e){const r=Zo(t);if(!r)throw new I("invalid-url","Invalid scene service url");const i={...e,sceneServerUrl:r.url.path,layerId:r.sublayer??void 0};if(i.sceneLayerItem??=await Mie(i),i.sceneLayerItem==null)return i_(i.sceneServerUrl.replace("/SceneServer","/FeatureServer"),i);const s=await Pie(i);if(!s?.url)throw new I("related-service-not-found","Could not find feature service through portal item relationship");i.featureServiceItem=s;const n=await i_(s.url,i);return n.portalItem=s,n}async function Mie(t){const e=(await sO(t)).serviceItemId;if(!e)return null;const r=new ae({id:e,apiKey:t.apiKey}),i=await Eie(t);i!=null&&(r.portal=new D({url:i}));try{return await r.load({signal:t.signal})}catch(s){return nr(s),null}}async function sO(t){if(t.rootDocument)return t.rootDocument;const e={query:{f:"json",...t.customParameters,token:t.apiKey},responseType:"json",signal:t.signal};try{const r=await Te(t.sceneServerUrl,e);t.rootDocument=r.data}catch{t.rootDocument={}}return t.rootDocument}async function Eie(t){const e=nt?.findServerInfo(t.sceneServerUrl);if(e?.owningSystemUrl)return e.owningSystemUrl;const r=t.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const i=(await Te(r,{query:{f:"json"},responseType:"json",signal:t.signal})).data.owningSystemUrl;if(i)return i}catch(i){nr(i)}return null}async function i_(t,e){const r=Zo(t);if(!r)throw new I("invalid-feature-service-url","Invalid feature service url");const i=r.url.path,s=e.layerId;if(s==null)return{serverUrl:i};const n=sO(e),o=e.featureServiceItem?await e.featureServiceItem.fetchData("json"):null,l=(o?.layers?.[0]||o?.tables?.[0])?.customParameters,c=g=>{const v={query:{f:"json",...l},responseType:"json",authMode:g,signal:e.signal};return Te(i,v)},d=c("anonymous").catch(()=>c("no-prompt")),[h,y]=await Promise.all([d,n]),f=y?.layers,m=h.data&&h.data.layers;if(!Array.isArray(m))throw new Error("expected layers array");if(Array.isArray(f)){for(let g=0;g<Math.min(f.length,m.length);g++)if(f[g].id===s)return{serverUrl:i,layerId:m[g].id}}else if(s!=null&&s<m.length)return{serverUrl:i,layerId:m[s].id};throw new Error("could not find matching associated sublayer")}async function Pie({sceneLayerItem:t,signal:e}){if(!t)return null;try{const r=(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:e})).find(s=>s.type==="Feature Service")||null;if(!r)return null;const i=new ae({portal:r.portal,id:r.id});return await i.load(),i}catch(r){return nr(r),null}}const Oie=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);async function X0e(t,e){const{loadContext:r,...i}=e||{},s=r?await r.fetchServiceMetadata(t,i):await p5(t,i),n=G5();n_(s),s_(s);const o={serviceJSON:s,preferredHost:n};if((s.currentVersion??0)<10.5)return o;const l=`${t}/layers`,c=r?await r.fetchServiceMetadata(l,i):await p5(l,i);return n_(c),s_(c),o.layersJSON={layers:c.layers,tables:c.tables},o}function Rie(t){const{type:e}=t;return!!e&&Oie.has(e)}function Cie(t){return t.type==="Table"}function s_(t){t.layers=t.layers?.filter(Rie),t.tables=t.tables?.filter(Cie)}function Lie(t){t.type||="Feature Layer"}function kie(t){t.type||="Table"}function n_(t){t.layers?.forEach(Lie),t.tables?.forEach(kie)}function nO(t){switch(t){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}function qd(t){const e={id:t.id,name:t.name},r=nO(t.type);return r!=="FeatureLayer"&&(e.layerType=r),e}async function Aie(t,e,r){let i;if(t?.layers==null||t?.tables==null){const s=await r.fetchServiceMetadata(e,{customParameters:Yc(t)?.customParameters});i=G5(),(t=t||{}).layers=t.layers||s?.layers?.map(qd),t.tables=t.tables||s?.tables?.map(qd)}return{data:t,preferredHost:i}}function Yc(t){if(!t)return null;const{layers:e,tables:r}=t;return e?.length?e[0]:r?.length?r[0]:null}function Fie(t,e){return e==null?null:[...t.layers||[],...t.tables||[]].find(r=>r.id===e)}function e2e(t,e){return[...t.layers||[],...t.tables||[]].filter(({layerType:r})=>r?e.includes(r):e.includes("ArcGISFeatureLayer"))}function R9(t){return(t?.layers?.length??0)+(t?.tables?.length??0)}function t2e(t){switch(t){case"catalog":return["CatalogLayer"];case"feature":return["ArcGISFeatureLayer"];case"oriented-imagery":return["OrientedImageryLayer"];case"subtype-group":return["SubtypeGroupLayer","SubtypeGroupTable"]}return null}function Nie(t){switch(t){case"CatalogLayer":return"CatalogLayer";case"OrientedImageryLayer":return"OrientedImageryLayer";case"SubtypeGroupLayer":case"SubtypeGroupTable":return"SubtypeGroupLayer"}return"FeatureLayer"}async function Die(t,e,r){if(!t?.url)return e??{};if(e??={},!e.layers){const n=await r.fetchServiceMetadata(t.url);e.layers=n.layers?.map(qd)}const{serverUrl:i,portalItem:s}=await iO(t.url,{sceneLayerItem:t,customParameters:Yc(e)?.customParameters}).catch(()=>({serverUrl:null,portalItem:null}));if(i==null)return e.tables=[],e;if(!e.tables&&s){const n=await s.fetchData().catch(()=>null);if(n?.tables)e.tables=n.tables.map(qd);else{const o=await r.fetchServiceMetadata(i,{customParameters:Yc(n)?.customParameters}).catch(()=>null);e.tables=o?.tables?.map(qd)}}if(e.tables)for(const n of e.tables)n.url=`${i}/${n.id}`;return e}async function jie(t){let{portalItem:e}=t;!e||e instanceof ae||(e=new ae(e));const r=await Vie(e);return new r.constructor({portalItem:e,...r.properties})}async function Vie(t){await t.load();const e=new rO;return zie(await C9(t,e))}async function C9(t,e){switch(t.type){case"3DTiles Service":return t.typeKeywords.includes("3DObject")?Xie():t.typeKeywords.includes("GaussianSplat")?Yie():Kie();case"CSV":return ese();case"Feature Collection":return Bie(t);case"Feature Service":return qie(t,e);case"Feed":return ase();case"GeoJson":return Qie();case"Group Layer":return lse();case"Image Service":return Hie(t,e);case"KML":return tse();case"Knowledge Graph Layer":return rse();case"Map Service":return Uie(t,e);case"Media Layer":return use();case"Scene Service":return Gie(t,e);case"Stream Service":return Wie();case"Video Service":return Zie(t,e);case"Vector Tile Service":return Jie();case"WCS":return ise();case"WFS":return sse();case"WMS":return nse();case"WMTS":return ose();default:throw new I("portal:unknown-item-type","Unknown item type '${type}'",{type:t.type})}}async function zie(t){const e=t.className,r=as[e];return{constructor:await r(),properties:t.properties}}async function Uie(t,e){return await cse(t,e)?{className:"TileLayer"}:{className:"MapImageLayer"}}async function qie(t,e){const r=await L9(t,e);if(typeof r=="object"){const{sourceJSON:i,className:s}=r,n={sourceJSON:i};return r.id!=null&&(n.layerId=r.id),{className:s||"FeatureLayer",properties:n}}return{className:"GroupLayer"}}async function Gie(t,e){const r=await L9(t,e,async()=>{try{if(!t.url)return[];const{serverUrl:i}=await iO(t.url,{sceneLayerItem:t});return(await e.fetchServiceMetadata(i))?.tables??[]}catch{return[]}});if(typeof r=="object"){const i={};let s;if(r.id!=null?(i.layerId=r.id,s=`${t.url}/layers/${r.id}`):s=t.url,t.typeKeywords?.length){for(const o of Object.keys(Y4))if(t.typeKeywords.includes(o))return{className:Y4[o]}}const n=await e.fetchServiceMetadata(s,{customParameters:await e.fetchCustomParameters(t,o=>Yc(o)?.customParameters)});return{className:Y4[n?.layerType]||"SceneLayer",properties:i}}return r===!1&&(await e.fetchServiceMetadata(t.url))?.layerType==="Voxel"?{className:"VoxelLayer"}:{className:"GroupLayer"}}async function Bie(t){await t.load();const e=ic(t,"Map Notes"),r=ic(t,"Markup");if(e||r)return{className:"MapNotesLayer"};if(ic(t,"Route Layer"))return{className:"RouteLayer"};const i=await t.fetchData();return R9(i)===1?{className:"FeatureLayer"}:{className:"GroupLayer"}}async function Hie(t,e){await t.load();const r=t.typeKeywords?.map(h=>h.toLowerCase())??[];if(r.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(r.includes("tiled imagery"))return{className:"ImageryTileLayer"};const i=await e.fetchItemData(t),s=i?.layerType;if(s==="ArcGISTiledImageServiceLayer")return{className:"ImageryTileLayer"};if(s==="ArcGISImageServiceLayer")return{className:"ImageryLayer"};const n=await e.fetchServiceMetadata(t.url,{customParameters:await e.fetchCustomParameters(t)}),o=n.cacheType?.toLowerCase(),l=n.capabilities?.toLowerCase().includes("tilesonly"),c=n.tileInfo?.format?.toLowerCase()??"",d=o==null&&["jpg","jpeg","png","png8","png24","png32","mixed"].includes(c);return o==="map"||d||l?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}function Wie(){return{className:"StreamLayer"}}async function Zie(t,e){return typeof await L9(t,e)=="object"?{className:"VideoLayer"}:{className:"GroupLayer"}}function Jie(){return{className:"VectorTileLayer"}}function Qie(){return{className:"GeoJSONLayer"}}function Kie(){return{className:"IntegratedMesh3DTilesLayer"}}function Yie(){return{className:"GaussianSplatLayer"}}function Xie(){return{className:"UnsupportedLayer"}}function ese(){return{className:"CSVLayer"}}function tse(){return{className:"KMLLayer"}}function rse(){return{className:"KnowledgeGraphLayer"}}function ise(){return{className:"WCSLayer"}}function sse(){return{className:"WFSLayer"}}function nse(){return{className:"WMSLayer"}}function ose(){return{className:"WMTSLayer"}}function ase(){return{className:"StreamLayer"}}function lse(){return{className:"GroupLayer"}}function use(){return{className:"MediaLayer"}}async function cse(t,e){const{tileInfo:r}=await e.fetchServiceMetadata(t.url,{customParameters:await e.fetchCustomParameters(t)});return r}async function L9(t,e,r){const{url:i,type:s}=t,n=s==="Feature Service";if(!i)return{};if(/\/\d+$/.test(i)){if(n){const c=await e.fetchServiceMetadata(i,{customParameters:await e.fetchCustomParameters(t,d=>Yc(d)?.customParameters)});return x8(t,G5()),{id:c.id,className:nO(c.type),sourceJSON:c}}return{}}if(s==="Video Service")return!(((await e.fetchServiceMetadata(i)).layers?.length??0)>1)&&{};await t.load();let o=await e.fetchItemData(t);if(n){const{data:c,preferredHost:d}=await Aie(o,i,e);x8(t,d);const h=yf(c);if(typeof h=="object"){const y=Fie(c,h.id);h.className=Nie(y?.layerType)}return h}if(s==="Scene Service"&&(o=await Die(t,o,e)),R9(o)>0)return yf(o);const l=await e.fetchServiceMetadata(i);return r&&(l.tables=await r()),yf(l)}function yf(t){return R9(t)===1&&{id:Yc(t)?.id}}const pse=Object.freeze(Object.defineProperty({__proto__:null,fromItem:jie,selectLayerClassPath:C9},Symbol.toStringTag,{value:"Module"}));async function oO(t,e,r){if(!e)return;const i=e.map(n=>bse(n,r)),s=await Promise.allSettled(i);for(const n of s)n.status==="rejected"||n.value&&t.add(n.value)}const dse={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BuildingSceneLayer:"BuildingSceneLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GaussianSplatLayer:"GaussianSplatLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",Object3DTilesLayer:"UnsupportedLayer",IntegratedMeshLayer:"IntegratedMeshLayer",KML:"KMLLayer",LineOfSightLayer:"LineOfSightLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",PointCloudLayer:"PointCloudLayer",RasterDataLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",ViewshedLayer:"ViewshedLayer",Voxel:"VoxelLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},hse={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},yse={ArcGISFeatureLayer:"FeatureLayer"},fse={ArcGISImageServiceLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"UnsupportedLayer",WMS:"UnsupportedLayer",WebTiledLayer:"WebTileLayer"},mse={IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer"},aO={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",ArcGISVideoLayer:"VideoLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"KnowledgeGraphLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",get ParquetLayer(){return ie("parquetlayer-persistence-enabled")?"ParquetLayer":"UnsupportedLayer"},SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},lO={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"SubtypeGroupLayer"},uO={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},gse={...aO,LinkChartLayer:"LinkChartLayer"},vse={...lO},wse={...uO};async function bse(t,e){return _se(await Sse(t,e),t,e)}async function _se(t,e,r){const i=new t;return i.read(e,r.context),i.type==="group"&&(e.layerType==="GroupLayer"?await A9(i,e,r):k9(e)?$se(i,e,r.context):cO(e)&&await Tse(i,e,r.context)),await $P(i,r.context),i}async function Sse(t,e){const r=e.context,i=xse(r);let s=t.layerType||t.type;!s&&e?.defaultLayerType&&(s=e.defaultLayerType);const n=i[s];let o=n?as[n]:as.UnknownLayer;if(k9(t)){const l=r?.portal;if(t.itemId){const c=new ae({id:t.itemId,portal:l});await c.load();const d=(await C9(c,new rO)).className||"UnknownLayer";o=as[d]}}else s==="ArcGISFeatureLayer"?$ie(t)||Tie(t)?o=as.MapNotesLayer:Iie(t)?o=as.RouteLayer:cO(t)&&(o=as.GroupLayer):t.wmtsInfo?.url&&t.wmtsInfo.layerIdentifier?o=as.WMTSLayer:s==="WFS"&&t.wfsInfo?.version!=="2.0.0"&&(o=as.UnsupportedLayer);return o()}function cO(t){return t.layerType!=="ArcGISFeatureLayer"||k9(t)?!1:(t.featureCollection?.layers?.length??0)>1}function k9(t){return t.type==="Feature Collection"}function xse(t){let e;switch(t.origin){case"web-scene":switch(t.layerContainerType){case"basemap-base-layers":e=fse;break;case"basemap-ground-layers":e=mse;break;case"ground":e=hse;break;case"tables":e=yse;break;default:e=dse}break;case"link-chart":switch(t.layerContainerType){case"basemap-base-layers":e=wse;break;case"tables":e=vse;break;default:e=gse}break;default:switch(t.layerContainerType){case"basemap-base-layers":e=uO;break;case"tables":e=lO;break;default:e=aO}}return e}async function A9(t,e,r){const i=new U,s=oO(i,Array.isArray(e.layers)?e.layers:[],r);try{try{if(await s,t.type==="group")return t.layers.addMany(i),t}catch(n){t.destroy();for(const o of i)o.destroy();throw n}}catch(n){throw n}}function $se(t,e,r){e.itemId&&(t.portalItem=new ae({id:e.itemId,portal:r?.portal}),t.when(()=>{const i=s=>{const n=s.layerId;pO(s,t,e,n,r);const o=e.featureCollection?.layers?.[n];o&&s.read(o,r)};t.layers?.forEach(i),t.tables?.forEach(i)}))}async function Tse(t,e,r){const i=as.FeatureLayer,s=await i(),n=e.featureCollection,o=n?.showLegend,l=n?.layers?.map((c,d)=>{const h=new s;h.read(c,r);const y={...r,ignoreDefaults:!0};return pO(h,t,e,d,y),o!=null&&h.read({showLegend:o},y),h});t.layers.addMany(l??[])}function pO(t,e,r,i,s){t.read({id:`${e.id}-sublayer-${i}`,visibility:r.visibleLayers?.includes(i)??!0},s)}const dO=Object.freeze(Object.defineProperty({__proto__:null,populateGroupLayer:A9,populateOperationalLayers:oO},Symbol.toStringTag,{value:"Module"})),Ise=Symbol("WebScene");async function Mse(t){const e=[];for(const r of t.allLayers)if("beforeSave"in r&&typeof r.beforeSave=="function"){const i=r.beforeSave();i&&e.push(i)}await Promise.allSettled(e)}const Ese=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function r2e(t,e,r){let i=(t.messages??[]).filter(({type:s})=>s==="error").map(({name:s,message:n,details:o})=>new I(s,n,o));if(t.blockedRelativeUrls&&(i=i.concat(t.blockedRelativeUrls.map(s=>new I("url:unsupported",`Relative url '${s}' is not supported`)))),r){const{ignoreUnsupported:s,supplementalUnsupportedErrors:n=[],requiredPropertyChecksDisabled:o}=r;s&&(i=i.filter(({name:l})=>!(Ese.has(l)||n.includes(l)))),o&&(i=i.filter(l=>l.name!=="web-document-write:property-required"))}if(i.length>0)throw new I(e.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}let zt=class extends Wh(Qh(P4(O4(u$(l$(np(Oe))))))){constructor(t){super(t),this.allLayers=new Gr({getCollections:()=>[this.layers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=a$(this),this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._debouncedSaveOperations=U2(async(e,r,i)=>{const{save:s,saveAs:n}=await R(()=>import("./money-tides-groupLayerUtils-DRsil7rZ.js"),__vite__mapDeps([403,323,3,4,1,2,5,6,7,322,320,351,15,12,13,14]));switch(e){case 0:return s(this,r);case 1:return n(this,i,r)}})}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([X(()=>{let t=this.parent;for(;t&&"parent"in t&&t.parent;)t=t.parent;return t&&Ise in t},t=>{const e="prevent-adding-tables";this.removeHandles(e),t&&(this.tables.removeAll(),this.addHandles(Ui(()=>this.tables,"before-add",r=>{r.preventDefault(),N.getLogger(this).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")}),e))},vr),X(()=>this.visible,this._onVisibilityChange.bind(this),ht)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf("portalItem")===7}_writeLayers(t,e,r,i){const s=[];if(!t)return s;t.forEach(n=>{const o=K1(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o?.layerType&&s.push(o)}),e.layers=s}set portalItem(t){this._set("portalItem",t)}readPortalItem(t,e,r){const{itemId:i,layerType:s}=e;if(s==="GroupLayer"&&i)return new ae({id:i,portal:r?.portal})}writePortalItem(t,e){t?.id&&(e.itemId=t.id)}set visibilityMode(t){const e=this._get("visibilityMode")!==t;this._set("visibilityMode",t),e&&this._enforceVisibility(t,this.visible)}async beforeSave(){return Mse(this)}load(t){const e=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service","Video Service"],layerModuleTypeMap:as,populateGroupLayer:A9},t).catch(r=>{if(nr(r),this.sourceIsPortalItem)throw r});return this.addResolvingPromise(e),Promise.resolve(this)}async loadAll(){return H2(this,t=>{t(this.layers,this.tables)})}async save(t){return this._debouncedSaveOperations(0,t)}async saveAs(t,e){return this._debouncedSaveOperations(1,e,t)}layerAdded(t){t.visible&&this.visibilityMode==="exclusive"?this._turnOffOtherLayers(t):this.visibilityMode==="inherited"&&(t.visible=this.visible),this.hasHandles(t.uid)?console.error(`Layer read to Grouplayer: uid=${t.uid}`):this.addHandles(X(()=>t.visible,e=>this._onChildVisibilityChange(t,e),ht),t.uid)}layerRemoved(t){this.removeHandles(t.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(t){this.layers.forEach(e=>{e!==t&&(e.visible=!1)})}_enforceVisibility(t,e){if(!Jr(this).initialized)return;const r=this.layers;let i=r.find(s=>s.visible);switch(t){case"exclusive":r.length&&!i&&(i=r.at(0),i.visible=!0),this._turnOffOtherLayers(i);break;case"inherited":r.forEach(s=>{s.visible=e})}}_onVisibilityChange(t){this.visibilityMode==="inherited"&&this.layers.forEach(e=>{e.visible=t})}_onChildVisibilityChange(t,e){switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(t):this._isAnyLayerVisible()||(t.visible=!0);break;case"inherited":t.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(t=>t.visible)}};a([u({readOnly:!0,dependsOn:[]})],zt.prototype,"allLayers",void 0),a([u({readOnly:!0})],zt.prototype,"allTables",void 0),a([u({json:{read:!0,write:!0}})],zt.prototype,"blendMode",void 0),a([u()],zt.prototype,"fullExtent",void 0),a([u({readOnly:!0})],zt.prototype,"sourceIsPortalItem",null),a([u({json:{read:!1,write:{ignoreOrigin:!0}}})],zt.prototype,"layers",void 0),a([j("layers")],zt.prototype,"_writeLayers",null),a([u({type:["GroupLayer"]})],zt.prototype,"operationalLayerType",void 0),a([u({json:{origins:{"web-map":{read:!1,write:{overridePolicy(t,e,r){return{enabled:t?.type==="Group Layer"&&r?.initiator!==this}}}},"web-scene":{read:!1,write:!1}}}})],zt.prototype,"portalItem",null),a([A("web-map","portalItem",["itemId"])],zt.prototype,"readPortalItem",null),a([j("web-map","portalItem",{itemId:{type:String}})],zt.prototype,"writePortalItem",null),a([u()],zt.prototype,"spatialReference",void 0),a([u({json:{read:!1},readOnly:!0,value:"group"})],zt.prototype,"type",void 0),a([u({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:(t,e,r)=>{t!=="inherited"&&(e[r]=t)}}}}})],zt.prototype,"visibilityMode",null),zt=a([_("esri.layers.GroupLayer")],zt);const d5=zt,Pse=Object.freeze(Object.defineProperty({__proto__:null,default:d5},Symbol.toStringTag,{value:"Module"}));let pi=class extends Wh(Qh(Oe)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new ll,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}get loaded(){return super.loaded}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}graphicChanged(t){this.emit("graphic-update",t)}};a([u({type:ns})],pi.prototype,"elevationInfo",void 0),a([u(f2(ll,"graphics"))],pi.prototype,"graphics",void 0),a([u({type:["show","hide"]})],pi.prototype,"listMode",void 0),a([u()],pi.prototype,"screenSizePerspectiveEnabled",void 0),a([u({readOnly:!0})],pi.prototype,"type",void 0),a([u({constructOnly:!0})],pi.prototype,"internal",void 0),pi=a([_("esri.layers.GraphicsLayer")],pi);const Ose="M16.111 6H13V4.353C13 3.723 12.39 3 11.78 3H9.215C8.605 3 8 3.724 8 4.353V6H4.889C3.674 6 3 6.628 3 7.89v6.848C3 15.372 3.605 16 4.213 16H16.79c.602 0 1.209-.628 1.209-1.262V7.89C18 6.57 17.547 6 16.111 6zm-5.613 8a3 3 0 1 1 3.002-2.998A3 3 0 0 1 10.498 14z",Rse="M17 7l-1-4H7L6 7H5v3.71l.44-.043.604-1.961A.999.999 0 0 1 6.988 8H7.5a1.499 1.499 0 0 1 1.07 2.549l.15.451H11a1 1 0 0 1 .924.617.985.985 0 0 1 .067.383H15v2h3V7zM7.25 7L8 4h7l.75 3zm8.25 4A1.5 1.5 0 1 1 17 9.5a1.5 1.5 0 0 1-1.5 1.5zM9 14l2 3-3.4-2L6 18v-3l-3 1 2-3-3-1 4.2-.4L7 9l1 3h3z",Cse="M15.427 18H5.573A.573.573 0 0 1 5 17.427v-.854c0-.316.257-.573.573-.573h9.854c.316 0 .573.257.573.573v.854a.573.573 0 0 1-.573.573zM12.693 8l-.933-5c-.2-.804-.41-.998-1.239-1h-.042c-.829.002-1.038.196-1.24 1l-.932 5h4.386zm-4.76 2L7 15h7l-.933-5H7.933z",Lse="M17.999 15.998L10.5 2 3.001 15.998zM9.75 6h1.5v5h-1.5zm.383 6.4h.734a.735.735 0 0 1 .733.733v.734a.735.735 0 0 1-.733.733h-.734a.735.735 0 0 1-.733-.733v-.734a.735.735 0 0 1 .733-.733z",hO=[new K([215,25,28]),new K([253,174,97]),new K([255,255,191]),new K([166,217,106]),new K([26,150,65])],yO=["not-money","potentially-money","kinda-money","mostly-money","money"],ff=(t,e)=>{const r=getComputedStyle(document.body).getPropertyValue(t);if(!e)return r;const{opacity:i,type:s}=e,n=new K(r);return n.a=i||1,s==="hex"?n.toHex({digits:8}):n.toCss(!0)},i2e=(t,e)=>hO[yO.indexOf(t)].toHex(),s2e=t=>{const e=hO[yO.indexOf(t)];return Xn.colorType==="light"&&e.toHex({digits:6})==="#ffffbf"?{primary:new K([64,64,64]),secondary:e}:{primary:e,secondary:Xn.colorType==="dark"?new K([32,32,32]):new K([255,255,255])}};var kse=Object.defineProperty,Ase=Object.getOwnPropertyDescriptor,Yh=(t,e,r,i)=>{for(var s=i>1?void 0:i?Ase(e,r):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(s=(i?o(e,r,s):o(s))||s);return i&&s&&kse(e,r,s),s};const o_="load-handle";let vh=class extends d5{constructor(t){super(t),this.title="Traffic",this.visible=!1,this.graphicsLayers={cameras:new h5({minScale:6e5,title:"Traffic Cameras"}),events:new y5({minScale:6e5,title:""}),eventLines:new pi({minScale:6e5,title:""}),weatherReports:new pi({minScale:6e5,title:"Weather Reports"}),weatherStations:new pi({minScale:6e5,title:"Weather Stations"})},this.addHandles(X(()=>this.visible,o=>{o&&(this.removeHandles(o_),this.loadData(),this.loadLiveTraffic(),setInterval(this.updateData.bind(this),3e5))}),o_);const{cameras:e,events:r,eventLines:i,weatherReports:s,weatherStations:n}=this.graphicsLayers;this.addMany([n,s,new d5({layers:[i,r],title:"Accidents, Construction and Closures"}),e])}async fetchData(){return await(await fetch("https://www.vernonia-or.gov/road-data/")).json()}async loadData(){try{const t=await this.fetchData(),{cameras:e,events:r}=this.graphicsLayers;e.addGraphics(t.cameraPoints),r.addGraphics(t.eventPoints)}catch(t){console.log(t)}}async updateData(){try{const t=await this.fetchData(),{cameras:e}=this.graphicsLayers;e.updateAttributes(t.cameraPoints)}catch(t){console.log(t)}}async loadLiveTraffic(){const t=this.liveTraffic=new(await R(async()=>{const{default:r}=await import("./money-tides-TileLayer-CvFplQGz.js");return{default:r}},__vite__mapDeps([393,3,4,1,2,5,6,7,8,9,10,12,13,14]))).default({url:"https://www.tripcheck.com/Basemaps/Pseudo.MapServer/Inrix/MapServer",visible:this.visible,customParameters:{d:new Date().getTime()}}),e=F9.map;e.layers.on("after-add",()=>{e.layers.indexOf(t)!==0&&e.reorder(t,0)}),e.add(t,0),this.addHandles(X(()=>this.visible,r=>{t.visible=r}))}};Yh([u()],vh.prototype,"title",2);Yh([u()],vh.prototype,"visible",2);vh=Yh([_("TrafficLayers")],vh);let h5=class extends pi{constructor(){super(...arguments),this.idField="cameraId",this.fields=[{name:"cameraId",alias:"Camera ID",type:"esriFieldTypeInteger"},{name:"publishedImageId",alias:"Published Image ID",type:"esriFieldTypeInteger"},{name:"filename",alias:"Filename",type:"esriFieldTypeString",length:255},{name:"iconType",alias:"Icon Type",type:"esriFieldTypeInteger"},{name:"latitude",alias:"Latitude",type:"esriFieldTypeDouble"},{name:"longitude",alias:"Longitude",type:"esriFieldTypeDouble"},{name:"route",alias:"Route Name",type:"esriFieldTypeString",length:6},{name:"title",alias:"Title",type:"esriFieldTypeString",length:100},{name:"videoId",alias:"Video ID",type:"esriFieldTypeInteger"}]}async addGraphics(t){const{features:e,spatialReference:r}=t,i=(await R(async()=>{const{default:l}=await Promise.resolve().then(()=>uS);return{default:l}},void 0)).default,s=(await R(async()=>{const{default:l}=await Promise.resolve().then(()=>AT);return{default:l}},void 0)).default,n=(await R(async()=>{const{default:l}=await Promise.resolve().then(()=>CT);return{default:l}},void 0)).default,{webMercatorToGeographic:o}=await R(async()=>{const{webMercatorToGeographic:l}=await Promise.resolve().then(()=>nS);return{webMercatorToGeographic:l}},void 0);e.forEach(l=>{const{attributes:c,geometry:{x:d,y:h}}=l,y=o(new i({spatialReference:r,x:d,y:h})),f=this.getColors();this.addMany([new s({attributes:c,geometry:y,symbol:new n({style:"circle",size:13,color:f.secondary,outline:{color:f.primary,width:1}})}),new s({attributes:c,geometry:y,symbol:new n({style:"circle",size:7,color:f.primary,outline:{width:0},path:Ose})})])}),this.addHandles(X(()=>Xn.colorType,this.updateSymbols.bind(this)))}async updateAttributes(t){const{features:e}=t;this.graphics.forEach(r=>{const i=e.find(s=>r.attributes[this.idField]===s.attributes[this.idField]);i&&(r.attributes=i.attributes)})}getColors(){return Xn.colorType==="dark"?{primary:"white",secondary:"black"}:{primary:"black",secondary:"white"}}updateSymbols(){const t=this.getColors();this.graphics.forEach(e=>{const r=e.symbol?.clone();r.path?r.color=t.primary:(r.color=t.secondary,r.outline.color=t.primary),e.symbol=r})}};h5=Yh([_("Cameras")],h5);let y5=class extends pi{constructor(){super(...arguments),this.fields=[{name:"incidentId",alias:"Incident ID",type:"esriFieldTypeInteger"},{name:"tocsIncidentId",type:"esriFieldTypeInteger"},{name:"type",alias:"Event Type",type:"esriFieldTypeString",length:10},{name:"lastUpdated",alias:"Last Updated",type:"esriFieldTypeString",length:19},{name:"startTime",alias:"Start Time",type:"esriFieldTypeString",length:19},{name:"locationName",alias:"Location Name",type:"esriFieldTypeString",length:50},{name:"route",alias:"Route Name",type:"esriFieldTypeString",length:6},{name:"eventTypeId",alias:"Event Type ID",type:"esriFieldTypeString",length:2},{name:"eventTypeName",alias:"Event Type Name",type:"esriFieldTypeString",length:50},{name:"eventSubTypeId",alias:"Event Sub Type ID",type:"esriFieldTypeInteger"},{name:"eventSubTypeName",alias:"Event Sub Type Name",type:"esriFieldTypeString",length:50},{name:"odotCategoryID",alias:"Category ID",type:"esriFieldTypeString",length:1},{name:"odotCategoryDescript",alias:"Category Description",type:"esriFieldTypeString",length:50},{name:"odotSeverityID",alias:"Severity ID",type:"esriFieldTypeInteger"},{name:"odotSeverityDescript",alias:"Severity Description",type:"esriFieldTypeString",length:100},{name:"iconType",alias:"Icon Type",type:"esriFieldTypeInteger"},{name:"beginMP",alias:"Begin Milepost",type:"esriFieldTypeInteger"},{name:"beginMarker",alias:"Begin Marker",type:"esriFieldTypeString",length:200},{name:"endMP",alias:"End Milepost",type:"esriFieldTypeInteger"},{name:"endMarker",alias:"End Marker",type:"esriFieldTypeString",length:200},{name:"startLatitude",alias:"Start Latitude",type:"esriFieldTypeDouble"},{name:"startLongitude",alias:"Start Longitude",type:"esriFieldTypeDouble"},{name:"endLatitude",alias:"End Latitude",type:"esriFieldTypeDouble"},{name:"endLongitude",alias:"End Longitude",type:"esriFieldTypeDouble"},{name:"incidentDirection",alias:"Incdident Direction",type:"esriFieldTypeString",length:2},{name:"odotOffHwyCD",alias:"Off Highway Code",type:"esriFieldTypeString",length:2},{name:"odotOffHwyDescription",alias:"Off Highway Description",type:"esriFieldTypeString",length:50},{name:"publicContact",alias:"Public Contact",type:"esriFieldTypeString",length:100},{name:"publiContactPhone",alias:"Contact Phone",type:"esriFieldTypeString",length:20},{name:"infoUrl",alias:"Info URL",type:"esriFieldTypeString",length:255},{name:"comments",alias:"Comments",type:"esriFieldTypeString",length:255},{name:"tmdOther",alias:"Other",type:"esriFieldTypeString",length:255},{name:"delayInfo",alias:"Delay Info",type:"esriFieldTypeString",length:20}],this.eventTypes=["type: EVENT - type name: Road Work - subtype name: Road Construction","type: EVENT - type name: Road Work - subtype name: Utility Work","type: EVENT - type name: Road Work - subtype name: Road Maintenance Operations","type: EVENT - type name: Road Work - subtype name: Bridge Work","type: INCIDENT - type name: Obstruction - subtype name: Road Surface Collapse","type: INCIDENT - type name: Obstruction - subtype name: SUNKEN GRADE","type: INCIDENT - type name: Obstruction - subtype name: Hazardous Debris","type: INCIDENT - type name: Obstruction - subtype name: Landslide","type: INCIDENT - type name: Obstruction - subtype name: Animal on Roadway","type: INCIDENT - type name: Obstruction - subtype name: Rock fall","type: INCIDENT - type name: Obstruction - subtype name: High-water","type: INCIDENT - type name: Vehicle Incident - subtype name: Crash","type: INCIDENT - type name: Miscellaneous - subtype name: Closure","type: INCIDENT - type name: Vehicle Incident - subtype name: Hazmat Cleanup","type: INCIDENT - type name: Devices - subtype name: RR Xing Equipment Failure","type: INCIDENT - type name: Miscellaneous - subtype name: Rest area","type: INCIDENT - type name: Miscellaneous - subtype name: Long-term ATIS","type: INCIDENT - type name: Road Work - subtype name: Controlled Burn","type: INCIDENT - type name: Obstruction - subtype name: Erosion","type: INCIDENT - type name: Weather Event - subtype name: Chain Condition","type: INCIDENT - type name: Vehicle Incident - subtype name: Disabled Vehicle - Hazard","type: INCIDENT - type name: Obstruction - subtype name: Animal Struck - Hazard","type: INCIDENT - type name: Disaster - subtype name: Fire","type: INCIDENT - type name: Obstruction - subtype name: Hazardous Tree or Vegetation","type: INCIDENT - type name: Weather Event - subtype name: Winter","type: INCIDENT - type name: Weather Event - subtype name: Ice Warning","type: INCIDENT - type name: Obstruction - subtype name: Pothole"]}async addGraphics(t){const{features:e,spatialReference:r}=t,i=(await R(async()=>{const{default:l}=await Promise.resolve().then(()=>uS);return{default:l}},void 0)).default,s=(await R(async()=>{const{default:l}=await Promise.resolve().then(()=>AT);return{default:l}},void 0)).default,n=(await R(async()=>{const{default:l}=await Promise.resolve().then(()=>CT);return{default:l}},void 0)).default,{webMercatorToGeographic:o}=await R(async()=>{const{webMercatorToGeographic:l}=await Promise.resolve().then(()=>nS);return{webMercatorToGeographic:l}},void 0);e.forEach(l=>{const{attributes:c,attributes:{type:d,eventTypeName:h,eventSubTypeName:y},geometry:{x:f,y:m}}=l,g=`type: ${d} - type name: ${h} - subtype name: ${y}`,v=this.eventTypes.length;this.eventTypes.indexOf(g)===-1&&(this.eventTypes.push(g),console.log("New event type:",g)),v<this.eventTypes.length&&(console.log("Upadted event types..."),console.log(this.eventTypes));const b=o(new i({spatialReference:r,x:f,y:m})),S=this.getColors(h),$=h==="Vehicle Incident"?Rse:h==="Road Work"?Cse:Lse;this.addMany([new s({attributes:c,geometry:b,symbol:new n({style:"circle",size:13,color:S.secondary,outline:{color:S.primary,width:1}})}),new s({attributes:c,geometry:b,symbol:new n({style:"circle",size:7,color:S.primary,outline:{width:0},path:$})})])}),this.addHandles(X(()=>Xn.colorType,this.updateSymbols.bind(this)))}getColors(t){const e=ff(t==="Vehicle Incident"||t==="Obstruction"||t==="Disaster"?"--calcite-color-status-danger-press":t==="Road Work"?"--calcite-color-status-warning-press":"--calcite-color-status-info-press");return Xn.colorType==="dark"?{primary:"white",secondary:e}:{primary:e,secondary:"white"}}updateSymbols(){this.graphics.forEach(t=>{const e=t.symbol?.clone(),r=this.getColors(t.attributes.eventTypeName);e.path?e.color=r.primary:(e.color=r.secondary,e.outline.color=r.primary),t.symbol=e})}};y5=Yh([_("Events")],y5);const n2e=t=>t.toFormat("yyyyLLdd"),Fse=t=>Nse(t,{hour:12}),Nse=(t,e)=>{const r={hour:0,minute:0,second:0,millisecond:0,...e};return t.set(r)},o2e=t=>t.toFormat("h:mm a");function H1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}var Dse={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function f5(t,e){function r(s,n,o){if(!(typeof document>"u")){o=H1({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var c in o)o[c]&&(l+="; "+c,o[c]!==!0&&(l+="="+o[c].split(";")[0]));return document.cookie=s+"="+t.write(n,s)+l}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var n=document.cookie?document.cookie.split("; "):[],o={},l=0;l<n.length;l++){var c=n[l].split("="),d=c.slice(1).join("=");try{var h=decodeURIComponent(c[0]);if(o[h]=t.read(d,h),s===h)break}catch{}}return s?o[s]:o}}return Object.create({set:r,get:i,remove:function(s,n){r(s,"",H1({},n,{expires:-1}))},withAttributes:function(s){return f5(this.converter,H1({},this.attributes,s))},withConverter:function(s){return f5(H1({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var a_=f5(Dse,{path:"/"}),jse=Object.defineProperty,Vse=Object.getOwnPropertyDescriptor,Al=(t,e,r,i)=>{for(var s=i>1?void 0:i?Vse(e,r):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(s=(i?o(e,r,s):o(s))||s);return i&&s&&jse(e,r,s),s};const l_="money-tides-user-settings";let Yn=class extends Z{constructor(){super(...arguments),this.basemap="gray-vector",this.colorMode="auto",this.colorType="light",this.date=Fse(Re.now().setZone("America/Los_Angeles")),this.layout="end",this.preferredColorMode=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",this.scale="s"}load(){const t=JSON.parse(a_.get(l_)||"{}"),{colorMode:e,scale:r}=t;e&&(this.colorMode=e),this.colorModeUpdate(this.colorMode),r&&(this.scale=r)}updateSettings(t){const{colorMode:e,scale:r}=t;e&&(this.colorMode=e,this.colorModeUpdate(this.colorMode)),r&&(this.scale=r),a_.set(l_,JSON.stringify({colorMode:this.colorMode,scale:this.scale}))}colorModeUpdate(t){t==="auto"?(this.colorType=this.preferredColorMode,this.basemap=this.preferredColorMode==="light"?"gray-vector":"dark-gray-vector"):(this.colorType=t,this.basemap=t==="light"?"gray-vector":"dark-gray-vector"),document.body.classList.remove("calcite-mode-dark"),document.body.classList.remove("calcite-mode-light"),document.body.classList.add(`calcite-mode-${t==="auto"?this.preferredColorMode:t}`);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",this.colorType==="dark"?"#009af2":"#007ac2")}};Al([u()],Yn.prototype,"basemap",2);Al([u()],Yn.prototype,"colorMode",2);Al([u()],Yn.prototype,"colorType",2);Al([u()],Yn.prototype,"date",2);Al([u()],Yn.prototype,"layout",2);Al([u()],Yn.prototype,"scale",2);Yn=Al([_("ApplicationSettings")],Yn);const u_={description:"dB",gradientInfos:[{label:-20,value:"#6b6b2b 0.00%"},{label:-10,value:"#bfb7a0 11.11%"},{label:0,value:"#6fa0d9 22.22%"},{label:10,value:"#345fb8 33.33%"},{label:20,value:"#19a92f 44.44%"},{label:30,value:"#2aa84f 55.56%"},{label:40,value:"#ffea3b 66.67%, #ff8c00 66.67%"},{label:50,value:"#ff8c00 77.78%, #d9252b 88.89%"},{label:60,value:"#d9252b 88.89%"},{label:70,value:"#8b1a70 100.00%"}]},zse={alert:"exclamation-mark-triangle",danger:"exclamation-mark-triangle-f",error:"exclamation-point-f",info:"information"},Xn=new Yn,Use=[{id:"9434939",latitude:44.434,longitude:-124.058,name:"Alsea Bay",weather:"us/or/waldport",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ253",name:"Coastal waters from Cape Foulweather to Florence OR out 10 nm"}},{id:"9439040",latitude:46.207,longitude:-123.768,name:"Astoria",weather:"us/or/astoria",forecastZone:{code:"ORZ101",name:"Clatsop County Coast"},coastalZone:{code:"PZZ210",name:"Columbia River Bar"}},{id:"9430104",latitude:42.043,longitude:-124.285,name:"Chetco River",weather:"us/or/brookings",forecastZone:{code:"ORZ022",name:"Curry County Coast"},coastalZone:{code:"PZZ356",name:"Coastal waters from Cape Blanco OR to Pt. St. George CA out 10 nm"}},{id:"9432845",latitude:43.38,longitude:-124.215,name:"Coos Bay",weather:"us/or/coos-bay",forecastZone:{code:"ORZ021",name:"South Central Oregon Coast"},coastalZone:{code:"PZZ350",name:"Coastal waters from Florence to Cape Blanco OR out 10 nm"}},{id:"9432373",latitude:43.12,longitude:-124.413,name:"Coquille River",weather:"us/or/bandon",forecastZone:{code:"ORZ021",name:"South Central Oregon Coast"},coastalZone:{code:"PZZ350",name:"Coastal waters from Florence to Cape Blanco OR out 10 nm"}},{id:"9435827",latitude:44.81,longitude:-124.058,name:"Depoe Bay",weather:"us/or/depoe-bay",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9437908",latitude:45.71,longitude:-123.89,name:"Nehalem Bay",weather:"us/or/wheeler",forecastZone:{code:"ORZ102",name:"Tillamook County Coast"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"TWC0857",latitude:45.167,longitude:-123.967,name:"Nestucca Bay",weather:"us/or/pacific-city",forecastZone:{code:"ORZ102",name:"Tillamook County Coast"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9437262",latitude:45.43,longitude:-123.945,name:"Netarts Bay",weather:"us/or/netarts",forecastZone:{code:"ORZ102",name:"Tillamook County Coast"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9431011",latitude:42.422,longitude:-124.419,name:"Rouge River",weather:"us/or/gold-beach",forecastZone:{code:"ORZ022",name:"Curry County Coast"},coastalZone:{code:"PZZ356",name:"Coastal waters from Cape Blanco OR to Pt. St. George CA out 10 nm"}},{id:"9436101",latitude:44.927,longitude:-124.013,name:"Siletz Bay",weather:"us/or/lincoln-city",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9434132",latitude:44.017,longitude:-124.13,name:"Siuslaw River",weather:"us/or/florence",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ350",name:"Coastal waters from Florence to Cape Blanco OR out 10 nm"}},{id:"9437585",latitude:45.57,longitude:-123.965,name:"Tillamook Bay",weather:"us/or/garibaldi",forecastZone:{code:"ORZ102",name:"Tillamook County Coast"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9440747",latitude:46.502,longitude:-124.023,name:"Willapa Bay",weather:"us/wa/long-beach",forecastZone:{code:"WAZ201",name:"South Washington Coast"},coastalZone:{code:"PZZ251",name:"Coastal waters from Cape Shoalwater WA to Cape Falcon OR out 10 nm"}},{id:"9433501",latitude:43.708,longitude:-124.098,name:"Winchester Bay",weather:"us/or/winchester-bay",forecastZone:{code:"ORZ021",name:"South Central Oregon Coast"},coastalZone:{code:"PZZ350",name:"Coastal waters from Florence to Cape Blanco OR out 10 nm"}},{id:"9435385",latitude:44.627,longitude:-124.055,name:"Yaquina Bay",weather:"us/or/newport",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ253",name:"Coastal waters from Cape Foulweather to Florence OR out 10 nm"}}],F9=new QZ({constraints:{rotationEnabled:!1},extent:{spatialReference:{wkid:102100},xmin:-13855960,ymin:5497816,xmax:-13715621,ymax:5765651},map:new c$({basemap:Xn.basemap})});X(()=>Xn.basemap,t=>{F9.map.basemap=t});ue.fromJSON({spatialReference:{wkid:4326},xmin:-124.81002376060317,ymin:41.75321426465116,xmax:-123.35099265734756,ymax:46.79154423016332});const qse=new H({outFields:["*"],url:"https://mapservices.weather.noaa.gov/eventdriven/rest/services/WWA/watch_warn_adv/MapServer/1"});let Gse=new Ve({spatialReference:{wkid:4326},rings:[[[-124.28500000000001,42.10095538564621],[-124.28241334906178,42.10092333383122],[-124.27982956439917,42.10082721390198],[-124.27725150908569,42.100667132366006],[-124.27468203979436,42.1004432666036],[-124.27212400360665,42.10015586466974],[-124.26958023483253,42.099805245017045],[-124.26705355184518,42.09939179613999],[-124.2645467539342,42.09891597614111],[-124.26206261818056,42.09837831221937],[-124.2596038963576,42.097779400081414],[-124.25717331186051,42.09711990327649],[-124.25477355666912,42.09640055245558],[-124.25240728834648,42.09562214455573],[-124.25007712707698,42.094785541910596],[-124.24778565274778,42.093891671288006],[-124.24553540207606,42.092941522855824],[-124.24332886578638,42.09193614907725],[-124.24116848584028,42.09087666353681],[-124.23905665272203,42.089764239698425],[-124.23699570278359,42.08860010959686],[-124.23498791565112,42.08738556246427],[-124.23303551169651,42.08612194329315],[-124.23114064957696,42.084810651337584],[-124.22930542384452,42.08345313855433],[-124.22753186262906,42.08205090798556],[-124.22582192539704,42.08060551208517],[-124.22417750078817,42.07911855099044],[-124.22260040453283,42.077591670741214],[-124.22109237745222,42.076026561448266],[-124.2196550835438,42.074424955413434],[-124.21829010815338,42.072788625203174],[-124.21699895623658,42.07111938167797],[-124.21578305071122,42.069419071979816],[-124.21464373090232,42.06768957748004],[-124.21358225108125,42.0659328116896],[-124.2125997791011,42.06415071813452],[-124.21169739512897,42.06234526819867],[-124.2108760904769,42.06051845893626],[-124.21013676653277,42.058672310856686],[-124.20948023379162,42.05680886568408],[-124.20890721098893,42.05493018409412],[-124.20841832433655,42.05303834343055],[-124.20801410686174,42.05113543540419],[-124.20769499785025,42.049223563776664],[-124.20746134239353,42.047304842031735],[-124.20731339104096,42.045381391036685],[-124.20725129955679,42.043455336696255],[-124.20727512878216,42.04152880760202],[-124.20738484460234,42.03960393267954],[-124.20758031801871,42.03768283883594],[-124.20786132532565,42.0357676486107],[-124.20822754839159,42.03386047783197],[-124.2086785750443,42.031963433281206],[-124.20921389955903,42.030078610368605],[-124.20983292324976,42.028208090821856],[-124.21053495516213,42.0263539403909],[-124.21131921286715,42.024518206570924],[-124.21218482335524,42.02270291634648],[-124.21313082402877,42.02091007395878],[-124.21415616379225,42.019141658698835],[-124.21525970423899,42.01739962272892],[-124.21644022093243,42.0156858889344],[-124.21769640478094,42.01400234880866],[-124.21902686350437,42.01235086037307],[-124.22043012319037,42.01073324613456],[-124.22190462993942,42.0091512910827],[-124.22344875159571,42.00760674072869],[-124.22506077956272,42.00610129918831],[-124.22673893070098,42.0046366273108],[-124.22848134930592,42.00321434085586],[-124.23028610916404,42.001836008720495],[-124.23215121568414,42.00050315121792],[-124.23407460810252,41.99921723841003],[-124.23605416175856,41.99797968849552],[-124.23808769043873,41.99679186625513],[-124.24017294878657,41.99565508155596],[-124.24230763477568,41.99457058791611],[-124.24448939224315,41.99353958113146],[-124.24671581348062,41.99256319796602],[-124.24898444188048,41.991642514907],[-124.25129277463377,41.99077854698624],[-124.25363826547748,41.98997224666913],[-124.25601832748778,41.9892245028121],[-124.25843033591663,41.98853613968994],[-124.26087163106833,41.98790791609391],[-124.26333952121338,41.98734052450167],[-124.26583128553594,41.98683459031967],[-124.26834417711247,41.9863906711992],[-124.27087542591768,41.98600925642654],[-124.27342224185533,41.985690766387776],[-124.27598181780978,41.98543555210922],[-124.27855133271602,41.98524389487361],[-124.28112795464395,41.985116005912474],[-124.28370884389486,41.98505202617526],[-124.28629115610515,41.98505202617526],[-124.28887204535606,41.985116005912474],[-124.29144866728399,41.98524389487361],[-124.29401818219023,41.98543555210922],[-124.29657775814468,41.985690766387776],[-124.29912457408233,41.98600925642654],[-124.30165582288754,41.9863906711992],[-124.30416871446407,41.98683459031967],[-124.30666047878664,41.98734052450167],[-124.30912836893168,41.98790791609391],[-124.31156966408338,41.98853613968994],[-124.31398167251223,41.9892245028121],[-124.31636173452253,41.98997224666913],[-124.31870722536624,41.99077854698624],[-124.32101555811953,41.991642514907],[-124.32328418651939,41.99256319796602],[-124.32551060775685,41.99353958113146],[-124.32769236522432,41.99457058791611],[-124.32982705121344,41.99565508155596],[-124.33191230956128,41.99679186625513],[-124.33394583824145,41.99797968849552],[-124.33592539189749,41.99921723841003],[-124.33784878431587,42.00050315121792],[-124.33971389083598,42.001836008720495],[-124.34151865069408,42.00321434085586],[-124.34326106929905,42.0046366273108],[-124.34493922043728,42.00610129918831],[-124.3465512484043,42.00760674072869],[-124.34809537006059,42.0091512910827],[-124.34956987680964,42.01073324613456],[-124.35097313649565,42.012350860373076],[-124.35230359521907,42.01400234880865],[-124.35355977906758,42.0156858889344],[-124.35474029576102,42.01739962272892],[-124.35584383620775,42.019141658698835],[-124.35686917597124,42.02091007395878],[-124.35781517664476,42.02270291634648],[-124.35868078713285,42.02451820657092],[-124.35946504483788,42.0263539403909],[-124.36016707675024,42.028208090821856],[-124.36078610044098,42.030078610368605],[-124.3613214249557,42.031963433281206],[-124.36177245160842,42.03386047783197],[-124.36213867467436,42.035767648610694],[-124.3624196819813,42.03768283883594],[-124.36261515539766,42.03960393267954],[-124.36272487121785,42.04152880760202],[-124.36274870044323,42.043455336696255],[-124.36268660895907,42.045381391036685],[-124.36253865760648,42.047304842031735],[-124.36230500214975,42.049223563776664],[-124.36198589313827,42.051135435404184],[-124.36158167566347,42.05303834343054],[-124.36109278901108,42.05493018409412],[-124.36051976620838,42.05680886568408],[-124.35986323346724,42.058672310856686],[-124.35912390952312,42.06051845893626],[-124.35830260487104,42.06234526819867],[-124.35740022089891,42.06415071813452],[-124.35641774891876,42.0659328116896],[-124.35535626909768,42.06768957748004],[-124.35421694928878,42.069419071979816],[-124.35300104376343,42.07111938167797],[-124.35170989184662,42.072788625203174],[-124.35034491645621,42.074424955413434],[-124.34890762254778,42.076026561448266],[-124.34739959546718,42.077591670741214],[-124.34582249921185,42.07911855099044],[-124.34417807460297,42.08060551208517],[-124.34246813737094,42.08205090798556],[-124.3406945761555,42.08345313855433],[-124.33885935042305,42.084810651337584],[-124.3369644883035,42.08612194329315],[-124.33501208434889,42.08738556246427],[-124.33300429721642,42.08860010959686],[-124.330943347278,42.08976423969843],[-124.32883151415973,42.09087666353681],[-124.32667113421363,42.09193614907724],[-124.32446459792395,42.092941522855824],[-124.32221434725223,42.093891671288006],[-124.31992287292303,42.09478554191059],[-124.31759271165353,42.09562214455573],[-124.31522644333089,42.09640055245558],[-124.3128266881395,42.09711990327649],[-124.31039610364242,42.097779400081414],[-124.30793738181944,42.09837831221936],[-124.30545324606581,42.09891597614111],[-124.30294644815483,42.09939179613999],[-124.30041976516748,42.099805245017045],[-124.29787599639336,42.10015586466974],[-124.29531796020565,42.1004432666036],[-124.29274849091432,42.100667132366006],[-124.29017043560084,42.10082721390199],[-124.28758665093822,42.10092333383122],[-124.28500000000001,42.10095538564621]],[[-124.41900000000001,42.47995154219152],[-124.41639779589867,42.47991949211303],[-124.41379847541245,42.4798233773926],[-124.41120491893439,42.479663304535876],[-124.40862000041756,42.47943945091998],[-124.40604658416395,42.479152064595404],[-124.40348752162498,42.478801464008896],[-124.4009456482166,42.47838803764774],[-124.3984237801531,42.477912243605786],[-124.39592471130264,42.47737460907183],[-124.393451210069,42.4767757297408],[-124.39100601630251,42.47611626914853],[-124.38859183824368,42.47539695793083],[-124.3862113495035,42.474618593007854],[-124.38386718608339,42.473782036694274],[-124.38156194343848,42.47288821573699],[-124.37929817358757,42.471938120280754],[-124.37707838227287,42.470932802763414],[-124.37490502617278,42.46987337674173],[-124.37278051017122,42.468761015649356],[-124.37070718468621,42.467596951488154],[-124.36868734306063,42.466382473454594],[-124.36672321901864,42.465118926502655],[-124.36481698418996,42.463807709844836],[-124.36297074570541,42.46245027539323],[-124.36118654386577,42.461048126142025],[-124.35946634988689,42.45960281449382],[-124.35781206372378,42.45811594053109],[-124.35622551197532,42.456589150235224],[-124.35470844587276,42.45502413365496],[-124.35326253935358,42.45342262302619],[-124.35188938722301,42.45178639084557],[-124.35059050340526,42.45011724789985],[-124.34936731928626,42.44841704125323],[-124.34822118214964,42.44668765219513],[-124.34715335370757,42.44493099415046],[-124.34616500872808,42.44314901055504],[-124.34525723376049,42.44134367269826],[-124.34443102595952,42.43951697753567],[-124.34368729201023,42.43767094547374],[-124.34302684715423,42.43580761812949],[-124.34245041431814,42.43392905606723],[-124.34195862334542,42.43203733651523],[-124.34155201033218,42.43013455106473],[-124.34123101706724,42.42822280335374],[-124.3409959905776,42.42630420673846],[-124.34084718277869,42.424380881954704],[-124.34078475023084,42.42245495477214],[-124.34080875400099,42.42052855364358],[-124.34091915963023,42.418603807352376],[-124.34111583720696,42.41668284266019],[-124.34139856154539,42.41476778195789],[-124.34176701246894,42.412860740922085],[-124.34222077519834,42.41096382618003],[-124.34275934084343,42.40907913298511],[-124.34338210699845,42.40720874290608],[-124.34408837843961,42.40535472153177],[-124.34487736792433,42.403519116194644],[-124.34574819709094,42.40170395371492],[-124.34669989745773,42.39991123816829],[-124.3477314115203,42.398142948679386],[-124.34884159394564,42.39640103724339],[-124.35002921286151,42.394687426578336],[-124.35129295124011,42.39300400801021],[-124.35263140837353,42.39135263939339],[-124.35404310143993,42.38973514306839],[-124.3555264671586,42.3881533038594],[-124.35707986353148,42.386608867113566],[-124.35870157166995,42.38510353678426],[-124.36038979770404,42.383638973560366],[-124.3621426747723,42.38221679304349],[-124.3639582650904,42.38083856397537],[-124.36583456209537,42.37950580651686],[-124.3677694926637,42.37821999058095],[-124.36976091940079,42.376982534221085],[-124.37180664299896,42.37579480207683],[-124.37390440466176,42.37465810387845],[-124.37605188859146,42.37357369301184],[-124.37824672453779,42.37254276514577],[-124.38048649040414,42.37156645692227],[-124.38276871490936,42.3706458447122],[-124.38509088030176,42.36978194343694],[-124.3874504251222,42.36897570545745],[-124.38984474701405,42.368228019532104],[-124.3922712055763,42.36753970984424],[-124.39472712525692,42.36691153510047],[-124.39720979828368,42.3663441877008],[-124.39971648762908,42.36583829298129],[-124.402244430006,42.36539440853019],[-124.40479083889149,42.365013023578236],[-124.40735290757493,42.3646945584637],[-124.40992781222755,42.36443936417285],[-124.41251271499013,42.36424772195625],[-124.41510476707545,42.36411984302126],[-124.41770111188228,42.364055868301165],[-124.42029888811774,42.364055868301165],[-124.42289523292459,42.36411984302126],[-124.4254872850099,42.36424772195625],[-124.42807218777247,42.36443936417285],[-124.43064709242509,42.3646945584637],[-124.43320916110854,42.365013023578236],[-124.43575556999403,42.36539440853019],[-124.43828351237094,42.36583829298129],[-124.44079020171634,42.3663441877008],[-124.4432728747431,42.36691153510047],[-124.44572879442373,42.36753970984424],[-124.44815525298598,42.368228019532104],[-124.45054957487783,42.36897570545745],[-124.45290911969826,42.36978194343694],[-124.45523128509066,42.3706458447122],[-124.45751350959588,42.37156645692227],[-124.45975327546223,42.37254276514577],[-124.46194811140856,42.37357369301184],[-124.46409559533826,42.37465810387845],[-124.46619335700106,42.37579480207683],[-124.46823908059923,42.376982534221085],[-124.47023050733632,42.37821999058095],[-124.47216543790465,42.37950580651686],[-124.47404173490962,42.38083856397537],[-124.47585732522772,42.38221679304349],[-124.47761020229598,42.383638973560366],[-124.47929842833007,42.38510353678426],[-124.48092013646854,42.386608867113566],[-124.48247353284142,42.3881533038594],[-124.4839568985601,42.389735143068386],[-124.4853685916265,42.39135263939338],[-124.48670704875991,42.39300400801021],[-124.48797078713851,42.394687426578336],[-124.48915840605439,42.39640103724339],[-124.49026858847972,42.398142948679386],[-124.4913001025423,42.39991123816829],[-124.49225180290908,42.40170395371492],[-124.4931226320757,42.403519116194644],[-124.49391162156041,42.40535472153177],[-124.49461789300157,42.40720874290608],[-124.4952406591566,42.40907913298511],[-124.49577922480168,42.41096382618003],[-124.49623298753109,42.412860740922085],[-124.49660143845463,42.414767781957885],[-124.49688416279307,42.41668284266019],[-124.49708084036979,42.418603807352376],[-124.49719124599903,42.42052855364358],[-124.49721524976918,42.42245495477214],[-124.49715281722133,42.424380881954704],[-124.49700400942244,42.42630420673846],[-124.49676898293278,42.42822280335374],[-124.49644798966784,42.43013455106473],[-124.4960413766546,42.43203733651523],[-124.49554958568189,42.43392905606723],[-124.49497315284579,42.43580761812949],[-124.49431270798979,42.43767094547374],[-124.4935689740405,42.439516977535675],[-124.49274276623953,42.44134367269826],[-124.49183499127194,42.44314901055503],[-124.49084664629245,42.44493099415046],[-124.48977881785038,42.44668765219513],[-124.48863268071376,42.44841704125323],[-124.48740949659476,42.45011724789985],[-124.48611061277701,42.45178639084557],[-124.48473746064644,42.45342262302619],[-124.48329155412726,42.45502413365496],[-124.4817744880247,42.45658915023524],[-124.48018793627624,42.45811594053109],[-124.47853365011314,42.45960281449382],[-124.47681345613425,42.46104812614203],[-124.47502925429461,42.46245027539322],[-124.47318301581006,42.463807709844836],[-124.47127678098138,42.465118926502655],[-124.4693126569394,42.466382473454594],[-124.46729281531381,42.467596951488154],[-124.4652194898288,42.46876101564936],[-124.46309497382724,42.46987337674173],[-124.46092161772715,42.470932802763414],[-124.45870182641245,42.471938120280754],[-124.45643805656154,42.472888215736994],[-124.45413281391663,42.473782036694274],[-124.45178865049652,42.474618593007854],[-124.44940816175634,42.47539695793084],[-124.44699398369751,42.47611626914853],[-124.44454878993102,42.4767757297408],[-124.44207528869738,42.47737460907183],[-124.43957621984694,42.477912243605786],[-124.43705435178342,42.47838803764774],[-124.43451247837504,42.478801464008896],[-124.43195341583608,42.47915206459541],[-124.42937999958247,42.47943945091998],[-124.42679508106563,42.479663304535876],[-124.42420152458757,42.479823377392606],[-124.42160220410135,42.47991949211303],[-124.41900000000001,42.47995154219152]],[[-124.413,43.17794445258467],[-124.41036835104792,43.17791240569798],[-124.40773961853887,43.17781630055192],[-124.4051167156565,43.177656243648684],[-124.40250254906907,43.17743241235984],[-124.39990001568152,43.17714505472792],[-124.39731199939833,43.17679448918937],[-124.39474136790164,43.17638110421866],[-124.3921909694483,43.17590535789434],[-124.38966362968857,43.175367777387144],[-124.38716214851206,43.174768958371146],[-124.3846892969222,43.17410956435835],[-124.38224781394494,43.173390325957676],[-124.37984040357371,43.17261204005894],[-124.37746973175508,43.1717755689431],[-124.37513842341797,43.17088183931959],[-124.37284905955018,43.16993184129179],[-124.37060417432559,43.168926627252034],[-124.36840625228473,43.16786731070724],[-124.36625772557285,43.166755065036575],[-124.36416097123752,43.1655911221827],[-124.36211830859011,43.1643767712777],[-124.36013199663272,43.163113357205944],[-124.35820423155451,43.16180227910478],[-124.35633714429974,43.160444988805345],[-124.3545327982104,43.15904298921491],[-124.35279318674579,43.15759783264289],[-124.351120231282,43.15611111907214],[-124.34951577899338,43.15458449437785],[-124.34798160081826,43.15301964849558],[-124.34651938951157,43.1514183135411],[-124.34513075778597,43.14978226188374],[-124.3438172365436,43.14811330417554],[-124.34258027320092,43.146413287338476],[-124.34142123010733,43.14468409251217],[-124.34034138306026,43.14292763296402],[-124.3393419199178,43.14114585196449],[-124.33842393931022,43.1393407206298],[-124.3375884494519,43.13751423573449],[-124.33683636705493,43.13566841749606],[-124.33616851634528,43.13380530733475],[-124.33558562818232,43.1319269656102],[-124.33508833928319,43.130035469338324],[-124.33467719155198,43.12813290989029],[-124.33435263151466,43.12622139067655],[-124.3341150098604,43.124303024818346],[-124.33396458108925,43.12237993280939],[-124.33390150326679,43.120454240170154],[-124.33392583788553,43.11852807509764],[-124.33403754983318,43.11660356611286],[-124.33423650746802,43.114682839708955],[-124.33452248280028,43.11276801800247],[-124.33489515178003,43.11086121639018],[-124.33535409469091,43.10896454121435],[-124.33589879664838,43.10708008743875],[-124.33652864820296,43.10520993633817],[-124.33724294604679,43.10335615320371],[-124.33804089382276,43.10152078506672],[-124.33892160303549,43.09970585844351],[-124.33988409406258,43.09791337710351],[-124.34092729726518,43.09614531986334],[-124.3420500541964,43.09440363840893],[-124.34325111890634,43.09269025514841],[-124.34452915934162,43.091007061097876],[-124.34588275883844,43.08935591380227],[-124.34731041770718,43.08773863529388],[-124.34881055490636,43.086157010090446],[-124.35038150980462,43.08461278323507],[-124.35202154402826,43.08310765838016],[-124.35372884339245,43.08164329591722],[-124.35550151991404,43.08022131115493],[-124.35733761390324,43.078843272546955],[-124.35923509613252,43.07751069997173],[-124.36119187007967,43.07622506306599],[-124.36320577424304,43.074987779613835],[-124.36527458452609,43.0738002139929],[-124.36739601668873,43.07266367567957],[-124.3695677288629,43.07157941781454],[-124.37178732412937,43.070548635830555],[-124.37405235315326,43.069572466143434],[-124.37636031687524,43.06865198490813],[-124.37870866925545,43.06778820684089],[-124.38109482006767,43.06698208410889],[-124.3835161377398,43.06623450528854],[-124.38596995223857,43.06554629439336],[-124.38845355799492,43.06491820997286],[-124.39096421686695,43.064350944282914],[-124.39349916113733,43.063845122528825],[-124.39605559654196,43.063401302181795],[-124.39863070532685,43.063019972369524],[-124.40122164932964,43.06270155334144],[-124.40382557308278,43.06244639600949],[-124.40643960693494,43.0622547815645],[-124.40906087018736,43.06212692116892],[-124.41168647424205,43.06206295572604],[-124.41431352575796,43.06206295572604],[-124.41693912981263,43.06212692116892],[-124.41956039306507,43.0622547815645],[-124.42217442691722,43.06244639600949],[-124.42477835067037,43.06270155334144],[-124.42736929467316,43.063019972369524],[-124.42994440345805,43.063401302181795],[-124.43250083886268,43.063845122528825],[-124.43503578313305,43.06435094428292],[-124.43754644200509,43.06491820997286],[-124.44003004776144,43.06554629439336],[-124.4424838622602,43.06623450528854],[-124.44490517993232,43.06698208410889],[-124.44729133074455,43.06778820684089],[-124.44963968312477,43.06865198490813],[-124.45194764684675,43.069572466143434],[-124.45421267587062,43.070548635830555],[-124.4564322711371,43.07157941781454],[-124.45860398331126,43.07266367567957],[-124.4607254154739,43.0738002139929],[-124.46279422575697,43.074987779613835],[-124.46480812992034,43.07622506306599],[-124.46676490386749,43.07751069997173],[-124.46866238609677,43.078843272546955],[-124.47049848008595,43.08022131115493],[-124.47227115660755,43.08164329591722],[-124.47397845597175,43.08310765838016],[-124.47561849019537,43.08461278323507],[-124.47718944509364,43.086157010090446],[-124.47868958229282,43.08773863529388],[-124.48011724116157,43.08935591380227],[-124.48147084065839,43.091007061097876],[-124.48274888109366,43.09269025514841],[-124.48394994580359,43.09440363840893],[-124.48507270273483,43.09614531986334],[-124.48611590593741,43.09791337710352],[-124.4870783969645,43.09970585844351],[-124.48795910617723,43.10152078506672],[-124.48875705395321,43.10335615320371],[-124.48947135179705,43.105209936338156],[-124.49010120335163,43.10708008743875],[-124.4906459053091,43.10896454121435],[-124.49110484821998,43.11086121639018],[-124.49147751719973,43.11276801800247],[-124.49176349253199,43.114682839708955],[-124.49196245016682,43.11660356611286],[-124.49207416211448,43.11852807509764],[-124.49209849673322,43.120454240170154],[-124.49203541891076,43.12237993280937],[-124.49188499013961,43.124303024818346],[-124.49164736848535,43.12622139067655],[-124.49132280844802,43.12813290989029],[-124.4909116607168,43.130035469338324],[-124.49041437181768,43.1319269656102],[-124.48983148365473,43.13380530733475],[-124.48916363294508,43.13566841749606],[-124.48841155054811,43.13751423573449],[-124.48757606068979,43.139340720629804],[-124.48665808008221,43.14114585196448],[-124.48565861693974,43.14292763296402],[-124.48457876989268,43.14468409251217],[-124.48341972679908,43.146413287338476],[-124.4821827634564,43.148113304175546],[-124.48086924221404,43.14978226188374],[-124.47948061048844,43.15141831354111],[-124.47801839918174,43.15301964849558],[-124.47648422100663,43.15458449437784],[-124.474879768718,43.15611111907214],[-124.47320681325422,43.15759783264289],[-124.4714672017896,43.15904298921491],[-124.46966285570025,43.160444988805345],[-124.4677957684455,43.16180227910478],[-124.46586800336728,43.163113357205944],[-124.46388169140988,43.1643767712777],[-124.46183902876248,43.1655911221827],[-124.45974227442716,43.16675506503658],[-124.45759374771526,43.167867310707244],[-124.45539582567442,43.168926627252034],[-124.45315094044983,43.16993184129179],[-124.45086157658204,43.17088183931959],[-124.44853026824491,43.1717755689431],[-124.44615959642628,43.17261204005894],[-124.44375218605506,43.17339032595767],[-124.4413107030778,43.174109564358346],[-124.43883785148795,43.17476895837113],[-124.43633637031144,43.175367777387144],[-124.43380903055171,43.17590535789434],[-124.43125863209836,43.17638110421866],[-124.42868800060168,43.17679448918937],[-124.42609998431848,43.17714505472792],[-124.42349745093094,43.17743241235984],[-124.4208832843435,43.177656243648684],[-124.41826038146114,43.17781630055192],[-124.41563164895209,43.17791240569798],[-124.413,43.17794445258467]],[[-124.215,43.437941808746295],[-124.21235711048953,43.43790976304599],[-124.20971714995467,43.43781366145857],[-124.20708304409725,43.43765361048513],[-124.20445771207513,43.43742978749517],[-124.2018440632398,43.43714244052841],[-124.19924499388522,43.43679188801758],[-124.19666338401157,43.436378518432605],[-124.19410209410829,43.4359027898465],[-124.19156396195905,43.435365229423546],[-124.18905179947333,43.43476643283031],[-124.18656838954777,43.43410706357026],[-124.18411648296092,43.43338785224256],[-124.18169879530504,43.43260959572613],[-124.17931800395853,43.43177315628974],[-124.17697674510212,43.43087946062922],[-124.17467761078287,43.42992949883302],[-124.17242314602852,43.428924323276895],[-124.17021584601616,43.427865047449664],[-124.16805815329808,43.426752844710705],[-124.16595245508789,43.425588946980994],[-124.16390108061036,43.42437464336923],[-124.16190629851747,43.423111278734254],[-124.15997031437385,43.42180025218595],[-124.15809526821451,43.420443015525755],[-124.15628323217726,43.41904107162909],[-124.15453620821266,43.417595972771124],[-124.15285612587415,43.41610931889811],[-124.15124484019043,43.41458275584608],[-124.14970412962286,43.41301797350896],[-124.14823569410953,43.4114167039582],[-124.14684115319884,43.409780719516135],[-124.145522044274,43.408111830785],[-124.1442798208706,43.40641188463426],[-124.14311585108894,43.404682762148056],[-124.1420314161032,43.40292637653545],[-124.14102770876787,43.40114467100565],[-124.14010583232462,43.3993396166107],[-124.13926679920938,43.397513210057916],[-124.13851152996148,43.39566747149468],[-124.13784085223595,43.39380444226809],[-124.13725549992004,43.39192618266176],[-124.13675611235422,43.390034769612626],[-124.13634323365908,43.388132294409985],[-124.13601731216838,43.38622086037955],[-124.1357786999687,43.384302580555115],[-124.1356276525461,43.38237957534013],[-124.13556432854018,43.380453970162286],[-124.13558878960517,43.37852789312314],[-124.13570100037886,43.37660347264588],[-124.13590082855822,43.374682835123465],[-124.1361880450825,43.372768102570056],[-124.13656232442267,43.37086139027793],[-124.1370232449768,43.368964804482964],[-124.13757028957161,43.367080440040716],[-124.13820284606803,43.36521037811615],[-124.13892020807165,43.36335668388908],[-124.13972157574536,43.3615214042783],[-124.14060605672478,43.35970656568645],[-124.14157266713404,43.35791417176847],[-124.14262033270165,43.3561462012257],[-124.14374788997418,43.354404605628396],[-124.14495408762714,43.352691307268714],[-124.14623758787087,43.351008197046724],[-124.14759696795026,43.34935713239156],[-124.14903072173612,43.347739935220105],[-124.15053726140665,43.34615838993533],[-124.15211491921713,43.34461424146647],[-124.15376194935531,43.343109193353165],[-124.15547652988126,43.341644905875576],[-124.15725676474852,43.34022299423257],[-124.159100685905,43.33884502676988],[-124.16100625547111,43.33751252326009],[-124.1629713679923,43.33622695323644],[-124.1649938527643,43.334989734382006],[-124.16707147622766,43.33380223097627],[-124.16920194442953,43.332665752400416],[-124.17138290554975,43.33158155170322],[-124.17361195248868,43.33055082422891],[-124.17588662551361,43.32957470630847],[-124.1782044149613,43.328654274015896],[-124.1805627639936,43.327790541990495],[-124.18295907140278,43.32698446232678],[-124.18539069446435,43.326236923532875],[-124.18785495183363,43.32554874955862],[-124.19034912648314,43.32492069889458],[-124.19287046867802,43.32435346374256],[-124.19541619898578,43.3238476692588],[-124.19798351131764,43.32340387287064],[-124.20056957599789,43.32302256366707],[-124.2031715428582,43.3227041618642],[-124.2057865443537,43.32244901834608],[-124.20841169869722,43.32225741428115],[-124.21104411300858,43.32212956081498],[-124.21368088647576,43.32206559883963],[-124.21631911352426,43.32206559883963],[-124.21895588699144,43.32212956081498],[-124.2215883013028,43.32225741428115],[-124.22421345564632,43.32244901834608],[-124.22682845714182,43.3227041618642],[-124.22943042400213,43.32302256366707],[-124.23201648868238,43.32340387287064],[-124.23458380101424,43.3238476692588],[-124.237129531322,43.324353463742554],[-124.23965087351688,43.32492069889458],[-124.24214504816639,43.32554874955862],[-124.24460930553568,43.326236923532875],[-124.24704092859724,43.32698446232678],[-124.24943723600641,43.327790541990495],[-124.2517955850387,43.328654274015896],[-124.25411337448641,43.32957470630847],[-124.25638804751132,43.33055082422891],[-124.25861709445027,43.33158155170322],[-124.26079805557048,43.332665752400416],[-124.26292852377235,43.33380223097627],[-124.26500614723572,43.334989734382006],[-124.26702863200772,43.33622695323644],[-124.26899374452891,43.33751252326009],[-124.27089931409502,43.33884502676988],[-124.2727432352515,43.34022299423257],[-124.27452347011875,43.341644905875576],[-124.2762380506447,43.343109193353165],[-124.2778850807829,43.34461424146647],[-124.27946273859335,43.34615838993533],[-124.2809692782639,43.347739935220105],[-124.28240303204976,43.34935713239155],[-124.28376241212915,43.351008197046724],[-124.28504591237288,43.352691307268714],[-124.28625211002584,43.354404605628396],[-124.28737966729835,43.3561462012257],[-124.28842733286598,43.35791417176847],[-124.28939394327524,43.35970656568645],[-124.29027842425465,43.3615214042783],[-124.29107979192837,43.36335668388908],[-124.29179715393198,43.36521037811615],[-124.29242971042841,43.367080440040716],[-124.29297675502322,43.368964804482964],[-124.29343767557735,43.37086139027793],[-124.2938119549175,43.37276810257005],[-124.2940991714418,43.374682835123465],[-124.29429899962116,43.376603472645876],[-124.29441121039486,43.37852789312314],[-124.29443567145984,43.380453970162286],[-124.29437234745392,43.38237957534013],[-124.29422130003132,43.384302580555115],[-124.29398268783164,43.38622086037955],[-124.29365676634094,43.388132294409985],[-124.29324388764579,43.390034769612626],[-124.29274450007998,43.39192618266176],[-124.29215914776405,43.39380444226809],[-124.29148847003854,43.39566747149468],[-124.29073320079063,43.397513210057916],[-124.2898941676754,43.39933961661071],[-124.28897229123216,43.40114467100565],[-124.28796858389683,43.40292637653544],[-124.28688414891107,43.404682762148056],[-124.28572017912943,43.40641188463426],[-124.28447795572602,43.408111830785],[-124.28315884680119,43.409780719516135],[-124.28176430589049,43.41141670395822],[-124.28029587037716,43.41301797350896],[-124.27875515980958,43.41458275584609],[-124.27714387412587,43.41610931889811],[-124.27546379178736,43.417595972771124],[-124.27371676782276,43.419041071629096],[-124.27190473178551,43.420443015525755],[-124.27002968562616,43.421800252185946],[-124.26809370148256,43.42311127873426],[-124.26609891938966,43.42437464336922],[-124.26404754491212,43.425588946980994],[-124.26194184670194,43.426752844710705],[-124.25978415398384,43.42786504744967],[-124.25757685397149,43.428924323276895],[-124.25532238921716,43.42992949883302],[-124.2530232548979,43.43087946062922],[-124.2506819960415,43.43177315628974],[-124.24830120469498,43.43260959572613],[-124.2458835170391,43.43338785224256],[-124.24343161045225,43.43410706357026],[-124.24094820052669,43.43476643283031],[-124.23843603804097,43.435365229423546],[-124.23589790589173,43.435902789846494],[-124.23333661598845,43.436378518432605],[-124.23075500611479,43.43679188801758],[-124.22815593676022,43.43714244052841],[-124.2255422879249,43.43742978749518],[-124.22291695590278,43.43765361048513],[-124.22028285004535,43.43781366145858],[-124.21764288951049,43.43790976304599],[-124.215,43.437941808746295]],[[-124.098,43.765938471623635],[-124.09534271345545,43.76590642741756],[-124.09268837193878,43.76581033031244],[-124.0900399171857,43.765650286807855],[-124.08740028435128,43.765426474270846],[-124.08477239872907,43.76513914073764],[-124.08215917248194,43.76478860463644],[-124.07956350138767,43.76437525443157],[-124.07698826160365,43.76389954818924],[-124.07443630645433,43.763362013065795],[-124.07191046324498,43.76276324471858],[-124.06941353010532,43.76210390664044],[-124.06694827286712,43.76138472941864],[-124.06451742197889,43.76060650991854],[-124.06212366946116,43.75977011039386],[-124.05976966590644,43.75887645752367],[-124.05745801752668,43.7579265413778],[-124.05519128325159,43.756921414311556],[-124.05297197188183,43.75586218979125],[-124.05080253929924,43.75475004115163],[-124.0486853857382,43.75358620028682],[-124.0466228531208,43.75237195627625],[-124.04461722245864,43.7511086539471],[-124.04267071132459,43.749797692374926],[-124.04078547139707,43.74844052332416],[-124.03896358607963,43.74703864963039],[-124.03720706819837,43.745593623526005],[-124.03551785778018,43.74410704491147],[-124.03389781991362,43.74258055957387],[-124.03234874269518,43.74101585735491],[-124.03087233526317,43.73941467027054],[-124.02947022592097,43.73777877058415],[-124.02814396035238,43.73610996883555],[-124.02689499993024,43.73441011182818],[-124.02572472012034,43.73268108057659],[-124.02463440898272,43.73092478821653],[-124.02362526577123,43.72914317788022],[-124.02269839963341,43.727338220538925],[-124.02185482841165,43.72551191281545],[-124.0210954775467,43.723666274768895],[-124.02042117908529,43.72180334765431],[-124.01983267079206,43.71992519165952],[-124.01933059536704,43.718033883621935],[-124.01891549976929,43.716131514727664],[-124.01858783464745,43.71422018819567],[-124.01834795387731,43.71230201694935],[-124.01819611420734,43.71037912127842],[-124.01813247501171,43.70845362649339],[-124.01815709815135,43.706527660575425],[-124.01826994794325,43.704603351824204],[-124.01847089123707,43.702682826506226],[-124.01875969759979,43.7007682065063],[-124.01913603960713,43.69886160698479],[-124.01959949324198,43.69696513404307],[-124.02014953839885,43.69508088240001],[-124.02078555949356,43.69321093308177],[-124.02150684617781,43.69135735112749],[-124.02231259415693,43.68952218331365],[-124.02320190611061,43.687707455899236],[-124.02417379271496,43.685915172394296],[-124.02522717376439,43.68414731135445],[-124.02636087939274,43.682405824203606],[-124.02757365139146,43.680692633087226],[-124.02886414462363,43.67900962875858],[-124.03023092853188,43.677358668500226],[-124.03167248873916,43.67574157408304],[-124.03318722873924,43.67416012976474],[-124.03477347167627,43.67261608033042],[-124.03642946221075,43.671111129176985],[-124.03815336846972,43.66964693644361],[-124.0399432840792,43.66822511719019],[-124.04179723027671,43.66684723962577],[-124.04371315810097,43.66551482338891],[-124.04568895065705,43.66422933788176],[-124.04772242545391,43.66299220065953],[-124.04981133681217,43.66180477587731],[-124.0519533783389,43.66066837279579],[-124.05414618546756,43.65958424434725],[-124.05638733805958,43.65855358576383],[-124.05867436306497,43.65757753326908],[-124.06100473723934,43.65665716283438],[-124.06337588991411,43.6557934890016],[-124.06578520581702,43.654987463773175],[-124.06823002793992,43.65423997557074],[-124.07070766045064,43.653551848263454],[-124.07321537164637,43.652923840267185],[-124.0757503969443,43.652356643715244],[-124.0783099419077,43.65185088370174],[-124.08089118530306,43.65140711759832],[-124.08349128218582,43.651025834445],[-124.086107367011,43.6507074544157],[-124.0887365567655,43.6504523283591],[-124.09137595411903,43.65026073741522],[-124.09402265059013,43.650132892708335],[-124.0966737297235,43.65006893511619],[-124.09932627027649,43.65006893511619],[-124.10197734940985,43.650132892708335],[-124.10462404588095,43.65026073741522],[-124.1072634432345,43.6504523283591],[-124.109892632989,43.6507074544157],[-124.11250871781418,43.651025834445],[-124.11510881469692,43.65140711759832],[-124.1176900580923,43.65185088370174],[-124.1202496030557,43.652356643715244],[-124.12278462835361,43.652923840267185],[-124.12529233954935,43.653551848263454],[-124.12776997206008,43.65423997557074],[-124.13021479418298,43.654987463773175],[-124.13262411008587,43.6557934890016],[-124.13499526276065,43.65665716283438],[-124.13732563693503,43.65757753326908],[-124.1396126619404,43.65855358576383],[-124.14185381453244,43.65958424434725],[-124.1440466216611,43.66066837279579],[-124.14618866318781,43.66180477587731],[-124.14827757454607,43.66299220065953],[-124.15031104934295,43.66422933788176],[-124.15228684189903,43.66551482338891],[-124.15420276972328,43.66684723962577],[-124.15605671592078,43.66822511719019],[-124.15784663153028,43.66964693644361],[-124.15957053778925,43.671111129176985],[-124.16122652832372,43.67261608033042],[-124.16281277126076,43.67416012976474],[-124.16432751126082,43.67574157408304],[-124.1657690714681,43.677358668500226],[-124.16713585537637,43.67900962875857],[-124.16842634860853,43.680692633087226],[-124.16963912060726,43.682405824203606],[-124.1707728262356,43.68414731135445],[-124.17182620728502,43.685915172394296],[-124.17279809388937,43.687707455899236],[-124.17368740584307,43.68952218331365],[-124.17449315382217,43.69135735112749],[-124.17521444050644,43.69321093308177],[-124.17585046160114,43.69508088240001],[-124.176400506758,43.69696513404307],[-124.17686396039286,43.69886160698479],[-124.17724030240021,43.7007682065063],[-124.17752910876293,43.702682826506226],[-124.17773005205675,43.704603351824204],[-124.17784290184865,43.706527660575425],[-124.17786752498829,43.70845362649339],[-124.17780388579264,43.71037912127842],[-124.17765204612269,43.71230201694935],[-124.17741216535254,43.71422018819567],[-124.1770845002307,43.71613151472766],[-124.17666940463296,43.718033883621935],[-124.17616732920794,43.71992519165952],[-124.17557882091471,43.72180334765431],[-124.17490452245329,43.723666274768895],[-124.17414517158835,43.72551191281545],[-124.17330160036657,43.727338220538925],[-124.17237473422877,43.72914317788022],[-124.17136559101728,43.73092478821653],[-124.17027527987966,43.73268108057659],[-124.16910500006975,43.73441011182818],[-124.1678560396476,43.73610996883555],[-124.16652977407902,43.73777877058415],[-124.16512766473683,43.73941467027054],[-124.1636512573048,43.74101585735491],[-124.16210218008636,43.74258055957387],[-124.1604821422198,43.74410704491147],[-124.15879293180163,43.745593623526005],[-124.15703641392037,43.74703864963039],[-124.15521452860291,43.74844052332416],[-124.15332928867541,43.74979769237492],[-124.15138277754136,43.75110865394711],[-124.1493771468792,43.75237195627624],[-124.1473146142618,43.75358620028682],[-124.14519746070076,43.75475004115163],[-124.14302802811817,43.75586218979125],[-124.14080871674841,43.756921414311556],[-124.13854198247331,43.7579265413778],[-124.13623033409354,43.75887645752367],[-124.13387633053884,43.75977011039386],[-124.1314825780211,43.76060650991854],[-124.12905172713286,43.76138472941864],[-124.12658646989466,43.76210390664045],[-124.12408953675501,43.76276324471857],[-124.12156369354565,43.76336201306578],[-124.11901173839635,43.76389954818924],[-124.11643649861232,43.76437525443157],[-124.11384082751805,43.76478860463644],[-124.11122760127091,43.765139140737645],[-124.10859971564872,43.765426474270846],[-124.10596008281429,43.765650286807855],[-124.1033116280612,43.76581033031243],[-124.10065728654453,43.76590642741756],[-124.098,43.765938471623635]],[[-124.13,44.07493532631847],[-124.1273289251793,44.07490328351739],[-124.12466081076046,44.07480719062685],[-124.12199861383547,44.07464715414506],[-124.11934528488065,44.07442335143684],[-124.11670376445805,44.07413603053522],[-124.11407697992883,44.07378550986429],[-124.11146784218148,44.07337217788318],[-124.10887924237944,44.07289649265196],[-124.10631404873118,44.072358981319645],[-124.10377510328696,44.07176023953516],[-124.10126521876602,44.071100930781675],[-124.09878717541706,44.07038178563538],[-124.09634371791682,44.06960360094929],[-124.09393755230926,44.06876723896324],[-124.09157134298954,44.06787362634083],[-124.08924770973563,44.06692375313472],[-124.08696922479167,44.06591867168135],[-124.08473841000591,44.064859495426205],[-124.08255773402622,44.06374739768122],[-124.08042960955733,44.06258361031565],[-124.07835639068173,44.06136942238179],[-124.07634037024809,44.06010617867738],[-124.07438377732967,44.05879527824607],[-124.07248877475598,44.0574381728179],[-124.07065745671973,44.056036365191325],[-124.06889184646273,44.0545914075589],[-124.06719389404218,44.053104899778354],[-124.06556547418091,44.05157848759103],[-124.064008384203,44.05001386078994],[-124.06252434205751,44.048412751339114],[-124.06111498443248,44.046776931446765],[-124.0597818649609,44.04510821159429],[-124.05852645252104,44.04340843852331],[-124.05735012963235,44.04167949318311],[-124.0562541909493,44.039923288640715],[-124.05523984185395,44.03814176795613],[-124.05430819714951,44.03633690202477],[-124.0534602798557,44.034510687390096],[-124.05269702010698,44.032665144028286],[-124.05201925415557,44.03080231310783],[-124.05142772347892,44.028924254726505],[-124.05092307399411,44.02703304562811],[-124.05050585537802,44.025130776901705],[-124.05017652049564,44.023219551665676],[-124.04993542493594,44.02130148273958],[-124.0497828266556,44.019378690305906],[-124.04971888573183,44.01745329956484],[-124.04974366422299,44.01552743838411],[-124.04985712613816,44.01360323494694],[-124.05005913751505,44.01168281540057],[-124.05034946660564,44.00976830150787],[-124.0507277841702,44.00786180830469],[-124.05119366387792,44.00596544176563],[-124.05174658281462,44.0040812964805],[-124.05238592209615,44.00221145334442],[-124.05311096758702,44.00035797726378],[-124.05392091072311,43.99852291488069],[-124.05481484943732,43.99670829231844],[-124.05579178918754,43.99491611295025],[-124.05685064408475,43.99314835519413],[-124.0579902381209,43.99140697033566],[-124.05920930649413,43.989693880381694],[-124.06050649703059,43.98801097594681],[-124.06188037170055,43.98636011417506],[-124.06332940822745,43.984743116699235],[-124.06485200178771,43.98316176763977],[-124.06644646679963,43.98161781164549],[-124.0681110387991,43.98011295197836],[-124.06984387640014,43.97864884864421],[-124.07164306333803,43.977227116571505],[-124.07350661059264,43.97584932384002],[-124.07543245858984,43.974516989961586],[-124.0774184794781,43.97323158421429],[-124.07946247947821,43.971994524032404],[-124.0815622013035,43.970807173453366],[-124.0837153266473,43.96967084162382],[-124.08591947873599,43.96858678136585],[-124.08817222494358,43.96755618780554],[-124.09047107946635,43.96658019706473],[-124.09281350605342,43.96565988501776],[-124.0951969207911,43.96479626611427],[-124.09761869493768,43.96399029226954],[-124.10007615780577,43.96324285182334],[-124.10256659968907,43.96255476856849],[-124.10508727483023,43.96192680085014],[-124.10763540442707,43.961359640736774],[-124.1102081796736,43.96085391326366],[-124.11280276483264,43.960410175749814],[-124.11541630033706,43.96002891718886],[-124.11804590591599,43.95971055771473],[-124.12068868374294,43.95945544814262],[-124.12334172160249,43.95926386958573],[-124.12600209607201,43.95913603314809],[-124.12866687571531,43.959072079693954],[-124.13133312428467,43.959072079693954],[-124.13399790392796,43.95913603314809],[-124.13665827839749,43.95926386958573],[-124.13931131625704,43.95945544814262],[-124.141954094084,43.95971055771473],[-124.14458369966292,43.96002891718886],[-124.14719723516734,43.960410175749814],[-124.14979182032637,43.96085391326366],[-124.1523645955729,43.96135964073678],[-124.15491272516975,43.96192680085014],[-124.15743340031091,43.96255476856849],[-124.1599238421942,43.96324285182334],[-124.1623813050623,43.96399029226954],[-124.16480307920888,43.96479626611427],[-124.16718649394656,43.96565988501776],[-124.16952892053362,43.96658019706473],[-124.1718277750564,43.96755618780554],[-124.17408052126399,43.96858678136585],[-124.17628467335268,43.96967084162382],[-124.17843779869648,43.970807173453366],[-124.18053752052177,43.971994524032404],[-124.18258152052188,43.97323158421429],[-124.18456754141013,43.974516989961586],[-124.18649338940733,43.97584932384002],[-124.18835693666195,43.977227116571505],[-124.19015612359983,43.97864884864421],[-124.19188896120087,43.98011295197836],[-124.19355353320034,43.98161781164549],[-124.19514799821226,43.98316176763977],[-124.19667059177253,43.98474311669924],[-124.19811962829942,43.98636011417506],[-124.19949350296939,43.98801097594681],[-124.20079069350585,43.989693880381694],[-124.2020097618791,43.99140697033566],[-124.20314935591523,43.99314835519413],[-124.20420821081244,43.99491611295025],[-124.20518515056266,43.99670829231843],[-124.20607908927687,43.99852291488069],[-124.20688903241296,44.00035797726378],[-124.20761407790384,44.00221145334442],[-124.20825341718536,44.0040812964805],[-124.20880633612205,44.00596544176563],[-124.20927221582977,44.00786180830469],[-124.20965053339434,44.00976830150786],[-124.20994086248493,44.01168281540057],[-124.21014287386181,44.01360323494694],[-124.21025633577699,44.01552743838411],[-124.21028111426814,44.01745329956484],[-124.21021717334438,44.019378690305906],[-124.21006457506404,44.02130148273958],[-124.20982347950434,44.023219551665676],[-124.20949414462196,44.025130776901705],[-124.20907692600586,44.02703304562811],[-124.20857227652105,44.028924254726505],[-124.20798074584441,44.03080231310783],[-124.207302979893,44.03266514402828],[-124.20653972014428,44.0345106873901],[-124.20569180285047,44.03633690202477],[-124.20476015814603,44.03814176795612],[-124.20374580905067,44.039923288640715],[-124.20264987036762,44.04167949318311],[-124.20147354747894,44.04340843852331],[-124.20021813503908,44.04510821159429],[-124.1988850155675,44.04677693144676],[-124.19747565794246,44.048412751339114],[-124.19599161579697,44.05001386078994],[-124.19443452581906,44.05157848759103],[-124.1928061059578,44.053104899778354],[-124.19110815353724,44.0545914075589],[-124.18934254328025,44.056036365191325],[-124.187511225244,44.0574381728179],[-124.1856162226703,44.05879527824607],[-124.18365962975189,44.06010617867739],[-124.18164360931824,44.06136942238179],[-124.17957039044265,44.06258361031565],[-124.17744226597375,44.063747397681226],[-124.17526158999407,44.064859495426205],[-124.1730307752083,44.06591867168135],[-124.17075229026435,44.066923753134716],[-124.16842865701044,44.06787362634083],[-124.16606244769072,44.06876723896324],[-124.16365628208315,44.06960360094929],[-124.16121282458292,44.070381785635384],[-124.15873478123396,44.07110093078168],[-124.15622489671301,44.07176023953516],[-124.1536859512688,44.072358981319645],[-124.15112075762053,44.07289649265196],[-124.1485321578185,44.07337217788318],[-124.14592302007115,44.07378550986429],[-124.14329623554192,44.07413603053523],[-124.14065471511933,44.07442335143684],[-124.1380013861645,44.07464715414506],[-124.13533918923952,44.07480719062685],[-124.13267107482068,44.07490328351739],[-124.13,44.07493532631847]],[[-124.05799999999999,44.49193108004912],[-124.05530996363466,44.49189903913946],[-124.05262290881404,44.49180295192266],[-124.04994181374887,44.49164292489518],[-124.0472696499857,44.49141913541888],[-124.04460937908443,44.49113183152271],[-124.0419639493075,44.49078133162536],[-124.03933629232434,44.4903680241793],[-124.03672931993506,44.489892367236536],[-124.0341459208172,44.48935488793661],[-124.03158895729894,44.48875618191736],[-124.02906126216322,44.48809691264934],[-124.02656563548548,44.48737781069433],[-124.02410484150957,44.48659967288914],[-124.02168160556471,44.48576336145534],[-124.01929861102765,44.48486980303624],[-124.01695849633273,44.483919987661984],[-124.01466385203433,44.48291496764406],[-124.01241721792366,44.48185585640051],[-124.01022108020479,44.48074382721317],[-124.00807786873149,44.47958011191831],[-124.00598995430937,44.478365999532365],[-124.00395964606521,44.477102834814],[-124.00198918888765,44.47579201676453],[-124.00008076094082,44.47443499706821],[-123.99823647125464,44.473033278474155],[-123.99645835739406,44.47158841312181],[-123.99474838320981,44.47010200081191],[-123.99310843667328,44.46857568722488],[-123.99154032779785,44.46701116208851],[-123.99004578664868,44.46541015729748],[-123.98862646144372,44.46377444498621],[-123.98728391674717,44.462105835557836],[-123.98601963175808,44.46040617567115],[-123.98483499869548,44.45867734618794],[-123.98373132128158,44.45692126008299],[-123.98270981332526,44.455139860319306],[-123.98177159740666,44.4533351176905],[-123.9809177036644,44.45150902863332],[-123.98014906868706,44.44966361301238],[-123.979466534509,44.44780091187978],[-123.97887084771307,44.44592298521206],[-123.97836265863907,44.444031909626936],[-123.97794252070067,44.442129776082645],[-123.97761088980995,44.44021868756211],[-123.97736812391054,44.43830075674479],[-123.97721448262004,44.43637810366864],[-123.9771501269813,44.43445285338489],[-123.97717511932329,44.43252713360811],[-123.97728942323077,44.430603072364384],[-123.97749290362376,44.42868279563986],[-123.97778532694518,44.42676842503265],[-123.97816636145767,44.42486207541042],[-123.97863557764775,44.42296585257628],[-123.979192448738,44.421081850945626],[-123.97983635130528,44.419212151236415],[-123.98056656600532,44.41735881817543],[-123.98138227840172,44.415523898223014],[-123.98228257989912,44.413709417318806],[-123.98326646877868,44.41191737865096],[-123.984332851335,44.41014976045108],[-123.98548054311306,44.40840851381757],[-123.98670827024362,44.406695560569574],[-123.98801467087519,44.40501279113383],[-123.98939829670164,44.40336206246678],[-123.99085761458285,44.401745196014225],[-123.99239100825703,44.40016397571056],[-123.99399678014251,44.39862014602],[-123.99567315322692,44.39711541002163],[-123.99741827304211,44.39565142754058],[-123.99923020972159,44.39422981332714],[-124.00110696013923,44.39285213528592],[-124.00304645012609,44.39151991275687],[-124.00504653676359,44.39023461484994],[-124.00710501074938,44.38899765883538],[-124.00921959883482,44.387810408591136],[-124.01138796633002,44.38667417310912],[-124.01360771967458,44.385590205062066],[-124.01587640907073,44.38455969943215],[-124.01819153117634,44.3835837922033],[-124.02055053185481,44.38266355911817],[-124.02295080897846,44.381800014501316],[-124.0253897152834,44.3809941101498],[-124.02786456127146,44.380246734292335],[-124.03037261815746,44.37955871061814],[-124.03291112085745,44.37893079737646],[-124.03547727101575,44.378363686547786],[-124.03806824006688,44.37785800308761],[-124.04068117232934,44.37741430424342],[-124.04331318812812,44.37703307894597],[-124.04596138694265,44.37671474727492],[-124.04862285057618,44.37645966000008],[-124.0512946463445,44.376268098198175],[-124.05397383027922,44.37614027294579],[-124.05665745034362,44.37607632508887],[-124.05934254965638,44.37607632508887],[-124.06202616972077,44.37614027294579],[-124.06470535365548,44.376268098198175],[-124.0673771494238,44.37645966000008],[-124.07003861305735,44.37671474727492],[-124.07268681187188,44.37703307894597],[-124.07531882767066,44.37741430424342],[-124.07793175993311,44.37785800308761],[-124.08052272898425,44.378363686547786],[-124.08308887914255,44.37893079737646],[-124.08562738184254,44.37955871061814],[-124.08813543872853,44.380246734292335],[-124.0906102847166,44.3809941101498],[-124.09304919102154,44.381800014501316],[-124.09544946814519,44.38266355911817],[-124.09780846882366,44.3835837922033],[-124.10012359092927,44.38455969943215],[-124.10239228032542,44.385590205062066],[-124.10461203366997,44.38667417310912],[-124.10678040116517,44.387810408591136],[-124.10889498925062,44.38899765883538],[-124.11095346323641,44.39023461484994],[-124.1129535498739,44.39151991275687],[-124.11489303986077,44.39285213528592],[-124.11676979027841,44.39422981332714],[-124.11858172695788,44.39565142754058],[-124.12032684677307,44.39711541002163],[-124.12200321985749,44.39862014602],[-124.12360899174296,44.40016397571056],[-124.12514238541713,44.401745196014225],[-124.12660170329836,44.403362062466776],[-124.1279853291248,44.40501279113383],[-124.12929172975637,44.406695560569574],[-124.13051945688694,44.40840851381757],[-124.13166714866499,44.41014976045108],[-124.13273353122132,44.41191737865096],[-124.13371742010087,44.41370941731882],[-124.13461772159826,44.415523898223014],[-124.13543343399468,44.41735881817543],[-124.13616364869472,44.41921215123641],[-124.136807551262,44.421081850945626],[-124.13736442235223,44.42296585257628],[-124.13783363854232,44.42486207541042],[-124.1382146730548,44.42676842503265],[-124.13850709637624,44.42868279563985],[-124.13871057676921,44.430603072364384],[-124.13882488067671,44.43252713360811],[-124.13884987301869,44.43445285338489],[-124.13878551737996,44.43637810366864],[-124.13863187608946,44.43830075674479],[-124.13838911019005,44.44021868756211],[-124.13805747929932,44.442129776082645],[-124.13763734136093,44.444031909626936],[-124.13712915228693,44.44592298521206],[-124.13653346549098,44.44780091187978],[-124.13585093131294,44.44966361301238],[-124.1350822963356,44.45150902863332],[-124.13422840259332,44.4533351176905],[-124.13329018667474,44.45513986031931],[-124.1322686787184,44.45692126008299],[-124.13116500130452,44.45867734618794],[-124.12998036824192,44.46040617567115],[-124.12871608325283,44.462105835557836],[-124.12737353855628,44.46377444498621],[-124.12595421335132,44.46541015729748],[-124.12445967220215,44.46701116208852],[-124.12289156332672,44.46857568722488],[-124.12125161679019,44.47010200081191],[-124.11954164260594,44.47158841312181],[-124.11776352874536,44.473033278474155],[-124.11591923905918,44.47443499706821],[-124.11401081111235,44.47579201676452],[-124.11204035393479,44.477102834814],[-124.11001004569063,44.47836599953236],[-124.10792213126851,44.47958011191831],[-124.10577891979521,44.48074382721317],[-124.10358278207634,44.48185585640051],[-124.10133614796567,44.48291496764406],[-124.09904150366727,44.483919987661984],[-124.09670138897235,44.48486980303625],[-124.09431839443529,44.48576336145534],[-124.09189515849043,44.48659967288914],[-124.0894343645145,44.48737781069433],[-124.08693873783677,44.48809691264934],[-124.08441104270106,44.48875618191736],[-124.0818540791828,44.4893548879366],[-124.07927068006494,44.489892367236536],[-124.07666370767566,44.4903680241793],[-124.0740360506925,44.49078133162536],[-124.07139062091557,44.49113183152272],[-124.0687303500143,44.49141913541888],[-124.06605818625113,44.491642924895174],[-124.06337709118596,44.49180295192266],[-124.06069003636534,44.49189903913946],[-124.05799999999999,44.49193108004912]],[[-124.05500000000002,44.68492911433764],[-124.05230104730677,44.68489707430145],[-124.0496050861006,44.684800989704684],[-124.04691510452321,44.68464096704311],[-124.04423408402933,44.684417183677255],[-124.04156499605308,44.684129887634235],[-124.03891079868558,44.683779397330326],[-124.0362744333684,44.68336610121501],[-124.03365882160598,44.68289045733669],[-124.03106686170123,44.682352992830644],[-124.02850142551802,44.68175430332977],[-124.02596535527398,44.68109505229893],[-124.02346146036803,44.680375970293426],[-124.02099251424521,44.67959785414275],[-124.01856125130354,44.67876156606025],[-124.01617036384563,44.67786803268008],[-124.01382249907884,44.676918244022154],[-124.0115202561676,44.675913252386685],[-124.00926618334073,44.674854171179256],[-124.00706277505775,44.67374217366805],[-124.00491246923657,44.67257849167438],[-124.0028176445465,44.67136441419826],[-124.00078061776891,44.67010128598061],[-123.99880364122923,44.668790506003425],[-123.99688890030242,44.66743352593007],[-123.99503851099526,44.666031848487066],[-123.99325451760781,44.664587025789594],[-123.99153889047682,44.6631006576123],[-123.9898935238035,44.66157438960761],[-123.98832023356785,44.6600099114735],[-123.9868207555324,44.65840895507277],[-123.98539674333651,44.65677329250594],[-123.9840497666844,44.655104734140195],[-123.98278130962807,44.65340512659622],[-123.98159276894722,44.65167635069553],[-123.98048545262785,44.649920319370466],[-123.97946057844105,44.6481389755393],[-123.97851927262353,44.64633428994872],[-123.97766256866126,44.6445082589863],[-123.97689140617723,44.64266290246516],[-123.97620662992466,44.64080026138368],[-123.97560898888646,44.638922395662384],[-123.975099135482,44.63703138186079],[-123.9746776248816,44.63512931087665],[-123.97434491442975,44.63321828563027],[-123.97410136317708,44.63130041873632],[-123.97394723152172,44.62937783016591],[-123.9738826809603,44.62745264490131],[-123.9739077739485,44.625526990586266],[-123.97402247387124,44.623602995174025],[-123.97422664512258,44.62168278457618],[-123.97452005329446,44.61976848031455],[-123.97490236547455,44.61786219717883],[-123.97537315065257,44.6159660408927],[-123.975931880234,44.61408210579071],[-123.97657792866106,44.61221247250867],[-123.97731057413978,44.61035920569007],[-123.97812899947229,44.608524351710976],[-123.97903229299294,44.606709936425865],[-123.98001944960802,44.60491796293697],[-123.98108937193628,44.60315040938946],[-123.9822408715506,44.60140922679486],[-123.98347267031758,44.59969633688521],[-123.98478340183495,44.59801363000005],[-123.98617161296407,44.59636296300874],[-123.98763576545635,44.594746157270215],[-123.98917423767124,44.59316499663255],[-123.9907853263842,44.591621225474185],[-123.99246724868232,44.5901165467893],[-123.99421814394566,44.58865262031906],[-123.9960360759118,44.587231060731014],[-123.9979190348215,44.585853435848385],[-123.99986493964309,44.58452126493128],[-124.0018716403729,44.58323601701152],[-124.00393692040926,44.58199910928316],[-124.00605849899789,44.58081190555],[-124.00823403374508,44.57967571473209],[-124.01046112319702,44.57859178943268],[-124.01273730948135,44.57756132456713],[-124.01506008100917,44.57658545605522],[-124.01742687523358,44.57566525957843],[-124.01983508146256,44.574801749403136],[-124.02228204372268,44.57399587727148],[-124.02476506367077,44.57324853136051],[-124.02728140355039,44.57256053531133],[-124.02982828919005,44.571932647328545],[-124.0324029130398,44.57136555935178],[-124.03500243724291,44.570859896299396],[-124.03762399673994,44.57041621538567],[-124.04026470240099,44.57003500551206],[-124.04292164418376,44.56971668673306],[-124.04559189431329,44.56946160979734],[-124.04827251048063,44.56927005576466],[-124.05096053905679,44.569142235698855],[-124.05365301831827,44.56907829043737],[-124.05634698168176,44.56907829043737],[-124.05903946094324,44.569142235698855],[-124.0617274895194,44.56927005576466],[-124.06440810568675,44.56946160979734],[-124.06707835581628,44.56971668673306],[-124.06973529759904,44.57003500551206],[-124.07237600326009,44.57041621538567],[-124.07499756275712,44.570859896299396],[-124.07759708696024,44.57136555935179],[-124.08017171080998,44.571932647328545],[-124.08271859644965,44.57256053531133],[-124.08523493632927,44.57324853136051],[-124.08771795627734,44.57399587727148],[-124.09016491853748,44.574801749403136],[-124.09257312476646,44.57566525957843],[-124.09493991899087,44.57658545605522],[-124.09726269051868,44.57756132456713],[-124.09953887680302,44.57859178943268],[-124.10176596625496,44.57967571473209],[-124.10394150100214,44.58081190555],[-124.10606307959078,44.58199910928316],[-124.10812835962714,44.58323601701152],[-124.11013506035694,44.58452126493128],[-124.11208096517852,44.585853435848385],[-124.11396392408824,44.587231060731014],[-124.11578185605438,44.58865262031906],[-124.11753275131773,44.5901165467893],[-124.11921467361584,44.591621225474185],[-124.1208257623288,44.59316499663255],[-124.1223642345437,44.59474615727021],[-124.12382838703596,44.59636296300874],[-124.1252165981651,44.59801363000005],[-124.12652732968245,44.59969633688521],[-124.12775912844943,44.60140922679486],[-124.12891062806375,44.60315040938946],[-124.12998055039202,44.60491796293697],[-124.1309677070071,44.606709936425865],[-124.13187100052775,44.608524351710976],[-124.13268942586025,44.61035920569007],[-124.13342207133898,44.61221247250867],[-124.13406811976604,44.61408210579071],[-124.13462684934747,44.6159660408927],[-124.13509763452548,44.61786219717883],[-124.13547994670559,44.61976848031455],[-124.13577335487746,44.62168278457618],[-124.13597752612878,44.623602995174025],[-124.13609222605155,44.625526990586266],[-124.13611731903974,44.62745264490131],[-124.13605276847832,44.62937783016591],[-124.13589863682294,44.63130041873632],[-124.13565508557029,44.63321828563027],[-124.13532237511845,44.63512931087666],[-124.13490086451804,44.63703138186079],[-124.13439101111356,44.638922395662384],[-124.13379337007537,44.64080026138368],[-124.1331085938228,44.64266290246516],[-124.13233743133878,44.6445082589863],[-124.13148072737651,44.64633428994872],[-124.13053942155899,44.6481389755393],[-124.1295145473722,44.64992031937046],[-124.12840723105282,44.65167635069553],[-124.12721869037196,44.65340512659622],[-124.12595023331565,44.655104734140195],[-124.12460325666353,44.656773292505946],[-124.12317924446762,44.65840895507277],[-124.1216797664322,44.6600099114735],[-124.12010647619654,44.66157438960761],[-124.11846110952322,44.6631006576123],[-124.11674548239223,44.66458702578959],[-124.11496148900477,44.66603184848707],[-124.11311109969762,44.66743352593007],[-124.1111963587708,44.668790506003425],[-124.10921938223113,44.67010128598061],[-124.10718235545355,44.67136441419825],[-124.10508753076346,44.67257849167438],[-124.1029372249423,44.67374217366805],[-124.10073381665931,44.67485417117926],[-124.09847974383244,44.67591325238668],[-124.0961775009212,44.676918244022154],[-124.09382963615441,44.67786803268008],[-124.09143874869649,44.67876156606025],[-124.08900748575483,44.679597854142756],[-124.086538539632,44.68037597029343],[-124.08403464472606,44.68109505229893],[-124.08149857448203,44.681754303329775],[-124.07893313829881,44.682352992830644],[-124.07634117839406,44.68289045733669],[-124.07372556663164,44.68336610121501],[-124.07108920131445,44.683779397330326],[-124.06843500394696,44.684129887634235],[-124.0657659159707,44.68441718367726],[-124.06308489547682,44.68464096704311],[-124.06039491389943,44.68480098970469],[-124.05769895269327,44.68489707430145],[-124.05500000000002,44.68492911433764]],[[-124.05799999999999,44.86792725034871],[-124.05529250954835,44.86789521113947],[-124.05258802010418,44.8677991290233],[-124.04988952931869,44.86763911049523],[-124.04720002813437,44.867415332914625],[-124.04452249744031,44.86712804430686],[-124.04185990473933,44.86677756308599],[-124.03921520083034,44.866364277698736],[-124.03659131651023,44.86588864619015],[-124.03399115929882,44.86535119569153],[-124.03141761019079,44.864752521831214],[-124.02887352043828,44.86409328806874],[-124.02636170836767,44.863374224953404],[-124.02388495623492,44.862596129307846],[-124.02144600712168,44.86175986333781],[-124.01904756187767,44.86086635366882],[-124.01669227611082,44.85991659031129],[-124.01438275723012,44.85891162555487],[-124.01212156154384,44.85785257279353],[-124.00991119141644,44.85674060528258],[-124.00775409248764,44.855576954829345],[-124.00565265095658,44.85436291041848],[-124.00360919093424,44.853099816774204],[-124.00162597186704,44.8517890728604],[-123.99970518603463,44.85043213032072],[-123.99784895612434,44.84903049186053],[-123.99605933288534,44.847585709572115],[-123.99433829286494,44.84609938320555],[-123.99268773622954,44.84457315838693],[-123.99110948467252,44.84300872478608],[-123.9896052794115,44.841407814235744],[-123.9881767792771,44.83977219880448],[-123.98682555889515,44.83810368882551],[-123.98555310696439,44.83640413088354],[-123.98436082463148,44.83467540576203],[-123.98325002396484,44.83291942635321],[-123.98222192652948,44.83113813553309],[-123.98127766206325,44.82933350400399],[-123.98041826725712,44.827507528106906],[-123.97964468463942,44.82566222760629],[-123.97895776156653,44.82379964344964],[-123.9783582493194,44.82192183550447],[-123.97784680230833,44.82003088027515],[-123.97742397738561,44.8181288686022],[-123.97709023326706,44.81621790334654],[-123.976845930063,44.8143000970615],[-123.97669132891876,44.81237756965475],[-123.97662659176517,44.81045244604331],[-123.9766517811791,44.80852685380364],[-123.97676686035392,44.80660292082003],[-123.97697169317973,44.804682772933326],[-123.97726604443335,44.80276853159291],[-123.97764958007731,44.80086231151459],[-123.97812186766771,44.79896621834663],[-123.97868237686995,44.79708234634683],[-123.97933048008206,44.795212776073086],[-123.98006545316419,44.79335957208981],[-123.98088647627385,44.79152478069307],[-123.98179263480564,44.78971042765646],[-123.98278292043383,44.78791851600066],[-123.98385623225744,44.78615102378872],[-123.98501137804558,44.7844099019497],[-123.98624707558176,44.78269707213287],[-123.98756195410591,44.78101442459497],[-123.98895455585212,44.7793638161226],[-123.99042333768001,44.777747067992244],[-123.99196667279867,44.776165963969895],[-123.99358285258019,44.774622248352514],[-123.99527008846161,44.77311762405361],[-123.99702651393244,44.77165375073457],[-123.99885018660582,44.77023224298432],[-124.00073909037113,44.76885466854872],[-124.00269113762525,44.767522546611964],[-124.00470417158036,44.76623734613169],[-124.00677596864553,44.765000484229446],[-124.0089042408795,44.76381332463859],[-124.01108663851204,44.762677176210865],[-124.01332075253106,44.76159329148349],[-124.01560411733271,44.76056286530826],[-124.01793421343152,44.75958703354403],[-124.02030847022758,44.75866687181406],[-124.02272426882827,44.75780339432948],[-124.02517894492067,44.756997552780135],[-124.02766979169226,44.75625023529404],[-124.03019406279664,44.75556226546646],[-124.03274897536073,44.754934401459614],[-124.03533171303087,44.75436733517426],[-124.03793942905396,44.753861691493434],[-124.04056924939096,44.75341802759985],[-124.04321827585876,44.75303683236715],[-124.0458835892979,44.75271852582581],[-124.04856225276215,44.75246345870445],[-124.05125131472685,44.752271912046716],[-124.05394781231263,44.75214409690429],[-124.0566487745211,44.752080154106515],[-124.0593512254789,44.752080154106515],[-124.06205218768737,44.75214409690429],[-124.06474868527314,44.752271912046716],[-124.06743774723785,44.75246345870445],[-124.0701164107021,44.75271852582581],[-124.07278172414124,44.75303683236715],[-124.07543075060903,44.75341802759985],[-124.07806057094604,44.753861691493434],[-124.08066828696911,44.754367335174265],[-124.08325102463927,44.754934401459614],[-124.08580593720336,44.75556226546646],[-124.08833020830774,44.75625023529404],[-124.09082105507933,44.756997552780135],[-124.09327573117173,44.75780339432948],[-124.09569152977242,44.75866687181406],[-124.09806578656847,44.75958703354403],[-124.10039588266729,44.76056286530826],[-124.10267924746893,44.76159329148349],[-124.10491336148796,44.762677176210865],[-124.1070957591205,44.76381332463859],[-124.10922403135447,44.765000484229446],[-124.11129582841963,44.76623734613169],[-124.11330886237475,44.767522546611964],[-124.11526090962887,44.76885466854872],[-124.11714981339418,44.77023224298432],[-124.11897348606756,44.77165375073457],[-124.12072991153839,44.77311762405361],[-124.12241714741981,44.774622248352514],[-124.12403332720133,44.776165963969895],[-124.12557666231999,44.777747067992244],[-124.12704544414788,44.7793638161226],[-124.12843804589407,44.78101442459496],[-124.12975292441824,44.78269707213287],[-124.13098862195442,44.7844099019497],[-124.13214376774256,44.78615102378872],[-124.13321707956617,44.78791851600066],[-124.13420736519436,44.78971042765646],[-124.13511352372615,44.79152478069307],[-124.13593454683581,44.79335957208982],[-124.13666951991794,44.79521277607308],[-124.13731762313004,44.79708234634683],[-124.13787813233229,44.79896621834663],[-124.13835041992269,44.80086231151459],[-124.13873395556665,44.8027685315929],[-124.13902830682026,44.804682772933326],[-124.13923313964608,44.80660292082003],[-124.1393482188209,44.80852685380364],[-124.13937340823483,44.81045244604331],[-124.13930867108124,44.81237756965475],[-124.13915406993699,44.8143000970615],[-124.13890976673294,44.81621790334654],[-124.13857602261439,44.818128868602194],[-124.13815319769166,44.82003088027515],[-124.1376417506806,44.82192183550447],[-124.13704223843345,44.82379964344964],[-124.13635531536057,44.82566222760628],[-124.13558173274288,44.82750752810691],[-124.13472233793674,44.82933350400399],[-124.13377807347052,44.83113813553309],[-124.13274997603516,44.8329194263532],[-124.13163917536852,44.83467540576203],[-124.13044689303561,44.83640413088354],[-124.12917444110485,44.83810368882551],[-124.12782322072289,44.83977219880448],[-124.12639472058848,44.84140781423575],[-124.12489051532748,44.84300872478608],[-124.12331226377046,44.84457315838693],[-124.12166170713506,44.84609938320555],[-124.11994066711466,44.84758570957211],[-124.11815104387566,44.84903049186054],[-124.11629481396535,44.850432130320726],[-124.11437402813296,44.85178907286039],[-124.11239080906576,44.853099816774204],[-124.11034734904342,44.85436291041848],[-124.10824590751234,44.855576954829345],[-124.10608880858355,44.85674060528258],[-124.10387843845616,44.85785257279353],[-124.10161724276988,44.858911625554875],[-124.09930772388918,44.85991659031129],[-124.09695243812233,44.86086635366882],[-124.09455399287832,44.86175986333781],[-124.09211504376508,44.862596129307846],[-124.08963829163233,44.86337422495341],[-124.08712647956172,44.864093288068744],[-124.08458238980921,44.864752521831214],[-124.08200884070118,44.86535119569153],[-124.07940868348977,44.86588864619015],[-124.07678479916966,44.866364277698736],[-124.07414009526067,44.86677756308599],[-124.07147750255967,44.86712804430686],[-124.06879997186563,44.867415332914625],[-124.06611047068131,44.86763911049523],[-124.06341197989582,44.8677991290233],[-124.06070749045165,44.86789521113947],[-124.05799999999999,44.86792725034871]],[[-124.013,44.984926058588684],[-124.01028700798244,44.984894019907486],[-124.0075770231072,44.98479793937529],[-124.00487304915332,44.98463792348669],[-124.00217808317709,44.98441414960026],[-123.99949511216042,44.98412686574033],[-123.99682710967073,44.98377639031956],[-123.99417703253683,44.983363111782914],[-123.99154781754352,44.98288748817335],[-123.98894237814993,44.982350046619686],[-123.98636360123457,44.98175138274737],[-123.9838143438712,44.98109216001259],[-123.98129743013914,44.980373108960876],[-123.97881564797173,44.97959502641054],[-123.97637174604648,44.97875877456249],[-123.97396843072057,44.97786528003688],[-123.97160836301522,44.97691553283808],[-123.96929415565218,44.97591058524908],[-123.96702837014583,44.97485155065646],[-123.96481351395455,44.973739602307454],[-123.9626520376938,44.97257597200045],[-123.96054633241482,44.97136194871047],[-123.95849872695163,44.970098877151045],[-123.95651148533938,44.9687881562746],[-123.9545868043068,44.96743123771231],[-123.9527268108461,44.96602962415606],[-123.9509335598621,44.96458486768359],[-123.94920903190402,44.96309856802936],[-123.94755513098208,44.96157237080276],[-123.94597368247116,44.96000796565565],[-123.94446643110406,44.95840708440165],[-123.94303503905641,44.95677149908897],[-123.94168108412535,44.95510302002921],[-123.94040605800387,44.95340349378414],[-123.93921136465241,44.95167480111296],[-123.93809831877012,44.949918854882355],[-123.9370681443665,44.94813759794135],[-123.93612197343543,44.946333000963946],[-123.93526084473292,44.94450706026144],[-123.93448570265952,44.94266179556722],[-123.93379739624869,44.940799247796306],[-123.93319667826223,44.938921476782355],[-123.93268420439325,44.93703055899453],[-123.9322605325777,44.935128585236754],[-123.93192612241492,44.933217658332055],[-123.93168133469797,44.93129989079452],[-123.93152643105351,44.929377402491326],[-123.93146157369205,44.9274523182977],[-123.9314868252685,44.9255267657472],[-123.93160214885255,44.92360287267994],[-123.93180740800955,44.92168276489152],[-123.93210236699086,44.91976856378506],[-123.93248669103396,44.91786238402905],[-123.93295994677098,44.91596633122352],[-123.93352160274598,44.91408249957721],[-123.93417103003958,44.912212969598116],[-123.93490750300026,44.9103598058001],[-123.93573020008132,44.908525054427955],[-123.93663820478278,44.90671074120357],[-123.93763050669638,44.90491886909542],[-123.9387060026529,44.90315141611397],[-123.93986349797034,44.9014103331355],[-123.94110170780107,44.8996975417563],[-123.94241925857698,44.89801493218007],[-123.94381468955018,44.896364361140456],[-123.94528645442827,44.89474764986112],[-123.94683292310138,44.8931665820555],[-123.94845238345987,44.89162290196842],[-123.9501430432999,44.89011831246164],[-123.95190303231519,44.88865447314553],[-123.95373040417252,44.88723299855861],[-123.95562313866846,44.885855456397216],[-123.95757914396549,44.88452336579693],[-123.95959625890426,44.8832381956678],[-123.96167225538996,44.882001363085],[-123.96380484085041,44.880814231736764],[-123.96599166076207,44.87967811043104],[-123.96823030124254,44.87859425166274],[-123.97051829170596,44.877563850242964],[-123.97285310757853,44.87658804199151],[-123.97523217307136,44.87566790249435],[-123.97765286400748,44.874804445927204],[-123.98011251070032,44.873998623946434],[-123.98260840088,44.873251324648606],[-123.98513778266495,44.87256337159963],[-123.98769786757516,44.871935522934585],[-123.99028583358412,44.87136847052928],[-123.99289882820624,44.870862839244175],[-123.99553397161627,44.87041918624171],[-123.99818835979755,44.87003800037769],[-124.00085906771591,44.86971970166726],[-124.00354315251539,44.869464640826145],[-124.00623765673309,44.86927309888767],[-124.00893961152904,44.86914528689574],[-124.01164603992832,44.86908134567452],[-124.01435396007169,44.86908134567452],[-124.01706038847097,44.86914528689574],[-124.0197623432669,44.86927309888767],[-124.0224568474846,44.869464640826145],[-124.0251409322841,44.86971970166726],[-124.02781164020244,44.87003800037769],[-124.03046602838373,44.87041918624171],[-124.03310117179376,44.870862839244175],[-124.03571416641587,44.87136847052928],[-124.03830213242483,44.871935522934585],[-124.04086221733506,44.87256337159963],[-124.04339159912001,44.873251324648606],[-124.04588748929967,44.873998623946434],[-124.04834713599253,44.874804445927204],[-124.05076782692865,44.87566790249435],[-124.05314689242147,44.87658804199151],[-124.05548170829404,44.877563850242964],[-124.05776969875745,44.87859425166274],[-124.06000833923794,44.87967811043104],[-124.06219515914958,44.880814231736764],[-124.06432774461004,44.882001363085],[-124.06640374109574,44.8832381956678],[-124.06842085603452,44.88452336579693],[-124.07037686133154,44.885855456397216],[-124.07226959582749,44.88723299855861],[-124.07409696768481,44.88865447314553],[-124.07585695670011,44.89011831246164],[-124.07754761654013,44.89162290196842],[-124.07916707689861,44.8931665820555],[-124.08071354557173,44.89474764986112],[-124.08218531044983,44.896364361140456],[-124.08358074142302,44.89801493218007],[-124.08489829219893,44.8996975417563],[-124.08613650202967,44.9014103331355],[-124.08729399734709,44.90315141611397],[-124.08836949330363,44.90491886909541],[-124.08936179521723,44.90671074120357],[-124.09026979991867,44.908525054427955],[-124.09109249699975,44.9103598058001],[-124.09182896996042,44.912212969598116],[-124.09247839725403,44.91408249957721],[-124.09304005322903,44.91596633122352],[-124.09351330896604,44.91786238402905],[-124.09389763300914,44.91976856378506],[-124.09419259199046,44.92168276489152],[-124.09439785114745,44.92360287267994],[-124.0945131747315,44.9255267657472],[-124.09453842630796,44.9274523182977],[-124.0944735689465,44.929377402491326],[-124.09431866530203,44.93129989079452],[-124.09407387758507,44.93321765833206],[-124.0937394674223,44.93512858523675],[-124.09331579560674,44.93703055899453],[-124.09280332173776,44.938921476782355],[-124.0922026037513,44.940799247796306],[-124.09151429734048,44.94266179556722],[-124.09073915526709,44.94450706026144],[-124.08987802656458,44.946333000963946],[-124.08893185563349,44.94813759794135],[-124.0879016812299,44.949918854882355],[-124.08678863534759,44.95167480111296],[-124.08559394199612,44.95340349378414],[-124.08431891587466,44.95510302002921],[-124.08296496094358,44.95677149908897],[-124.08153356889594,44.95840708440165],[-124.08002631752883,44.96000796565564],[-124.07844486901791,44.96157237080276],[-124.07679096809598,44.96309856802936],[-124.0750664401379,44.96458486768359],[-124.07327318915391,44.966029624156064],[-124.0714131956932,44.96743123771231],[-124.06948851466062,44.96878815627459],[-124.06750127304836,44.970098877151045],[-124.06545366758517,44.97136194871045],[-124.06334796230621,44.97257597200045],[-124.06118648604544,44.97373960230746],[-124.05897162985417,44.974851550656474],[-124.05670584434782,44.97591058524908],[-124.05439163698478,44.97691553283808],[-124.05203156927942,44.97786528003688],[-124.04962825395353,44.97875877456249],[-124.04718435202827,44.97959502641054],[-124.04470256986086,44.98037310896087],[-124.0421856561288,44.981092160012594],[-124.03963639876544,44.98175138274737],[-124.03705762185008,44.982350046619686],[-124.03445218245648,44.98288748817335],[-124.03182296746319,44.983363111782914],[-124.02917289032926,44.98377639031956],[-124.0265048878396,44.98412686574033],[-124.02382191682291,44.98441414960026],[-124.02112695084669,44.98463792348668],[-124.01842297689281,44.9847979393753],[-124.01571299201755,44.984894019907486],[-124.013,44.984926058588684]],[[-124.023,46.5599100237681],[-124.02020954845636,46.559877992136975],[-124.0174221904391,46.55978193275329],[-124.01464101601233,46.55962195210627],[-124.01186910831967,46.55939822754555],[-124.00910954013389,46.55911100708273],[-124.00636537041902,46.558760609113826],[-124.00363964090788,46.55834742206301],[-124.00093537270013,46.557871903948026],[-123.99825556288405,46.55733458186775],[-123.99560318118614,46.55673605141261],[-123.99298116665251,46.55607697599834],[-123.99039242436578,46.555358086124045],[-123.98783982220135,46.55458017855531],[-123.98532618762678,46.55374411543342],[-123.98285430454777,46.55285082331149],[-123.9804269102047,46.551901292118934],[-123.97804669212296,46.55089657405524],[-123.97571628512063,46.54983778241434],[-123.9734382683772,46.548726090341134],[-123.97121516256603,46.54756272952124],[-123.96904942705456,46.54634898880592],[-123.96694345717484,46.5450862127734],[-123.96489958156761,46.543775800228396],[-123.96292005960323,46.542419202641575],[-123.96100707888164,46.54101792253071],[-123.95916275281482,46.53957351178537],[-123.95738911829417,46.538087569937076],[-123.95568813344511,46.536561742376975],[-123.95406167547178,46.53499771852288],[-123.95251153859391,46.533397229938],[-123.95103943207819,46.53176204840329],[-123.94964697836615,46.530093983945804],[-123.94833571130086,46.52839488282514],[-123.94710707445371,46.526666625480296],[-123.94596241955375,46.52491112443934],[-123.94490300502062,46.523130322194184],[-123.9439299946029,46.52132618904288],[-123.94304445612318,46.519500720901846],[-123.942247360331,46.51765593709057],[-123.9415395798651,46.51579387809114],[-123.94092188832524,46.51391660328531],[-123.9403949594556,46.512026188671456],[-123.93995936643918,46.51012472456401],[-123.93961558130508,46.508214313278074],[-123.93936397444789,46.50629706680167],[-123.93920481426086,46.50437510445819],[-123.93913826688171,46.502450550561846],[-123.93916439605239,46.500525532068366],[-123.93928316309169,46.49860217622395],[-123.93949442698157,46.496682608214854],[-123.93979794456598,46.4947689488201],[-123.94019337086245,46.492863312070256],[-123.94068025948545,46.49096780291437],[-123.94125806318128,46.48908451489815],[-123.94192613447332,46.48721552785553],[-123.94268372641709,46.485362905616334],[-123.94352999346374,46.48352869373247],[-123.94446399243127,46.48171491722526],[-123.94548468358197,46.479923578356235],[-123.94659093180476,46.478156654423785],[-123.94778150790107,46.47641609558823],[-123.94905508997266,46.47470382272756],[-123.95041026490959,46.47302172532614],[-123.95184552997699,46.471371659398656],[-123.95335929449807,46.469755445451746],[-123.9549498816321,46.468174866485185],[-123.9566155302451,46.46663166603506],[-123.95835439687066,46.46512754626082],[-123.96016455775938,46.46366416607843],[-123.9620440110141,46.46224313934158],[-123.96399067880861,46.460866033072776],[-123.96600240968775,46.45953436574636],[-123.96807698094543,46.45824960562523],[-123.97021210107923,46.45701316915302],[-123.97240541231766,46.455826419403486],[-123.97465449321795,46.454690664588654],[-123.97695686133173,46.453607156627506],[-123.9793099759348,46.45257708977648],[-123.98171124081918,46.451601599323524],[-123.98415800714345,46.450681760346676],[-123.98664757633907,46.449818586538996],[-123.98917720306888,46.44901302910064],[-123.99174409823524,46.44826597569954],[-123.99434543203401,46.447578249501646],[-123.99697833705179,46.44695060827169],[-123.99963991140244,46.446383743545766],[-124.0023272218999,46.44587827987603],[-124.00503730726429,46.445434774148886],[-124.00776718135695,46.445053714977035],[-124.01051383644197,46.444735522166084],[-124.01327424647062,46.44448054625631],[-124.01604537038425,46.44428906814008],[-124.01882415543386,46.44416129875536],[-124.02160754051114,46.444097378855474],[-124.02439245948887,46.444097378855474],[-124.02717584456614,46.44416129875536],[-124.02995462961574,46.44428906814008],[-124.03272575352939,46.44448054625631],[-124.03548616355802,46.444735522166084],[-124.03823281864305,46.445053714977035],[-124.0409626927357,46.445434774148886],[-124.04367277810009,46.44587827987603],[-124.04636008859755,46.446383743545766],[-124.04902166294822,46.44695060827169],[-124.051654567966,46.447578249501646],[-124.05425590176476,46.44826597569954],[-124.05682279693113,46.44901302910064],[-124.05935242366093,46.449818586538996],[-124.06184199285654,46.450681760346676],[-124.06428875918083,46.451601599323524],[-124.06669002406521,46.45257708977648],[-124.06904313866826,46.453607156627506],[-124.07134550678204,46.454690664588654],[-124.07359458768234,46.455826419403486],[-124.07578789892078,46.45701316915302],[-124.07792301905458,46.45824960562523],[-124.07999759031225,46.45953436574636],[-124.08200932119139,46.460866033072776],[-124.0839559889859,46.46224313934158],[-124.08583544224062,46.46366416607843],[-124.08764560312935,46.46512754626082],[-124.08938446975489,46.46663166603506],[-124.0910501183679,46.468174866485185],[-124.09264070550194,46.46975544545174],[-124.09415447002301,46.471371659398656],[-124.09558973509041,46.473021725326134],[-124.09694491002735,46.47470382272756],[-124.09821849209892,46.47641609558823],[-124.09940906819523,46.478156654423785],[-124.10051531641804,46.479923578356235],[-124.10153600756874,46.48171491722526],[-124.10247000653625,46.48352869373247],[-124.10331627358292,46.485362905616334],[-124.10407386552667,46.48721552785553],[-124.10474193681873,46.48908451489815],[-124.10531974051456,46.49096780291437],[-124.10580662913756,46.492863312070256],[-124.10620205543403,46.4947689488201],[-124.10650557301844,46.496682608214854],[-124.10671683690832,46.49860217622395],[-124.10683560394762,46.500525532068366],[-124.10686173311828,46.502450550561846],[-124.10679518573914,46.50437510445819],[-124.10663602555212,46.50629706680167],[-124.10638441869493,46.508214313278074],[-124.10604063356082,46.51012472456401],[-124.1056050405444,46.51202618867145],[-124.10507811167476,46.51391660328531],[-124.1044604201349,46.51579387809114],[-124.103752639669,46.51765593709057],[-124.10295554387683,46.51950072090185],[-124.10207000539711,46.52132618904288],[-124.10109699497939,46.523130322194184],[-124.10003758044625,46.524911124439335],[-124.09889292554628,46.526666625480296],[-124.09766428869914,46.52839488282514],[-124.09635302163385,46.530093983945804],[-124.09496056792182,46.53176204840329],[-124.09348846140608,46.533397229938],[-124.09193832452823,46.53499771852288],[-124.0903118665549,46.536561742376975],[-124.08861088170583,46.538087569937076],[-124.08683724718519,46.53957351178537],[-124.08499292111837,46.54101792253071],[-124.08307994039677,46.542419202641575],[-124.08110041843238,46.543775800228396],[-124.07905654282517,46.54508621277339],[-124.07695057294545,46.54634898880592],[-124.07478483743397,46.54756272952124],[-124.07256173162281,46.548726090341134],[-124.07028371487938,46.54983778241434],[-124.06795330787705,46.55089657405524],[-124.0655730897953,46.55190129211894],[-124.06314569545223,46.55285082331149],[-124.06067381237321,46.55374411543342],[-124.05816017779865,46.55458017855531],[-124.05560757563421,46.555358086124045],[-124.05301883334748,46.55607697599834],[-124.05039681881387,46.55673605141261],[-124.04774443711595,46.55733458186775],[-124.04506462729988,46.557871903948026],[-124.04236035909211,46.55834742206301],[-124.03963462958097,46.558760609113826],[-124.03689045986611,46.55911100708273],[-124.03413089168032,46.55939822754555],[-124.03135898398766,46.55962195210627],[-124.0285778095609,46.55978193275329],[-124.02579045154364,46.559877992136975],[-124.023,46.5599100237681]],[[-123.967,45.224923613976735],[-123.96427561654173,45.22489157637699],[-123.96155425292876,45.22479549908893],[-123.95883892562851,45.22463548860619],[-123.95613264435664,45.22441172228588],[-123.95343840871075,45.224124448150164],[-123.95075920481614,45.22377398460888],[-123.94809800198693,45.22336072010356],[-123.94545774940674,45.22288511267288],[-123.94284137283265,45.2223476894407],[-123.94025177132626,45.22174904602663],[-123.93769181401572,45.221089845880215],[-123.93516433689233,45.22037081953927],[-123.93267213964532,45.21959276381349],[-123.93021798253872,45.218756540894034],[-123.92780458333382,45.21786307739012],[-123.92543461426035,45.21691336329398],[-123.92311069904056,45.21590845087511],[-123.92083540996886,45.21484945350517],[-123.91861126505087,45.21373754441496],[-123.91644072520486,45.212573955384855],[-123.91432619152879,45.211359975370144],[-123.91227000263606,45.21009694906289],[-123.910274432063,45.208786275392065],[-123.90834168575076,45.20742940596354],[-123.90647389960493,45.20602784344173],[-123.90467313713492,45.204583139874835],[-123.90294138717613,45.2030968949655],[-123.9012805616976,45.20157075428893],[-123.8996924936969,45.200006407460485],[-123.89817893518516,45.19840558625476],[-123.89674155526397,45.19677006267841],[-123.89538193829686,45.19510164699886],[-123.89410158217622,45.193402185731024],[-123.89290189668874,45.19167355958459],[-123.89178420198019,45.189917681373906],[-123.89074972712147,45.188136493892884],[-123.88979960877751,45.18633196775761],[-123.8889348899799,45.1845060992186],[-123.88815651900535,45.1826609079456],[-123.88746534835992,45.18079843478715],[-123.88686213387106,45.1789207395076],[-123.88634753388772,45.17702989850394],[-123.88592210858934,45.175128002505154],[-123.88558631940454,45.17321715425658],[-123.88534052853959,45.17129946619187],[-123.88518499861752,45.169377058095144],[-123.88511989242775,45.167452054756026],[-123.88514527278619,45.16552658361992],[-123.88526110250636,45.16360277243644],[-123.88546724448071,45.161682746908355],[-123.88576346187259,45.159768628343784],[-123.88614941841749,45.15786253131415],[-123.8866246788344,45.1559665613205],[-123.88718870934517,45.154082812470804],[-123.88784087830248,45.15221336517063],[-123.88858045692427,45.15036028383],[-123.8894066201351,45.148525614588536],[-123.89031844751194,45.14671138306183],[-123.89131492433408,45.14491959211113],[-123.89239494273562,45.14315221963897],[-123.8935573029591,45.141411216413104],[-123.89480071470885,45.13969850392102],[-123.89612379860213,45.13801597225745],[-123.89752508771686,45.136365478047175],[-123.89900302923365,45.134748842405365],[-123.90055598617063,45.13316784893744],[-123.90218223920871,45.13162424178096],[-123.90387998860537,45.13011972369154],[-123.90564735619492,45.128655954174484],[-123.90748238747263,45.12723454766479],[-123.90938305376088,45.125857071756954],[-123.91134725445428,45.124525045486614],[-123.913372819342,45.12323993766605],[-123.91545751100398,45.122003165275046],[-123.91759902727902,45.12081609190898],[-123.91979500380181,45.11968002628581],[-123.92204301660571,45.11859622081352],[-123.92434058478942,45.11756587021943],[-123.92668517324358,45.116590110243045],[-123.92907419543506,45.115670016393715],[-123.93150501624574,45.11480660277424],[-123.93397495486255,45.114000820972194],[-123.93648128771609,45.113253559019455],[-123.93902125146398,45.11256564042156],[-123.94159204601686,45.11193782325773],[-123.94419083760253,45.11137079935251],[-123.94681476186607,45.11086519351987],[-123.9494609270018,45.110421562880596],[-123.9521264169146,45.11004039625383],[-123.95480829440648,45.109722113623114],[-123.95750360438537,45.10946706567771],[-123.96020937709307,45.109275533429674],[-123.96292263134812,45.10914772790695],[-123.96564037780124,45.109083789923005],[-123.96835962219876,45.109083789923005],[-123.97107736865186,45.10914772790695],[-123.97379062290692,45.109275533429674],[-123.97649639561463,45.10946706567771],[-123.97919170559352,45.109722113623114],[-123.98187358308539,45.11004039625383],[-123.98453907299819,45.110421562880596],[-123.98718523813392,45.11086519351987],[-123.98980916239745,45.111370799352514],[-123.99240795398313,45.11193782325773],[-123.994978748536,45.11256564042156],[-123.9975187122839,45.113253559019455],[-124.00002504513743,45.114000820972194],[-124.00249498375425,45.11480660277424],[-124.00492580456492,45.115670016393715],[-124.0073148267564,45.116590110243045],[-124.00965941521056,45.11756587021943],[-124.01195698339427,45.11859622081352],[-124.01420499619817,45.1196800262858],[-124.01640097272096,45.12081609190898],[-124.01854248899602,45.122003165275046],[-124.02062718065798,45.12323993766605],[-124.0226527455457,45.124525045486614],[-124.02461694623912,45.125857071756954],[-124.02651761252737,45.12723454766479],[-124.02835264380508,45.128655954174484],[-124.03012001139462,45.13011972369154],[-124.03181776079128,45.13162424178096],[-124.03344401382935,45.13316784893744],[-124.03499697076633,45.134748842405365],[-124.03647491228313,45.136365478047175],[-124.03787620139785,45.13801597225744],[-124.03919928529113,45.13969850392102],[-124.04044269704089,45.141411216413104],[-124.04160505726436,45.14315221963897],[-124.0426850756659,45.14491959211113],[-124.04368155248804,45.146711383061835],[-124.04459337986488,45.14852561458853],[-124.04541954307571,45.15036028383],[-124.04615912169751,45.15221336517063],[-124.04681129065482,45.154082812470804],[-124.04737532116559,45.1559665613205],[-124.04785058158251,45.157862531314166],[-124.0482365381274,45.15976862834378],[-124.04853275551928,45.161682746908355],[-124.04873889749362,45.16360277243644],[-124.0488547272138,45.16552658361992],[-124.04888010757223,45.167452054756026],[-124.04881500138247,45.169377058095144],[-124.0486594714604,45.17129946619187],[-124.04841368059544,45.17321715425658],[-124.04807789141064,45.175128002505154],[-124.04765246611227,45.17702989850393],[-124.04713786612892,45.1789207395076],[-124.04653465164006,45.18079843478715],[-124.04584348099465,45.1826609079456],[-124.04506511002009,45.1845060992186],[-124.04420039122249,45.18633196775762],[-124.04325027287851,45.188136493892884],[-124.0422157980198,45.189917681373906],[-124.04109810331124,45.19167355958459],[-124.03989841782376,45.193402185731024],[-124.03861806170312,45.19510164699886],[-124.03725844473601,45.19677006267842],[-124.03582106481483,45.19840558625476],[-124.0343075063031,45.20000640746049],[-124.03271943830238,45.20157075428893],[-124.03105861282386,45.2030968949655],[-124.02932686286508,45.204583139874835],[-124.02752610039505,45.20602784344173],[-124.02565831424924,45.20742940596354],[-124.02372556793698,45.20878627539206],[-124.02172999736392,45.21009694906288],[-124.0196738084712,45.211359975370144],[-124.01755927479513,45.212573955384855],[-124.01538873494911,45.21373754441496],[-124.01316459003112,45.21484945350517],[-124.01088930095942,45.21590845087511],[-124.00856538573963,45.21691336329399],[-124.00619541666616,45.21786307739013],[-124.00378201746126,45.218756540894034],[-124.00132786035468,45.21959276381349],[-123.99883566310766,45.22037081953927],[-123.99630818598426,45.221089845880215],[-123.99374822867372,45.22174904602664],[-123.99115862716734,45.2223476894407],[-123.98854225059324,45.22288511267288],[-123.98590199801305,45.22336072010356],[-123.98324079518385,45.22377398460889],[-123.98056159128924,45.224124448150164],[-123.97786735564335,45.22441172228588],[-123.97516107437147,45.22463548860619],[-123.97244574707122,45.22479549908893],[-123.96972438345826,45.22489157637699],[-123.967,45.224923613976735]],[[-123.945,45.487920935296096],[-123.94226296729063,45.487888898878744],[-123.93952896853256,45.48779282513752],[-123.93680103428294,45.487632820565125],[-123.93408218831495,45.487409062517045],[-123.9313754442354,45.487121799013195],[-123.92868380211425,45.48677134846045],[-123.92601024512996,45.486358099296616],[-123.92335773623428,45.485882509555935],[-123.92072921484049,45.48534510635695],[-123.91812759353888,45.48474648531311],[-123.91555575484327,45.484087309866794],[-123.91301654797236,45.483368310547675],[-123.9105127856697,45.48259028415625],[-123.90804724106538,45.481754092873196],[-123.9056226445841,45.4808606632961],[-123.9032416809021,45.47991098540412],[-123.90090698595678,45.47890611145229],[-123.89862114401296,45.47784715479624],[-123.8963866847883,45.47673528864909],[-123.89420608064148,45.47557174477182],[-123.89208174382657,45.47435781209841],[-123.89001602381612,45.47309483529776],[-123.88801120469674,45.47178421327352],[-123.88606950263917,45.47042739760414],[-123.88419306344646,45.46902589092433],[-123.88238396018252,45.46758124525023],[-123.88064419088384,45.46609506024997],[-123.87897567635683,45.46456898146171],[-123.87738025806321,45.4630046984611],[-123.87585969609586,45.46140394298031],[-123.8744156672469,45.459768486980806],[-123.87304976317077,45.45810014068188],[-123.87176348864371,45.45640075054747],[-123.87055825992147,45.45467219723327],[-123.86943540319758,45.45291639349653],[-123.86839615316279,45.45113528207109],[-123.86744165166839,45.44933083350978],[-123.86657294649333,45.44750504399675],[-123.86579099021796,45.445659933132234],[-123.86509663920388,45.44379754169212],[-123.86449065268229,45.44191992936496],[-123.86397369195078,45.44002917246883],[-123.86354631967949,45.43812736165073],[-123.86320899932771,45.436216599570955],[-123.86296209467056,45.434298998575116],[-123.8628058694371,45.43237667835642],[-123.86274048705874,45.43045176361066],[-123.86276601052992,45.42852638168672],[-123.8628824023791,45.426602660235005],[-123.8630895247512,45.42468272485653],[-123.86338713960066,45.422768696755284],[-123.86377490899501,45.42086269039624],[-123.86425239552815,45.41896681117189],[-123.86481906284303,45.41708315307963],[-123.86547427626255,45.41521379641272],[-123.8662173035283,45.413360805467136],[-123.86704731564593,45.411526226267135],[-123.86796338783579,45.40971208431163],[-123.86896450058828,45.407920382344145],[-123.87004954082187,45.40615309814869],[-123.87121730314313,45.40441218237387],[-123.87246649120625,45.40269955638763],[-123.87379571917178,45.40101711016508],[-123.8752035132614,45.399366700211395],[-123.876688313408,45.397750147522515],[-123.87824847499877,45.39616923558519],[-123.87988227070899,45.394625708419206],[-123.88158789242502,45.393121268663386],[-123.88336345325385,45.39165757570766],[-123.8852069896171,45.39023624387325],[-123.88711646342718,45.388858840642655],[-123.88908976434296,45.38752688494169],[-123.8911247121026,45.386241845475155],[-123.89321905893134,45.385005139117915],[-123.89537049202048,45.383818129363306],[-123.89757663607627,45.382682124830374],[-123.89983505593477,45.381598377831416],[-123.90214325924038,45.38056808300171],[-123.90449869918525,45.37959237599244],[-123.90689877730611,45.37867233222863],[-123.90934084633582,45.37780896573303],[-123.91182221310679,45.37700322801743],[-123.91434014150266,45.37625600704258],[-123.9168918554555,45.37556812624765],[-123.91947454198508,45.37494034365041],[-123.92208535427707,45.37437335101902],[-123.92472141479715,45.37386777311628],[-123.92737981843699,45.3734241670172],[-123.93005763568988,45.37304302150059],[-123.9327519158514,45.3727247565152],[-123.935459690243,45.37246972272117],[-123.93817797545405,45.372278201107214],[-123.94090377659963,45.372150402683666],[-123.94363409059012,45.37208646825224],[-123.94636590940988,45.37208646825224],[-123.94909622340036,45.372150402683666],[-123.95182202454595,45.372278201107214],[-123.95454030975701,45.37246972272117],[-123.9572480841486,45.3727247565152],[-123.95994236431012,45.37304302150059],[-123.96262018156301,45.3734241670172],[-123.96527858520285,45.37386777311628],[-123.96791464572293,45.37437335101902],[-123.97052545801492,45.37494034365041],[-123.9731081445445,45.37556812624765],[-123.97565985849734,45.37625600704258],[-123.97817778689321,45.37700322801743],[-123.98065915366418,45.37780896573303],[-123.98310122269389,45.37867233222863],[-123.98550130081475,45.37959237599244],[-123.98785674075963,45.38056808300171],[-123.99016494406523,45.381598377831416],[-123.99242336392373,45.382682124830374],[-123.99462950797952,45.383818129363306],[-123.99678094106866,45.385005139117915],[-123.9988752878974,45.386241845475155],[-124.00091023565705,45.38752688494169],[-124.00288353657282,45.388858840642655],[-124.0047930103829,45.39023624387325],[-124.00663654674615,45.39165757570766],[-124.00841210757498,45.393121268663386],[-124.01011772929101,45.394625708419206],[-124.01175152500123,45.39616923558519],[-124.01331168659199,45.397750147522515],[-124.0147964867386,45.3993667002114],[-124.01620428082822,45.40101711016508],[-124.01753350879375,45.40269955638763],[-124.01878269685687,45.40441218237387],[-124.01995045917813,45.40615309814869],[-124.02103549941172,45.407920382344145],[-124.02203661216421,45.40971208431163],[-124.02295268435407,45.41152622626713],[-124.0237826964717,45.413360805467136],[-124.02452572373745,45.41521379641271],[-124.02518093715697,45.41708315307963],[-124.02574760447185,45.41896681117189],[-124.02622509100499,45.42086269039624],[-124.02661286039934,45.422768696755284],[-124.0269104752488,45.42468272485653],[-124.0271175976209,45.426602660235],[-124.02723398947008,45.42852638168672],[-124.02725951294126,45.43045176361066],[-124.0271941305629,45.43237667835642],[-124.02703790532942,45.4342989985751],[-124.02679100067229,45.436216599570955],[-124.02645368032051,45.438127361650736],[-124.02602630804923,45.44002917246883],[-124.02550934731771,45.44191992936496],[-124.02490336079612,45.44379754169212],[-124.02420900978204,45.44565993313222],[-124.02342705350667,45.44750504399675],[-124.02255834833161,45.44933083350978],[-124.02160384683721,45.45113528207109],[-124.02056459680242,45.45291639349653],[-124.01944174007853,45.45467219723327],[-124.01823651135629,45.45640075054747],[-124.01695023682923,45.45810014068188],[-124.01558433275311,45.459768486980806],[-124.01414030390414,45.46140394298031],[-124.01261974193679,45.4630046984611],[-124.01102432364317,45.46456898146171],[-124.00935580911616,45.46609506024997],[-124.00761603981748,45.46758124525023],[-124.00580693655354,45.469025890924335],[-124.00393049736083,45.47042739760414],[-124.00198879530326,45.47178421327352],[-123.99998397618388,45.47309483529776],[-123.99791825617343,45.47435781209841],[-123.99579391935852,45.47557174477182],[-123.9936133152117,45.476735288649095],[-123.99137885598704,45.47784715479622],[-123.98909301404322,45.47890611145229],[-123.9867583190979,45.47991098540413],[-123.98437735541589,45.4808606632961],[-123.98195275893463,45.481754092873196],[-123.9794872143303,45.48259028415625],[-123.97698345202764,45.483368310547675],[-123.97444424515673,45.484087309866794],[-123.97187240646112,45.48474648531311],[-123.96927078515951,45.48534510635695],[-123.96664226376572,45.485882509555935],[-123.96398975487004,45.486358099296616],[-123.96131619788575,45.48677134846045],[-123.9586245557646,45.487121799013195],[-123.95591781168505,45.48740906251706],[-123.95319896571706,45.487632820565125],[-123.95047103146744,45.487792825137525],[-123.94773703270937,45.487888898878744],[-123.945,45.487920935296096]],[[-123.965,45.62791950954564],[-123.96225616200846,45.62788747375646],[-123.95951536555732,45.62779140189961],[-123.95678064878432,45.627631400467315],[-123.95405504302563,45.627407646814206],[-123.95134156942513,45.62712038895903],[-123.9486432355552,45.62676994530717],[-123.94596303205344,45.62635670429445],[-123.94330392927903,45.62588112395285],[-123.94066887399235,45.625343731398175],[-123.93806078606222,45.624745122240604],[-123.93548255520409,45.62408595991887],[-123.93293703775315,45.623366974958394],[-123.93042705347615,45.62258896415482],[-123.92795538242537,45.621752789683455],[-123.9255247618384,45.62085937813575],[-123.92313788308772,45.61990971948408],[-123.92079738868259,45.618904865975864],[-123.91850586932796,45.61784593095837],[-123.91626586104253,45.61673408763547],[-123.91407984234003,45.615570567757906],[-123.91195023147637,45.61435666024852],[-123.9098793837665,45.61309370976397],[-123.90786958897296,45.61178311519465],[-123.90592306876992,45.61042632810453],[-123.90404197428529,45.60902485111268],[-123.90222838372324,45.6075802362183],[-123.9004843000703,45.60609408307133],[-123.89881164888736,45.604568037190354],[-123.89721227618975,45.60300378813003],[-123.89568794641814,45.60140306760012],[-123.8942403405021,45.59976764753811],[-123.89287105401847,45.5980993381379],[-123.89158159544678,45.59639998583639],[-123.89037338452303,45.594671471260625],[-123.88924775069424,45.59291570713764],[-123.88820593167452,45.591134636169386],[-123.88724907210512,45.589330228875134],[-123.88637822231905,45.587504481403805],[-123.88559433721166,45.58565941331875],[-123.8848982752187,45.583797065357246],[-123.8842907974024,45.58191949716759],[-123.88377256664643,45.580028785025924],[-123.88334414696081,45.57812701953566],[-123.88300600289703,45.57621630331185],[-123.88275849907414,45.574298748653334],[-123.88260189981574,45.5723764752049],[-123.88253636889876,45.57045160761246],[-123.8825619694133,45.5685262731735],[-123.88267866373427,45.56660259948563],[-123.88288631360413,45.5646827120957],[-123.88318468032685,45.56276873215223],[-123.88357342507229,45.560862774063516],[-123.8840521092909,45.5589669431642],[-123.88462019523797,45.55708333339281],[-123.88527704660622,45.55521402498274],[-123.88602192926678,45.553361082169225],[-123.88685401211673,45.551526550915],[-123.88777236803244,45.54971245665676],[-123.88877597492774,45.54792080207534],[-123.88986371691502,45.54615356489152],[-123.89103438556842,45.544412695690376],[-123.89228668128722,45.542700115776135],[-123.89361921475806,45.54101771506006],[-123.89503050851394,45.539367349983586],[-123.89651899858839,45.537750841479024],[-123.89808303626312,45.53616997296984],[-123.89972088990629,45.534626488412954],[-123.90143074690066,45.53312209038492],[-123.9032107156579,45.5316584382141],[-123.90505882771804,45.53023714616099],[-123.90697303993089,45.52885978164836],[-123.90895123671751,45.52752786354339],[-123.91099123240889,45.52624286049352],[-123.91309077365925,45.52500618931762],[-123.91524754193179,45.52381921345458],[-123.91745915605338,45.52268324147061],[-123.91972317483594,45.52159952562698],[-123.92203709976172,45.520569260509816],[-123.92439837772918,45.51959358172316],[-123.92680440385676,45.51867356464703],[-123.92925252434135,45.51781022326138],[-123.93174003936886,45.51700450903761],[-123.93426420607291,45.516257309898464],[-123.93682224153932,45.51556944924771],[-123.93941132585283,45.51494168507026],[-123.94202860518281,45.514374709104196],[-123.94467119490452,45.513869146085014],[-123.94733618275315,45.513425553063264],[-123.95002063200667,45.51304441879618],[-123.95272158469467,45.51272616321398],[-123.95543606482919,45.512471136961295],[-123.95816108165502,45.51227962101427],[-123.96089363291486,45.51215182637392],[-123.96363070812727,45.51208789383568],[-123.96636929187272,45.51208789383568],[-123.96910636708515,45.51215182637392],[-123.97183891834497,45.51227962101427],[-123.9745639351708,45.512471136961295],[-123.97727841530532,45.51272616321398],[-123.97997936799332,45.51304441879618],[-123.98266381724684,45.513425553063264],[-123.98532880509548,45.513869146085014],[-123.98797139481718,45.514374709104196],[-123.99058867414718,45.51494168507026],[-123.99317775846067,45.51556944924771],[-123.99573579392708,45.516257309898464],[-123.99825996063113,45.51700450903761],[-124.00074747565864,45.51781022326138],[-124.00319559614323,45.51867356464703],[-124.00560162227082,45.51959358172316],[-124.00796290023827,45.520569260509816],[-124.01027682516407,45.52159952562698],[-124.01254084394661,45.52268324147061],[-124.0147524580682,45.52381921345458],[-124.01690922634076,45.52500618931762],[-124.01900876759112,45.52624286049352],[-124.02104876328248,45.52752786354339],[-124.0230269600691,45.52885978164836],[-124.02494117228196,45.53023714616099],[-124.02678928434209,45.5316584382141],[-124.02856925309933,45.53312209038492],[-124.0302791100937,45.534626488412954],[-124.03191696373689,45.53616997296984],[-124.0334810014116,45.537750841479024],[-124.03496949148605,45.539367349983586],[-124.03638078524193,45.54101771506006],[-124.03771331871279,45.542700115776135],[-124.03896561443159,45.544412695690376],[-124.04013628308499,45.54615356489152],[-124.04122402507227,45.54792080207533],[-124.04222763196756,45.54971245665676],[-124.04314598788328,45.551526550915],[-124.04397807073322,45.55336108216923],[-124.04472295339377,45.55521402498274],[-124.04537980476202,45.55708333339281],[-124.0459478907091,45.5589669431642],[-124.04642657492771,45.560862774063516],[-124.04681531967314,45.56276873215223],[-124.04711368639586,45.5646827120957],[-124.04732133626574,45.56660259948563],[-124.0474380305867,45.5685262731735],[-124.04746363110125,45.57045160761246],[-124.04739810018425,45.5723764752049],[-124.04724150092586,45.574298748653334],[-124.04699399710296,45.57621630331185],[-124.0466558530392,45.57812701953566],[-124.04622743335356,45.58002878502593],[-124.04570920259759,45.58191949716759],[-124.0451017247813,45.583797065357246],[-124.04440566278834,45.585659413318744],[-124.04362177768095,45.587504481403805],[-124.04275092789487,45.58933022887513],[-124.04179406832547,45.591134636169386],[-124.04075224930575,45.592915707137635],[-124.03962661547696,45.594671471260625],[-124.03841840455323,45.59639998583639],[-124.03712894598152,45.59809933813791],[-124.0357596594979,45.59976764753811],[-124.03431205358186,45.60140306760012],[-124.03278772381024,45.603003788130025],[-124.03118835111263,45.604568037190354],[-124.02951569992969,45.60609408307133],[-124.02777161627675,45.6075802362183],[-124.0259580257147,45.60902485111267],[-124.02407693123008,45.61042632810453],[-124.02213041102705,45.61178311519465],[-124.0201206162335,45.61309370976397],[-124.01804976852362,45.61435666024851],[-124.01592015765996,45.615570567757906],[-124.01373413895747,45.61673408763547],[-124.01149413067205,45.61784593095838],[-124.00920261131742,45.618904865975864],[-124.00686211691229,45.61990971948408],[-124.00447523816159,45.62085937813575],[-124.00204461757463,45.621752789683455],[-123.99957294652384,45.62258896415482],[-123.99706296224686,45.623366974958394],[-123.99451744479592,45.624085959918865],[-123.99193921393778,45.624745122240604],[-123.98933112600764,45.625343731398175],[-123.98669607072097,45.62588112395285],[-123.98403696794655,45.62635670429445],[-123.98135676444481,45.62676994530717],[-123.97865843057488,45.62712038895903],[-123.97594495697437,45.627407646814206],[-123.97321935121568,45.627631400467315],[-123.97048463444267,45.62779140189961],[-123.96774383799153,45.62788747375646],[-123.965,45.62791950954564]],[[-123.89,45.76791808395255],[-123.88724930622247,45.76788604879066],[-123.88450166163098,45.76778997881556],[-123.88176011200004,45.76762998051893],[-123.87902769628519,45.76740623125466],[-123.87630744322338,45.767118979040326],[-123.87360236794521,45.76676854227978],[-123.87091546860292,45.766355309407025],[-123.86824972301804,45.76587973845174],[-123.86560808535285,45.76534235652703],[-123.86299348280878,45.764743759239956],[-123.86040881235638,45.764084610025584],[-123.85785693750033,45.76336563940517],[-123.85534068508272,45.76258764416967],[-123.85286284212935,45.76175148648897],[-123.85042615274149,45.76085809294854],[-123.84803331503747,45.75990845351405],[-123.8456869781474,45.758903620425414],[-123.84338973926408,45.75784470702161],[-123.84114414075405,45.756732886497346],[-123.83895266733172,45.75556939059329],[-123.83681774329962,45.7543555082212],[-123.83474172985817,45.753092584025666],[-123.8327269224881,45.75178201688385],[-123.8307755484079,45.75042525834541],[-123.82888976410965,45.74902381101384],[-123.82707165297602,45.7475792268716],[-123.82532322298027,45.74609310555047],[-123.82364640447291,45.74456709254958],[-123.8220430480567,45.7430028774027],[-123.8205149225523,45.74140219179729],[-123.81906371305722,45.73976680764701],[-123.81769101909985,45.738098535120386],[-123.81639835289035,45.73639922062742],[-123.8151871376707,45.73467074476662],[-123.8140587061654,45.732915020234856],[-123.81301429913427,45.7311339897023],[-123.81205506402917,45.72932962365473],[-123.81118205375577,45.72750391820593],[-123.81039622554171,45.725658892882414],[-123.8096984399121,45.72379658838294],[-123.80908945977345,45.72191906431557],[-123.80856994960732,45.72002839691458],[-123.80814047477331,45.71812667673983],[-123.8078015009231,45.7162160063612],[-123.80755339352574,45.71429849803074],[-123.80739641750377,45.71237627134489],[-123.80733073698183,45.71045145089967],[-123.80735641514639,45.7085261639412],[-123.8074734142174,45.706602538014266],[-123.80768159553185,45.70468269861157],[-123.80798071973814,45.70276876682616],[-123.8083704471017,45.700862857009604],[-123.80885033792094,45.69896707443873],[-123.80941985305299,45.69708351299311],[-123.81007835454822,45.69521425284622],[-123.81082510639325,45.69336135817257],[-123.8116592753608,45.691526874873254],[-123.81257993196583,45.689712828322804],[-123.81358605152634,45.687921221139185],[-123.81467651532762,45.68615403097993],[-123.81585011188889,45.684413208366514],[-123.8171055383303,45.68270067453937],[-123.81844140183868,45.68101831934582],[-123.8198562212309,45.67936799916349],[-123.82134842861225,45.677751534860946],[-123.82291637112824,45.67617070979831],[-123.82455831280818,45.67462726786954],[-123.82627243649756,45.6731229115888],[-123.82805684587798,45.67165930022279],[-123.82990956757165,45.67023804797119],[-123.83182855332821,45.668860722196925],[-123.83381168229215,45.667528841708474],[-123.83585676334697,45.66624387509575],[-123.83796153753487,45.66500723912161],[-123.8401236805483,45.663820297170346],[-123.84234080529114,45.66268435775523],[-123.84461046450674,45.66160067308644],[-123.84693015346943,45.66057043770079],[-123.8492973127374,45.659594787155164],[-123.85170933096325,45.65867479678444],[-123.85416354775964,45.657811480525716],[-123.85665725661661,45.657005789809894],[-123.85918770786783,45.65625861252167],[-123.86175211170232,45.65557077202926],[-123.86434764121842,45.65494302628476],[-123.86697143551719,45.65437606699604],[-123.86962060283115,45.65387051887124],[-123.87229222368597,45.65342693893638],[-123.87498335409107,45.65304581592716],[-123.87769102875615,45.65272756975514],[-123.88041226432988,45.6524725510494],[-123.88314406265802,45.652281040773595],[-123.88588341405652,45.652153249919294],[-123.88862730059742,45.652089319275625],[-123.89137269940258,45.652089319275625],[-123.89411658594348,45.652153249919294],[-123.896855937342,45.652281040773595],[-123.89958773567014,45.6524725510494],[-123.90230897124387,45.65272756975514],[-123.90501664590894,45.65304581592716],[-123.90770777631403,45.65342693893638],[-123.91037939716887,45.65387051887124],[-123.91302856448283,45.65437606699604],[-123.91565235878159,45.65494302628476],[-123.9182478882977,45.65557077202926],[-123.92081229213217,45.65625861252167],[-123.9233427433834,45.657005789809894],[-123.92583645224038,45.657811480525716],[-123.92829066903676,45.65867479678444],[-123.93070268726261,45.659594787155164],[-123.93306984653059,45.66057043770079],[-123.93538953549326,45.66160067308644],[-123.93765919470886,45.66268435775523],[-123.9398763194517,45.663820297170346],[-123.94203846246513,45.66500723912161],[-123.94414323665303,45.66624387509575],[-123.94618831770786,45.667528841708474],[-123.94817144667181,45.668860722196925],[-123.95009043242837,45.67023804797119],[-123.95194315412202,45.67165930022279],[-123.95372756350244,45.6731229115888],[-123.95544168719182,45.67462726786954],[-123.95708362887176,45.67617070979831],[-123.95865157138775,45.677751534860946],[-123.9601437787691,45.67936799916348],[-123.96155859816132,45.68101831934581],[-123.96289446166972,45.68270067453937],[-123.96414988811111,45.684413208366514],[-123.9653234846724,45.68615403097993],[-123.96641394847366,45.687921221139185],[-123.96742006803417,45.68971282832282],[-123.9683407246392,45.691526874873254],[-123.96917489360675,45.69336135817257],[-123.96992164545179,45.69521425284622],[-123.97058014694703,45.69708351299311],[-123.97114966207906,45.69896707443873],[-123.97162955289832,45.700862857009604],[-123.97201928026188,45.70276876682615],[-123.97231840446817,45.70468269861157],[-123.97252658578262,45.706602538014266],[-123.97264358485361,45.7085261639412],[-123.97266926301818,45.71045145089967],[-123.97260358249623,45.71237627134489],[-123.97244660647428,45.71429849803074],[-123.97219849907691,45.7162160063612],[-123.97185952522669,45.71812667673982],[-123.97143005039268,45.72002839691457],[-123.97091054022655,45.72191906431557],[-123.97030156008792,45.72379658838294],[-123.9696037744583,45.725658892882414],[-123.96881794624423,45.72750391820594],[-123.96794493597085,45.72932962365473],[-123.96698570086575,45.73113398970229],[-123.9659412938346,45.73291502023485],[-123.96481286232931,45.73467074476662],[-123.96360164710967,45.73639922062742],[-123.96230898090015,45.73809853512039],[-123.96093628694278,45.73976680764701],[-123.9594850774477,45.741402191797285],[-123.9579569519433,45.7430028774027],[-123.95635359552709,45.74456709254958],[-123.95467677701973,45.74609310555047],[-123.95292834702398,45.7475792268716],[-123.95111023589035,45.74902381101385],[-123.94922445159212,45.75042525834541],[-123.94727307751191,45.75178201688385],[-123.94525827014184,45.753092584025666],[-123.9431822567004,45.7543555082212],[-123.94104733266828,45.75556939059329],[-123.93885585924596,45.75673288649735],[-123.93661026073592,45.75784470702162],[-123.9343130218526,45.758903620425414],[-123.93196668496255,45.75990845351404],[-123.92957384725851,45.76085809294854],[-123.92713715787065,45.76175148648897],[-123.92465931491728,45.76258764416967],[-123.92214306249969,45.76336563940519],[-123.91959118764363,45.764084610025584],[-123.91700651719124,45.764743759239956],[-123.91439191464715,45.76534235652703],[-123.91175027698196,45.76587973845174],[-123.9090845313971,45.766355309407025],[-123.90639763205479,45.76676854227978],[-123.90369255677663,45.767118979040326],[-123.90097230371481,45.76740623125466],[-123.89823988799996,45.767629980518926],[-123.89549833836902,45.76778997881556],[-123.89275069377753,45.76788604879066],[-123.89,45.76791808395255]],[[-123.76799999999999,46.26491302487669],[-123.76522455332078,46.26488099193417],[-123.76245218343308,46.26478492861659],[-123.75968596368536,46.264624941414056],[-123.75692896054383,46.264401207677736],[-123.75418423016139,46.26411397542132],[-123.75145481495855,46.263763563043625],[-123.74874374022006,46.263350358972346],[-123.74605401071173,46.26287482122946],[-123.74338860732078,46.26233747691896],[-123.7407504837241,46.261738921637225],[-123.7381425630878,46.26107981880691],[-123.73556773480239,46.260360898935126],[-123.73302885125663,46.25958295879658],[-123.73052872465482,46.25874686054289],[-123.72807012387997,46.25785353073888],[-123.72565577140726,46.256903959327104],[-123.72328834027122,46.25589919852177],[-123.72097045108976,46.25484036163314],[-123.71870466914879,46.25372862182428],[-123.71649350155036,46.2525652108009],[-123.71433939442822,46.251351417436396],[-123.71224473023284,46.25008858633324],[-123.71021182509017,46.24877811632272],[-123.70824292623631,46.24742145890447],[-123.70634020953099,46.24602011662776],[-123.70450577705309,46.244575641416304],[-123.70274165478023,46.24308963283853],[-123.70104979035564,46.24156373632538],[-123.69943205094417,46.23999964133741],[-123.69789022118006,46.23839907948368],[-123.69642600120876,46.236763822594185],[-123.69504100482457,46.23509568074825],[-123.6937367577065,46.2333965002611],[-123.69251469575397,46.23166816163077],[-123.69137616352398,46.229912577447855],[-123.69032241277179,46.228131690270295],[-123.68935460109596,46.22632747046575],[-123.68847379068987,46.22450191402385],[-123.6876809472004,46.222657040340906],[-123.68697693869504,46.22079488997944],[-123.68636253473849,46.21891752240527],[-123.68583840557973,46.217027013704424],[-123.68540512144978,46.21512545428254],[-123.68506315197149,46.21321494654948],[-123.68481286568117,46.21129760259145],[-123.68465452966281,46.20937554183345],[-123.68458830929504,46.207450888694574],[-123.68461426811075,46.20552577023862],[-123.6847323677696,46.203602313823026],[-123.68494246814284,46.20168264474815],[-123.68524432751089,46.199768883910046],[-123.6856376028725,46.19786314545885],[-123.68612185036531,46.1959675344658],[-123.68669652579722,46.19408414460108],[-123.68736098528774,46.1922150558252],[-123.68811448601836,46.19036233209654],[-123.68895618709095,46.188528019097234],[-123.68988515049335,46.186714141980424],[-123.6909003421704,46.18492270314056],[-123.69200063319947,46.183155680010074],[-123.69318480106926,46.18141502288408],[-123.69445153105949,46.179702652775845],[-123.69579941772069,46.178020459305245],[-123.69722696645194,46.17637029862242],[-123.69873259517482,46.174753991369215],[-123.70031463610138,46.17317332067992],[-123.70197133759453,46.17163003022429],[-123.70370086611824,46.17012582229426],[-123.70550130827579,46.16866235593681],[-123.70737067293341,46.16724124513486],[-123.70930689342707,46.16586405703811],[-123.71130782984989,46.16453231024574],[-123.71337127141788,46.16324747314284],[-123.71549493891095,46.16201096229233],[-123.71767648718689,46.160824140884],[-123.7199135077654,46.15968831724246],[-123.72220353147928,46.158604743395536],[-123.72454403119016,46.15757461370447],[-123.72693242456539,46.15659906355768],[-123.72936607691372,46.15567916812925],[-123.73184230407591,46.154815941203445],[-123.73435837536793,46.15401033406671],[-123.73691151657329,46.153263234468],[-123.73949891298096,46.15257546564885],[-123.74211771246632,46.15194778544406],[-123.74476502861145,46.15138088545395],[-123.74743794386136,46.150875390289],[-123.75013351271305,46.15043185688782],[-123.75284876493424,46.15005077390908],[-123.75558070880754,46.149732561198],[-123.75832633439778,46.14947756932806],[-123.76108261683794,46.14928607921832],[-123.76384651963131,46.14915830182676],[-123.76661499796538,46.149094377920086],[-123.76938500203461,46.149094377920086],[-123.77215348036866,46.14915830182676],[-123.77491738316205,46.14928607921832],[-123.77767366560221,46.14947756932806],[-123.78041929119244,46.149732561198],[-123.78315123506574,46.15005077390908],[-123.78586648728692,46.15043185688782],[-123.78856205613862,46.150875390289],[-123.79123497138853,46.15138088545396],[-123.79388228753366,46.15194778544406],[-123.79650108701902,46.15257546564885],[-123.7990884834267,46.153263234468],[-123.80164162463204,46.15401033406671],[-123.80415769592408,46.154815941203445],[-123.80663392308625,46.15567916812925],[-123.80906757543458,46.15659906355768],[-123.81145596880981,46.15757461370447],[-123.81379646852069,46.158604743395536],[-123.81608649223458,46.15968831724246],[-123.8183235128131,46.160824140884],[-123.82050506108904,46.16201096229233],[-123.82262872858209,46.16324747314284],[-123.8246921701501,46.16453231024574],[-123.82669310657292,46.16586405703811],[-123.82862932706657,46.16724124513486],[-123.8304986917242,46.16866235593681],[-123.83229913388175,46.17012582229426],[-123.83402866240546,46.17163003022429],[-123.8356853638986,46.17317332067992],[-123.83726740482516,46.174753991369215],[-123.83877303354805,46.17637029862242],[-123.8402005822793,46.17802045930524],[-123.84154846894049,46.179702652775845],[-123.84281519893071,46.18141502288408],[-123.84399936680052,46.183155680010074],[-123.84509965782959,46.18492270314055],[-123.84611484950662,46.18671414198043],[-123.84704381290904,46.18852801909724],[-123.84788551398162,46.19036233209654],[-123.84863901471225,46.1922150558252],[-123.84930347420276,46.19408414460108],[-123.84987814963468,46.1959675344658],[-123.85036239712748,46.19786314545885],[-123.85075567248909,46.199768883910046],[-123.85105753185715,46.20168264474815],[-123.85126763223039,46.203602313823026],[-123.85138573188922,46.20552577023862],[-123.85141169070494,46.207450888694574],[-123.85134547033718,46.20937554183345],[-123.8511871343188,46.21129760259145],[-123.85093684802848,46.21321494654948],[-123.85059487855021,46.21512545428254],[-123.85016159442026,46.21702701370442],[-123.84963746526148,46.21891752240527],[-123.84902306130495,46.22079488997944],[-123.84831905279957,46.222657040340906],[-123.8475262093101,46.224501914023854],[-123.84664539890402,46.226327470465755],[-123.8456775872282,46.228131690270295],[-123.844623836476,46.229912577447855],[-123.843485304246,46.23166816163077],[-123.84226324229348,46.2333965002611],[-123.84095899517541,46.23509568074825],[-123.83957399879121,46.236763822594185],[-123.83810977881991,46.23839907948368],[-123.8365679490558,46.23999964133741],[-123.83495020964435,46.24156373632538],[-123.83325834521976,46.24308963283853],[-123.8314942229469,46.244575641416304],[-123.82965979046898,46.24602011662776],[-123.82775707376368,46.24742145890446],[-123.82578817490982,46.24877811632271],[-123.82375526976713,46.25008858633324],[-123.82166060557176,46.251351417436396],[-123.81950649844963,46.2525652108009],[-123.8172953308512,46.25372862182428],[-123.81502954891022,46.25484036163315],[-123.81271165972876,46.25589919852176],[-123.81034422859273,46.25690395932711],[-123.80792987612001,46.25785353073888],[-123.80547127534516,46.258746860542885],[-123.80297114874335,46.25958295879658],[-123.80043226519759,46.260360898935126],[-123.79785743691217,46.26107981880691],[-123.79524951627589,46.26173892163722],[-123.79261139267919,46.26233747691896],[-123.78994598928824,46.26287482122946],[-123.78725625977992,46.263350358972346],[-123.78454518504144,46.263763563043625],[-123.78181576983859,46.26411397542132],[-123.77907103945616,46.26440120767774],[-123.77631403631462,46.264624941414056],[-123.7735478165669,46.2647849286166],[-123.77077544667921,46.26488099193417],[-123.76799999999999,46.26491302487669]]]});const fO=new vh,Bse=[{layer:new md({opacity:.8,refreshInterval:10,title:"Wave Height",url:"https://mapservices.weather.noaa.gov/geoserver/ndfd/waveh/ows?service=wms&version=1.3.0&request=GetCapabilities",visible:!1}),blur:!0,gradientScaleOptions:{description:"Feet",gradientInfos:[{label:1,value:"#e9feff 0%"},{label:2,value:"#c9f6f8 6.67%"},{label:3,value:"#92ecf0 13.33%"},{label:4,value:"#4cd5e2 20%"},{label:5,value:"#22b7c0 26.67%"},{label:7,value:"#2fb381 33.33%"},{label:10,value:"#90e86a 40%"},{label:12,value:"#dff27a 46.67%"},{label:15,value:"#ffd36b 53.33%"},{label:20,value:"#ffb45a 60%"},{label:25,value:"#ff7a40 66.67%"},{label:30,value:"#e03b2a 73.33%"},{label:35,value:"#b61a1a 80%"},{label:40,value:"#6e0d20 86.67%"},{label:55,value:"#300019 93.33%"},{label:60,value:"#1b0010 100%"}]}},{layer:new md({opacity:.8,refreshInterval:15,title:"Base Reflectivity Radar",url:"https://opengeo.ncep.noaa.gov/geoserver/conus/conus_bref_qcd/ows?service=wms&version=1.3.0&request=GetCapabilities",visible:!1}),blur:!0,gradientScaleOptions:u_,layerLoopControllerOptions:{}},{layer:new md({opacity:.8,refreshInterval:15,title:"Composite Radar",url:"https://opengeo.ncep.noaa.gov/geoserver/conus/conus_cref_qcd/ows?service=wms&version=1.3.0&request=GetCapabilities",visible:!1}),blur:!0,gradientScaleOptions:u_,layerLoopControllerOptions:{}},{layer:new md({opacity:.8,title:"Sky",url:"https://mapservices.weather.noaa.gov/geoserver/ndfd/sky/ows?service=wms&version=1.3.0&request=GetCapabilities",visible:!1}),blur:!0,gradientScaleOptions:{description:"% Cloud Cover",gradientInfos:[{label:0,value:"#2aa6f6  0.00%"},{label:10,value:"#4fbaf2 11.11%"},{label:20,value:"#9fd9f9 22.22%"},{label:30,value:"#d9eefc 33.33%"},{label:40,value:"#f3f8fb 44.44%"},{label:50,value:"#e6e6e6 55.56%"},{label:60,value:"#c1c1c1 66.67%"},{label:70,value:"#9b9b9b 77.78%"},{label:80,value:"#6b6b6b 88.89%"},{label:90,value:"#222222 100.00%"}]}},{layer:new QP({sublayers:[{id:1,title:"Highs and Lows"},{id:2,title:"Fronts"}],title:"Weather Fronts",url:"https://mapservices.weather.noaa.gov/vector/rest/services/outlooks/natl_fcst_wx_chart/MapServer",visible:!1}),legend:!0},{layer:fO,legend:!1}],a2e=Object.freeze(Object.defineProperty({__proto__:null,ICONS:zse,applicationSettings:Xn,layerInfos:Bse,stationInfos:Use,trafficLayers:fO,view:F9,weatherAdvisoryFeatureLayer:qse,weatherAdvisoryQueryPolygon:Gse},Symbol.toStringTag,{value:"Module"}));export{xY as $,Y6 as A,p5 as B,as as C,iO as D,NE as E,Y4 as F,$P as G,t2e as H,e2e as I,Yc as J,xk as K,Aie as L,Die as M,R9 as N,Ane as O,rO as P,G5 as Q,Rf as R,Nie as S,qd as T,D as U,Zk as V,x8 as W,r2e as X,ae as Y,EB as Z,ne as _,nO as a,ia as a$,I4 as a0,wK as a1,bK as a2,_K as a3,de as a4,ra as a5,KF as a6,rp as a7,JF as a8,I6 as a9,dP as aA,cP as aB,hee as aC,aee as aD,WX as aE,QX as aF,Ll as aG,e4 as aH,eB as aI,Oh as aJ,ES as aK,hD as aL,eN as aM,tN as aN,rN as aO,IB as aP,SU as aQ,pk as aR,te as aS,Xo as aT,Ah as aU,es as aV,xU as aW,it as aX,pr as aY,c6 as aZ,ls as a_,yD as aa,Hx as ab,ED as ac,dhe as ad,phe as ae,U as af,pI as ag,He as ah,Sk as ai,bk as aj,e1e as ak,tle as al,tp as am,at as an,bl as ao,Ks as ap,dee as aq,Mr as ar,JX as as,qI as at,oee as au,yB as av,FB as aw,D3 as ax,pP as ay,ree as az,P4 as b,Tt as b$,wt as b0,Dv as b1,fa as b2,ma as b3,Fte as b4,ade as b5,vde as b6,t0e as b7,s0e as b8,i0e as b9,nl as bA,h6 as bB,Uoe as bC,Wr as bD,uI as bE,tl as bF,uA as bG,XI as bH,yX as bI,Ine as bJ,Fne as bK,YV as bL,rz as bM,QV as bN,j$ as bO,Tl as bP,D$ as bQ,zV as bR,UV as bS,xj as bT,wd as bU,su as bV,k1e as bW,A1e as bX,F1e as bY,DX as bZ,NX as b_,K1e as ba,fh as bb,T1e as bc,O1e as bd,C1e as be,M4 as bf,K as bg,up as bh,d$ as bi,Epe as bj,bW as bk,tt as bl,Zoe as bm,Hoe as bn,Woe as bo,Ve as bp,bde as bq,Kc as br,$I as bs,GC as bt,ine as bu,j_ as bv,Ir as bw,v1 as bx,d6 as by,p6 as bz,GY as c,N5 as c$,PX as c0,qn as c1,EX as c2,QD as c3,bL as c4,SL as c5,_L as c6,xL as c7,dne as c8,hne as c9,LW as cA,jh as cB,Dm as cC,Goe as cD,Cle as cE,Kle as cF,pt as cG,f0e as cH,oa as cI,Bs as cJ,N_ as cK,Gr as cL,uW as cM,H5 as cN,Th as cO,vne as cP,FI as cQ,AI as cR,ws as cS,Lh as cT,oh as cU,UI as cV,rB as cW,jI as cX,zI as cY,oL as cZ,F5 as c_,bi as ca,xf as cb,ll as cc,rW as cd,Zce as ce,fe as cf,Qce as cg,sp as ch,Ph as ci,ol as cj,HT as ck,Kae as cl,a4 as cm,mV as cn,ue as co,Jne as cp,_i as cq,Xl as cr,Ze as cs,G_ as ct,n0 as cu,W1 as cv,HC as cw,Y as cx,iM as cy,G3 as cz,WM as d,See as d$,nL as d0,Z2 as d1,J2 as d2,la as d3,Zue as d4,Bq as d5,$X as d6,Xhe as d7,Vne as d8,MS as d9,w8 as dA,p0e as dB,GN as dC,F0e as dD,gU as dE,qP as dF,A0e as dG,Ih as dH,Q_ as dI,RP as dJ,m6 as dK,Ht as dL,qV as dM,ile as dN,yi as dO,rle as dP,N$ as dQ,Bt as dR,h2 as dS,ele as dT,OV as dU,UP as dV,k0e as dW,L0e as dX,Wne as dY,mB as dZ,eV as d_,MP as da,pg as db,kh as dc,Kd as dd,kQ as de,bB as df,aB as dg,lB as dh,RB as di,fr as dj,cE as dk,lE as dl,dt as dm,ot as dn,bt as dp,mr as dq,hi as dr,Ene as ds,Yk as dt,Jle as du,z0e as dv,Soe as dw,Pl as dx,iL as dy,d0e as dz,np as e,wQ as e$,na as e0,nD as e1,tB as e2,VI as e3,GS as e4,OB as e5,Bne as e6,Xn as e7,Bse as e8,F9 as e9,A6 as eA,she as eB,TB as eC,zae as eD,jae as eE,v1e as eF,Fh as eG,It as eH,Vae as eI,S1e as eJ,Qa as eK,eo as eL,Yo as eM,Uae as eN,Go as eO,y6 as eP,X1e as eQ,a_ as eR,kN as eS,yne as eT,ep as eU,li as eV,dY as eW,kJ as eX,che as eY,bQ as eZ,uhe as e_,ane as ea,one as eb,jle as ec,Xle as ed,H as ee,Wn as ef,pi as eg,eh,Qe as ei,KS as ej,sr as ek,qi as el,toe as em,zc as en,moe as eo,ey as ep,Loe as eq,i4 as er,e6 as es,t6 as et,Coe as eu,zoe as ev,o4 as ew,GA as ex,Pq as ey,Cx as ez,m9 as f,J_ as f$,i1e as f0,W as f1,R0e as f2,gd as f3,Jf as f4,Ja as f5,Mh as f6,Boe as f7,Cl as f8,eG as f9,jo as fA,kn as fB,yhe as fC,mne as fD,TL as fE,pL as fF,sS as fG,qK as fH,qhe as fI,Dhe as fJ,Ld as fK,Nn as fL,UK as fM,Ghe as fN,Bhe as fO,Nc as fP,Ile as fQ,Tle as fR,Az as fS,VS as fT,vF as fU,Zne as fV,aF as fW,_B as fX,FL as fY,l8 as fZ,Z_ as f_,roe as fa,eoe as fb,qoe as fc,VF as fd,uoe as fe,lA as ff,Tf as fg,bpe as fh,b9 as fi,w9 as fj,kte as fk,Wle as fl,Ale as fm,hoe as fn,O6 as fo,hue as fp,fi as fq,ene as fr,XF as fs,K4 as ft,ahe as fu,SA as fv,E8 as fw,Oi as fx,$Q as fy,Et as fz,QM as g,Ml as g$,Ke as g0,Hne as g1,YN as g2,Bx as g3,kz as g4,dB as g5,Wx as g6,tL as g7,uN as g8,iD as g9,S8 as gA,W0e as gB,mk as gC,th as gD,Dc as gE,x1e as gF,ff as gG,Eo as gH,TW as gI,ede as gJ,rM as gK,ode as gL,O2 as gM,sde as gN,Nd as gO,nde as gP,O0 as gQ,Qpe as gR,Que as gS,ix as gT,rh as gU,qf as gV,cF as gW,ox as gX,Qg as gY,Une as gZ,Cpe as g_,lN as ga,n4 as gb,De as gc,dre as gd,$j as ge,bY as gf,_Y as gg,xee as gh,jx as gi,yA as gj,l6 as gk,u5 as gl,cre as gm,SB as gn,pB as go,uee as gp,yT as gq,Lle as gr,f6 as gs,Jq as gt,qse as gu,Gse as gv,zse as gw,n2e as gx,i2e as gy,qA as gz,Mte as h,z5 as h$,W6 as h0,Sr as h1,BZ as h2,poe as h3,RN as h4,uF as h5,Dt as h6,sx as h7,Ju as h8,vI as h9,Lx as hA,Ele as hB,Mle as hC,er as hD,Q5 as hE,jf as hF,J5 as hG,$M as hH,EF as hI,Lhe as hJ,oae as hK,tae as hL,Ms as hM,B2 as hN,ZM as hO,UD as hP,qD as hQ,hpe as hR,dpe as hS,ppe as hT,cpe as hU,fpe as hV,ype as hW,upe as hX,lpe as hY,pF as hZ,ape as h_,Y5 as ha,w as hb,$L as hc,uL as hd,Zs as he,Uq as hf,L6 as hg,pA as hh,ooe as hi,E4 as hj,K0 as hk,RF as hl,YF as hm,QF as hn,nB as ho,AB as hp,NB as hq,mF as hr,Px as hs,rL as ht,oB as hu,NI as hv,Pe as hw,doe as hx,xoe as hy,R8 as hz,qY as i,Eh as i$,WL as i0,Nk as i1,Nh as i2,$6 as i3,Jee as i4,mQ as i5,Bee as i6,IQ as i7,g9 as i8,nte as i9,FQ as iA,AQ as iB,Gh as iC,Zu as iD,Iq as iE,lde as iF,r1e as iG,t1e as iH,CE as iI,OE as iJ,IG as iK,MG as iL,B6 as iM,DI as iN,jne as iO,Mq as iP,Jpe as iQ,V0e as iR,FP as iS,VP as iT,DP as iU,C0e as iV,Ub as iW,U0e as iX,GL as iY,KL as iZ,zP as i_,nm as ia,E$ as ib,TP as ic,wY as id,DQ as ie,Vc as ig,pte as ih,_4 as ii,Mb as ij,Fe as ik,wg as il,Zh as im,wP as io,cp as ip,LQ as iq,Ns as ir,M6 as is,kle as it,Rle as iu,J8 as iv,os as iw,mh as ix,o9 as iy,NQ as iz,O4 as j,Roe as j$,_ne as j0,wde as j1,ko as j2,rs as j3,HY as j4,xQ as j5,JK as j6,a9 as j7,nY as j8,xP as j9,KP as jA,VC as jB,wre as jC,fre as jD,P0e as jE,D0e as jF,yre as jG,N0e as jH,woe as jI,vre as jJ,foe as jK,Js as jL,tu as jM,Lne as jN,ux as jO,lx as jP,FF as jQ,r0 as jR,jS,Toe as jT,r6 as jU,iu as jV,yae as jW,fae as jX,mae as jY,Doe as jZ,Foe as j_,_e as ja,ut as jb,Ae as jc,mi as jd,hr as je,oY as jf,cY as jg,SE as jh,t9 as ji,L2 as jj,aE as jk,ke as jl,fY as jm,WK as jn,ZK as jo,KK as jp,YK as jq,uY as jr,XK as js,eY as jt,tY as ju,rY as jv,iY as jw,sY as jx,At as jy,nne as jz,ns as k,Mn as k$,sF as k0,Aoe as k1,kF as k2,noe as k3,hae as k4,Iue as k5,il as k6,TA as k7,Nv as k8,fA as k9,aQ as kA,k2 as kB,Nse as kC,o2e as kD,t4 as kE,pae as kF,cae as kG,QS as kH,ZS as kI,NA as kJ,jA as kK,Bo as kL,BW as kM,WW as kN,ZW as kO,Dae as kP,Fs as kQ,b1e as kR,Hhe as kS,xG as kT,wpe as kU,oD as kV,Cz as kW,KN as kX,XN as kY,Op as kZ,_r as k_,hA as ka,Lte as kb,P2 as kc,qS as kd,xpe as ke,_pe as kf,Spe as kg,wW as kh,Ahe as ki,Fhe as kj,khe as kk,EP as kl,jz as km,G0e as kn,Vte as ko,q0e as kp,Wte as kq,yg as kr,rie as ks,Gb as kt,Il as ku,JU as kv,Sx as kw,loe as kx,Sy as ky,s1e as kz,a1e as l,wp as l$,Co as l0,vt as l1,iU as l2,CG as l3,s2e as l4,Fse as l5,fO as l6,Use as l7,spe as l8,Gn as l9,nx as lA,qne as lB,U5 as lC,Ff as lD,dz as lE,_$ as lF,zf as lG,Oue as lH,Pue as lI,Eq as lJ,sne as lK,s9 as lL,KQ as lM,W5 as lN,Dl as lO,ft as lP,_f as lQ,Ype as lR,mZ as lS,Xpe as lT,Kpe as lU,eM as lV,jte as lW,G6 as lX,NK as lY,jhe as lZ,dF as l_,xd as la,lY as lb,Gae as lc,gY as ld,Yhe as le,Ax as lf,Khe as lg,Vd as lh,Ho as li,Ha as lj,Xd as lk,ite as ll,K_ as lm,gZ as ln,y1e as lo,js as lp,vX as lq,Qne as lr,Ole as ls,Ple as lt,fD as lu,dD as lv,hB as lw,pD as lx,D_ as ly,Vz as lz,nie as m,p2 as m$,Nne as m0,sf as m1,nf as m2,yW as m3,D5 as m4,Are as m5,x$ as m6,qae as m7,YY as m8,R1e as m9,Gpe as mA,qpe as mB,rpe as mC,ipe as mD,oI as mE,SI as mF,Qc as mG,Ds as mH,X5 as mI,BS as mJ,Rh as mK,sI as mL,Bh as mM,lp as mN,qe as mO,WQ as mP,HQ as mQ,Se as mR,Ro as mS,dK as mT,wE as mU,ds as mV,Rn as mW,ys as mX,Mue as mY,Fy as mZ,One as m_,Upe as ma,$1e as mb,Lpe as mc,lb as md,XZ as me,She as mf,zC as mg,dT as mh,xhe as mi,ui as mj,Ln as mk,Hc as ml,oQ as mm,gQ as mn,vQ as mo,TQ as mp,jee as mq,Zee as mr,yue as ms,fue as mt,mue as mu,kP as mv,el as mw,zo as mx,gI as my,e0e as mz,X0e as n,Eue as n$,gi as n0,PB as n1,HA as n2,o2 as n3,fne as n4,OA as n5,Pne as n6,Nt as n7,Ft as n8,$ee as n9,fG as nA,Xue as nB,zN as nC,Cne as nD,gne as nE,Un as nF,wr as nG,kne as nH,sW as nI,dA as nJ,pne as nK,cne as nL,Yne as nM,HU as nN,Rq as nO,nI as nP,cM as nQ,Dpe as nR,jpe as nS,Vpe as nT,zpe as nU,Tpe as nV,Mpe as nW,Ipe as nX,Ure as nY,HW as nZ,JC as n_,eue as na,iue as nb,Yle as nc,Tee as nd,Cte as ne,OP as nf,Xte as ng,sre as nh,mre as ni,sa as nj,aS as nk,Tq as nl,WA as nm,ZA as nn,t0 as no,aoe as np,kA as nq,AA as nr,AZ as ns,Vi as nt,m4 as nu,QG as nv,mI as nw,wI as nx,oG as ny,Yue as nz,HM as o,zX as o$,une as o0,lne as o1,wL as o2,eae as o3,b4 as o4,c0e as o5,tpe as o6,fte as o7,ja as o8,ohe as o9,Ni as oA,a0e as oB,goe as oC,$pe as oD,W1e as oE,H1e as oF,J1e as oG,Q1e as oH,cb as oI,pb as oJ,db as oK,B1e as oL,G1e as oM,Li as oN,kpe as oO,CL as oP,RL as oQ,wne as oR,JP as oS,$re as oT,Sre as oU,n0e as oV,o0e as oW,j1e as oX,P1e as oY,Z1e as oZ,z1e as o_,Kj as oa,Nae as ob,Whe as oc,_z as od,Xae as oe,Hae as of,Jae as og,Wae as oh,Qae as oi,Zae as oj,Yae as ok,ur as ol,mde as om,Zhe as on,Bae as oo,oA as op,q1e as oq,ioe as or,gA as os,coe as ot,sue as ou,SG as ov,N1e as ow,r0e as ox,D1e as oy,Y1e as oz,Wh as p,uM as p$,V1e as p0,Kg as p1,Rpe as p2,VX as p3,qX as p4,Ope as p5,L1e as p6,RW as p7,Ppe as p8,npe as p9,j0e as pA,uj as pB,Fv as pC,CF as pD,XV as pE,u4 as pF,Uo as pG,az as pH,lh as pI,ch as pJ,Jc as pK,tz as pL,jQ as pM,yz as pN,fz as pO,x6 as pP,DZ as pQ,rde as pR,ide as pS,zne as pT,tde as pU,gde as pV,yde as pW,fde as pX,hde as pY,dde as pZ,qW as p_,ope as pa,Ape as pb,Fpe as pc,Bpe as pd,Hpe as pe,mpe as pf,Wpe as pg,Zpe as ph,vW as pi,SW as pj,SM as pk,Npe as pl,lW as pm,hF as pn,dN as po,YA as pp,_oe as pq,kue as pr,_D as ps,JS as pt,Tx as pu,Fd as pv,bD as pw,gae as px,CX as py,boe as pz,B as q,PI as q$,vpe as q0,gpe as q1,VW as q2,epe as q3,koe as q4,An as q5,Uf as q6,$oe as q7,$r as q8,kB as q9,Voe as qA,AF as qB,g1e as qC,w1e as qD,_ee as qE,AN as qF,soe as qG,Vh as qH,zh as qI,Uh as qJ,hhe as qK,cq as qL,zue as qM,pK as qN,Zl as qO,LK as qP,Qle as qQ,Dle as qR,Ule as qS,Vle as qT,uue as qU,lue as qV,Fle as qW,yoe as qX,Zle as qY,qj as qZ,LG as q_,Ble as qa,Hle as qb,gF as qc,RD as qd,OD as qe,$x as qf,yP as qg,tV as qh,rD as qi,eD as qj,tD as qk,gD as ql,PD as qm,uP as qn,rae as qo,xq as qp,lD as qq,Kue as qr,Jue as qs,m1e as qt,oF as qu,Ioe as qv,Poe as qw,joe as qx,Moe as qy,Ooe as qz,J0e as r,A1 as r0,H8 as r1,vle as r2,us as r3,Nhe as r4,Gt as r5,Jg as r6,Uue as r7,zle as r8,ZN as r9,a2e as rA,E1e as ra,Vu as rb,Nz as rc,Dne as rd,_le as re,Nle as rf,Gne as rg,zA as rh,Fz as ri,nae as rj,qle as rk,sae as rl,iae as rm,voe as rn,a6 as ro,Gle as rp,sD as rq,Lz as rr,mD as rs,Joe as rt,Koe as ru,_de as rv,Rhe as rw,IP as rx,aie as ry,Pse as rz,ic as s,Qh as t,o1e as u,H2 as v,Oe as w,A as x,j as y,ee as z};
