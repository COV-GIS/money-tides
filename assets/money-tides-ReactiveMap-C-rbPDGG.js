import{bi as o,ai as s}from"./money-tides-jsxFactory-uxllTQB8.js";import{v as l}from"./money-tides-config-BVnrMf5g.js";let h=class extends o{notify(){const t=this._observers;if(t&&t.length>0){const e=t.slice();for(const i of e)i.onInvalidated(),i.onCommitted()}}},m=class{constructor(t=e=>e.values().next().value){this._peeker=t,this._observable=new h,this._items=new Set}get length(){return s(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return s(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const e=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),e!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){s(this._observable),yield*this._items}};class n{constructor(t,e){this._observable=new h,this._value=t,this._equalityFunction=e}get value(){return s(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}}function c(r,t=l){return new n(r,t)}class f{constructor(t){this._observable=new h,this._map=new Map(t)}get size(){return s(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const e=this._map.delete(t);return e&&this._observable.notify(),e}entries(){return s(this._observable),this._map.entries()}forEach(t,e){s(this._observable),this._map.forEach((i,a)=>t.call(e,i,a,this),e)}get(t){return s(this._observable),this._map.get(t)}has(t){return s(this._observable),this._map.has(t)}keys(){return s(this._observable),this._map.keys()}set(t,e){return this._map.set(t,e),this._observable.notify(),this}values(){return s(this._observable),this._map.values()}[Symbol.iterator](){return s(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}}export{m as a,h as b,c as r,f as s};
