const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/money-tides-AdvisoryItem-BS-nh7Ct.js","assets/money-tides-jsxFactory-DEIYsQlk.js","assets/money-tides-config-Dy31BTur.js","assets/index-B1HIWYBB.js","assets/index-CEPnQygF.css","assets/money-tides-index-Bz5uSspo.js","assets/money-tides-runtime-BTGwkf2p.js","assets/runtime-OCMtRbrJ.css","assets/money-tides-app-config-B_lDikIq.js","assets/money-tides-ReactiveMap-DcqEaPSm.js","assets/money-tides-messageBundle-mChLUIbw.js","assets/money-tides-index-BSQMl5Dg.js","assets/money-tides-MoneyTides-3vuPd4UY.js","assets/MoneyTides-DkmM82s1.css","assets/AdvisoryItem-BSo-hN4l.css"])))=>i.map(i=>d[i]);
import{_ as v}from"./index-B1HIWYBB.js";import{at as a,m as p,b as u}from"./money-tides-jsxFactory-DEIYsQlk.js";import"./money-tides-config-Dy31BTur.js";import{P as g}from"./money-tides-PanelBase-CPlNoa8m.js";import{v as h,g9 as f,ga as y,du as l,ds as _,gb as w}from"./money-tides-app-config-B_lDikIq.js";import"./money-tides-index-Bz5uSspo.js";import"./money-tides-runtime-BTGwkf2p.js";import"./money-tides-ReactiveMap-DcqEaPSm.js";import"./money-tides-messageBundle-mChLUIbw.js";import"./money-tides-index-BSQMl5Dg.js";var A=Object.defineProperty,G=Object.getOwnPropertyDescriptor,d=(e,r,s,t)=>{for(var i=t>1?void 0:t?G(r,s):r,o=e.length-1,n;o>=0;o--)(n=e[o])&&(i=(t?n(r,s,i):n(i))||i);return t&&i&&A(r,s,i),i};const m="advisories-panel",P={content:`${m}_content`};let c=class extends g{constructor(){super(...arguments),this.displayGraphic=null,this.itemElements=new h,this.items=new h,this.loading=!1,this.state="no-advisories"}postInitialize(){this.getAdvisories()}hide(){this.visible=!1,this.items.forEach(e=>{e.clear()})}async getAdvisories(){const{itemElements:e,items:r}=this;this.loading=!0,e.removeAll(),r.removeAll();try{const s=(await f.queryFeatures({geometry:y,outFields:["*"],orderByFields:["expiration DESC"],returnGeometry:!0})).features;if(!s.length){this.state="no-advisories",this.loading=!1;return}s.forEach(t=>{this.itemElements.add(a("calcite-list-item",{afterCreate:async i=>{const o=new(await v(async()=>{const{default:n}=await import("./money-tides-AdvisoryItem-BS-nh7Ct.js");return{default:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))).default({container:i,feature:t});o.on("show-graphic",this.showGraphic.bind(this)),o.on("hide-graphic",this.hideGraphic.bind(this)),this.items.add(o)}}))}),this.state="advisories",this.loading=!1}catch(s){console.log("advisories query",s),this.state="error",this.loading=!1}}hideGraphic(){this.displayGraphic&&(l.graphics.remove(this.displayGraphic),this.displayGraphic=null)}showGraphic(e){this.displayGraphic&&l.graphics.remove(this.displayGraphic),this.displayGraphic=e,l.graphics.add(e,0),l.goTo(e)}render(){const{scale:e}=_,{itemElements:r,loading:s,state:t}=this,i=t==="no-advisories"?a("calcite-notice",{icon:"check",kind:"success",open:!0,scale:e},a("div",{slot:"message"},"No weather advisories"),a("calcite-link",{slot:"link",onclick:this.getAdvisories.bind(this)},"Refresh")):t==="advisories"?a("calcite-list",{"selection-appearance":"border","selection-mode":"single",scale:e},r.toArray()):a("calcite-notice",{icon:w.error,kind:"danger",open:!0,scale:e},a("div",{slot:"message"},"An error occurred loading weather advisories"),a("calcite-link",{slot:"link",onclick:this.getAdvisories.bind(this)},"Try again"));return a("calcite-panel",{class:this.classes(m,t!=="advisories"?P.content:""),heading:"Advisories",loading:s,scale:e},this.closeAction(),i)}};d([p()],c.prototype,"loading",2);d([p()],c.prototype,"state",2);c=d([u("AdvisoriesPanel")],c);export{c as default};
