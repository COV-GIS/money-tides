import{aG as d,aJ as v,M as c,aK as x,aL as y,m as u,b as E}from"./money-tides-jsxFactory-CmVu17M-.js";import"./money-tides-config-Dy31BTur.js";import{ap as D}from"./money-tides-app-config-dTmgntDM.js";import"./index-DWCK4KRz.js";import"./money-tides-index-Bz5uSspo.js";import"./money-tides-runtime-BTGwkf2p.js";import"./money-tides-ReactiveMap-DFuaAS07.js";import"./money-tides-messageBundle-BOeQ4wnZ.js";import"./money-tides-index-BSQMl5Dg.js";var J=Object.defineProperty,O=Object.getOwnPropertyDescriptor,m=(t,r,i,a)=>{for(var e=a>1?void 0:a?O(r,i):r,s=t.length-1,n;s>=0;s--)(n=t[s])&&(e=(a?n(r,i,e):n(e))||e);return a&&e&&J(r,i,e),e};let l=class extends d{constructor(t){super(t),this.duration={minutes:15},this.speed=400,this.initialize()}async initialize(){await v(()=>this.layer);const t=this.layer;await t.load(),this.loop(),t.refresh&&this.addHandles(t.on("refresh",()=>{clearInterval(this.interval),this.timeExtent=null,this.loop()}))}loop(){const{duration:t,fullTimeExtent:r,speed:i}=this;if(!r)return;const a=r.start,e=r.end;if(!a||!e)return;const s=c.fromJSDate(a),n=c.fromJSDate(e),p=x.fromDateTimes(s,n).splitBy(y.fromObject(t));let o=0;this.interval=setInterval(()=>{p.length===o+1&&(o=0);const{end:f,start:h}=p[o];if(!f||!h){clearInterval(this.interval),this.timeExtent=null;return}this.timeExtent=new D({start:h.toJSDate(),end:f.toJSDate()}),o++},i)}};m([u({aliasOf:"layer.timeInfo.fullTimeExtent"})],l.prototype,"fullTimeExtent",2);m([u({aliasOf:"layer.timeExtent"})],l.prototype,"timeExtent",2);l=m([E("LayerLoopController")],l);export{l as default};
