import{as as f,at as t,m as u,b as v}from"./money-tides-jsxFactory-BuZJ-lxl.js";import"./money-tides-config-Dy31BTur.js";import{v as x}from"./money-tides-app-config-MxvE8nSP.js";import"./index-BFGaZejD.js";import"./money-tides-index-Bz5uSspo.js";import"./money-tides-runtime-BTGwkf2p.js";import"./money-tides-ReactiveMap-JW3-N2B-.js";import"./money-tides-messageBundle-C4FYXWhM.js";import"./money-tides-index-BSQMl5Dg.js";var w=Object.defineProperty,$=Object.getOwnPropertyDescriptor,h=(s,a,l,r)=>{for(var e=r>1?void 0:r?$(a,l):a,n=s.length-1,o;n>=0;n--)(o=s[n])&&(e=(r?o(a,l,e):o(e))||e);return r&&e&&w(a,l,e),e};let d=class extends f{constructor(s){super(s),this.error=!1,this.items=new x}async postInitialize(){const s=this.layer,{allSublayers:a,url:l}=s;try{const r=await(await fetch(`${l}/legend?f=json`)).json();a.forEach(e=>{const{id:n,sublayers:o,title:c}=e;if(o)return;const m=r.layers.find(p=>p.layerId===n);if(m)if(m.legend.length>1){const p=m.legend.map(i=>t("div",{style:"display: flex; flex-direction: row; align-items: center; gap: 0.5rem;"},t("img",{alt:i.label,style:`width: $${i.width}px; height: ${i.height}px;`,src:`data:${i.contentType};base64,${i.imageData}`}),t("div",null,i.label)));this.items.push(t("div",{style:"display: flex; flex-direction: column; gap: 0.5rem;"},t("div",{style:"font-weight: var(--calcite-font-weight-medium);"},c),p))}else{const{contentType:p,height:i,imageData:g,width:y}=m.legend;this.items.push(t("div",{style:"display: flex; flex-direction: row; align-items: center; gap: 0.5rem;"},t("img",{alt:c,style:`width: $${y}px; height: ${i}px;`,src:`data:${p};base64,${g}`}),t("div",null,c)))}})}catch(r){console.log("map image legend",r),this.error=!0}}render(){return t("div",{style:"display: flex; flex-direction: column; gap: 0.5rem; font-size: var(--calcite-font-size-sm);"},this.items.toArray())}};h([u()],d.prototype,"error",2);d=h([v("MapImageLegend")],d);export{d as default};
