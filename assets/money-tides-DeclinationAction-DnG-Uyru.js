import{B as u,dC as v,jg as D,n as l,a as s,m,b as f}from"./index-Dc3Wb-F-.js";var g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,d=(e,n,i,o)=>{for(var t=o>1?void 0:o?y(n,i):n,a=e.length-1,c;a>=0;a--)(c=e[a])&&(t=(o?c(n,i,t):c(t))||t);return o&&t&&g(n,i,t),t};const _="declination-popover",P={content:`${_}_content`};let r=class extends u{constructor(e){super(e),this.declination="Set your compass to ???.",this.referenceElementId=""}get container(){return this._container}set container(e){this._container=e}postInitialize(){this.updateDeclination(),this.addHandles(v(()=>this.date,this.updateDeclination.bind(this)))}async updateDeclination(){try{this.declination=`Set your compass to ${(await D(this.date,44.927,-124.013)).bearing}.`}catch(e){console.log("declination update",e),this.declination="An error occurred computing declination."}}render(){return l("calcite-popover",{"auto-close":"",class:_,closable:!0,heading:"Declination","overlay-positioning":"fixed",placement:"leading",scale:s.scale,"reference-element":this.referenceElementId},l("div",{class:P.content},this.declination))}};d([m()],r.prototype,"date",2);d([m()],r.prototype,"declination",2);r=d([f("DeclinationPopover")],r);var b=Object.getOwnPropertyDescriptor,S=(e,n,i,o)=>{for(var t=o>1?void 0:o?b(n,i):n,a=e.length-1,c;a>=0;a--)(c=e[a])&&(t=c(t)||t);return t};const p="money-tides-declination-MDKHhMeEQm";let h=class extends u{constructor(e){super(e),this.declinationPopover=new r({container:document.createElement("calcite-popover"),date:s.date,referenceElementId:p})}get container(){return this._container}set container(e){this._container=e}postInitialize(){this.onClick&&this.container.addEventListener("click",this.onClick);const e=document.querySelector("calcite-shell");if(!e)return;const{declinationPopover:n}=this;e.appendChild(n.container),this.addHandles(v(()=>s.date,i=>{n.date=i}))}render(){return l("calcite-action",{icon:"explore",id:p,scale:s.scale,text:"Declination"})}};h=S([f("AboutAction")],h);export{h as default};
