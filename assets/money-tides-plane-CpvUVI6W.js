import{f2 as b,aJ as Q,aL as H,ah as s,dM as U,aH as f,dT as T,dU as y,eQ as D,a7 as O,dL as m,cO as E}from"./index-DRnqrf34.js";import{r as F,c as i,f as P}from"./money-tides-vectorStacks-C3PBt8a3.js";function tt(n){const t=n[0]*n[0]+n[4]*n[4]+n[8]*n[8],r=n[1]*n[1]+n[5]*n[5]+n[9]*n[9],u=n[2]*n[2]+n[6]*n[6]+n[10]*n[10];return Math.sqrt(Math.max(t,r,u))}function nt(n,t){const r=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),u=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),c=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return b(n,r,u,c),n}function G(n,t,r){Math.abs(n[0])>Math.abs(n[1])?b(t,0,1,0):b(t,1,0,0),Q(r,n,t),Q(t,r,n),H(r,r),H(t,t)}function rt(n,t,r,u=s()){const c=U(n),o=U(t),a=f(n,t)/(c*o);if(a<.9999999999999999){const e=Math.acos(a),h=((1-r)*c+r*o)/Math.sin(e),$=h/c*Math.sin((1-r)*e),M=h/o*Math.sin(r*e);return y(_,n,$),y(k,t,M),T(u,_,k)}return D(u,n,t,r)}const _=s(),k=s();function w(n=q){return[n[0],n[1],n[2],n[3]]}function ut(n=q[0],t=q[1],r=q[2],u=q[3]){return z(n,t,r,u,F.get())}function K(n,t){return z(t[0],t[1],t[2],t[3],n)}function ct(n){return n}function z(n,t,r,u,c=w()){return c[0]=n,c[1]=t,c[2]=r,c[3]=u,c}function N(n,t,r){const u=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],c=Math.abs(u-1)>1e-5&&u>1e-12?1/Math.sqrt(u):1;return r[0]=t[0]*c,r[1]=t[1]*c,r[2]=t[2]*c,r[3]=-(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]),r}function R(n,t,r,u=w()){const c=r[0]-t[0],o=r[1]-t[1],a=r[2]-t[2],e=n[0]-t[0],h=n[1]-t[1],$=n[2]-t[2],M=o*$-a*h,v=a*e-c*$,B=c*h-o*e,I=M*M+v*v+B*B,J=Math.abs(I-1)>1e-5&&I>1e-12?1/Math.sqrt(I):1;return u[0]=M*J,u[1]=v*J,u[2]=B*J,u[3]=-(u[0]*n[0]+u[1]*n[1]+u[2]*n[2]),u}function C(n,t,r,u=0,c=Math.floor(r*(1/3)),o=Math.floor(r*(2/3))){if(r<3)return!1;t(d,u);let a=c,e=!1;for(;a<r-1&&!e;)t(l,a),a++,e=!O(d,l);if(!e)return!1;for(a=Math.max(a,o),e=!1;a<r&&!e;)t(g,a),a++,m(x,d,l),H(x,x),m(A,l,g),H(A,A),e=!O(d,g)&&!O(l,g)&&Math.abs(f(x,A))<S;return e?(R(d,l,g,n),!0):(u!==0||c!==1||o!==2)&&C(n,t,r,0,1,2)}function et(n,t,r=!0){const u=t.length/3;return C(n,(c,o)=>b(c,t[3*o+0],t[3*o+1],t[3*o+2]),r?u-1:u)}const S=.99619469809,d=s(),l=s(),g=s(),x=s(),A=s();function at(n,t,r){return t!==n&&K(n,t),n[3]=-f(n,r),n}function ot(n,t){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function it(n,t,r,u){return Q(g,t,n),N(r,g,u)}function st(n,t,r,u){return L(j(n,t,m(i.get(),r,t),W,u))}function ft(n,t,r){return t!=null&&L(j(n,t.origin,t.direction,X,r))}function ht(n,t,r){return L(j(n,t.origin,t.vector,0,r))}function Mt(n,t,r){return L(j(n,t.origin,t.vector,1,r))}function gt(n,t){return p(n,t)>=0}function $t(n,t){const r=f(n,t.ray.direction),u=-p(n,t.ray.origin);if(u<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return u>0;if((u<0||r<0)&&!(u<0&&r<0))return!0;const c=u/r;return r>0?c<t.c1&&(t.c1=c):c>t.c0&&(t.c0=c),t.c0<=t.c1}function lt(n,t){const r=f(n,t.ray.direction),u=-p(n,t.ray.origin);if(r>-1e-6&&r<1e-6)return u>0;const c=u/r;return r>0?c<t.c1&&(t.c1=c):c>t.c0&&(t.c0=c),t.c0<=t.c1}function mt(n,t,r){const u=y(i.get(),n,-n[3]),c=V(n,m(i.get(),t,u),i.get());return T(r,c,u),r}function dt(n,t,r,u){const c=n,o=i.get(),a=i.get();G(c,o,a);const e=m(i.get(),r,t),h=P(o,e),$=P(a,e),M=P(c,e);return b(u,h,$,M)}function V(n,t,r){const u=y(i.get(),n,f(n,t));return m(r,t,u),r}function qt(n,t){return Math.abs(p(n,t))}function p(n,t){return f(n,t)+n[3]}function L(n){return n===0||n===1}function j(n,t,r,u,c){const o=f(n,r),a=p(n,t);if(o===0)return a>=0?2:3;let e=-a/o;return 1&u&&(e=E(e,0,1)),!(4&u)&&e<0||!(8&u)&&e>1?a>=0?2:3:(T(c,t,y(c,r,e)),a>=0?0:1)}const q=[0,0,1,0],W=12,X=8;export{at as G,ot as H,it as I,st as J,ft as K,ht as L,Mt as N,gt as O,$t as P,lt as Q,mt as R,C as S,dt as T,N as U,qt as W,p as X,j as Z,G as a,rt as b,ut as d,nt as g,w as j,ct as k,tt as m,z as q,R as w,K as y,et as z};
