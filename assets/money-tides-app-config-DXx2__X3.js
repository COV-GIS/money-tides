const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/money-tides-ElevationLayer-D-a94YG9.js","assets/index-COoOQZh6.js","assets/index-BU23byjB.css","assets/money-tides-jsxFactory-Citpbvhe.js","assets/money-tides-runtime-BAFbAsol.js","assets/runtime-OCMtRbrJ.css","assets/money-tides-ArcGISCachedService-S2iC1b1I.js","assets/money-tides-TileInfoTilemapCache-Dre6oK3k.js","assets/money-tides-TilemapCache-k_naRonu.js","assets/money-tides-WorkerHandle-B2Bz6JK0.js","assets/money-tides-ReactiveMap-B6WeoYy4.js","assets/money-tides-messageBundle-DK3KoGCk.js","assets/money-tides-index-BSQMl5Dg.js","assets/money-tides-resourceUtils-B6q7PpjC.js","assets/money-tides-portalLayers-D5TuW1js.js","assets/money-tides-associatedFeatureServiceUtils-CmHXo_uf.js","assets/money-tides-fetchService-qNABZvoT.js","assets/money-tides-loadUtils-TrrFrJ1P.js","assets/money-tides-lazyLayerLoader-kD0S3Rkd.js","assets/money-tides-arcgisLayers-CspNXQgP.js","assets/money-tides-layersCreator-DHCAe1K2.js","assets/money-tides-ElevationQuery-Bw0VDQbg.js","assets/money-tides-GeometryDescriptor-DjpB2K2X.js","assets/money-tides-projectOperator-DXmDC2JV.js","assets/money-tides-operatorProject-Csgo8oOk.js","assets/money-tides-SimpleGeometryCursor-B92kdZ15.js","assets/money-tides-projectOperator-DzwxYkBD.js","assets/money-tides-geographicTransformationUtils-_Hwa5_Me.js","assets/money-tides-statsWorker-BiDAvyLU.js","assets/money-tides-utils-DnpeYjIw.js","assets/money-tides-quantizationUtils-Bs_H6Iwy.js","assets/money-tides-utils-DOMF_tMH.js","assets/money-tides-utils-DGZvM_8W.js","assets/money-tides-ClassBreaksDefinition-eqUn1tzo.js","assets/money-tides-geometryEngineWorker-CHAqrl2R.js","assets/money-tides-geometryEngineJSON-54zXaibM.js","assets/money-tides-geometryEngineBase-DmwRqPrZ.js","assets/money-tides-_commonjsHelpers-DCkdB7M8.js","assets/money-tides-operatorsWorker-D8jyWG1a.js","assets/money-tides-CSVSourceWorker-BGZ4r_OO.js","assets/money-tides-date-DCujAECq.js","assets/money-tides-FeatureStore-Dlgvdh2H.js","assets/money-tides-BoundsStore-C_83BrDC.js","assets/money-tides-PooledRBush-XyNgf43N.js","assets/money-tides-timeSupport-f9iAuRTK.js","assets/money-tides-queryUtils-Cm43cK9l.js","assets/money-tides-optimizedFeatureQueryEngineAdapter-C1kwHXIY.js","assets/money-tides-QueryEngine-BqDfGdOj.js","assets/money-tides-WhereClauseCache-DLuDDB8N.js","assets/money-tides-WhereClause-DjfuXMo4.js","assets/money-tides-QueryEngineCapabilities-DJC_YILC.js","assets/money-tides-SnappingCandidate-DGkpYqI6.js","assets/money-tides-FixedIntervalBinParameters-BMkKDGBJ.js","assets/money-tides-number-B6LwH93i.js","assets/money-tides-locationUtils-B6O2mPga.js","assets/money-tides-clientSideDefaults-BuJTDG2_.js","assets/money-tides-EdgeProcessingWorker-CWkTTWY_.js","assets/money-tides-workerHelper-PAOKZl6z.js","assets/money-tides-InterleavedLayout-BA6e8S0j.js","assets/money-tides-BufferView-DfQkuz17.js","assets/money-tides-types-BKo2foNY.js","assets/money-tides-VertexElementDescriptor-BLyltQyJ.js","assets/money-tides-VertexAttributeLocations-BfZbt_DV.js","assets/money-tides-edgeProcessing-CIwnQlTy.js","assets/money-tides-deduplicate-B4c9uQIP.js","assets/money-tides-Indices-DRGCIkB9.js","assets/money-tides-Normals--mAe2W_Y.js","assets/money-tides-ElevationSamplerWorker-B7QIqfxj.js","assets/money-tides-MeshLocalVertexSpace-BYHL8saD.js","assets/money-tides-vertexSpaceConversion-qCFmVPhT.js","assets/money-tides-spatialReferenceEllipsoidUtils-Cx7wHdYW.js","assets/money-tides-computeTranslationToOriginAndRotation-p2cNBFld.js","assets/money-tides-projectPointToVector-D4BmIWun.js","assets/money-tides-meshVertexSpaceUtils-Djy58z0I.js","assets/money-tides-vec3-j5mnkvQI.js","assets/money-tides-vec4-Dub09r0Y.js","assets/money-tides-FeatureServiceSnappingSourceWorker-SXJtMKeA.js","assets/money-tides-symbologySnappingCandidates-BBh7MXJ9.js","assets/money-tides-GeoJSONSourceWorker-B_PUMhYG.js","assets/money-tides-geojson-DLTDNYfj.js","assets/money-tides-sourceUtils-C8Fh9ucn.js","assets/money-tides-LercWorker-VzU_Lv4k.js","assets/money-tides-MemorySourceWorker-DHoHwL0V.js","assets/money-tides-objectIdUtils-BmFjqQA3.js","assets/money-tides-PBFDecoderWorker-C7I6R6vp.js","assets/money-tides-dehydratedFeatures-CATU54gZ.js","assets/money-tides-FeaturePipelineWorker-Y8ZEO9zY.js","assets/money-tides-AttributeStore-BHFf4KEe.js","assets/money-tides-Utils-CUBm8MEw.js","assets/money-tides-BoundingBox-DK7jKCyG.js","assets/money-tides-UpdateTracking2D-CVhaDuUI.js","assets/money-tides-FeatureStoreQueryAdapter-YXdwLPa7.js","assets/money-tides-labelPoint-CXF5Ghcw.js","assets/money-tides-constants-BBnGEY1d.js","assets/money-tides-streamLayerUtils-DFlbJ4P1.js","assets/money-tides-MeshWriterRegistry-DEzZQPET.js","assets/money-tides-rasterizingUtils-St_WP2Oo.js","assets/money-tides-CIMSymbolHelper-i_W39bRu.js","assets/money-tides-BidiEngine-BvER9tXK.js","assets/money-tides-GeometryUtils-B0kv5MQD.js","assets/money-tides-Rect-CUzevAry.js","assets/money-tides-TexturedLineMeshWriter-DX0nidVs.js","assets/money-tides-TurboLine-DpidcCax.js","assets/money-tides-grouping-v6CfYsbR.js","assets/money-tides-QueueProcessor-B3BH5c86.js","assets/money-tides-FeatureMetadata-he8YYr_7.js","assets/money-tides-SourceChunkStore-BLw2Hk_v.js","assets/money-tides-parquet-DPKJ9DoV.js","assets/money-tides-operatorGeodeticDensify-B0RPJhRz.js","assets/money-tides-geodeticCurveType-CirnHLSB.js","assets/money-tides-normalizeUtilsSync-CwhIaHpj.js","assets/money-tides-FeatureIdInfo-DkxxtUyv.js","assets/money-tides-ogcFeatureUtils-BJ7n8R-0.js","assets/money-tides-CircularArray-CujHzHWW.js","assets/money-tides-createConnection-BCq3TdlX.js","assets/money-tides-PointCloudWorker-BckpAiiF.js","assets/money-tides-quat-BJaibM4r.js","assets/money-tides-quatf64-aQ5IuZRd.js","assets/money-tides-vec3f32-WCVSSNPR.js","assets/money-tides-PointCloudUniqueValueRenderer-CAS9nQlz.js","assets/money-tides-I3SBinaryReader-W7u6OgYE.js","assets/money-tides-orientedBoundingBox-Dv7ndcrm.js","assets/money-tides-plane-B_hp7Gi6.js","assets/money-tides-vectorStacks-Brp1mBxE.js","assets/money-tides-RasterWorker-DUevc9wL.js","assets/money-tides-PixelBlock-uENnENyJ.js","assets/money-tides-RasterSymbolizer-DR1BfR9G.js","assets/money-tides-vectorFieldUtils-xoVKwgGa.js","assets/money-tides-colorUtils-MsJV8_HA.js","assets/money-tides-rasterFunctionHelper-Ccxf2XL6.js","assets/money-tides-clipUtils-DqQYIj23.js","assets/money-tides-rasterProjectionHelper-CXBsu7z0.js","assets/money-tides-PolynomialTransform-J4HAa7io.js","assets/money-tides-dataUtils-BrQSf_-_.js","assets/money-tides-SceneLayerSnappingSourceWorker-D9AZdGP7.js","assets/money-tides-lineSegment-BAL2BRp2.js","assets/money-tides-sphere-DszLoMwF.js","assets/money-tides-Octree-DkN9VIjf.js","assets/money-tides-frustum-YhLQXM2s.js","assets/money-tides-SceneLayerWorker-BCQyl1Fg.js","assets/money-tides-projectVectorToVector-CLqdHWrr.js","assets/money-tides-WFSSourceWorker-BTQtEwCz.js","assets/money-tides-wfsUtils-DN3oPGci.js","assets/money-tides-xmlUtils-CtUoQO7q.js","assets/money-tides-WorkerTileHandler-DeBcLvhz.js","assets/money-tides-constants-BHYAGdRm.js","assets/money-tides-config-BOD8--da.js","assets/money-tides-SourceLayerData-TZOPMEam.js","assets/money-tides-StyleRepository-BnP3U4y2.js","assets/money-tides-earcut-D9gy186-.js","assets/money-tides-Lyr3DWorker-DpqEwZV1.js","assets/money-tides-Feature3DPipelineWorker-ButrSbUy.js","assets/money-tides-HUDMaterial.glsl-UX_ZvSow.js","assets/money-tides-hydratedFeatures-DWfRkQbx.js","assets/money-tides-OutputColorHighlightOID.glsl-Dvf1vhg_.js","assets/money-tides-triangle-BvXKnfuE.js","assets/money-tides-renderState-CKc66y4x.js","assets/money-tides-glsl-B5bJgrnA.js","assets/money-tides-ShaderBuilder-BwuGfbH_.js","assets/money-tides-placementUtils-iqy0Z4WX.js","assets/money-tides-sdfPrimitives-Cc0F3Oqc.js","assets/money-tides-Texture-WzIcL1cS.js","assets/money-tides-videoUtils-C9c53BxT.js","assets/money-tides-requestImageUtils-Cq0SnhhK.js","assets/money-tides-RealisticTree.glsl-DyE67pnH.js","assets/money-tides-DefaultMaterial-yzjdey87.js","assets/money-tides-VertexBuffer-UMrTTJVm.js","assets/money-tides-BufferObject-BfXTNRyB.js","assets/money-tides-boundedPlane-DLW0q9As.js","assets/money-tides-TextureCompressionWorker-DISTfSQI.js","assets/money-tides-FlowWorker-CocNRPZD.js","assets/money-tides-ParquetSourceWorker-DyaxSVrA.js","assets/money-tides-parquetUtils-B6caWqHq.js","assets/money-tides-PanoramicMeshWorker-DWbDBhFe.js","assets/money-tides-Popup-DWpnlVjM.js","assets/money-tides-throttle-EMtxu2ar.js","assets/money-tides-substitute-CV_0y28i.js","assets/money-tides-unitFormatUtils-BNbsQHnn.js","assets/money-tides-quantityUtils-njVrW101.js","assets/money-tides-AttachmentInfo-DywgwIaM.js","assets/money-tides-featureUtils-DlpwxlcS.js","assets/money-tides-utils-7lJhi-UE.js","assets/money-tides-cimSymbolUtils-BCP5WlH1.js","assets/money-tides-shared-CFPF2VPc.js","assets/money-tides-isImageryGraphicOrigin-Ccuhb4eK.js","assets/money-tides-isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/money-tides-NetworkElement-DbdtfbUJ.js","assets/money-tides-ReactiveSet-DJaJL9gR.js","assets/money-tides-symbolUtils-CYFlLf50.js","assets/money-tides-layerViewUtils-Dn0KuFSn.js","assets/money-tides-arcadeUtils-B8DUs4kg.js","assets/money-tides-arcade-Ckdp9U0Y.js","assets/money-tides-arcadeEnvironment-DA47GHTx.js","assets/money-tides-Dictionary-CqJO4MQb.js","assets/money-tides-ImmutableArray-BPVd6ESQ.js","assets/money-tides-Feature-B-Zov6yn.js","assets/money-tides-aiServices-Y3LyI1Tz.js","assets/money-tides-commonProperties-DHiB1uzW.js","assets/money-tides-unitConversion-BtPE5CDJ.js","assets/money-tides-rasterFieldUtils--yefuBig.js","assets/money-tides-batchExec-nvTlymGh.js","assets/money-tides-webStyleSymbolUtils-SZ7aehUe.js","assets/money-tides-devEnvironmentUtils-8WtPGj6h.js","assets/money-tides-geometryServiceUtils-d45A9lBX.js","assets/money-tides-project-B6Gw-v3Z.js","assets/money-tides-IdentityManager-DiwRQQCB.js","assets/money-tides-webglDeps-CP2iS7z_.js","assets/money-tides-FramebufferObject-g2nPkfSo.js","assets/money-tides-ProgramTemplate-CBgZW8xu.js","assets/money-tides-VertexArrayObject-DO8MBQMT.js","assets/money-tides-mapViewDeps-BOMzrb0W.js","assets/money-tides-FeatureCommandQueue-Dijt3V6p.js","assets/money-tides-GraphShaderModule-CR7HPRgR.js","assets/money-tides-utils-B1exUpfo.js","assets/money-tides-WGLContainer-D0XV_83I.js","assets/money-tides-Container-CZGBDVXj.js","assets/money-tides-SDFHelper-BGJ7vYhX.js","assets/money-tides-OverrideHelper-FtH07tp0.js","assets/money-tides-callExpressionWithFeature-BKXEAeuD.js","assets/money-tides-GridShader-CMSp7fcf.js","assets/money-tides-testSVGPremultipliedAlpha-4h5-36_c.js","assets/money-tides-SymbolFader-ZbSqInQa.js","assets/money-tides-RenderingContext--TfF9Tbk.js","assets/money-tides-CIMResourceManager-B-pu3wXq.js","assets/money-tides-utils-Bol_Otpw.js","assets/money-tides-utils-DDjZAYSk.js","assets/money-tides-GraphicsView2D-ClgjusPN.js","assets/money-tides-GraphicContainer-D8qB-H8Q.js","assets/money-tides-AGraphicContainer-DdEpDt6O.js","assets/money-tides-TechniqueInstance-DFaqhL4L.js","assets/money-tides-TileContainer-DwNg2Mfb.js","assets/money-tides-gridUtils-rMsaV7K3.js","assets/money-tides-geodesicUtils-CCzrbMJO.js","assets/money-tides-TileLayerView2D-Cx_d73n8.js","assets/money-tides-imageUtils-CBp2z2FG.js","assets/money-tides-BitmapTechnique-BnSimW0-.js","assets/money-tides-bitmapUtils-FJgUGAY_.js","assets/money-tides-LayerView2D-sThs2ii-.js","assets/money-tides-HighlightGraphicContainer-DChBK7CF.js","assets/money-tides-LayerView-CuXN8jjn.js","assets/money-tides-RefreshableLayerView-BUid_ZLV.js","assets/money-tides-MapServiceLayerViewHelper-BDL0cYnn.js","assets/money-tides-drapedUtils-CAE3UKv0.js","assets/money-tides-popupUtils-dQtmCKuL.js","assets/money-tides-highlightOptionsUtils-RuuZLy0q.js","assets/money-tides-FeatureLayerView2D-BRkNoNWP.js","assets/money-tides-timeSupport-fBCPMqFX.js","assets/money-tides-AttributeBinsFeatureSet-B8rZwp2f.js","assets/money-tides-AttributeBinsQuery-Bash3wb-.js","assets/money-tides-constants-SxxbBSOD.js","assets/money-tides-BaseDynamicLayerView2D-rSUeHTiR.js","assets/money-tides-BitmapContainer-CauNTaZd.js","assets/money-tides-ExportStrategy-CkaQlb6d.js","assets/money-tides-CatalogLayerView2D-Dcx99u4u.js","assets/money-tides-CatalogDynamicGroupLayerView2D-Bkl9h1X6.js","assets/money-tides-CatalogFootprintLayerView2D-CKsZdK7g.js","assets/money-tides-GeoRSSLayerView2D-D94c8vIW.js","assets/money-tides-GraphicsLayerView2D-DT86CPBg.js","assets/money-tides-GroupLayerView2D-CwmIS390.js","assets/money-tides-ImageryLayerView2D-BI_Zussy.js","assets/money-tides-RasterVFDisplayObject-BbXzX4JP.js","assets/money-tides-ImageryTileLayerView2D-BPu-d4ns.js","assets/money-tides-datasetUtils-CuJrx-mT.js","assets/money-tides-rasterUtils-D4N7gK9S.js","assets/money-tides-RawBlockCache-BJnbtmg5.js","assets/money-tides-KMLLayerView2D-Bu2CkgXq.js","assets/money-tides-kmlUtils-DLGLOXij.js","assets/money-tides-KnowledgeGraphLayerView2D-DlD9ErUo.js","assets/money-tides-MapImageLayerView2D-DTl0quNR.js","assets/money-tides-MapNotesLayerView2D-BdhfpiKc.js","assets/money-tides-MediaLayerView2D-98ERxWSM.js","assets/money-tides-mediaLayerUtils-CM8Yw_SL.js","assets/money-tides-OverlayContainer-BTBOcMZm.js","assets/money-tides-OGCFeatureLayerView2D-DT1dYC23.js","assets/money-tides-RouteLayerView2D-Buc269aU.js","assets/money-tides-Stop-DaOmBTkU.js","assets/money-tides-networkEnums-DWGU-d0e.js","assets/money-tides-StreamLayerView2D-tjzhRfIf.js","assets/money-tides-SubtypeGroupLayerView2D-B9Tinxlr.js","assets/money-tides-VectorTileLayerView2D-CVJoOQT4.js","assets/money-tides-VideoLayerView2D-BKAOG2Bq.js","assets/money-tides-GraphicsLayer-D2TXzxmP.js","assets/money-tides-videoUtils-BgPkgkwz.js","assets/money-tides-ControlPoint-CxsmgBOA.js","assets/money-tides-WMSLayerView2D-DTOfKswN.js","assets/money-tides-WMTSLayerView2D-hypV0kBQ.js","assets/money-tides-ElevationProfileAnalysisView2D-D7XyvurL.js","assets/money-tides-createUtils-CrnNmKSN.js","assets/money-tides-distanceOperator-D2XkKbDq.js","assets/money-tides-Point2D-B_0jPIXb.js","assets/money-tides-Distance2DCalculator-CXhBP-8I-DCLrMf5I.js","assets/money-tides-ProjectionTransformation-BPOO9-D7.js","assets/money-tides-Envelope2D-CT8brdER.js","assets/money-tides-Transformation2D-FgOqqMH4.js","assets/money-tides-OperatorDefinitions-DP7_WWTp.js","assets/money-tides-apiConverter-C5rg8hxg.js","assets/money-tides-jsonConverter-C1XgA8gE.js","assets/money-tides-simplifyOperator-DdjyGyCD.js","assets/money-tides-operatorSimplify-PBquHj5M.js","assets/money-tides-mapCollectionUtils-CUgDuZBN.js","assets/money-tides-elevationInfoUtils-5z7cizy2.js","assets/money-tides-getDefaultUnitForView-CDYSGNC-.js","assets/money-tides-SketchViewModel-D3s1EwLp.js","assets/money-tides-hitTestSelectUtils-CzvNBqts.js","assets/money-tides-geodeticLengthOperator-DN4JXCZ4.js","assets/money-tides-gif-C1qhXrqx.js","assets/money-tides-apng-Du6hhFLH.js","assets/money-tides-index-CE4l1I6I.js","assets/money-tides-index-B9ADEKcC.js","assets/money-tides-guid-LcV_DAvu.js","assets/money-tides-useT9n-kl1zaFT8.js","assets/money-tides-index-C0WSq7Le.js","assets/money-tides-index-PnnliBx6.js","assets/money-tides-dom-CoLM1kLo.js","assets/money-tides-observers-B_WRqHrs.js","assets/money-tides-ref-Btw-0wRC.js","assets/money-tides-static-Bx0363li.js","assets/money-tides-form-C7FBnNrt.js","assets/money-tides-interactive-l3Nsu-Ej.js","assets/money-tides-label-CauZHyiI.js","assets/money-tides-useSetFocus-BIw1doH4.js","assets/money-tides-deleteForwardEdits-BD9n_t9n.js","assets/money-tides-DeleteForwardEditsParameters-BtQo1yTJ.js","assets/money-tides-editingSupport-BGrt_oPJ.js","assets/money-tides-layersLoader-B1h7T38X.js","assets/money-tides-jsonContext-B_B3c0BA.js","assets/money-tides-featureLayerUtils-Da6-Z2PF.js","assets/money-tides-originUtils-1m6y23j5.js","assets/money-tides-utils-BO_jZJLl.js","assets/money-tides-saveUtils-DMk_yaEB.js","assets/money-tides-FeatureLayerSource-DTGzMExS.js","assets/money-tides-External-D8vDXfki.js","assets/money-tides-MeshTransform-Bh0msBbD.js","assets/money-tides-axisAngleDegrees-CQ4Z5JEN.js","assets/money-tides-PivotQuery-COvS2xqy.js","assets/money-tides-TopFeaturesQuery-DZbE2EnP.js","assets/money-tides-meshFeatureSet-CeqOQLsH.js","assets/money-tides-Mesh-CFCUD3Ag.js","assets/money-tides-MeshComponent-DYrvwklR.js","assets/money-tides-meshProperties-DWLWd_LJ.js","assets/money-tides-MeshVertexAttributes-CyyW33fT.js","assets/money-tides-triangulationUtils-Bqu_831H.js","assets/money-tides-meshFeatureAttributes-Dwi1HA-Y.js","assets/money-tides-executeRelationshipQuery-iSeXyIMC.js","assets/money-tides-queryAttachments-CeztIBdg.js","assets/money-tides-executeAttributeBinsQuery-BCdeIXKI.js","assets/money-tides-executePivotQuery-Br-1fOvN.js","assets/money-tides-executeTopFeaturesQuery-D8Bl-wde.js","assets/money-tides-queryTopFeatures-DyV-4dDi.js","assets/money-tides-executeForTopIds-CqH5JTa7.js","assets/money-tides-executeForTopExtents-BbKq7d2p.js","assets/money-tides-executeForTopCount-CLrte_k6.js","assets/money-tides-mapImageLayerUtils-DGLaJTS8.js"])))=>i.map(i=>d[i]);
import{a8 as S2,_ as a,w as Zr,dh as al,a5 as me,a1 as Br,e as P,K as Z5,D as uh,aD as x2,cL as ls,f as _,m as u,aE as hs,A as J5,s as M,bw as ll,di as Q5,b0 as Z,z as $c,y as Ze,j as ki,aS as Db,dj as Y5,b9 as ft,c as re,M as Sl,ai as Wt,ba as ve,i as N,aw as xe,be as Vr,g as be,ae as qr,a9 as st,dk as bR,b as Re,k as dt,an as zs,B as Mt,as as qn,H as Le,dl as Qy,aY as Wc,cE as _R,F as Tc,dm as SR,bG as K5,aC as La,cd as xR,dn as $R,ci as Hn,cj as ul,Y as Ad,a6 as Pe,cD as Mc,dp as TR,dq as ch,cM as jb,bV as Vb,a0 as fi,I as Hs,af as ae,ah as Dr,dr as Yy,O as zb,ds as b4,bp as S9,dt as X5,cS as qb,aU as It,du as MR,bm as hi,ca as $2,dv as IR,a4 as Ub,dw as ER,aX as Ld,aW as Li,cF as PR,bu as eg,bT as tg,dx as RR,aQ as rg,a3 as cl,dy as OR,dz as CR,h as Gb,cm as Ky,Z as x9,aT as ph,E as Sr,ab as ji,dA as Bb,bd as ig,$ as Jo,bb as sg,dB as kR,bA as $9,ag as or,aa as ys,bt as T9,dC as Wb,dD as M9,d5 as Ic,dE as FR,dF as AR,dG as I9,dH as LR,bW as ng,dI as NR,b4 as DR,b5 as Xy,dJ as jR,bY as Hb,b8 as Hr,dK as VR,J as zR,ax as Zb,ay as Jb,bq as Nd,dL as Qb,bS as Dd,c4 as Yb,o as Kb,a$ as E9,cv as qR,c5 as dh,bh as UR,dM as GR,N as mi,av as hh,d as P9,dN as BR,a2 as Xb,aG as WR,dO as yh,p as Ec,ct as _p,c2 as HR,bc as og,b7 as ZR,dP as JR,dQ as QR,bg as e_,dR as _4,L as We,dS as YR,dT as KR,ao as jd,b3 as Ei,bR as oi,bQ as XR,d7 as eO,aB as t_,bJ as tO,dU as T2,dV as R9,dW as rO,dX as iO,d2 as sO,dY as nO,aO as M2,aP as Ur,c6 as ag,dZ as oO,cc as aO,d_ as lO,d$ as ef,aV as B0,c8 as O9,e0 as C9,a7 as uO,bU as cO,e1 as pO,bB as dO,e2 as I2,e3 as r_,bf as hO,b$ as yO,e4 as fO,e5 as mO,a_ as i_,aJ as S4,e6 as gO,e7 as vO,cC as s_,e8 as wO,e9 as bO,b1 as lg,ea as _O,bk as SO,bl as xO,aZ as $O,ad as k9,eb as TO,az as MO,cH as IO,bn as EO}from"./money-tides-jsxFactory-Citpbvhe.js";import{_ as L}from"./index-COoOQZh6.js";import{b as n_,a as Vd,r as Pc,s as ju}from"./money-tides-ReactiveMap-B6WeoYy4.js";import{n as A,a as xl,s as PO,e as E2,t as RO,u as OO,g as CO,b as o_,d as kO}from"./money-tides-messageBundle-DK3KoGCk.js";const a_="20251114",l_="ec088c999de2dac6fb9478a47da1bad775545540";function ug(t){return(e,r)=>{e[r]=t}}var rn;let FO=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},AO=class{constructor(e,r,i,s,n){this.target=e,this.added=r,this.removed=i,this.start=s,this.deleteCount=n}};const bi=new x2(()=>new FO,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function F9(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function x4(t){return t?t instanceof xo?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function $4(t){if(t?.length)return t[0]}function LO(t,e,r,i){const s=Math.min(t.length-r,e.length-i);let n=0;for(;n<s&&t[r+n]===e[i+n];)n++;return n}function u_(t,e,r,i){e&&e.forEach((s,n,o)=>{t.push(s),u_(t,r.call(i,s,n,o),r,i)})}const ro=new Set,io=new Set,so=new Set,T4=new Map;let NO=0,xo=rn=class extends S2{static ofType(t){if(!t)return rn;if(T4.has(t))return T4.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const i in t.typeMap){const s=t.typeMap[i].prototype.declaredClass;e?e+=` | ${s}`:e=s}let r=class extends rn{};return a([ug({Type:t,ensureType:typeof t=="function"?Zr(t):al(t)})],r.prototype,"itemType",void 0),r=a([_(`esri.core.Collection<${e}>`)],r),T4.set(t,r),r}static isCollection(t){return t!=null&&t instanceof rn}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new n_,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:NO++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof rn?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return me(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,x4(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Br();if(t==="change"){const r=this._chgListeners,i={removed:!1,callback:e};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Br(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return super.on(t,e)}once(t,e){const r="deref"in e?()=>e.deref():()=>e,i=this.on(t,s=>{r()?.call(null,s),i.remove()});return i}add(t,e){if(me(this._observable),this._emitBeforeChanges(1))return this;const r=this.getNextIndex(e??null);return this._splice(r,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(me(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(e);return this._splice(r,0,x4(t)),this._emitAfterChanges(1),this}at(t){if(me(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(me(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return me(this._observable),this._createNewInstance({items:this._items.map(P)})}concat(...t){me(this._observable);const e=t.map(x4);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(me(this._observable),!this.length||this._emitBeforeChanges(2))return;const r=this._splice(0,this.length),i=r.length;for(let s=0;s<i;s++)t.call(e,r[s],s,r);this._emitAfterChanges(2)}destroyAll(){this.drain(F9)}destroyMany(t){const e=this.removeMany(t);return e.forEach(F9),e}every(t,e){return me(this._observable),this._items.every(t,e)}filter(t,e){me(this._observable);const r=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:r})}find(t,e){return me(this._observable),this._items.find(t,e)}findIndex(t,e){return me(this._observable),this._items.findIndex(t,e)}flatten(t,e){me(this._observable);const r=[];return u_(r,this,t,e),new rn(r)}forEach(t,e){return me(this._observable),this._items.forEach(t,e)}getItemAt(t){return me(this._observable),this._items[t]}getNextIndex(t){me(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return me(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return me(this._observable),this._items.indexOf(t,e)}join(t=","){return me(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return me(this._observable),this._items.lastIndexOf(t,e)}map(t,e){me(this._observable);const r=this._items.map(t,e);return new rn({items:r})}reorder(t,e=this.length-1){me(this._observable);const r=this.indexOf(t);if(r!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),r!==e){if(this._emitBeforeChanges(4))return t;this._splice(r,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(me(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=$4(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return me(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){me(this._observable);const r=this._items;return arguments.length===2?r.reduce(t,e):r.reduce(t)}reduceRight(t,e){me(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(t,e):r.reduceRight(t)}remove(t){return me(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(me(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=$4(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(me(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof rn?t.toArray():t,r=this._items,i=[],s=e.length;for(let n=0;n<s;n++){const o=e[n],l=r.indexOf(o);if(l>-1){const c=1+LO(e,r,n+1,l+1),d=this._splice(l,c);d&&d.length>0&&i.push.apply(i,d),n+=c-1}}return this._emitAfterChanges(2),i}reverse(){if(me(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(me(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=$4(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return me(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return me(this._observable),this._items.some(t,e)}sort(t){if(me(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,r)=>e===r?0:e<r?-1:1){const e=this.length-1;for(let r=0;r<e;r++)if(t(this.items[r],this.items[r+1])>0)return!0;return!1}splice(t,e,...r){me(this._observable),arguments.length===1&&(e=this.length),e??=0;const i=(e?2:0)|(r.length?1:0);if(this._emitBeforeChanges(i))return[];const s=this._splice(t,e,r)||[];return this._emitAfterChanges(i),s}toArray(){return me(this._observable),this._items.slice()}toJSON(t){return me(this._observable),this.toArray().map(e=>Z5(e)?e.toJSON(t):e)}toLocaleString(){return me(this._observable),this._items.toLocaleString()}toString(){return me(this._observable),this._items.toString()}unshift(...t){return me(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,r){const i=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=uh(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=i.splice(t,e),this.hasEventListener("before-remove")){const l=bi.acquire();l.target=this,l.cancellable=!0;for(let c=0,d=o.length;c<d;c++)n=o[c],l.reset(n),this.emit("before-remove",l),l.defaultPrevented&&(o.splice(c,1),i.splice(t,0,n),t+=1,c-=1,d-=1);bi.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=bi.acquire();l.target=this,l.cancellable=!1;const c=o.length;for(let d=0;d<c;d++)l.reset(o[d]),this.emit("after-remove",l);bi.release(l)}}if(r?.length){if(s){const h=[];for(const y of r){const f=s.ensureType(y);f==null&&y!=null||h.push(f)}r=h}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),d=t===this.length;if(l||c){const h=bi.acquire();h.target=this,h.cancellable=!0;const y=bi.acquire();y.target=this,y.cancellable=!1;for(const f of r)l?(h.reset(f),this.emit("before-add",h),h.defaultPrevented||(d?i.push(f):i.splice(t++,0,f),this._set("length",i.length),c&&(y.reset(f),this.emit("after-add",y)))):(d?i.push(f):i.splice(t++,0,f),this._set("length",i.length),y.reset(f),this.emit("after-add",y));bi.release(y),bi.release(h)}else{if(d)for(const h of r)i.push(h);else i.splice(t,0,...r);this._set("length",i.length)}}if((r?.length||o?.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const l=new AO(this,r,o,t,e);this.emit("after-splice",l)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const r=bi.acquire();r.target=this,r.cancellable=!0,r.type=t,this.emit("before-changes",r),e=r.defaultPrevented,bi.release(r)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=bi.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),bi.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const r=e.changes;ro.clear(),io.clear(),so.clear();for(const{added:c,removed:d}of r){if(c)if(so.size===0&&io.size===0)for(const h of c)ro.add(h);else for(const h of c)io.has(h)?(so.add(h),io.delete(h)):so.has(h)||ro.add(h);if(d)if(so.size===0&&ro.size===0)for(const h of d)io.add(h);else for(const h of d)ro.has(h)?ro.delete(h):(so.delete(h),io.add(h))}const i=ls.acquire();ro.forEach(c=>{i.push(c)});const s=ls.acquire();io.forEach(c=>{s.push(c)});const n=this._items,o=e.items,l=ls.acquire();if(so.forEach(c=>{o.indexOf(c)!==n.indexOf(c)&&l.push(c)}),e.listeners&&(i.length||s.length||l.length)){const c={target:this,added:i,removed:s,moved:l},d=e.listeners.length;for(let h=0;h<d;h++){const y=e.listeners[h];y.removed||y.callback.call(this,c)}}ls.release(i),ls.release(s),ls.release(l)}ro.clear(),io.clear(),so.clear()}};a([u()],xo.prototype,"_updating",void 0),a([u()],xo.prototype,"length",void 0),a([u()],xo.prototype,"items",null),a([u({readOnly:!0})],xo.prototype,"updating",null),xo=rn=a([_("esri.core.Collection")],xo);const q=xo;function qs(t,e,r=q){return e||(e=new r),e===t||e.destroyed||(e.removeAll(),DO(t)?e.addMany(t):t&&e.add(t)),e}function c_(t){return t}function DO(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const jO="not-loaded",VO="loading",zO="failed",A9="loaded",p_=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const n=this.load.bind(this);this.load=o=>{const l=new Promise((c,d)=>{const h=J5(o,d);this.destroyed&&d(new M("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(c,d).finally(()=>{h&&h.remove()})});if(this.loadStatus===jO){this._set("loadStatus",VO);const c=this._loadController=new AbortController;n({signal:c.signal})}return s(),l}})),this.when(()=>{this._set("loadStatus",A9),this._loadController=null},s=>{this.destroyed||(this._set("loadStatus",zO),this._set("loadError",s),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=ll(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===A9}get loadWarnings(){return this._get("loadWarnings")}load(i){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new M("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return a([u({readOnly:!0})],r.prototype,"loaded",null),a([u({readOnly:!0})],r.prototype,"loadError",void 0),a([u({clonable:!1})],r.prototype,"loadStatus",void 0),a([u({type:[hs],readOnly:!0})],r.prototype,"loadWarnings",null),r=a([_("esri.core.Loadable")],r),r},Hc=p_(Q5);function tf(t){return!(!t||!t.load)}function Zre(t,e,r){return Db(t.map((i,s)=>e.apply(r,[i,s])))}async function qO(t,e,r){return(await Db(t.map((i,s)=>e.apply(r,[i,s])))).map(i=>i.value)}function cg(t){return{ok:!0,value:t}}function pg(t){return{ok:!1,error:t}}function UO(t){return t!=null&&t.ok===!0?t.value:null}function GO(t){return t!=null&&t.ok===!1?t.error:null}async function P2(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return cg(await t)}catch(e){return pg(e)}}async function BO(t){try{return cg(await t)}catch(e){return ki(e),pg(e)}}function fh(t,e){return new co(t,e)}let co=class extends Z{get value(){return UO(this._result)}get error(){return GO(this._result)}get finished(){return this._result!=null}constructor(e,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=ll(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=e(i),this.promise.then(s=>{this._result=cg(s),this._cleanup()},s=>{this._result=pg(s),this._cleanup()}),this._abortHandle=$c(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Ze(this._abortHandle),this._abortController=null}};a([u()],co.prototype,"value",null),a([u()],co.prototype,"error",null),a([u()],co.prototype,"finished",null),a([u()],co.prototype,"promise",void 0),a([u()],co.prototype,"_result",void 0),co=a([_("esri.core.asyncUtils.ReactiveTask")],co);async function dg(t,e){return await t.load(),WO(t,e)}async function WO(t,e){const r=[],i=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?i(...o):q.isCollection(o)?o.forEach(l=>i(l)):tf(o)&&r.push(o))};e(i);let s=null;if(await qO(r,async n=>{const o=await P2(HO(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return t}function HO(t){return"loadAll"in t&&typeof t.loadAll=="function"}function j(t,e,r){let i,s;return e===void 0?(s=t,i=[void 0]):typeof e!="string"?(s=t,i=[void 0],r=e):(s=e,i=Array.isArray(t)?t:[t]),(n,o)=>{const l=n.constructor.prototype;for(const c of i){const d=Y5(n,c,s);d.write&&typeof d.write=="object"||(d.write={}),r&&(d.write.target=r),d.write.writer=l[o]}}}let hg=class{constructor(e,r,i,s,n,o){this.semiMajorAxis=e,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=s,this.scaleHeight=n;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Qe=new hg(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Us=new hg(3396190,1/169.8944472236118,23e4,6e4,.111),Uo=new hg(1737400,0,0,0,0);let M4,I=null;function d_(){return!!I}function ZO(){return!!re("esri-wasm")}function JO(){return M4||(M4=L(async()=>{const{default:t}=await import("./money-tides-pe-wasm-B87Q3u4k.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>ft(`esri/geometry/support/${e}`)})).then(t=>{v_(t)}),M4)}const k1={geogToProj(t,e,r){I.ensureCache.prepare();const i=pl(r),s=r===i,n=I.ensureFloat64(i),o=I._pe_geog_to_proj(I.getPointer(t),e,n);return o&&Go(r,e,n,s),o},projGeog(t,e,r,i){switch(i){case He.PE_TRANSFORM_P_TO_G:return k1.projToGeog(t,e,r);case He.PE_TRANSFORM_G_TO_P:return k1.geogToProj(t,e,r)}return 0},projToGeog:(t,e,r)=>k1.projToGeogCenter(t,e,r,0),projToGeogCenter(t,e,r,i){I.ensureCache.prepare();const s=pl(r),n=r===s,o=I.ensureFloat64(s),l=I._pe_proj_to_geog_center(I.getPointer(t),e,o,i);return l&&Go(r,e,o,n),l}};let He=class $e{static init(){$e.PE_BUFFER_MAX=I.PeDefs.prototype.PE_BUFFER_MAX,$e.PE_NAME_MAX=I.PeDefs.prototype.PE_NAME_MAX,$e.PE_MGRS_MAX=I.PeDefs.prototype.PE_MGRS_MAX,$e.PE_USNG_MAX=I.PeDefs.prototype.PE_USNG_MAX,$e.PE_DD_MAX=I.PeDefs.prototype.PE_DD_MAX,$e.PE_DDM_MAX=I.PeDefs.prototype.PE_DDM_MAX,$e.PE_DMS_MAX=I.PeDefs.prototype.PE_DMS_MAX,$e.PE_UTM_MAX=I.PeDefs.prototype.PE_UTM_MAX,$e.PE_PARM_MAX=I.PeDefs.prototype.PE_PARM_MAX,$e.PE_TYPE_NONE=I.PeDefs.prototype.PE_TYPE_NONE,$e.PE_TYPE_GEOGCS=I.PeDefs.prototype.PE_TYPE_GEOGCS,$e.PE_TYPE_PROJCS=I.PeDefs.prototype.PE_TYPE_PROJCS,$e.PE_TYPE_GEOGTRAN=I.PeDefs.prototype.PE_TYPE_GEOGTRAN,$e.PE_TYPE_COORDSYS=I.PeDefs.prototype.PE_TYPE_COORDSYS,$e.PE_TYPE_UNIT=I.PeDefs.prototype.PE_TYPE_UNIT,$e.PE_TYPE_LINUNIT=I.PeDefs.prototype.PE_TYPE_LINUNIT,$e.PE_STR_OPTS_NONE=I.PeDefs.prototype.PE_STR_OPTS_NONE,$e.PE_STR_AUTH_NONE=I.PeDefs.prototype.PE_STR_AUTH_NONE,$e.PE_STR_AUTH_TOP=I.PeDefs.prototype.PE_STR_AUTH_TOP,$e.PE_STR_NAME_CANON=I.PeDefs.prototype.PE_STR_NAME_CANON,$e.PE_STR_FMT_WKT=I.PeDefs.prototype.PE_STR_FMT_WKT,$e.PE_STR_FMT_WKT2=I.PeDefs.prototype.PE_STR_FMT_WKT2,$e.PE_PARM_X0=I.PeDefs.prototype.PE_PARM_X0,$e.PE_PARM_ND=I.PeDefs.prototype.PE_PARM_ND,$e.PE_TRANSFORM_1_TO_2=I.PeDefs.prototype.PE_TRANSFORM_1_TO_2,$e.PE_TRANSFORM_2_TO_1=I.PeDefs.prototype.PE_TRANSFORM_2_TO_1,$e.PE_TRANSFORM_P_TO_G=I.PeDefs.prototype.PE_TRANSFORM_P_TO_G,$e.PE_TRANSFORM_G_TO_P=I.PeDefs.prototype.PE_TRANSFORM_G_TO_P,$e.PE_HORIZON_RECT=I.PeDefs.prototype.PE_HORIZON_RECT,$e.PE_HORIZON_POLY=I.PeDefs.prototype.PE_HORIZON_POLY,$e.PE_HORIZON_LINE=I.PeDefs.prototype.PE_HORIZON_LINE,$e.PE_HORIZON_DELTA=I.PeDefs.prototype.PE_HORIZON_DELTA}},h_=null;const L9={},N9={},D9=t=>{const e=t.getType();switch(e){case He.PE_TYPE_GEOGCS:t=I.castObject(t,I.PeGeogcs);break;case He.PE_TYPE_PROJCS:t=I.castObject(t,I.PeProjcs);break;case He.PE_TYPE_GEOGTRAN:t=I.castObject(t,I.PeGeogtran);break;default:e&He.PE_TYPE_UNIT&&(t=I.castObject(t,I.PeUnit))}return t},Bl={initialize(){I.PeFactory.prototype.initialize(null)},coordsys:t=>Bl.factoryByType(He.PE_TYPE_COORDSYS,t),factoryByType(t,e){let r=null,i=L9[t];if(i||(i={},L9[t]=i),i.hasOwnProperty(String(e))&&(r=i[e],I.compare(r,I.NULL)&&(r=null)),!r){const s=I.PeFactory.prototype.factoryByType(t,e);I.compare(s,I.NULL)||(r=D9(s),i[e]=r)}return r},fromString(t,e){let r=null,i=N9[t];if(i||(i={},N9[t]=i),i.hasOwnProperty(e)&&(r=i[e],I.compare(r,I.NULL)&&(r=null)),!r){const s=I.PeFactory.prototype.fromString(t,e);I.compare(s,I.NULL)||(r=D9(s),i[e]=r)}return r},geogcs:t=>Bl.factoryByType(He.PE_TYPE_GEOGCS,t),geogtran:t=>Bl.factoryByType(He.PE_TYPE_GEOGTRAN,t),getCode:t=>I.PeFactory.prototype.getCode(t),projcs:t=>Bl.factoryByType(He.PE_TYPE_PROJCS,t),unit:t=>Bl.factoryByType(He.PE_TYPE_UNIT,t)};let j9,y_=null;const yg={PE_GTLIST_OPTS_COMMON:0,init(){yg.PE_GTLIST_OPTS_COMMON=I.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,j9=I._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,r,i,s,n){let o=null;const l=new I.PeInteger(n);try{const c=I.PeGTlistExtended.prototype.getGTlist(t,e,r,i,s,l);if((n=l.val)&&(o=[c],n>1)){const d=I.getPointer(c);for(let h=1;h<n;h++)o.push(I.wrapPointer(d+j9*h,I.PeGTlistExtendedEntry))}}finally{I.destroy(l)}return o}},QO={destroy(t){if(t?.length){for(const e of t)ts(e),e.getEntries().forEach(r=>{ts(r);const i=r.getGeogtran();ts(i),i.getParameters().forEach(ts),[i.getGeogcs1(),i.getGeogcs2()].forEach(s=>{ts(s);const n=s.getDatum();ts(n),ts(n.getSpheroid()),ts(s.getPrimem()),ts(s.getUnit())})});I.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},YO={geogToGeog(t,e,r,i,s){I.ensureCache.prepare();const n=pl(r),o=r===n,l=I.ensureFloat64(n);let c=0;i&&(c=I.ensureFloat64(i));const d=I._pe_geog_to_geog(I.getPointer(t),e,l,c,s);return d&&Go(r,e,l,o),d}},KO={geodesicCoordinate(t,e,r,i,s,n,o,l){I.PeLineType.prototype.geodesic_coordinate(t,e,r,i,s,n,o,l)},geodeticCoordinate(t,e,r,i,s,n,o,l,c){I.PeLineType.prototype.geodetic_coordinate(t,e,r,i,s,n,o,l,c)},geodeticDistance(t,e,r,i,s,n,o,l,c,d){I.PeLineType.prototype.geodetic_distance(t,e,r,i,s,n,o,l,c,d)},greatEllipticDistance(t,e,r,i,s,n,o,l,c){I.PeLineType.prototype.great_elliptic_distance(t,e,r,i,s,n,o,l,c)}},XO={phiToEta:(t,e)=>I.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>I.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>I.PeMath.prototype.phi_to_phig(t,e),q:(t,e,r)=>I.PeMath.prototype.q(t,e,r),q90:(t,e)=>I.PeMath.prototype.q90(t,e)},I4=(t,e,r,i,s,n)=>{let o,l;switch(I.ensureCache.prepare(),t){case"dd":o=I._pe_geog_to_dd,l=He.PE_DD_MAX;break;case"ddm":o=I._pe_geog_to_ddm,l=He.PE_DDM_MAX;break;case"dms":o=I._pe_geog_to_dms,l=He.PE_DMS_MAX}let c=0;e&&(c=I.getPointer(e));const d=pl(i),h=I.ensureFloat64(d),y=R2(r,l),f=o(c,r,h,s,I.ensureInt32(y));if(f)for(let m=0;m<r;m++)n[m]=I.UTF8ToString(y[m]);return f},E4=(t,e,r,i,s)=>{let n;switch(I.ensureCache.prepare(),t){case"dd":n=I._pe_dd_to_geog;break;case"ddm":n=I._pe_ddm_to_geog;break;case"dms":n=I._pe_dms_to_geog}let o=0;e&&(o=I.getPointer(e));const l=i.map(y=>I.ensureString(y)),c=I.ensureInt32(l),d=I.ensureFloat64(new Array(2*r)),h=n(o,r,c,d);return h&&Go(s,r,d),h},eC={geogToDms:(t,e,r,i,s)=>I4("dms",t,e,r,i,s),dmsToGeog:(t,e,r,i)=>E4("dms",t,e,r,i),geogToDdm:(t,e,r,i,s)=>I4("ddm",t,e,r,i,s),ddmToGeog:(t,e,r,i)=>E4("ddm",t,e,r,i),geogToDd:(t,e,r,i,s)=>I4("dd",t,e,r,i,s),ddToGeog:(t,e,r,i)=>E4("dd",t,e,r,i)};let f_=class Wl{static init(){Wl.PE_MGRS_STYLE_NEW=I.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,Wl.PE_MGRS_STYLE_OLD=I.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,Wl.PE_MGRS_STYLE_AUTO=I.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,Wl.PE_MGRS_180_ZONE_1_PLUS=I.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,Wl.PE_MGRS_ADD_SPACES=I.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,r,i,s,n,o,l){I.ensureCache.prepare();let c=0;e&&(c=I.getPointer(e));const d=pl(i),h=I.ensureFloat64(d),y=R2(r,He.PE_MGRS_MAX),f=I.ensureInt32(y),m=I._pe_geog_to_mgrs_extended(c,r,h,s,n,o,f);if(m)for(let g=0;g<r;g++)l[g]=I.UTF8ToString(y[g]);return m}static mgrsToGeogExtended(e,r,i,s,n){I.ensureCache.prepare();let o=0;e&&(o=I.getPointer(e));const l=i.map(y=>I.ensureString(y)),c=I.ensureInt32(l),d=I.ensureFloat64(new Array(2*r)),h=I._pe_mgrs_to_geog_extended(o,r,c,s,d);return h&&Go(n,r,d),h}};const tC={geogToUsng(t,e,r,i,s,n,o){I.ensureCache.prepare();let l=0;t&&(l=I.getPointer(t));const c=pl(r),d=I.ensureFloat64(c),h=R2(e,He.PE_MGRS_MAX),y=I.ensureInt32(h),f=I._pe_geog_to_usng(l,e,d,i,s,n,y);if(f)for(let m=0;m<e;m++)o[m]=I.UTF8ToString(h[m]);return f},usngToGeog(t,e,r,i){I.ensureCache.prepare();let s=0;t&&(s=I.getPointer(t));const n=r.map(d=>I.ensureString(d)),o=I.ensureInt32(n),l=I.ensureFloat64(new Array(2*e)),c=I._pe_usng_to_geog(s,e,o,l);return c&&Go(i,e,l),c}};let m_=class F1{static init(){F1.PE_UTM_OPTS_NONE=I.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,F1.PE_UTM_OPTS_ADD_SPACES=I.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,F1.PE_UTM_OPTS_NS=I.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,r,i,s,n){I.ensureCache.prepare();let o=0;e&&(o=I.getPointer(e));const l=pl(i),c=I.ensureFloat64(l),d=R2(r,He.PE_UTM_MAX),h=I.ensureInt32(d),y=I._pe_geog_to_utm(o,r,c,s,h);if(y)for(let f=0;f<r;f++)n[f]=I.UTF8ToString(d[f]);return y}static utmToGeog(e,r,i,s,n){I.ensureCache.prepare();let o=0;e&&(o=I.getPointer(e));const l=i.map(y=>I.ensureString(y)),c=I.ensureInt32(l),d=I.ensureFloat64(new Array(2*r)),h=I._pe_utm_to_geog(o,r,c,s,d);return h&&Go(n,r,d),h}};var Nr;let g_=(Nr=class{static init(){Nr.PE_PCSINFO_OPTION_NONE=I.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,Nr.PE_PCSINFO_OPTION_DOMAIN=I.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,Nr.PE_POLE_OUTSIDE_BOUNDARY=I.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,Nr.PE_POLE_POINT=I.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,r=Nr.PE_PCSINFO_OPTION_DOMAIN){let i=null,s=null;return Nr.cache.has(e)&&(s=Nr.cache.get(e),s[r]&&(i=s[r])),i||(i=I.PePCSInfo.prototype.generate(e,r),s||(s=[],Nr.cache.set(e,s)),s[r]=i),i}},Nr.cache=new Map,Nr);const rC={versionString:()=>I.PeVersion.prototype.version_string()};function v_(t){function e(n,o,l){n[o]=l(n[o])}I=t,He.init(),yg.init(),f_.init(),m_.init(),g_.init(),h_=class extends I.PeDouble{constructor(n=NaN){super(n)}destroy(){I.destroy(this)}[Symbol.dispose](){this.destroy()}},y_=class extends I.PeGCSExtent{destroy(){I.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[I.PeAngunit,I.PeDatum,I.PeGeogcs,I.PeGeogtran,I.PeObject,I.PeParameter,I.PePrimem,I.PeProjcs,I.PeSpheroid,I.PeUnit];for(const n of r)e(n.prototype,"getName",o=>function(){return o.call(this,new Array(He.PE_NAME_MAX))});for(const n of[I.PeGeogtran,I.PeProjcs])e(n.prototype,"getParameters",o=>function(){const l=new Array(He.PE_PARM_MAX);let c=o.call(this);for(let d=0;d<l.length;d++){const h=I.getValue(c,"*");l[d]=h?I.wrapPointer(h,I.PeParameter):null,c+=Int32Array.BYTES_PER_ELEMENT}return l});e(I.PeHorizon.prototype,"getCoord",n=>function(o=!1){const l=this.getSize();if(!l)return null;const c=[];return Go(c,l,n.call(this),o),c}),e(I.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=I._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const c=n.call(this);if(!I.compare(c,I.NULL)){l=[c];const d=this.getSteps();if(d>1){const h=I.getPointer(c);for(let y=1;y<d;y++)l.push(I.wrapPointer(h+o*y,I.PeGTlistExtendedGTs))}}return l}});const i=I._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let l=null;const c=n.call(this);if(!I.compare(c,I.NULL)){l=[c];const d=c.getNump();if(d>1){const h=I.getPointer(c);for(let y=1;y<d;y++)l.push(I.wrapPointer(h+i*y,I.PeHorizon))}}return o.set(n,l),l};e(I.PeProjcs.prototype,"horizonGcsGenerate",s),e(I.PeProjcs.prototype,"horizonPcsGenerate",s),I.PeObject.prototype.toString=function(n=He.PE_STR_OPTS_NONE){I.ensureCache.prepare();const o=I.getPointer(this),l=I.ensureInt8(new Array(He.PE_BUFFER_MAX));return I.UTF8ToString(I._pe_object_to_string_ext(o,n,l))},I.PeGeogcs.prototype.destroy=function(){this.Delete(),ts(this),this.ptr=0},I.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},I.PeProjcs.prototype.destroy=function(){this.Delete(),ts(this),this.ptr=0},I.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function ts(t){if(!t)return;const e=I.getClass(t);if(!e)return;const r=I.getCache(e);if(!r)return;const i=I.getPointer(t);i&&delete r[i]}function R2(t,e){const r=[],i=new Array(e);for(let s=0;s<t;s++)r.push(I.ensureInt8(i));return r}function pl(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function Go(t,e,r,i=!1){if(i)for(let s=0;s<2*e;s++)t[s]=I.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let n=0;n<e;n++)s&&(t[n]=new Array(2)),t[n][0]=I.getValue(r,"double"),t[n][1]=I.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}const Yre=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:k1,PeDefs:He,get PeDouble(){return h_},PeFactory:Bl,get PeGCSExtent(){return y_},PeGTTransformations:YO,PeGTlistExtended:yg,PeGTlistExtendedEntry:QO,PeLineType:KO,PeMath:XO,PeNotationDms:eC,PeNotationMgrs:f_,PeNotationUsng:tC,PeNotationUtm:m_,PePCSInfo:g_,PeVersion:rC,_init:v_,get _pe(){return I},isLoaded:d_,isSupported:ZO,load:JO},Symbol.toStringTag,{value:"Module"}));let p;const w={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(p=2e3;p<=2045;p++)w[p]=0;for(p=2056;p<=2065;p++)w[p]=0;for(p=2067;p<=2135;p++)w[p]=0;for(p=2137;p<=2154;p++)w[p]=0;for(p=2161;p<=2170;p++)w[p]=0;for(p=2172;p<=2193;p++)w[p]=0;for(p=2195;p<=2198;p++)w[p]=0;for(p=2200;p<=2203;p++)w[p]=0;for(p=2205;p<=2217;p++)w[p]=0;for(p=2222;p<=2224;p++)w[p]=1;for(p=2225;p<=2250;p++)w[p]=2;for(p=2251;p<=2253;p++)w[p]=1;for(p=2257;p<=2264;p++)w[p]=2;for(p=2274;p<=2279;p++)w[p]=2;for(p=2280;p<=2282;p++)w[p]=1;for(p=2283;p<=2289;p++)w[p]=2;for(p=2290;p<=2292;p++)w[p]=0;for(p=2308;p<=2313;p++)w[p]=0;for(p=2315;p<=2491;p++)w[p]=0;for(p=2494;p<=2866;p++)w[p]=0;for(p=2867;p<=2869;p++)w[p]=1;for(p=2870;p<=2888;p++)w[p]=2;for(p=2891;p<=2895;p++)w[p]=2;for(p=2896;p<=2898;p++)w[p]=1;for(p=2902;p<=2908;p++)w[p]=2;for(p=2915;p<=2920;p++)w[p]=2;for(p=2921;p<=2923;p++)w[p]=1;for(p=2924;p<=2930;p++)w[p]=2;for(p=2931;p<=2962;p++)w[p]=0;for(p=2964;p<=2968;p++)w[p]=2;for(p=2969;p<=2973;p++)w[p]=0;for(p=2975;p<=2991;p++)w[p]=0;for(p=2995;p<=3051;p++)w[p]=0;for(p=3054;p<=3079;p++)w[p]=0;for(p=3081;p<=3088;p++)w[p]=0;for(p=3092;p<=3101;p++)w[p]=0;for(p=3106;p<=3138;p++)w[p]=0;for(p=3146;p<=3151;p++)w[p]=0;for(p=3153;p<=3166;p++)w[p]=0;for(p=3168;p<=3172;p++)w[p]=0;for(p=3174;p<=3203;p++)w[p]=0;for(p=3294;p<=3358;p++)w[p]=0;for(p=3367;p<=3403;p++)w[p]=0;for(p=3408;p<=3416;p++)w[p]=0;for(p=3417;p<=3438;p++)w[p]=2;for(p=3441;p<=3446;p++)w[p]=2;for(p=3447;p<=3450;p++)w[p]=0;for(p=3451;p<=3459;p++)w[p]=2;for(p=3460;p<=3478;p++)w[p]=0;for(p=3554;p<=3559;p++)w[p]=0;for(p=3560;p<=3570;p++)w[p]=2;for(p=3571;p<=3581;p++)w[p]=0;for(p=3594;p<=3597;p++)w[p]=0;for(p=3601;p<=3604;p++)w[p]=0;for(p=3637;p<=3639;p++)w[p]=0;for(p=3665;p<=3667;p++)w[p]=0;for(p=3693;p<=3695;p++)w[p]=0;for(p=3701;p<=3727;p++)w[p]=0;for(p=3728;p<=3739;p++)w[p]=2;for(p=3740;p<=3751;p++)w[p]=0;for(p=3753;p<=3760;p++)w[p]=2;for(p=3761;p<=3773;p++)w[p]=0;for(p=3775;p<=3777;p++)w[p]=0;for(p=3779;p<=3781;p++)w[p]=0;for(p=3783;p<=3785;p++)w[p]=0;for(p=3788;p<=3791;p++)w[p]=0;for(p=3797;p<=3802;p++)w[p]=0;for(p=3814;p<=3816;p++)w[p]=0;for(p=3825;p<=3829;p++)w[p]=0;for(p=3832;p<=3841;p++)w[p]=0;for(p=3844;p<=3852;p++)w[p]=0;for(p=3873;p<=3885;p++)w[p]=0;for(p=3890;p<=3893;p++)w[p]=0;for(p=3907;p<=3912;p++)w[p]=0;for(p=3942;p<=3950;p++)w[p]=0;for(p=3968;p<=3970;p++)w[p]=0;for(p=3973;p<=3976;p++)w[p]=0;for(p=3986;p<=3989;p++)w[p]=0;for(p=3994;p<=3997;p++)w[p]=0;for(p=4048;p<=4051;p++)w[p]=0;for(p=4056;p<=4063;p++)w[p]=0;for(p=4093;p<=4096;p++)w[p]=0;for(p=4390;p<=4398;p++)w[p]=0;for(p=4399;p<=4413;p++)w[p]=2;for(p=4418;p<=4433;p++)w[p]=2;for(p=4455;p<=4457;p++)w[p]=2;for(p=4484;p<=4489;p++)w[p]=0;for(p=4491;p<=4554;p++)w[p]=0;for(p=4568;p<=4589;p++)w[p]=0;for(p=4652;p<=4656;p++)w[p]=0;for(p=4766;p<=4800;p++)w[p]=0;for(p=5014;p<=5016;p++)w[p]=0;for(p=5069;p<=5072;p++)w[p]=0;for(p=5105;p<=5130;p++)w[p]=0;for(p=5167;p<=5188;p++)w[p]=0;for(p=5253;p<=5259;p++)w[p]=0;for(p=5269;p<=5275;p++)w[p]=0;for(p=5292;p<=5311;p++)w[p]=0;for(p=5329;p<=5331;p++)w[p]=0;for(p=5343;p<=5349;p++)w[p]=0;for(p=5355;p<=5357;p++)w[p]=0;for(p=5387;p<=5389;p++)w[p]=0;for(p=5459;p<=5463;p++)w[p]=0;for(p=5479;p<=5482;p++)w[p]=0;for(p=5518;p<=5520;p++)w[p]=0;for(p=5530;p<=5539;p++)w[p]=0;for(p=5550;p<=5552;p++)w[p]=0;for(p=5562;p<=5583;p++)w[p]=0;for(p=5623;p<=5625;p++)w[p]=2;for(p=5631;p<=5639;p++)w[p]=0;for(p=5649;p<=5653;p++)w[p]=0;for(p=5663;p<=5680;p++)w[p]=0;for(p=5682;p<=5685;p++)w[p]=0;for(p=5875;p<=5877;p++)w[p]=0;for(p=5896;p<=5899;p++)w[p]=0;for(p=5921;p<=5940;p++)w[p]=0;for(p=6050;p<=6125;p++)w[p]=0;for(p=6244;p<=6275;p++)w[p]=0;for(p=6328;p<=6348;p++)w[p]=0;for(p=6350;p<=6356;p++)w[p]=0;for(p=6366;p<=6372;p++)w[p]=0;for(p=6381;p<=6387;p++)w[p]=0;for(p=6393;p<=6404;p++)w[p]=0;for(p=6480;p<=6483;p++)w[p]=0;for(p=6511;p<=6514;p++)w[p]=0;for(p=6579;p<=6581;p++)w[p]=0;for(p=6619;p<=6624;p++)w[p]=0;for(p=6625;p<=6627;p++)w[p]=2;for(p=6628;p<=6632;p++)w[p]=0;for(p=6634;p<=6637;p++)w[p]=0;for(p=6669;p<=6692;p++)w[p]=0;for(p=6707;p<=6709;p++)w[p]=0;for(p=6720;p<=6723;p++)w[p]=0;for(p=6732;p<=6738;p++)w[p]=0;for(p=6931;p<=6933;p++)w[p]=0;for(p=6956;p<=6959;p++)w[p]=0;for(p=7005;p<=7007;p++)w[p]=0;for(p=7057;p<=7070;p++)w[p]=2;for(p=7074;p<=7082;p++)w[p]=0;for(p=7109;p<=7118;p++)w[p]=0;for(p=7119;p<=7127;p++)w[p]=1;for(p=7374;p<=7376;p++)w[p]=0;for(p=7528;p<=7586;p++)w[p]=0;for(p=7587;p<=7645;p++)w[p]=2;for(p=7692;p<=7696;p++)w[p]=0;for(p=7755;p<=7787;p++)w[p]=0;for(p=7791;p<=7795;p++)w[p]=0;for(p=7799;p<=7801;p++)w[p]=0;for(p=7803;p<=7805;p++)w[p]=0;for(p=7825;p<=7831;p++)w[p]=0;for(p=7845;p<=7859;p++)w[p]=0;for(p=8013;p<=8032;p++)w[p]=0;for(p=8065;p<=8068;p++)w[p]=1;for(p=8518;p<=8529;p++)w[p]=2;for(p=8533;p<=8536;p++)w[p]=2;for(p=8538;p<=8540;p++)w[p]=2;for(p=8677;p<=8679;p++)w[p]=0;for(p=8836;p<=8840;p++)w[p]=0;for(p=8857;p<=8859;p++)w[p]=0;for(p=8908;p<=8910;p++)w[p]=0;for(p=9154;p<=9159;p++)w[p]=0;for(p=9205;p<=9218;p++)w[p]=0;for(p=9271;p<=9273;p++)w[p]=0;for(p=9295;p<=9297;p++)w[p]=0;for(p=9356;p<=9360;p++)w[p]=0;for(p=9404;p<=9407;p++)w[p]=0;for(p=9476;p<=9482;p++)w[p]=0;for(p=9487;p<=9494;p++)w[p]=0;for(p=9697;p<=9699;p++)w[p]=0;for(p=9821;p<=9865;p++)w[p]=0;for(p=10285;p<=10291;p++)w[p]=0;for(p=10314;p<=10317;p++)w[p]=0;for(p=10448;p<=10465;p++)w[p]=0;for(p=10726;p<=10729;p++)w[p]=0;for(p=10731;p<=10733;p++)w[p]=0;for(p=11114;p<=11118;p++)w[p]=0;for(p=20004;p<=20032;p++)w[p]=0;for(p=20047;p<=20049;p++)w[p]=0;for(p=20062;p<=20092;p++)w[p]=0;for(p=20135;p<=20138;p++)w[p]=0;for(p=20248;p<=20258;p++)w[p]=0;for(p=20348;p<=20358;p++)w[p]=0;for(p=20436;p<=20440;p++)w[p]=0;for(p=20822;p<=20824;p++)w[p]=0;for(p=20904;p<=20932;p++)w[p]=0;for(p=20934;p<=20936;p++)w[p]=0;for(p=21004;p<=21032;p++)w[p]=0;for(p=21035;p<=21037;p++)w[p]=0;for(p=21095;p<=21097;p++)w[p]=0;for(p=21148;p<=21150;p++)w[p]=0;for(p=21207;p<=21264;p++)w[p]=0;for(p=21307;p<=21364;p++)w[p]=0;for(p=21413;p<=21423;p++)w[p]=0;for(p=21453;p<=21463;p++)w[p]=0;for(p=21473;p<=21483;p++)w[p]=0;for(p=21780;p<=21782;p++)w[p]=0;for(p=21891;p<=21894;p++)w[p]=0;for(p=21896;p<=21899;p++)w[p]=0;for(p=22171;p<=22177;p++)w[p]=0;for(p=22181;p<=22187;p++)w[p]=0;for(p=22191;p<=22197;p++)w[p]=0;for(p=22207;p<=22222;p++)w[p]=0;for(p=22229;p<=22232;p++)w[p]=0;for(p=22234;p<=22236;p++)w[p]=0;for(p=22243;p<=22250;p++)w[p]=0;for(p=22262;p<=22265;p++)w[p]=0;for(p=22307;p<=22322;p++)w[p]=0;for(p=22348;p<=22357;p++)w[p]=0;for(p=22407;p<=22422;p++)w[p]=0;for(p=22462;p<=22465;p++)w[p]=0;for(p=22521;p<=22525;p++)w[p]=0;for(p=22607;p<=22622;p++)w[p]=0;for(p=22641;p<=22646;p++)w[p]=0;for(p=22648;p<=22657;p++)w[p]=0;for(p=22707;p<=22722;p++)w[p]=0;for(p=22762;p<=22765;p++)w[p]=0;for(p=22807;p<=22822;p++)w[p]=0;for(p=22991;p<=22994;p++)w[p]=0;for(p=23028;p<=23038;p++)w[p]=0;for(p=23301;p<=23333;p++)w[p]=2;for(p=23830;p<=23853;p++)w[p]=0;for(p=23866;p<=23872;p++)w[p]=0;for(p=23877;p<=23884;p++)w[p]=0;for(p=23886;p<=23894;p++)w[p]=0;for(p=23946;p<=23948;p++)w[p]=0;for(p=24311;p<=24313;p++)w[p]=0;for(p=24342;p<=24347;p++)w[p]=0;for(p=24370;p<=24374;p++)w[p]=10;for(p=24375;p<=24381;p++)w[p]=0;for(p=24718;p<=24721;p++)w[p]=0;for(p=24817;p<=24821;p++)w[p]=0;for(p=24877;p<=24882;p++)w[p]=0;for(p=24891;p<=24893;p++)w[p]=0;for(p=25391;p<=25395;p++)w[p]=0;for(p=25828;p<=25838;p++)w[p]=0;for(p=26191;p<=26195;p++)w[p]=0;for(p=26391;p<=26393;p++)w[p]=0;for(p=26701;p<=26722;p++)w[p]=0;for(p=26729;p<=26799;p++)w[p]=2;for(p=26801;p<=26803;p++)w[p]=2;for(p=26811;p<=26813;p++)w[p]=2;for(p=26847;p<=26870;p++)w[p]=2;for(p=26891;p<=26899;p++)w[p]=0;for(p=26901;p<=26923;p++)w[p]=0;for(p=26929;p<=26946;p++)w[p]=0;for(p=26948;p<=26998;p++)w[p]=0;for(p=27037;p<=27040;p++)w[p]=0;for(p=27205;p<=27232;p++)w[p]=0;for(p=27258;p<=27260;p++)w[p]=0;for(p=27391;p<=27398;p++)w[p]=0;for(p=27561;p<=27564;p++)w[p]=0;for(p=27571;p<=27574;p++)w[p]=0;for(p=27581;p<=27584;p++)w[p]=0;for(p=27591;p<=27594;p++)w[p]=0;for(p=27700;p<=27707;p++)w[p]=0;for(p=28191;p<=28193;p++)w[p]=0;for(p=28348;p<=28358;p++)w[p]=0;for(p=28402;p<=28432;p++)w[p]=0;for(p=28462;p<=28492;p++)w[p]=0;for(p=29118;p<=29122;p++)w[p]=0;for(p=29168;p<=29172;p++)w[p]=0;for(p=29177;p<=29185;p++)w[p]=0;for(p=29187;p<=29195;p++)w[p]=0;for(p=29900;p<=29903;p++)w[p]=0;for(p=30161;p<=30179;p++)w[p]=0;for(p=30491;p<=30494;p++)w[p]=0;for(p=30729;p<=30732;p++)w[p]=0;for(p=31251;p<=31259;p++)w[p]=0;for(p=31265;p<=31268;p++)w[p]=0;for(p=31275;p<=31279;p++)w[p]=0;for(p=31281;p<=31297;p++)w[p]=0;for(p=31461;p<=31469;p++)w[p]=0;for(p=31491;p<=31495;p++)w[p]=0;for(p=31917;p<=31922;p++)w[p]=0;for(p=31965;p<=32e3;p++)w[p]=0;for(p=32001;p<=32003;p++)w[p]=2;for(p=32005;p<=32031;p++)w[p]=2;for(p=32033;p<=32060;p++)w[p]=2;for(p=32064;p<=32067;p++)w[p]=2;for(p=32074;p<=32077;p++)w[p]=2;for(p=32081;p<=32086;p++)w[p]=0;for(p=32107;p<=32130;p++)w[p]=0;for(p=32133;p<=32159;p++)w[p]=0;for(p=32164;p<=32167;p++)w[p]=2;for(p=32180;p<=32199;p++)w[p]=0;for(p=32201;p<=32260;p++)w[p]=0;for(p=32301;p<=32360;p++)w[p]=0;for(p=32401;p<=32460;p++)w[p]=0;for(p=32501;p<=32560;p++)w[p]=0;for(p=32601;p<=32662;p++)w[p]=0;for(p=32664;p<=32667;p++)w[p]=2;for(p=32701;p<=32761;p++)w[p]=0;for(p=53001;p<=53004;p++)w[p]=0;for(p=53008;p<=53019;p++)w[p]=0;for(p=53021;p<=53032;p++)w[p]=0;for(p=53034;p<=53037;p++)w[p]=0;for(p=53042;p<=53046;p++)w[p]=0;for(p=53074;p<=53080;p++)w[p]=0;for(p=54001;p<=54004;p++)w[p]=0;for(p=54008;p<=54019;p++)w[p]=0;for(p=54021;p<=54032;p++)w[p]=0;for(p=54034;p<=54037;p++)w[p]=0;for(p=54042;p<=54046;p++)w[p]=0;for(p=54048;p<=54053;p++)w[p]=0;for(p=54074;p<=54080;p++)w[p]=0;for(p=54090;p<=54096;p++)w[p]=0;for(p=54098;p<=54101;p++)w[p]=0;for(p=65161;p<=65163;p++)w[p]=0;for(p=102001;p<=102040;p++)w[p]=0;for(p=102042;p<=102063;p++)w[p]=0;for(p=102065;p<=102067;p++)w[p]=0;for(p=102070;p<=102117;p++)w[p]=0;for(p=102122;p<=102216;p++)w[p]=0;for(p=102221;p<=102377;p++)w[p]=0;for(p=102382;p<=102388;p++)w[p]=0;for(p=102389;p<=102398;p++)w[p]=2;for(p=102399;p<=102444;p++)w[p]=0;for(p=102445;p<=102447;p++)w[p]=2;for(p=102448;p<=102458;p++)w[p]=0;for(p=102459;p<=102468;p++)w[p]=2;for(p=102469;p<=102499;p++)w[p]=0;for(p=102500;p<=102519;p++)w[p]=1;for(p=102520;p<=102524;p++)w[p]=0;for(p=102525;p<=102529;p++)w[p]=2;for(p=102530;p<=102588;p++)w[p]=0;for(p=102590;p<=102598;p++)w[p]=0;for(p=102601;p<=102603;p++)w[p]=0;for(p=102605;p<=102628;p++)w[p]=0;for(p=102629;p<=102646;p++)w[p]=2;for(p=102648;p<=102700;p++)w[p]=2;for(p=102701;p<=102703;p++)w[p]=0;for(p=102707;p<=102730;p++)w[p]=2;for(p=102733;p<=102758;p++)w[p]=2;for(p=102767;p<=102900;p++)w[p]=0;for(p=102901;p<=102933;p++)w[p]=2;for(p=102934;p<=102950;p++)w[p]=13;for(p=102951;p<=102963;p++)w[p]=0;for(p=102965;p<=102969;p++)w[p]=0;for(p=102971;p<=102973;p++)w[p]=0;for(p=102975;p<=102989;p++)w[p]=0;for(p=102990;p<=102992;p++)w[p]=1;for(p=102997;p<=103002;p++)w[p]=0;for(p=103003;p<=103008;p++)w[p]=2;for(p=103009;p<=103011;p++)w[p]=0;for(p=103012;p<=103014;p++)w[p]=2;for(p=103019;p<=103021;p++)w[p]=0;for(p=103022;p<=103024;p++)w[p]=2;for(p=103029;p<=103031;p++)w[p]=0;for(p=103032;p<=103034;p++)w[p]=2;for(p=103065;p<=103068;p++)w[p]=0;for(p=103074;p<=103076;p++)w[p]=0;for(p=103077;p<=103079;p++)w[p]=1;for(p=103080;p<=103082;p++)w[p]=0;for(p=103083;p<=103085;p++)w[p]=2;for(p=103090;p<=103093;p++)w[p]=0;for(p=103097;p<=103099;p++)w[p]=0;for(p=103100;p<=103102;p++)w[p]=2;for(p=103107;p<=103109;p++)w[p]=0;for(p=103110;p<=103112;p++)w[p]=2;for(p=103113;p<=103116;p++)w[p]=0;for(p=103117;p<=103120;p++)w[p]=2;for(p=103153;p<=103157;p++)w[p]=0;for(p=103158;p<=103162;p++)w[p]=2;for(p=103163;p<=103165;p++)w[p]=0;for(p=103166;p<=103168;p++)w[p]=1;for(p=103169;p<=103171;p++)w[p]=2;for(p=103186;p<=103188;p++)w[p]=0;for(p=103189;p<=103191;p++)w[p]=2;for(p=103192;p<=103195;p++)w[p]=0;for(p=103196;p<=103199;p++)w[p]=2;for(p=103200;p<=103224;p++)w[p]=0;for(p=103225;p<=103227;p++)w[p]=1;for(p=103232;p<=103237;p++)w[p]=0;for(p=103238;p<=103243;p++)w[p]=2;for(p=103244;p<=103246;p++)w[p]=0;for(p=103247;p<=103249;p++)w[p]=2;for(p=103254;p<=103256;p++)w[p]=0;for(p=103257;p<=103259;p++)w[p]=2;for(p=103264;p<=103266;p++)w[p]=0;for(p=103267;p<=103269;p++)w[p]=2;for(p=103300;p<=103375;p++)w[p]=0;for(p=103381;p<=103383;p++)w[p]=0;for(p=103384;p<=103386;p++)w[p]=1;for(p=103387;p<=103389;p++)w[p]=0;for(p=103390;p<=103392;p++)w[p]=2;for(p=103397;p<=103399;p++)w[p]=0;for(p=103400;p<=103471;p++)w[p]=2;for(p=103476;p<=103478;p++)w[p]=0;for(p=103479;p<=103481;p++)w[p]=2;for(p=103486;p<=103488;p++)w[p]=0;for(p=103489;p<=103491;p++)w[p]=2;for(p=103492;p<=103495;p++)w[p]=0;for(p=103496;p<=103499;p++)w[p]=2;for(p=103528;p<=103543;p++)w[p]=0;for(p=103544;p<=103548;p++)w[p]=2;for(p=103549;p<=103551;p++)w[p]=0;for(p=103552;p<=103554;p++)w[p]=1;for(p=103555;p<=103557;p++)w[p]=2;for(p=103558;p<=103560;p++)w[p]=0;for(p=103571;p<=103573;p++)w[p]=0;for(p=103574;p<=103576;p++)w[p]=2;for(p=103577;p<=103580;p++)w[p]=0;for(p=103581;p<=103583;p++)w[p]=2;for(p=103595;p<=103694;p++)w[p]=0;for(p=103696;p<=103699;p++)w[p]=0;for(p=103700;p<=103793;p++)w[p]=2;for(p=103794;p<=103890;p++)w[p]=0;for(p=103891;p<=103896;p++)w[p]=2;for(p=103900;p<=103971;p++)w[p]=2;for(p=103972;p<=103977;p++)w[p]=0;for(p=112e3;p<=112101;p++)w[p]=0;const w_=[102100,102113,3857,3785,900913],iC=[104905,104971],sC=[104903],nC=[4326,...w_,...iC,...sC],zd=[-20037508342788905e-9,20037508342788905e-9],rf=[-20037508342787e-6,20037508342787e-6],P4={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:zd,origin:rf,dx:1e-5},b_={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:zd,origin:rf,dx:1e-5},102100:P4,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:zd,origin:rf,dx:1e-5},3857:P4,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:P4,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ot(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const r=t.wkid,i=e.wkid;if(r!=null||i!=null){if(r===i||Zs(t)&&Zs(e))return!0;const o=t.latestWkid;if(o!=null&&i===o)return!0;const l=e.latestWkid;return l!=null&&r===l}let s,n;return t.wkt2&&e.wkt2?(s=t.wkt2,n=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,n=e.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function xr(t){const e=t?.wkid;return e!=null&&e>=2e3&&b_[e]||null}function qd(t){if(!t)return;const{wkid:e,vcsWkid:r}=t;if(e)return r?JSON.stringify({wkid:e,vcsWkid:r}):String(e);const i=t.wkt||t.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function Zc(t){if(!ci(t))return!1;const{wkid:e}=t;if(e)return w[e]==null;const r=t.wkt2||t.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function oC(t){return!(__(t)||S_(t))}function dl(t){return t?.wkid===4326}function Kre(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function V9(t){return t?.wkid===4490}function Zs(t){const e=t?.wkid;return e!=null&&e>=2e3&&w_.includes(e)}function aC(t){return t?.wkid===32662}function O2(t){return t===104971||t===104905}function __(t){return O2(t?.wkid)}function C2(t){return t===104903}function S_(t){return C2(t?.wkid)}function lC(t){const e=t?.wkid;return e!=null&&e>=2e3&&nC.includes(e)}function ci(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const x_={wkid:4326,wkt:Sl(b_[4326].wkTemplate,{Central_Meridian:"0.0"})},$_={wkid:102100,latestWkid:3857},uC={wkid:32662};function fg(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const cC=fg(Qe),mg=fg(Us),gg=fg(Uo),pC={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Qe.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},dC=mg.wkt.toUpperCase(),hC=gg.wkt.toUpperCase();function yC(t){if(t!=null&&ci(t)){const e=t.wkid,r=t.wkt2??t.wkt;if(O2(e))return Us;const i=r?.toUpperCase();if(r&&i===dC)return Us;if(C2(e)||i&&i===hC)return Uo}return Qe}function Xre(t){return O2(t)?Us:C2(t)?Uo:Qe}function W0(t){return ot(t,cC)}function Bo(t){return W0(t)||ot(t,mg)||ot(t,gg)}const vg=39.37,fC=Qe.radius*Math.PI/200,T_=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Rc=w,M_=/UNIT\[([^\]]+)]/i,mC=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),gC=Wt()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Gi=t=>t*t,no=t=>t*t*t,Ud={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Gi(.001)},"square-centimeters":{inBaseUnits:Gi(.01)},"square-decimeters":{inBaseUnits:Gi(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Gi(1e3)},"square-inches":{inBaseUnits:Gi(.0254)},"square-feet":{inBaseUnits:Gi(.3048)},"square-yards":{inBaseUnits:Gi(.9144)},"square-miles":{inBaseUnits:Gi(1609.344)},"square-nautical-miles":{inBaseUnits:Gi(1852)},"square-us-feet":{inBaseUnits:Gi(1200/3937)},acres:{inBaseUnits:.0015625*Gi(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*no(.001)},"cubic-centimeters":{inBaseUnits:1e3*no(.01)},"cubic-decimeters":{inBaseUnits:1e3*no(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*no(1e3)},"cubic-inches":{inBaseUnits:1e3*no(.0254)},"cubic-feet":{inBaseUnits:1e3*no(.3048)},"cubic-yards":{inBaseUnits:1e3*no(.9144)},"cubic-miles":{inBaseUnits:1e3*no(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},vC=(()=>{const t={};for(const e in Ud)for(const r in Ud[e].units)t[r]=e;return t})();function wC(t,e,r){return t*Ud[r].units[e].inBaseUnits}function bC(t,e,r){return t/Ud[r].units[e].inBaseUnits}const _C=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],SC=["metric","imperial"],I_=[...SC,..._C],xC=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function sf(t){const e=vC[t];if(!e)throw new Error("unknown type");return e}function z9(t,e=null){return e=e||sf(t),Ud[e].baseUnit===t}function tt(t,e,r){if(e===r)return t;const i=sf(e);if(i!==sf(r))throw new Error("incompatible units");const s=z9(e,i)?t:wC(t,e,i);return z9(r,i)?s:bC(s,r,i)}function eie(t,e,r,i=!1){if(!i&&Zc(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=$l(e);return s!==r&&(t=s?tt(t,s,r):tt(t*=vi(e),"meters",r)),t}function tie(t,e,r,i=!1){if(!i&&Zc(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=$l(r);return e!==s&&(t=s?tt(t,e,s):tt(t,e,"meters")/vi(r)),t}function $C(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function rie(t){return $C(t)}function iie(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function sie(t,e,r){switch(r){case"metric":return TC(t,e);case"imperial":return IC(t,e);default:return r}}function nie(t,e,r){switch(r){case"metric":return MC(t,e);case"imperial":return EC(t,e);default:return r}}function TC(t,e){const r=tt(t,e,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function MC(t,e){const r=tt(t,e,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function IC(t,e){const r=tt(t,e,"feet");return Math.abs(r)<1e3?"feet":"miles"}function EC(t,e){const r=tt(t,e,"feet");return Math.abs(r)<1e5?"feet":"miles"}function oie(t,e){const r=tt(t,e,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function aie(t,e){const r=tt(t,e,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function PC(t,e,r){return tt(t,e,"meters")/(r*Math.PI/180)}function wg(t){return gC.fromJSON(t.toLowerCase())||null}function Oc(t){if(t!=null&&!oC(t))return 1;const e=vi(t);return e>1e5?1:e}function E_(t){return vi(t)>=yC(t).metersPerDegree?"meters":$l(t)}function vi(t,e=Qe.metersPerDegree){return RC(t,!0)??e}function RC(t,e=!1){const r=t?.wkid??null,i=t?.wkt2??t?.wkt??null;let s=null;if(r){if(O2(r))return Us.metersPerDegree;if(C2(r))return Uo.metersPerDegree;s=Rc.values[Rc[r]],!s&&e&&mC.has(r)&&(s=fC)}else i&&(O_(i)?s=q9(T_.exec(i),s):R_(i)&&(s=q9(M_.exec(i),s)));return s}function lie(t){return Zc(t)?1:vi(t)}function q9(t,e){return t?.[1]?P_(t[1]):e}function P_(t){return parseFloat(t.split(",")[1])}function $l(t){const e=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let i=null;if(e)i=Rc.units[Rc[e]];else if(r){const s=O_(r)?T_:R_(r)?M_:null;if(s){const n=s.exec(r);n?.[1]&&(i=CC(n[1]))}}return i!=null?wg(i):null}function uie(t){const e=$l(t);return e!=null&&I_.includes(e)?e:null}function cie(t){const e=E_(t);return e!=null&&I_.includes(e)?e:null}function pie(t){const e=$l(t);return e==null?null:xC.get(e)}function R_(t){return/^GEOCCS/i.test(t)}function O_(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const OC=1e-7;function CC(t){let r=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!r||!wg(r)){const i=P_(t);r=null;const s=Rc.values;for(let n=0;n<s.length;++n)if(Math.abs(i-s[n])<OC){r=Rc.units[n];break}}return r}function die(t){const e=$l(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const kC={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},FC={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},AC={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},LC=Wt()(kC),NC=Wt()(FC),hie=Wt()(AC);var vs,Ds;let B=(Ds=class extends A{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return vs.WebMercator;if(e?.wkid===4326)return vs.WGS84;const r=new vs;return r.read(e),r}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return dl(this)}get isWebMercator(){return Zs(this)}get isGeographic(){return Zc(this)}get isWrappable(){return lC(this)}get metersPerUnit(){return vi(this)}get unit(){return $l(this)||(this.isGeographic?"degrees":null)}writeWkt(e,r){this.wkid||(r.wkt=e)}clone(){if(this===vs.WGS84)return new vs(x_);if(this===vs.WebMercator)return new vs($_);const e=new vs;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=P(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:r,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return r==null||s?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===r&&n.referenceServiceName===i:n.id===r}return ot(this,e)}toJSON(e){return this.write(void 0,e)}},vs=Ds,Ds.GCS_NAD_1927=null,Ds.WGS84=null,Ds.WebMercator=null,Ds.PlateCarree=null,Ds);a([u({readOnly:!0})],B.prototype,"isWGS84",null),a([u({readOnly:!0})],B.prototype,"isWebMercator",null),a([u({readOnly:!0})],B.prototype,"isGeographic",null),a([u({readOnly:!0})],B.prototype,"isWrappable",null),a([u({type:ve,json:{write:!0}})],B.prototype,"latestWkid",void 0),a([u({readOnly:!0})],B.prototype,"metersPerUnit",null),a([u({readOnly:!0})],B.prototype,"unit",null),a([u({type:ve,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],B.prototype,"wkid",void 0),a([u({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],B.prototype,"wkt",void 0),a([j("wkt"),j("web-scene","wkt")],B.prototype,"writeWkt",null),a([u({type:String,json:{write:!1}})],B.prototype,"wkt2",void 0),a([u({type:ve,json:{write:!0}})],B.prototype,"vcsWkid",void 0),a([u({type:ve,json:{write:!0}})],B.prototype,"latestVcsWkid",void 0),a([u()],B.prototype,"imageCoordinateSystem",void 0),B=vs=a([_("esri.geometry.SpatialReference")],B),B.prototype.toJSON.isDefaultToJSON=!0,B.GCS_NAD_1927=Z.freeze(new B({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),B.WGS84=Z.freeze(new B(x_)),B.WebMercator=Z.freeze(new B($_)),B.PlateCarree=Z.freeze(new B(uC));function F(t,e,r){let i,s;return e===void 0||Array.isArray(e)?(s=t,r=e,i=[void 0]):(s=e,i=Array.isArray(t)?t:[t]),(n,o)=>{const l=n.constructor.prototype;i.forEach(c=>{const d=Y5(n,c,s);d.read&&typeof d.read=="object"||(d.read={}),d.read.reader=l[o],r&&(d.read.source=(d.read.source||[]).concat(r))})}}let $t=class extends A{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=B.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,r){if(e instanceof B)return e;if(e!=null){const i=new B;return i.read(e,r),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,r){this.cache[e]=r}};a([u()],$t.prototype,"type",void 0),a([u({readOnly:!0})],$t.prototype,"cache",null),a([u({readOnly:!0})],$t.prototype,"extent",null),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],$t.prototype,"hasM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],$t.prototype,"hasZ",void 0),a([u({type:B,json:{write:!0},value:B.WGS84})],$t.prototype,"spatialReference",void 0),a([F("spatialReference")],$t.prototype,"readSpatialReference",null),$t=a([_("esri.geometry.Geometry")],$t);function Cc(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new M("internal:mesh","Mesh geometries are not supported for this operation")}function DC(t){t.forEach(Cc)}const jC=57.29577951308232,VC=.017453292519943;function U9(t){return t*jC}function G9(t){return t*VC}function fie(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Qe.radius))}function nf(t){return t.wkid!=null||t.wkt!=null}const R4=[0,0];function H0(t,e,r,i,s){const n=t,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=e(n.x,n.y,R4,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=e(n.xmin,n.ymin,R4,i),[o.xmax,o.ymax]=e(n.xmax,n.ymax,R4,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const l="paths"in n?n.paths:n.rings,c=[];let d;for(let h=0;h<l.length;h++){const y=l[h];d=[],c.push(d);for(let f=0;f<y.length;f++)d.push(e(y[f][0],y[f][1],[0,0],i)),y[f].length>2&&d[f].push(y[f][2]),y[f].length>3&&d[f].push(y[f][3])}"paths"in o?o.paths=c:o.rings=c}else if("points"in n&&"points"in o){const l=n.points,c=[];for(let d=0;d<l.length;d++)c[d]=e(l[d][0],l[d][1],[0,0],i),l[d].length>2&&c[d].push(l[d][2]),l[d].length>3&&c[d].push(l[d][3]);o.points=c}return s}function A1(t,e){const r=t&&(nf(t)?t:t.spatialReference),i=e&&(nf(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!r||!i)&&(!!ot(i,r)||Zs(i)&&dl(r)||Zs(r)&&dl(i))}function k2(t,e){if(t==null)return null;const r=t.spatialReference,i=e&&(nf(e)?e:e.spatialReference);return A1(r,i)?ot(r,i)?P(t):Zs(i)?H0(t,Ru,B.WebMercator,!1,P(t)):dl(i)?H0(t,F2,B.WGS84,!1,P(t)):null:null}function Ru(t,e,r=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const i=G9(e);return r[0]=G9(t)*Qe.radius,r[1]=Qe.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function F2(t,e,r=[0,0],i=!1){if(t===zd[0])r[0]=-180;else if(t===zd[1])r[0]=180;else{const s=U9(t/Qe.radius);r[0]=i?s:s-360*Math.floor((s+180)/360)}return r[1]=U9(Math.PI/2-2*Math.atan(Math.exp(-e/Qe.radius))),r}function Ja(t,e=!1,r=P(t)){return Cc(t),Cc(r),H0(t,Ru,B.WebMercator,e,r)}function Ou(t,e=!1,r=P(t)){return Cc(t),Cc(r),H0(t,F2,B.WGS84,e,r)}function C_(t,e){const r=t.x-e.x,i=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(r*r+i*i+s*s)}function zC(t){return k_(t,F_)?.[0]??null}function qC(t){return k_(t,F_)?.[1]??null}function k_({x:t,y:e,spatialReference:r},i=[0,0]){if(r){if(Zs(r))return F2(t,e,i);if(Zc(r))return i[0]=t,i[1]=e,i}return null}const F_=[0,0];var L1;const O4=[0,0];function B9(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let se=L1=class extends $t{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const r=t._get("spatialReference");e._set("spatialReference",Z.isFrozen(r)?r:r.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,r,i,s){let n;if(Array.isArray(t))n=t,s=e,t=n[0],e=n[1],r=n[2],i=n[3];else if(t&&typeof t=="object"){if(n=t,t=n.x!=null?n.x:n.longitude,e=n.y!=null?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new B(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)N.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)N.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s?.isWebMercator){const l=Ru(n.longitude,n.latitude,O4);t=l[0],e=l[1]}}}else B9(r)?(s=r,r=null):B9(i)&&(s=i,i=null);const o={x:t,y:e};return o.x==null&&o.y!=null?N.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&N.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return qC(this)}set latitude(t){const{spatialReference:e,x:r}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Ru(r,t,O4)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return zC(this)}set longitude(t){const{y:e,spatialReference:r}=this;t!=null&&r&&(r.isWebMercator?this._set("x",Ru(t,e,O4)[0]):r.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,r){e[r]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new L1;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return L1.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:l}=t;let{x:c,y:d,spatialReference:h}=t;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[c,d]=Ru(c,d),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[c,d]=F2(c,d),h=n}return e===c&&r===d&&i===o&&s===l&&n.wkid===h.wkid}offset(t,e,r){return this.x+=t,this.y+=e,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const t=xr(this.spatialReference);if(!t)return this;let e=this.x;const[r,i]=t.valid,s=2*i;let n;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s),this._set("x",e),this}distance(t){return C_(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};a([u({readOnly:!0})],se.prototype,"cache",null),a([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],se.prototype,"hasM",null),a([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],se.prototype,"hasZ",null),a([u({type:Number})],se.prototype,"latitude",null),a([u({type:Number})],se.prototype,"longitude",null),a([u({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),xe(t=>isNaN(t)?t:Vr(t))],se.prototype,"x",void 0),a([j("x")],se.prototype,"writeX",null),a([F("x")],se.prototype,"readX",null),a([u({type:Number,json:{write:!0}})],se.prototype,"y",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],se.prototype,"z",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],se.prototype,"m",void 0),se=L1=a([_("esri.geometry.Point")],se),se.prototype.toJSON.isDefaultToJSON=!0;const C4=[0,0];function mh(t,e){return e!=null&&dr(t,e.x,e.y,e.z)}function mie(t,e){if(!e.points?.length)return!1;for(const r of e.points)if(!kc(t,r))return!1;return!0}function UC(t,e){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:l}=e;return t.hasZ&&e.hasZ?dr(t,r,i,s)&&dr(t,r,o,s)&&dr(t,n,o,s)&&dr(t,n,i,s)&&dr(t,r,i,l)&&dr(t,r,o,l)&&dr(t,n,o,l)&&dr(t,n,i,l):dr(t,r,i)&&dr(t,r,o)&&dr(t,n,o)&&dr(t,n,i)}function kc(t,e){return dr(t,e[0],e[1])}function GC(t,e){return dr(t,e[0],e[1],e[2])}function dr(t,e,r,i){return e>=t.xmin&&e<=t.xmax&&r>=t.ymin&&r<=t.ymax&&(i==null||!t.hasZ||i>=t.zmin&&i<=t.zmax)}function bg(t,e){return C4[1]=e.y,C4[0]=e.x,BC(t,C4)}function BC(t,e){return _g(t.rings,e)}function _g(t,e){if(!t||t.length<1)return!1;if(WC(t))return W9(!1,t,e);let r=!1;for(let i=0,s=t.length;i<s;i++)r=W9(r,t[i],e);return r}function WC(t){return!Array.isArray(t[0][0])}function W9(t,e,r){const[i,s]=r;let n=t,o=0;for(let l=0,c=e.length;l<c;l++){o++,o===c&&(o=0);const[d,h]=e[l],[y,f]=e[o];(h<s&&f>=s||f<s&&h>=s)&&d+(s-h)/(f-h)*(y-d)<i&&(n=!n)}return n}function HC(t,e){return mh(t,e)}function ZC(t,e){const r=t.hasZ&&e.hasZ;let i,s,n;if(t.xmin<=e.xmin){if(i=e.xmin,t.xmax<i)return!1}else if(i=t.xmin,e.xmax<i)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(r&&e.hasZ){if(t.zmin<=e.zmin){if(n=e.zmin,t.zmax<n)return!1}else if(n=t.zmin,e.zmax<n)return!1}return!0}function JC(t,e){const{points:r,hasZ:i}=e,s=i?GC:kc;for(const n of r)if(s(t,n))return!0;return!1}const hl=[0,0],yl=[0,0],fl=[0,0],ml=[0,0],QC=[hl,yl,fl,ml],A_=[[fl,hl],[hl,yl],[yl,ml],[ml,fl]];function YC(t,e){return KC(t,e.rings)}function KC(t,e){hl[0]=t.xmin,hl[1]=t.ymax,yl[0]=t.xmax,yl[1]=t.ymax,fl[0]=t.xmin,fl[1]=t.ymin,ml[0]=t.xmax,ml[1]=t.ymin;for(const r of QC)if(_g(e,r))return!0;for(const r of e){if(!r.length)continue;let i=r[0];if(kc(t,i))return!0;for(let s=1;s<r.length;s++){const n=r[s];if(kc(t,n)||L_(i,n,A_))return!0;i=n}}return!1}function XC(t,e){hl[0]=t.xmin,hl[1]=t.ymax,yl[0]=t.xmax,yl[1]=t.ymax,fl[0]=t.xmin,fl[1]=t.ymin,ml[0]=t.xmax,ml[1]=t.ymin;const r=e.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(kc(t,s))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(kc(t,o)||L_(s,o,A_))return!0;s=o}}return!1}const kt=[0,0];function ek(t){for(let e=0;e<t.length;e++){const r=t[e];for(let s=0;s<r.length-1;s++){const n=r[s],o=r[s+1];for(let l=e+1;l<t.length;l++)for(let c=0;c<t[l].length-1;c++){const d=t[l][c],h=t[l][c+1];if(of(n,o,d,h,kt)&&!(kt[0]===n[0]&&kt[1]===n[1]||kt[0]===d[0]&&kt[1]===d[1]||kt[0]===o[0]&&kt[1]===o[1]||kt[0]===h[0]&&kt[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let n=i-1;s===0&&(n=i-2);const o=r[s],l=r[s+1];for(let c=s+2;c<n;c++){const d=r[c],h=r[c+1];if(of(o,l,d,h,kt)&&!(kt[0]===o[0]&&kt[1]===o[1]||kt[0]===d[0]&&kt[1]===d[1]||kt[0]===l[0]&&kt[1]===l[1]||kt[0]===h[0]&&kt[1]===h[1]))return!0}}}return!1}function L_(t,e,r){for(let i=0;i<r.length;i++)if(of(t,e,r[i][0],r[i][1]))return!0;return!1}function of(t,e,r,i,s){const[n,o]=t,[l,c]=e,[d,h]=r,[y,f]=i,m=y-d,g=n-d,v=l-n,b=f-h,S=o-h,$=c-o,E=b*v-m*$;if(E===0)return!1;const T=(m*S-b*g)/E,R=(v*S-$*g)/E;return T>=0&&T<=1&&R>=0&&R<=1&&(s&&(s[0]=n+T*(l-n),s[1]=o+T*(c-o)),!0)}function tk(t){switch(t){case"esriGeometryEnvelope":case"extent":return ZC;case"esriGeometryMultipoint":case"multipoint":return JC;case"esriGeometryPoint":case"point":return HC;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return YC;case"esriGeometryPolyline":case"polyline":return XC}}var Zi;function rk(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function oo(t,e,r){return e==null?r:r==null?e:t(e,r)}let le=Zi=class extends $t{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,r,i,s){return rk(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?B.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:r,ymax:i,spatialReference:s??B.WGS84}}static fromPoint(t){return new Zi({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new se({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Zi;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,r=t.spatialReference;return e&&r&&!e.equals(r)&&A1(e,r)&&(t=e.isWebMercator?Ja(t):Ou(t,!0)),t.type==="point"?mh(this,t):t.type==="extent"&&UC(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,r=t.spatialReference;return e&&r&&!e.equals(r)&&A1(e,r)&&(t=e.isWebMercator?Ja(t):Ou(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),r=this.width*e,i=this.height*e;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,r=t.spatialReference;return e&&r&&!ot(e,r)&&A1(e,r)&&(t=e.isWebMercator?Ja(t):Ou(t,!0)),tk(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,r){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=oo(Math.min,this.zmin,t.zmin),this.zmax=oo(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=oo(Math.min,this.mmin,t.mmin),this.mmax=oo(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=oo(Math.max,this.zmin,t.zmin),this.zmax=oo(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=oo(Math.max,this.mmin,t.mmin),this.mmax=oo(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=xr(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,r=this._getCM(t);if(r){const i=e.isWebMercator?Ou(r):r;this.xmin-=r.x,this.xmax-=r.x,e.isWebMercator||(i.x=k4(i.x,t).x),this.spatialReference=new B(Sl((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(t){let e=null;const[r,i]=t.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(e=this.center),e}_normalize(t,e,r){const i=this.spatialReference;if(!i)return this;const s=r??xr(i);if(s==null)return this;const n=this._getParts(s).map(c=>c.extent);if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return n;let o=!0,l=!0;return n.forEach(c=>{c.hasZ||(o=!1),c.hasM||(l=!1)}),{rings:n.map(c=>{const d=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(o){const h=(c.zmax-c.zmin)/2;for(let y=0;y<d.length;y++)d[y].push(h)}if(l){const h=(c.mmax-c.mmin)/2;for(let y=0;y<d.length;y++)d[y].push(h)}return d}),hasZ:o,hasM:l,spatialReference:i}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:n,spatialReference:o}=this,l=this.width,c=this.xmin,d=this.xmax;let h;t=t||xr(o);const[y,f]=t.valid;h=k4(this.xmin,t);const m=h.x,g=h.frameId;h=k4(this.xmax,t);const v=h.x,b=h.frameId,S=m===v&&l>0;if(l>2*f){const $=new Zi(c<d?m:v,s,f,n,o),E=new Zi(y,s,c<d?v:m,n,o),T=new Zi(0,s,f,n,o),R=new Zi(y,s,0,n,o),O=[],z=[];$.contains(T)&&O.push(g),$.contains(R)&&z.push(g),E.contains(T)&&O.push(b),E.contains(R)&&z.push(b);for(let U=g+1;U<b;U++)O.push(U),z.push(U);e.push({extent:$,frameIds:[g]},{extent:E,frameIds:[b]},{extent:T,frameIds:O},{extent:R,frameIds:z})}else m>v||S?e.push({extent:new Zi(m,s,f,n,o),frameIds:[g]},{extent:new Zi(y,s,v,n,o),frameIds:[b]}):e.push({extent:new Zi(m,s,v,n,o),frameIds:[g]});this.cache._parts=e}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<e.length;n++)e[n].extent.set(s)}return e}};function k4(t,e){const[r,i]=e.valid,s=2*i;let n,o=0;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s,o=n):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s,o=-n),{x:t,frameId:o}}a([u({readOnly:!0})],le.prototype,"cache",null),a([u({readOnly:!0})],le.prototype,"center",null),a([u({readOnly:!0})],le.prototype,"extent",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],le.prototype,"hasM",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],le.prototype,"hasZ",null),a([u({readOnly:!0})],le.prototype,"height",null),a([u({readOnly:!0})],le.prototype,"width",null),a([u({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],le.prototype,"xmin",void 0),a([u({type:Number,json:{write:!0}})],le.prototype,"ymin",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],le.prototype,"mmin",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],le.prototype,"zmin",void 0),a([u({type:Number,json:{write:!0}})],le.prototype,"xmax",void 0),a([u({type:Number,json:{write:!0}})],le.prototype,"ymax",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],le.prototype,"mmax",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],le.prototype,"zmax",void 0),le=Zi=a([_("esri.geometry.Extent")],le),le.prototype.toJSON.isDefaultToJSON=!0;let zh;function ik(t){return zh&&!zh.destroyed||(zh=t()),zh}var af;const sk=new be({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let rt=af=class extends Z{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new af({categories:this.categories?P(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=k2(this.extent,B.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const n={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>sk.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...e,...n}}}};a([u()],rt.prototype,"categories",void 0),a([u()],rt.prototype,"disableExtraQuery",void 0),a([u({type:le})],rt.prototype,"extent",void 0),a([u()],rt.prototype,"filter",void 0),a([u()],rt.prototype,"num",void 0),a([u()],rt.prototype,"query",void 0),a([u()],rt.prototype,"sortField",void 0),a([u()],rt.prototype,"sortOrder",null),a([u()],rt.prototype,"start",void 0),rt=af=a([_("esri.portal.PortalQueryParams")],rt);var lf;let Xe=lf=class extends A{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const r=e.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):r})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new M("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new lf({sourceJSON:t});return e.read(t),e}queryItems(t,e){let r=Zr(rt,t);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new rt,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",e)):(r=r?r.clone():new rt,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,e))}_fetchCategorySchemaSet(t,e){const r=this.portal;return r.fetchSelf(r.authMode,!0,e).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const n=new rt({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(n,e)}throw new M("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],n=new rt({num:1,query:`typekeywords:"${t}"`});return s.queryItems(n,e)}throw new M("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",e).then(s=>{const n=s?.categorySchema;return n?.length?n:[]}):[])}};a([u()],Xe.prototype,"access",void 0),a([u({type:Date})],Xe.prototype,"created",void 0),a([u()],Xe.prototype,"description",void 0),a([u()],Xe.prototype,"id",void 0),a([u()],Xe.prototype,"isInvitationOnly",void 0),a([u({type:Date})],Xe.prototype,"modified",void 0),a([u()],Xe.prototype,"owner",void 0),a([u()],Xe.prototype,"portal",void 0),a([u()],Xe.prototype,"snippet",void 0),a([u()],Xe.prototype,"sortField",void 0),a([u()],Xe.prototype,"sortOrder",void 0),a([u()],Xe.prototype,"sourceJSON",void 0),a([u()],Xe.prototype,"tags",void 0),a([u()],Xe.prototype,"thumbnail",void 0),a([u({readOnly:!0})],Xe.prototype,"thumbnailUrl",null),a([u()],Xe.prototype,"title",void 0),a([u({readOnly:!0})],Xe.prototype,"url",null),Xe=lf=a([_("esri.portal.PortalGroup")],Xe);let ya=class extends Z{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};a([u()],ya.prototype,"nextQueryParams",void 0),a([u()],ya.prototype,"queryParams",void 0),a([u()],ya.prototype,"results",void 0),a([u()],ya.prototype,"total",void 0),ya=a([_("esri.portal.PortalQueryResult")],ya);let sn=class extends A{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new M("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};a([u({type:Date})],sn.prototype,"created",void 0),a([u()],sn.prototype,"id",void 0),a([u()],sn.prototype,"portal",void 0),a([u()],sn.prototype,"title",void 0),a([u({readOnly:!0})],sn.prototype,"url",null),a([u()],sn.prototype,"username",void 0),sn=a([_("esri.portal.PortalFolder")],sn);var uf;let Ie=uf=class extends A{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,r=t?.data,i=t?.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+(typeof i=="string"?i:i.id)),this.portal.request(n+"/addItem",s).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let r=this.userContentUrl;t.ownerFolder&&(r+="/"+t.ownerFolder);const i=e?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${t.id}/delete`,{method:"post",query:i}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const r=this.userContentUrl+"/deleteItems",i=[],s=t.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:e}},o=await this.portal.request(r,n);for(const l of o.results){const c=t.find(y=>l.itemId===y.id),d=l.success;let h=null;d?(c.id=null,c.portal=null):l.error&&(h=new M("portal:delete-item-failed",l.error.message,l.error)),i.push({item:c,success:d,error:h})}}return i}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let r;return r=e&&e.folders?e.folders.map(i=>{const s=sn.fromJSON(i);return s.portal=this.portal,s}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(r=>{const i=Xe.fromJSON(r);return i.portal=this.portal,i}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:r}=await L(()=>Promise.resolve().then(()=>N_),void 0),i={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:i});let n;return s?.items?(n=s.items.map(o=>{const l=r.fromJSON(o);return l.portal=this.portal,l}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Xe({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new M("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const r=this.userContentUrl,i=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(r+`/items/${t.id}/restore`,{method:"post",query:i})}toJSON(){throw new M("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new uf({sourceJSON:t});return e.read(t),e}};a([u()],Ie.prototype,"access",void 0),a([u({type:Date})],Ie.prototype,"created",void 0),a([u()],Ie.prototype,"culture",void 0),a([u()],Ie.prototype,"description",void 0),a([u()],Ie.prototype,"email",void 0),a([u()],Ie.prototype,"favGroupId",void 0),a([u()],Ie.prototype,"fullName",void 0),a([u()],Ie.prototype,"id",void 0),a([u({type:Date})],Ie.prototype,"modified",void 0),a([u()],Ie.prototype,"orgId",void 0),a([u()],Ie.prototype,"portal",void 0),a([u()],Ie.prototype,"preferredView",void 0),a([u()],Ie.prototype,"privileges",void 0),a([u()],Ie.prototype,"region",void 0),a([u()],Ie.prototype,"role",void 0),a([u()],Ie.prototype,"roleId",void 0),a([u()],Ie.prototype,"sourceJSON",void 0),a([u()],Ie.prototype,"thumbnail",void 0),a([u({readOnly:!0})],Ie.prototype,"thumbnailUrl",null),a([u()],Ie.prototype,"units",void 0),a([u({readOnly:!0})],Ie.prototype,"userContentUrl",null),a([u({readOnly:!0})],Ie.prototype,"url",null),a([u()],Ie.prototype,"username",void 0),a([u()],Ie.prototype,"userLicenseTypeId",void 0),a([u()],Ie.prototype,"userType",void 0),Ie=uf=a([_("esri.portal.PortalUser")],Ie);var Qr;let np;const H9={PortalGroup:()=>Promise.resolve({default:Xe}),PortalItem:()=>L(()=>Promise.resolve().then(()=>N_),void 0),PortalUser:()=>Promise.resolve({default:Ie})};var js;let D=(js=class extends xl(Hc){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=qr.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){Z9.unregister(this),this.defaultBasemap=st(this.defaultBasemap),this.defaultDevBasemap=st(this.defaultDevBasemap),this.defaultVectorBasemap=st(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Ze(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const r of e)qr.request.trustedServers.includes(r)||qr.request.trustedServers.push(r);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,r=!e||this.canSearchPublic;return this.id&&!r?` AND orgid:${this.id}`:null}get hasAPIKey(){return bR(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const r=e.indexOf("/sharing");e=r>0?e.slice(0,r):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,r=this.thumbnail;return e&&r?this._normalizeSSL(e+"/portals/self/resources/"+r):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let r=null;return e&&(r=Ie.fromJSON(e),r.portal=this),r}load(e){const r=L(async()=>{const{default:i}=await Promise.resolve().then(()=>Nk);return{default:i}},void 0).then(({default:i})=>{Re(e),np=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{if(!this.hasAPIKey&&dt){const s=dt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Qr.AUTH_MODE_AUTO&&this.authMode!==Qr.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",nk(new WeakRef(this))),Z9.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),r=(await L(async()=>{const{default:i}=await import("./money-tides-ElevationLayer-D-a94YG9.js");return{default:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))).default;return e?e.map(i=>new r({id:i.id,url:i.url})):[]}async fetchBasemaps(e,r){const i=await this._fetchBasemaps(e,r);if(r?.include3d===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(e,r);i.unshift(...s)}return i}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const r=new rt;r.query=this.default3DBasemapQuery,r.disableExtraQuery=!0;const i=(await this.queryItems(r,e)).results.find(s=>s.type==="Web Scene");return i?new np({portalItem:i}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(r=>r.categorySchema):zs(e)?Promise.reject(Mt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(r=>r.classificationSchema):null}fetchFeaturedGroups(e){const r=this.featuredGroups,i=new rt({num:100,sortField:"title"});if(r?.length){const s=[];for(const n of r)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return zs(e)?Promise.reject(Mt()):Promise.resolve([])}fetchRegions(e){const r=this.user?.culture||this.culture||qn();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:r}})}fetchSettings(e){const r=this.user?.culture||this.culture||qn();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:r}})}static getDefault(){return ik(()=>new Qr)}queryGroups(e,r){return this.queryPortal("/community/groups",e,"PortalGroup",r)}queryItems(e,r){return this.queryPortal("/search",e,"PortalItem",r)}queryUsers(e,r){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",r)}fetchSelf(e=this.authMode,r=!1,i){const s=this.restUrl+"/portals/self",n={authMode:e,query:{culture:qn().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),r&&(n.query.default=!0),this.request(s,n)}queryPortal(e,r,i,s){const n=Zr(rt,r),o=l=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...s}).then(c=>{const d=n.clone();return d.start=c.nextStart,new ya({nextQueryParams:d,queryParams:n,total:c.total,results:Qr._resultsToTypedArray(l,{portal:this},c,s)})}).then(c=>Promise.all(c.results.map(d=>typeof d.when=="function"?d.when():c)).then(()=>c,d=>(ki(d),c)));return i&&H9[i]?H9[i]().then(({default:l})=>(Re(s),o(l))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new M("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Qr.AUTH_MODE_ANONYMOUS||this.authMode===Qr.AUTH_MODE_NO_PROMPT&&!dt)return Promise.reject(new M("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=r=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(r||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=r,this.fetchSelf("immediate"))):this.user&&this.credential===r?null:(this.credential=r,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return dt?dt.getCredential(this.restUrl,{prompt:this.authMode!==Qr.AUTH_MODE_NO_PROMPT}).then(r=>e(r)):e(this.credential)}normalizeUrl(e){const r=this.credential?.token;return this._normalizeSSL(r?e+(e.includes("?")?"&":"?")+"token="+r:e)}requestToTypedArray(e,r,i){return this.request(e,r).then(s=>{const n=Qr._resultsToTypedArray(i,{portal:this},s);return Promise.all(n.map(o=>typeof o.when=="function"?o.when():s)).then(()=>n,()=>n)})}request(e,r={}){const i={f:"json",...r.query},{authMode:s=this.authMode===Qr.AUTH_MODE_ANONYMOUS||this.authMode===Qr.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:o=!1,method:l="auto",responseType:c="json",signal:d}=r,h={authMode:s,body:n,cacheBust:o,method:l,query:i,responseType:c,timeout:0,signal:d};return r.withCredentials&&(h.withCredentials=!0),Le(this._normalizeSSL(e),h).then(y=>y.data)}toJSON(){throw new M("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Qr({sourceJSON:e})}_getHelperService(e){const r=this.helperServices?.[e];if(!r)throw new M("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return r}async _fetchBasemaps(e,r){const i=new rt;i.query=e||(Qy()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,r);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,r);return o.total?o.results.filter(l=>l.type==="Web Map").map(l=>new np({portalItem:l})):[]}async _fetchBasemaps3D(e,r){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];if(Qy())return[];const s=new rt({query:i,disableExtraQuery:!0}),n=await this.queryGroups(s,r);if(!n.total)return[];const o=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=o.sortField||"name",s.sortOrder=o.sortOrder||"desc";const l=await o.queryItems(s,r);return l.total?l.results.filter(c=>c.type==="Web Scene").map(c=>new np({portalItem:c})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const r=np.fromJSON(e);return r.portalItem={portal:this},r}return null}static _resultsToTypedArray(e,r,i,s){let n;if(i){const o=s!=null?s.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||r)&&(n=n.map(l=>{const c=Object.assign(e?e.fromJSON(l):l,r);return typeof c.load=="function"&&c.load(o),c}))}else n=[];return n}},Qr=js,js.AUTH_MODE_ANONYMOUS="anonymous",js.AUTH_MODE_AUTO="auto",js.AUTH_MODE_IMMEDIATE="immediate",js.AUTH_MODE_NO_PROMPT="no-prompt",js);a([u()],D.prototype,"access",void 0),a([u()],D.prototype,"allSSL",void 0),a([u()],D.prototype,"authMode",void 0),a([u()],D.prototype,"authorizedCrossOriginDomains",void 0),a([F("authorizedCrossOriginDomains")],D.prototype,"readAuthorizedCrossOriginDomains",null),a([u()],D.prototype,"basemapGalleryGroupQuery",void 0),a([u({json:{name:"3DBasemapGalleryGroupQuery"}})],D.prototype,"basemapGalleryGroupQuery3D",void 0),a([u({json:{name:"g3DTilesGalleryGroupQuery"}})],D.prototype,"g3DTilesGalleryGroupQuery",void 0),a([u({json:{name:"g3dTilesEnabled"}})],D.prototype,"g3dTilesEnabled",void 0),a([u()],D.prototype,"bingKey",void 0),a([u()],D.prototype,"canListApps",void 0),a([u()],D.prototype,"canListData",void 0),a([u()],D.prototype,"canListPreProvisionedItems",void 0),a([u()],D.prototype,"canProvisionDirectPurchase",void 0),a([u()],D.prototype,"canSearchPublic",void 0),a([u()],D.prototype,"canShareBingPublic",void 0),a([u()],D.prototype,"canSharePublic",void 0),a([u()],D.prototype,"canSignInArcGIS",void 0),a([u()],D.prototype,"canSignInIDP",void 0),a([u()],D.prototype,"colorSetsGroupQuery",void 0),a([u()],D.prototype,"commentsEnabled",void 0),a([u({type:Date})],D.prototype,"created",void 0),a([u()],D.prototype,"credential",void 0),a([u()],D.prototype,"culture",void 0),a([u()],D.prototype,"currentVersion",void 0),a([u()],D.prototype,"customBaseUrl",void 0),a([u()],D.prototype,"default3DBasemapQuery",void 0),a([u()],D.prototype,"defaultBasemap",void 0),a([F("defaultBasemap")],D.prototype,"readDefaultBasemap",null),a([u()],D.prototype,"defaultDevBasemap",void 0),a([F("defaultDevBasemap")],D.prototype,"readDefaultDevBasemap",null),a([u({type:le})],D.prototype,"defaultExtent",void 0),a([u()],D.prototype,"defaultVectorBasemap",void 0),a([F("defaultVectorBasemap")],D.prototype,"readDefaultVectorBasemap",null),a([u()],D.prototype,"description",void 0),a([u()],D.prototype,"devBasemapGalleryGroupQuery",void 0),a([u()],D.prototype,"eueiEnabled",void 0),a([u({readOnly:!0})],D.prototype,"extraQuery",null),a([u()],D.prototype,"featuredGroups",void 0),a([u()],D.prototype,"featuredItemsGroupQuery",void 0),a([u()],D.prototype,"galleryTemplatesGroupQuery",void 0),a([u()],D.prototype,"layoutGroupQuery",void 0),a([u()],D.prototype,"livingAtlasGroupQuery",void 0),a([u({readOnly:!0})],D.prototype,"hasAPIKey",null),a([u()],D.prototype,"hasCategorySchema",void 0),a([u()],D.prototype,"hasClassificationSchema",void 0),a([u()],D.prototype,"helpBase",void 0),a([u()],D.prototype,"helperServices",void 0),a([u()],D.prototype,"helpMap",void 0),a([u()],D.prototype,"homePageFeaturedContent",void 0),a([u()],D.prototype,"homePageFeaturedContentCount",void 0),a([u()],D.prototype,"httpPort",void 0),a([u()],D.prototype,"httpsPort",void 0),a([u()],D.prototype,"id",void 0),a([u()],D.prototype,"ipCntryCode",void 0),a([u({readOnly:!0})],D.prototype,"isOrganization",null),a([u()],D.prototype,"isPortal",void 0),a([u()],D.prototype,"isReadOnly",void 0),a([u({readOnly:!0})],D.prototype,"itemPageUrl",null),a([u()],D.prototype,"layerTemplatesGroupQuery",void 0),a([u()],D.prototype,"maxTokenExpirationMinutes",void 0),a([u({type:Date})],D.prototype,"modified",void 0),a([u()],D.prototype,"name",void 0),a([u()],D.prototype,"portalHostname",void 0),a([u()],D.prototype,"portalMode",void 0),a([u()],D.prototype,"portalProperties",void 0),a([u()],D.prototype,"region",void 0),a([u()],D.prototype,"recycleBinEnabled",void 0),a([u({readOnly:!0})],D.prototype,"restUrl",null),a([u()],D.prototype,"rotatorPanels",void 0),a([u()],D.prototype,"showHomePageDescription",void 0),a([u()],D.prototype,"sourceJSON",void 0),a([u()],D.prototype,"staticImagesUrl",void 0),a([u({json:{name:"2DStylesGroupQuery"}})],D.prototype,"stylesGroupQuery2d",void 0),a([u({json:{name:"stylesGroupQuery"}})],D.prototype,"stylesGroupQuery3d",void 0),a([u()],D.prototype,"supportsHostedServices",void 0),a([u()],D.prototype,"symbolSetsGroupQuery",void 0),a([u()],D.prototype,"templatesGroupQuery",void 0),a([u()],D.prototype,"thumbnail",void 0),a([u({readOnly:!0})],D.prototype,"thumbnailUrl",null),a([u()],D.prototype,"units",void 0),a([u()],D.prototype,"url",void 0),a([u()],D.prototype,"urlKey",void 0),a([F("urlKey")],D.prototype,"readUrlKey",null),a([u()],D.prototype,"user",void 0),a([F("user")],D.prototype,"readUser",null),a([u()],D.prototype,"use3dBasemaps",void 0),a([u()],D.prototype,"useDefault3dBasemap",void 0),a([u()],D.prototype,"useStandardizedQuery",void 0),a([u()],D.prototype,"useVectorBasemaps",void 0),a([u()],D.prototype,"vectorBasemapGalleryGroupQuery",void 0),D=Qr=a([_("esri.portal.Portal")],D);const Z9=new FinalizationRegistry(t=>{t.remove()});function nk(t){const e=dt;return()=>{const r=t.deref();r&&e.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let nn=class extends Z{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:J9(e.path,e.portalItem)}:e}set path(e){e!=null&&Wc(e)?N.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return J9(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",r){const i=this.cdnUrl;if(i==null)throw new M("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:e,query:{token:this.portalItem.apiKey,_ts:r?.cacheBust?Date.now():null},signal:r?.signal})}async update(e,r){const{addOrUpdateResources:i}=await L(()=>import("./money-tides-resourceUtils-B6q7PpjC.js"),__vite__mapDeps([13,3,1,2,4,5]));return await i(this.portalItem,[{resource:this,content:e,compress:r?.compress,access:r?.access}],"update",r),this}hasPath(){return this.path!=null}};function J9(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&Wc(t)&&(t=_R(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}a([u()],nn.prototype,"portalItem",void 0),a([u({type:String,value:null})],nn.prototype,"path",null),a([xe("path")],nn.prototype,"_castPath",null),a([u({type:String,readOnly:!0})],nn.prototype,"url",null),a([u({type:String,readOnly:!0})],nn.prototype,"cdnUrl",null),a([u({type:String,readOnly:!0})],nn.prototype,"itemRelativeUrl",null),nn=a([_("esri.portal.PortalItemResource")],nn);let Ua=class extends Z{constructor(e){super(e),this.created=null,this.rating=null}};a([u({type:Date})],Ua.prototype,"created",void 0),a([u()],Ua.prototype,"rating",void 0),Ua=a([_("esri.portal.PortalRating")],Ua);var fa;const ok=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),ak=new Set(["KML","GeoJson","CSV"]);let ce=fa=class extends xl(Hc){static from(t){return Tc(fa,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let r=t;return t==="Feature Service"||t==="Feature Collection"?r=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?r=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?r="Scene Layer":t==="Video Service"?r="Video Layer":t==="Scene Package"?r="Scene Layer Package":t==="Stream Service"?r="Feature Layer":t==="Geoprocessing Service"?r=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?r="GeoEnrichment Service":t==="Geocoding Service"?r="Locator":t==="Microsoft Powerpoint"?r="Microsoft PowerPoint":t==="GeoJson"?r="GeoJSON":t==="Globe Service"?r="Globe Layer":t==="Vector Tile Service"?r="Tile Layer":t==="netCDF"?r="NetCDF":t==="Map Service"?r=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?r=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?r="Big Data File Share":t==="Compact Tile Package"?r="Tile Package (tpkx)":t==="Raster function template"?r="Raster Function Template":t==="OGCFeatureServer"?r="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?r="Instant App":t==="Insights Page"?r="Insights Report":t==="Excalibur Imagery Project"?r="Excalibur Project":t==="3DTiles Service"?r="3D tiles layer":t==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(t){return t&&t.length?new le(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,n=!1,o=!1,l=!1,c=!1,d=!1,h=!1,y=!1,f=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(n=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),l=e.includes("Route Layer"),c=e.includes("Markup"),d=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),s=d&&o?"spatiotemporaltable":o?"table":l?"routelayer":c?"markup":d?"spatiotemporal":h?"utilitynetwork":n?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(d=e.includes("Spatiotemporal"),y=e.includes("Relational"),s=d||y?"mapimages":n||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="reality mapping project"?s="realitymappingproject":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="urban project"?s="urbanproject":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro presentation"?s="propresentation":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(f=e.includes("Map"),s=f?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",s?ft(r+s+i+".png"):null}get isLayer(){return this.type!=null&&ok.has(this.type)}get itemCdnUrl(){return SR(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=D.getDefault()),r=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},r=t instanceof Ua?t.rating:t;return r==null||isNaN(r)||typeof t!="number"||(e.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Ua({rating:r,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:P(this.applicationProxies),avgRating:this.avgRating,categories:P(this.categories),classification:P(this.classification),created:P(this.created),culture:this.culture,description:this.description,extent:P(this.extent),groupCategories:P(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:P(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:P(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:P(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:P(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new fa({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const r=t[e];r&&(t[e]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Ua(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},fa)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?r.query.text=e:typeof e=="object"&&(r.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new M("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new M("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:r}=this;await e.signIn();const{copyResources:i,folder:s,tags:n,title:o}=t||{},l={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s?.id,includeResources:!!i,tags:n?.join(","),title:o}},{itemId:c}=await e.request(`${r}/copy`,l);return new fa({id:c,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,r=t.filename,i={method:"post"};if(typeof e=="string")K5(e)?i.query={data:e}:i.query={url:La(e)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",e,r):s.append("file",e),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new M("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:r}=await L(()=>import("./money-tides-resourceUtils-B6q7PpjC.js"),__vite__mapDeps([13,3,1,2,4,5]));return r(this,t,e)}async addResource(t,e,r){const{addOrUpdateResources:i}=await L(()=>import("./money-tides-resourceUtils-B6q7PpjC.js"),__vite__mapDeps([13,3,1,2,4,5]));return t.portalItem=this,await i(this,[{resource:t,content:e,compress:r?.compress,access:r?.access}],"add",r),t}async removeResource(t,e){const{removeResource:r}=await L(()=>import("./money-tides-resourceUtils-B6q7PpjC.js"),__vite__mapDeps([13,3,1,2,4,5]));if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new M("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await L(()=>import("./money-tides-resourceUtils-B6q7PpjC.js"),__vite__mapDeps([13,3,1,2,4,5]));return e(this,t)}resourceFromPath(t){return new nn({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:P(this.categories),classification:P(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:P(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:P(this.typeKeywords),url:this.url};return xR(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new fa({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};a([u({type:["private","shared","org","public"]})],ce.prototype,"access",void 0),a([u()],ce.prototype,"accessInformation",void 0),a([u({type:String})],ce.prototype,"apiKey",void 0),a([u({json:{read:{source:"appProxies"}}})],ce.prototype,"applicationProxies",void 0),a([u()],ce.prototype,"avgRating",void 0),a([u()],ce.prototype,"categories",void 0),a([u()],ce.prototype,"classification",void 0),a([u({type:Date})],ce.prototype,"created",void 0),a([u()],ce.prototype,"culture",void 0),a([u()],ce.prototype,"description",void 0),a([u({readOnly:!0})],ce.prototype,"displayName",null),a([u({type:le})],ce.prototype,"extent",void 0),a([F("extent")],ce.prototype,"readExtent",null),a([u()],ce.prototype,"groupCategories",void 0),a([u({readOnly:!0})],ce.prototype,"iconUrl",null),a([u()],ce.prototype,"id",void 0),a([u({readOnly:!0})],ce.prototype,"isLayer",null),a([u({type:Boolean,readOnly:!0})],ce.prototype,"isOrgItem",void 0),a([u()],ce.prototype,"itemControl",void 0),a([u({readOnly:!0})],ce.prototype,"itemPageUrl",null),a([u({readOnly:!0})],ce.prototype,"itemUrl",null),a([u()],ce.prototype,"licenseInfo",void 0),a([u({type:Date})],ce.prototype,"modified",void 0),a([u()],ce.prototype,"name",void 0),a([u()],ce.prototype,"numComments",void 0),a([u()],ce.prototype,"numRatings",void 0),a([u()],ce.prototype,"numViews",void 0),a([u()],ce.prototype,"owner",void 0),a([u()],ce.prototype,"ownerFolder",void 0),a([u({type:D})],ce.prototype,"portal",void 0),a([u()],ce.prototype,"screenshots",void 0),a([u()],ce.prototype,"size",void 0),a([u()],ce.prototype,"snippet",void 0),a([u()],ce.prototype,"sourceJSON",void 0),a([u({type:String})],ce.prototype,"sourceUrl",void 0),a([u({type:String})],ce.prototype,"spatialReference",void 0),a([u()],ce.prototype,"tags",void 0),a([u()],ce.prototype,"thumbnail",void 0),a([u({readOnly:!0})],ce.prototype,"thumbnailUrl",null),a([u()],ce.prototype,"title",void 0),a([u()],ce.prototype,"type",void 0),a([u()],ce.prototype,"typeKeywords",void 0),a([u({type:String,json:{read(t,e){if(ak.has(e.type)){const r=this.portal?.restUrl;t||=r&&this.id?`${r}/content/items/${this.id}/data`:null}return t}}})],ce.prototype,"url",void 0),a([u({readOnly:!0})],ce.prototype,"userItemUrl",null),ce=fa=a([_("esri.portal.PortalItem")],ce);const N_=Object.freeze(Object.defineProperty({__proto__:null,get default(){return ce}},Symbol.toStringTag,{value:"Module"}));async function lk(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,r=await $R("esri/t9n/basemaps");return r[t]||r[e]}const cf={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return ft("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return ft("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return ft("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return ft("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return ft("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return ft("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}},Q9=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]),uk="shortOffset";function ck(t){return"timeZoneIANA"in t}function pk(t){return t.startsWith("UTC")}function Fc(t,e=!1){return{json:{read:{source:t,reader:(r,i)=>i[t]?N1(i[t]):null},write:!!e&&{allowNull:!0,writer(r,i){i[t]=r?dk(r):null}}}}}function N1(t,e=Hn){return t?ck(t)?t.timeZoneIANA:hk(t,e):e}function dk(t){return{timeZoneIANA:t}}function hk(t,e=Hn){if(!t||!Q9.has(t.timeZone))return e;const r=Q9.get(t.timeZone);return pk(t.timeZone)||t.respectsDaylightSaving?r:yk(r)}function yk(t){const e=Pe.local().setZone(t),r=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Mc.instance(-r).formatOffset(0,"narrow")}`}function _ie(t,e,r,i,s){if(e&&s==="date")return{timeZone:Ad,timeZoneName:void 0};const n=i.hour,o=r===ul;return{timeZone:o?s==="timestamp-offset"?void 0:t??Ad:r,timeZoneName:o&&n?uk:void 0}}function fk(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return t===Hn||t===ul||e.has(t.toLowerCase())||r.has(t.toLowerCase())}let on=class extends Z{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let r=e==="local"||e==="global"?e:TR(e??qn())??"global";return r=r==="no"?"nb":r,r}};a([u()],on.prototype,"apiKey",void 0),a([u()],on.prototype,"id",void 0),a([u()],on.prototype,"language",void 0),a([u()],on.prototype,"places",void 0),a([u()],on.prototype,"serviceUrl",void 0),a([u()],on.prototype,"worldview",void 0),on=a([_("esri.support.BasemapStyle")],on);const mk=on,D_=Symbol("BasemapInstance");function xie(t){return t!=null&&typeof t=="object"&&D_ in t}let j_=0;const gh=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+j_++})}};return r=a([_("esri.core.Identifiable")],r),r},Sg=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:j_++})}};return r=a([_("esri.core.Identifiable.NumericIdentifiable")],r),r};gh(class{});async function gk(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:r}=await L(async()=>{const{fromItem:i}=await import("./money-tides-portalLayers-D5TuW1js.js");return{fromItem:i}},__vite__mapDeps([14,3,1,2,4,5,15,16,17,18,10,11,12]));try{return await r(e)}catch(i){const s=e?.portalItem,n=s?.id||"unset",o=s?.portal?.url||qr.portalUrl;throw N.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",i),i}}const Y9={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function F4(t,e,r,i=Hn){const s=new ch(jb(i)),n=Pe.fromJSDate(t,{zone:s}),o=r==="decades"||r==="centuries"?"year":z_(r);return r==="decades"&&(e*=10),r==="centuries"&&(e*=100),n.plus({[o]:e}).toJSDate()}function $ie(t,e,r="milliseconds"){const i=t.getTime(),s=V_(e,r,"milliseconds");return new Date(i+s)}function K9(t,e,r=Hn){const i=new ch(jb(r)),s=Pe.fromJSDate(t,{zone:i});if(e==="decades"||e==="centuries"){const o=s.startOf("year"),{year:l}=o,c=l-l%(e==="decades"?10:100);return o.set({year:c}).toJSDate()}const n=z_(e);return s.startOf(n).toJSDate()}function V_(t,e,r){return t===0?0:t*Y9[e]/Y9[r]}function Tie(t,e){return t&&e?t.intersection(e):t||e}function z_(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var _i,Ku;let it=(Ku=class extends A{static get allTime(){return X9}static get empty(){return vk}static fromArray(e){return new _i({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,r){return r.end!=null?new Date(r.end):null}writeEnd(e,r){r.end=e?.getTime()??null}get isAllTime(){return this.equals(_i.allTime)}get isEmpty(){return this.equals(_i.empty)}readStart(e,r){return r.start!=null?new Date(r.start):null}writeStart(e,r){r.start=e?.getTime()??null}clone(){return new _i({end:this.end,start:this.start})}equals(e){if(!e)return!1;const r=this.start?.getTime()??this.start,i=this.end?.getTime()??this.end,s=e.start?.getTime()??e.start,n=e.end?.getTime()??e.end;return r===s&&i===n}expandTo(e,r=Hn){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=K9(i,e,r));let s=this.end;if(s){const n=K9(s,e,r);s=s.getTime()===n.getTime()?n:F4(n,1,e,r)}return new _i({start:i,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return _i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const r=this.start?.getTime()??-1/0,i=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,n=e.end?.getTime()??1/0;let o,l;return s>=r&&s<=i?o=s:r>=s&&r<=n&&(o=r),i>=s&&i<=n?l=i:n>=r&&n<=i&&(l=n),o==null||l==null||isNaN(o)||isNaN(l)?_i.empty:new _i({start:o===-1/0?null:new Date(o),end:l===1/0?null:new Date(l)})}offset(e,r,i=Hn){if(this.isEmpty||this.isAllTime)return this.clone();const s=new _i,{start:n,end:o}=this;return n!=null&&(s.start=F4(n,e,r,i)),o!=null&&(s.end=F4(o,e,r,i)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return X9.clone();const r=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new _i({start:r,end:i})}},_i=Ku,Ku);a([u({type:Date,json:{write:{allowNull:!0}}})],it.prototype,"end",void 0),a([F("end")],it.prototype,"readEnd",null),a([j("end")],it.prototype,"writeEnd",null),a([u({readOnly:!0,json:{read:!1}})],it.prototype,"isAllTime",null),a([u({readOnly:!0,json:{read:!1}})],it.prototype,"isEmpty",null),a([u({type:Date,json:{write:{allowNull:!0}}})],it.prototype,"start",void 0),a([F("start")],it.prototype,"readStart",null),a([j("start")],it.prototype,"writeStart",null),it=_i=a([_("esri.time.TimeExtent")],it);const X9=new it,vk=new it({start:void 0,end:void 0});let wk=0,Fe=class extends Vb(gh(Hc)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new le(-180,-90,180,90,B.WGS84),this.id=Date.now().toString(16)+"-layer-"+wk++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=B.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const r=typeof e=="string"?{url:e}:e;return(await L(async()=>{const{fromUrl:i}=await import("./money-tides-arcgisLayers-CspNXQgP.js");return{fromUrl:i}},__vite__mapDeps([19,1,2,3,4,5,15,16,18,10,11,12]))).fromUrl(r)}static fromPortalItem(e){return gk(e)}initialize(){this.when().catch(e=>{fi(e)||N.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Hs(this.url)}createLayerView(e,r){return Promise.reject(new M("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Le(e,{query:{f:"json"},responseType:"json"})).data;throw new M("layer:no-attribution-data","Layer does not have attribution data")}};a([u({type:String})],Fe.prototype,"attributionDataUrl",void 0),a([u({readOnly:!0})],Fe.prototype,"effectiveVisible",null),a([u({type:le})],Fe.prototype,"fullExtent",void 0),a([u({readOnly:!0})],Fe.prototype,"hasAttributionData",null),a([u({type:String,clonable:!1})],Fe.prototype,"id",void 0),a([u({type:Boolean,nonNullable:!0})],Fe.prototype,"legendEnabled",void 0),a([u({type:["show","hide","hide-children"]})],Fe.prototype,"listMode",void 0),a([u({type:Number,range:{min:0,max:1},nonNullable:!0})],Fe.prototype,"opacity",void 0),a([u({clonable:!1})],Fe.prototype,"parent",void 0),a([u({readOnly:!0})],Fe.prototype,"parsedUrl",null),a([u({type:Boolean,readOnly:!0})],Fe.prototype,"persistenceEnabled",void 0),a([u({type:Boolean})],Fe.prototype,"popupEnabled",void 0),a([u({type:Boolean})],Fe.prototype,"attributionVisible",void 0),a([u({type:B})],Fe.prototype,"spatialReference",void 0),a([u({type:String})],Fe.prototype,"title",void 0),a([u({readOnly:!0,json:{read:!1}})],Fe.prototype,"type",void 0),a([u()],Fe.prototype,"url",void 0),a([u({type:it})],Fe.prototype,"visibilityTimeExtent",void 0),a([u({type:Boolean,nonNullable:!0})],Fe.prototype,"visible",void 0),Fe=a([_("esri.layers.Layer")],Fe);const qh=new WeakMap;function q_(t){return!t.destroyed&&(qh.has(t)||t.addHandles([ae(()=>{const{parent:e}=t;return!!(e&&e instanceof Fe)&&(e.type==="catalog-dynamic-group"||q_(e))},e=>qh.set(t,e),Dr),Br(()=>qh.delete(t))]),qh.get(t))}function bk(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function Iie(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function _k(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function Sk(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function Eie(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function e8(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Hl(t){return t?.type==="subtype-sublayer"}const Pie={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function pf(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function Rie(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function A2(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function Oie(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function xk(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function Cie(t){return bk(t)&&xk(t)}async function xg(t,e){const r=dt?.findServerInfo(t);if(r?.currentVersion!=null)return r.owningSystemUrl||null;const i=t.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${t.slice(0,i)}/rest/info`,n=e!=null?e.signal:null,{data:o}=await Le(s,{query:{f:"json"},responseType:"json",signal:n});return o?.owningSystemUrl||null}function U_(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function $k(t){return U_(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Tk(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function Mk(t){return!!Tk(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Ik(t,e){return null}function kie(t){return null}function df(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function Fie(t,e){!e||!df(t)||Ik(t.url)}const Ek=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),Pk=new Set(["integrated-mesh-3dtiles"]),G_=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),Rk=new Set([...G_,"link-chart"]);function Ok(t){switch(t.layerContainerType){case"basemap-base-layers":return Ek;case"basemap-ground-layers":return Pk;case"operational-layers":return t.origin==="link-chart"?Rk:G_;default:return null}}function Ck(t,e){if(e.restrictedWebMapWriting){const r=Ok(e);return r==null||r.has(t.type)&&!A2(t)}return!0}function kk(t,e){if(e)if(A2(t)){const r=zb("featureCollection.layers",e),i=r?.[0]?.layerDefinition;i&&t8(t,i)}else t.type!=="group"&&t8(t,e)}function t8(t,e){"maxScale"in t&&(e.maxScale=Yy(t.maxScale)??void 0),"minScale"in t&&(e.minScale=Yy(t.minScale)??void 0)}function Fk(t,e){if(kk(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=Yy(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(A2(t)){const r=e.featureCollection;r&&(r.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function A4(t,e,r){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return r?.messages&&r.messages.push(new M("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(A2(t)&&!t.isTable)e=t.resourceInfo;else if(Ck(t,r)){const i={};return t.write(i,r)?i:null}return e!=null&&Fk(t,e=P(e)),e}var r8,Zl,rl;let Ir=(rl=class extends xl(Hc){constructor(e){super(e),this[r8]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Zl.idCounter++,this.baseLayers=new q,this.referenceLayers=new q,this.groundLayers=new q;const r=l=>{const{parent:c}=l;c&&c!==this&&"remove"in c&&c.remove?.(l),l.parent=this,l.type!=="elevation"&&l.type!=="integrated-mesh-3dtiles"||N.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=l=>{const{parent:c}=l;c&&c!==this&&"remove"in c&&c.remove?.(l),l.parent=this},s=l=>{const c=l.item;return c.parent===this?(N.getLogger(this).error(`Layer '${c.title}, id:${c.id}' of type '${c.type}' already a ground layer, second add will be ignored.`),void l.preventDefault()):c.type!=="integrated-mesh-3dtiles"&&c.type!=="integrated-mesh"?(N.getLogger(this).error(`Layer '${c.title}, id:${c.id}' of type '${c.type}' is not supported as a ground layer and will therefore be ignored.`),void l.preventDefault()):void 0},n=l=>{l.parent=null},o=l=>{l.parent===this&&(l.parent=null)};this.addHandles([this.baseLayers.on("after-add",l=>r(l.item)),this.baseLayers.on("after-remove",l=>n(l.item)),this.referenceLayers.on("after-add",l=>r(l.item)),this.referenceLayers.on("after-remove",l=>n(l.item)),this.groundLayers.on("before-add",s),this.groundLayers.on("after-add",l=>i(l.item)),this.groundLayers.on("after-remove",l=>o(l.item))])}initialize(){this.when().catch(e=>{N.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const s of e)s.destroyed||s.destroy();const r=this.groundLayers.toArray();for(const s of r)s.destroyed||s.destroy();const i=this.referenceLayers.toArray();for(const s of i)s.destroyed||s.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=st(this.portalItem)}removeChildLayer(e){for(const r of[this.baseLayers,this.referenceLayers,this.groundLayers])r.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",qs(e,this._get("baseLayers")))}_writeBaseLayers(e,r,i){const s=[];e&&(i={...i,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(n=>{const o=A4(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&s.push(o)}),this.referenceLayers.forEach(n=>{const o=A4(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&(n.type!=="scene"&&(o.isReference=!0),s.push(o))})),r.baseMapLayers=s}set groundLayers(e){this._set("groundLayers",qs(e,this._get("groundLayers")))}_writeGroundLayers(e,r,i){const s=[];e&&(i={...i,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(n=>{const o=A4(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&s.push(o)}),s.length>0&&(r.groundLayers=s))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",qs(e,this._get("referenceLayers")))}writeTitle(e,r){r.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return dg(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(r=>b4(r)?r.clone():r),groundLayers:this.groundLayers.map(r=>b4(r)?r.clone():r),referenceLayers:this.referenceLayers.map(r=>b4(r)?r.clone():r)};return this.loaded&&(e.loadStatus="loaded"),new Zl({resourceInfo:this.resourceInfo}).set(e)}read(e,r){this.resourceInfo||this._set("resourceInfo",{data:e,context:r}),super.read(e,r)}write(e,r){return e=e||{},r?.origin||(r={origin:"web-map",...r}),super.write(e,r),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=P(i);return s.url&&S9(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&S9(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:r,portalItem:i,style:s}=this;Re(e);const n=[];if(r){const o=r.context?r.context.url:null;if(n.push(this._loadLayersFromJSON(r.data,o,e)),r.data.id&&!r.data.title){const l=r.data.id;n.push(lk(l).then(c=>{c&&this.read({title:c},r.context)}))}}else i?n.push(this._loadFromItem(i,e)):s&&n.push(this._loadFromStylesService(s,e));await Promise.all(n)}async _loadLayersFromJSON(e,r,i){const s=this.resourceInfo?.context,n=this.portalItem?.portal||s?.portal||null,o=Lk[s?.origin||""]??"web-map",{populateOperationalLayers:l}=await L(async()=>{const{populateOperationalLayers:d}=await import("./money-tides-layersCreator-DHCAe1K2.js");return{populateOperationalLayers:d}},__vite__mapDeps([20,3,1,2,4,5,17,16,15,18,14,10,11,12])),c=[];if(Re(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const d={context:{...s,origin:o,url:r,portal:n,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},h=m=>o==="web-scene"&&m.layerType==="ArcGISSceneServiceLayer"||m.isReference,y=l(this.baseLayers,e.baseMapLayers.filter(m=>!h(m)),d);c.push(y);const f=l(this.referenceLayers,e.baseMapLayers.filter(h),d);c.push(f)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const d={context:{...s,origin:o,url:r,portal:n,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},h=l(this.groundLayers,e.groundLayers,d);c.push(h)}await Promise.allSettled(c)}async _loadFromItem(e,r){const i=await e.load(r),s=await i.fetchData("json",r),n=Hs(e.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:Ak[e.type||""]??"web-map",portal:e.portal||D.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||D.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,r)}async _loadFromStylesService(e,r){const i=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,s=`${i}/styles/${e.id}/self`,n=`${i}/webmaps/${e.id}`,o=e.apiKey??qr.apiKeys.basemapStyles,[l,c]=await Promise.all([(await Le(s,{query:{token:o},signal:r?.signal})).data,(await Le(n,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:r?.signal})).data]);this.thumbnailUrl??=l.thumbnailUrl;const d=Hs(n);if(this._set("resourceInfo",{data:c.baseMap??{},context:{origin:"web-map",url:d}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:c.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,d,r),o)for(const h of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in h&&(h.apiKey=o)}static fromId(e){const r=cf[e];return r?r.itemId?new Zl({portalItem:{id:r.itemId,portal:{url:"https://www.arcgis.com"}}}):Zl.fromJSON(r,r.is3d?{origin:"web-scene",portal:new D({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},r8=D_,Zl=rl,rl.idCounter=0,rl);a([u({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,r,i){this._writeBaseLayers(t,e,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:q}},writer(t,e,r,i){this._writeBaseLayers(t,e,i)}}}}}})],Ir.prototype,"baseLayers",null),a([u({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,r,i){this._writeGroundLayers(t,e,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:q}},writer(t,e,r,i){this._writeGroundLayers(t,e,i)}}}}}})],Ir.prototype,"groundLayers",null),a([u({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ir.prototype,"id",void 0),a([u({type:ce})],Ir.prototype,"portalItem",void 0),a([u()],Ir.prototype,"referenceLayers",null),a([u({readOnly:!0})],Ir.prototype,"resourceInfo",void 0),a([u({type:B})],Ir.prototype,"spatialReference",void 0),a([u({type:mk})],Ir.prototype,"style",void 0),a([u()],Ir.prototype,"thumbnailUrl",void 0),a([u({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ir.prototype,"title",void 0),a([j("title")],Ir.prototype,"writeTitle",null),Ir=Zl=a([_("esri.Basemap")],Ir);const Ak={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Lk={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},ud=Ir,Nk=Object.freeze(Object.defineProperty({__proto__:null,default:ud},Symbol.toStringTag,{value:"Module"})),Z0={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function B_(t){return!!Z0[t]||!!Z0[t.toLowerCase()]}function $g(t){return Z0[t]??Z0[t.toLowerCase()]}function Dk(t){return[...$g(t)]}function L4(t,e,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?t+(e-t)*i:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}function W_(t,e,r,i=1){const s=(t%360+360)%360/360,n=r<=.5?r*(e+1):r+e-r*e,o=2*r-n;return[Math.round(255*L4(o,n,s+1/3)),Math.round(255*L4(o,n,s)),Math.round(255*L4(o,n,s-1/3)),i]}function jk(t){const e=t.length>5,r=e?8:4,i=(1<<r)-1,s=e?1:17,n=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let c;return n&&(c=o&i,o>>=r,l[3]=s*c/255),c=o&i,o>>=r,l[2]=s*c,c=o&i,o>>=r,l[1]=s*c,c=o&i,o>>=r,l[0]=s*c,l}function H_(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),r=parseInt(t.slice(2,3),16),i=parseInt(t.slice(3,4),16),s=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,r+16*r,i+16*i,(s+16*s)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function Z_(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const r=e[2].split(/\s*,\s*/),i=e[1];if(i==="rgb"&&r.length===3||i==="rgba"&&r.length===4){if(r[0].endsWith("%")){const s=r.map(n=>2.56*parseFloat(n));return r.length===4&&(s[3]=parseFloat(r[3])),i8(s)}return i8(r.map(s=>parseFloat(s)))}if(i==="hsl"&&r.length===3||i==="hsla"&&r.length===4)return W_(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3]??"1"))}return null}function i8(t){return t[0]=Vu(t[0]),t[1]=Vu(t[1]),t[2]=Vu(t[2]),t[3]=t.length===4?Q_(t[3]):1,t}function J_(t){let e=B_(t)?$g(t):null;return e??=Z_(t),e??=H_(t),e}function Aie(t){const e=J_(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function Q_(t){return Y_(t,0,1)}function Vu(t){return Math.round(Y_(t,0,255))}function Y_(t,e,r){return t=Number(t),isNaN(t)?r:t<e?e:t>r?r:t}const K_=2.2,Vk=1/K_;function Lie(t){return t**K_}function Nie(t){return t**Vk}const s8=new Float32Array(1);function Die(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function gi(t,e,r){return Math.min(Math.max(t,e),r)}function jie(t){return!(t&t-1)}function Vie(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Sp(t,e,r){return t+(e-t)*r}function zie(t,e,r,i,s){return Sp(i,s,(t-e)/(r-e))}function vh(t){return t*Math.PI/180}function X_(t){return 180*t/Math.PI}function qie(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function Uie(t){return Math.acos(gi(t,-1,1))}function zk(t){return Math.asin(gi(t,-1,1))}function yi(t,e,r=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=r}function eS(t,e,r=1e-6){return!yi(t,e,r)&&t>e}function hf(t,e,r=1e-6){return!yi(t,e,r)&&t<e}function qk(t,e,r=1e-6){return yi(t,e,r)||t>e}const J0=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function yf(t){return J0.setFloat64(0,t),J0.getBigInt64(0)}function Uk(t){return J0.setBigInt64(0,t),J0.getFloat64(0)}const D1=1000000n,Gk=tS(1);function tS(t){const e=yf(t=Math.abs(t)),r=Uk(e<=D1?D1:e-D1);return Math.abs(t-r)}function Gie(t,e,r=Gk){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(r!=null&&tS(Math.min(Math.abs(t),Math.abs(e)))<r)return Math.abs(t-e)<=r;const i=yf(t),s=yf(e);return i<0!=s<0?!1:!((i<s?s-i:i-s)>D1)}function rS(t,e,r=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const i=Math.abs(t-e),s=Math.abs(t),n=Math.abs(e);if(t===0||e===0||s<1e-12&&n<1e-12){if(i>.01*r)return!1}else if(i/(s+n)>r)return!1;return!0}function Bie(t){return iS(Math.max(-n8,Math.min(t,n8)))}function iS(t){return s8[0]=t,s8[0]}function Wie(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],i=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(yi(e,1)&&yi(r,1)&&yi(i,1))}function Hie(t,e){return(t%e+e)%e}const n8=iS(34028234663852886e22);function Zie(t,e,r){if(r===void 0||+r==0)return Math[t](e);if(e=+e,r=+r,isNaN(e)||typeof r!="number"||r%1!=0)return NaN;let i=e.toString().split("e");return i=(e=Math[t](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function Uh(t){return gi(X5(t),0,255)}function Gh(t,e){const r=t.toString(16).padStart(2,"0");return e?r.slice(0,1):r}let ne=class Si{static blendColors(e,r,i,s=new Si){return s.r=Math.round(e.r+(r.r-e.r)*i),s.g=Math.round(e.g+(r.g-e.g)*i),s.b=Math.round(e.b+(r.b-e.b)*i),s.a=e.a+(r.a-e.a)*i,s._sanitize()}static fromRgb(e,r){const i=Z_(e);return i?Si.fromArray(i,r):null}static fromHex(e,r=new Si){const i=H_(e);return i?Si.fromArray(i,r):null}static fromArray(e,r=new Si){return r._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(e,r){const i=J_(e);return i?Si.fromArray(i,r):null}static fromJSON(e){return e!=null?new Si([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,r){return e==null?null:(r??=[0,0,0,0],r[0]=e.r/255,r[1]=e.g/255,r[2]=e.b/255,r[3]=e.a!=null?e.a:1,r)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Si.fromString(e,this):Array.isArray(e)?Si.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Si||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const r=e?.capitalize??!1,i=e?.digits??6,s=i===3||i===4,n=i===4||i===8,o=`#${Gh(this.r,s)}${Gh(this.g,s)}${Gh(this.b,s)}${n?Gh(Math.round(255*this.a),s):""}`;return r?o.toUpperCase():o}toCss(e=!1){const r=this.r+", "+this.g+", "+this.b;return e?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const r=Uh(this.r),i=Uh(this.g),s=Uh(this.b);return e===0||this.a!==1?[r,i,s,Uh(255*this.a)]:[r,i,s]}clone(){return new Si(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Vu(this.r),this.g=Vu(this.g),this.b=Vu(this.b),this.a=Q_(this.a),this}_set(e,r,i,s){this.r=e,this.g=r,this.b=i,this.a=s}};ne.prototype.declaredClass="esri.Color";let ui=class extends q{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(qb(()=>this._refresh(),It))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let r=0;for(const i of e)i!=null&&(r=this._processCollection(r,i));this.splice(r)}_createNewInstance(e){return new q(e)}_processCollection(e,r){if(!r)return e;const i=this.itemFilterFunction??(s=>!!s);for(const s of r)if(s){if(i(s)){const n=this.indexOf(s,e);n>=0?n!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)e=this._processCollection(e,o);else e=this._processCollection(e,n)}}return e}};a([u()],ui.prototype,"getCollections",void 0),a([u()],ui.prototype,"getChildrenFunction",void 0),a([u()],ui.prototype,"itemFilterFunction",void 0),ui=a([_("esri.core.CollectionFlattener")],ui);function X(t,e={}){const r=t instanceof be?t:new be(t,e),{alwaysWriteDefaults:i,default:s,ignoreUnknown:n=!0,name:o,nonNullable:l,readOnly:c=!1}=e;return u({type:n?r.apiValues:String,json:{type:r.jsonValues,default:s,name:o,read:!c&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:l,readOnly:c})}var ff;let j1=ff=class extends A{constructor(t){super(t),this.type="none"}clone(){return new ff({type:this.type})}};a([X({none:"none",stayAbove:"stay-above"}),u({json:{write:{isRequired:!0}}})],j1.prototype,"type",void 0),j1=ff=a([_("esri.ground.NavigationConstraint")],j1);const sS=Symbol("GroundInstance");function Qie(t){return t!=null&&typeof t=="object"&&sS in t}function L2(t){const e=X5(100*(1-t));return Math.max(0,Math.min(e,100))}function Gd(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var o8,mf,Nb;let xi=mf=(Nb=class extends xl(Hc){constructor(t){super(t),this[o8]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new q;const e=i=>{const{parent:s}=i;s&&s!==this&&"remove"in s&&s.remove?.(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&N.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>e(i.item)),this.layers.on("after-remove",i=>r(i.item))]),this.allLayers=new ui({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{fi(t)||N.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)st(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",qs(t,this._get("layers")))}writeLayers(t,e,r,i){const s=[];t&&(i={...i,layerContainerType:"ground"},t.forEach(n=>{if("write"in n){const o={};MR(n)().write(o,i)&&s.push(o)}else i?.messages&&i.messages.push(new M("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return dg(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:r}=await L(()=>import("./money-tides-ElevationQuery-Bw0VDQbg.js"),__vite__mapDeps([21,3,1,2,4,5,22,10,11,12]));return Re(e),r(this.layers.filter(a8).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:r}=await L(()=>import("./money-tides-ElevationQuery-Bw0VDQbg.js"),__vite__mapDeps([21,3,1,2,4,5,22,10,11,12]));return Re(e),r(this.layers.filter(a8).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:P(this.surfaceColor),navigationConstraint:P(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new mf({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,r){const i=e?.origin||"web-scene",s=e?.portal||null,n=e?.url||null,{populateOperationalLayers:o}=await L(async()=>{const{populateOperationalLayers:c}=await import("./money-tides-layersCreator-DHCAe1K2.js");return{populateOperationalLayers:c}},__vite__mapDeps([20,3,1,2,4,5,17,16,15,18,14,10,11,12]));Re(r);const l=[];if(t.layers&&Array.isArray(t.layers)){const c={context:{origin:i,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(o(this.layers,t.layers,c))}await Promise.allSettled(l)}},o8=sS,Nb);function a8(t){return t&&"createElevationSampler"in t}a([u()],xi.prototype,"parent",void 0),a([u()],xi.prototype,"integratedMeshGround",null),a([u({json:{read:!1,write:{isRequired:!0}}})],xi.prototype,"layers",null),a([u()],xi.prototype,"allLayers",void 0),a([j("layers")],xi.prototype,"writeLayers",null),a([u({readOnly:!0})],xi.prototype,"resourceInfo",void 0),a([u({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ve,read:{reader:Gd,source:"transparency"},write:{writer:(t,e)=>{e.transparency=L2(t)},target:"transparency"}}})],xi.prototype,"opacity",void 0),a([u({type:ne,json:{type:[ve],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],xi.prototype,"surfaceColor",void 0),a([u({type:j1,json:{write:!0}})],xi.prototype,"navigationConstraint",void 0),xi=mf=a([_("esri.Ground")],xi);const Q0=xi,Bk=Symbol("ClonableMixin"),de=t=>{var s;var e;const r=t;let i=(s=class extends r{constructor(){super(...arguments),this[e]=!0}clone(n){const o=hi(this);$2(o,"unable to clone instance of non-accessor class");const l=o.metadata,c=o.store,d={},h=new Map;for(const f in l){const m=l[f],g=c?.originOf(f),v=m.clonable;if(m.readOnly||v===!1||g!==7&&g!==0&&g!==5&&g!==4)continue;const b=this[f];let S=null;if(typeof v=="function")S=v(b,n);else if(v==="reference")S=b;else if(S=IR(b,n),b!=null&&S==null)continue;g===0?h.set(f,S):d[f]=S}const y=new(Object.getPrototypeOf(this)).constructor(d);if(h.size){const f=hi(y)?.store;if(f)for(const[m,g]of h)f.set(m,g,0)}return y}},e=Bk,s);return i=a([_("esri.core.Clonable")],i),i},Tg=de(Z),Rl={Base64:0,Hex:1,String:2,Raw:3},zu=8,nS=(1<<zu)-1;function Co(t,e){const r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function Wk(t){const e=[];for(let r=0,i=t.length*zu;r<i;r+=zu)e[r>>5]|=(t.charCodeAt(r/zu)&nS)<<r%32;return e}function Hk(t){const e=[];for(let r=0,i=32*t.length;r<i;r+=zu)e.push(String.fromCharCode(t[r>>5]>>>r%32&nS));return e.join("")}function Zk(t){const e="0123456789abcdef",r=[];for(let i=0,s=4*t.length;i<s;i++)r.push(e.charAt(t[i>>2]>>i%4*8+4&15)+e.charAt(t[i>>2]>>i%4*8&15));return r.join("")}function Jk(t){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let s=0,n=4*t.length;s<n;s+=3){const o=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let l=0;l<4;l++)8*s+6*l>32*t.length?i.push("="):i.push(r.charAt(o>>6*(3-l)&63))}return i.join("")}function Qk(t,e){return t<<e|t>>>32-e}function N2(t,e,r,i,s,n){return Co(Qk(Co(Co(e,t),Co(i,n)),s),r)}function Zt(t,e,r,i,s,n,o){return N2(e&r|~e&i,t,e,s,n,o)}function Jt(t,e,r,i,s,n,o){return N2(e&i|r&~i,t,e,s,n,o)}function Qt(t,e,r,i,s,n,o){return N2(e^r^i,t,e,s,n,o)}function Yt(t,e,r,i,s,n,o){return N2(r^(e|~i),t,e,s,n,o)}function Yk(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let r=1732584193,i=-271733879,s=-1732584194,n=271733878;for(let o=0;o<t.length;o+=16){const l=r,c=i,d=s,h=n;r=Zt(r,i,s,n,t[o],7,-680876936),n=Zt(n,r,i,s,t[o+1],12,-389564586),s=Zt(s,n,r,i,t[o+2],17,606105819),i=Zt(i,s,n,r,t[o+3],22,-1044525330),r=Zt(r,i,s,n,t[o+4],7,-176418897),n=Zt(n,r,i,s,t[o+5],12,1200080426),s=Zt(s,n,r,i,t[o+6],17,-1473231341),i=Zt(i,s,n,r,t[o+7],22,-45705983),r=Zt(r,i,s,n,t[o+8],7,1770035416),n=Zt(n,r,i,s,t[o+9],12,-1958414417),s=Zt(s,n,r,i,t[o+10],17,-42063),i=Zt(i,s,n,r,t[o+11],22,-1990404162),r=Zt(r,i,s,n,t[o+12],7,1804603682),n=Zt(n,r,i,s,t[o+13],12,-40341101),s=Zt(s,n,r,i,t[o+14],17,-1502002290),i=Zt(i,s,n,r,t[o+15],22,1236535329),r=Jt(r,i,s,n,t[o+1],5,-165796510),n=Jt(n,r,i,s,t[o+6],9,-1069501632),s=Jt(s,n,r,i,t[o+11],14,643717713),i=Jt(i,s,n,r,t[o],20,-373897302),r=Jt(r,i,s,n,t[o+5],5,-701558691),n=Jt(n,r,i,s,t[o+10],9,38016083),s=Jt(s,n,r,i,t[o+15],14,-660478335),i=Jt(i,s,n,r,t[o+4],20,-405537848),r=Jt(r,i,s,n,t[o+9],5,568446438),n=Jt(n,r,i,s,t[o+14],9,-1019803690),s=Jt(s,n,r,i,t[o+3],14,-187363961),i=Jt(i,s,n,r,t[o+8],20,1163531501),r=Jt(r,i,s,n,t[o+13],5,-1444681467),n=Jt(n,r,i,s,t[o+2],9,-51403784),s=Jt(s,n,r,i,t[o+7],14,1735328473),i=Jt(i,s,n,r,t[o+12],20,-1926607734),r=Qt(r,i,s,n,t[o+5],4,-378558),n=Qt(n,r,i,s,t[o+8],11,-2022574463),s=Qt(s,n,r,i,t[o+11],16,1839030562),i=Qt(i,s,n,r,t[o+14],23,-35309556),r=Qt(r,i,s,n,t[o+1],4,-1530992060),n=Qt(n,r,i,s,t[o+4],11,1272893353),s=Qt(s,n,r,i,t[o+7],16,-155497632),i=Qt(i,s,n,r,t[o+10],23,-1094730640),r=Qt(r,i,s,n,t[o+13],4,681279174),n=Qt(n,r,i,s,t[o],11,-358537222),s=Qt(s,n,r,i,t[o+3],16,-722521979),i=Qt(i,s,n,r,t[o+6],23,76029189),r=Qt(r,i,s,n,t[o+9],4,-640364487),n=Qt(n,r,i,s,t[o+12],11,-421815835),s=Qt(s,n,r,i,t[o+15],16,530742520),i=Qt(i,s,n,r,t[o+2],23,-995338651),r=Yt(r,i,s,n,t[o],6,-198630844),n=Yt(n,r,i,s,t[o+7],10,1126891415),s=Yt(s,n,r,i,t[o+14],15,-1416354905),i=Yt(i,s,n,r,t[o+5],21,-57434055),r=Yt(r,i,s,n,t[o+12],6,1700485571),n=Yt(n,r,i,s,t[o+3],10,-1894986606),s=Yt(s,n,r,i,t[o+10],15,-1051523),i=Yt(i,s,n,r,t[o+1],21,-2054922799),r=Yt(r,i,s,n,t[o+8],6,1873313359),n=Yt(n,r,i,s,t[o+15],10,-30611744),s=Yt(s,n,r,i,t[o+6],15,-1560198380),i=Yt(i,s,n,r,t[o+13],21,1309151649),r=Yt(r,i,s,n,t[o+4],6,-145523070),n=Yt(n,r,i,s,t[o+11],10,-1120210379),s=Yt(s,n,r,i,t[o+2],15,718787259),i=Yt(i,s,n,r,t[o+9],21,-343485551),r=Co(r,l),i=Co(i,c),s=Co(s,d),n=Co(n,h)}return[r,i,s,n]}function Mg(t,e=Rl.Hex){const r=e||Rl.Base64,i=Yk(Wk(t),t.length*zu);switch(r){case Rl.Raw:return i;case Rl.Hex:return Zk(i);case Rl.String:return Hk(i);case Rl.Base64:return Jk(i)}}function Kk(t){return t&&"getAtOrigin"in t&&"originOf"in t}function gf(t){return Ig[Xk(t)]||tF}function Xk(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:eF(t.url)}function eF(t){const e=Ub(t);return vf[e]||oS}const Ig={},oS="text/plain",tF=Ig[oS],vf={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in vf)Ig[vf[t]]=t;function rF(t){const e=t?.origins??[void 0];return(r,i)=>{const s=iF(t,r,i);for(const n of e){const o=Y5(r,n,i);for(const l in s)o[l]=s[l]}}}function iF(t,e,r){if(t?.type==="resource")return sF(t,e,r);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:i,write:s}=CR;return{read:i,write:s}}}}function sF(t,e,r){const i=ER(e,r);return{type:String,read:(s,n,o)=>{const l=tg(s,n,o);return i.type===String?l:typeof i.type=="function"?new i.type({url:l}):void 0},write:{isRequired:i.json?.write?.isRequired,writer(s,n,o,l){if(!l?.resources)return typeof s=="string"?void(n[o]=Ld(s,l)):void(n[o]=s.write({},l));const c=aF(s),d=Ld(c,{...l,verifyItemRelativeUrls:l?.verifyItemRelativeUrls?{writtenUrls:l.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),h=i.type!==String&&(!Kk(this)||l?.origin&&this.originIdOf(r)>Li(l.origin)),y={object:this,propertyName:r,value:s,targetUrl:d,dest:n,targetPropertyName:o,context:l,params:t};l?.portalItem&&d&&!Wc(d)?h&&t?.contentAddressed?wf(y):h?nF(y):oF(y):l?.portalItem&&(d==null||PR(d)!=null||eg(d)||h)?wf(y):n[o]=d}}}}function wf(t){const{targetUrl:e,params:r,value:i,context:s,dest:n,targetPropertyName:o}=t;if(!s.portalItem)return;const l=RR(e),c=lS(i,e,s);if(r?.contentAddressed&&c.type!=="json")return void s.messages?.push(new M("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${c.type} with content addressing. Content addressing is only supported for json resources.`,{content:c}));const d=r?.contentAddressed&&c.type==="json"?Mg(c.jsonString):l?.filename??rg(),h=cl(r?.prefix??l?.prefix,d),y=`${h}.${gf(c)}`;if(r?.contentAddressed&&s.resources&&c.type==="json"){const g=s.resources.toKeep.find(({resource:v})=>v.path===y)??s.resources.toAdd.find(({resource:v})=>v.path===y);if(g)return void(n[o]=g.resource.itemRelativeUrl)}const f=s.portalItem.resourceFromPath(y);eg(e)&&s.resources&&s.resources.pendingOperations.push(OR(e).then(g=>{f.path=`${h}.${gf({type:"blob",blob:g})}`,n[o]=f.itemRelativeUrl}).catch(()=>{}));const m=r?.compress??!1;s.resources&&aS({...t,resource:f,content:c,compress:m,updates:s.resources.toAdd}),n[o]=f.itemRelativeUrl}function nF(t){const{context:e,targetUrl:r,params:i,value:s,dest:n,targetPropertyName:o}=t;if(!e.portalItem)return;const l=e.portalItem.resourceFromPath(r),c=lS(s,r,e),d=gf(c),h=Ub(l.path),y=i?.compress??!1;d===h?(e.resources&&aS({...t,resource:l,content:c,compress:y,updates:e.resources.toUpdate}),n[o]=r):wf(t)}function oF({context:t,targetUrl:e,dest:r,targetPropertyName:i}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),r[i]=e)}function aS({object:t,propertyName:e,updates:r,resource:i,content:s,compress:n}){const o=l=>{lF(t,e,l)};r.push({resource:i,content:s,compress:n,finish:o})}function lS(t,e,r){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(r))}}function aF(t){return t==null?null:typeof t=="string"?t:t.url}function lF(t,e,r){typeof t[e]=="string"?t[e]=r.url:t[e].url=r.url}let V1=class extends de(A){constructor(e){super(e),this.color=null}};a([u({type:ne,json:{type:[ve],write:!0}})],V1.prototype,"color",void 0),V1=a([_("esri.effects.FocusAreaOutline")],V1);const uF=V1;function Kie(t){const e=[];for(t.reset();t.nextPath();){const r=[];for(;t.nextPoint();)r.push([t.x,t.y]);e.push(r)}return t.reset(),e}function cF(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function Xie(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,r=t.hasM;if(t.type==="point")return r&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:r?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(i=>[i]);if(t.type==="extent"){const i=t.clone().normalize();if(!i)return null;let s=!1,n=!1;return i.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)}),i.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const c=.5*(o.zmax-o.zmin);for(let d=0;d<l.length;d++)l[d].push(c)}if(n&&o.hasM){const c=.5*(o.mmax-o.mmin);for(let d=0;d<l.length;d++)l[d].push(c)}return l})}return null}function D2(t,e){const r=e[0]-t[0],i=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function uS(t,e,r){const i=t[0]+r*(e[0]-t[0]),s=t[1]+r*(e[1]-t[1]);return t.length>2&&e.length>2?[i,s,t[2]+r*(e[2]-t[2])]:[i,s]}function pF(t,e,r,i){return dF(t,e,r[i],r[i+1])}function dF(t,e,r,i){const[s,n]=e,[o,l]=r,[c,d]=i,h=c-o,y=d-l,f=h*h+y*y,m=(s-o)*h+(n-l)*y,g=Math.min(1,Math.max(0,m/f));return t[0]=o+h*g,t[1]=l+y*g,t}function ese(t,e,r,i,s,n){let o=r,l=i,c=s-o,d=n-l;if(c!==0||d!==0){const h=((t-o)*c+(e-l)*d)/(c*c+d*d);h>1?(o=s,l=n):h>0&&(o+=c*h,l+=d*h)}return c=t-o,d=e-l,c*c+d*d}function cS(t,e){return uS(t,e,.5)}function tse(t){const e=t.length;let r=0;for(let i=0;i<e-1;++i)r+=D2(t[i],t[i+1]);return r}function rse(t,e){if(e<=0)return t[0];const r=t.length;let i=0;for(let s=0;s<r-1;++s){const n=D2(t[s],t[s+1]);if(e-i<n){const o=(e-i)/n;return uS(t[s],t[s+1],o)}i+=n}return t[r-1]}function pS(t,e=0,r=1){let i=0;const s=t.length;let n=t[0];for(let o=1;o<s;o++){const l=t[o];i+=(l[e]-n[e])*(l[r]+n[r]),n=l}if(dS(t)){const o=t[0];i+=(o[e]-n[e])*(o[r]+n[r])}return i>=0}function dS(t){const e=t.length;return e>0&&!Gb(t[0],t[e-1])}function ise(t){"rings"in t&&(hF(t),yF(t))}function hF(t){if("rings"in t)for(const e of t.rings)dS(e)&&e.push(e[0].slice())}function yF(t){if(!("rings"in t)||t.rings.length===0||pS(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function sse(t){return t.type!=="polygon"&&t.type!=="polyline"||fF(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function fF(t,e){const r=xr(e);if(!r)return;const i=r.valid[0],s=r.valid[1],n=s-i;for(const o of t){let l=1/0,c=-1/0;for(const h of o){const y=mF(h[0],i,s);l=Math.min(l,y),c=Math.max(c,y),h[0]=y}const d=c-l;n-d<d&&o.forEach(h=>{h[0]<0&&(h[0]+=n)})}}function mF(t,e,r){const i=r-e;return t<e?r-(e-t)%i:t>r?e+(t-e)%i:t}function nse(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[r,i]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return r.length===i.length&&r.every((s,n)=>s.length===i[n].length)}function ose(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function gF(t){return wF(t.rings,t.hasZ??!1)}function vF(t){const e=gF(t);if(!e)return null;const{hasZ:r,spatialReference:i}=t,[s,n,o]=e;return isNaN(s)||isNaN(n)||r&&isNaN(o)?null:{x:s,y:n,z:r?o:void 0,spatialReference:i}}function wF(t,e){if(!t?.length)return null;const r=[],i=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=t.length;n<o;n++){const l=hS(t[n],e,s);l&&i.push(l)}if(i.sort((n,o)=>{let l=n[2]-o[2];return l===0&&e&&(l=n[4]-o[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],e&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const n=t[0]&&t[0].length?bF(t[0],e):null;if(!n)return null;r[0]=n[0],r[1]=n[1],e&&n.length>2&&(r[2]=n[2])}return r}function hS(t,e,r){let i=0,s=0,n=0,o=0,l=0;const c=t.length?t[0][0]:0,d=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const m=t[f],g=t[(f+1)%t.length],[v,b,S]=m,$=v-c,E=b-d,[T,R,O]=g,z=T-c,U=R-d,J=$*U-z*E;if(o+=J,i+=($+z)*J,s+=(E+U)*J,e&&m.length>2&&g.length>2){const ie=S-h,oe=O-h,ee=$*oe-z*ie;n+=(ie+oe)*ee,l+=ee}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),b<r[2]&&(r[2]=b),b>r[3]&&(r[3]=b),e&&(S<r[4]&&(r[4]=S),S>r[5]&&(r[5]=S))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const y=[i/(6*o)+c,s/(6*o)+d,o];return e&&(r[4]===r[5]||l===0?(y[3]=(r[4]+r[5])/2,y[4]=0):(y[3]=n/(6*l)+h,y[4]=l)),y}function ase(t,e){let r=0,i=0,s=0;t.nextPoint();const n=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let l=0;l<t.pathSize;l++){t.seekInPath(l);const c=[t.x,t.y];t.seekInPath((l+1)%t.pathSize);const d=[t.x,t.y],[h,y]=c,f=h-n,m=y-o,[g,v]=d,b=g-n,S=v-o,$=f*S-b*m;s+=$,r+=(f+b)*$,i+=(m+S)*$,h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),y<e[2]&&(e[2]=y),y>e[3]&&(e[3]=y)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+n,i/(6*s)+o,s]):null}function bF(t,e){const r=e?[0,0,0]:[0,0],i=e?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;for(let c=0,d=t.length;c<d-1;c++){const h=t[c],y=t[c+1];if(h&&y){r[0]=h[0],r[1]=h[1],i[0]=y[0],i[1]=y[1],e&&h.length>2&&y.length>2&&(r[2]=h[2],i[2]=y[2]);const f=D2(r,i);if(f){s+=f;const m=cS(h,y);n+=f*m[0],o+=f*m[1],e&&m.length>2&&(l+=f*m[2])}}}return s>0?e?[n/s,o/s,l/s]:[n/s,o/s]:t.length?t[0]:null}function _F(t){const{hasZ:e,totalSize:r}=t;if(r===0)return null;const i=[],s=[],n=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=hS(cF(t),t.hasZ,n);o&&s.push(o)}if(s.sort((o,l)=>{let c=o[2]-l[2];return c===0&&e&&(c=o[4]-l[4]),c}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],e&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){t.reset(),t.nextPath();const o=t.pathSize?SF(t):null;if(!o)return null;i[0]=o[0],i[1]=o[1],e&&o.length>2&&(i[2]=o[2])}return i}function SF(t){const{hasZ:e}=t,r=e?[0,0,0]:[0,0],i=e?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;if(t.nextPoint()){let c=t.x,d=t.y,h=t.z;for(;t.nextPoint();){const y=t.x,f=t.y,m=t.z;r[0]=c,r[1]=d,i[0]=y,i[1]=f,e&&(r[2]=h,i[2]=m);const g=D2(r,i);if(g){s+=g;const v=cS(r,i);n+=g*v[0],o+=g*v[1],e&&v.length>2&&(l+=g*v[2])}c=y,d=f,h=m}}return s>0?e?[n/s,o/s,l/s]:[n/s,o/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const xF=1e-6;function lse(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<xF){const s=_F(t);return s?[s[0],s[1]]:null}const r=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const i=[t.x,t.y];for(t.reset();t.nextPath();)TF(r,i,t);return r[0]*=1/e,r[1]*=1/e,r[0]+=i[0],r[1]+=i[1],r}const $F=1/3;function TF(t,e,r){if(!t||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let n,o=r.x-i,l=r.y-s,c=0,d=0;for(;r.nextPoint();)c=r.x-i,d=r.y-s,n=.5*$F*(c*l-d*o),t[0]+=n*(o+c),t[1]+=n*(l+d),o=c,l=d;const h=r.getCurrentRingArea(),y=[i,s];return y[0]-=e[0],y[1]-=e[1],y[0]*=h,y[1]*=h,t[0]+=y[0],t[1]+=y[1],t}function Gr(t=RF){return[t[0],t[1],t[2],t[3]]}function yS(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function fS(t,e,r,i,s=Gr()){return s[0]=t,s[1]=e,s[2]=r,s[3]=i,s}function use(t,e=Gr()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function MF(t,e,r=new le){return r.xmin=t[0],r.ymin=t[1],r.xmax=t[2],r.ymax=t[3],r.spatialReference=e,r}function Ai(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function IF(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function EF(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function cse(t,e,r){if(e!=null)if("length"in e)_f(e)?(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[0]),r[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":r[0]=Math.min(t[0],e.xmin),r[1]=Math.min(t[1],e.ymin),r[2]=Math.max(t[2],e.xmax),r[3]=Math.max(t[3],e.ymax);break;case"point":r[0]=Math.min(t[0],e.x),r[1]=Math.min(t[1],e.y),r[2]=Math.max(t[2],e.x),r[3]=Math.max(t[3],e.y)}else yS(r,t)}function pse(t,e,r=t){const i=e.length;let s=t[0],n=t[1],o=t[2],l=t[3];for(let c=0;c<i;c++){const d=e[c];s=Math.min(s,d[0]),n=Math.min(n,d[1]),o=Math.max(o,d[0]),l=Math.max(l,d[1])}return r[0]=s,r[1]=n,r[2]=o,r[3]=l,r}function dse(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function Eg(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function Pg(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function hse(t){return Eg(t)*Pg(t)}function yse(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function fse(t){const e=Eg(t),r=Pg(t);return Math.sqrt(e*e+r*r)}function mse(t,e){return!!t&&bf(t,e.x,e.y)}function bf(t,e,r){return e>=t[0]&&r>=t[1]&&e<=t[2]&&r<=t[3]}function gse(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function vse(t,e,r){return Math.max(e[0],t[0])-r<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-r<=Math.min(e[3],t[3])}function PF(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function wse(t,e,r,i){return i??=t,i[0]=t[0]+e,i[1]=t[1]+r,i[2]=t[2]+e,i[3]=t[3]+r,i}function bse(t){return t?yS(t,l8):Gr(l8)}function _f(t){return t!=null&&t.length===4}function _se(t,e){return _f(t)&&_f(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const l8=[1/0,1/0,-1/0,-1/0],RF=[0,0,0,0];let Rg=1e-6;function $r(){return Rg}function OF(t){Rg=t}const j2=Math.random,CF=Math.PI/180,kF=180/Math.PI;function Og(t){return t*CF}function FF(t){return t*kF}function AF(t,e){return Math.abs(t-e)<=Rg*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:j2,equals:AF,getEpsilon:$r,setEpsilon:OF,toDegree:FF,toRadian:Og},Symbol.toStringTag,{value:"Module"}));function qu(t,e){return t[0]=e[0],t[1]=e[1],t}function Dt(t,e,r){return t[0]=e,t[1]=r,t}function mS(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Bd(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function gS(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function vS(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function LF(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function NF(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function DF(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function jF(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function VF(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function wh(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function zF(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t}function V2(t,e){const r=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(r*r+i*i)}function Wd(t,e){const r=e[0]-t[0],i=e[1]-t[1];return r*r+i*i}function Y0(t){const e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function wS(t){const e=t[0],r=t[1];return e*e+r*r}function bS(t,e){return t[0]=-e[0],t[1]=-e[1],t}function qF(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Sf(t,e){const r=e[0],i=e[1];let s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function _S(t,e){return t[0]*e[0]+t[1]*e[1]}function SS(t,e,r){const i=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=i,t}function UF(t,e,r,i){const s=e[0],n=e[1];return t[0]=s+i*(r[0]-s),t[1]=n+i*(r[1]-n),t}function GF(t,e=1){const r=2*j2()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function BF(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[2]*s,t[1]=r[1]*i+r[3]*s,t}function As(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[2]*s+r[4],t[1]=r[1]*i+r[3]*s+r[5],t}function z1(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[3]*s+r[6],t[1]=r[1]*i+r[4]*s+r[7],t}function WF(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[4]*s+r[12],t[1]=r[1]*i+r[5]*s+r[13],t}function HF(t,e,r,i){const s=e[0]-r[0],n=e[1]-r[1],o=Math.sin(i),l=Math.cos(i);return t[0]=s*l-n*o+r[0],t[1]=s*o+n*l+r[1],t}function ZF(t,e){const r=t[0],i=t[1],s=e[0],n=e[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let l=s*s+n*n;l>0&&(l=1/Math.sqrt(l));const c=(r*s+i*n)*o*l;return c>1?0:c<-1?Math.PI:Math.acos(c)}function JF(t){return"vec2("+t[0]+", "+t[1]+")"}function QF(t,e){return t[0]===e[0]&&t[1]===e[1]}function YF(t,e){const r=t[0],i=t[1],s=e[0],n=e[1],o=$r();return Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))}function KF(t,e,r,i,s){let n=e[0]-r[0],o=e[1]-r[1];const l=(i[0]*n+i[1]*o)*(s-1);return n=i[0]*l,o=i[1]*l,t[0]=e[0]+n,t[1]=e[1]+o,t}const XF=Y0,Cg=Bd,eA=gS,tA=vS,rA=V2,iA=Wd,sA=wS;Object.freeze(Object.defineProperty({__proto__:null,add:mS,angle:ZF,ceil:LF,copy:qu,cross:SS,dist:rA,distance:V2,div:tA,divide:vS,dot:_S,equals:YF,exactEquals:QF,floor:NF,inverse:qF,len:XF,length:Y0,lerp:UF,max:jF,min:DF,mul:eA,multiply:gS,negate:bS,normalize:Sf,projectAndScale:KF,random:GF,rotate:HF,round:VF,scale:wh,scaleAndAdd:zF,set:Dt,sqrDist:iA,sqrLen:sA,squaredDistance:Wd,squaredLength:wS,str:JF,sub:Cg,subtract:Bd,transformMat2:BF,transformMat2d:As,transformMat3:z1,transformMat4:WF},Symbol.toStringTag,{value:"Module"}));function Cn(t,e,r,i){return t[0]=e[0]*(1-i)+r[0]*i,t[1]=e[1]*(1-i)+r[1]*i,t}function _r(t,e){return Wd(t,e)}function Sse(t,e,r){const i=_r(e,r);if(i===0)return _r(e,t);const s=(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0]);return s*s/i}function nA(t,e,r,i,s){const[n,o]=e,[l,c]=r,[d,h]=i,[y,f]=s,m=(n-l)*(h-f)-(o-c)*(d-y);if(m===0)return null;const g=(n*c-o*l)*(d-y)-(n-l)*(d*f-h*y),v=(n*c-o*l)*(h-f)-(o-c)*(d*f-h*y);return t[0]=g/m,t[1]=v/m,t}const ps=2*Math.PI;function Qa(t,e){const r=Math.atan2(t,e);return r<0?r+ps:r}function xS(t){return Math.abs(t)%ps}function u8(t){const e=xS(t);return e<Math.PI?e:ps-e}function z2(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function $S(t,e,r,i){if(yi(xS(t-e),0))return r?[t,t]:[t,i?t-ps:t+ps];const[s,n]=i?[t-ps,t]:[t,t+ps];return[t,bh({min:s,max:n},e)]}function bh({min:t,max:e},r){let i;return i=e-r,i>=ps?(i-=i%ps,r+i):(i=r-t,i>=ps?(i-=i%ps,r-i):r)}function oA(t,e){const r=bh(t,e);return r>t.min&&r<t.max?r:u8(r-t.min)<u8(r-t.max)?t.min:t.max}function TS(t,e,r,i=10){return e.map(s=>{let n=s;for(let o=0;o<i;o++){const[l,c,d,h,y,f]=r(n),m=t[0]-l,g=t[1]-c,v=-d,b=-h;n+=-(2*m*v+2*g*b)/(2*v*v+2*m*-y+2*b*b+2*g*-f||1e-6)}return n})}const aA=[0,0];function MS(t){const e=1-t,r=e*e,i=t*t;return[r*e,3*t*r,3*i*e,i*t]}function xf(t,e,r,i,s){const[n,o,l,c]=MS(s);return[t[0]*n+e[0]*o+r[0]*l+i[0]*c,t[1]*n+e[1]*o+r[1]*l+i[1]*c]}function c8(t,e,r,i,s){const[n,o,l,c]=MS(s);return t*n+e*o+r*l+i*c}function xse(t,e,r){const i=t,[s,n,o]=e.b;return xf(i,n,o,s,r)}function lA(t,e,r){const i=t,[s,n,o]=e.b,l=Cn([0,0],i,n,r),c=Cn(aA,n,o,r),d=Cn([0,0],o,s,r),h=Cn([0,0],l,c,r),y=Cn([0,0],c,d,r);return[{b:[Cn([],h,y,r),l,h]},{b:[[...s],y,d]}]}function $se(t,e,r){const i=t,[s,n,o]=e.b,l=TS(r,[.1,.5,.9],y=>{const f=1-y,[m,g]=xf(i,n,o,s,y);return[m,g,3*f*f*(n[0]-i[0])+6*f*y*(o[0]-n[0])+3*y*y*(s[0]-o[0]),3*f*f*(n[1]-i[1])+6*f*y*(o[1]-n[1])+3*y*y*(s[1]-o[1]),6*f*(o[0]-2*n[0]+i[0])+6*y*(s[0]-2*o[0]+n[0]),6*f*(o[1]-2*n[1]+i[1])+6*y*(s[1]-2*o[1]+n[1])]}).map(y=>Math.min(1,Math.max(0,y)));l.push(0,1);let c=1/0;const d=l.map(y=>{const f=xf(i,n,o,s,y),[m,g]=f,v=r[0]-m,b=r[1]-g,S=Math.sqrt(v*v+b*b);return c=Math.min(S,c),{t:y,curvePoint:f,distance:S}}),h=[];for(const y of d){const{t:f,distance:m}=y;rS(m,c)&&!h.some(({t:g})=>yi(g,f))&&h.push(y)}return h}function uA(t,e,r){const i=e,[s,n,o]=r.b;if(Ai(t,i),Ai(t,s),bf(t,n[0],n[1])&&bf(t,o[0],o[1]))return t;for(const l of p8(i[0],n[0],o[0],s[0]))l>0&&l<1&&IF(t,c8(i[0],n[0],o[0],s[0],l));for(const l of p8(i[1],n[1],o[1],s[1]))l>0&&l<1&&EF(t,c8(i[1],n[1],o[1],s[1],l));return t}function p8(t,e,r,i){const s=3*(3*(e-r)-t+i),n=6*(t-2*e+r),o=3*(e-t);if(s===0)return n!==0?[-o/n]:[];const l=Math.sqrt(n*n-4*s*o);return[(-n+l)/(2*s),(-n-l)/(2*s)]}function Tse(t,e,r){let s=0,n=[e];for(let o=0;o<16;o++){let l=t;const c=[];for(const h of n)c.push(...lA(l,h,.5)),l=h.b[0];n=c,l=t,s=0;let d=0;for(const h of n){const[y,f,m]=h.b,g=Math.sqrt(_r(l,y));s+=(g+(Math.sqrt(_r(l,f))+Math.sqrt(_r(f,m))+Math.sqrt(_r(m,y))))/2,d+=g,l=y}if(s-d<r)return s}return s}function cA(t,e,r){const[i,s]=t,[n,o]=e,[l,c]=r,[d,h]=[n-i,o-s];let y=d*(l-i)+h*(c-s);y/=d**2+h**2,y=gi(y,0,1);const f=Cn([0,0],t,e,y);return{t:y,curvePoint:f,distance:Math.sqrt(_r(f,r))}}let IS=class{constructor(e,r,i,s,n,o){this.cx=e,this.cy=r,this.radius=i,this.thetaStart=s,this.thetaEnd=n,this.isInvalid=o}get startPoint(){const{cx:e,cy:r,radius:i,thetaStart:s}=this;return[e+i*Math.cos(s),r+i*Math.sin(s)]}get endPoint(){const{cx:e,cy:r,radius:i,thetaEnd:s}=this;return[e+i*Math.cos(s),r+i*Math.sin(s)]}};function K0(t,e){const{cx:r,cy:i,radius:s}=t;return[r+s*Math.cos(e),i+s*Math.sin(e)]}function q1(t,e){if(t.isInvalid)return Cn([0,0],t.startPoint,t.endPoint,e);const{thetaStart:r,thetaEnd:i}=t;return K0(t,r*(1-e)+i*e)}function Ise(t,e){if(t.isInvalid)return cA(t.startPoint,t.endPoint,e);const{cx:r,cy:i,thetaStart:s,thetaEnd:n}=t,[o,l]=e,c=oA(z2(s,n),Math.atan2(l-i,o-r)),d=K0(t,c);return{t:(c-s)/(n-s),curvePoint:d,distance:Math.sqrt(_r(e,d))}}function d8(t,e){if(e.isInvalid)return Ai(t,e.startPoint),Ai(t,e.endPoint),t;const{cx:r,cy:i,radius:s,thetaStart:n,thetaEnd:o}=e;Ai(t,K0(e,n)),Ai(t,K0(e,o));const l=z2(n,o),c=Math.PI/2;let d=0;for(const h of[[r+s,i],[r,i+s],[r-s,i],[r,i-s]])d=bh(l,d),d>l.min&&d<l.max&&Ai(t,h),d+=c;return t}function Ese(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:r,thetaEnd:i}=t;return e*Math.abs(i-r)}function pA(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function dA(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Uu(t,e,r,i,s,n,o,l,c,d){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t[4]=n,t[5]=o,t[6]=l,t[7]=c,t[8]=d,t}function ES(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function PS(t,e){if(t===e){const r=e[1],i=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=i,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function RS(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=h*o-l*d,f=-h*n+l*c,m=d*n-o*c;let g=r*y+i*f+s*m;return g?(g=1/g,t[0]=y*g,t[1]=(-h*i+s*d)*g,t[2]=(l*i-s*o)*g,t[3]=f*g,t[4]=(h*r-s*c)*g,t[5]=(-l*r+s*n)*g,t[6]=m*g,t[7]=(-d*r+i*c)*g,t[8]=(o*r-i*n)*g,t):null}function hA(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8];return t[0]=o*h-l*d,t[1]=s*d-i*h,t[2]=i*l-s*o,t[3]=l*c-n*h,t[4]=r*h-s*c,t[5]=s*n-r*l,t[6]=n*d-o*c,t[7]=i*c-r*d,t[8]=r*o-i*n,t}function U1(t){const e=t[0],r=t[1],i=t[2],s=t[3],n=t[4],o=t[5],l=t[6],c=t[7],d=t[8];return e*(d*n-o*c)+r*(-d*s+o*l)+i*(c*s-n*l)}function Hd(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=e[8],f=r[0],m=r[1],g=r[2],v=r[3],b=r[4],S=r[5],$=r[6],E=r[7],T=r[8];return t[0]=f*i+m*o+g*d,t[1]=f*s+m*l+g*h,t[2]=f*n+m*c+g*y,t[3]=v*i+b*o+S*d,t[4]=v*s+b*l+S*h,t[5]=v*n+b*c+S*y,t[6]=$*i+E*o+T*d,t[7]=$*s+E*l+T*h,t[8]=$*n+E*c+T*y,t}function $f(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=e[8],f=r[0],m=r[1];return t[0]=i,t[1]=s,t[2]=n,t[3]=o,t[4]=l,t[5]=c,t[6]=f*i+m*o+d,t[7]=f*s+m*l+h,t[8]=f*n+m*c+y,t}function OS(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=e[8],f=Math.sin(r),m=Math.cos(r);return t[0]=m*i+f*o,t[1]=m*s+f*l,t[2]=m*n+f*c,t[3]=m*o-f*i,t[4]=m*l-f*s,t[5]=m*c-f*n,t[6]=d,t[7]=h,t[8]=y,t}function yA(t,e,r){const i=r[0],s=r[1],n=r[2];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=n*e[6],t[7]=n*e[7],t[8]=n*e[8],t}function fA(t,e,r){const i=r[0],s=r[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function mA(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function gA(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=-r,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function vA(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function wA(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function bA(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=r+r,l=i+i,c=s+s,d=r*o,h=i*o,y=i*l,f=s*o,m=s*l,g=s*c,v=n*o,b=n*l,S=n*c;return t[0]=1-y-g,t[3]=h-S,t[6]=f+b,t[1]=h+S,t[4]=1-d-g,t[7]=m-v,t[2]=f-b,t[5]=m+v,t[8]=1-d-y,t}function _A(t,e){const r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],l=e[6],c=e[8],d=e[9],h=e[10],y=h*o-l*d,f=-h*n+l*c,m=d*n-o*c,g=r*y+i*f+s*m;if(!g)return null;const v=1/g;return t[0]=y*v,t[1]=(-h*i+s*d)*v,t[2]=(l*i-s*o)*v,t[3]=f*v,t[4]=(h*r-s*c)*v,t[5]=(-l*r+s*n)*v,t[6]=m*v,t[7]=(-d*r+i*c)*v,t[8]=(o*r-i*n)*v,t}function SA(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],S=e[15],$=r*l-i*o,E=r*c-s*o,T=r*d-n*o,R=i*c-s*l,O=i*d-n*l,z=s*d-n*c,U=h*v-y*g,J=h*b-f*g,ie=h*S-m*g,oe=y*b-f*v,ee=y*S-m*v,Te=f*S-m*b;let pe=$*Te-E*ee+T*oe+R*ie-O*J+z*U;return pe?(pe=1/pe,t[0]=(l*Te-c*ee+d*oe)*pe,t[1]=(c*ie-o*Te-d*J)*pe,t[2]=(o*ee-l*ie+d*U)*pe,t[3]=(s*ee-i*Te-n*oe)*pe,t[4]=(r*Te-s*ie+n*J)*pe,t[5]=(i*ie-r*ee-n*U)*pe,t[6]=(v*z-b*O+S*R)*pe,t[7]=(b*T-g*z-S*E)*pe,t[8]=(g*O-v*T+S*$)*pe,t):null}function xA(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function $A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function TA(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function MA(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function CS(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function IA(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function EA(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t[4]=e[4]+r[4]*i,t[5]=e[5]+r[5]*i,t[6]=e[6]+r[6]*i,t[7]=e[7]+r[7]*i,t[8]=e[8]+r[8]*i,t}function PA(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function RA(t,e){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],d=t[7],h=t[8],y=e[0],f=e[1],m=e[2],g=e[3],v=e[4],b=e[5],S=e[6],$=e[7],E=e[8],T=$r();return Math.abs(r-y)<=T*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-f)<=T*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-m)<=T*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(n-g)<=T*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-v)<=T*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(l-b)<=T*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-S)<=T*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(d-$)<=T*Math.max(1,Math.abs(d),Math.abs($))&&Math.abs(h-E)<=T*Math.max(1,Math.abs(h),Math.abs(E))}function OA(t){const e=$r(),r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],d=t[7],h=t[8];return Math.abs(1-(r*r+n*n+c*c))<=e&&Math.abs(1-(i*i+o*o+d*d))<=e&&Math.abs(1-(s*s+l*l+h*h))<=e}const CA=Hd,kA=CS;Object.freeze(Object.defineProperty({__proto__:null,add:MA,adjoint:hA,copy:dA,determinant:U1,equals:RA,exactEquals:PA,frob:TA,fromMat2d:wA,fromMat4:pA,fromQuat:bA,fromRotation:gA,fromScaling:vA,fromTranslation:mA,identity:ES,invert:RS,isOrthoNormal:OA,mul:CA,multiply:Hd,multiplyScalar:IA,multiplyScalarAndAdd:EA,normalFromMat4:SA,normalFromMat4Legacy:_A,projection:xA,rotate:OS,scale:yA,scaleByVec2:fA,set:Uu,str:$A,sub:kA,subtract:CS,translate:$f,transpose:PS},Symbol.toStringTag,{value:"Module"}));function Tl(){return[1,0,0,0,1,0,0,0,1]}function FA(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function AA(t,e,r,i,s,n,o,l,c){return[t,e,r,i,s,n,o,l,c]}const LA=Tl();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:LA,clone:FA,create:Tl,fromValues:AA},Symbol.toStringTag,{value:"Module"}));const Ol=Tl();function NA(t,e,r){const[i,s]=t,[n,o]=e,[l,c]=r;Uu(Ol,i,n,l,s,o,c,1,1,1);const d=U1(Ol),h=4*d/(_r(t,e)+_r(e,r)+_r(r,t));if(!isFinite(h)||Math.abs(h)<1e-8)return null;const y=i**2+s**2,f=n**2+o**2,m=l**2+c**2;Uu(Ol,y,f,m,s,o,c,1,1,1);const g=U1(Ol);return Uu(Ol,y,f,m,i,n,l,1,1,1),[g/d*.5,U1(Ol)/d*-.5]}function kS(t,e){const[r,i]=e.c,s=NA(t,i,r),n=s==null,o=s??Cn([],t,r,.5),[l,c]=t,[d,h]=i,[y,f]=r,[m,g]=o,v=l-m,b=c-g,S=Math.sqrt(v*v+b*b),$=Qa(c-g,l-m),E=Qa(h-g,d-m);let T=Qa(f-g,y-m);return(E-$)*(T-E)<0&&(T+=2*Math.sign($-T)*Math.PI),new IS(m,g,S,$,T,n)}function Pse(t,e,r){const i=q1(t,r/2),s=q1(t,r),n=q1(t,(r+1)/2);return[{c:[s,i]},{c:[[...e.c[0]],n]}]}function Rse(t,e){const[r]=e.c,{cx:i,cy:s,thetaStart:n,thetaEnd:o,radius:l,isInvalid:c}=kS(t,e);return{a:[r,[i,s],Math.abs(o-n)<Math.PI?1:0,n>o?1:0,c?n:0,l,c?0:1]}}function Ose(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function Cse(t){return"curveRings"in t?t.curveRings:t.curvePaths}function kg(t){return"b"in t}function Fg(t){return"c"in t}function q2(t){return Array.isArray(t)}function kse(t){return"a"in t}function FS(t){return"a"in t&&t.a.length===4}function DA(t){return"a"in t&&t.a.length===7}function N4(t){return q2(t)?t:kg(t)?t.b[0]:Fg(t)?t.c[0]:t.a[0]}function jA(t){if(kg(t)){const[e,r,i]=t.b;return{b:[[...e],[...r],[...i]]}}if(Fg(t)){const[e,r]=t.c;return{c:[[...e],[...r]]}}if(q2(t))return[...t];if(FS(t)){const[e,r,i,s]=t.a;return{a:[[...e],[...r],i,s]}}if(DA(t)){const[e,r,i,s,n,o,l]=t.a;return{a:[[...e],[...r],i,s,n,o,l]}}return t}function VA(t,e){const[r,i,s,n]=e.a,[o,l]=t,[c,d]=r,[h,y]=i,f=o-h,m=l-y,g=Math.sqrt(f*f+m*m),v=c-h,b=d-y,S=Math.sqrt(v*v+b*b),$=g===0||S===0||!rS(g,S),E=g,[T,R]=$S(Qa(l-y,o-h),Math.atan2(d-y,c-h),s,n);return new IS(h,y,E,T,R,$)}function Fse(t,e,r){const{cx:i,cy:s,thetaStart:n,thetaEnd:o}=t,[l,c,d,h]=e.a,y=n*(1-r)+o*r;return[{a:[q1(t,r),[i,s],Math.abs(y-n)<Math.PI?1:0,h]},{a:[[...l],[i,s],Math.abs(o-y)<Math.PI?1:0,h]}]}let zA=class{constructor(e,r,i,s,n,o,l,c,d){this.cx=e,this.cy=r,this.a=i,this.b=s,this.cosR=n,this.sinR=o,this.u1=l,this.u2=c,this.isInvalid=d}};function Ag(t,e){const[r,i,s,n,o,l,c]=e.a,[d,h]=t,[y,f]=r,[m,g]=i,v=l*c,b=Math.cos(o),S=Math.sin(o),[$,E]=$S(Qa(1/v*(h-g)*b-1/v*(d-m)*S,1/l*(h-g)*S+1/l*(d-m)*b),Math.atan2(1/v*(f-g)*b-1/v*(y-m)*S,1/l*(f-g)*S+1/l*(y-m)*b),s,n);return new zA(m,g,l,v,b,S,$,E,l===0||v===0)}function Zd(t,e){const{a:r,b:i,cosR:s,sinR:n,cx:o,cy:l}=t,c=Math.cos(e),d=Math.sin(e);return[r*c*s-i*d*n+o,r*c*n+i*d*s+l]}function Jl(t,e){const{u1:r,u2:i}=t;return Zd(t,r*(1-e)+i*e)}function Lse(t,e,r){if(r<0||r>1)return[];if(r===0||r===1)return[jA(e)];const[i,[s,n],o,l,c,d,h]=e.a,{u1:y,u2:f}=t,m=y*(1-r)+f*r;return[{a:[[...Jl(t,r)],[s,n],Math.abs(m-y)<Math.PI?1:0,l,c,d,h]},{a:[[...i],[s,n],Math.abs(f-m)<Math.PI?1:0,l,c,d,h]}]}function Nse(t,e){const{a:r,b:i,cosR:s,sinR:n,u1:o,u2:l}=t,c=Math.PI/6,d=TS(e,[1*c,2*c,4*c,5*c,7*c,8*c,10*c,11*c],v=>{const b=Math.cos(v),S=Math.sin(v),[$,E]=Zd(t,v);return[$,E,-r*s*S-i*n*b,-r*n*S+i*s*b,-r*s*b+i*n*S,-r*n*b-i*s*S]}),h=z2(o,l),y=new Set(d.map(v=>bh(h,v)).filter(v=>v>h.min&&v<h.max));y.add(o),y.add(l);let f,m,g=1/0;for(const v of y){const b=Zd(t,v),[S,$]=b,E=e[0]-S,T=e[1]-$,R=E*E+T*T;R<g&&(f=(v-o)/(l-o),m=b,g=R)}return{t:f,curvePoint:m,distance:Math.sqrt(g)}}function qA(t,e,r){const i=Ag(e,r),{a:s,b:n,u1:o,u2:l,cosR:c,sinR:d,isInvalid:h}=i,y=r.a[0];if(Ai(t,e),Ai(t,y),h)return t;const f=Math.atan2(-n*d,s*c),m=f+Math.PI,g=Math.atan2(n*c,s*d),v=g+Math.PI,b=z2(o,l);for(const S of[f,m,g,v].map($=>bh(b,$)))S>b.min&&S<b.max&&Ai(t,Zd(i,S));return t}function Dse(t,e,r){const[i,s,n,o,l,c,d]=e.a,h=Ag(t,e),{u1:y,u2:f,isInvalid:m}=h,g=f-y;if(m)return Math.sqrt(_r(t,i));const v=14,b=[0,0];let S=0,$=[Jl(h,0),Jl(h,.25),Jl(h,.5),Jl(h,.75),Jl(h,1)];for(let E=0;E<v;E++){const T=$.length-1,R=g/(2*T),O=[];for(let U=0;U<T;U++)O.push($[U]),O.push(Zd(h,y+(2*U+1)*R));O.push($[$.length-1]),$=O,S=0;let z=0;for(let U=1;U<$.length;U++){const J=$[U-1],ie=$[U];if(S+=Math.sqrt(_r(J,ie)),U>1){const oe=$[U-2],ee=nA(b,oe,J,s,ie);z+=ee?Math.sqrt(_r(J,ee)):Math.abs(ie[0]-J[0])+Math.abs(ie[1]-J[1])}else z+=S}if(z-S<r)return S}return S}const h8=Tl(),Bh=Tl(),y8=Tl(),ao=Tl();function jse(t,e,r){const[i,s,n,o,l,c,d]=e.a,h=Ag(t,e),{cosR:y,sinR:f,a:m,b:g,cx:v,cy:b}=h,S=z1([0,0],i,r),$=z1([0,0],s,r),E=r[0]*r[4]<0?1-o:o;{const T=m*m*f*f+g*g*y*y,R=2*(g*g-m*m)*f*y,O=m*m*y*y+g*g*f*f,z=-2*T*v-R*b,U=-R*v-2*O*b;Uu(h8,T,R/2,z/2,R/2,O,U/2,z/2,U/2,T*v*v+R*v*b+O*b*b-m*m*g*g)}if(RS(Bh,r),Bh==null){const T=z1([0,0],t,r);return{a:[S,$,n,o,Qa(S[1],S[0]),Math.sqrt(_r(S,T))/2,0]}}PS(y8,Bh),Hd(ao,Hd(ao,y8,h8),Bh);{const T=ao[0],R=2*ao[1],O=ao[4],z=2*ao[2],U=2*ao[5],J=R*R-4*T*O,ie=2*(T*U*U+O*z*z-R*z*U+J*ao[8]),oe=Math.sqrt((T-O)**2+R*R),ee=-Math.sqrt(ie*(T+O+oe))/J,Te=-Math.sqrt(ie*(T+O-oe))/J;return{a:[S,$,n,E,.5*Qa(-R,O-T),ee,Te/ee]}}}function UA(t,e,r){if(q2(r))return Ai(t,e),Ai(t,r),t;if(kg(r))return uA(t,e,r);if(Fg(r)){const i=kS(e,r);return d8(t,i)}if(FS(r)){const i=VA(e,r);return d8(t,i)}return qA(t,e,r)}function AS(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function LS(t){return t.points!==void 0}function NS(t){return t.x!==void 0&&t.y!==void 0}function DS(t){return t.paths!==void 0}function jS(t){return t.rings!==void 0}function VS(t){function e(r,i){return r==null?i:i==null?r:t(r,i)}return e}const ko=VS(Math.min),Fo=VS(Math.max);function Vse(t,e){return DS(e)?Ac(t,e.curvePaths??e.paths,!1,!1)??t:jS(e)?Ac(t,e.curveRings??e.rings,!1,!1)??t:LS(e)?Lg(t,e.points,!1,!1,!1,!1):AS(e)?zS(t,e):(NS(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function zse(t){let e,r,i,s;for(t.reset(),e=i=1/0,r=s=-1/0;t.nextPath();){const n=GA(t);e=Math.min(n[0],e),i=Math.min(n[1],i),r=Math.max(n[2],r),s=Math.max(n[3],s)}return Gr([e,i,r,s])}function GA(t){let e,r,i,s;for(e=i=1/0,r=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),i=Math.min(t.y,i),r=Math.max(t.x,r),s=Math.max(t.y,s);return Gr([e,i,r,s])}function qse(t,e){return DS(e)?Ac(t,e.curvePaths??e.paths,!0,!1)??t:jS(e)?Ac(t,e.curveRings??e.rings,!0,!1)??t:LS(e)?Lg(t,e.points,!0,!1,!0,!1):AS(e)?zS(t,e,!0,!1,!0,!1):(NS(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Ac(t,e,r,i){const s=r?3:2;if(!e.length||!e[0].length)return null;let n,o,l,c,[d,h]=N4(e[0][0]),y=d,f=h;for(let m=0;m<e.length;m++){const g=e[m];for(let v=0;v<g.length;v++){const b=N4(g[v]),[S,$]=b;if(d=ko(d,S),h=ko(h,$),y=Fo(y,S),f=Fo(f,$),r&&b.length>2){const O=b[2];n=ko(n,O),o=Fo(o,O)}if(i&&b.length>s){const O=b[s];l=ko(n,O),c=Fo(o,O)}const E=g[v];if(q2(E)||v<1)continue;const T=N4(g[v-1]),R=fS(d,h,y,f);[d,h,y,f]=UA(R,T,E)}}return r?i?(t[0]=d,t[1]=h,t[2]=n,t[3]=l,t[4]=y,t[5]=f,t[6]=o,t[7]=c,t.length=8,t):(t[0]=d,t[1]=h,t[2]=n,t[3]=y,t[4]=f,t[5]=o,t.length=6,t):i?(t[0]=d,t[1]=h,t[2]=l,t[3]=y,t[4]=f,t[5]=c,t.length=6,t):(t[0]=d,t[1]=h,t[2]=y,t[3]=f,t.length=4,t)}function zS(t,e,r,i,s,n){const o=e.xmin,l=e.xmax,c=e.ymin,d=e.ymax;let h=e.zmin,y=e.zmax,f=e.mmin,m=e.mmax;return s?(h=h||0,y=y||0,n?(f=f||0,m=m||0,t[0]=o,t[1]=c,t[2]=h,t[3]=f,t[4]=l,t[5]=d,t[6]=y,t[7]=m,t):(t[0]=o,t[1]=c,t[2]=h,t[3]=l,t[4]=d,t[5]=y,t)):n?(f=f||0,m=m||0,t[0]=o,t[1]=c,t[2]=f,t[3]=l,t[4]=d,t[5]=m,t):(t[0]=o,t[1]=c,t[2]=l,t[3]=d,t)}function Lg(t,e,r,i,s,n){const o=r?3:2,l=i&&n,c=r&&s;if(!e.length||!e[0].length)return null;let d,h,y,f,[m,g]=e[0],[v,b]=e[0];for(let S=0;S<e.length;S++){const $=e[S],[E,T]=$;if(m=ko(m,E),g=ko(g,T),v=Fo(v,E),b=Fo(b,T),c&&$.length>2){const R=$[2];d=ko(d,R),h=Fo(h,R)}if(l&&$.length>o){const R=$[o];y=ko(d,R),f=Fo(h,R)}}return s?(d=d||0,h=h||0,n?(y=y||0,f=f||0,t[0]=m,t[1]=g,t[2]=d,t[3]=y,t[4]=v,t[5]=b,t[6]=h,t[7]=f,t):(t[0]=m,t[1]=g,t[2]=d,t[3]=v,t[4]=b,t[5]=h,t)):n?(y=y||0,f=f||0,t[0]=m,t[1]=g,t[2]=y,t[3]=v,t[4]=b,t[5]=f,t):(t[0]=m,t[1]=g,t[2]=v,t[3]=b,t)}function BA(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function WA(t){return t.points!==void 0}function HA(t){return t.x!==void 0&&t.y!==void 0}function ZA(t){return t.paths!==void 0}function JA(t){return t.rings!==void 0}const Ng=[];function qS(t,e,r,i){return{xmin:t,ymin:e,xmax:r,ymax:i}}function US(t,e,r,i,s,n){return{xmin:t,ymin:e,zmin:r,xmax:i,ymax:s,zmax:n}}function GS(t,e,r,i,s,n){return{xmin:t,ymin:e,mmin:r,xmax:i,ymax:s,mmax:n}}function BS(t,e,r,i,s,n,o,l){return{xmin:t,ymin:e,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:l}}function Dg(t,e=!1,r=!1){return e?r?BS(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):US(t[0],t[1],t[2],t[3],t[4],t[5]):r?GS(t[0],t[1],t[2],t[3],t[4],t[5]):qS(t[0],t[1],t[2],t[3])}function Use(t){return t?BA(t)?t:HA(t)?QA(t):JA(t)?HS(t):ZA(t)?ZS(t):WA(t)?WS(t):null:null}function WS(t){const{hasZ:e,hasM:r,points:i}=t,s=Lg(Ng,i,e??!1,r??!1,e??!1,r??!1);return s?Dg(s,e,r):null}function QA(t){const{x:e,y:r,z:i,m:s}=t,n=s!=null;return i!=null?n?BS(e,r,i,s,e,r,i,s):US(e,r,i,e,r,i):n?GS(e,r,s,e,r,s):qS(e,r,e,r)}function HS(t){const{hasZ:e,hasM:r,rings:i,curveRings:s}=t,n=Ac(Ng,s??i,e??!1,r??!1);return n?Dg(n,e,r):null}function ZS(t){const{hasZ:e,hasM:r,paths:i,curvePaths:s}=t,n=Ac(Ng,s??i,e??!1,r??!1);return n?Dg(n,e,r):null}function Lc(t,e,r=!1){let{hasM:i,hasZ:s}=t;Array.isArray(e)?e.length!==4||i||s?e.length===3&&r&&!i?(s=!0,i=!1):e.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&e.hasZ&&(!i||e.hasM),i=!i&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=i}var G1;function f8(t){return!Array.isArray(t[0])}function YA(t){return typeof t[0]?.[0]=="number"}function KA(t){if(!t)return;let{rings:e,hasM:r,hasZ:i,spatialReference:s}=t;switch(e??=[],YA(e)&&(e=[e]),e[0]?.[0]?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return s??=B.WGS84,{...t,hasM:r,hasZ:i,rings:e,spatialReference:s}}let Ve=G1=class extends $t{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:r}=t;let i=!1,s=!1;for(const o of e)o.hasZ&&(i=!0),o.hasM&&(s=!0);const n={rings:e.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const c=o.zmin+.5*(o.zmax-o.zmin);for(let d=0;d<l.length;d++)l[d].push(c)}if(s&&o.hasM){const c=o.mmin+.5*(o.mmax-o.mmin);for(let d=0;d<l.length;d++)l[d].push(c)}return l}),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new G1(n)}constructor(t){super(KA(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){Ky(N.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=vF(this);return t?se.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=P(t)}get extent(){const t=HS(this),{spatialReference:e}=this;return t?new le({...t,spatialReference:e}):null}get isSelfIntersecting(){return Ky(N.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),ek(this.rings)}writeRings(t,e){e.rings=P(this.rings)}addRing(t){if(!t)return;const e=this.rings,r=e.length;if(f8(t)){const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s].toArray();e[r]=i}else e[r]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new G1;return t.spatialReference=this.spatialReference,t.rings=P(this.rings),t.curveRings=P(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,r=t.spatialReference;if(e!=null!=(r!=null)||e!=null&&r!=null&&!e.equals(r)||this.rings.length!==t.rings.length)return!1;const i=([s,n,o,l],[c,d,h,y])=>s===c&&n===d&&(o==null&&h==null||o===h)&&(l==null&&y==null||l===y);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=t.rings[s];if(!Gb(n,o,i))return!1}return!0}contains(t){if(!t)return!1;const e=k2(t,this.spatialReference);return bg(this,e??t)}isClockwise(t){const e=f8(t)?t.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):t;return pS(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.rings[t][e],i=this.hasZ,s=this.hasM;return i&&!s?new se(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new se(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new se(r[0],r[1],r[2],r[3],this.spatialReference):new se(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(Lc(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[t].splice(e,0,r),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const r=new se(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],r=this.spatialReference,i=e.map(s=>new se(s,r));return this.notifyChange("rings"),i}setPoint(t,e,r){return this._validateInputs(t,e)?(Lc(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[t][e]=r,this.notifyChange("rings"),this):this}_validateInputs(t,e,r=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const i=this.rings[t];if(r&&(e<0||e>i.length)||!r&&(e<0||e>=i.length))return!1}return!0}toJSON(t){return this.write({},t)}};a([u({readOnly:!0})],Ve.prototype,"cache",null),a([u({readOnly:!0})],Ve.prototype,"centroid",null),a([u({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Ve.prototype,"curveRings",void 0),a([j("curveRings")],Ve.prototype,"writeCurveRings",null),a([u({readOnly:!0})],Ve.prototype,"extent",null),a([u({readOnly:!0})],Ve.prototype,"isSelfIntersecting",null),a([u({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ve.prototype,"rings",void 0),a([j("rings")],Ve.prototype,"writeRings",null),Ve=G1=a([_("esri.geometry.Polygon")],Ve),Ve.prototype.toJSON.isDefaultToJSON=!0;function Qo(){return[0,0,0]}function XA(t){return[t[0],t[1],t[2]]}function Jc(t,e,r){return[t,e,r]}function eL(t,e,r){return[t,e,r]}function tL(t,e=Qo()){const r=Math.min(3,t.length);for(let i=0;i<r;++i)e[i]=t[i];return e}function JS(){return Qo()}function QS(){return Jc(1,1,1)}function YS(){return Jc(1,0,0)}function KS(){return Jc(0,1,0)}function XS(){return Jc(0,0,1)}const rL=JS(),iL=QS(),sL=YS(),nL=KS(),oL=XS();Object.freeze(Object.defineProperty({__proto__:null,ONES:iL,UNIT_X:sL,UNIT_Y:nL,UNIT_Z:oL,ZEROS:rL,clone:XA,create:Qo,freeze:eL,fromArray:tL,fromValues:Jc,ones:QS,unitX:YS,unitY:KS,unitZ:XS,zeros:JS},Symbol.toStringTag,{value:"Module"}));var Tf;function aL(t){if(!t)return;let{points:e,hasM:r,hasZ:i,spatialReference:s}=t;switch(e??=[],e?.at(0)?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return s??=B.WGS84,{...t,hasM:r,hasZ:i,points:e,spatialReference:s}}let is=Tf=class extends $t{constructor(t){super(aL(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=WS(this);return t?new le({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=P(this.points)}clone(){const{points:t,spatialReference:e,hasM:r,hasZ:i}=this;return new Tf({points:P(t),spatialReference:e.clone(),hasM:r,hasZ:i})}addPoint(t){return Lc(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],r={x:e[0],y:e[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=e[2],i=3),this.hasM&&(r.m=e[i]),new se(r)}removePoint(t){if(!this._validateInputs(t))return null;const e=new se(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Lc(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};a([u({readOnly:!0})],is.prototype,"cache",null),a([u({readOnly:!0})],is.prototype,"extent",null),a([u({type:[[Number]],json:{write:{isRequired:!0}}})],is.prototype,"points",void 0),a([j("points")],is.prototype,"writePoints",null),is=Tf=a([_("esri.geometry.Multipoint")],is),is.prototype.toJSON.isDefaultToJSON=!0;var Mf;function lL(t){return!Array.isArray(t[0])}function uL(t){return typeof t[0]?.[0]=="number"}function cL(t){if(!t)return;let{paths:e,hasM:r,hasZ:i,spatialReference:s}=t;switch(e??=[],uL(e)&&(e=[e]),e[0]?.[0]?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return s??=B.WGS84,{...t,hasM:r,hasZ:i,paths:e,spatialReference:s}}let vt=Mf=class extends $t{constructor(t){super(cL(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=P(t)}get extent(){const t=ZS(this),{spatialReference:e}=this;return t?new le({...t,spatialReference:e}):null}writePaths(t,e){e.paths=P(this.paths)}addPath(t){if(!t)return;const e=this.paths,r=e.length;if(lL(t)){const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s].toArray();e[r]=i}else e[r]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new Mf;return t.spatialReference=this.spatialReference,t.paths=P(this.paths),t.curvePaths=P(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.paths[t][e],i=this.hasZ,s=this.hasM;return i&&!s?new se(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new se(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new se(r[0],r[1],r[2],r[3],this.spatialReference):new se(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(Lc(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],r=this.spatialReference,i=e.map(s=>new se(s,r));return this.notifyChange("paths"),i}removePoint(t,e){if(!this._validateInputs(t,e))return null;const r=new se(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(t,e,r){return this._validateInputs(t,e)?(Lc(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this.notifyChange("paths"),this):this}_validateInputs(t,e,r=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const i=this.paths[t];if(r&&(e<0||e>i.length)||!r&&(e<0||e>=i.length))return!1}return!0}toJSON(t){return this.write({},t)}};a([u({readOnly:!0})],vt.prototype,"cache",null),a([u({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],vt.prototype,"curvePaths",void 0),a([j("curvePaths")],vt.prototype,"writeCurvePaths",null),a([u({readOnly:!0})],vt.prototype,"extent",null),a([u({type:[[[Number]]],json:{write:{isRequired:!0}}})],vt.prototype,"paths",void 0),a([j("paths")],vt.prototype,"writePaths",null),vt=Mf=a([_("esri.geometry.Polyline")],vt),vt.prototype.toJSON.isDefaultToJSON=!0;var If;let Ql=If=class extends Z{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new If({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};a([u()],Ql.prototype,"isInverse",void 0),a([u()],Ql.prototype,"wkt",void 0),a([u()],Ql.prototype,"wkid",void 0),Ql=If=a([_("esri.geometry.operators.support.GeographicTransformationStep")],Ql);var Ef;let cd=Ef=class extends Z{constructor(t){super(t),this.steps=[]}getInverse(){const t=new Ef;for(let e=this.steps.length-1;e>=0;e--){const r=this.steps[e];t.steps.push(r.getInverse())}return t}};a([u({type:[Ql],nonNullable:!0})],cd.prototype,"steps",void 0),cd=Ef=a([_("esri.geometry.operators.support.GeographicTransformation")],cd);const Gse=Math.PI/180,Bse=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,lo=Qe.radius,Bi=Qe.eccentricitySquared,pL={a1:lo*Bi,a2:lo*Bi*lo*Bi,a3:lo*Bi*Bi/2,a4:lo*Bi*lo*Bi*2.5,a5:lo*Bi+lo*Bi*Bi/2,a6:1-Bi},Wse={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Qe.radius,f:Qe.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Uo.radius,f:Uo.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Us.radius,f:Us.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Us.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},dL={2:{5:qe,7:null,9:null,10:qe,1:dd,6:null,8:null,0:null,3:Gu,11:Bu,2:qe,4:Zu},5:{5:qe,7:null,9:null,10:qe,1:dd,6:null,8:null,0:null,3:Gu,11:Bu,2:qe,4:Zu},7:{5:null,7:qe,9:null,10:qe,1:null,6:v8,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:qe,10:qe,1:null,6:null,8:g8,0:null,3:null,11:null,2:null,4:null},3:{5:pd,7:null,9:null,10:pd,1:yL,6:null,8:null,0:null,3:qe,11:gL,2:pd,4:fL},4:{5:Ju,7:null,9:null,10:Ju,1:ML,6:null,8:null,0:null,3:IL,11:vL,2:Ju,4:qe},1:{5:Hu,7:null,9:null,10:Hu,1:qe,6:null,8:null,0:null,3:xL,11:wL,2:Hu,4:$L},6:{5:null,7:b8,9:null,10:b8,1:null,6:qe,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:w8,10:w8,1:null,6:null,8:qe,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:qe,3:null,11:null,2:null,4:null},10:{5:qe,7:qe,9:qe,10:qe,1:dd,6:v8,8:g8,0:null,3:Gu,11:Bu,2:qe,4:Zu},11:{5:Wu,7:null,9:null,10:Wu,1:bL,6:null,8:null,0:null,3:_L,11:qe,2:Wu,4:SL}};function ex(t,e){return hL(t,e)?.projector}function hL(t,e){if(t==null||e==null)return null;if(Qs.source.spatialReference===t&&Qs.dest.spatialReference===e)return Qs;const r=m8(t,Qs.source),i=m8(e,Qs.dest);return r===0&&i===0?ot(t,e)?Qs.projector=qe:Qs.projector=null:Qs.projector=dL[r][i],Qs}function m8(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=vi(t,1)),W0(t)?e.spatialReferenceId=1:dl(t)?e.spatialReferenceId=2:Zs(t)?e.spatialReferenceId=3:aC(t)?e.spatialReferenceId=11:t.wkt===pC.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===mg.wkt?e.spatialReferenceId=6:t.wkt===gg.wkt?e.spatialReferenceId=8:__(t)?e.spatialReferenceId=7:S_(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function qe(t,e,r,i){t!==r&&(r[i++]=t[e++],r[i++]=t[e++],r[i]=t[e])}function pd(t,e,r,i){r[i]=Dc*(t[e]/Ya),r[i+1]=Dc*(tx-2*Math.atan(Math.exp(-t[e+1]/Ya))),r[i+2]=t[e+2]}function yL(t,e,r,i){const s=t[e]/Ya,n=tx-2*Math.atan(Math.exp(-t[e+1]/Ya)),o=Ya+t[e+2],l=Math.cos(n)*o;r[i]=Math.cos(s)*l,r[i+1]=Math.sin(s)*l,r[i+2]=Math.sin(n)*o}function fL(t,e,r,i){pd(t,e,r,i),Zu(r,i,r,i)}function mL(t,e,r,i,s){const n=.4999999*Math.PI,o=gi(Nc*t[e+1],-n,n),l=Math.sin(o);r[i++]=Nc*t[e]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+l)/(1-l)),r[i]=t[e+2]}function Gu(t,e,r,i){mL(t,e,r,i,Qe)}function Bu(t,e,r,i){r[i]=t[e]*_8,r[i+1]=t[e+1]*_8,r[i+2]=t[e+2]}function Wu(t,e,r,i){r[i]=t[e]*S8,r[i+1]=t[e+1]*S8,r[i+2]=t[e+2]}function gL(t,e,r,i){pd(t,e,r,i),Bu(r,i,r,i)}function vL(t,e,r,i){Ju(t,e,r,i),Bu(r,i,r,i)}function wL(t,e,r,i){Hu(t,e,r,i),Bu(r,i,r,i)}function bL(t,e,r,i){Wu(t,e,r,i),dd(r,i,r,i)}function _L(t,e,r,i){Wu(t,e,r,i),Gu(r,i,r,i)}function SL(t,e,r,i){Wu(t,e,r,i),Zu(r,i,r,i)}function jg(t,e,r,i,s){const n=s+t[e+2],o=Nc*t[e+1],l=Nc*t[e],c=Math.cos(o)*n;r[i]=Math.cos(l)*c,r[i+1]=Math.sin(l)*c,r[i+2]=Math.sin(o)*n}function g8(t,e,r,i){jg(t,e,r,i,Uo.radius)}function v8(t,e,r,i){jg(t,e,r,i,Us.radius)}function dd(t,e,r,i){jg(t,e,r,i,Qe.radius)}function Vg(t,e,r,i,s){const n=t[e],o=t[e+1],l=t[e+2],c=Math.sqrt(n*n+o*o+l*l),d=zk(l/(c===0?1:c)),h=Math.atan2(o,n);r[i++]=Dc*h,r[i++]=Dc*d,r[i]=c-s}function w8(t,e,r,i){Vg(t,e,r,i,Uo.radius)}function b8(t,e,r,i){Vg(t,e,r,i,Us.radius)}function Hu(t,e,r,i){Vg(t,e,r,i,Qe.radius)}function xL(t,e,r,i){Hu(t,e,r,i),Gu(r,i,r,i)}function $L(t,e,r,i){Hu(t,e,r,i),Zu(r,i,r,i)}function TL(t,e,r,i,s){const n=Nc*t[e],o=Nc*t[e+1],l=t[e+2],c=Math.sin(o),d=Math.cos(o),h=s.radius/Math.sqrt(1-s.eccentricitySquared*c*c);r[i++]=(h+l)*d*Math.cos(n),r[i++]=(h+l)*d*Math.sin(n),r[i++]=(h*(1-s.eccentricitySquared)+l)*c}function Zu(t,e,r,i){TL(t,e,r,i,Qe)}function Ju(t,e,r,i){const s=pL,n=t[e],o=t[e+1],l=t[e+2];let c,d,h,y,f,m,g,v,b,S,$,E,T,R,O,z,U,J,ie,oe,ee;c=Math.abs(l),d=n*n+o*o,h=Math.sqrt(d),y=d+l*l,f=Math.sqrt(y),oe=Math.atan2(o,n),m=l*l/y,g=d/y,R=s.a2/f,O=s.a3-s.a4/f,g>.3?(v=c/f*(1+g*(s.a1+R+m*O)/f),ie=Math.asin(v),S=v*v,b=Math.sqrt(1-S)):(b=h/f*(1-m*(s.a5-R-g*O)/f),ie=Math.acos(b),S=1-b*b,v=Math.sqrt(S)),$=1-Qe.eccentricitySquared*S,E=Qe.radius/Math.sqrt($),T=s.a6*E,R=h-E*b,O=c-T*v,U=b*R+v*O,z=b*O-v*R,J=z/(T/$+U),ie+=J,ee=U+z*J/2,l<0&&(ie=-ie),r[i++]=Dc*oe,r[i++]=Dc*ie,r[i]=ee}function ML(t,e,r,i){Ju(t,e,r,i),dd(r,i,r,i)}function IL(t,e,r,i){Ju(t,e,r,i),Gu(r,i,r,i)}const Qs={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:qe},Nc=vh(1),Dc=X_(1),tx=.5*Math.PI,Ya=Qe.radius,_8=Ya*Math.PI/180,S8=180/(Ya*Math.PI);function _h(t,e,r,i,s,n,o=Math.floor(t.length/3)){const l=ex(e,s);if(l==null)return!1;if(l===qe){if(t===i&&r===n)return!0;const d=r+3*o;for(let h=r,y=n;h<d;h++,y++)i[y]=t[h];return!0}const c=r+3*o;for(let d=r,h=n;d<c;d+=3,h+=3)l(t,d,i,h);return!0}const Hse=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:_h},Symbol.toStringTag,{value:"Module"}));function x8(t,e,r,i,s,n){return Wh[0]=t,Wh[1]=e,Wh[2]=r,_h(Wh,i,0,s,n,0)}const Wh=Qo();function zg(t,e,r){if(e==null||r==null||r.vcsWkid||ot(e,r)||Bo(e)||Bo(r))return null;const i=Oc(e)/Oc(r);if(i===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>EL(s,i);case"polyline":case"esriGeometryPolyline":return s=>RL(s,i);case"polygon":case"esriGeometryPolygon":return s=>PL(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>OL(s,i);case"extent":case"esriGeometryEnvelope":return s=>CL(s,i);default:return null}}function EL(t,e){t?.z!=null&&(t.z*=e)}function PL(t,e){if(t)for(const r of t.rings)for(const i of r)i.length>2&&(i[2]*=e)}function RL(t,e){if(t)for(const r of t.paths)for(const i of r)i.length>2&&(i[2]*=e)}function OL(t,e){if(t)for(const r of t.points)r.length>2&&(r[2]*=e)}function CL(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let hd=null,Jd=null,Qd=null,jc=null,Pf={};const qg=new n_;function Qn(){return!!(Jd?.isLoaded()&&Qd?.isLoaded()&&jc?.isLoaded())}function rx(){return!!Qn()||(me(qg),Wo(),!1)}function ix(t,e){return!t||!e||fs(t,e)||rx()}function kL(t,e){return!fs(t,e)&&!Qn()}async function Wo(t){hd==null&&(hd=Promise.all([L(()=>import("./money-tides-projectOperator-DXmDC2JV.js"),__vite__mapDeps([23,1,2,24,25,3,4,5,10,11,12])).then(e=>(Jd=e,Jd.load())),L(()=>import("./money-tides-projectOperator-DzwxYkBD.js"),__vite__mapDeps([26,1,2,24,25,3,4,5,10,11,12])).then(e=>(Qd=e,Qd.load())),L(()=>import("./money-tides-geographicTransformationUtils-_Hwa5_Me.js"),__vite__mapDeps([27,1,2,3,4,5,10,11,12])).then(e=>(jc=e,jc.load()))])),await hd,Re(t),qg.notify()}function Yo(t,e,r){return Array.isArray(t)?t.length===0?[]:(DC(t),Rf(t,t[0].spatialReference,e,r)):(Cc(t),Rf([t],t.spatialReference,e,r)[0])}function Rf(t,e,r,i){if(e==null||r==null)return t;if(fs(e,r,i))return t.map(s=>B1(s,e,r));if(i?.geographicTransformation==null&&W0(e))return t.map(s=>B1(s,e,B.WGS84)).map(s=>Yd(s,r));if(i?.geographicTransformation==null&&W0(r))return t.map(s=>Yd(s,B.WGS84)).map(s=>B1(s,B.WGS84,r));if(!Qn())throw new nx;if(!i?.geographicTransformation){if(i?.extendedParams)i={...i,geographicTransformation:jc.getTransformation(e,r,i.areaOfInterestExtent)||new cd};else if(!i?.areaOfInterestExtent){const s=FL(e,r);let n=Pf[s];n||(n=jc.getTransformation(e,r)||new cd,Pf[s]=n),i={geographicTransformation:n}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof $t?Jd.executeMany(t,r,i):Qd.executeMany(t,r,i)}function FL(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function AL(t,e){const r=sx([t],e);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function sx(t,e){if(!Qn()){for(const r of t)if(r!=null&&!ot(r.spatialReference,e)&&ci(r.spatialReference)&&ci(e)&&!fs(r.spatialReference,e))return me(qg),{pending:Wo(),geometries:null}}return{pending:null,geometries:t.map(r=>r==null?null:ot(r.spatialReference,e)?r:ci(r.spatialReference)&&ci(e)?Yd(r,e):null)}}let nx=class extends M{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function LL(){hd=null,Jd=null,Qd=null,jc=null,Pf={}}const NL={get loadPromise(){return hd}};function Yd(t,e){try{const r=Yo(t,e);if(r==null)return null;"xmin"in t&&"xmin"in r&&(r.zmin=t.zmin,r.zmax=t.zmax);const i=zg(r.type,t.spatialReference,e);return i?.(r),r}catch(r){if(!(r instanceof nx))throw r;return null}}async function ox(t,e,r){const i=t.spatialReference;return i!=null&&e!=null&&await Ug(i,e,null,r),Yd(t,e)}function fs(t,e,r){return!(r?.areaOfInterestExtent||r?.extendedParams||r?.geographicTransformation)&&(!!ot(t,e)||ci(t)&&ci(e)&&!!ex(t,e))}function DL(t,e){if(ot(t,e))return!0;if(!ci(t)||!ci(e))return!1;const r=dl(t)||Zs(t)||V9(t),i=dl(e)||Zs(e)||V9(e);return r&&i}async function Ug(t,e,r,i){if(Qn())return x9(i);if(Array.isArray(t)){for(const{source:s,dest:n,options:o}of t)if(s&&n&&!fs(s,n,o))return Wo(i)}else if(t&&e&&!fs(t,e,r))return Wo(i);return x9(i)}function B1(t,e,r){return t?"x"in t?ax(t,e,new se,r,0):"xmin"in t?dx(t,e,new le,r,0):"rings"in t?px(t,e,new Ve,r,0):"paths"in t?ux(t,e,new vt,r,0):"points"in t?lx(t,e,new is,r,0):null:null}function jL(t,e,r=e.spatialReference,i=0){return r!=null&&t.spatialReference!=null&&ax(t,t.spatialReference,e,r,i)!=null}function ax(t,e,r,i,s){tr[0]=t.x,tr[1]=t.y;const n=t.z;return tr[2]=n!==void 0?n:s,_h(tr,e,0,tr,i,0)?(r.x=tr[0],r.y=tr[1],r.spatialReference=i,n!==void 0||Bo(i)?(r.z=tr[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),t.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=t.m,r.hasM=!0),r):null}function VL(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&lx(t,t.spatialReference,e,r,i)!=null}function lx(t,e,r,i,s){const{points:n,hasZ:o,hasM:l}=t,c=[],d=n.length,h=[];for(const f of n)h.push(f[0],f[1],o?f[2]:s);if(!_h(h,e,0,h,i,0,d))return null;const y=o||Bo(i);for(let f=0;f<d;++f){const m=3*f,g=h[m],v=h[m+1];y&&l?c.push([g,v,h[m+2],n[f][3]]):y?c.push([g,v,h[m+2]]):l?c.push([g,v,n[f][2]]):c.push([g,v])}return r.points=c,r.spatialReference=i,r.hasZ=o,r.hasM=l,r}function zL(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&ux(t,t.spatialReference,e,r,i)!=null}function ux(t,e,r,i,s){const{paths:n,hasZ:o,hasM:l}=t,c=[];if(!hx(n,o??!1,l??!1,e,c,i,s))return null;const d=o||Bo(i);return r.paths=c,r.spatialReference=i,r.hasZ=d,r.hasM=l,r}function cx(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&px(t,t.spatialReference,e,r,i)!=null}function px(t,e,r,i,s){const{rings:n,hasZ:o,hasM:l}=t,c=[];if(!hx(n,o??!1,l??!1,e,c,i,s))return null;const d=o||Bo(i);return r.rings=c,r.spatialReference=i,r.hasZ=d,r.hasM=l,r}function qL(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&dx(t,t.spatialReference,e,r,i)!=null}function dx(t,e,r,i,s){const{xmin:n,ymin:o,xmax:l,ymax:c,hasZ:d,hasM:h}=t,y=d?t.zmin:s;if(!x8(n,o,y,e,tr,i))return null;const f=d||Bo(i);r.xmin=tr[0],r.ymin=tr[1],f&&(r.zmin=tr[2]);const m=d?t.zmax:s;return x8(l,c,m,e,tr,i)?(r.xmax=tr[0],r.ymax=tr[1],f&&(r.zmax=tr[2]),h&&(r.mmin=t.mmin,r.mmax=t.mmax),r.spatialReference=i,r):null}function hx(t,e,r,i,s,n,o=0){const l=new Array;for(const h of t)for(const y of h)l.push(y[0],y[1],e?y[2]:o);if(!_h(l,i,0,l,n,0))return!1;let c=0;s.length=0;const d=e||Bo(n);for(const h of t){const y=new Array;for(const f of h)d&&r?y.push([l[c++],l[c++],l[c++],f[3]]):d?y.push([l[c++],l[c++],l[c++]]):r?(y.push([l[c++],l[c++],f[2]]),c++):(y.push([l[c++],l[c++]]),c++);s.push(y)}return!0}const tr=Qo(),Jse=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:fs,initializeProjection:Ug,isEqualBaseGCS:DL,isLoaded:Qn,isLoadedOrLoad:rx,isLoadedOrLoadFor:ix,load:Wo,project:Yo,projectExtent:qL,projectMany:Rf,projectMultipoint:VL,projectOrLoad:AL,projectOrLoadMany:sx,projectPoint:jL,projectPolygon:cx,projectPolyline:zL,projectWithZConversion:ox,projectWithoutEngine:B1,requiresLoad:kL,test:NL,tryProjectWithZConversion:Yd,unload:LL},Symbol.toStringTag,{value:"Module"}));var W1;let Of=W1=class extends xl(q.ofType(Ve)){constructor(t){super(t)}clone(){return new W1(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(r=>{if(!e.equals(r.spatialReference)){if(!fs(r.spatialReference,e))return t?.messages?.push(new hs("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const s=new Ve;cx(r,s,e),r=s}const i=r.toJSON(t);return delete i.spatialReference,i}).filter(r=>r!=null):this.toArray().map(r=>r.toJSON(t))}static fromJSON(t,e){const r=new W1;return t.forEach(i=>r.add(Ve.fromJSON(i,e))),r}};Of=W1=a([_("esri.layers.support.PolygonCollection")],Of);const yd=Of;let an=class extends xl(Tg){constructor(e){super(e),this.id=`focusarea-${rg()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new yd}readGeometries(e,r,i){Array.isArray(e)?this.geometries=yd.fromJSON(e,i):i.origin!=="web-scene"&&i.origin!=="portal-item"||i.hooks?.onAfterLoad?.(()=>this._loadGeometries(ph(e,i),i))}async _loadGeometries(e,r){const i=await Le(e,{responseType:"json"});this.geometries=yd.fromJSON(i.data,r)}};a([u({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),u()],an.prototype,"id",void 0),a([u({type:String,json:{write:!0}})],an.prototype,"title",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],an.prototype,"enabled",void 0),a([u({type:uF,json:{write:!0}})],an.prototype,"outline",void 0),a([u({type:yd,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new yd(t.items.map(e=>e.clone()))}),rF({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],an.prototype,"geometries",void 0),a([F(["web-scene","portal-item","service"],"geometries")],an.prototype,"readGeometries",null),an=a([_("esri.effects.FocusArea")],an);const UL=an;let xp=class extends xl(Tg){constructor(e){super(e),this.areas=new q,this.style="bright"}};a([u({type:q.ofType(UL),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new q(t.items.map(e=>e.clone()))})],xp.prototype,"areas",void 0),a([u({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],xp.prototype,"style",void 0),xp=a([_("esri.effects.FocusAreas")],xp);const yx=xp;function GL(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function BL(t){return!(!GL(t)||!$k(t)?.operations?.supportsEditing||"editingEnabled"in t&&!Mk(t)||q_(t))}const WL=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,HL="screenUtils.toPt: input not recognized!",fx=96;function ZL(t){return t?t/72*fx:0}function Vi(t){return t?72*t/fx:0}function _e(t){if(typeof t=="string"){const e=t.match(WL);if(e){const r=Number(e[1]),i=e[3]&&e[3].toLowerCase(),s=t.startsWith("-"),n=i==="px"?Vi(r):r;return s?-n:n}return console.warn(HL),null}return t}function Et(t=0,e=0){return{x:t,y:e}}function Kse(t){return t?Et(t.x,t.y):null}function Xse(t=0,e=0){return[t,e]}function ene(t=0,e=0,r=0){return[t,e,r]}function tne(t){return t}function rne(t){return t}function ine(t){return t}function sne(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function U2(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function JL(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function QL(t,e,r,i,s,n,o,l,c,d,h,y,f,m,g,v){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=r,b[3]=i,b[4]=s,b[5]=n,b[6]=o,b[7]=l,b[8]=c,b[9]=d,b[10]=h,b[11]=y,b[12]=f,b[13]=m,b[14]=g,b[15]=v,b}const YL=U2();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:YL,clone:JL,create:U2,fromValues:QL},Symbol.toStringTag,{value:"Module"}));function mx(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ko(t,e,r,i,s,n,o,l,c,d,h,y,f,m,g,v,b){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t[4]=n,t[5]=o,t[6]=l,t[7]=c,t[8]=d,t[9]=h,t[10]=y,t[11]=f,t[12]=m,t[13]=g,t[14]=v,t[15]=b,t}function G2(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xo(t,e){if(t===e){const r=e[1],i=e[2],s=e[3],n=e[6],o=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=n,t[11]=e[14],t[12]=s,t[13]=o,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function KL(t,e){return gx(t,e)||G2(t),t}function gx(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],S=e[15],$=r*l-i*o,E=r*c-s*o,T=r*d-n*o,R=i*c-s*l,O=i*d-n*l,z=s*d-n*c,U=h*v-y*g,J=h*b-f*g,ie=h*S-m*g,oe=y*b-f*v,ee=y*S-m*v,Te=f*S-m*b;let pe=$*Te-E*ee+T*oe+R*ie-O*J+z*U;return pe?(pe=1/pe,t[0]=(l*Te-c*ee+d*oe)*pe,t[1]=(s*ee-i*Te-n*oe)*pe,t[2]=(v*z-b*O+S*R)*pe,t[3]=(f*O-y*z-m*R)*pe,t[4]=(c*ie-o*Te-d*J)*pe,t[5]=(r*Te-s*ie+n*J)*pe,t[6]=(b*T-g*z-S*E)*pe,t[7]=(h*z-f*T+m*E)*pe,t[8]=(o*ee-l*ie+d*U)*pe,t[9]=(i*ie-r*ee-n*U)*pe,t[10]=(g*O-v*T+S*$)*pe,t[11]=(y*T-h*O-m*$)*pe,t[12]=(l*J-o*oe-c*U)*pe,t[13]=(r*oe-i*J+s*U)*pe,t[14]=(v*E-g*R-b*$)*pe,t[15]=(h*R-y*E+f*$)*pe,t):null}function XL(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],S=e[15];return t[0]=l*(f*S-m*b)-y*(c*S-d*b)+v*(c*m-d*f),t[1]=-(i*(f*S-m*b)-y*(s*S-n*b)+v*(s*m-n*f)),t[2]=i*(c*S-d*b)-l*(s*S-n*b)+v*(s*d-n*c),t[3]=-(i*(c*m-d*f)-l*(s*m-n*f)+y*(s*d-n*c)),t[4]=-(o*(f*S-m*b)-h*(c*S-d*b)+g*(c*m-d*f)),t[5]=r*(f*S-m*b)-h*(s*S-n*b)+g*(s*m-n*f),t[6]=-(r*(c*S-d*b)-o*(s*S-n*b)+g*(s*d-n*c)),t[7]=r*(c*m-d*f)-o*(s*m-n*f)+h*(s*d-n*c),t[8]=o*(y*S-m*v)-h*(l*S-d*v)+g*(l*m-d*y),t[9]=-(r*(y*S-m*v)-h*(i*S-n*v)+g*(i*m-n*y)),t[10]=r*(l*S-d*v)-o*(i*S-n*v)+g*(i*d-n*l),t[11]=-(r*(l*m-d*y)-o*(i*m-n*y)+h*(i*d-n*l)),t[12]=-(o*(y*b-f*v)-h*(l*b-c*v)+g*(l*f-c*y)),t[13]=r*(y*b-f*v)-h*(i*b-s*v)+g*(i*f-s*y),t[14]=-(r*(l*b-c*v)-o*(i*b-s*v)+g*(i*c-s*l)),t[15]=r*(l*f-c*y)-o*(i*f-s*y)+h*(i*c-s*l),t}function eN(t){const e=t[0],r=t[1],i=t[2],s=t[3],n=t[4],o=t[5],l=t[6],c=t[7],d=t[8],h=t[9],y=t[10],f=t[11],m=t[12],g=t[13],v=t[14],b=t[15];return(e*o-r*n)*(y*b-f*v)-(e*l-i*n)*(h*b-f*g)+(e*c-s*n)*(h*v-y*g)+(r*l-i*o)*(d*b-f*m)-(r*c-s*o)*(d*v-y*m)+(i*c-s*l)*(d*g-h*m)}function vx(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=e[8],f=e[9],m=e[10],g=e[11],v=e[12],b=e[13],S=e[14],$=e[15];let E=r[0],T=r[1],R=r[2],O=r[3];return t[0]=E*i+T*l+R*y+O*v,t[1]=E*s+T*c+R*f+O*b,t[2]=E*n+T*d+R*m+O*S,t[3]=E*o+T*h+R*g+O*$,E=r[4],T=r[5],R=r[6],O=r[7],t[4]=E*i+T*l+R*y+O*v,t[5]=E*s+T*c+R*f+O*b,t[6]=E*n+T*d+R*m+O*S,t[7]=E*o+T*h+R*g+O*$,E=r[8],T=r[9],R=r[10],O=r[11],t[8]=E*i+T*l+R*y+O*v,t[9]=E*s+T*c+R*f+O*b,t[10]=E*n+T*d+R*m+O*S,t[11]=E*o+T*h+R*g+O*$,E=r[12],T=r[13],R=r[14],O=r[15],t[12]=E*i+T*l+R*y+O*v,t[13]=E*s+T*c+R*f+O*b,t[14]=E*n+T*d+R*m+O*S,t[15]=E*o+T*h+R*g+O*$,t}function tN(t,e,r){const i=r[0],s=r[1],n=r[2];if(e===t)t[12]=e[0]*i+e[4]*s+e[8]*n+e[12],t[13]=e[1]*i+e[5]*s+e[9]*n+e[13],t[14]=e[2]*i+e[6]*s+e[10]*n+e[14],t[15]=e[3]*i+e[7]*s+e[11]*n+e[15];else{const o=e[0],l=e[1],c=e[2],d=e[3],h=e[4],y=e[5],f=e[6],m=e[7],g=e[8],v=e[9],b=e[10],S=e[11];t[0]=o,t[1]=l,t[2]=c,t[3]=d,t[4]=h,t[5]=y,t[6]=f,t[7]=m,t[8]=g,t[9]=v,t[10]=b,t[11]=S,t[12]=o*i+h*s+g*n+e[12],t[13]=l*i+y*s+v*n+e[13],t[14]=c*i+f*s+b*n+e[14],t[15]=d*i+m*s+S*n+e[15]}return t}function rN(t,e,r){const i=r[0],s=r[1],n=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function iN(t,e,r,i){let s=i[0],n=i[1],o=i[2],l=Math.sqrt(s*s+n*n+o*o);if(l<=$r())return void mx(t,e);l=1/l,s*=l,n*=l,o*=l;const c=Math.sin(r),d=Math.cos(r),h=1-d,y=e[0],f=e[1],m=e[2],g=e[3],v=e[4],b=e[5],S=e[6],$=e[7],E=e[8],T=e[9],R=e[10],O=e[11],z=s*s*h+d,U=n*s*h+o*c,J=o*s*h-n*c,ie=s*n*h-o*c,oe=n*n*h+d,ee=o*n*h+s*c,Te=s*o*h+n*c,pe=n*o*h-s*c,wt=o*o*h+d;t[0]=y*z+v*U+E*J,t[1]=f*z+b*U+T*J,t[2]=m*z+S*U+R*J,t[3]=g*z+$*U+O*J,t[4]=y*ie+v*oe+E*ee,t[5]=f*ie+b*oe+T*ee,t[6]=m*ie+S*oe+R*ee,t[7]=g*ie+$*oe+O*ee,t[8]=y*Te+v*pe+E*wt,t[9]=f*Te+b*pe+T*wt,t[10]=m*Te+S*pe+R*wt,t[11]=g*Te+$*pe+O*wt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function sN(t,e,r){const i=Math.sin(r),s=Math.cos(r),n=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=e[9],y=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+d*i,t[5]=o*s+h*i,t[6]=l*s+y*i,t[7]=c*s+f*i,t[8]=d*s-n*i,t[9]=h*s-o*i,t[10]=y*s-l*i,t[11]=f*s-c*i,t}function nN(t,e,r){const i=Math.sin(r),s=Math.cos(r),n=e[0],o=e[1],l=e[2],c=e[3],d=e[8],h=e[9],y=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-d*i,t[1]=o*s-h*i,t[2]=l*s-y*i,t[3]=c*s-f*i,t[8]=n*i+d*s,t[9]=o*i+h*s,t[10]=l*i+y*s,t[11]=c*i+f*s,t}function oN(t,e,r){const i=Math.sin(r),s=Math.cos(r),n=e[0],o=e[1],l=e[2],c=e[3],d=e[4],h=e[5],y=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+d*i,t[1]=o*s+h*i,t[2]=l*s+y*i,t[3]=c*s+f*i,t[4]=d*s-n*i,t[5]=h*s-o*i,t[6]=y*s-l*i,t[7]=f*s-c*i,t}function aN(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function lN(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function uN(t,e,r){if(e===0)return G2(t);let i=r[0],s=r[1],n=r[2],o=Math.sqrt(i*i+s*s+n*n);if(o<=$r())return null;o=1/o,i*=o,s*=o,n*=o;const l=Math.sin(e),c=Math.cos(e),d=1-c;return t[0]=i*i*d+c,t[1]=s*i*d+n*l,t[2]=n*i*d-s*l,t[3]=0,t[4]=i*s*d-n*l,t[5]=s*s*d+c,t[6]=n*s*d+i*l,t[7]=0,t[8]=i*n*d+s*l,t[9]=s*n*d-i*l,t[10]=n*n*d+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cN(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pN(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dN(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wx(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=i+i,c=s+s,d=n+n,h=i*l,y=i*c,f=i*d,m=s*c,g=s*d,v=n*d,b=o*l,S=o*c,$=o*d;return t[0]=1-(m+v),t[1]=y+$,t[2]=f-S,t[3]=0,t[4]=y-$,t[5]=1-(h+v),t[6]=g+b,t[7]=0,t[8]=f+S,t[9]=g-b,t[10]=1-(h+m),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function hN(t,e){const r=yN,i=-e[0],s=-e[1],n=-e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],y=i*i+s*s+n*n+o*o;return y>0?(r[0]=2*(l*o+h*i+c*n-d*s)/y,r[1]=2*(c*o+h*s+d*i-l*n)/y,r[2]=2*(d*o+h*n+l*s-c*i)/y):(r[0]=2*(l*o+h*i+c*n-d*s),r[1]=2*(c*o+h*s+d*i-l*n),r[2]=2*(d*o+h*n+l*s-c*i)),wx(t,e,r),t}const yN=Qo();function fN(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function mN(t,e){const r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],l=e[6],c=e[8],d=e[9],h=e[10];return t[0]=Math.sqrt(r*r+i*i+s*s),t[1]=Math.sqrt(n*n+o*o+l*l),t[2]=Math.sqrt(c*c+d*d+h*h),t}function gN(t,e){const r=e[0]+e[5]+e[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t}function vN(t,e,r,i){const s=e[0],n=e[1],o=e[2],l=e[3],c=s+s,d=n+n,h=o+o,y=s*c,f=s*d,m=s*h,g=n*d,v=n*h,b=o*h,S=l*c,$=l*d,E=l*h,T=i[0],R=i[1],O=i[2];return t[0]=(1-(g+b))*T,t[1]=(f+E)*T,t[2]=(m-$)*T,t[3]=0,t[4]=(f-E)*R,t[5]=(1-(y+b))*R,t[6]=(v+S)*R,t[7]=0,t[8]=(m+$)*O,t[9]=(v-S)*O,t[10]=(1-(y+g))*O,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function wN(t,e,r,i,s){const n=e[0],o=e[1],l=e[2],c=e[3],d=n+n,h=o+o,y=l+l,f=n*d,m=n*h,g=n*y,v=o*h,b=o*y,S=l*y,$=c*d,E=c*h,T=c*y,R=i[0],O=i[1],z=i[2],U=s[0],J=s[1],ie=s[2],oe=(1-(v+S))*R,ee=(m+T)*R,Te=(g-E)*R,pe=(m-T)*O,wt=(1-(f+S))*O,Tr=(b+$)*O,Rt=(g+E)*z,he=(b-$)*z,Vt=(1-(f+v))*z;return t[0]=oe,t[1]=ee,t[2]=Te,t[3]=0,t[4]=pe,t[5]=wt,t[6]=Tr,t[7]=0,t[8]=Rt,t[9]=he,t[10]=Vt,t[11]=0,t[12]=r[0]+U-(oe*U+pe*J+Rt*ie),t[13]=r[1]+J-(ee*U+wt*J+he*ie),t[14]=r[2]+ie-(Te*U+Tr*J+Vt*ie),t[15]=1,t}function bN(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=r+r,l=i+i,c=s+s,d=r*o,h=i*o,y=i*l,f=s*o,m=s*l,g=s*c,v=n*o,b=n*l,S=n*c;return t[0]=1-y-g,t[1]=h+S,t[2]=f-b,t[3]=0,t[4]=h-S,t[5]=1-d-g,t[6]=m+v,t[7]=0,t[8]=f+b,t[9]=m-v,t[10]=1-d-y,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _N(t,e,r,i,s,n,o){const l=1/(r-e),c=1/(s-i),d=1/(n-o);return t[0]=2*n*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*c,t[6]=0,t[7]=0,t[8]=(r+e)*l,t[9]=(s+i)*c,t[10]=(o+n)*d,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n*2*d,t[15]=0,t}function SN(t,e,r,i,s){const n=1/Math.tan(e/2);let o;return t[0]=n/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(i-s),t[10]=(s+i)*o,t[14]=2*s*i*o):(t[10]=-1,t[14]=-2*i),t}function xN(t,e,r,i){const s=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+l),d=2/(s+n);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=-(o-l)*c*.5,t[9]=(s-n)*d*.5,t[10]=i/(r-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*r/(r-i),t[15]=0,t}function $N(t,e,r,i,s,n,o){const l=1/(e-r),c=1/(i-s),d=1/(n-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+r)*l,t[13]=(s+i)*c,t[14]=(o+n)*d,t[15]=1,t}function TN(t,e,r,i){const s=e[0],n=e[1],o=e[2];let l=s-r[0],c=n-r[1],d=o-r[2];const h=$r();if(Math.abs(l)<h&&Math.abs(c)<h&&Math.abs(d)<h)return void G2(t);let y=1/Math.sqrt(l*l+c*c+d*d);l*=y,c*=y,d*=y;const f=i[0],m=i[1],g=i[2];let v=m*d-g*c,b=g*l-f*d,S=f*c-m*l;y=Math.sqrt(v*v+b*b+S*S),y?(y=1/y,v*=y,b*=y,S*=y):(v=0,b=0,S=0);let $=c*S-d*b,E=d*v-l*S,T=l*b-c*v;y=Math.sqrt($*$+E*E+T*T),y?(y=1/y,$*=y,E*=y,T*=y):($=0,E=0,T=0),t[0]=v,t[1]=$,t[2]=l,t[3]=0,t[4]=b,t[5]=E,t[6]=c,t[7]=0,t[8]=S,t[9]=T,t[10]=d,t[11]=0,t[12]=-(v*s+b*n+S*o),t[13]=-($*s+E*n+T*o),t[14]=-(l*s+c*n+d*o),t[15]=1}function MN(t,e,r,i){const s=e[0],n=e[1],o=e[2],l=i[0],c=i[1],d=i[2];let h=s-r[0],y=n-r[1],f=o-r[2],m=h*h+y*y+f*f;m>0&&(m=1/Math.sqrt(m),h*=m,y*=m,f*=m);let g=c*f-d*y,v=d*h-l*f,b=l*y-c*h;return m=g*g+v*v+b*b,m>0&&(m=1/Math.sqrt(m),g*=m,v*=m,b*=m),t[0]=g,t[1]=v,t[2]=b,t[3]=0,t[4]=y*b-f*v,t[5]=f*g-h*b,t[6]=h*v-y*g,t[7]=0,t[8]=h,t[9]=y,t[10]=f,t[11]=0,t[12]=s,t[13]=n,t[14]=o,t[15]=1,t}function IN(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function EN(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function PN(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function bx(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function RN(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function ON(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t[4]=e[4]+r[4]*i,t[5]=e[5]+r[5]*i,t[6]=e[6]+r[6]*i,t[7]=e[7]+r[7]*i,t[8]=e[8]+r[8]*i,t[9]=e[9]+r[9]*i,t[10]=e[10]+r[10]*i,t[11]=e[11]+r[11]*i,t[12]=e[12]+r[12]*i,t[13]=e[13]+r[13]*i,t[14]=e[14]+r[14]*i,t[15]=e[15]+r[15]*i,t}function CN(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function kN(t,e){if(t===e)return!0;const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],d=t[7],h=t[8],y=t[9],f=t[10],m=t[11],g=t[12],v=t[13],b=t[14],S=t[15],$=e[0],E=e[1],T=e[2],R=e[3],O=e[4],z=e[5],U=e[6],J=e[7],ie=e[8],oe=e[9],ee=e[10],Te=e[11],pe=e[12],wt=e[13],Tr=e[14],Rt=e[15],he=$r();return Math.abs(r-$)<=he*Math.max(1,Math.abs(r),Math.abs($))&&Math.abs(i-E)<=he*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(s-T)<=he*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(n-R)<=he*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(o-O)<=he*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(l-z)<=he*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(c-U)<=he*Math.max(1,Math.abs(c),Math.abs(U))&&Math.abs(d-J)<=he*Math.max(1,Math.abs(d),Math.abs(J))&&Math.abs(h-ie)<=he*Math.max(1,Math.abs(h),Math.abs(ie))&&Math.abs(y-oe)<=he*Math.max(1,Math.abs(y),Math.abs(oe))&&Math.abs(f-ee)<=he*Math.max(1,Math.abs(f),Math.abs(ee))&&Math.abs(m-Te)<=he*Math.max(1,Math.abs(m),Math.abs(Te))&&Math.abs(g-pe)<=he*Math.max(1,Math.abs(g),Math.abs(pe))&&Math.abs(v-wt)<=he*Math.max(1,Math.abs(v),Math.abs(wt))&&Math.abs(b-Tr)<=he*Math.max(1,Math.abs(b),Math.abs(Tr))&&Math.abs(S-Rt)<=he*Math.max(1,Math.abs(S),Math.abs(Rt))}function FN(t){const e=$r(),r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],l=t[6],c=t[8],d=t[9],h=t[10];return Math.abs(1-(r*r+n*n+c*c))<=e&&Math.abs(1-(i*i+o*o+d*d))<=e&&Math.abs(1-(s*s+l*l+h*h))<=e}function AN(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const LN=vx,NN=bx;Object.freeze(Object.defineProperty({__proto__:null,add:PN,adjoint:XL,copy:mx,determinant:eN,equals:kN,exactEquals:CN,frob:EN,fromQuat:bN,fromQuat2:hN,fromRotation:uN,fromRotationTranslation:wx,fromRotationTranslationScale:vN,fromRotationTranslationScaleOrigin:wN,fromScaling:lN,fromTranslation:aN,fromXRotation:cN,fromYRotation:pN,fromZRotation:dN,frustum:_N,getRotation:gN,getScale:mN,getTranslation:fN,hasIdentityRotation:AN,identity:G2,invert:gx,invertOrIdentity:KL,isOrthoNormal:FN,lookAt:TN,mul:LN,multiply:vx,multiplyScalar:RN,multiplyScalarAndAdd:ON,ortho:$N,perspective:SN,perspectiveFromFieldOfView:xN,rotate:iN,rotateX:sN,rotateY:nN,rotateZ:oN,scale:rN,set:Ko,str:IN,sub:NN,subtract:bx,targetTo:MN,translate:tN,transpose:Xo},Symbol.toStringTag,{value:"Module"}));const DN=(t,e)=>{const r=Ko(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Xo(r,r)},jN=(t,e)=>{const r=Ko(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Xo(r,r)},VN=(t,e)=>{const r=1-e,i=Ko(t,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Xo(i,i)},zN=(t,e)=>{const r=Math.sin(e*Math.PI/180),i=Math.cos(e*Math.PI/180),s=Ko(t,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return Xo(s,s)},qN=(t,e)=>{const r=1-2*e,i=Ko(t,r,0,0,e,0,r,0,e,0,0,r,e,0,0,0,1);return Xo(i,i)},UN=(t,e)=>{const r=Ko(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Xo(r,r)},GN=(t,e)=>{const r=1-e,i=Ko(t,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Xo(i,i)};let _x=class Sx{constructor(e,r,i){this.strength=e,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(e,r,i){this.strength=jr(e.strength,r.strength,i),this.radius=jr(e.radius,r.radius,i),this.threshold=jr(e.threshold,r.threshold,i)}clone(){return new Sx(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:fd(this.radius),strength:this.strength,threshold:this.threshold}}},xx=class $x{constructor(e){this.radius=e,this.type="blur"}interpolate(e,r,i){this.radius=Math.round(jr(e.radius,r.radius,i))}clone(){return new $x(this.radius)}toJSON(){return{type:"blur",radius:fd(this.radius)}}},Cf=class Tx{constructor(e,r){this.type=e,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,r,i){this.amount=jr(e.amount,r.amount,i),this._updateMatrix()}clone(){return new Tx(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||U2();switch(this.type){case"brightness":this._colorMatrix=DN(e,this.amount);break;case"contrast":this._colorMatrix=jN(e,this.amount);break;case"grayscale":this._colorMatrix=VN(e,this.amount);break;case"invert":this._colorMatrix=qN(e,this.amount);break;case"saturate":this._colorMatrix=UN(e,this.amount);break;case"sepia":this._colorMatrix=GN(e,this.amount)}}},Mx=class Ix{constructor(e,r,i,s){this.offsetX=e,this.offsetY=r,this.blurRadius=i,this.color=s,this.type="drop-shadow"}interpolate(e,r,i){this.offsetX=jr(e.offsetX,r.offsetX,i),this.offsetY=jr(e.offsetY,r.offsetY,i),this.blurRadius=jr(e.blurRadius,r.blurRadius,i),this.color[0]=Math.round(jr(e.color[0],r.color[0],i)),this.color[1]=Math.round(jr(e.color[1],r.color[1],i)),this.color[2]=Math.round(jr(e.color[2],r.color[2],i)),this.color[3]=jr(e.color[3],r.color[3],i)}clone(){return new Ix(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:fd(this.offsetX),yoffset:fd(this.offsetY),blurRadius:fd(this.blurRadius),color:e}}},Ex=class Px{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,r,i){this.angle=jr(e.angle,r.angle,i),this._updateMatrix()}clone(){return new Px(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||U2();this._colorMatrix=zN(e,this.angle)}},Rx=class Ox{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,r,i){this.amount=jr(e.amount,r.amount,i)}clone(){return new Ox(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function jr(t,e,r){return t+(e-t)*r}function fd(t){return Math.round(1e3*Vi(t))/1e3}function BN(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new Cf(t.type,0);case"saturate":case"brightness":case"contrast":return new Cf(t.type,1);case"opacity":return new Rx(1);case"hue-rotate":return new Ex(0);case"blur":return new xx(0);case"drop-shadow":return new Mx(0,0,0,[...$g("transparent")]);case"bloom":return new _x(0,0,1)}}function WN(t,e){const r=t.length>e.length?t:e;return(t.length>e.length?e:t).every((i,s)=>i.type===r[s].type)}function HN(t,e){const r=t.length>e.length?t:e,i=t.length>e.length?e:t;for(let s=i.length;s<r.length;s++)i.push(BN(r[s]))}function ZN(t){const e=t[0];return!!e&&"type"in e}const D4=()=>N.getLogger("esri.support.basemapUtils");function JN(){return{}}function QN(t){for(const e in t){const r=t[e];r&&!r.destroyed&&r.destroy(),delete t[e]}}function YN(t,e){let r;if(typeof t=="string"){const i=t in cf,s=!i&&t.includes("/");if(!i&&!s){if(Qy())D4().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(cf).filter(([o,l])=>l.classic||l.is3d).map(([o])=>`"${o}"`).sort().join(", ");D4().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${n}`)}return null}e&&(r=e[t]),r||(r=i?ud.fromId(t):new ud({style:{id:t}}),e&&(e[t]=r))}else r=Zr(ud,t);return r?.destroyed&&(D4().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function KN(t){return new ui({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const r=[];return"tables"in e&&r.push(e.tables),"layers"in e&&r.push(e.layers),r},itemFilterFunction:e=>{const r=e.parent;return!!r&&"tables"in r&&r.tables.includes(e)}})}function Hh(t){for(const e of t.values())e?.destroy();t.clear()}const $8={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function XN(t){let e=null;if(typeof t=="string")if(t in $8){const r=$8[t];e=new Q0({resourceInfo:{data:{layers:[r]}}})}else N.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Zr(Q0,t);return e}function kf(t,e,r){let i,s;if(t)for(let n=0,o=t.length;n<o;n++){if(i=t.at(n),i?.[e]===r)return i;if(i?.type==="group"&&(s=kf(i.layers,e,r),s))return s}}const eD=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.layers=new q;const s=l=>{l.parent&&l.removeFromParent()},n=l=>{l.parent=this,this.layerAdded(l),l.type!=="elevation"&&l.type!=="base-elevation"||N.getLogger(this).error(`Layer 'title:${l.title}, id:${l.id}' of type '${l.type}' is not supported as an operational layer and will therefore be ignored.`)},o=l=>{l.parent=null,this.layerRemoved(l)};this.addHandles([this.layers.on("before-add",l=>{if(l.item===this)return l.preventDefault(),void N.getLogger(this).error("#add()","Cannot add layer to itself.");s(l.item)}),this.layers.on("after-add",l=>n(l.item)),this.layers.on("after-remove",l=>o(l.item))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}removeChildLayer(i){this.layers.remove(i),super.removeChildLayer?.(i)}set layers(i){this._set("layers",qs(i,this._get("layers")))}add(i,s){const n=this.layers;if(s=n.getNextIndex(s),i instanceof Fe){const o=i;o.parent===this?this.reorder(o,s):n.add(o,s)}else Sr(i)?i.then(o=>{this.destroyed||this.add(o,s)}):N.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const n=this.layers;let o=n.getNextIndex(s);i.slice().forEach(l=>{l.parent!==this?(n.add(l,o),o+=1):this.reorder(l,o)})}findLayerById(i){return kf(this.layers,"id",i)}findLayerByUid(i){return kf(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return a([u()],r.prototype,"layers",null),r=a([_("esri.support.LayersMixin")],r),r},tD=new Set(["feature","subtype-group"]);function Ff(t,e,r){if(t)for(let i=0,s=t.length;i<s;i++){const n=t.at(i);if(n[e]===r)return n;if(n?.type==="group"){const o=Ff(n.tables,e,r);if(o)return o}}}const rD=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.tables=new q,this.addHandles([this.tables.on("after-add",s=>{const n=s.item;n.parent&&n.parent!==this&&n.removeFromParent(),n.parent=this,tD.has(n.type)||N.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const s of i)s.destroy();this.tables.destroy()}removeChildLayer(i){this.tables.remove(i),super.removeChildLayer?.(i)}set tables(i){this._set("tables",qs(i,this._get("tables")))}findTableById(i){return Ff(this.tables,"id",i)}findTableByUid(i){return Ff(this.tables,"uid",i)}};return a([u()],r.prototype,"tables",null),r=a([_("esri.support.TablesMixin")],r),r};let $i=class extends rD(eD(S2)){constructor(e){super(e),this.allLayers=new ui({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:r=>"layers"in r?r.layers:null}),this.focusAreas=new yx,this.allTables=KN(this),this.basemap=null,this.editableLayers=new ui({getCollections:()=>[this.allLayers],itemFilterFunction:BL}),this.ground=new Q0,this._basemapCache=JN(),this.addHandles(ji(()=>this.ground,(r,i)=>{i?.parent===this&&(i.parent=null),r.parent=this},{sync:!0}))}destroy(){QN(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=st(this.basemap),st(this.ground),this._set("ground",null)}castBasemap(e){return YN(e,this._basemapCache)}castGround(e){return XN(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(r=>r.id===e)}findTableById(e){return this.allTables.find(r=>r.id===e)}};a([u({readOnly:!0,dependsOn:[]})],$i.prototype,"allLayers",void 0),a([u({type:yx,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],$i.prototype,"focusAreas",void 0),a([u({readOnly:!0})],$i.prototype,"allTables",void 0),a([u({type:ud,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],$i.prototype,"basemap",void 0),a([xe("basemap")],$i.prototype,"castBasemap",null),a([u({readOnly:!0})],$i.prototype,"editableLayers",void 0),a([u({type:Q0,nonNullable:!0})],$i.prototype,"ground",void 0),a([xe("ground")],$i.prototype,"castGround",null),a([u()],$i.prototype,"undoRedo",void 0),$i=a([_("esri.Map")],$i);const Cx=$i;let ma=class extends Tg{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};a([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ma.prototype,"row",void 0),a([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ma.prototype,"column",void 0),a([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ma.prototype,"rows",void 0),a([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ma.prototype,"columns",void 0),ma=a([_("esri.CameraLayout")],ma);const kx=ma;let B2=class{constructor(e,r){this.min=e,this.max=r,this.range=r-e}normalize(e,r=0,i=!1){return T8(this.range,this.min,this.max,e,r,i)}clamp(e,r=0){return gi(e-r,this.min,this.max)+r}monotonic(e,r,i){return e<r?r:r+Af(this.range,e-r,i)}minimalMonotonic(e,r,i){return T8(this.range,e,e+this.range,r,i)}center(e,r,i){return r=this.monotonic(e,r,i),this.normalize((e+r)/2,i)}diff(e,r,i){return this.monotonic(e,r,i)-e}shortestSignedDiff(e,r){e=this.normalize(e);const i=(r=this.normalize(r))-e,s=r<e?this.minimalMonotonic(e,r)-e:r-this.minimalMonotonic(r,e);return Math.abs(i)<Math.abs(s)?i:s}contains(e,r,i){return r=this.minimalMonotonic(e,r),(i=this.minimalMonotonic(e,i))>e&&i<r}};function T8(t,e,r,i,s=0,n=!1){return(i-=s)<e?i+=Af(t,e-i):i>r&&(i-=Af(t,i-r)),n&&i===r&&(i=e),i+s}function Af(t,e,r=0){return Math.ceil((e-r)/t)*t+r}const lne=new B2(0,2*Math.PI),une=new B2(-Math.PI,Math.PI),iD=new B2(0,360);let ws=class extends de(A){constructor(...e){super(...e),this.position=new se([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new kx}normalizeCtorArgs(e,r,i,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return r!=null&&(n.heading=r),i!=null&&(n.tilt=i),s!=null&&(n.fov=s),n}return e}writePosition(e,r,i,s){const n=e.clone();n.x=Vr(e.x||0),n.y=Vr(e.y||0),n.z=e.hasZ?Vr(e.z||0):e.z,r[i]=n.write({},s)}readPosition(e,r){const i=new se;return i.read(e,r),i.x=Vr(i.x||0),i.y=Vr(i.y||0),i.z=i.hasZ?Vr(i.z||0):i.z,i}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};a([u({type:se,json:{write:{isRequired:!0}}})],ws.prototype,"position",void 0),a([j("position")],ws.prototype,"writePosition",null),a([F("position")],ws.prototype,"readPosition",null),a([u({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),xe(t=>iD.normalize(Vr(t)))],ws.prototype,"heading",void 0),a([u({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),xe(t=>gi(Vr(t),-180,180))],ws.prototype,"tilt",void 0),a([u({type:Number,nonNullable:!0,json:{default:55,write:!0}}),xe(t=>gi(Vr(t,55),1,170))],ws.prototype,"fov",void 0),a([u({type:kx,nonNullable:!0,json:{read:!1,write:!1}})],ws.prototype,"layout",void 0),ws=a([_("esri.Camera")],ws);const sD=ws;function Fx(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Gg(t){return t.points!==void 0}function Bg(t){return t.x!==void 0&&t.y!==void 0}function Wg(t){return t.paths!==void 0||t.curvePaths!==void 0}function Ka(t){return t.rings!==void 0||t.curveRings!==void 0}function Ho(t){return t==null?null:t instanceof $t?t:Bg(t)?se.fromJSON(t):Wg(t)?vt.fromJSON(t):Ka(t)?Ve.fromJSON(t):Gg(t)?is.fromJSON(t):Fx(t)?le.fromJSON(t):null}function Sh(t){return t?Bg(t)?"esriGeometryPoint":Wg(t)?"esriGeometryPolyline":Ka(t)?"esriGeometryPolygon":Fx(t)?"esriGeometryEnvelope":Gg(t)?"esriGeometryMultipoint":null:null}const nD={esriGeometryPoint:se,esriGeometryPolyline:vt,esriGeometryPolygon:Ve,esriGeometryEnvelope:le,esriGeometryMultipoint:is,esriGeometryMultiPatch:Ve};function oD(t){return t&&nD[t]||null}const X0=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),M8=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),xh={base:$t,key:"type",typeMap:{extent:le,multipoint:is,point:se,polyline:vt,polygon:Ve}};function pne(t){return t.type==="point"}function dne(t){return t.type==="multipoint"}function hne(t){return t.type==="polygon"}function yne(t){return t.type==="polyline"}var Lf;let po=Lf=class extends A{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new Lf({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};a([u({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:j4}}}}})],po.prototype,"rotation",void 0),a([xe("rotation")],po.prototype,"castRotation",null),a([u({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:j4}}}}})],po.prototype,"scale",void 0),a([u({types:xh,json:{read:Ho,write:!0,origins:{"web-scene":{read:Ho,write:{overridePolicy:j4}}}}})],po.prototype,"targetGeometry",void 0),a([u({type:sD,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],po.prototype,"camera",void 0),po=Lf=a([_("esri.Viewpoint")],po);const Di=po;function j4(){return{enabled:!this.camera}}const Ax=new FinalizationRegistry(t=>{t.close()});function aD(t,e){Ax.register(t,e,e)}function lD(t){Ax.unregister(t)}function Lx(t,e){return new Proxy({},{get:(r,i,s)=>(...n)=>{let o,l;const c=n[n.length-1];return uD(c)&&(o=c.signal,l=c.transferList,n.pop()),t.apply(e?`${e}.${i.toString()}`:i.toString(),n,{transferList:l,signal:o})}})}function uD(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const cD={statsWorker:()=>L(()=>import("./money-tides-statsWorker-BiDAvyLU.js"),__vite__mapDeps([28,29,3,1,2,4,5,30,31,32,33,11,12,10])),geometryEngineWorker:()=>L(()=>import("./money-tides-geometryEngineWorker-CHAqrl2R.js"),__vite__mapDeps([34,35,36,37])),arcadeGeometryOperatorsWorker:()=>L(()=>import("./money-tides-operatorsWorker-D8jyWG1a.js"),__vite__mapDeps([38,1,2,3,4,5,10,11,12])),CSVSourceWorker:()=>L(()=>import("./money-tides-CSVSourceWorker-BGZ4r_OO.js"),__vite__mapDeps([39,3,1,2,4,5,40,41,42,43,44,45,46,47,48,49,10,11,12,50,30,29,31,32,33,51,52,53,54,55])),EdgeProcessingWorker:()=>L(()=>import("./money-tides-EdgeProcessingWorker-CWkTTWY_.js"),__vite__mapDeps([56,57,58,59,60,3,1,2,4,5,61,62,63,64,65,66,10,11,12])),ElevationSamplerWorker:()=>L(()=>import("./money-tides-ElevationSamplerWorker-B7QIqfxj.js"),__vite__mapDeps([67,3,1,2,4,5,43,68,11,12,69,70,71,72,73,74,59,75,10])),FeatureServiceSnappingSourceWorker:()=>L(()=>import("./money-tides-FeatureServiceSnappingSourceWorker-SXJtMKeA.js"),__vite__mapDeps([76,3,1,2,4,5,41,42,43,44,45,46,47,48,49,10,11,12,50,30,29,31,32,33,51,52,77])),GaussianSplatSortWorker:()=>L(()=>import("./money-tides-GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>L(()=>import("./money-tides-GeoJSONSourceWorker-B_PUMhYG.js"),__vite__mapDeps([78,3,1,2,4,5,41,42,43,44,45,46,47,48,49,10,11,12,50,30,29,31,32,33,51,52,79,40,55,80])),LercWorker:()=>L(()=>import("./money-tides-LercWorker-VzU_Lv4k.js"),__vite__mapDeps([81,3,1,2,4,5,10,11,12])),MemorySourceWorker:()=>L(()=>import("./money-tides-MemorySourceWorker-DHoHwL0V.js"),__vite__mapDeps([82,3,1,2,4,5,83,41,42,43,44,45,46,47,48,49,10,11,12,50,30,29,31,32,33,51,52,55,80,40])),PBFDecoderWorker:()=>L(()=>import("./money-tides-PBFDecoderWorker-C7I6R6vp.js"),__vite__mapDeps([84,3,1,2,4,5,85,10,11,12])),FeaturePipelineWorker:()=>L(()=>import("./money-tides-FeaturePipelineWorker-Y8ZEO9zY.js"),__vite__mapDeps([86,3,1,2,4,5,87,88,89,61,90,10,91,92,30,93,45,44,94,95,96,97,98,99,100,101,102,103,104,46,47,48,49,11,12,50,29,31,32,33,51,52,105,106,107,108,25,109,110,111,112,79,40,55,80,113,114])),PointCloudWorker:()=>L(()=>import("./money-tides-PointCloudWorker-BckpAiiF.js"),__vite__mapDeps([115,3,1,2,4,5,116,117,118,119,11,12,120,121,70,71,122,123,10])),RasterWorker:()=>L(()=>import("./money-tides-RasterWorker-DUevc9wL.js"),__vite__mapDeps([124,125,3,1,2,4,5,11,12,126,37,127,128,129,130,131,132,133,10])),SceneLayerSnappingSourceWorker:()=>L(()=>import("./money-tides-SceneLayerSnappingSourceWorker-D9AZdGP7.js"),__vite__mapDeps([134,3,1,2,4,5,135,136,123,117,137,138,122,59,63,64,65,58,60,61,62,66,10,11,12])),SceneLayerWorker:()=>L(()=>import("./money-tides-SceneLayerWorker-BCQyl1Fg.js"),__vite__mapDeps([139,1,2,68,3,4,5,11,12,74,140,72,10])),WFSSourceWorker:()=>L(()=>import("./money-tides-WFSSourceWorker-BTQtEwCz.js"),__vite__mapDeps([141,3,1,2,4,5,41,42,43,44,45,46,47,48,49,10,11,12,50,30,29,31,32,33,51,52,79,40,80,142,143])),WorkerTileHandler:()=>L(()=>import("./money-tides-WorkerTileHandler-DeBcLvhz.js"),__vite__mapDeps([144,3,1,2,4,5,99,145,100,146,102,147,148,62,61,128,149,98,10,11,12])),Lyr3DWorker:()=>L(()=>import("./money-tides-Lyr3DWorker-DpqEwZV1.js"),__vite__mapDeps([150,1,2,3,4,5])),Feature3DPipelineWorker:()=>L(()=>import("./money-tides-Feature3DPipelineWorker-ButrSbUy.js"),__vite__mapDeps([151,3,1,2,4,5,47,48,49,10,11,12,44,45,50,30,29,31,32,33,51,52,152,73,68,140,72,153,118,154,65,59,155,136,123,117,135,156,157,138,122,121,116,70,71,62,61,58,60,158,159,160,161,162,163,164,165,166,167,43,168])),TextureCompressionWorker:()=>L(()=>import("./money-tides-TextureCompressionWorker-DISTfSQI.js"),__vite__mapDeps([169,1,2,3,4,5,10,11,12])),FlowWorker:()=>L(()=>import("./money-tides-FlowWorker-CocNRPZD.js"),__vite__mapDeps([170,3,1,2,4,5,133,10,11,12])),ParquetSourceWorker:()=>L(()=>import("./money-tides-ParquetSourceWorker-DyaxSVrA.js"),__vite__mapDeps([171,3,1,2,4,5,104,10,47,48,49,11,12,44,45,50,30,29,31,32,33,51,52,55,172,54,107,91,92,106,105])),PanoramicMeshWorker:()=>L(()=>import("./money-tides-PanoramicMeshWorker-DWbDBhFe.js"),__vite__mapDeps([173,125,3,1,2,4,5,11,12,10]))},Nx="worker:port-closed",Un={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let pD=0;function Dx(){return pD++}function dD(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function e2(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function jx(t,e,r,i){if(e.type===Un.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Un.INVOKE&&e.type!==Un.RESPONSE)return void t.postMessage(e);let s;dD(r)?(s=I8(r.transferList),e.data=r.result):(s=I8(i),e.data=r),s?t.postMessage(e,s):t.postMessage(e)}function Kd(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function I8(t){if(!t?.length)return null;if(re("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(r=>!hD(r));return e.length?e:null}function hD(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function fne(t){try{return await t}catch(e){const r=e?.name===Nx;if(!(fi(e)||r))throw e;return}}const{CLOSE:Zh,ABORT:Nf,INVOKE:E8,RESPONSE:op,OPEN_PORT:P8,ON:R8}=Un,yD=2;let fD=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Nf?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Ci;let Vc=(Ci=class{static connect(e,r){const i=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new Ci(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Ci.clients.set(n,s),i.port2}static loadWorker(e){const r=cD[e];return r?r():Promise.resolve(null)}constructor(e,r,i,s){this._port=e,this._jobQueue=i,this._lowPriorityJobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new fD(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:Zh}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,r,i){return this.apply(e,[r],i)}apply(e,r,i){const s=i?.signal,n=i?.transferList;if(!this._port)return Promise.reject(new M(Nx,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:r}));const o=Dx();return new Promise((l,c)=>{if(zs(s))return this._processWork(),void c(Mt());const d=$c(s,()=>{const y=this._outJobs.get(o);y&&(this._outJobs.delete(o),this._processWork(),Ze(y.abortHandle),this._post({type:Nf,jobId:o}),c(Mt()))}),h={resolve:l,reject:c,abortHandle:d,debugInfo:e};this._outJobs.set(o,h),this._post({type:E8,jobId:o,methodName:e,abortable:s!=null},r,n)})}createInvokeProxy(e){return Lx(this,e)}on(e,r){const i=new MessageChannel;function s(n){r(n.data)}return this._port.postMessage({type:R8,eventType:e,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),Br(()=>{i.port1.postMessage({type:Zh}),i.port1.close(),i.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:P8,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=yD)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:r,data:i,invokeOptions:s,resolver:n}=e;this.apply(r,i,s).then(o=>n.resolve(o)).catch(o=>n.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Ze(e.abortHandle),e.reject(Mt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,r){const i=Kd(e);if(i)switch(i.type){case op:this._onResponseMessage(i);break;case E8:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case Nf:this._onAbortMessage(i);break;case Zh:this._onCloseMessage();break;case P8:this._onOpenPortMessage(i);break;case R8:this._onOnMessage(i)}}_onAbortMessage(e){const r=this._inJobs,i=e.jobId,s=r.get(i);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Ci.clients.get(this)===e&&e.destroy(),Ci.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:r,jobId:i,data:s=[],abortable:n}=e,o=n?new AbortController:null,l=this._inJobs;let c,d=this._client,h=d[r];try{if(!h&&r&&r.includes(".")){const y=r.split(".");for(let f=0;f<y.length-1;f++)d=d[y[f]],h=d[y[f+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:o?o.signal:null}),c=h.apply(d,s)}catch(y){return void this._post({type:op,jobId:i,error:e2(y)})}Sr(c)?(l.set(i,{controller:o,promise:c}),c.then(y=>{l.has(i)&&(l.delete(i),this._post({type:op,jobId:i},y))},y=>{l.has(i)&&(l.delete(i),fi(y)||this._post({type:op,jobId:i,error:e2(y||{message:`Error encountered at method ${r}`})}))})):this._post({type:op,jobId:i},c)}_onOpenPortMessage(e){new Ci(e.port,{client:this._client})}_onOnMessage(e){const{port:r}=e,i=this._client.on(e.eventType,n=>{r.postMessage(n)}),s=ig(e.port,"message",n=>{Kd(n)?.type===Zh&&(s.remove(),i.remove(),r.close())})}_onResponseMessage(e){const{jobId:r,error:i,data:s}=e,n=this._outJobs;if(!n.has(r))return;const o=n.get(r);n.delete(r),this._processWork(),Ze(o.abortHandle),i?o.reject(M.fromJSON(JSON.parse(i))):o.resolve(s)}_post(e,r,i){return jx(this._port,e,r,i)}},Ci.kernelInfo={buildDate:a_,fullVersion:Bb,revision:l_},Ci.clients=new Map,Ci),mD=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Vd,this._ongoingLowPriorityJobsQueue=new Vd}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,r){return new Promise((i,s)=>{let n=!0;const o=l=>{Re(r.signal),n&&(n=!1,l())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let l=0;l<e.length;++l){const c=e[l];Sr(c)?this._clientPromises[l]=c.then(d=>(this._clients[l]=new Vc(d,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(i),this._clients[l]),()=>(o(s),null)):(this._clients[l]=new Vc(c,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(i))}})}broadcast(e,r,i){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(l=>l?.invoke(e,r,i))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Mt(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Mt(`Worker closing, aborting job calling '${e.methodName}'`));for(const r of this._clientPromises)r.then(i=>i?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,lD(this)}invoke(e,r,i){return this.apply(e,[r],i)}apply(e,r,i){const s=Jo();(i?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:r,invokeOptions:i,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(l=>l?.jobAdded())}return s.promise}createInvokeProxy(e){return Lx(this,e)}on(e,r){return Promise.all(this._clientPromises).then(()=>sg(this._clients.map(i=>i.on(e,r))))}openPorts(){return new Promise(e=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(r[s]=n.openPort()),--i===0&&e(r)})})}get test(){}};const gD={async request(t,e){const r=t.options,i=r.responseType;r.signal=e?.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&kR(t.url)?.after?i:"array-buffer";const s=await Le(t.url,r),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch(s.requestOptions?.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},O8={};function vD(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...O8.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=O8.baseUrl),e}let wD=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>e[r](...i)})}},H1=class{constructor(){this._dispatcher=new wD,this._workerPostMessage({type:Un.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){$9(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,r,i){this._dispatcher.addEventListener(e,r,i)}removeEventListener(e,r,i){this._dispatcher.removeEventListener(e,r,i)}_workerPostMessage(e){$9(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const r=Kd(e);if(r&&r.type===Un.OPEN){const{modulePath:i,jobId:s}=r;let n=await Vc.loadWorker(i);n||(n=await import(i));const o=Vc.connect(n);this._workerPostMessage({type:Un.OPENED,jobId:s,data:o})}}};const Df=()=>N.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:bD}=Un,_D='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Jh,Qh;const C8="Failed to create Worker. Fallback to execute module in main thread";async function SD(){if(!re("esri-workers"))return k8(new H1);if(!Jh&&!Qh)try{const e=_D.split("{CONFIGURATION}").join(xD());Jh=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){Qh=e||{}}let t;if(Jh)try{t=new Worker(Jh,{name:"esri-worker-"+$D++})}catch{Df().warn(C8,Qh),t=new H1}else Df().warn(C8,Qh),t=new H1;return k8(t)}async function k8(t){return new Promise(e=>{function r(s){const n=Kd(s);n&&n.type===bD&&(t.removeEventListener("message",r),t.removeEventListener("error",i),e(t))}function i(s){s.preventDefault(),t.removeEventListener("message",r),t.removeEventListener("error",i),Df().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new H1).addEventListener("message",r),t.addEventListener("error",i)}t.addEventListener("message",r),t.addEventListener("error",i)})}function xD(){let t;if(qr.default!=null){const s={...qr};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(qr));t.assetsPath=La(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?La(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=qn(),t.has={"esri-csp-restrictions":re("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":re("esri-2d-update-debug"),"esri-2d-log-updating":re("esri-2d-log-updating"),"featurelayer-pbf":re("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":re("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":re("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":re("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":re("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":re("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":re("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":re("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":re("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":re("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":re("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":re("parquetlayer-full-query-feature-count"),"esri-atomics":re("esri-atomics"),"esri-shared-array-buffer":re("esri-shared-array-buffer"),"esri-tiles-debug":re("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":re("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":re("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=La(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=La(t.workers.workerPath):t.workers.workerPath=La(ft("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=qr.workers.loaderConfig,r=vD({baseUrl:e?.baseUrl,locale:qn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:r,kernelInfo:{buildDate:a_,fullVersion:Bb,revision:l_}})}let $D=0;const{ABORT:F8,INVOKE:TD,OPEN:MD,OPENED:ID,RESPONSE:ap}=Un;let ED=class Vx{static async create(e){const r=await SD();return new Vx(r,e)}constructor(e,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=r,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",i=>{i.preventDefault(),N.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(e,r={}){const{signal:i}=r,s=Dx();return new Promise((n,o)=>{const l={resolve:n,reject:o,abortHandle:J5(i,()=>{this._outJobs.delete(s),this._post({type:F8,jobId:s})})};this._outJobs.set(s,l),this._post({type:MD,jobId:s,modulePath:e})})}_onMessage(e){const r=Kd(e);if(r)switch(r.type){case ID:this._onOpenedMessage(r);break;case ap:this._onResponseMessage(r);break;case F8:this._onAbortMessage(r);break;case TD:this._onInvokeMessage(r)}}_onAbortMessage(e){const r=this._inJobs,i=e.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(e){const{methodName:r,jobId:i,data:s,abortable:n}=e,o=n?new AbortController:null,l=this._inJobs,c=gD[r];let d;try{if(typeof c!="function")throw new TypeError(`${r} is not a function`);d=c.call(null,s,{signal:o?o.signal:null})}catch(h){return void this._post({type:ap,jobId:i,error:e2(h)})}Sr(d)?(l.set(i,{controller:o,promise:d}),d.then(h=>{l.has(i)&&(l.delete(i),this._post({type:ap,jobId:i},h))},h=>{l.has(i)&&(l.delete(i),h||(h={message:"Error encountered at method"+r}),fi(h)||this._post({type:ap,jobId:i,error:e2(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:ap,jobId:i},d)}_onOpenedMessage(e){const{jobId:r,data:i}=e,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Ze(s.abortHandle),s.resolve(i))}_onResponseMessage(e){const{jobId:r,error:i,data:s}=e,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Ze(n.abortHandle),i?n.reject(M.fromJSON(JSON.parse(i))):n.resolve(s))}_post(e,r,i){return jx(this.worker,e,r,i)}};const A8=re("host-browser")?Math.min(navigator.hardwareConcurrency-1,re("workers-pool-size")??8):0;let Ga=re("esri-mobile")?Math.min(A8,3):A8;Ga||(Ga=re("safari")&&re("mac")?7:2);let L8=0;const Z1=[];function PD(){zx()}async function Yh(t,e){const r=new mD,{registryTarget:i,...s}=e;return await r.open(t,s),i&&aD(i,r),r}async function RD(t,e={}){if(typeof t!="string")throw new M("workers:undefined-module","modulePath is missing");let r=e.strategy||"distributed";if(re("host-webworker")&&!re("esri-workers")&&(r="local"),r==="local"){let i=await Vc.loadWorker(t);i||(i=await import(t)),Re(e.signal);const s=e.client||i;return Yh([Vc.connect(i,e.schedule)],{...e,client:s})}if(await zx(),Re(e.signal),r==="dedicated"){const i=L8++%Ga;return Yh([await Z1[i].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const i=Math.min(e.maxNumWorkers,Ga);if(i<Ga){const s=new Array(i);for(let n=0;n<i;++n){const o=L8++%Ga;s[n]=Z1[o].open(t,e)}return Yh(s,e)}}return Yh(Z1.map(i=>i.open(t,e)),e)}let Kh=null;async function zx(){if(Kh)return Kh;new AbortController;const t=[];for(let e=0;e<Ga;e++){const r=ED.create(e).then(i=>(Z1[e]=i,i));t.push(r)}return Kh=Promise.all(t),Kh}let md=class extends q{constructor(e){super(e),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(q.ofType(this.itemType.Type))(e):new q(e)}};function jf(t,e){return{type:t,cast:c_,set(r){const i=qs(r,this._get(e),t);i&&!i.destroyed&&(i.owner=this),this._set(e,i)}}}a([u()],md.prototype,"owner",null),md=a([_("esri.core.support.OwningCollection")],md);var Vf,Xu;let Gt=(Xu=class extends A{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Vf({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},Vf=Xu,Xu);a([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Gt.prototype,"cols",void 0),a([u({type:ve,json:{write:!0}})],Gt.prototype,"level",void 0),a([u({type:String,json:{write:!0}})],Gt.prototype,"levelValue",void 0),a([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Gt.prototype,"origin",void 0),a([u({type:Number,json:{write:!0}})],Gt.prototype,"resolution",void 0),a([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Gt.prototype,"rows",void 0),a([u({type:Number,json:{write:!0}})],Gt.prototype,"scale",void 0),Gt=Vf=a([_("esri.layers.support.LOD")],Gt);let OD=class qx{constructor(e,r,i,s=Gr()){this._level=e,this._row=r,this._col=i,this.extent=s}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new qx(e.level,e.row,e.col,e.extent)}};var Yl;const N8=new be({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var ec;let ur=(ec=class extends A{static create(e={}){const{resolutionFactor:r=1,scales:i,size:s=256,spatialReference:n=B.WebMercator,numLODs:o=24}=e;if(!ci(n)){const f=[];if(i)for(let m=0;m<i.length;m++){const g=i[m];f.push(new Gt({level:m,scale:g,resolution:g}))}else{let m=5e-4;for(let g=o-1;g>=0;g--)f.unshift(new Gt({level:g,scale:m,resolution:m})),m*=2}return new Yl({dpi:96,lods:f,origin:new se(0,0,n),size:[s,s],spatialReference:n})}const l=xr(n),c=e.origin?new se({x:e.origin.x,y:e.origin.y,spatialReference:n}):new se(l?{x:l.origin[0],y:l.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),d=96,h=1/(vi(n)*39.37*d),y=[];if(i)for(let f=0;f<i.length;f++){const m=i[f],g=m*h;y.push(new Gt({level:f,scale:m,resolution:g}))}else{let f=Zc(n)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const m=Math.ceil(o/r);y.push(new Gt({level:0,scale:f,resolution:f*h}));for(let g=1;g<m;g++){const v=f/2**r,b=v*h;y.push(new Gt({level:g,scale:v,resolution:b})),f=v}}return new Yl({dpi:d,lods:y,origin:c,size:[s,s],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:r}=this;if(e&&r){const i=xr(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-r.x)<=i.dx}return!1}readOrigin(e,r){return se.fromJSON({spatialReference:r.spatialReference,...e})}set lods(e){let r=0,i=0;const s=[],n=this._levelToLOD={};e&&(r=-1/0,i=1/0,e.forEach(o=>{s.push(o.scale),r=o.scale>r?o.scale:r,i=o.scale<i?o.scale:i,n[o.level]=o})),this._set("scales",s),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,r){return[r.cols,r.rows]}writeSize(e,r){r.cols=e[0],r.rows=e[1]}zoomToScale(e){const r=this.scales;if(e<=0)return r[0];if(e>=r.length-1)return r[r.length-1];const i=Math.floor(e),s=i+1;return r[i]/(r[i]/r[s])**(e-i)}scaleToZoom(e){const r=this.scales,i=r.length-1;let s=0;for(;s<i;s++){const n=r[s],o=r[s+1];if(n<=e)return s;if(o===e)return s+1;if(n>e&&o<e)return s+Math.log(n/e)/Math.log(n/o)}return s}tileAt(e,r,i,s){const n=this.lodAt(e);if(!n)return null;let o,l;if(typeof r=="number")o=r,l=i;else if(ot(r.spatialReference,this.spatialReference))o=r.x,l=r.y,s=i;else{const h=k2(r,this.spatialReference);if(h==null)return null;o=h.x,l=h.y,s=i}const c=n.resolution*this.size[0],d=n.resolution*this.size[1];return s??=new OD(0,0,0),s.level=e,s.row=Math.floor((this.origin.y-l)/d+.001),s.col=Math.floor((o-this.origin.x)/c+.001),this.updateTileInfo(s),s}updateTileInfo(e,r=0){if(!("extent"in e))return!1;let i=this.lodAt(e.level);if(!i&&r===1){const l=this.lods[this.lods.length-1];l.level<e.level&&(i=l)}if(!i)return!1;const s=e.level-i.level,n=i.resolution*this.size[0]/2**s,o=i.resolution*this.size[1]/2**s;return e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const r=this._upsampleLevels[e.level];return!(!r||r.parentLevel===-1)&&(e.level=r.parentLevel,e.row=Math.floor(e.row/r.factor+.001),e.col=Math.floor(e.col/r.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,r){const i=this.lodAt(r.level);if(i==null)return null;const{resolution:s}=i,n=s*this.size[0],o=s*this.size[1];return e[0]=this.origin.x+r.col*n,e[1]=this.origin.y-(r.row+1)*o,e[2]=e[0]+n,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return Yl.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const r=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&r===0)return this;const i=[],s=this.lods.length-r;for(let n=0;n<s;n++){const o=n+r,{scale:l,resolution:c}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new Gt({level:n,scale:l,resolution:c}))}return new Yl({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let r=null;for(let i=0;i<e.length;i++){const s=e[i];this._upsampleLevels[s.level]={parentLevel:r?r.level:-1,factor:r?r.resolution/s.resolution:0},r=s}}},Yl=ec,ec);a([u({type:Number,json:{write:!0}})],ur.prototype,"compressionQuality",void 0),a([u({type:Number,json:{write:!0}})],ur.prototype,"dpi",void 0),a([u({type:String,json:{read:N8.read,write:N8.write,origins:{"web-scene":{read:!1,write:!1}}}})],ur.prototype,"format",void 0),a([u({readOnly:!0})],ur.prototype,"isWrappable",null),a([u({type:se,json:{write:!0}})],ur.prototype,"origin",void 0),a([F("origin")],ur.prototype,"readOrigin",null),a([u({type:[Gt],value:null,json:{write:!0}})],ur.prototype,"lods",null),a([u({readOnly:!0})],ur.prototype,"scales",void 0),a([u({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],ur.prototype,"size",void 0),a([F("size",["rows","cols"])],ur.prototype,"readSize",null),a([j("size",{cols:{type:ve},rows:{type:ve}})],ur.prototype,"writeSize",null),a([u({type:B,json:{write:!0}})],ur.prototype,"spatialReference",void 0),ur=Yl=a([_("esri.layers.support.TileInfo")],ur);let zc=class extends md{constructor(e){super(e),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(N.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};zc=a([_("esri.support.AnalysesCollection")],zc);const J1={widthBreakpoint:{getValue(t){const e=t.viewSize[0],r=t.breakpoints,i=this.values;return e<=r.xsmall?i.xsmall:e<=r.small?i.small:e<=r.medium?i.medium:e<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],r=t.breakpoints,i=this.values;return e<=r.xsmall?i.xsmall:e<=r.small?i.small:e<=r.medium?i.medium:e<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,r=e[0],i=e[1],s=this.values;return i>=r?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},V4={xsmall:544,small:768,medium:992,large:1200};function CD(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function z4(t,e){return e?J1[t].valueToClassName[e].split(" "):[]}const kD=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=V4}initialize(){this.addHandles(ae(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),or))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!CD(i)){const s=JSON.stringify(V4,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s),i=V4}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=ls.acquire(),s=ls.acquire();let n,o=!1;for(n in J1){const l=this[n],c=J1[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});l!==c&&(o=!0,this[n]=c,z4(n,l).forEach(d=>s.push(d)),z4(n,c).forEach(d=>i.push(d)))}o&&(this._applyClassNameChanges(i,s),ls.release(i),ls.release(s))}_applyClassNameChanges(i,s){const n=this.container;n&&(s.forEach(o=>n.classList.remove(o)),i.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in J1)z4(s,this[s]).forEach(n=>i.classList.remove(n))}};return a([u()],r.prototype,"breakpoints",null),a([u()],r.prototype,"orientation",void 0),a([u()],r.prototype,"widthBreakpoint",void 0),a([u()],r.prototype,"heightBreakpoint",void 0),r=a([_("esri.views.BreakpointsOwner")],r),r};let Xa=class extends Z{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,r,i={}){return this._installWatch(e,r,i,ae)}addWhen(e,r,i={}){return this._installWatch(e,r,i,ji)}addOnCollectionChange(e,r,{initial:i=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([ys(e,"after-changes",this._createSyncUpdatingCallback(),It),ys(e,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>r({added:[],removed:o.toArray()}):void 0})],n),Br(()=>this.removeHandles(n))}addPromise(e){if(e==null)return e;const r=++this._handleId;this.addHandles(Br(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(Xh)||this._set("updating",!1))}),r),this._pendingPromises.add(e),this._set("updating",!0);const i=()=>this.removeHandles(r);return e.then(i,i),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,r,i={},s){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,n);const o=s(e,r,i);return this.addHandles(o,n),Br(()=>this.removeHandles(n))}_installSyncUpdatingWatch(e,r){const i=this._createSyncUpdatingCallback(),s=ae(e,i,{sync:!0,equals:()=>!1});return this.addHandles(s,r),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Xh),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(uh(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Xh))}),Xh)}}};a([u({readOnly:!0})],Xa.prototype,"updating",void 0),Xa=a([_("esri.core.support.UpdatingHandles")],Xa);const Xh=-42;let ho=class extends Z{constructor(){super(...arguments),this.items=new q,this._watchUpdatingTracking=new Xa,this._callbacks=new Map,this._projector=T9(),this._hiddenProjector=T9()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of r.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const r=this._hiddenSurface,i=this._hiddenProjector;let s;const n=()=>(s=e.render(),s);i.append(r,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s?.domNode){const l=s.domNode.getBoundingClientRect();o.left=l.left,o.top=l.top,o.right=l.right,o.bottom=l.bottom}for(i.detach(n);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(e,r){const i=this.computeBoundingRect(e),s=this.computeBoundingRect(r);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,r){const i=!!r?.disableDecorations;if(!this.items.some(n=>n.visible&&!(i&&n.isDecoration)))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{i&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};a([u({readOnly:!0})],ho.prototype,"surface",void 0),a([u({readOnly:!0})],ho.prototype,"items",void 0),a([u({readOnly:!0})],ho.prototype,"needsRender",null),a([u({readOnly:!0})],ho.prototype,"_watchUpdatingTracking",void 0),a([u({readOnly:!0})],ho.prototype,"updating",null),ho=a([_("esri.views.overlay.ViewOverlay")],ho);const D8=ho,q4=[0,0];function FD(t){const e=(t.ownerDocument||window.document).defaultView,r=t.getBoundingClientRect();return q4[0]=r.left+(e?.pageXOffset??0),q4[1]=r.top+(e?.pageYOffset??0),q4}function j8(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function AD(t){const e=document.createElement("div");return t.appendChild(e),e}const Cl=16,lp=750,LD=512,ND=2,DD=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Cl,time:lp},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ae(()=>this.cursor,s=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",s)}),ae(()=>this.navigating,s=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",s.toString())}),ae(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const i=this;this.addHandles([ae(()=>this.ui,(s,n)=>this._handleUIChange(s,n),or),i.on("focus",()=>this.notifyChange("focused")),i.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const s=this._get("container"),n=Wb(i);if(n||typeof i!="string"||N.getLogger(this).error("#container",`element with id '${i}' not found`),s===n)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(j8(this.root),this._set("root",null)),this.userContent&&(M9(this.userContent,s),j8(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",M9(n,o),n.appendChild(o),this._set("userContent",o);const l=document.createElement("div");l.className="esri-view-root",n.insertBefore(l,n.firstChild),this._set("root",l);const c=document.createElement("div");c.className="esri-view-surface",c.setAttribute("role","application"),c.tabIndex=0,l.appendChild(c),this._set("surface",c);const d=new D8;l.appendChild(d.surface),this._set("overlay",d),this.addHandles(ae(()=>d.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Ic({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Ze(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}set ui(i){const s=this._get("ui");s!==i&&s?.destroy(),this._set("ui",i)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(i,s,n){const o=this.position;return i-=o?o[0]:0,s-=o?o[1]:0,n?(n[0]=i,n[1]=s):n=[i,s],n}containerToPage(i,s,n){const o=this.position;return i+=o?o[0]:0,s+=o?o[1]:0,n?(n[0]=i,n[1]=s):n=[i,s],n}_updateAria(){const{surface:i,aria:s}=this;i&&(i.ariaLabelledByElements=s?.labelledByElements??null,i.ariaDescribedByElements=s?.describedByElements??null,i.ariaLabel=s?.label??null,i.ariaDescription=s?.description??null)}_handleUIChange(i,s){this.removeHandles("ui"),s&&s!==i&&s.destroy(),i&&(i.view=this,this.addHandles(ae(()=>this.root,n=>{i.container=n?AD(n):null},or),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Cl,i.time=lp;const s=Ic({prepare:l=>{const c=this._measure(),d=this._freqInfo;if(d.time+=l.deltaTime,c&&(d.freq=Cl,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const h=this._position();d.freq=h||c?Cl:Math.min(lp,d.freq*ND),!c&&d.freq>=LD&&(s.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver(l=>{i.freq=Cl,i.time=lp,s.resume()});this.container!=null&&n.observe(this.container);const o=Br(()=>n.disconnect());this.addHandles([ig(window,"resize",()=>{i.freq=Cl,i.time=lp,s.resume()}),o,s],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,n=i?i.clientHeight:0;if(s===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,l=this.height;return s===o&&n===l?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:l,width:s,height:n}),!0)}_position(){const i=this.container,s=this.position,n=i&&FD(i);return!!n&&(!s||n[0]!==s[0]||n[1]!==s[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return a([u()],r.prototype,"aria",void 0),a([u()],r.prototype,"container",null),a([u({readOnly:!0})],r.prototype,"focused",null),a([u({readOnly:!0})],r.prototype,"height",void 0),a([u()],r.prototype,"messagesCommon",void 0),a([u({type:D8})],r.prototype,"overlay",void 0),a([u({readOnly:!0})],r.prototype,"position",void 0),a([u({readOnly:!0})],r.prototype,"resizing",void 0),a([u({readOnly:!0})],r.prototype,"root",void 0),a([u({value:null,readOnly:!0})],r.prototype,"size",null),a([u({readOnly:!0})],r.prototype,"surface",void 0),a([u({readOnly:!0})],r.prototype,"suspended",void 0),a([u({nonNullable:!0})],r.prototype,"ui",null),a([u({readOnly:!0})],r.prototype,"userContent",void 0),a([u({readOnly:!0})],r.prototype,"width",void 0),a([u()],r.prototype,"widthBreakpoint",void 0),r=a([_("esri.views.DOMContainer")],r),r},e1="popup",V8="manual";function Gs(t){return t!=null&&"open"in t&&"declaredClass"in t}function Zn(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function jD(t,e,r){const[i,s,n]=e;if(r){const[o,l,c]=r;o&&Gs(l)&&(l.view=null,o.remove(l,e1),l!==s&&s&&l.destroy()),o&&c&&Zn(c)&&(c.view=null,o.remove(c,e1),c!==n&&n&&c.remove())}i&&Gs(s)&&(s.view=t,i.add(s,{key:e1,position:V8,internal:!0})),i&&n&&Zn(n)&&(n.view=t,i.add(n,{key:e1,position:V8,internal:!0}))}async function VD(t,e){const{popup:r,popupElement:i}=t;Gs(r)?await t1(r,null,e):i&&Zn(i)?await t1(null,i,e):e?.defer(async()=>{await t.setupPopup();const{popup:s,popupElement:n}=t;Gs(s)&&!t.destroyed&&t.ready&&t.popupEnabled?await t1(s,null,e):n&&Zn(n)&&await t1(null,n,e)})}function zD(t,e){const{popup:r,popupElement:i}=t;if(Gs(r))return r.open(e);i&&Zn(i)&&i.open(e)}function qD(t,e){Gs(t)&&t.close(),e&&Zn(e)&&(e.visible=!1)}async function t1(t,e,r){if(Gs(t)){const i=await t.viewModel.handleViewClick(r);return void(i?.promises?.length?t.open(i):t.visible&&t.close())}if(e&&Zn(e)){const i=await e.handleViewClick(r);i?.promises?.length?e.open(i):e.visible&&(e.visible=!1)}}const Ux=re("mac")?"Meta":"Control",UD=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),GD=t=>UD.has(t);let BD=class{constructor(e,r=[]){this.eventType=e,this.keyModifiers=r}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=e.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},Pt=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const r=this._incoming[e];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(r=>this._handleEvent(r)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,r,i){let s;typeof r=="function"?(i=r,s=[]):s=r||[];const n=typeof e=="string"?new BD(e,s):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=h=>{const y=this._incoming[h.match.eventType];if(y){const f=y.indexOf(h);y.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},c=new WD(n,i,{onPause:l,onRemove:l,onResume:h=>{const y=this._incoming[h.match.eventType];y&&!y.includes(h)&&(y.push(h),o(),this._manager&&this._manager.updateDependencies())}});let d=this._incoming[n.eventType];return d||(d=[],this._incoming[n.eventType]=d),d.push(c),o(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const r=new HD(e,{onEmit:(i,s,n,o)=>{this._manager?.emit(i.eventType,s,n,o)},onRemove:i=>{delete this._outgoing[i.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const r=this._incoming[e.type];if(r){for(const i of r)if(i.match.matches(e)&&(i.callback?.(e),e.shouldStopPropagation()))break}}},WD=class{constructor(e,r,i){this.match=e,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},HD=class{constructor(e,r){this.eventType=e,this._removed=!1,this._handler=r}emit(e,r,i){this._removed||this._handler.onEmit(this,e,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},ZD=class extends Pt{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",r=>this._update(r.data))}_update(e){const r=e.native.pointerType==="touch"?"touch":"mouse",{x:i,y:s,native:{pointerId:n}}=e;r===this._value&&this._x===i&&this._y===s&&this._id===n||(this._value=r,this._x=i,this._y=s,this._id=n,this._onChange(n,r,i,s))}},JD=class extends Pt{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Pc(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},QD=class{constructor(e,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in e){const s=e[i],n=new FR(s,void 0,void 0,2,2);this._properties[i]={pool:n,acquired:[]}}this._afterDispatchHandle=AR(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const r=this._properties[e];for(const i of r.acquired)I9(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(e){const r=this._owner._get(e),i=this._properties[e];let s=i.pool.acquire();for(i.acquired.push(s);s===r;)s=i.pool.acquire(),i.acquired.push(s);return LR(),s}_release(){for(const e in this._properties){const r=this._properties[e];let i=0;for(const s of r.acquired)I9(s)?r.acquired[i++]=s:r.pool.release(s);r.acquired.length=i}}},YD=class{constructor(){this.id=0,this.type="mouse",this.location=Et()}},Ji=class extends Z{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Ux,this._propertiesPool=new QD({latestPointerInfo:()=>new YD},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const r of e)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,r,i=Gn.INTERNAL){if(this._nameToGroup[e]||r.length===0)return;const s={name:e,handlers:r.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,c,d,h,y)=>{this._emitInputEvent(o.priorityIndex+1,l,c,d,y,h)},setPointerCapture:(l,c)=>{this._setPointerCapture(s,o,l,c)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const r=this._nameToGroup[e];r?(r.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):N.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(e.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){e.add(o.eventType);for(const l of o.keyModifiers)GD(l)||r.add(l)}s.active=n}this._sourceEvents=e,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,r,i,s){const n=this._latestPointerInfo;if(n==null||n.id!==e||n.type!==r||n.location.x!==i||n.location.y!==s){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=r,o.location.x=i,o.location.y=s,this._latestPointerInfo=o}}_onEventReceived(e,r){if(e==="pointer-capture-lost"){const n=r;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,r);const i=this._testTimestamp??r.native?.timestamp,s=r.native?.cancelable;this._emitInputEventFromSource(e,r,i,s)}_updateKeyModifiers(e,r){if(!r)return;let i=!1;const s=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},n=(l,c)=>{c&&!this._activeKeyModifiers.has(l)?(s(),this._activeKeyModifiers.add(l)):!c&&this._activeKeyModifiers.has(l)&&(s(),this._activeKeyModifiers.delete(l))};if(e==="key-down"||e==="key-up"){const l=r.key;this._keyModifiers.has(l)&&n(l,e==="key-down")}const o=r.native;n("Alt",!!o?.altKey),n("Control",!!o?.ctrlKey),n("Ctrl",!!o?.ctrlKey),n("Shift",!!o?.shiftKey),n("Meta",!!o?.metaKey),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ZD((e,r,i,s)=>this._setLatestPointer(e,r,i,s)),this._multiTouchHandler=new JD,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Gn.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Gn.INTERNAL)}_setPointerCapture(e,r,i,s){const n=e.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,r,i,s){this._emitInputEvent(0,e,r,i,s)}_emitInputEvent(e,r,i,s,n,o){const l=s??this._currentPropagation?.timestamp??performance.now(),c=n??!1,d={event:new KD(r,i,l,o||this._activeKeyModifiers,c),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(d):this._doNewPropagation(d)}_doNewPropagation(e){this._currentPropagation={events:new Vd,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:r,priorityIndex:i}=e.events.pop(),s=r.data?.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&e.currentHandler.eventCallback?.(r),r.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const r=new Vd;r.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,r){if(e.handler.hasSideEffects!==r.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==r.groupPriority)return e.groupPriority>r.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const s of r.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const n=i.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===i.keyModifiers.length!=(n.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(e){const r=[];for(const i of e){let s=0;for(;s<r.length&&this._compareHandlerPriority(i,r[s])>=0;)s++;r.splice(s,0,i)}return r}get test(){}};a([u({readOnly:!0})],Ji.prototype,"hasPendingInputs",null),a([u({constructOnly:!0})],Ji.prototype,"eventSource",void 0),a([u({constructOnly:!0})],Ji.prototype,"recognizers",void 0),a([u()],Ji.prototype,"multiTouchActive",null),a([u()],Ji.prototype,"_latestPointerInfo",void 0),a([u()],Ji.prototype,"latestPointerInfo",null),a([u()],Ji.prototype,"_paused",void 0),a([u({readOnly:!0})],Ji.prototype,"updating",null),Ji=a([_("esri.views.input.InputManager")],Ji);let KD=class{constructor(e,r,i,s,n){this.type=e,this.data=r,this.timestamp=i,this.modifiers=s,this.cancelable=n,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const r=(i,s)=>{this._propagationState&=-3;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw i;return i};return(typeof e=="function"?e():e).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const Gn={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},XD=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ae(()=>[this.ui,this.popup,this.popupElement],([i,s,n],o)=>{const[l,c,d]=o??[];jD(this,[i,s,n],[l,c,d])},Dr),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&VD(this,i)},Gn.WIDGET)]),ng(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>L(()=>import("./money-tides-Popup-DWpnlVjM.js").then(i=>i.P),__vite__mapDeps([174,3,1,2,4,5,175,10,176,177,178,179,11,12,180,31,181,182,183,184,185,94,186,187,188,189])))}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Gs(this.popup))return this.popup.open(i);if(this.popupElement&&Zn(this.popupElement))this.popupElement.open(i).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void N.getLogger(this).error(new M("view:null-popup","Popup is null and can't be opened"));zD(this,i)}catch{}}closePopup(){this._popupSetupTask?.abort(),qD(this.popup,this.popupElement)}async fetchPopupFeatures(i,s){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,s),s)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Gs(this.popup))return this._popupSetupTask=fh(async i=>{if(!this.popupEnabled||!Zn(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),Re(i),customElements.get("arcgis-popup")||N.getLogger(this).error(new M("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:s}=await L(()=>import("./money-tides-Popup-DWpnlVjM.js").then(o=>o.P),__vite__mapDeps([174,3,1,2,4,5,175,10,176,177,178,179,11,12,180,31,181,182,183,184,185,94,186,187,188,189]));if(Re(i),!this.popup||Gs(this.popup))return;const n=this.popup;if("open"in n||"close"in n){const{open:o,close:l,...c}=n;this.popup=new s({...c})}else this.popup=new s(n)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:s},n){const o=[],l=[];let c=!1;const d=NR(n,re("popup-view-fetch-timeout")??tj),h=m=>{const g=new ej(m);return l.push(g),o.push(g.promise),g},y=m=>{const g=l.at(-1);return g&&g.layerView===m&&!c?g:h(m)};for(const m of s)"graphic"in m?(y(m.layerView).graphics.push(m.graphic),c=!1):(o.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,d)),c=!0);l.forEach(m=>m.resolve(d));const f=DR(o).then(m=>m.filter(g=>!!g).flat());return{pendingFeatures:o,allGraphicsPromise:f,location:i}}async _getPopupHits(i,s){const{hits:n,location:o}=await this.popupHitTest(i);Re(s);const l=[];for(const c of n)if("graphic"in c){if(this._isValidPopupGraphic(c.graphic,s)){const d=this._isValidPopupGraphicsLayerView(c.layerView)?c.layerView:void 0;l.push({graphic:c.graphic,layerView:d})}}else this._isValidPopupLocationLayerView(c.layerView)&&l.push({mapPoint:c.mapPoint,layerView:c.layerView});return{hits:l,location:o}}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(s?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return a([u()],r.prototype,"popup",void 0),a([u()],r.prototype,"popupElement",void 0),a([u()],r.prototype,"popupEnabled",void 0),r=a([_("esri.views.PopupView")],r),r};let ej=class{constructor(e){this.layerView=e,this._resolver=Jo(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:r,graphics:i,_resolver:s}=this;if(!r)return s.resolve(i),s.promise;let n;return r.fetchPopupFeaturesFromGraphics(i,e).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const tj=5e3;var $p;const t2=Wt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Gx=t2.jsonValues.slice();Xy(Gx,"orthometric");const gd=Wt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let hr=$p=class extends A{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,r){return t2.write(t,e,r)}readHeightModel(t,e,r){return t2.read(t)||(r?.messages&&r.messages.push(rj(t,{context:r})),null)}readHeightUnit(t,e,r){return gd.read(t)||(r?.messages&&r.messages.push(z8(t,{context:r})),null)}readHeightUnitService(t,e,r){return wg(t)||gd.read(t)||(r?.messages&&r.messages.push(z8(t,{context:r})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new $p({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const r=E_(e);return new $p({heightModel:t.heightModel,heightUnit:r??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new $p;return e.read(t,{origin:"web-scene"}),e}};function z8(t,e){return new hs("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function rj(t,e){return new hs("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}a([u({type:t2.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Gx,default:"ellipsoidal",write:{isRequired:!0}}}}})],hr.prototype,"heightModel",void 0),a([j("web-scene","heightModel")],hr.prototype,"writeHeightModel",null),a([F(["web-scene","service"],"heightModel")],hr.prototype,"readHeightModel",null),a([u({type:gd.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:gd.jsonValues,write:{writer:gd.write,isRequired:!0}}}}})],hr.prototype,"heightUnit",void 0),a([F("web-scene","heightUnit")],hr.prototype,"readHeightUnit",null),a([F("service","heightUnit")],hr.prototype,"readHeightUnitService",null),a([u({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],hr.prototype,"vertCRS",void 0),a([F("service","vertCRS",["vertCRS","ellipsoid","geoid"])],hr.prototype,"readVertCRS",null),hr=$p=a([_("esri.geometry.HeightModelInfo")],hr);let U4;async function ij(){return U4==null&&(U4=L(()=>import("./money-tides-WhereClauseCache-DLuDDB8N.js"),__vite__mapDeps([48,49,3,1,2,4,5,10,11,12])).then(t=>new t.WhereClauseCache(500,500))),U4}async function Bx(t,e){const r=await ij(),i=r.get(t,e);if(i==null)throw r.getError(t,e);return i}function Hg(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function sj(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function Ane(t,e){return e.length===0?null:`${t} IN (${nj(e)})`}function nj(t){return t.map(e=>typeof e=="string"?oj(e):e).join(",")}function oj(t){return`'${t.replaceAll("'","''")}'`}function aj(t){return typeof t=="number"}function Lne(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function Nne(t){return typeof t=="boolean"}function $h(t){return typeof t=="string"||t instanceof String}function lj(t){return t==null||$h(t)}function Dne(t){return Array.isArray(t)}function jne(t){return t?.declaredClass==="esri.Graphic"}function Vne(t){return t instanceof Date}const uj="HH:mm",cj="HH:mm:ss",pj="HH:mm:ss.SSS",dj=[pj,cj,uj,"TT"],hj="yyyy-MM-dd";function q8(t){if(!t||!$h(t))return null;const e=Pe.fromFormat(t,hj);return e.isValid?e:null}function U8(t){return t&&$h(t)?jR(dj,e=>{const r=Pe.fromFormat(t,e);return r.isValid?r:null})??null:null}function G8(t){if(!t||!$h(t))return null;const e=Pe.fromISO(t);return e.isValid?e:null}const Wx=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function yj(t){return t!=null&&Wx.has(t.type)}function Hx(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Zx(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Jx(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const fj=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);Hb(Wx,fj);function zne(t,e){const r=t?.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,n=yj(t);return Hx(t)||Jx(t)||Zx(t)?{...mj(t,s,i),isInteger:n}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:n}}function mj(t,e,r){return Hx(t)?{min:q8(r)?.toMillis(),max:q8(e)?.toMillis(),rawMin:r,rawMax:e}:Jx(t)?{min:U8(r)?.toMillis(),max:U8(e)?.toMillis(),rawMin:r,rawMax:e}:Zx(t)?{min:G8(r)?.toMillis(),max:G8(e)?.toMillis(),rawMin:r,rawMax:e}:{max:null,min:null}}function gj(t){if(!t)return;const e=t.match(vj);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const vj=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function wj(t){return t.match(bj)?.[1]?.replaceAll("\\'","'")??null}const bj=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let G4;function gl(){return G4||(G4=(async()=>{const[t,e,r]=await Promise.all([L(()=>import("./money-tides-arcadeUtils-B8DUs4kg.js"),__vite__mapDeps([190,191,1,2,192,193,3,4,5,194,183,53,195,196,11,12,197,49,94,198,10,184,185,199])),L(()=>import("./money-tides-batchExec-nvTlymGh.js"),__vite__mapDeps([200,3,1,2,4,5,104,10])),L(()=>import("./money-tides-aiServices-Y3LyI1Tz.js").then(i=>i.a),__vite__mapDeps([196,3,1,2,4,5,193,194,183,53,11,12,197,192]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:r,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),G4}const _j=/^([0-9_])/,Sj=/[^a-z0-9_\u0080-\uffff]+/gi;function xj(t){return t==null?null:t.trim().replaceAll(Sj,"_").replace(_j,"F$1")||null}const $j=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Tj=["field","normalizationField"];function zf(t,e){if(t!=null&&e!=null){for(const r of Array.isArray(t)?t:[t])if(B8($j,r,e),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)B8(Tj,i,e)}}function B8(t,e,r){if(t)for(const i of t){const s=zb(i,e),n=s&&typeof s!="function"&&r.get(s);n&&Hr(i,n.name,e)}}function Qx(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const r=e.get(t.startField),i=e.get(t.endField);t.startField=r?.name??null,t.endField=i?.name??null}else{const r=e.get(t.startTimeField),i=e.get(t.endTimeField);t.startTimeField=r?.name??null,t.endTimeField=i?.name??null}}const B4=new Set;function W2(t,e){return t&&e?(B4.clear(),vl(B4,t,e),Array.from(B4).sort()):[]}function vl(t,e,r){if(r)if(e?.fields?.length)if(r.includes("*"))for(const{name:i}of e.fields)t.add(i);else for(const i of r)ar(t,e,i);else{if(r.includes("*"))return t.clear(),void t.add("*");for(const i of r)i!=null&&t.add(i)}}function ar(t,e,r){if(typeof r=="string")if(e){const i=e.get(r);i&&t.add(i.name)}else t.add(r)}function qne(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(r=>r.name):e}function Une(t,e,r=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const i=W2(t,e);return i.length/t.fields.length>=r?["*"]:i}async function lr(t,e,r,i){if(!i)return;const s=gj(i);if(s)ar(t,e,s);else{const{arcadeUtils:n}=await gl(),o=n.extractFieldNames(i,r?.partitions??e?.fields?.map(l=>l.name));for(const l of o)ar(t,r?.index??e,l)}}async function Zg(t,e,r){if(r&&r!=="1=1"){const i=await Bx(r,e);if(!i.isStandardized)throw new M("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});vl(t,e,i.fieldNames)}}function Mj({displayField:t,fields:e}){return t||(e?.length?Ij(e):null)}function Ij(t){return W4(t,"name-or-title")||W4(t,"unique-identifier")||W4(t,"type-or-category")||Ej(t)}function Ej(t){for(const e of t){if(!e?.name)continue;const r=e.name.toLowerCase();if(r.includes("name")||r.includes("title"))return e.name}return null}function W4(t,e){for(const r of t)if(r?.valueType&&r.valueType===e)return r.name;return null}async function Gne(t,e){if(!e)return;const r=e.elevationInfo?.featureExpressionInfo;return r?r.collectRequiredFields(t,e.fieldsIndex):void 0}function Pj(t,e,r){r.onStatisticExpression?lr(t,e,null,r.onStatisticExpression.expression):t.add(r.onStatisticField)}async function Bne(t,e,r){if(!e||!r||!("fields"in r))return;const i=[],s=r.popupTemplate;i.push(Yx(t,e,s)),r.fields&&i.push(...r.fields.map(async n=>Pj(t,e.fieldsIndex,n))),await Promise.all(i)}async function Wne(t,e){const{fieldsIndex:r,trackInfo:i}=e;if(!e||!i||!r)return;const s=[i.latestObservations.renderer?.collectRequiredFields(t,r),i.previousObservations.renderer?.collectRequiredFields(t,r),i.trackLines.renderer?.collectRequiredFields(t,r)];i.popupTemplate&&s.push(Yx(t,e,i.popupTemplate));for(const n of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(n)for(const o of n)s.push(t$(t,r,o));await Promise.all(s)}async function Yx(t,e,r){const i=[];r?.expressionInfos&&i.push(...r.expressionInfos.map(n=>lr(t,e.fieldsIndex,null,n.expression)));const s=r?.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&i.push(lr(t,e.fieldsIndex,null,n.expressionInfo.expression));await Promise.all(i)}async function Hne(t,e,r){e&&(e.timeInfo&&r?.timeExtent&&vl(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&vl(t,e.fieldsIndex,[e.floorInfo.floorField]),r?.where!=null&&await Zg(t,e.fieldsIndex,r.where))}async function Zne(t,e,r){e&&r&&await Promise.all(r.map(i=>Rj(t,e,i)))}async function Rj(t,e,r){e&&r&&(r.valueExpression?await lr(t,e.fieldsIndex,null,r.valueExpression):r.field&&ar(t,e.fieldsIndex,r.field))}function Jne(t){return t?W2(t.fieldsIndex,Kx(t)):[]}function Oj(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?W2(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function Qne(t,e,r){if(!e||!r)return;const i=e.fieldsIndex;await Promise.all(r.filters.map(s=>Zg(t,i,s.where)))}const Cj=new Set(["oid","global-id","guid"]),kj=new Set(["oid","global-id"]),Fj=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function Aj(t){const e=new Set;Xx(t).forEach(i=>e.add(i)),Oj(t).forEach(i=>e.add(i.toLowerCase()));const r=t&&"infoFor3D"in t?t.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>e.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>e.add(i.toLowerCase()))),Array.from(e)}function Kx(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=e;return[r,i,s,n].filter(Boolean)}function Xx(t){return Kx(t).map(e=>e.toLowerCase())}function e$(t,e){return t.editable&&!Cj.has(t.type)&&!Xx(e).includes(t.name?.toLowerCase()??"")}function Lj(t,e){const r=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&r===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&r===e.globalIdField.toLowerCase()||Aj(e).includes(r)||kj.has(t.type)||Fj.some(i=>i.test(r)))}async function Yne(t,e){const{labelingInfo:r,fieldsIndex:i}=e;r?.length&&await Promise.all(r.map(s=>t$(t,i,s)))}async function t$(t,e,r){if(!r)return;const i=r.getLabelExpression(),s=r.where;if(i.type==="arcade")await lr(t,e,null,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{ar(t,e,o.slice(1,-1))})}await Zg(t,e,s)}function Nj(t){const e=t.defaultValue;return e!==void 0&&i$(t,e)?e:t.nullable?null:void 0}function Kne(t){const e=typeof t=="string"?{type:t}:t;return n$(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function r$(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Dj(t){return t===null||r$(t)}function jj(t){return t===null||Number.isInteger(t)}function Vj(){return!0}function i$(t,e){let r;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=t.nullable?jj:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=t.nullable?Dj:r$;break;case"string":case"esriFieldTypeString":r=t.nullable?lj:$h;break;default:r=Vj}return arguments.length===1?r:r(e)}const zj=["integer","small-integer","big-integer","long"],qj=["single","double"],Uj=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],Gj=["esriFieldTypeSingle","esriFieldTypeDouble"],s$=new Set([...zj,...Uj]),Bj=new Set([...qj,...Gj]),Wj=Hb(s$,Bj);function Hj(t){return t!=null&&s$.has(t.type)}function Jg(t){return t!=null&&Wj.has(t.type)}function n$(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function o$(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function Zj(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Jj(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function a$(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function W8(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function H8(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function Xne(t,e){return Qj(t,e)===null}function eoe(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Qj(t,e){return t==null||t.nullable&&e===null?null:i$(t,e)?Jg(t)&&!Yj(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function Yj(t,e){const r=typeof t=="string"?l$(t):t;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(e)&&e>=i&&e<=s:e>=i&&e<=s}function l$(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return Kj;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return Xj;case"esriFieldTypeBigInteger":case"big-integer":return eV;case"esriFieldTypeSingle":case"single":return tV;case"esriFieldTypeDouble":case"double":return rV}}const Kj={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Xj={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},eV={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},r1=(2-2**-23)*2**127,tV={min:-r1,max:r1,isInteger:!1,rawMin:-r1,rawMax:r1},rV={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function toe(t,e,r){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${r} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${r} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${r} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:i,max:s}=l$(e.type);return`Value ${r} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${i} to ${s}`}}}function iV(t,e){return!sV(t,e,null)}function sV(t,e,r){if(!t?.attributes||!e)return!0;const i=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!i.has(n)&&(s=!0,r==null))break;return s}function nV(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function Qg(t){const e=t?.match(/{[^}]+}/g);return e?e.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let Q1=class extends A{constructor(e){super(e),this.type=null}};a([u({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Q1.prototype,"type",void 0),Q1=a([_("esri.popup.content.Content")],Q1);const Yn=Q1,i1=new be({asc:"ascending",desc:"descending"});let Tp=class extends de(A){constructor(e){super(e),this.field=null,this.order="ascending"}};a([u({type:String,json:{write:!0}})],Tp.prototype,"field",void 0),a([u({type:i1.apiValues,json:{type:i1.jsonValues,read:i1.read,write:i1.write}})],Tp.prototype,"order",void 0),Tp=a([_("esri.popup.support.AttachmentsOrderByInfo")],Tp);const oV=Tp;let bs=class extends de(Yn){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};a([u({type:[String],json:{write:!0}})],bs.prototype,"attachmentKeywords",void 0),a([u({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],bs.prototype,"attachmentTypes",void 0),a([u({type:String,json:{write:!0}})],bs.prototype,"description",void 0),a([u({type:["auto","preview","list"],json:{write:!0}})],bs.prototype,"displayType",void 0),a([u({type:[oV],json:{write:!0}})],bs.prototype,"orderByFields",void 0),a([u({type:String,json:{write:!0}})],bs.prototype,"title",void 0),a([u({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],bs.prototype,"type",void 0),bs=a([_("esri.popup.content.AttachmentsContent")],bs);const qc=bs;var qf;let ga=qf=class extends Yn{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new qf({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?P(this.outFields):null})}};a([u()],ga.prototype,"creator",void 0),a([u()],ga.prototype,"destroyer",void 0),a([u()],ga.prototype,"outFields",void 0),a([u({type:["custom"],readOnly:!0})],ga.prototype,"type",void 0),ga=qf=a([_("esri.popup.content.CustomContent")],ga);const aV=ga;var Uf;let Kl=Uf=class extends A{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Uf({title:this.title,expression:this.expression})}};a([u({type:String,json:{write:!0}})],Kl.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],Kl.prototype,"expression",void 0),a([u({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Kl.prototype,"returnType",void 0),Kl=Uf=a([_("esri.popup.ElementExpressionInfo")],Kl);const lV=Kl;var Gf;let Mp=Gf=class extends Yn{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new Gf({expressionInfo:this.expressionInfo?.clone()})}};a([u({type:lV,json:{write:!0}})],Mp.prototype,"expressionInfo",void 0),a([u({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Mp.prototype,"type",void 0),Mp=Gf=a([_("esri.popup.content.ExpressionContent")],Mp);const H2=Mp;let Y1=class extends de(A){constructor(e){super(e),this.type=null}};a([u({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Y1.prototype,"type",void 0),Y1=a([_("esri.layers.support.FieldFormat")],Y1);const Yg=Y1,u$="auto";let ln=class extends Yg{constructor(e){super(e),this.dateStyle=null,this.hour12=u$,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};a([u({type:["full","long","medium","short"],json:{write:!0}})],ln.prototype,"dateStyle",void 0),a([u({type:["always","auto","never"],nonNullable:!0,json:{default:u$,write:!0}})],ln.prototype,"hour12",void 0),a([u({type:["long","short"],json:{write:!0}})],ln.prototype,"month",void 0),a([u({type:["full","long","medium","short"],json:{write:!0}})],ln.prototype,"timeStyle",void 0),a([u({type:["date-time"]})],ln.prototype,"type",void 0),a([u({type:["numeric"],json:{write:!0}})],ln.prototype,"year",void 0),ln=a([_("esri.layers.support.DateTimeFieldFormat")],ln);const el=ln,Z8={min:0,max:20},c$=2,p$=0,d$="decimal",h$="auto";let yo=class extends Yg{constructor(e){super(e),this.maximumFractionDigits=c$,this.minimumFractionDigits=p$,this.style=d$,this.type="number",this.useGrouping=h$}};a([u({type:ve,nonNullable:!0,range:Z8,json:{default:c$,write:!0}})],yo.prototype,"maximumFractionDigits",void 0),a([u({type:ve,nonNullable:!0,range:Z8,json:{default:p$,write:!0}})],yo.prototype,"minimumFractionDigits",void 0),a([u({type:["decimal"],nonNullable:!0,json:{default:d$,write:!0}})],yo.prototype,"style",void 0),a([u({type:["number"]})],yo.prototype,"type",void 0),a([u({type:["always","auto","never"],nonNullable:!0,json:{default:h$,write:!0}})],yo.prototype,"useGrouping",void 0),yo=a([_("esri.layers.support.NumberFieldFormat")],yo);const r2=yo;let Xl=class extends de(A){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};a([X(VR)],Xl.prototype,"dateFormat",void 0),a([u({type:Boolean,json:{write:!0}})],Xl.prototype,"digitSeparator",void 0),a([u({type:ve,json:{write:!0}})],Xl.prototype,"places",void 0),Xl=a([_("esri.popup.support.FieldInfoFormat")],Xl);const Bn=Xl,y$={base:Yg,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":el,number:r2}};function uV(t,e){const{format:r}=t;return e&&Ml(e)?r?f$(r,e):vd(e,{hour12:"always",useGrouping:"always"}):null}function f$(t,e){const{dateFormat:r}=t;if(!e)return r?Q8(t):J8(t);if(!Ml(e))return;const i={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return m$(t);case"single":case"double":return J8(t);case"date":case"timestamp-offset":return r?Q8(t):vd(e,i);case"date-only":return r?cV(t):vd(e);case"time-only":return r?pV(t):vd(e,i)}}function Ml(t){return Jg(t)||o$(t)||Zj(t)||a$(t)||Jj(t)}function m$(t){return new r2({useGrouping:t.digitSeparator?"always":"never"})}function J8(t){const e=m$(t),{places:r}=t;return e.minimumFractionDigits=r??0,e.maximumFractionDigits=r??2,e}function Q8(t){return new el({dateStyle:g$(t),year:_$(t),month:w$(t),timeStyle:b$(t),hour12:v$(t)})}function cV(t){return new el({dateStyle:g$(t),year:_$(t),month:w$(t)})}function pV(t){return new el({timeStyle:b$(t),hour12:v$(t)})}function g$(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function v$(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function w$(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function b$(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function _$(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function Kg(t,e){const r=t.type==="number",i=t.type==="date-time";if(!e)return r?Y8(t):i?K8(t):null;if(Ml(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return r?S$(t):null;case"single":case"double":return r?Y8(t):null;case"date":case"timestamp-offset":return i?K8(t):null;case"date-only":return i?dV(t):null;case"time-only":return i?hV(t):null}}function S$(t){return new Bn({digitSeparator:t.useGrouping!=="never"})}function Y8(t){const e=S$(t);return e.places=t.maximumFractionDigits,e}function K8(t){let e;const r=x$(t),i=$$(t),s=t.hour12==="never"?"24":null,n=t.year==="numeric"?"year":null,o=T$(t);return r&&i&&s?e=`${r}-${i}-${s}`:r&&i?e=`${r}-${i}`:r?e=r:n&&o?e=`${o}-${n}`:n&&(e=n),e?new Bn({dateFormat:e}):null}function dV(t){let e;const r=x$(t),i=t.year==="numeric"?"year":null,s=T$(t);return r?e=r:i&&s?e=`${s}-${i}`:i&&(e=i),e?new Bn({dateFormat:e}):null}function hV(t){let e;const r=$$(t),i=t.hour12==="never"?"24":null;return r&&i?e=`short-date-${r}-${i}`:r&&(e=`short-date-${r}`),e?new Bn({dateFormat:e}):null}function x$(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function $$(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function T$(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function vd(t,e){if(!Ml(t))return;const r=e?.useGrouping??"auto",i=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new r2({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:r});case"single":case"double":return new r2({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:r});case"date":case"timestamp-offset":return new el({dateStyle:"short",timeStyle:"short",hour12:i});case"date-only":return new el({dateStyle:"short"});case"time-only":return new el({timeStyle:"short",hour12:i})}}let Yr=class extends de(A){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?Kg(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?f$(e):null)}readFormat(e,r){if(!r.fieldFormat)return e?Bn.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};a([u({value:null,clonable:!1,types:y$,json:{write:{overridePolicy(t,e,r){const{fieldName:i}=this;return{enabled:!!i&&!i.startsWith("expression/")&&!i.startsWith("relationships/")&&!!r?.writeFieldFormat}}}}})],Yr.prototype,"fieldFormat",null),a([u({type:String,json:{write:!0}})],Yr.prototype,"fieldName",void 0),a([u({value:null,clonable:!1,type:Bn,json:{write:!0}})],Yr.prototype,"format",null),a([F("format")],Yr.prototype,"readFormat",null),a([u({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Yr.prototype,"isEditable",void 0),a([u({type:String,json:{write:!0}})],Yr.prototype,"label",void 0),a([u({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Yr.prototype,"statisticType",void 0),a([X(new be({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Yr.prototype,"stringFieldOption",void 0),a([u({type:String,json:{write:!0}})],Yr.prototype,"tooltip",void 0),a([u({type:Boolean,json:{write:!0}})],Yr.prototype,"visible",void 0),Yr=a([_("esri.popup.FieldInfo")],Yr);const Z2=Yr;var Bf;let fo=Bf=class extends Yn{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new Bf(P({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};a([u({type:Object,json:{write:!0}})],fo.prototype,"attributes",void 0),a([u({type:String,json:{write:!0}})],fo.prototype,"description",void 0),a([u({type:[Z2],json:{write:!0}})],fo.prototype,"fieldInfos",void 0),a([u({type:String,json:{write:!0}})],fo.prototype,"title",void 0),a([u({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],fo.prototype,"type",void 0),fo=Bf=a([_("esri.popup.content.FieldsContent")],fo);const Uc=fo;let va=class extends A{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};a([u({type:String,json:{write:!0}})],va.prototype,"altText",void 0),a([u({type:String,json:{write:!0}})],va.prototype,"caption",void 0),a([u({type:String,json:{write:!0}})],va.prototype,"title",void 0),a([u({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],va.prototype,"type",void 0),va=a([_("esri.popup.content.mixins.MediaInfo")],va);const Xg=va;var Wf;let wa=Wf=class extends Z{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new Wf({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};a([u()],wa.prototype,"color",void 0),a([u()],wa.prototype,"fieldName",void 0),a([u()],wa.prototype,"tooltip",void 0),a([u()],wa.prototype,"value",void 0),wa=Wf=a([_("esri.popup.content.support.ChartMediaInfoValueSeries")],wa);const yV=wa;var Hf;let mo=Hf=class extends A{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Hf({colors:P(this.colors),fields:P(this.fields),normalizeField:this.normalizeField,series:P(this.series),tooltipField:this.tooltipField})}};a([u({type:[ne],json:{type:[[ve]],write:!0}})],mo.prototype,"colors",void 0),a([u({type:[String],json:{write:{isRequired:!0}}})],mo.prototype,"fields",void 0),a([u({type:String,json:{write:!0}})],mo.prototype,"normalizeField",void 0),a([u({type:[yV],json:{read:!1}})],mo.prototype,"series",void 0),a([u({type:String,json:{write:!0}})],mo.prototype,"tooltipField",void 0),mo=Hf=a([_("esri.popup.content.support.ChartMediaInfoValue")],mo);const fV=mo;let Ip=class extends Xg{constructor(e){super(e),this.type=null,this.value=void 0}};a([u({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ip.prototype,"type",void 0),a([u({type:fV,json:{write:{isRequired:!0}}})],Ip.prototype,"value",void 0),Ip=a([_("esri.popup.content.mixins.ChartMediaInfo")],Ip);const J2=Ip,Q2=Wt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var Zf;let K1=Zf=class extends J2{constructor(t){super(t),this.type="bar-chart"}clone(){return new Zf({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a([u({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:Q2.write,isRequired:!0}}})],K1.prototype,"type",void 0),K1=Zf=a([_("esri.popup.content.BarChartMediaInfo")],K1);const M$=K1;var Jf;let X1=Jf=class extends J2{constructor(t){super(t),this.type="column-chart"}clone(){return new Jf({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a([u({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:Q2.write,isRequired:!0}}})],X1.prototype,"type",void 0),X1=Jf=a([_("esri.popup.content.ColumnChartMediaInfo")],X1);const I$=X1;var Qf;let Ep=Qf=class extends A{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new Qf({linkURL:this.linkURL,sourceURL:this.sourceURL})}};a([u({type:String,json:{write:!0}})],Ep.prototype,"linkURL",void 0),a([u({type:String,json:{write:{isRequired:!0}}})],Ep.prototype,"sourceURL",void 0),Ep=Qf=a([_("esri.popup.content.support.ImageMediaInfoValue")],Ep);const mV=Ep;var Yf;let eu=Yf=class extends Xg{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new Yf({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};a([u({type:Number,json:{write:!0}})],eu.prototype,"refreshInterval",void 0),a([u({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],eu.prototype,"type",void 0),a([u({type:mV,json:{write:{isRequired:!0}}})],eu.prototype,"value",void 0),eu=Yf=a([_("esri.popup.content.ImageMediaInfo")],eu);const E$=eu;var Kf;let e0=Kf=class extends J2{constructor(t){super(t),this.type="line-chart"}clone(){return new Kf({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a([u({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:Q2.write,isRequired:!0}}})],e0.prototype,"type",void 0),e0=Kf=a([_("esri.popup.content.LineChartMediaInfo")],e0);const P$=e0;var Xf;let t0=Xf=class extends J2{constructor(t){super(t),this.type="pie-chart"}clone(){return new Xf({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a([u({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:Q2.write,isRequired:!0}}})],t0.prototype,"type",void 0),t0=Xf=a([_("esri.popup.content.PieChartMediaInfo")],t0);const R$=t0,em={base:Xg,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":M$,"column-chart":I$,"line-chart":P$,"pie-chart":R$,image:E$}};var tm;let Qi=tm=class extends Yn{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?E$.fromJSON(e):e.type==="barchart"?M$.fromJSON(e):e.type==="columnchart"?I$.fromJSON(e):e.type==="linechart"?P$.fromJSON(e):e.type==="piechart"?R$.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(r=>r.toJSON())}clone(){return new tm(P({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};a([u()],Qi.prototype,"activeMediaInfoIndex",void 0),a([u({type:Object,json:{write:!0}})],Qi.prototype,"attributes",void 0),a([u({type:String,json:{write:!0}})],Qi.prototype,"description",void 0),a([u({types:[em]})],Qi.prototype,"mediaInfos",void 0),a([F("mediaInfos")],Qi.prototype,"readMediaInfos",null),a([j("mediaInfos")],Qi.prototype,"writeMediaInfos",null),a([u({type:String,json:{write:!0}})],Qi.prototype,"title",void 0),a([u({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Qi.prototype,"type",void 0),Qi=tm=a([_("esri.popup.content.MediaContent")],Qi);const Xd=Qi;var rm;let Pp=rm=class extends A{constructor(t){super(t),this.field=null,this.order=null}clone(){return new rm({field:this.field,order:this.order})}};a([u({type:String,json:{write:!0}})],Pp.prototype,"field",void 0),a([u({type:["asc","desc"],json:{write:!0}})],Pp.prototype,"order",void 0),Pp=rm=a([_("esri.popup.support.RelatedRecordsInfoFieldOrder")],Pp);const e6=Pp;let _s=class extends de(Yn){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};a([u({type:String,json:{write:!0}})],_s.prototype,"description",void 0),a([u({type:Number,json:{type:ve,write:!0}})],_s.prototype,"displayCount",void 0),a([u({type:["list"],json:{write:{isRequired:!0}}})],_s.prototype,"displayType",void 0),a([u({type:[e6],json:{write:!0}})],_s.prototype,"orderByFields",void 0),a([u({type:Number,json:{type:ve,write:{isRequired:!0}}})],_s.prototype,"relationshipId",void 0),a([u({type:String,json:{write:!0}})],_s.prototype,"title",void 0),a([u({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],_s.prototype,"type",void 0),_s=a([_("esri.popup.content.RelationshipContent")],_s);const eh=_s;var im;let Rp=im=class extends Yn{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new im({text:this.text})}};a([u({type:String,json:{write:!0}})],Rp.prototype,"text",void 0),a([u({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Rp.prototype,"type",void 0),Rp=im=a([_("esri.popup.content.TextContent")],Rp);const th=Rp;let un=class extends de(A){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};a([u({type:String,json:{write:!0}})],un.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],un.prototype,"description",void 0),a([u({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],un.prototype,"type",void 0),a([u({type:Number,json:{type:ve,write:!0}})],un.prototype,"associatedNetworkSourceId",void 0),a([u({type:Number,json:{type:ve,write:!0}})],un.prototype,"associatedAssetGroup",void 0),a([u({type:Number,json:{type:ve,write:!0}})],un.prototype,"associatedAssetType",void 0),un=a([_("esri.popup.support.UtilityNetworkAssociationType")],un);const O$=un;let go=class extends de(Yn){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};a([u({type:String,json:{write:!0}})],go.prototype,"description",void 0),a([u({type:Number,json:{type:ve,write:!0}})],go.prototype,"displayCount",void 0),a([u({type:String,json:{write:!0}})],go.prototype,"title",void 0),a([u({type:[O$],json:{write:!0}})],go.prototype,"associationTypes",void 0),a([X({utilityNetworkAssociations:"utility-network-associations"})],go.prototype,"type",void 0),go=a([_("esri.popup.content.UtilityNetworkAssociationsContent")],go);const t6=go,gV={base:null,key:"type",typeMap:{attachment:qc,media:Xd,text:th,expression:H2,field:Uc,relationship:eh,utilityNetworkAssociations:t6}},vV={base:null,key:"type",typeMap:{attachment:qc,media:Xd,text:th,expression:H2,field:Uc,relationship:eh}};var sm;let ba=sm=class extends A{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new sm({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a([u({type:String,json:{write:!0}})],ba.prototype,"name",void 0),a([u({type:String,json:{write:!0}})],ba.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],ba.prototype,"expression",void 0),a([u({type:["string","number"],json:{write:!0}})],ba.prototype,"returnType",void 0),ba=sm=a([_("esri.popup.ExpressionInfo")],ba);const wV=ba;var nm;let Op=nm=class extends A{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new nm({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};a([u({type:Boolean,json:{write:!0}})],Op.prototype,"returnTopmostRaster",void 0),a([u({type:Boolean,json:{write:!0}})],Op.prototype,"showNoDataRecords",void 0),Op=nm=a([_("esri.popup.LayerOptions")],Op);const bV=Op;var om;let Cp=om=class extends A{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new om({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?P(this.orderByFields):null})}};a([u({type:Boolean,json:{write:!0}})],Cp.prototype,"showRelatedRecords",void 0),a([u({type:[e6],json:{write:!0}})],Cp.prototype,"orderByFields",void 0),Cp=om=a([_("esri.popup.RelatedRecordsInfo")],Cp);const X8=Cp;var am;let Ti=am=class extends gh(Z){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new am({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};a([u()],Ti.prototype,"active",void 0),a([u()],Ti.prototype,"className",void 0),a([u()],Ti.prototype,"disabled",void 0),a([u()],Ti.prototype,"icon",void 0),a([u()],Ti.prototype,"id",void 0),a([u()],Ti.prototype,"indicator",void 0),a([u()],Ti.prototype,"title",void 0),a([u()],Ti.prototype,"type",void 0),a([u()],Ti.prototype,"visible",void 0),Ti=am=a([_("esri.support.actions.ActionBase")],Ti);const r6=Ti;var lm;let r0=lm=class extends r6{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new lm({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};a([u()],r0.prototype,"image",void 0),r0=lm=a([_("esri.support.actions.ActionButton")],r0);const _V=r0;var um;let kp=um=class extends r6{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new um({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};a([u()],kp.prototype,"image",void 0),a([u()],kp.prototype,"value",void 0),kp=um=a([_("esri.support.actions.ActionToggle")],kp);const SV=kp,up="relationships/",e7="expression/",xV=q.ofType({key:"type",defaultKeyValue:"button",base:r6,typeMap:{button:_V,toggle:SV}}),$V={base:Yn,key:"type",typeMap:{media:Xd,custom:aV,text:th,attachments:qc,fields:Uc,expression:H2,relationship:eh,utilityNetworkAssociations:t6}},C$=new Set(["attachments","fields","media","text","expression","relationship"]),TV=new Set([...C$,"utility-network-associations"]);let ht=class extends de(A){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(r=>al($V,r)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Sr(e)?e:(N.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(e,r,i,s){this._writePopupTemplateContent(e,r,s)}writeWebMapContent(e,r,i,s){this._writePopupTemplateContent(e,r,s)}writeFieldInfos(e,r,i,s){const{content:n}=this,o=Array.isArray(n)?n:null,{writeFieldFormat:l,...c}=s||{};if(e){const d=o?o.filter(y=>y.type==="fields"):[],h=d.length&&d.every(y=>y.fieldInfos?.length);r.fieldInfos=e.filter(Boolean).map(y=>{const f=y.toJSON(c);return h&&(f.visible=!1),f})}if(o)for(const d of o)d.type==="fields"&&this._writeFieldsContent(d,r,c)}writeLayerOptions(e,r,i,s){r[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,r){r.title=e||""}async collectRequiredFields(e,r,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,r,i,[...s,...this._getContentExpressionInfos(this.content,s)]),vl(e,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,r){const i=new Set;return await this.collectRequiredFields(i,e,r),[...i].sort()}_writePopupTemplateContent(e,r,i){typeof e!="string"?Array.isArray(e)&&(r.popupElements=e.filter(s=>i?.origin==="web-scene"?C$.has(s.type):TV.has(s.type)).map(s=>s?.toJSON(i)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=e}_writeFieldsContent(e,r,i){const s=e.fieldInfos;if(!Array.isArray(s)||!s.length)return;const n=r.fieldInfos;if(Array.isArray(n))for(const o of s){const l=n.find(c=>c.fieldName?.toLowerCase()===o.fieldName?.toLowerCase());l?l.visible=!0:n.push(o.toJSON(i))}else r.fieldInfos=s.map(o=>o.toJSON(i))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,r){const i=e.orderByFields?.map(n=>this._toFieldOrderJSON(n,e.relationshipId))||[],s=[...r.relatedRecordsInfo?.orderByFields||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(e,r){!r.description&&e.text&&(r.description=e.text)}_writeMediaContent(e,r){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=P(e.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(e,r,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!r||s.mediaInfos||(n.mediaInfos=r,s.mediaInfos=!0),Xd.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),th.fromJSON(n)):n.type==="attachments"?qc.fromJSON(n):n.type==="fields"?Uc.fromJSON(n):n.type==="expression"?H2.fromJSON(n):n.type==="relationship"?eh.fromJSON(n):n.type==="utilityNetworkAssociations"?t6.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:r,order:i}=e;if(!r?.startsWith(up))return null;const s=r.replace(up,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?eh.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(e,r){const{order:i,field:s}=e;return{field:`${up}${r}/${s}`,order:i}}_readPopupInfo({description:e,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new th({text:e})):n.push(new Uc),Array.isArray(r)&&r.length&&n.push(Xd.fromJSON({mediaInfos:r})),i&&n.push(qc.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=s;return o&&l?.length&&l.forEach(c=>{const d=this._toRelationshipContent(c);d&&n.push(d)}),n.length?n:e}_getContentElementFields(e){const r=e?.type;if(r==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(r==="custom")return e.outFields||[];if(r==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(r==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return r==="text"?this._extractFieldNames(e.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:r,title:i,value:s}=e,n=s||{},{fields:o,normalizeField:l,tooltipField:c,sourceURL:d,linkURL:h}=n,y=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(d),...this._extractFieldNames(h),...o??[]];return l&&y.push(l),c&&y.push(c),y}_getContentExpressionInfos(e,r){return Array.isArray(e)?e.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],r):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,r,i,s){s&&await Promise.all(s.map(n=>lr(e,r,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(up)||r.startsWith(e7))).map(r=>r.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:r,title:i,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Qg(e).filter(r=>!(r.startsWith(up)||r.startsWith(e7)))}};a([u({type:xV})],ht.prototype,"actions",void 0),a([u()],ht.prototype,"content",void 0),a([xe("content")],ht.prototype,"castContent",null),a([F("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],ht.prototype,"readContent",null),a([j("web-scene","content",{popupElements:{type:q.ofType(vV)},showAttachments:{type:Boolean},mediaInfos:{type:q.ofType(em)},description:{type:String},relatedRecordsInfo:{type:X8}})],ht.prototype,"writeWebSceneContent",null),a([j("content",{popupElements:{type:q.ofType(gV)},showAttachments:{type:Boolean},mediaInfos:{type:q.ofType(em)},description:{type:String},relatedRecordsInfo:{type:X8}})],ht.prototype,"writeWebMapContent",null),a([u({type:[wV],json:{write:!0}})],ht.prototype,"expressionInfos",void 0),a([u({type:[Z2]})],ht.prototype,"fieldInfos",void 0),a([j("fieldInfos")],ht.prototype,"writeFieldInfos",null),a([u({type:bV})],ht.prototype,"layerOptions",void 0),a([j("layerOptions")],ht.prototype,"writeLayerOptions",null),a([u({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],ht.prototype,"lastEditInfoEnabled",void 0),a([u()],ht.prototype,"outFields",void 0),a([u()],ht.prototype,"overwriteActions",void 0),a([u()],ht.prototype,"returnGeometry",void 0),a([u({json:{type:String}})],ht.prototype,"title",void 0),a([j("title")],ht.prototype,"writeTitle",null),ht=a([_("esri.PopupTemplate")],ht);const ea=ht,i6=Symbol("idFieldsProviderSymbol");function MV(t){return!!t&&i6 in t}function t7(t){return MV(t)?t[i6]:void 0}const Th=Symbol("popupProvider");function moe(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function IV(t){return!!t&&Th in t}function EV(t){return IV(t)?t[Th]:null}function Mh(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const r=[];for(const i of e.fieldNames)r.push(t.attributes[i]??null);return JSON.stringify(r)}}}function r7(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const r=e.uniqueIdFields.map(i=>t.attributes?.[i]);return JSON.stringify(r)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const i7=new be({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let PV=0,nt=class extends A{constructor(e){super(e),this.id="sym"+PV++,this.type=null,this.color=new ne([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};a([u({type:i7.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:i7.write,isRequired:!0}}})],nt.prototype,"type",void 0),a([u({type:ne,json:{write:{allowNull:!0}}})],nt.prototype,"color",void 0),a([F("color")],nt.prototype,"readColor",null),nt=a([_("esri.symbols.Symbol")],nt);var cm;let ir=cm=class extends nt{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map(s=>{const n=s.valueExpressionInfo;return n?lr(t,e,null,n.expression):null});await Promise.all(i)}}}clone(){return new cm({data:P(this.data)})}hash(){return zR(JSON.stringify(this.data)).toString()}};a([u({json:{write:!1}})],ir.prototype,"color",void 0),a([u({json:{write:!0}})],ir.prototype,"data",void 0),a([F("data",["symbol"])],ir.prototype,"readData",null),a([j("data",{})],ir.prototype,"writeData",null),a([X({CIMSymbolReference:"cim"},{readOnly:!0})],ir.prototype,"type",void 0),ir=cm=a([_("esri.symbols.CIMSymbol")],ir);let br=class extends A{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,r,i){e||(r[i]=e)}};a([u({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],br.prototype,"enabled",void 0),a([j("enabled")],br.prototype,"writeEnabled",null),a([u({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],br.prototype,"type",void 0),br=a([_("esri.symbols.Symbol3DLayer")],br);function RV(t,e){const r=e.transparency!=null?Gd(e.transparency):1,i=e.color;return i&&Array.isArray(i)?new ne([i[0]||0,i[1]||0,i[2]||0,r]):null}function OV(t,e){e.color=t.toJSON().slice(0,3);const r=L2(t.a);r!==0&&(e.transparency=r)}function ta(t){return{type:ne,nonNullable:t?.nonNullable,json:{type:[ve],default:null,read:{source:["color","transparency"],reader:RV},write:{target:{color:{type:[ve],isRequired:t?.colorRequiredOnWrite},transparency:{type:ve}},writer:OV}}}}const Js={type:Number,cast:_e,json:{write:!0}};function woe(t){return t==="emissive"?0:1}let _a=class extends A{constructor(e){super(e),this.color=new ne([0,0,0,1]),this.extensionLength=0,this.size=Vi(1)}clone(){}cloneProperties(){return{color:P(this.color),size:this.size,extensionLength:this.extensionLength}}};a([u({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],_a.prototype,"type",void 0),a([u(ta({colorRequiredOnWrite:!0}))],_a.prototype,"color",void 0),a([u({...Js,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],_a.prototype,"extensionLength",void 0),a([u(Js)],_a.prototype,"size",void 0),_a=a([_("esri.symbols.edges.Edges3D")],_a);const s6=_a;var pm;let i0=pm=class extends s6{constructor(t){super(t),this.type="sketch"}clone(){return new pm(this.cloneProperties())}};a([X({sketch:"sketch"},{readOnly:!0})],i0.prototype,"type",void 0),i0=pm=a([_("esri.symbols.edges.SketchEdges3D")],i0);const CV=i0;var dm;let s0=dm=class extends s6{constructor(t){super(t),this.type="solid"}clone(){return new dm(this.cloneProperties())}};a([X({solid:"solid"},{readOnly:!0})],s0.prototype,"type",void 0),s0=dm=a([_("esri.symbols.edges.SolidEdges3D")],s0);const k$=s0,F$={types:{key:"type",base:s6,typeMap:{solid:k$,sketch:CV}},json:{write:!0}};var hm;let Cu=hm=class extends A{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new hm(t)}};a([u({json:{write:!1}})],Cu.prototype,"strength",void 0),a([u({json:{write:!1}})],Cu.prototype,"source",void 0),Cu=hm=a([_("esri.symbols.support.Symbol3DEmissive")],Cu);var ym;let pi=ym=class extends A{constructor(t){super(t),this.color=null,this.emissive=new Cu({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new ym(t)}};a([u(ta())],pi.prototype,"color",void 0),a([u({type:Cu,json:{write:!1}})],pi.prototype,"emissive",void 0),pi=ym=a([_("esri.symbols.support.Symbol3DMaterial")],pi);var fm,tc;let Sn=(tc=class extends br{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new fm({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},fm=tc,tc);a([X({Extrude:"extrude"},{readOnly:!0})],Sn.prototype,"type",void 0),a([u({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Sn.prototype,"size",void 0),a([u({type:pi,json:{write:!0}})],Sn.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Sn.prototype,"castShadows",void 0),a([u(F$)],Sn.prototype,"edges",void 0),Sn=fm=a([_("esri.symbols.ExtrudeSymbol3DLayer")],Sn);let wd=class extends A{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],wd.prototype,"type",void 0),wd=a([_("esri.symbols.patterns.LinePattern3D")],wd);const kV=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var mm;const FV=Wt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Ba=mm=class extends wd{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new mm(t)}};a([u({type:["style"],json:{write:{isRequired:!0}}})],Ba.prototype,"type",void 0),a([X(FV),u({type:kV,json:{write:{isRequired:!0}}})],Ba.prototype,"style",void 0),Ba=mm=a([_("esri.symbols.patterns.LineStylePattern3D")],Ba);let bd=class extends A{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],bd.prototype,"type",void 0),bd=a([_("esri.symbols.patterns.Pattern3D")],bd);const AV=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var gm;let ku=gm=class extends bd{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new gm({style:this.style})}};a([u({type:["style"],json:{write:{isRequired:!0}}})],ku.prototype,"type",void 0),a([u({type:AV,json:{read:!0,write:{isRequired:!0}}})],ku.prototype,"style",void 0),ku=gm=a([_("esri.symbols.patterns.StylePattern3D")],ku);const LV={types:{key:"type",base:bd,typeMap:{style:ku}},json:{write:!0}},A$={types:{key:"type",base:wd,typeMap:{style:Ba}},json:{write:!0}},_d=new ne("white"),NV=new ne([255,255,255,0]);function DV(t){return t.r===0&&t.g===0&&t.b===0}var vm;let Sd=vm=class extends pi{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new vm(t)}};a([X({multiply:"multiply",replace:"replace",tint:"tint"})],Sd.prototype,"colorMixMode",void 0),Sd=vm=a([_("esri.symbols.support.Symbol3DFillMaterial")],Sd);function n6(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function jV(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function VV(t,e,r,i,s,n,o,l,c,d,h,y,f,m,g,v){return[t,e,r,i,s,n,o,l,c,d,h,y,f,m,g,v]}const zV=n6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:zV,clone:jV,create:n6,fromValues:VV},Symbol.toStringTag,{value:"Module"}));function qV(t){return t<=Zb?new Array(t).fill(0):new Float64Array(t)}function xoe(t){return(Jb(t)?t.byteLength/8:t.length)<=Zb?Array.from(t):new Float64Array(t)}function $oe(t,e,r){return Array.isArray(t)?t.slice(e,e+r):t.subarray(e,e+r)}function Toe(t){return[...t]}function Moe(t){const e=n6();for(let r=0;r<16;++r)e[r]=t[r];return e}function Ih(t=HV){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function o6(t,e,r,i,s,n,o=Ih()){return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function Ioe(t,e=Ih()){return UV(t,0,t.length/3,e)}function UV(t,e,r,i=Ih()){return L$(i,bm),GV(i,t,e,r),i}function Eoe(t,e=qV(24)){const[r,i,s,n,o,l]=t;return e[0]=r,e[1]=i,e[2]=s,e[3]=r,e[4]=i,e[5]=l,e[6]=r,e[7]=o,e[8]=s,e[9]=r,e[10]=o,e[11]=l,e[12]=n,e[13]=i,e[14]=s,e[15]=n,e[16]=i,e[17]=l,e[18]=n,e[19]=o,e[20]=s,e[21]=n,e[22]=o,e[23]=l,e}function Poe(t,e){const r=isFinite(t[2])||isFinite(t[5]);return new le(r?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Roe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Ooe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function Coe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function GV(t,e,r=0,i=e.length/3){let s=t[0],n=t[1],o=t[2],l=t[3],c=t[4],d=t[5];for(let h=0;h<i;h++)s=Math.min(s,e[r+3*h]),n=Math.min(n,e[r+3*h+1]),o=Math.min(o,e[r+3*h+2]),l=Math.max(l,e[r+3*h]),c=Math.max(c,e[r+3*h+1]),d=Math.max(d,e[r+3*h+2]);t[0]=s,t[1]=n,t[2]=o,t[3]=l,t[4]=c,t[5]=d}function koe(t,e,r){const i=e.length;let s=t[0],n=t[1],o=t[2],l=t[3],c=t[4],d=t[5];if(r)for(let h=0;h<i;h++){const y=e[h];s=Math.min(s,y[0]),n=Math.min(n,y[1]),o=Math.min(o,y[2]),l=Math.max(l,y[0]),c=Math.max(c,y[1]),d=Math.max(d,y[2])}else for(let h=0;h<i;h++){const y=e[h];s=Math.min(s,y[0]),n=Math.min(n,y[1]),l=Math.max(l,y[0]),c=Math.max(c,y[1])}t[0]=s,t[1]=n,t[2]=o,t[3]=l,t[4]=c,t[5]=d}function Foe(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function Eh(t){return t[0]>=t[3]?0:t[3]-t[0]}function Ph(t){return t[1]>=t[4]?0:t[4]-t[1]}function Rh(t){return t[2]>=t[5]?0:t[5]-t[2]}function Aoe(t){const e=Eh(t),r=Rh(t),i=Ph(t);return Math.sqrt(e*e+r*r+i*i)}function Loe(t,e=[0,0,0]){return e[0]=t[0]+Eh(t)/2,e[1]=t[1]+Ph(t)/2,e[2]=t[2]+Rh(t)/2,e}function Noe(t,e=[0,0,0]){return e[0]=Eh(t),e[1]=Ph(t),e[2]=Rh(t),e}function Doe(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function BV(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function joe(t,e){return e==null||BV(t,e)}function Voe(t,e,r,i,s=t){return s[0]=t[0]+e,s[1]=t[1]+r,s[2]=t[2]+i,s[3]=t[3]+e,s[4]=t[4]+r,s[5]=t[5]+i,s}function zoe(t,e,r=t){const i=t[0]+Eh(t)/2,s=t[1]+Ph(t)/2,n=t[2]+Rh(t)/2;return r[0]=i+(t[0]-i)*e,r[1]=s+(t[1]-s)*e,r[2]=n+(t[2]-n)*e,r[3]=i+(t[3]-i)*e,r[4]=s+(t[4]-s)*e,r[5]=n+(t[5]-n)*e,r}function qoe(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Uoe(t,e,r=t){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r!==t&&(r[3]=t[3],r[4]=t[4],r[5]=t[5]),r}function Goe(t,e,r=t){return r[3]=e[0],r[4]=e[1],r[5]=e[2],r!==t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),t}function L$(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Boe(t){return t?L$(t,bm):Ih(bm)}function Woe(t,e=Gr()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function Hoe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function WV(t,e,r,i,s){return t[0]=e,t[1]=r,t[2]=Number.NEGATIVE_INFINITY,t[3]=i,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function wm(t){return t.length===6}function Zoe(t){return Eh(t)===0&&Ph(t)===0&&Rh(t)===0}function Joe(t,e,r){if(t==null||e==null)return t===e;if(!wm(t)||!wm(e))return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}const bm=[1/0,1/0,1/0,-1/0,-1/0,-1/0],HV=[0,0,0,0,0,0];Ih();function Qoe(t,{isPrimitive:e,width:r,depth:i,height:s}){const n=e?10:1;if(r==null&&s==null&&i==null)return[n*t[0],n*t[1],n*t[2]];const o=Jc(r,i,s);let l;for(let c=0;c<3;c++){const d=o[c];if(d!=null){l=d/t[c];break}}for(let c=0;c<3;c++)o[c]==null&&(o[c]=t[c]*l);return o}const ZV=o6(-.5,-.5,-.5,.5,.5,.5),JV=o6(-.5,-.5,0,.5,.5,1),QV=o6(-.5,-.5,0,.5,.5,.5);function Yoe(t){switch(t){case"sphere":case"cube":case"diamond":return ZV;case"cylinder":case"cone":case"inverted-cone":return JV;case"tetrahedron":return QV;default:return}}const a6=["butt","square","round"],YV=[...a6,"none"],N$=["miter","bevel","round"];var _m;let Sa=_m=class extends A{constructor(t){super(t),this.color=new ne([0,0,0,1]),this.size=Vi(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new _m(t)}};a([u(ta({colorRequiredOnWrite:!0}))],Sa.prototype,"color",void 0),a([u({...Js,json:{write:{isRequired:!0}}})],Sa.prototype,"size",void 0),a([u(A$)],Sa.prototype,"pattern",void 0),a([u({type:a6,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Sa.prototype,"patternCap",void 0),Sa=_m=a([_("esri.symbols.support.Symbol3DOutline")],Sa);var n0,rc;let mr=(rc=class extends br{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new n0(e)}static fromSimpleFillSymbol(e){const r=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Ba({style:e.outline.style}):null,i={size:e.outline?.width??0,color:(e.outline?.color??_d).clone(),pattern:r};return r&&e.outline?.cap&&(i.patternCap=e.outline.cap),new n0({material:new Sd({color:(e.color??NV).clone()}),pattern:e.style&&e.style!=="solid"?new ku({style:e.style}):null,outline:i})}},n0=rc,rc);a([X({Fill:"fill"},{readOnly:!0})],mr.prototype,"type",void 0),a([u({type:Sd,json:{write:!0}})],mr.prototype,"material",void 0),a([u(LV)],mr.prototype,"pattern",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],mr.prototype,"castShadows",void 0),a([u({type:Sa,json:{write:!0}})],mr.prototype,"outline",void 0),a([u(F$)],mr.prototype,"edges",void 0),mr=n0=a([_("esri.symbols.FillSymbol3DLayer")],mr);var Sm;const KV=Wt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let xa=Sm=class extends A{constructor(t){super(t)}readHref(t,e,r){return t?ph(t,r):e.dataURI}writeHref(t,e,r,i){t&&(K5(t)?e.dataURI=t:(e.href=Ld(t,i),Wc(e.href)&&(e.href=Nd(e.href))))}clone(){return new Sm({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};a([u({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],xa.prototype,"href",void 0),a([F("href")],xa.prototype,"readHref",null),a([j("href",{href:{type:String},dataURI:{type:String}})],xa.prototype,"writeHref",null),a([X(KV)],xa.prototype,"primitive",void 0),xa=Sm=a([_("esri.symbols.support.IconSymbol3DLayerResource")],xa);const Koe="circle";let o0=class extends de(A){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};a([u({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],o0.prototype,"mode",void 0),o0=a([_("esri.symbols.support.OccludedVisibility")],o0);const D$=o0;var xm;let Fu=xm=class extends Z{constructor(t){super(t),this.x=0,this.y=0}clone(){return new xm({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};a([u({type:Number})],Fu.prototype,"x",void 0),a([u({type:Number})],Fu.prototype,"y",void 0),Fu=xm=a([_("esri.symbols.support.Symbol3DAnchorPosition2D")],Fu);var $m;let Fp=$m=class extends A{constructor(t){super(t),this.color=new ne([0,0,0,1]),this.size=Vi(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new $m(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};a([u(ta({colorRequiredOnWrite:!0}))],Fp.prototype,"color",void 0),a([u({...Js,json:{write:{isRequired:!0}}})],Fp.prototype,"size",void 0),Fp=$m=a([_("esri.symbols.support.Symbol3DIconOutline")],Fp);var tu,ic;let Nt=(ic=class extends br{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new tu({anchor:this.anchor,anchorPosition:P(this.anchorPosition),enabled:this.enabled,material:P(this.material),outline:P(this.outline),resource:P(this.resource),angle:this.angle,size:this.size,occludedVisibility:P(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const r=e.color||_d,i=s7(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||_d).clone()}:null;return new tu({size:e.size,angle:e.angle,resource:{primitive:ez(()=>N.getLogger(this.prototype),e.style)},material:{color:r},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const r=!e.color||DV(e.color)?_d:e.color,i=s7(e);return new tu({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:r.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new tu({resource:{href:Qb({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},tu=ic,ic);function s7(t){const e="width"in t?t.width:t.size,r="height"in t?t.height:t.size,i=n7(t.xoffset),s=n7(t.yoffset);return(i||s)&&e&&r?{x:-i/e,y:s/r}:null}function n7(t){return isFinite(t)?t:0}a([u({type:pi,json:{write:!0}})],Nt.prototype,"material",void 0),a([u({type:xa,json:{write:!0}})],Nt.prototype,"resource",void 0),a([X({Icon:"icon"},{readOnly:!0})],Nt.prototype,"type",void 0),a([u({...Js,json:{write:{isRequired:!0}}})],Nt.prototype,"size",void 0),a([X({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Nt.prototype,"anchor",void 0),a([u({type:Fu,json:{type:[Number],read:{reader:t=>new Fu({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Nt.prototype,"anchorPosition",void 0),a([u({type:Fp,json:{write:!0}})],Nt.prototype,"outline",void 0),a([u({type:Number,json:{write:!0,default:0}})],Nt.prototype,"angle",void 0),a([u({type:D$})],Nt.prototype,"occludedVisibility",void 0),Nt=tu=a([_("esri.symbols.IconSymbol3DLayer")],Nt);const XV={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function ez(t,e){return XV[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const tz=["begin","end","begin-end"],j$=["arrow","circle","square","diamond","cross","x"];let kn=class extends de(A){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],kn.prototype,"type",void 0),a([u({type:tz,json:{default:"begin-end",write:!0}})],kn.prototype,"placement",void 0),a([u({type:j$,json:{default:"arrow",write:!0}})],kn.prototype,"style",void 0),a([u({type:ne,json:{type:[ve],default:null,write:!0}})],kn.prototype,"color",void 0),kn=a([_("esri.symbols.LineStyleMarker3D")],kn);var a0,sc;let fr=(sc=class extends br{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Vi(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new a0(e)}static fromSimpleLineSymbol(e){const r={enabled:!0,size:e.width??Vi(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Ba({style:e.style}):null,material:new pi({color:(e.color||_d).clone()}),marker:e.marker?new kn({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new a0(r)}},a0=sc,sc);a([u({type:pi,json:{write:!0}})],fr.prototype,"material",void 0),a([X({Line:"line"},{readOnly:!0})],fr.prototype,"type",void 0),a([u({type:N$,json:{write:!0,default:"miter"}})],fr.prototype,"join",void 0),a([u({type:a6,json:{write:!0,default:"butt"}})],fr.prototype,"cap",void 0),a([u({...Js,json:{write:{isRequired:!0}}})],fr.prototype,"size",void 0),a([u(A$)],fr.prototype,"pattern",void 0),a([u({types:{key:"type",base:kn,typeMap:{style:kn}},json:{write:!0}})],fr.prototype,"marker",void 0),fr=a0=a([_("esri.symbols.LineSymbol3DLayer")],fr);var Tm;const rz=Wt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Ap=Tm=class extends A{clone(){return new Tm({href:this.href,primitive:this.primitive})}};a([u({type:String,json:{read:tg,write:Dd}})],Ap.prototype,"href",void 0),a([X(rz)],Ap.prototype,"primitive",void 0),Ap=Tm=a([_("esri.symbols.support.ObjectSymbol3DLayerResource")],Ap);const tae="sphere";var Mm;let Na=Mm=class extends Z{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Mm({x:this.x,y:this.y,z:this.z})}};a([u({type:Number})],Na.prototype,"x",void 0),a([u({type:Number})],Na.prototype,"y",void 0),a([u({type:Number})],Na.prototype,"z",void 0),Na=Mm=a([_("esri.symbols.support.Symbol3DAnchorPosition3D")],Na);var Im,nc;let Lt=(nc=class extends br{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new Im({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},Im=nc,nc);a([u({type:pi,json:{write:!0}})],Lt.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Lt.prototype,"castShadows",void 0),a([u({type:Ap,json:{write:!0}})],Lt.prototype,"resource",void 0),a([X({Object:"object"},{readOnly:!0})],Lt.prototype,"type",void 0),a([u({type:Number,json:{write:!0}})],Lt.prototype,"width",void 0),a([u({type:Number,json:{write:!0}})],Lt.prototype,"height",void 0),a([u({type:Number,json:{write:!0}})],Lt.prototype,"depth",void 0),a([X({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Lt.prototype,"anchor",void 0),a([u({type:Na,json:{type:[Number],read:{reader:t=>new Na({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Lt.prototype,"anchorPosition",void 0),a([u({type:Number,json:{write:!0}})],Lt.prototype,"heading",void 0),a([u({type:Number,json:{write:!0}})],Lt.prototype,"tilt",void 0),a([u({type:Number,json:{write:!0}})],Lt.prototype,"roll",void 0),a([u({readOnly:!0})],Lt.prototype,"isPrimitive",null),Lt=Im=a([_("esri.symbols.ObjectSymbol3DLayer")],Lt);var Em,oc;let qt=(oc=class extends br{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,r){return e??(r.height==null&&r.size!=null?r.size:void 0)}readHeight(e,r){return e??(r.width==null&&r.size!=null?r.size:void 0)}clone(){return new Em({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},Em=oc,oc);a([u({type:pi,json:{write:!0}})],qt.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qt.prototype,"castShadows",void 0),a([X({Path:"path"},{readOnly:!0})],qt.prototype,"type",void 0),a([u({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],qt.prototype,"profile",void 0),a([u({type:N$,nonNullable:!0,json:{write:!0,default:"miter"}})],qt.prototype,"join",void 0),a([u({type:YV,nonNullable:!0,json:{write:!0,default:"butt"}})],qt.prototype,"cap",void 0),a([u({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],qt.prototype,"width",void 0),a([F("width",["width","size","height"])],qt.prototype,"readWidth",null),a([u({type:Number,json:{write:!0}})],qt.prototype,"height",void 0),a([F("height",["height","size","width"])],qt.prototype,"readHeight",null),a([u({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],qt.prototype,"anchor",void 0),a([u({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],qt.prototype,"profileRotation",void 0),qt=Em=a([_("esri.symbols.PathSymbol3DLayer")],qt);const iz=["none","underline","line-through"],sz=["normal","italic","oblique"],nz=["normal","lighter","bold","bolder"],V$={type:Number,cast:t=>{const e=Vr(t);return e===0?1:gi(e,.1,4)},nonNullable:!0},oz=["left","right","center"],az=["baseline","top","middle","bottom"],z$={type:oz,nonNullable:!0},q$={type:az,nonNullable:!0},rae=8;var Pm;let Ri=Pm=class extends A{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return _e(t)}clone(){return new Pm({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};a([u({type:iz,json:{default:"none",write:!0}})],Ri.prototype,"decoration",void 0),a([u({type:String,json:{write:!0}})],Ri.prototype,"family",void 0),a([u({type:Number,json:{write:{overridePolicy:(t,e,r)=>({enabled:!r||!r.textSymbol3D})}}})],Ri.prototype,"size",void 0),a([xe("size")],Ri.prototype,"castSize",null),a([u({type:sz,json:{default:"normal",write:!0}})],Ri.prototype,"style",void 0),a([u({type:nz,json:{default:"normal",write:!0}})],Ri.prototype,"weight",void 0),Ri=Pm=a([_("esri.symbols.Font")],Ri);var Rm;let Au=Rm=class extends A{constructor(){super(...arguments),this.color=new ne([0,0,0,1]),this.size=0}clone(){const t={color:P(this.color),size:this.size};return new Rm(t)}};a([u(ta())],Au.prototype,"color",void 0),a([u(Js)],Au.prototype,"size",void 0),Au=Rm=a([_("esri.symbols.support.Symbol3DHalo")],Au);let xd=class extends de(A){constructor(e){super(e),this.color=null}};a([u(ta())],xd.prototype,"color",void 0),xd=a([_("esri.symbols.support.Symbol3DTextBackground")],xd);var l0,ac;let gt=(ac=class extends br{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,r,i,s){const n={...s,textSymbol3D:!0};r.font=e.write({},n),delete r.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new l0({enabled:this.enabled,font:P(this.font),halo:P(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:P(this.background),occludedVisibility:P(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new l0({font:e.font!=null?e.font.clone():new Ri,halo:lz(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new pi({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new xd({color:e.backgroundColor.clone()}):null})}},l0=ac,ac);function lz(t,e){return t&&e!=null&&e>0?new Au({color:P(t),size:e}):null}a([u({type:Ri,json:{write:!0}})],gt.prototype,"font",null),a([j("font")],gt.prototype,"writeFont",null),a([u({type:Au,json:{write:!0}})],gt.prototype,"halo",void 0),a([u({...z$,json:{default:"center",write:!0}})],gt.prototype,"horizontalAlignment",void 0),a([u({...V$,json:{default:1,write:!0}})],gt.prototype,"lineHeight",void 0),a([u({type:pi,json:{write:!0}})],gt.prototype,"material",void 0),a([u({type:xd,json:{write:!0}})],gt.prototype,"background",void 0),a([u(Js)],gt.prototype,"size",null),a([u({type:String,json:{write:!0}})],gt.prototype,"text",void 0),a([X({Text:"text"},{readOnly:!0})],gt.prototype,"type",void 0),a([u({...q$,json:{default:"baseline",write:!0}})],gt.prototype,"verticalAlignment",void 0),a([u({type:D$})],gt.prototype,"occludedVisibility",void 0),gt=l0=a([_("esri.symbols.TextSymbol3DLayer")],gt);var Om,lc;let xn=(lc=class extends br{constructor(e){super(e),this.color=Cm.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Om({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},Om=lc,lc);a([u({type:ne,nonNullable:!0,json:{type:[ve],write:(t,e,r)=>e[r]=t.toArray(1),default:()=>Cm.clone(),defaultEquals:t=>t.toCss(!0)===Cm.toCss(!0)}})],xn.prototype,"color",void 0),a([X({Water:"water"},{readOnly:!0})],xn.prototype,"type",void 0),a([u({type:["small","medium","large"],json:{write:!0,default:"medium"}})],xn.prototype,"waterbodySize",void 0),a([u({type:Number,json:{write:!0,default:null}})],xn.prototype,"waveDirection",void 0),a([u({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],xn.prototype,"waveStrength",void 0),xn=Om=a([_("esri.symbols.WaterSymbol3DLayer")],xn);const Cm=new ne([0,119,190]);var km;let Fn=km=class extends Z{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new km({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};a([u({type:String})],Fn.prototype,"name",void 0),a([u({type:String})],Fn.prototype,"styleUrl",void 0),a([u({type:String})],Fn.prototype,"styleName",void 0),a([u({type:D})],Fn.prototype,"portal",void 0),Fn=km=a([_("esri.symbols.support.StyleOrigin")],Fn);var Fm;let $d=Fm=class extends Z{constructor(){super(...arguments),this.url=""}clone(){return new Fm({url:this.url})}};a([u({type:String})],$d.prototype,"url",void 0),$d=Fm=a([_("esri.symbols.support.Thumbnail")],$d);const U$={icon:Nt,object:Lt,line:fr,path:qt,fill:mr,extrude:Sn,text:gt,water:xn},uz=q.ofType({base:br,key:"type",typeMap:U$,errorContext:"symbol-layer"});let Lr=class extends nt{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r?.type,s=i||q;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&N.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){qs(e,this._get("symbolLayers"))}readStyleOrigin(e,r,i){if(e.styleUrl&&e.name){const s=ph(e.styleUrl,i);return new Fn({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new Fn({portal:i?.portal||D.getDefault(),styleName:e.styleName,name:e.name});i?.messages&&i.messages.push(new hs("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,r,i,s){if(e.styleUrl&&e.name){let n=Ld(e.styleUrl,s);Wc(n)&&(n=Nd(n)),r.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&s?.portal&&!Yb(e.portal.restUrl,s.portal.restUrl)?s?.messages&&s.messages.push(new hs("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof br||e&&U$[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};a([u({json:{read:!1,write:!1}})],Lr.prototype,"color",null),a([u({type:uz,nonNullable:!0,json:{write:!0}}),xe(c_)],Lr.prototype,"symbolLayers",null),a([u({type:Fn})],Lr.prototype,"styleOrigin",void 0),a([F("styleOrigin")],Lr.prototype,"readStyleOrigin",null),a([j("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Lr.prototype,"writeStyleOrigin",null),a([u({type:$d,json:{read:!1}})],Lr.prototype,"thumbnail",void 0),a([u({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Lr.prototype,"type",void 0),Lr=a([_("esri.symbols.Symbol3D")],Lr);let Lu=class extends A{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};a([u({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Lu.prototype,"type",void 0),a([u({readOnly:!0})],Lu.prototype,"visible",void 0),Lu=a([_("esri.symbols.callouts.Callout3D")],Lu);var Am;let u0=Am=class extends A{constructor(t){super(t),this.color=new ne("white")}clone(){return new Am({color:P(this.color)})}};a([u(ta({colorRequiredOnWrite:!0}))],u0.prototype,"color",void 0),u0=Am=a([_("esri.symbols.callouts.LineCallout3DBorder")],u0);const cz=u0;var Lm;let $n=Lm=class extends Lu{constructor(t){super(t),this.type="line",this.color=new ne([0,0,0,1]),this.size=Vi(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Lm({color:P(this.color),size:this.size,border:P(this.border)})}};a([X({line:"line"})],$n.prototype,"type",void 0),a([u(ta({colorRequiredOnWrite:!0}))],$n.prototype,"color",void 0),a([u({...Js,json:{write:{isRequired:!0}}})],$n.prototype,"size",void 0),a([u({type:cz,json:{write:!0}})],$n.prototype,"border",void 0),a([u({readOnly:!0})],$n.prototype,"visible",null),$n=Lm=a([_("esri.symbols.callouts.LineCallout3D")],$n);function l6(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function G$(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!l6(t)}function oae(t){return t.type==="point-3d"||t.type==="label-3d"}function aae(t){return t.horizontalAlignment==="center"}const B$={types:{key:"type",base:Lu,typeMap:{line:$n}},json:{write:!0}};var Nm;let Eo=Nm=class extends A{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new Nm({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};a([u({...Js,json:{write:{isRequired:!0}}})],Eo.prototype,"screenLength",void 0),a([u({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Eo.prototype,"minWorldLength",void 0),a([u({type:Number,json:{write:!0}})],Eo.prototype,"maxWorldLength",void 0),Eo=Nm=a([_("esri.symbols.support.Symbol3DVerticalOffset")],Eo);var c0;const W$=q.ofType({base:null,key:"type",typeMap:{text:gt}});let ss=c0=class extends Lr{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new W$,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return G$(this)}hasVisibleVerticalOffset(){return l6(this)}clone(){return new c0({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail),callout:P(this.callout),verticalOffset:P(this.verticalOffset)})}static fromTextSymbol(t){return new c0({symbolLayers:new q([gt.fromTextSymbol(t)])})}};a([u({type:Eo,json:{write:!0}})],ss.prototype,"verticalOffset",void 0),a([u(B$)],ss.prototype,"callout",void 0),a([u({json:{read:!1,write:!1}})],ss.prototype,"styleOrigin",void 0),a([u({type:W$})],ss.prototype,"symbolLayers",void 0),a([X({LabelSymbol3D:"label-3d"},{readOnly:!0})],ss.prototype,"type",void 0),ss=c0=a([_("esri.symbols.LabelSymbol3D")],ss);var p0;const H$=q.ofType({base:null,key:"type",typeMap:{line:fr,path:qt}}),pz=q.ofType({base:null,key:"type",typeMap:{line:fr,path:qt}});let ds=p0=class extends Lr{constructor(t){super(t),this.symbolLayers=new H$,this.type="line-3d"}clone(){return new p0({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleLineSymbol(t){return new p0({symbolLayers:new q([fr.fromSimpleLineSymbol(t)])})}};a([u({type:H$,json:{type:pz}})],ds.prototype,"symbolLayers",void 0),a([X({LineSymbol3D:"line-3d"},{readOnly:!0})],ds.prototype,"type",void 0),ds=p0=a([_("esri.symbols.LineSymbol3D")],ds);var d0;const Z$=q.ofType({base:null,key:"type",typeMap:{fill:mr}});let jn=d0=class extends Lr{constructor(t){super(t),this.symbolLayers=new Z$,this.type="mesh-3d"}clone(){return new d0({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleFillSymbol(t){return new d0({symbolLayers:new q([mr.fromSimpleFillSymbol(t)])})}};a([u({type:Z$})],jn.prototype,"symbolLayers",void 0),a([X({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],jn.prototype,"type",void 0),jn=d0=a([_("esri.symbols.MeshSymbol3D")],jn);let Lp=class extends nt{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};a([X({esriSLS:"simple-line"},{readOnly:!0})],Lp.prototype,"type",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Lp.prototype,"width",void 0),Lp=a([_("esri.symbols.LineSymbol")],Lp);var Dm;let Ss=Dm=class extends A{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,r,i){e[r]=i?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,r,i){i?.origin==="web-map"||(e[r]=t)}clone(){return new Dm({color:P(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};a([u({type:["begin","end","begin-end"],json:{write:!0}})],Ss.prototype,"placement",void 0),a([X({"line-marker":"line-marker"},{readOnly:!0}),u({json:{origins:{"web-map":{write:!1}}}})],Ss.prototype,"type",void 0),a([u({type:j$})],Ss.prototype,"style",void 0),a([j("style")],Ss.prototype,"writeStyle",null),a([u({type:ne,value:null,json:{write:{allowNull:!0}}})],Ss.prototype,"color",null),a([F("color")],Ss.prototype,"readColor",null),a([j("color")],Ss.prototype,"writeColor",null),Ss=Dm=a([_("esri.symbols.LineSymbolMarker")],Ss);const dz=Ss;var jm;const H4=new be({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let pt=jm=class extends Lp{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,r,i,s,n){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),r!=null&&(o.width=_e(r)),i!=null&&(o.cap=i),s!=null&&(o.join=s),n!=null&&(o.miterLimit=_e(n)),o}clone(){return new jm({color:P(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};a([X({esriSLS:"simple-line"},{readOnly:!0})],pt.prototype,"type",void 0),a([u({type:H4.apiValues,json:{read:H4.read,write:H4.write}})],pt.prototype,"style",void 0),a([u({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,r)=>({enabled:t!=="round"&&r?.origin==null})}}})],pt.prototype,"cap",void 0),a([u({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,r)=>({enabled:t!=="round"&&r?.origin==null})}}})],pt.prototype,"join",void 0),a([u({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":dz}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],pt.prototype,"marker",void 0),a([u({type:Number,json:{read:!1,write:!1}})],pt.prototype,"miterLimit",void 0),pt=jm=a([_("esri.symbols.SimpleLineSymbol")],pt);let Nu=class extends nt{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};a([u({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":pt}},json:{default:null,write:!0}})],Nu.prototype,"outline",void 0),a([u({type:["simple-fill","picture-fill"],readOnly:!0})],Nu.prototype,"type",void 0),Nu=a([_("esri.symbols.FillSymbol")],Nu);function hz(t,e,r){return e.imageData?Qb({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):J$(e.url,r)}function J$(t,e){if(!Wc(t)){const r=fz(e);if(r)return cl(r,"images",t)}return ph(t,e)}function yz(t,e,r,i){if(K5(t)){const s=Kb(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,r&&r.imageData===e.imageData&&r.url&&Dd(r.url,e,"url",i)}else Dd(t,e,"url",i)}const Q$={json:{read:{source:["imageData","url"],reader:hz},write:{writer(t,e,r,i){yz(t,e,this.source,i)}}}},Y$={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,r){const i={};return e.imageData&&(i.imageData=e.imageData),e.contentType&&(i.contentType=e.contentType),e.url&&(i.url=J$(e.url,r)),i}}}};function fz(t){if(!t)return null;const{origin:e,layer:r}=t;if(e!=="service"&&e!=="portal-item")return null;const i=r?.type;return i==="feature"||i==="stream"?r.parsedUrl?.path:i==="map-image"||i==="tile"?t.url?.path:null}var Vm;let Ar=Vm=class extends Nu{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,r,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),r!=null&&(s.width=_e(r)),i!=null&&(s.height=_e(i)),s}clone(){const t=new Vm({color:P(this.color),height:this.height,outline:P(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",P(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};a([X({esriPFS:"picture-fill"},{readOnly:!0})],Ar.prototype,"type",void 0),a([u(Q$)],Ar.prototype,"url",void 0),a([u({type:Number,json:{write:!0}})],Ar.prototype,"xscale",void 0),a([u({type:Number,json:{write:!0}})],Ar.prototype,"yscale",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Ar.prototype,"width",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Ar.prototype,"height",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Ar.prototype,"xoffset",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Ar.prototype,"yoffset",void 0),a([u(Y$)],Ar.prototype,"source",void 0),Ar=Vm=a([_("esri.symbols.PictureFillSymbol")],Ar);let Tn=class extends nt{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};a([u({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Tn.prototype,"angle",void 0),a([u({type:["simple-marker","picture-marker"],readOnly:!0})],Tn.prototype,"type",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Tn.prototype,"xoffset",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Tn.prototype,"yoffset",void 0),a([u({cast:t=>t==="auto"?t:Vr(_e(t)),json:{write:!0}})],Tn.prototype,"size",void 0),Tn=a([_("esri.symbols.MarkerSymbol")],Tn);var zm;let yr=zm=class extends Tn{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const i={};return t&&(i.url=t),e!=null&&(i.width=_e(e)),r!=null&&(i.height=_e(r)),i}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new zm({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",P(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};a([u({json:{write:!1}})],yr.prototype,"color",void 0),a([X({esriPMS:"picture-marker"},{readOnly:!0})],yr.prototype,"type",void 0),a([u(Q$)],yr.prototype,"url",void 0),a([u(Y$)],yr.prototype,"source",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],yr.prototype,"height",void 0),a([F("height",["height","size"])],yr.prototype,"readHeight",null),a([u({type:Number,cast:_e,json:{write:!0}})],yr.prototype,"width",void 0),a([u({json:{write:!1}})],yr.prototype,"size",void 0),yr=zm=a([_("esri.symbols.PictureMarkerSymbol")],yr);var $a;const K$=q.ofType({base:null,key:"type",typeMap:{icon:Nt,object:Lt,text:gt}});let vr=$a=class extends Lr{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new K$,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return G$(this)}hasVisibleVerticalOffset(){return l6(this)}clone(){return new $a({verticalOffset:P(this.verticalOffset),callout:P(this.callout),styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new $a({symbolLayers:new q([Nt.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new $a({symbolLayers:new q([Nt.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const r=t.data.symbol;return new $a(r?.callout?{symbolLayers:new q([Nt.fromCIMSymbol(t)]),callout:new $n({size:.5,color:new ne([0,0,0])}),verticalOffset:new Eo({screenLength:40})}:{symbolLayers:new q([Nt.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new $a({symbolLayers:new q([gt.fromTextSymbol(t)])})}};a([u({type:Eo,json:{write:!0}})],vr.prototype,"verticalOffset",void 0),a([u(B$)],vr.prototype,"callout",void 0),a([u({type:K$,json:{origins:{"web-scene":{write:!0}}}})],vr.prototype,"symbolLayers",void 0),a([X({PointSymbol3D:"point-3d"},{readOnly:!0})],vr.prototype,"type",void 0),vr=$a=a([_("esri.symbols.PointSymbol3D")],vr);var Np;const X$=q.ofType({base:null,key:"type",typeMap:{extrude:Sn,fill:mr,icon:Nt,line:fr,object:Lt,text:gt,water:xn}});let Ni=Np=class extends Lr{constructor(t){super(t),this.symbolLayers=new X$,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&E9(N.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&E9(N.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(ys(()=>this.symbolLayers,"after-add",({item:e})=>t(e),It))}clone(){return new Np({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromJSON(t){const e=new Np;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),i=e.symbolLayers.at(1);!i.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:i.material!=null?i.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new Np({symbolLayers:new q([mr.fromSimpleFillSymbol(t)])})}};a([u({type:X$,json:{write:!0}})],Ni.prototype,"symbolLayers",void 0),a([X({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Ni.prototype,"type",void 0),Ni=Np=a([_("esri.symbols.PolygonSymbol3D")],Ni);var qm;const Z4=new be({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let li=qm=class extends Nu{constructor(...t){super(...t),this.color=new ne([0,0,0,.25]),this.outline=new pt,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,r){if(t&&typeof t!="string")return t;const i={};return t&&(i.style=t),e&&(i.outline=e),r&&(i.color=r),i}clone(){return new qm({color:P(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};a([u()],li.prototype,"color",void 0),a([u()],li.prototype,"outline",void 0),a([X({esriSFS:"simple-fill"},{readOnly:!0})],li.prototype,"type",void 0),a([u({type:Z4.apiValues,json:{read:Z4.read,write:Z4.write}})],li.prototype,"style",void 0),li=qm=a([_("esri.symbols.SimpleFillSymbol")],li);var Um;const J4=new be({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Tt=Um=class extends Tn{constructor(...t){super(...t),this.color=new ne([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new pt}normalizeCtorArgs(t,e,r,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=_e(e)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new Um({angle:this.angle,color:P(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};a([u()],Tt.prototype,"color",void 0),a([j("color")],Tt.prototype,"writeColor",null),a([X({esriSMS:"simple-marker"},{readOnly:!0})],Tt.prototype,"type",void 0),a([u()],Tt.prototype,"size",void 0),a([u({type:J4.apiValues,json:{read:J4.read,write:J4.write}})],Tt.prototype,"style",void 0),a([u({type:String,json:{write:!0}})],Tt.prototype,"path",null),a([u({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":pt}},json:{default:null,write:!0}})],Tt.prototype,"outline",void 0),Tt=Um=a([_("esri.symbols.SimpleMarkerSymbol")],Tt);var Gm;let Ee=Gm=class extends nt{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Ri,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,r){if(t&&typeof t!="string")return t;const i={};return t&&(i.text=t),e&&(i.font=e),r&&(i.color=r),i}writeLineWidth(t,e,r,i){i&&typeof i!="string"?i.origin:e[r]=t}castLineWidth(t){return _e(t)}writeLineHeight(t,e,r,i){i&&typeof i!="string"?i.origin:e[r]=t}clone(){return new Gm({angle:this.angle,backgroundColor:P(this.backgroundColor),borderLineColor:P(this.borderLineColor),borderLineSize:this.borderLineSize,color:P(this.color),font:this.font&&this.font.clone(),haloColor:P(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};a([u({type:ne,json:{write:!0}})],Ee.prototype,"backgroundColor",void 0),a([u({type:ne,json:{write:!0}})],Ee.prototype,"borderLineColor",void 0),a([u({type:Number,json:{write:!0},cast:_e})],Ee.prototype,"borderLineSize",void 0),a([u({type:Ri,json:{write:!0}})],Ee.prototype,"font",void 0),a([u({...z$,json:{write:!0}})],Ee.prototype,"horizontalAlignment",void 0),a([u({type:Boolean,json:{write:!0}})],Ee.prototype,"kerning",void 0),a([u({type:ne,json:{write:!0}})],Ee.prototype,"haloColor",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Ee.prototype,"haloSize",void 0),a([u({type:Boolean,json:{write:!0}})],Ee.prototype,"rightToLeft",void 0),a([u({type:Boolean,json:{write:!0}})],Ee.prototype,"rotated",void 0),a([u({type:String,json:{write:!0}})],Ee.prototype,"text",void 0),a([X({esriTS:"text"},{readOnly:!0})],Ee.prototype,"type",void 0),a([u({...q$,json:{write:!0}})],Ee.prototype,"verticalAlignment",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Ee.prototype,"xoffset",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Ee.prototype,"yoffset",void 0),a([u({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ee.prototype,"angle",void 0),a([u({type:Number,json:{write:!0}})],Ee.prototype,"width",void 0),a([u({type:Number})],Ee.prototype,"lineWidth",void 0),a([j("lineWidth")],Ee.prototype,"writeLineWidth",null),a([xe("lineWidth")],Ee.prototype,"castLineWidth",null),a([u(V$)],Ee.prototype,"lineHeight",void 0),a([j("lineHeight")],Ee.prototype,"writeLineHeight",null),Ee=Gm=a([_("esri.symbols.TextSymbol")],Ee);var Bm;let Ut=Bm=class extends nt{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:D.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new Bm({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){qR(N.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new M("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,r=e?this._fetchCacheKey:null;if(e!=null){const o=r&&e.get(r);if(o)return o.clone()}const{resolveWebStyleSymbol:i}=await L(()=>import("./money-tides-webStyleSymbolUtils-SZ7aehUe.js"),__vite__mapDeps([201,202,3,1,2,4,5,10,11,12]));Re(t);const s=i(this,{portal:this.portal},t);s.catch(o=>{N.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const n=await s;return e?.set(r,n.clone()),n}};a([u({json:{write:!1}})],Ut.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],Ut.prototype,"styleName",void 0),a([u({type:D,json:{write:!1}})],Ut.prototype,"portal",void 0),a([u({type:String,json:{read:tg,write:Dd}})],Ut.prototype,"styleUrl",void 0),a([u({type:$d,json:{read:!1}})],Ut.prototype,"thumbnail",void 0),a([u({type:String,json:{write:!0}})],Ut.prototype,"name",void 0),a([X({styleSymbolReference:"web-style"},{readOnly:!0})],Ut.prototype,"type",void 0),a([u()],Ut.prototype,"_fetchCacheKey",null),Ut=Bm=a([_("esri.symbols.WebStyleSymbol")],Ut);function pae(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function u6(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ao={base:nt,key:"type",typeMap:{"simple-fill":li,"picture-fill":Ar,"picture-marker":yr,"simple-line":pt,"simple-marker":Tt,text:Ee,"label-3d":ss,"line-3d":ds,"mesh-3d":jn,"point-3d":vr,"polygon-3d":Ni,"web-style":Ut,cim:ir},errorContext:"symbol"},dae={base:nt,key:"type",typeMap:{"picture-marker":yr,"simple-marker":Tt,"point-3d":vr,cim:ir},errorContext:"symbol"},hae={base:nt,key:"type",typeMap:{"simple-line":pt,"line-3d":ds,cim:ir},errorContext:"symbol"},yae={base:nt,key:"type",typeMap:{"simple-fill":li,"picture-fill":Ar,"polygon-3d":Ni,cim:ir},errorContext:"symbol"},mz={base:nt,key:"type",typeMap:{"picture-marker":yr,"simple-marker":Tt,text:Ee,"web-style":Ut,cim:ir},errorContext:"symbol"},gz=dh({types:Ao}),eT={base:nt,key:"type",typeMap:{"simple-fill":li,"picture-fill":Ar,"picture-marker":yr,"simple-line":pt,"simple-marker":Tt,text:Ee,"line-3d":ds,"mesh-3d":jn,"point-3d":vr,"polygon-3d":Ni,"web-style":Ut,cim:ir},errorContext:"symbol"},vz={base:nt,key:"type",typeMap:{text:Ee,"label-3d":ss},errorContext:"symbol"},o7={base:nt,key:"type",typeMap:{"line-3d":ds,"mesh-3d":jn,"point-3d":vr,"polygon-3d":Ni,"web-style":Ut,cim:ir},errorContext:"symbol"},wz={base:nt,key:"type",typeMap:{"label-3d":ss},errorContext:"symbol"},tT=al(Ao);var Wm;function bz(t){if(!t)return null;const e={};for(const r in t){const i=Ho(t[r]);i&&(e[r]=i)}return Object.keys(e).length!==0?e:null}function _z(t){if(t==null)return null;const e={};for(const r in t){const i=t[r];i&&(e[r]=i.toJSON())}return Object.keys(e).length!==0?e:null}var uc;let et=(uc=class extends de(A){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:UR(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&GR(N.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const r=this._get("aggregateGeometries");JSON.stringify(r)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const r=this._get("attributes");r!==e&&(this._set("attributes",e),this._notifyLayer("attributes",r,e))}set geometry(e){const r=this._get("geometry");r!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",r,e))}set popupTemplate(e){const r=this._get("popupTemplate");r!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",r,e))}set symbol(e){const r=this._get("symbol");r!==e&&(this._set("symbol",e),this._notifyLayer("symbol",r,e))}get version(){return this._version}set visible(e){const r=this._get("visible");r!==e&&(this._set("visible",e),this._notifyLayer("visible",r,e))}cloneShallow(){return new Wm({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=EV(this.origin);if(r)return r.popupTemplate??(e?r.defaultPopupTemplate:null)??null;const i=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const s of[i,this.sourceLayer,this.layer])if(s&&typeof s=="object"){if("popupTemplate"in s&&s.popupTemplate)return s.popupTemplate;if(e&&"defaultPopupTemplate"in s&&s.defaultPopupTemplate!=null)return s.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,r){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=r,this._notifyLayer("attributes",i,r,e)}else this.attributes={[e]:r}}getObjectId(){const e=t7(this.origin);if(e)return r7(this,e);const r=this.sourceLayer??this.layer;return r?r7(this,r):null}getGlobalId(){const e=t7(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const r=this.sourceLayer??this.layer;return r&&"globalIdField"in r&&r.globalIdField?this.getAttribute(r.globalIdField):null}toJSON(){return{aggregateGeometries:_z(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Z5(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:r}=this;if(r?.type==="mesh"){const i={origin:r.origin,transform:r.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,r,i,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:r,newValue:i};e==="origin-transform"&&(n.action=s),e==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([ji(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:r})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===r||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=r,this.notifyMeshTransformChanged())}),ji(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,r)=>e===r,sync:!0})])}},Wm=uc,uc);a([u({value:null,json:{read:bz}})],et.prototype,"aggregateGeometries",null),a([u({value:null})],et.prototype,"attributes",null),a([u({value:null,types:xh,json:{read:Ho}})],et.prototype,"geometry",null),a([u({type:Boolean})],et.prototype,"isAggregate",void 0),a([u({clonable:!1})],et.prototype,"layer",void 0),a([u({clonable:"reference"})],et.prototype,"origin",void 0),a([u({type:ea,value:null})],et.prototype,"popupTemplate",null),a([u({clonable:"reference"})],et.prototype,"sourceLayer",void 0),a([u({value:null,types:Ao})],et.prototype,"symbol",null),a([u({clonable:!1,json:{read:!1,write:!1}})],et.prototype,"_version",void 0),a([u({type:Boolean,value:!0})],et.prototype,"visible",null),et=Wm=a([_("esri.Graphic")],et);let Td=class extends md{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};a([ug({Type:et,ensureType:Zr(et)})],Td.prototype,"itemType",void 0),Td=a([_("esri.support.GraphicsCollection")],Td);let cn=class extends Z{constructor(e){super(e),this.view=null,this.baseLayerViews=new q,this.groundLayerViews=new q,this.referenceLayerViews=new q,this._loadingHandle=ae(()=>this.view?.map?.basemap,r=>{r&&r.load().catch(()=>{})},or)}destroy(){this._set("view",null),this._loadingHandle=Ze(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.groundLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};a([u({constructOnly:!0})],cn.prototype,"view",void 0),a([u({readOnly:!0})],cn.prototype,"baseLayerViews",void 0),a([u({readOnly:!0})],cn.prototype,"groundLayerViews",void 0),a([u({readOnly:!0})],cn.prototype,"referenceLayerViews",void 0),a([u({readOnly:!0})],cn.prototype,"suspended",null),a([u({type:Boolean,readOnly:!0})],cn.prototype,"updating",null),cn=a([_("esri.views.BasemapView")],cn);const Sz=cn;let Kr=class extends Z{constructor(e){super(e),this.factor=1.5,this.offset=Et(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};a([u({type:Number})],Kr.prototype,"factor",void 0),a([u({nonNullable:!0})],Kr.prototype,"offset",void 0),a([u()],Kr.prototype,"position",void 0),a([u({type:Number,range:{min:0}})],Kr.prototype,"size",void 0),a([u()],Kr.prototype,"maskUrl",void 0),a([u()],Kr.prototype,"maskEnabled",void 0),a([u()],Kr.prototype,"overlayUrl",void 0),a([u()],Kr.prototype,"overlayEnabled",void 0),a([u({readOnly:!0})],Kr.prototype,"version",null),a([u({type:Boolean})],Kr.prototype,"visible",void 0),Kr=a([_("esri.views.Magnifier")],Kr);const rT=Kr;var Hm;let Wa=Hm=class extends A{constructor(t){super(t),this.name=null,this.code=null}clone(){return new Hm({name:this.name,code:this.code})}};a([u({type:String,json:{write:{isRequired:!0}}})],Wa.prototype,"name",void 0),a([u({type:[String,Number],json:{write:{isRequired:!0}}})],Wa.prototype,"code",void 0),Wa=Hm=a([_("esri.layers.support.CodedValue")],Wa);const xz=new be({inherited:"inherited",codedValue:"coded-value",range:"range"});let Lo=class extends A{constructor(e){super(e),this.name=null,this.type=null}};a([u({type:String,json:{write:!0}})],Lo.prototype,"name",void 0),a([X(xz),u({json:{write:{isRequired:!0}}})],Lo.prototype,"type",void 0),Lo=a([_("esri.layers.support.Domain")],Lo);var Zm,cc;let No=(cc=class extends Lo{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let r=null;if(this.codedValues){const i=String(e);this.codedValues.some(s=>(String(s.code)===i&&(r=s.name),!!r))}return r}clone(){return new Zm({codedValues:P(this.codedValues),name:this.name})}},Zm=cc,cc);a([u({type:[Wa],json:{write:{isRequired:!0}}})],No.prototype,"codedValues",void 0),a([X({codedValue:"coded-value"})],No.prototype,"type",void 0),No=Zm=a([_("esri.layers.support.CodedValueDomain")],No);var Jm,pc;let Md=(pc=class extends Lo{constructor(e){super(e),this.type="inherited"}clone(){return new Jm}},Jm=pc,pc);a([X({inherited:"inherited"})],Md.prototype,"type",void 0),Md=Jm=a([_("esri.layers.support.InheritedDomain")],Md);var Qm,dc;let Da=(dc=class extends Lo{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Qm({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},Qm=dc,dc);a([u({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,r){e[r]=[this.minValue||0,t]},isRequired:!0}}})],Da.prototype,"maxValue",void 0),a([u({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,r){e[r]=[t,this.maxValue||0]},isRequired:!0}}})],Da.prototype,"minValue",void 0),a([X({range:"range"})],Da.prototype,"type",void 0),Da=Qm=a([_("esri.layers.support.RangeDomain")],Da);const iT={key:"type",base:Lo,typeMap:{range:Da,"coded-value":No,inherited:Md}};function Y2(t){if(!t?.type)return null;switch(t.type){case"range":return Da.fromJSON(t);case"codedValue":return No.fromJSON(t);case"inherited":return Md.fromJSON(t)}return null}const $z=new be({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Ym;const Tz=new be({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var hc;let xt=(hc=class extends A{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return i?.value??null}readValueType(e,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return i?Tz.fromJSON(i.fieldValueType):null}clone(){return new Ym({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},Ym=hc,hc);a([u({type:String,json:{write:!0}})],xt.prototype,"alias",void 0),a([u({type:[String,Number],json:{write:{allowNull:!0}}})],xt.prototype,"defaultValue",void 0),a([u()],xt.prototype,"description",void 0),a([F("description")],xt.prototype,"readDescription",null),a([u({types:iT,json:{read:{reader:Y2},write:!0}})],xt.prototype,"domain",void 0),a([u({type:Boolean,json:{write:!0}})],xt.prototype,"editable",void 0),a([u({type:ve,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],xt.prototype,"length",void 0),a([u({type:String,json:{write:!0}})],xt.prototype,"name",void 0),a([u({type:Boolean,json:{write:!0}})],xt.prototype,"nullable",void 0),a([X($z)],xt.prototype,"type",void 0),a([u()],xt.prototype,"valueType",void 0),a([F("valueType",["description"])],xt.prototype,"readValueType",null),a([u({type:Boolean,json:{read:!1}})],xt.prototype,"visible",void 0),xt=Ym=a([_("esri.layers.support.Field")],xt);var Km;let Dn=Km=class extends A{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new Km({mapLayerId:t,gdbVersion:e})}};a([X({mapLayer:"map-layer"}),u({json:{write:{isRequired:!0}}})],Dn.prototype,"type",void 0),a([u({type:ve,json:{write:{isRequired:!0}}})],Dn.prototype,"mapLayerId",void 0),a([u({type:String,json:{write:!0}})],Dn.prototype,"gdbVersion",void 0),Dn=Km=a([_("esri.layers.support.source.MapLayerSource")],Dn);var Xm;let pn=Xm=class extends A{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:r,spatialReference:i,geometryType:s}=this,n={workspaceId:t,query:e,oidFields:r,spatialReference:i?.clone()??void 0,geometryType:s};return new Xm(n)}};a([X({queryTable:"query-table"}),u({json:{write:{isRequired:!0}}})],pn.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],pn.prototype,"workspaceId",void 0),a([u({type:String,json:{write:!0}})],pn.prototype,"query",void 0),a([u({type:String,json:{write:!0}})],pn.prototype,"oidFields",void 0),a([u({type:B,json:{write:!0}})],pn.prototype,"spatialReference",void 0),a([X(X0)],pn.prototype,"geometryType",void 0),pn=Xm=a([_("esri.layers.support.source.QueryTableDataSource")],pn);var e3;let ru=e3=class extends A{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new e3({workspaceId:t,dataSourceName:e})}};a([X({raster:"raster"}),u({json:{write:{isRequired:!0}}})],ru.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],ru.prototype,"dataSourceName",void 0),a([u({type:String,json:{write:!0}})],ru.prototype,"workspaceId",void 0),ru=e3=a([_("esri.layers.support.source.RasterDataSource")],ru);var t3;let Ta=t3=class extends A{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:r}=this;return new t3({workspaceId:t,gdbVersion:e,dataSourceName:r})}};a([X({table:"table"}),u({json:{write:{isRequired:!0}}})],Ta.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Ta.prototype,"workspaceId",void 0),a([u({type:String,json:{write:!0}})],Ta.prototype,"gdbVersion",void 0),a([u({type:String,json:{write:!0}})],Ta.prototype,"dataSourceName",void 0),Ta=t3=a([_("esri.layers.support.source.TableDataSource")],Ta);var r3,i3;const Mz=Wt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Xr=r3=class extends A{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,r){return a7()(t,e,r)}castLeftTableSource(t){return al(s3(),t)}readRightTableSource(t,e,r){return a7()(t,e,r)}castRightTableSource(t){return al(s3(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:r,rightTableSource:i,joinType:s}=this,n={leftTableKey:t,rightTableKey:e,leftTableSource:r?.clone()??void 0,rightTableSource:i?.clone()??void 0,joinType:s};return new r3(n)}};a([X({joinTable:"join-table"}),u({json:{write:{isRequired:!0}}})],Xr.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Xr.prototype,"leftTableKey",void 0),a([u({type:String,json:{write:!0}})],Xr.prototype,"rightTableKey",void 0),a([u({json:{write:!0}})],Xr.prototype,"leftTableSource",void 0),a([F("leftTableSource")],Xr.prototype,"readLeftTableSource",null),a([xe("leftTableSource")],Xr.prototype,"castLeftTableSource",null),a([u({json:{write:!0}})],Xr.prototype,"rightTableSource",void 0),a([F("rightTableSource")],Xr.prototype,"readRightTableSource",null),a([xe("rightTableSource")],Xr.prototype,"castRightTableSource",null),a([X(Mz)],Xr.prototype,"joinType",void 0),Xr=r3=a([_("esri.layers.support.source.JoinTableDataSource")],Xr);let Q4=null;function a7(){return Q4||(Q4=dh({types:s3()})),Q4}let Y4=null;function s3(){return Y4||(Y4={key:"type",base:null,typeMap:{"data-layer":gr,"map-layer":Dn}}),Y4}const Iz={key:"type",base:null,typeMap:{"join-table":Xr,"query-table":pn,raster:ru,table:Ta}};var yc;let gr=(yc=class extends A{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:r}=this;return new i3({fields:e,dataSource:r})}},i3=yc,yc);a([X({dataLayer:"data-layer"}),u({json:{write:{isRequired:!0}}})],gr.prototype,"type",void 0),a([u({type:[xt],json:{write:!0}})],gr.prototype,"fields",void 0),a([u({types:Iz,json:{write:!0}})],gr.prototype,"dataSource",void 0),gr=i3=a([_("esri.layers.support.source.DataLayerSource")],gr),gr.from=Zr(gr);let Ma=class extends de(A){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};a([u({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Ma.prototype,"onFields",void 0),a([u({type:String,json:{write:!0}})],Ma.prototype,"operator",void 0),a([u({type:String,json:{write:!0}})],Ma.prototype,"searchTerm",void 0),a([u({type:String,json:{write:!0}})],Ma.prototype,"searchType",void 0),Ma=a([_("esri.rest.support.FullTextSearch")],Ma);const Ez=Ma;var n3;const l7=new be({upperLeft:"upper-left",lowerLeft:"lower-left"});let $o=n3=class extends A{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new n3(P({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};a([u({type:le,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],$o.prototype,"extent",void 0),a([u({type:["view","edit"],json:{write:!0}})],$o.prototype,"mode",void 0),a([u({type:String,json:{read:l7.read,write:l7.write}})],$o.prototype,"originPosition",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],$o.prototype,"tolerance",void 0),$o=n3=a([_("esri.rest.support.QuantizationParameters")],$o);const Pz=t=>{const e=t;let r=class extends e{};return r=a([_("esri.rest.support.QueryMixin")],r),r},Rz=new be({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var o3;const u7=new be({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Yi=o3=class extends A{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=P(t))}clone(){return new o3({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:P(this.statisticParameters)})}};a([u({type:Number,json:{write:!0}})],Yi.prototype,"maxPointCount",void 0),a([u({type:Number,json:{write:!0}})],Yi.prototype,"maxRecordCount",void 0),a([u({type:Number,json:{write:!0}})],Yi.prototype,"maxVertexCount",void 0),a([u({type:String,json:{write:!0}})],Yi.prototype,"onStatisticField",void 0),a([u({type:String,json:{write:!0}})],Yi.prototype,"outStatisticFieldName",void 0),a([u({type:String,json:{read:{source:"statisticType",reader:u7.read},write:{target:"statisticType",writer:u7.write}}})],Yi.prototype,"statisticType",void 0),a([u({type:Object})],Yi.prototype,"statisticParameters",void 0),a([j("statisticParameters")],Yi.prototype,"writeStatisticParameters",null),Yi=o3=a([_("esri.rest.support.StatisticDefinition")],Yi);var h0;const Oz=new be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var il;let H=(il=class extends Pz(A){static from(e){return Tc(h0,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,r){r.historicMoment=e&&e.getTime()}writeParameterValues(e,r){if(e){const i={};for(const s in e){const n=e[s];Array.isArray(n)?i[s]=n.map(o=>o instanceof Date?o.getTime():o):n instanceof Date?i[s]=n.getTime():i[s]=n}r.parameterValues=i}}writeStart(e,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,r.where="1=1"}writeWhere(e,r){r.where=e||"1=1"}clone(){return new h0(P({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},h0=il,il.MAX_MAX_RECORD_COUNT_FACTOR=5,il);a([u({json:{write:!0}})],H.prototype,"aggregateIds",void 0),a([u({type:Boolean,json:{write:!0}})],H.prototype,"cacheHint",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],H.prototype,"compactGeometryEnabled",void 0),a([u({json:{write:!0}})],H.prototype,"datumTransformation",void 0),a([xe("datumTransformation")],H.prototype,"castDatumTransformation",null),a([u({type:Boolean,json:{default:!1,write:!0}})],H.prototype,"defaultSpatialReferenceEnabled",void 0),a([u({type:Number,json:{write:!0}})],H.prototype,"distance",void 0),a([u({type:gr,json:{write:!0}})],H.prototype,"dynamicDataSource",void 0),a([u({type:String,json:{write:!0}})],H.prototype,"formatOf3DObjects",void 0),a([u({type:[Ez],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],H.prototype,"fullText",void 0),a([u({type:String,json:{write:!0}})],H.prototype,"gdbVersion",void 0),a([u({types:xh,json:{read:Ho,write:!0}})],H.prototype,"geometry",void 0),a([u({type:Number,json:{write:!0}})],H.prototype,"geometryPrecision",void 0),a([u({type:[String],json:{write:!0}})],H.prototype,"groupByFieldsForStatistics",void 0),a([u({type:String,json:{write:!0}})],H.prototype,"having",void 0),a([u({type:Date})],H.prototype,"historicMoment",void 0),a([j("historicMoment")],H.prototype,"writeHistoricMoment",null),a([u({type:Number,json:{write:!0}})],H.prototype,"maxAllowableOffset",void 0),a([u({type:Number,cast:t=>t<1?1:t>H.MAX_MAX_RECORD_COUNT_FACTOR?H.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],H.prototype,"maxRecordCountFactor",void 0),a([u({type:["xyFootprint"],json:{write:!0}})],H.prototype,"multipatchOption",void 0),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],H.prototype,"num",void 0),a([u({json:{write:!0}})],H.prototype,"objectIds",void 0),a([u({type:[String],json:{write:!0}})],H.prototype,"orderByFields",void 0),a([u({type:[String],json:{write:!0}})],H.prototype,"outFields",void 0),a([u({type:B,json:{name:"outSR",write:!0}})],H.prototype,"outSpatialReference",void 0),a([u({type:[Yi],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],H.prototype,"outStatistics",void 0),a([u({json:{write:!0}})],H.prototype,"parameterValues",void 0),a([j("parameterValues")],H.prototype,"writeParameterValues",null),a([u({type:se,json:{write:!0}})],H.prototype,"pixelSize",void 0),a([u({type:$o,json:{write:!0}})],H.prototype,"quantizationParameters",void 0),a([u({type:[Object],json:{write:!0}})],H.prototype,"rangeValues",void 0),a([u({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],H.prototype,"relationParameter",void 0),a([u({type:String,json:{write:!0}})],H.prototype,"resultType",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],H.prototype,"returnCentroid",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],H.prototype,"returnDistinctValues",void 0),a([u({type:Boolean,json:{default:!0,write:!0}})],H.prototype,"returnExceededLimitFeatures",void 0),a([u({type:Boolean,json:{write:!0}})],H.prototype,"returnGeometry",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],H.prototype,"returnQueryGeometry",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],H.prototype,"returnM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],H.prototype,"returnZ",void 0),a([u({type:Boolean,json:{write:!0}})],H.prototype,"returnTrueCurves",void 0),a([u({type:B,json:{write:!0}})],H.prototype,"sourceSpatialReference",void 0),a([X(Rz,{ignoreUnknown:!1,name:"spatialRel"})],H.prototype,"spatialRelationship",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],H.prototype,"start",void 0),a([j("start"),j("num")],H.prototype,"writeStart",null),a([u({type:String,json:{write:!0}})],H.prototype,"sqlFormat",void 0),a([u({type:String,json:{write:!0}})],H.prototype,"text",void 0),a([u({type:it,json:{write:!0}})],H.prototype,"timeExtent",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],H.prototype,"timeReferenceUnknownClient",void 0),a([X(Oz,{ignoreUnknown:!1}),u({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],H.prototype,"units",void 0),a([u({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],H.prototype,"where",void 0),a([j("where")],H.prototype,"writeWhere",null),H=h0=a([_("esri.rest.support.Query")],H);function uo(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Mi=class extends S2{constructor(e){super(e),this._selectionMap=new ju,this._sources=new q,this._trashCan=[],this._layerEditHandles=new q,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([ae(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),ae(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},or),ys(()=>this.sources,"change",e=>{const r=this._selectionMap,i=[];for(const s of e.removed){const n=r.get(s);n&&(r.delete(s),n.highlightHandle?.remove(),i.push({layer:s,selection:[],added:[],removed:[...n.selection]}))}this._refreshListeners(),i.length&&this._onSelectionChange(i)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(Ze)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[r,i]=e;return{layer:r,selection:[...i.selection]}})}get count(){let e=0;for(const r of this._selectionMap.values())e+=r.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){qs(e,this._sources)}syncSources(){const e=new Set,r=this.view?.map;if(!r)return;const i=s=>{Sk(s)?(s.layers?.forEach(i),s.tables?.forEach(i)):_k(s)?(s.sublayers?.forEach(i),s.subtables?.forEach(i)):e8(s)?s.sublayers?.forEach(i):uo(s)&&e.add(s)};r.allLayers.forEach(i),r.allTables.forEach(i),this.sources=[...e]}async getSelectedFeatures(e,r={},i="layerView"){const{view:s,selections:n}=this;if(!s&&i==="layerView")return N.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e?.length?n.filter(l=>e.includes(l.layer)):n).map(async l=>{const{layer:c,selection:d}=l;if(!d.length)return;const h=Hl(c)?c.parent:c;if(h!=null){if(s&&i==="layerView"&&!c7(h)&&p7(h)){const y=await s.whenLayerView(h).catch(()=>null);if(y)return d7(y,d,r)}return d7(h,d,r)}}).filter(mi);return(await Promise.all(o)).filter(mi)}updateSelection(e){const r=new Map;for(const[n,o]of this._selectionMap)r.set(n,[...o.selection]);let i=!1;const s=e.current.concat(e.added);for(const n of s){const o=n.sourceLayer,l=n.getObjectId();if(this.sources.includes(o)&&(uo(o)||Hl(o))&&l!==null){const c=hh(r,o,()=>[]);c.includes(l)||(c.push(l),i=!0)}}for(const n of e.removed){const o=n.sourceLayer,l=n.getObjectId();if(this.sources.includes(o)&&(uo(o)||Hl(o))&&l!==null){const c=r.get(o),d=c?.indexOf(l);d!==void 0&&d>=0&&(c?.splice(d,1),i=!0)}}if(i){const{_selectionMap:n,_trashCan:o}=this,l=[];for(const[c,d]of r){const h=n.get(c);h!==void 0&&o.push(h),n.set(c,{selection:d}),l.push({layer:c,selection:d,...P9(h!==void 0?h.selection:[],d)})}this._onSelectionChange(l)}}setSelection(e,r){this._setSelection(e,r)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,r){const i=this._selectionMap.get(e),s=i!==void 0?[...i.selection]:[];for(const n of r)s.includes(n)||s.push(n);this._setSelection(e,s)}removeFromSelection(e,r){const i=this._selectionMap.get(e);if(!i)return;const s=[];for(const n of i.selection)r.includes(n)||s.push(n);this._setSelection(e,s)}toggleInSelection(e,r){const i=this._selectionMap.get(e);if(!i||i.selection.length===0)return void this._setSelection(e,r);const s=new Set(i.selection),n=new Set(r),o=BR(s,n);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const r=[];for(const[i,s]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:r,_selectionMap:i,showHighlight:s}=this,n=this._vizTaskId;for(const o of e){const l=i.get(o),c=Hl(o)?o.parent:o;if(c!=null&&p7(c)){if(c7(c))continue;r.whenLayerView(c).then(d=>{l?.highlightHandle?.remove(),l!=null&&s&&n===this._vizTaskId&&"highlight"in d&&typeof d.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=d.highlight(l.selection,this.highlightName))}).catch(()=>{l?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Ze);const e=new Set(this.sources.map(r=>Hl(r)?r.parent:r));for(const r of e)uo(r)&&"on"in r&&r.on&&this._layerEditHandles.push(r.on("edits",i=>this._onLayerEdit(i,r)))}_onLayerEdit(e,r){if(e8(r))this._onParentLayerEdit(e,r);else if(e.deletedFeatures.length&&this._selectionMap.has(r)){const i=[];e.deletedFeatures.forEach(({error:s,objectId:n})=>{n!=null&&s==null&&i.push(n)}),this.removeFromSelection(r,i)}}_onParentLayerEdit(e,r){const{deletedFeatures:i,edits:s,updatedFeatures:n}=e;if(s?.updateFeatures?.forEach(o=>{const l=o.getObjectId()??o.attributes[r.objectIdField];if(l==null||n.find(h=>h.objectId===l)?.error)return;const c=r.findSublayerForFeature(o);if(!uo(c))return;const d=r.sublayers.find(h=>!(!uo(h)||!this.getSelection(h)?.includes(l)));uo(d)&&d!==c&&(this.removeFromSelection(d,[l]),this.appendToSelection(c,[l]))}),i.length){const o=[];i.forEach(({error:l,objectId:c})=>{c!=null&&l==null&&o.push(c)}),r.sublayers.forEach(l=>{uo(l)&&this._selectionMap.has(l)&&this.removeFromSelection(l,o)})}}_setSelection(e,r){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const i=this._selectionMap.get(e);if(i===void 0||!kz(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(e,{selection:[...r]});const s={layer:e,selection:[...r],...P9(i!==void 0?i.selection:[],r)};this._onSelectionChange([s])}}};a([u()],Mi.prototype,"_selectionMap",void 0),a([u()],Mi.prototype,"_sources",void 0),a([u({readOnly:!0,nonNullable:!0})],Mi.prototype,"selections",null),a([u({readOnly:!0,nonNullable:!0})],Mi.prototype,"count",null),a([u()],Mi.prototype,"view",void 0),a([u({readOnly:!0,nonNullable:!0})],Mi.prototype,"hasSelection",null),a([u()],Mi.prototype,"showHighlight",void 0),a([u()],Mi.prototype,"sources",null),a([u()],Mi.prototype,"highlightName",void 0),Mi=a([_("esri.views.SelectionManager")],Mi);const c7=t=>Hl(t)?t.parent?.isTable===!0:t.isTable,Cz=t=>t.layer!==void 0,p7=t=>t?.when!==void 0,kz=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const r=[...t.selection],i=[...e.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1}return!0},d7=async(t,e,r={})=>{let i;if(Cz(t)){const s=t;i=s===void 0?null:await s.queryFeatures(new H({...r,objectIds:e})).then(n=>({data:n,layer:t.layer}))}else{const s=t;i=s===void 0?null:await s.queryFeatures(new H({...r,objectIds:e})).then(n=>({data:n,layer:s}))}return i},Fz=Mi;let Dp=class extends de(Z){constructor(e){super(e),this.accentColor=new ne([255,127,0]),this.textColor=new ne([255,255,255])}};a([u({type:ne,nonNullable:!0})],Dp.prototype,"accentColor",void 0),a([u({type:ne,nonNullable:!0})],Dp.prototype,"textColor",void 0),Dp=a([_("esri.views.Theme")],Dp);const a3=Dp,sT=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],nT={};function oT(t){return!!nT[t]}function Az(t){for(const e of t)if(!oT(e))return!1;return!0}sT.forEach(t=>{nT[t]=!0});let aT=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:r,priority:i},s)=>this.inputManager?.installHandlers(s,[r],i))}disconnect(){this.inputManager&&this._handlers.forEach((e,r)=>this.inputManager?.uninstallHandlers(r)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,r,i,s){const n=Array.isArray(e)?e:e.split(",");if(!Az(n))return n.some(oT)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,l;Array.isArray(r)?l=r:(o=r,l=[]),typeof i=="function"?o=i:s=i,s=s??Gn.DEFAULT;const c=this._createUniqueGroupName(),d=new Lz(this.view,n,l,o);this._handlers.set(c,{handler:d,priority:s});for(const h of n){const y=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,y+1)}return this.inputManager&&this.inputManager.installHandlers(c,[d],s),Br(()=>this._removeHandler(c,n))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,r){if(this._handlers.has(e)){this._handlers.delete(e);for(const i of r){const s=this._handlerCounts.get(i);s===void 0||(s===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Lz=class extends Pt{constructor(e,r,i,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const n of r)switch(n){case"click":this.registerIncoming("click",i,o=>s(jz(e,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>s(Vz(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>s(zz(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>s(qz(e,o)));break;case"hold":this.registerIncoming("hold",i,o=>s(Uz(e,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const l=this._wrapDrag(o);l&&s(l)});break;case"key-down":this.registerIncoming("key-down",i,o=>s(Gz(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>s(Bz(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>s(cp(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>s(cp(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>s(cp(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>s(Wz(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>s(Hz(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>s(cp(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>s(cp(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{s(Zz(o))});break;case"focus":this.registerIncoming("focus",i,o=>{s(Nz(o))});break;case"blur":this.registerIncoming("blur",i,o=>{s(Dz(o))})}}_wrapDrag(e){const r=e.data,{x:i,y:s}=r.center,{action:n,pointerType:o,button:l}=r;if(n==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const c=r.pointer.native,d=r.buttons,{cancelable:h,timestamp:y}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:s,origin:f,pointerType:o,button:l,buttons:d,radius:r.radius,angle:X_(r.angle),native:c,timestamp:y,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}};function Nz(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function Dz(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function jz(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:c}=e.data,{cancelable:d,timestamp:h}=e;return{type:"click",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:h,screenPoint:Et(n,o),mapPoint:Oh(t,n,o),eventId:c,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function Vz(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:c}=e.data,{cancelable:d,timestamp:h}=e;return{type:"double-click",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:h,mapPoint:Oh(t,n,o),eventId:c,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function zz(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:c}=e.data,d=l.pointerId,{cancelable:h,timestamp:y}=e;return{type:"immediate-click",pointerId:d,pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:y,mapPoint:Oh(t,n,o),eventId:c,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function qz(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:c}=e.data,d=l.pointerId,{cancelable:h,timestamp:y}=e;return{type:"immediate-double-click",pointerId:d,pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:y,mapPoint:Oh(t,n,o),eventId:c,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function Uz(t,e){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l}=e.data,{cancelable:c,timestamp:d}=e;return{type:"hold",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:d,mapPoint:Oh(t,n,o),cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function Oh(t,e,r){return t.toMap(Et(e,r),{exclude:[]})}function Gz(t){const{key:e,repeat:r,native:i}=t.data,{cancelable:s,timestamp:n}=t;return{type:"key-down",key:e,repeat:r,native:i,timestamp:n,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function Bz(t){const{key:e,native:r}=t.data,{cancelable:i,timestamp:s}=t;return{type:"key-up",key:e,native:r,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:n=>t.defer(n),preventDefault:()=>t.preventDefault()}}function cp(t,e){const{x:r,y:i,button:s,buttons:n,native:o,eventId:l}=t.data,c=o.pointerId,d=o.pointerType,{cancelable:h,timestamp:y}=t;return{type:e,x:r,y:i,pointerId:c,pointerType:d,button:s,buttons:n,native:o,timestamp:y,eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:f=>t.defer(f),preventDefault:()=>t.preventDefault()}}function Wz(t){const{x:e,y:r,buttons:i,native:s,eventId:n}=t.data.currentEvent,{button:o}=t.data.startEvent,l=t.data.startEvent.native.pointerId,c=t.data.startEvent.native.pointerType,d=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:y,timestamp:f}=t;return{type:"pointer-drag",x:e,y:r,pointerId:l,pointerType:c,button:o,buttons:i,action:d,origin:h,native:s,timestamp:f,eventId:n,cancelable:y,stopPropagation:()=>t.stopPropagation(),defer:m=>t.defer(m),preventDefault:()=>t.preventDefault()}}function Hz(t){const{cancelable:e,data:r,timestamp:i}=t,{x:s,y:n,deltaY:o,native:l}=r;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:l,timestamp:i,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:c=>t.defer(c),preventDefault:()=>t.preventDefault()}}function Zz(t){const{action:e,state:r,device:i}=t.data,{cancelable:s,timestamp:n}=t,{buttons:o,axes:l}=r;return{type:"gamepad",device:i,timestamp:n,action:e,buttons:o,axes:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:c=>t.defer(c),preventDefault:()=>t.preventDefault()}}const Jz="z",Qz="r",lT={cancel:"Escape",complete:"Enter"},$ae={...lT,redo:Qz,undo:Jz,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},Tae={toggle:"Control"},Mae={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Iae={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:Ux,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let Eae=class{constructor(){this._bindings=new Map}add(e,r){return this.addToggle(e,i=>{i.type==="key-down"&&r(i)})}addToggle(e,r){const i=Yz.fromDefinition(e,r),s=hh(this._bindings,i.key,()=>[]);return s.push(i),Br(()=>Xb(s,i))}register(e,r=Gn.WIDGET){return sg([e.on("key-down",i=>this.dispatch(e.inputManager,i),r),e.on("key-up",i=>this.dispatch(e.inputManager,i),r)])}dispatch(e,r){const i=r.key,s=this._bindings.get(i);if(s)for(const n of s)n.process(e,r)}},Yz=class l3{constructor(e,r,i,s,n){this.key=e,this.modifiers=r,this.repeats=i,this.continuePropagation=s,this.callback=n}process(e,r){if(!(r.key!==this.key||"repeat"in r&&r.repeat&&!this.repeats)){for(const i of this.modifiers)if(!e.isModifierKeyDown(i))return;this.continuePropagation||r.stopPropagation(),this.callback(r)}}static fromDefinition(e,r){if(typeof e=="string")return new l3(e,[],!1,!1,r);const{key:i,modifier:s,repeats:n,continuePropagation:o}=e;return new l3(i,s?Array.isArray(s)?s:[s]:[],!!n,!!o,r)}};function Kz(t){return[t.on("before-add",e=>{const r=e.item;if(r==null||t.includes(r))return N.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();r.onAdd()}),t.on("after-remove",e=>{const r=e.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function u3(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function Xz(t){return t.type==="key-down"&&t.key===lT.cancel}function xs(t){return Et(t.x,t.y)}function uT(t,e){const r=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return r?Et(e.clientX-r.left,e.clientY-r.top):Et(0,0)}function cT(t,e){return e instanceof Event?uT(t,e):xs(e)}function pT(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let y0=class extends Z{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new ju,this._grabbedManipulators=new ju,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,r){const i=()=>e.stopPropagation();switch(e.type){case"pointer-move":h7(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!y7(e))break;const s=xs(e),n=kl(s,e.pointerType,r.tools);if(n==null)break;const o=n.manipulator,l=n.tool;o==null||l==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,r),o!=null&&l!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:l,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,r);break;case"pointer-drag":{if(!y7(e))break;const s=this._grabbedManipulators.get(e.pointerId),n=s?.manipulator,o=s?.tool;if(n==null||o==null)break;const l=xs(e);l.x=gi(l.x,0,r.view.width),l.y=gi(l.y,0,r.view.height);const c=s.start,d=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,d?n.events.emit("drag",{action:"update",start:c,screenPoint:l}):n.events.emit("drag",{action:"start",start:c,screenPoint:l,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:n,start:c}));break;case"end":n.dragging=!1,d&&n.events.emit("drag",{action:"end",start:c,screenPoint:l}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,r)}i();break}case"immediate-click":{const s=xs(e),n=kl(s,e.pointerType,r.tools);if(!eq(e)){for(const d of r.tools)if((n==null||n.tool!==d||d.automaticManipulatorSelection)&&d.manipulators){let h=!1;d.manipulators.forEach(({manipulator:y})=>{y.selected&&(y.selected=!1,h=!0)}),h&&d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged()}}if(n==null)break;const{manipulator:o,tool:l}=n;if(!o.interactive)break;o.selectable&&l.automaticManipulatorSelection&&(o.selected=!o.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const c=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:c,stopPropagation:i}),K4(o,i);break}case"click":{const s=xs(e),n=kl(s,e.pointerType,r.tools),o=n?.manipulator;if(o==null||!o.interactive)break;const l=e.native.shiftKey;o.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l}),i();break}case"double-click":{const s=xs(e),n=kl(s,e.pointerType,r.tools),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const l=e.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:i}),K4(o,i);break}case"immediate-double-click":{const s=xs(e),n=kl(s,e.pointerType,r.tools),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const l=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:i}),e.pointerType==="mouse"&&K4(o,i);break}}this._onFocusChange(r.tools)}_releaseManipulatorBeforeDragging(e,r,i){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:xs(r)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===e&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(e,r){const i=this._grabbedManipulators.get(e.pointerId)?.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:xs(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:s})=>r.add(s)),this._hoveredManipulators.forEach(({tool:s})=>i.add(s));for(const s of e){s.hasGrabbedManipulators=r.has(s),s.hasHoveredManipulators=i.has(s);const n=this._grabbedManipulators.values(),o=WR(n,({tool:l})=>l===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:r,setActiveTool:i},s=!0,n){const o=(l,c)=>l===e&&(n==null||n===c);this._grabbedManipulators.forEach(({tool:l,manipulator:c,pointerType:d},h)=>{o(l,c)&&(this._grabbedManipulators.delete(h),c.grabbing=!1,c.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:d}))}),this._draggedManipulators.forEach(({tool:l,manipulator:c},d)=>{o(l,c)&&(this._draggedManipulators.delete(d),c.dragging=!1,c.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:l,manipulator:c},d)=>{o(l,c)&&(this._hoveredManipulators.delete(d),c.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Et(r.x,r.y),i,r.pointerType,e)})}handleHoverEvent(e,r){const i=e.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!h7(e.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(xs(e),e.pointerId,e.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(e,r,i,s){let n=kl(e,i,s);const o=this._hoveredManipulators.get(r)?.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(r,n)):this._hoveredManipulators.delete(r),this._onFocusChange(s))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:r},i)=>{e===i&&(this._hoveredManipulators.delete(e),r.hovering=!1)})}_cursorFromMap(e,r){if(!e?.size)return null;for(const{manipulator:i}of e.values())if(i?.interactive){if(i.grabbing&&i.grabCursor)return i.grabCursor;if(i.cursor)return i.cursor}return r}};function kl(t,e,r){for(const i of r){if(i.manipulators==null||!u3(i))continue;const s=i.manipulators.intersect(t,e);if(s!=null)return{tool:i,manipulator:s}}return null}function h7(t){return t==="mouse"}function y7(t){return t.pointerType!=="mouse"||t.button===0}function eq(t){return!!t.native.shiftKey}function K4(t,e){t?.consumesClicks&&e()}a([u()],y0.prototype,"cursor",null),y0=a([_("esri.views.interactive.ToolViewManagerManipulatorState")],y0);const f7="attached",X4="tools",tq=1e3;let $s=class extends Z{constructor(e){super(e),this._updatingHandles=new Xa,this._clock=yh,this._manipulatorState=new y0,this.tools=new q,this._interacting=!1,this._interactingTimeout=tq,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(sT,e=>{this._handleInputEvent(e)},Gn.TOOL),...Kz(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void N.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const r=this.activeTool;this._set("activeTool",e),r?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const i of this.tools){this._updateToolEditableFlag(i);const s=u3(i);this.activeTool!=null&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const r of this.tools)if(r.visible&&r.cursor!=null)return r.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Ze(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([ae(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(r=>r.onElevationChange(e)))],f7):this.addHandles(ae(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(f7),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const r of this.tools)r.manipulators&&r.manipulators.forEach(({manipulator:i})=>e(i,r))}_handleInputEvent(e){let r=!1;const i={...e,stopPropagation:()=>{r=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i);else for(const s of this.tools)!r&&s.visible&&s.handleInputEvent(i);!r&&Xz(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(X4);for(const e of this.tools){if(e instanceof Z){const r=ae(()=>[e.cursor,e.visible,e.editable],()=>{u3(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(r,X4)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],X4)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(r=>(e==null||r!==e)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};a([u({constructOnly:!0,nonNullable:!0})],$s.prototype,"view",void 0),a([u({value:null})],$s.prototype,"activeTool",null),a([u({readOnly:!0,type:q})],$s.prototype,"tools",void 0),a([u()],$s.prototype,"cursor",null),a([u({readOnly:!0})],$s.prototype,"updating",null),a([u()],$s.prototype,"_interacting",void 0),a([u({readOnly:!0})],$s.prototype,"interacting",null),$s=a([_("esri.views.ToolViewManager")],$s);const rq=new ne("cyan"),iq=1,sq=.25,nq=new ne("black"),oq=.4,aq=.2,Cae=.25,dT="default",lq="temporary",uq=new ne("yellow");var c3;let ei=c3=class extends Z{constructor(t){super(t),this.name=dT,this.color=rq.clone(),this.haloColor=null,this.haloOpacity=iq,this.fillOpacity=sq,this.shadowColor=nq.clone(),this.shadowOpacity=oq,this.shadowDifference=aq,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new c3({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};a([u({type:String,constructOnly:!0,nonNullable:!0})],ei.prototype,"name",void 0),a([u({type:ne,nonNullable:!0})],ei.prototype,"color",void 0),a([u({type:ne})],ei.prototype,"haloColor",void 0),a([u({nonNullable:!0})],ei.prototype,"haloOpacity",void 0),a([u({nonNullable:!0})],ei.prototype,"fillOpacity",void 0),a([u({type:ne,nonNullable:!0})],ei.prototype,"shadowColor",void 0),a([u({nonNullable:!0})],ei.prototype,"shadowOpacity",void 0),a([u({nonNullable:!0})],ei.prototype,"shadowDifference",void 0),a([u({nonNullable:!0})],ei.prototype,"haloWidth",void 0),a([u({nonNullable:!0})],ei.prototype,"haloBlur",void 0),ei=c3=a([_("esri.views.support.HighlightOptions")],ei);const Vo=ei;function cq(){return new(q.ofType(Vo))([new Vo({name:dT}),new Vo({name:lq,color:uq})])}let iu=class extends Z{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":pq.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return dq[this.deviceType]}};a([u({nonNullable:!0,readOnly:!0})],iu.prototype,"nativeIndex",void 0),a([u({type:String,readOnly:!0})],iu.prototype,"deviceType",null),a([u({type:Number,readOnly:!0})],iu.prototype,"axisThreshold",null),iu=a([_("esri.views.input.gamepad.GamepadInputDevice")],iu);const c6=iu,pq=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),dq={standard:.15,spacemouse:.025,unknown:0};let jp=class extends Z{constructor(e){super(e),this.devices=new q,this.enabledFocusMode="document"}};a([u({type:q.ofType(c6),readOnly:!0})],jp.prototype,"devices",void 0),a([u({type:["document","view","none"]})],jp.prototype,"enabledFocusMode",void 0),jp=a([_("esri.views.input.gamepad.GamepadSettings")],jp);const hq=jp;let f0=class extends Z{constructor(){super(...arguments),this.gamepad=new hq}};a([u({readOnly:!0})],f0.prototype,"gamepad",void 0),f0=a([_("esri.views.input.Input")],f0);const yq=f0,ey=()=>u({type:["pan","rotate","zoom","none"],nonNullable:!0});let Ia=class extends Z{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};a([ey()],Ia.prototype,"dragPrimary",void 0),a([ey()],Ia.prototype,"dragSecondary",void 0),a([ey()],Ia.prototype,"dragTertiary",void 0),a([u({type:["zoom","none"],nonNullable:!0})],Ia.prototype,"mouseWheel",void 0),Ia=a([_("esri.views.navigation.NavigationActionMap")],Ia);const p6=Ia;let vo=class extends Z{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};a([u({type:Boolean,nonNullable:!0})],vo.prototype,"enabled",void 0),a([u({type:c6})],vo.prototype,"device",void 0),a([u({type:["pan","zoom"],nonNullable:!0})],vo.prototype,"mode",void 0),a([u({type:["forward-down","forward-up"],nonNullable:!0})],vo.prototype,"tiltDirection",void 0),a([u({type:Number,nonNullable:!0})],vo.prototype,"velocityFactor",void 0),vo=a([_("esri.views.navigation.gamepad.GamepadSettings")],vo);const hT=vo;let wo=class extends Z{constructor(e){super(e),this.actionMap=new p6,this.browserTouchPanEnabled=!0,this.gamepad=new hT,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){Ky(N.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};a([u({type:p6,nonNullable:!0})],wo.prototype,"actionMap",void 0),a([u({type:Boolean})],wo.prototype,"browserTouchPanEnabled",void 0),a([u({type:hT,nonNullable:!0})],wo.prototype,"gamepad",void 0),a([u({type:Boolean})],wo.prototype,"momentumEnabled",void 0),a([u({type:Boolean})],wo.prototype,"mouseWheelZoomEnabled",null),wo=a([_("esri.views.navigation.Navigation")],wo);const K2=wo;function jae(t,e,r){const i=yT(t),s=e,n=fq(i,s,r);if(i){const o=hr.deriveUnitFromSR(i,t.spatialReference).heightUnit;if(!r&&o!==i.heightUnit){const l=new M("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new M("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:l})}}if(!mq(t)||n===4)return new M("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(n){case 1:{const o=i?.heightUnit||"unknown",l=s?.heightUnit||"unknown",c=new M("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${l})`,{layerUnit:o,sceneUnit:l});return new M("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:c})}case 2:{const o=i?.heightModel||"unknown",l=s?.heightModel||"unknown",c=new M("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${l})`,{layerHeightModel:o,sceneHeightModel:l});return new M("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:c})}case 3:{const o=i?.vertCRS||"unknown",l=s?.vertCRS||"unknown",c=new M("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${l})`,{layerDatum:o,sceneDatum:l});return new M("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:c})}}return null}function fq(t,e,r){if(!m7(t)||!m7(e))return 4;if(t==null||e==null)return 0;if(!r&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function m7(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function mq(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!gT(t)}function yT(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?Ec(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&fT(t)&&t.heightModelInfo?t.heightModelInfo:gT(t)?hr.deriveUnitFromSR(vq,t.spatialReference):null}function fT(t){return"heightModelInfo"in t}function mT(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function gT(t){return mT(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):vT(t)}function gq(t){return t.layers!=null||vT(t)||mT(t)||fT(t)}function vT(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const vq=new hr({heightModel:"gravity-related-height"});let p3,ty=null;async function wq(t){ty||(ty=L(()=>import("./money-tides-geometryServiceUtils-d45A9lBX.js"),__vite__mapDeps([203,3,1,2,4,5,204,11,12,10])).then(e=>p3=e)),await ty,Re(t)}async function wT(t,e,r,i){if(!t)return null;const s=t.spatialReference;return Qn()||fs(s,e)?Yo(t,e):p3?p3.projectGeometry(t,e,r,i):(await Promise.race([wq(i),Wo(i)]),wT(t,e,r,i))}async function Vae(t,e){try{return t?.spatialReference?await ox(t,e):null}catch{return null}}let Oe=class extends Z{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ll(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,i=>{const s=this._getSupportedSpatialReferences(i);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(e,s);n!=null&&(e=n)}return e?.length===1})&&e?.length!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(e);return{spatialReference:r?.spatialReference??null,viewingMode:r?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const s=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],n=>!(!("tileInfo"in n)||!n.tileInfo?.spatialReference.equals(r))&&(i=n,!0),n=>"tileInfo"in n);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const r=this._collectLayers(this.mapCollections,i=>{const s=yT(i);return!!s&&(e={heightModelInfo:s,vcsWkid:i.spatialReference?.vcsWkid,latestVcsWkid:i.spatialReference?.latestVcsWkid},!0)},i=>gq(i));return{...e,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],r=this._collectLayers(this.mapCollections,i=>{const s="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(l=>l.spatialReference.equals(this.spatialReference))??n;if(o)return e.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const l of s)e.push({extent:l,layer:i});return!1});return{candidates:e,updating:r}}get _extentTask(){const{candidates:e,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=ll(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:fh(async n=>{try{const o=await wT(i.extent,s,"portalItem"in i.layer?i.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(zs(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,r){if(e==null)return r;const i=new Array;for(const s of e)for(const n of r){if(!s.spatialReference.equals(n.spatialReference))continue;const o=_q(s.viewingMode,n.viewingMode);if(o!==!1){i.push({spatialReference:s.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const r=this.defaultSpatialReference;return e==null||e.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&e.length>1&&e.some(({spatialReference:i})=>i.equals(r))&&(e=e.filter(({spatialReference:i})=>i.equals(r))),e.length>1&&e.some(({viewingMode:i})=>i!==2)&&(e=e.filter(({viewingMode:i})=>i!==2)),e[0])}_getSupportedSpatialReferences(e){const r="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const s of r){const n=this.getSpatialReferenceSupport(s,e);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:l,viewingMode:c}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!l.equals(this.userSpatialReference)||i.push({spatialReference:l,viewingMode:c})}}return i}_pickExtentCandidate(e){const r=this.spatialReference;return e.find(({extent:i})=>r.equals(i.spatialReference))||e[0]}_collectLayers(e,r,i=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const s=new bq(i,r);for(const n of e)if(this._collectCollection(n,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(e,r){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of e.layers)if((i.type!=="graphics"||!i.internal)&&r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(r=>{fi(r)}),"loading"):e.loadStatus:"loaded"}};a([u()],Oe.prototype,"required",void 0),a([u({constructOnly:!0})],Oe.prototype,"map",void 0),a([u({constructOnly:!0})],Oe.prototype,"getSpatialReferenceSupport",void 0),a([u()],Oe.prototype,"defaultSpatialReference",void 0),a([u()],Oe.prototype,"userSpatialReference",void 0),a([u()],Oe.prototype,"sourcePreloadCount",void 0),a([u()],Oe.prototype,"priorityCollection",void 0),a([u()],Oe.prototype,"requiresExtentInSpatialReference",void 0),a([u()],Oe.prototype,"suspended",void 0),a([u({readOnly:!0})],Oe.prototype,"ready",null),a([u({readOnly:!0})],Oe.prototype,"heightModelInfoReady",null),a([u({readOnly:!0})],Oe.prototype,"spatialReference",null),a([u({readOnly:!0})],Oe.prototype,"extent",null),a([u({readOnly:!0})],Oe.prototype,"heightModelInfo",null),a([u({readOnly:!0})],Oe.prototype,"vcsWkid",null),a([u({readOnly:!0})],Oe.prototype,"latestVcsWkid",null),a([u({readOnly:!0})],Oe.prototype,"viewingMode",null),a([u({readOnly:!0})],Oe.prototype,"tileInfo",null),a([u({readOnly:!0})],Oe.prototype,"mapCollections",null),a([u({readOnly:!0})],Oe.prototype,"_spatialReferenceTask",null),a([u({readOnly:!0})],Oe.prototype,"_tileInfoTask",null),a([u({readOnly:!0})],Oe.prototype,"_heightModelInfoTask",null),a([u({readOnly:!0})],Oe.prototype,"_extentCandidatesTask",null),a([u()],Oe.prototype,"_extentTask",null),a([u()],Oe.prototype,"_projectExtentTask",void 0),Oe=a([_("esri.views.support.DefaultsFromMap")],Oe);let bq=class{constructor(e,r){this.layerFilter=e,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function _q(t,e){return t!=null?e!=null?t===e&&t:t:e}function Sq(t){return"tryRecycleWith"in t}let xq=class{constructor(e,r,i){this.layer=e,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=Jo(),this.promise=this._deferred.promise,$c(this._controller.signal,()=>{this._recycleController?.abort();const s=new M("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!Sq(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const r=this.layer.type,i=this._recycleController.signal;for(let s=0;s<e.length;s++){const n=e[s];if(n.type!==r)continue;const o=this.layerView.tryRecycleWith(n,{signal:i});if(o){e.splice(s,1),this.layer=n;const l=this.layerView,c=l.view;return this.promise=o.then(()=>(Re(i),n.emit("layerview-destroy",{view:c,layerView:l}),c.emit("layerview-destroy",{view:c,layerView:l}),n.emit("layerview-create",{view:c,layerView:l}),c.emit("layerview-create",{view:c,layerView:l}),l)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:r,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:r},layer:i}=this;this._map=e.map;try{let s,n;if(await i.load({signal:r}),i.prefetchResources&&await i.prefetchResources({signal:r}),$q(i))s=await i.createLayerView(e,{signal:r});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new M("layer:view-not-supported","No layerview implementation was found");const c=await this.layerViewImporter.importLayerView(i);Re(r),s="default"in c?new c.default({layer:i,view:e}):new c({layer:i,view:e})}const o=()=>{n=Ze(n),s.destroyed||s.destroy(),this.done=!0};n=$c(r,o),Re(r);try{await s.when()}catch(c){throw o(),c}if(!this._map?.allLayers?.includes(i))return o(),void this._deferred?.reject(new M("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=s,i.emit("layerview-create",{view:e,layerView:s}),e.emit("layerview-create",{layer:i,layerView:s}),this.done=!0,this._deferred?.resolve(s)}catch(s){i.emit("layerview-create-error",{view:e,error:s}),e.emit("layerview-create-error",{layer:i,error:s}),this.done=!0,this._deferred?.reject(new M("layerview:create-error","layerview creation failed",{layer:i,error:s}))}}};function $q(t){return t.createLayerView!==Fe.prototype.createLayerView}function Tq(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let Er=class extends Z{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Xa,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const r=this.view.map?.allLayers;if(r)for(const i of r)this.layerViewFilter?.(i)!==!1&&this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Jo(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(uh(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:r}=this.view;if(!r)return void this.clear();if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,s=[],n=this.view.ready,o=h=>{if(h!=null){for(const y of h)if(y){if(this.layerViewFilter?.(y)===!1)continue;i.add(y);const f=this._layerLayerViewInfoMap.get(y);f&&n?f.start():f||this._recyclingInfoMap.has(y)||s.push(y),"layers"in y&&y.layers&&o(y.layers)}}};for(const h of this._rootCollectionNames)o(_p(this,h));const l=new Array,c=h=>{const y=h.tryRecycle(s);y?(this._recyclingInfoMap.set(h.layer,h),this.notifyChange("updating"),y.then(()=>{this._recyclingInfoMap.delete(h.layer),this._layerLayerViewInfoMap.set(h.layer,h),this._reschedule(),this.notifyChange("updating")}).catch(f=>{fi(f)||(this._recyclingInfoMap.delete(h.layer),h.destroy(),this._reschedule(),this.notifyChange("updating"))})):l.push(h)};for(const h of this._layerLayerViewInfoMap.values())i.has(h.layer)||(this._layerLayerViewInfoMap.delete(h.layer),c(h));for(const h of this._recyclingInfoMap.values())i.has(h.layer)||(this._recyclingInfoMap.delete(h.layer),c(h));for(const h of s)this._createLayerView(h);this._refreshCollections(),l.forEach(h=>h.destroy());const d=[r?.ground?.layers,r?.basemap?.baseLayers,r?.basemap?.groundLayers,r?.basemap?.referenceLayers,r?.layers].filter(h=>!!h);i.forEach(h=>"layers"in h&&d.push(h.layers)),this.addHandles(d.map(h=>this._watchUpdatingTracking.addOnCollectionChange(()=>h,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([ys(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ae(()=>{const e=this.view,r=e?.map;return[r?.basemap,r?.ground,r?.layers,e?.ready]},()=>this._reschedule(),Dr)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),Hh(this._recyclingInfoMap),Hh(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Mt()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||HR(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),Hh(this._layerLayerViewInfoMap),Hh(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const r=this._layerLayerViewInfoMap.get(e)?.promise;if(!r){const i=this._recyclingInfoMap.get(e)?.promise;if(!i)throw new M("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return i}return r}isCreatingLayerViewsForLayer(e,r){this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(e);if(!i?.done)return!0;const s=i.layerView;return!(!s||!r||s.parent===r)||!!(i.done&&s&&"layers"in e&&e.layers?.length)&&e.layers.some(n=>this.isCreatingLayerViewsForLayer(n,s))}_refreshCollections(){for(const[e,r]of this._layersToLayerViews)this._populateLayerViewsOwners(_p(this,e),_p(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())_p(this,e)?.removeAll()}_populateLayerViewsOwners(e,r,i){if(!e||!r)return void r?.removeAll();let s=0;for(const n of e){const o=this._layerLayerViewInfoMap.get(n);if(!o?.layerView)continue;const{layerView:l}=o;l.layer=n,l.parent=i,r.at(s)!==l&&r.splice(s,0,l),"layers"in n&&Tq(l)&&this._populateLayerViewsOwners(n.layers,l.layerViews,l),++s}s<r.length&&r.splice(s)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const r=new xq(e,this.view,this.layerViewImporter);r.promise?.then(()=>this._refreshCollections(),i=>{i&&(fi(i)||i.name==="cancelled:layerview-create")||N.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};a([u()],Er.prototype,"_workPromise",void 0),a([u({readOnly:!0})],Er.prototype,"_watchUpdatingTracking",void 0),a([u({readOnly:!0})],Er.prototype,"_layersToLayerViews",void 0),a([u({constructOnly:!0})],Er.prototype,"layerviewMapping",void 0),a([u({readOnly:!0})],Er.prototype,"_rootCollectionNames",null),a([u({constructOnly:!0})],Er.prototype,"layerViewFilter",void 0),a([u()],Er.prototype,"layerViewImporter",void 0),a([u()],Er.prototype,"supportsGround",void 0),a([u({readOnly:!0})],Er.prototype,"updating",null),a([u({readOnly:!0})],Er.prototype,"updatingRemaining",null),a([u({constructOnly:!0})],Er.prototype,"view",void 0),Er=a([_("esri.views.support.LayerViewManager")],Er);const Mq=Er;let su=class extends Z{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};a([u()],su.prototype,"featureTitleFields",void 0),a([u()],su.prototype,"utilityNetworkFields",void 0),a([u()],su.prototype,"globalIdField",void 0),su=a([_("esri.views.support.RequiredFieldsOptions")],su);const Iq=su;var nu,qo;let Q=(qo=class extends Vb(Q5){constructor(e){super(e),this._userSpatialReference=null,this.handles=new og,this.updatingHandles=new Xa,this.allLayerViews=new ui({getCollections:()=>this.layerviewCollections,getChildrenFunction:Pq}),this.analyses=new zc,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Td,this.typeSpecificPreconditionsReady=!0,this.layerViews=new q,this.magnifier=new rT,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new q,this._highPriorityCursorHandles=new q,this.input=new yq,this.navigation=new K2,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new aT(this),this.persistableViewModels=new q,this.requiredFieldsOptions=new Iq,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ae(()=>this.preconditionsReady,r=>{const i=this.ready;if(r?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,nu.views.add(this)):(this._lockedSpatialReference=null,nu.views.remove(this)),this.notifyChange("spatialReference"),!r&&i)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(r&&!i){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new M("view:startup-error","View._startup failed",s)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},It))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,ng(()=>this.ready)))),this.basemapView=new Sz({view:this}),this.layerViewManager=new Mq({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new $s({view:this}),this.selectionManager=new Fz({view:this}),this.addHandles([ji(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{N.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),ae(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Dr),ae(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},It),ae(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Dr)])}get _layerToLayerviewMapping(){return nu._layerToLayerview}destroy(){this.destroyed||(nu.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=st(this.graphics),this.analyses=st(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=st(this.analysisViewManager),this.toolViewManager=st(this.toolViewManager),this.layerViewManager=st(this.layerViewManager),this.selectionManager=st(this.selectionManager),this.basemapView=st(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=st(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return N.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Oe({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,r)=>this.getSpatialReferenceSupport(e,r),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??cq()}set highlights(e){this._set("highlights",qs(e,this._get("highlights"),q.ofType(Vo)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||tf(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(N.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),tf(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,r=this.map.ground.loaded,i=this.map.basemap?.loaded??!0;return e&&i&&r&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=fh(s=>ZR(re("view-readyState-waiting-delay"),null,s)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=ll(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const r=e.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return e}set spatialReference(e){const r=!ot(e,this._get("spatialReference"));this._set("_userSpatialReference",e),r&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Hn}set timeZone(e){this._userTimeZone=e,fk(e)||N.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,r="low"){const i=r==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,s={cursor:e},n=Br(()=>i.remove(s));return i.add(s),this.addHandles(n),n}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new a3}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new M("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,r){return this.isResolved()&&!this.ready&&N.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,r)}forceReadyCycle(){this.ready&&(ji(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,r){return super.on(e,r)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const r=document.createElement("div");r.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const i=document.createElement("div");i.innerHTML="Unable to display map. WebGL2 support is required.",i.setAttribute("style","font-size: 24px; font-weight: bold;");const s=document.createElement("div");s.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",s.setAttribute("style","font-size: 18px;");const n=document.createElement("a");n.innerHTML="https://esriurl.com/webgl-faq",n.target="_blank",n.setAttribute("style","font-size: 18px;"),n.href="https://esriurl.com/webgl-faq",r.appendChild(i),r.appendChild(s),r.appendChild(n);const o=this.getSurface();throw o&&o.appendChild(r),e}}},nu=qo,qo._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],qo.views=new q,qo);a([u()],Q.prototype,"_userSpatialReference",void 0),a([u()],Q.prototype,"activeTool",null),a([u({readOnly:!0})],Q.prototype,"allLayerViews",void 0),a([u({readOnly:!0})],Q.prototype,"layerviewCollections",null),a([u(jf(zc,"analyses"))],Q.prototype,"analyses",void 0),a([u()],Q.prototype,"animation",null),a([u()],Q.prototype,"basemapView",void 0),a([u()],Q.prototype,"center",null),a([u()],Q.prototype,"defaultsFromMapSettings",null),a([u()],Q.prototype,"defaultsFromMap",null),a([u()],Q.prototype,"dependencies",void 0),a([u()],Q.prototype,"displayFilterEnabled",void 0),a([u({type:le})],Q.prototype,"extent",null),a([u()],Q.prototype,"fatalError",void 0),a([u(jf(Td,"graphics"))],Q.prototype,"graphics",void 0),a([u({readOnly:!0,type:hr})],Q.prototype,"heightModelInfo",null),a([u({type:q.ofType(Vo)})],Q.prototype,"highlights",null),a([u({readOnly:!0})],Q.prototype,"interacting",null),a([u({constructOnly:!0})],Q.prototype,"layerViewFilter",void 0),a([u({readOnly:!0})],Q.prototype,"navigating",null),a([u({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Q.prototype,"preconditionsReady",null),a([u({readOnly:!0})],Q.prototype,"typeSpecificPreconditionsReady",void 0),a([u({type:q,readOnly:!0})],Q.prototype,"layerViews",void 0),a([u()],Q.prototype,"resolution",null),a([u({type:rT})],Q.prototype,"magnifier",void 0),a([u({value:null,type:Cx})],Q.prototype,"map",null),a([u()],Q.prototype,"padding",void 0),a([u({readOnly:!0})],Q.prototype,"ready",void 0),a([u()],Q.prototype,"_readyStateWaitingTask",void 0),a([u({readOnly:!0})],Q.prototype,"readyState",null),a([u({type:B})],Q.prototype,"spatialReference",null),a([u()],Q.prototype,"stationary",null),a([u({type:it})],Q.prototype,"timeExtent",null),a([u({type:String,nonNullable:!0})],Q.prototype,"timeZone",null),a([u()],Q.prototype,"tools",null),a([u()],Q.prototype,"toolViewManager",void 0),a([u({readOnly:!0})],Q.prototype,"type",void 0),a([u({type:Number})],Q.prototype,"scale",void 0),a([u({readOnly:!0})],Q.prototype,"updating",void 0),a([u({readOnly:!0})],Q.prototype,"initialExtentRequired",void 0),a([u({readOnly:!0})],Q.prototype,"initialExtent",null),a([u()],Q.prototype,"cursor",null),a([u({readOnly:!0})],Q.prototype,"input",void 0),a([u({type:K2,nonNullable:!0})],Q.prototype,"navigation",void 0),a([u()],Q.prototype,"layerViewManager",void 0),a([u()],Q.prototype,"analysisViewManager",void 0),a([u()],Q.prototype,"selectionManager",void 0),a([u()],Q.prototype,"width",void 0),a([u()],Q.prototype,"height",void 0),a([u({readOnly:!0})],Q.prototype,"resizing",void 0),a([u({value:null,readOnly:!0})],Q.prototype,"size",null),a([u({readOnly:!0})],Q.prototype,"suspended",void 0),a([u({readOnly:!0})],Q.prototype,"viewEvents",void 0),a([u({readOnly:!0})],Q.prototype,"persistableViewModels",void 0),a([u()],Q.prototype,"_isValid",void 0),a([u()],Q.prototype,"_readyCycleForced",void 0),a([u()],Q.prototype,"_lockedSpatialReference",void 0),a([u()],Q.prototype,"_userTimeZone",void 0),a([u()],Q.prototype,"_lockedTimeZone",void 0),a([u()],Q.prototype,"_userTimeExtent",void 0),a([u()],Q.prototype,"_lockedTimeExtent",void 0),a([u({type:a3})],Q.prototype,"theme",void 0),a([u({readOnly:!0,type:a3})],Q.prototype,"effectiveTheme",null),Q=nu=a([_("esri.views.View")],Q);const ry=globalThis.$arcgis;ry&&!ry.views&&Object.defineProperty(ry,"views",{configurable:!1,enumerable:!0,writable:!1,value:Q.views});const Eq=Q;function Pq(t){return t.layerViews}function Je(){return[0,0]}function Rq(t){return[t[0],t[1]]}function Ch(t,e){return[t,e]}function Oq(t,e){return[t,e]}function Cq(t,e=Je()){const r=Math.min(2,t.length);for(let i=0;i<r;++i)e[i]=t[i];return e}function bT(){return Je()}function _T(){return Ch(1,1)}function ST(){return Ch(1,0)}function xT(){return Ch(0,1)}const kq=bT(),Fq=_T(),Aq=ST(),Lq=xT();Object.freeze(Object.defineProperty({__proto__:null,ONES:Fq,UNIT_X:Aq,UNIT_Y:Lq,ZEROS:kq,clone:Rq,create:Je,freeze:Oq,fromArray:Cq,fromValues:Ch,ones:_T,unitX:ST,unitY:xT,zeros:bT},Symbol.toStringTag,{value:"Module"}));function Nq(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function $T(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Dq(t,e,r,i,s,n,o){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t[4]=n,t[5]=o,t}function d6(t,e){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5];let c=r*n-i*s;return c?(c=1/c,t[0]=n*c,t[1]=-i*c,t[2]=-s*c,t[3]=r*c,t[4]=(s*l-n*o)*c,t[5]=(i*o-r*l)*c,t):null}function jq(t){return t[0]*t[3]-t[1]*t[2]}function TT(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=r[0],h=r[1],y=r[2],f=r[3],m=r[4],g=r[5];return t[0]=i*d+n*h,t[1]=s*d+o*h,t[2]=i*y+n*f,t[3]=s*y+o*f,t[4]=i*m+n*g+l,t[5]=s*m+o*g+c,t}function kh(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=Math.sin(r),h=Math.cos(r);return t[0]=i*h+n*d,t[1]=s*h+o*d,t[2]=i*-d+n*h,t[3]=s*-d+o*h,t[4]=l,t[5]=c,t}function X2(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=r[0],h=r[1];return t[0]=i*d,t[1]=s*d,t[2]=n*h,t[3]=o*h,t[4]=l,t[5]=c,t}function Gc(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3],l=e[4],c=e[5],d=r[0],h=r[1];return t[0]=i,t[1]=s,t[2]=n,t[3]=o,t[4]=i*d+n*h+l,t[5]=s*d+o*h+c,t}function MT(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=0,t[5]=0,t}function IT(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function h6(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Vq(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function zq(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function qq(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function ET(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function Uq(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function Gq(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t[4]=e[4]+r[4]*i,t[5]=e[5]+r[5]*i,t}function Bq(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Wq(t,e){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=e[0],d=e[1],h=e[2],y=e[3],f=e[4],m=e[5],g=$r();return Math.abs(r-c)<=g*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-d)<=g*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-h)<=g*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-y)<=g*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-f)<=g*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(l-m)<=g*Math.max(1,Math.abs(l),Math.abs(m))}const Hq=TT,Zq=ET;Object.freeze(Object.defineProperty({__proto__:null,add:qq,copy:Nq,determinant:jq,equals:Wq,exactEquals:Bq,frob:zq,fromRotation:MT,fromScaling:IT,fromTranslation:h6,identity:$T,invert:d6,mul:Hq,multiply:TT,multiplyScalar:Uq,multiplyScalarAndAdd:Gq,rotate:kh,scale:X2,set:Dq,str:Vq,sub:Zq,subtract:ET,translate:Gc},Symbol.toStringTag,{value:"Module"}));function Bs(){return[1,0,0,1,0,0]}function Jq(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Qq(t,e,r,i,s,n){return[t,e,r,i,s,n]}const Yq=Bs();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Yq,clone:Jq,create:Bs,fromValues:Qq},Symbol.toStringTag,{value:"Module"}));const s1={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new vt({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:B.WebMercator}),minus180Line:new vt({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:B.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new vt({paths:[[[180,-180],[180,180]]],spatialReference:B.WGS84}),minus180Line:new vt({paths:[[[-180,-180],[-180,180]]],spatialReference:B.WGS84})}};function Ha(t,e){return Math.ceil((t-e)/(2*e))}function PT(t,e){const r=Id(t);for(const i of r)for(const s of i)s[0]+=e;return t}function Id(t){return Ka(t)?t.rings:t.paths}function Wae(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function ra(t){return typeof t=="string"?Hs(t):P(t)}function Kq(t,e,r){const i={};for(const s in t){if(s==="declaredClass")continue;const n=t[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))i[s]=n.map(o=>Kq(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(r?.[s]);i[s]=e?o:JSON.stringify(o)}else i[s]=e?n:JSON.stringify(n);else i[s]=n}return i}function Xq(t,e){return t?e&&QR(t)?e:JR(t)??dt?.findCredential(t)?.token:null}async function Hae(t,e,r){const i=Xq(t,e);return i||(!dt&&qr.request.useIdentity&&await L(()=>import("./money-tides-IdentityManager-DiwRQQCB.js"),__vite__mapDeps([205,3,1,2,4,5,11,12,176])),(await dt.getCredential(t,r))?.token)}async function eU(t,e,r,i){const s=ra(t),n=e[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:qd(n),target:JSON.stringify({geometryType:Sh(e[0]),geometries:e}),cutter:JSON.stringify(r)}},l=await Le(s.path+"/cut",o),{cutIndexes:c,geometries:d=[]}=l.data;return{cutIndexes:c,geometries:d.map(h=>{const y=Ho(h);return y.spatialReference=n,y})}}function tU(t){return{geometryType:Sh(t[0]),geometries:t.map(e=>e.toJSON())}}function rU(t,e,r){const i=oD(e);return t.map(s=>{const n=i.fromJSON(s);return n.spatialReference=r,n})}async function iU(t,e,r){const i=typeof t=="string"?Hs(t):t,s=e[0].spatialReference,n=Sh(e[0]),o={...r,query:{...i.query,f:"json",sr:qd(s),geometries:JSON.stringify(tU(e))}},{data:l}=await Le(i.path+"/simplify",o);return rU(l.geometries,n,s)}const RT=()=>N.getLogger("esri.geometry.support.normalizeUtils");function sU(t){return t.type==="polygon"}function nU(t){return t[0].type==="polygon"}function oU(t){return t[0].type==="polyline"}function g7(t){const e=[];let r=0,i=0;for(let s=0;s<t.length;s++){const n=t[s];let o=null;for(let l=0;l<n.length;l++)o=n[l],e.push(o),l===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&e.push([(r+i)/2,0])}return e}function aU(t,e){if(!(t instanceof vt||t instanceof Ve)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw RT().error(s),new M("internal:geometry",s)}const r=Id(t),i=[];for(const s of r){const n=[];i.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const l=s[o][0],c=s[o][1],d=s[o+1][0],h=s[o+1][1],y=Math.sqrt((d-l)*(d-l)+(h-c)*(h-c)),f=(h-c)/y,m=(d-l)/y,g=y/e;if(g>1){for(let $=1;$<=g-1;$++){const E=$*e,T=m*E+l,R=f*E+c;n.push([T,R])}const v=(y+Math.floor(g-1)*e)/2,b=m*v+l,S=f*v+c;n.push([b,S])}n.push([d,h])}}return sU(t)?new Ve({rings:i,spatialReference:t.spatialReference}):new vt({paths:i,spatialReference:t.spatialReference})}function v7(t,e,r){if(e){const i=aU(t,1e6);t=Ou(i,!0)}return r&&(t=PT(t,r)),t}function w7(t,e,r){if(Array.isArray(t)){const i=t[0];if(i>e){const s=Ha(i,e);t[0]=i+s*(-2*e)}else if(i<r){const s=Ha(i,r);t[0]=i+s*(-2*r)}}else{const i=t.x;if(i>e){const s=Ha(i,e);t=t.clone().offset(s*(-2*e),0)}else if(i<r){const s=Ha(i,r);t=t.clone().offset(s*(-2*r),0)}}return t}function lU(t,e){let r=-1;for(let i=0;i<e.cutIndexes.length;i++){const s=e.cutIndexes[i],n=e.geometries[i],o=Id(n);for(let l=0;l<o.length;l++){const c=o[l];c.some(d=>{if(d[0]<180)return!0;{let h=0;for(let f=0;f<c.length;f++){const m=c[f][0];h=m>h?m:h}h=Number(h.toFixed(9));const y=-360*Ha(h,180);for(let f=0;f<c.length;f++){const m=n.getPoint(l,f);n.setPoint(l,f,m.clone().offset(y,0))}return!0}})}if(s===r){if(nU(t))for(const l of Id(n))t[s]=t[s].addRing(l);else if(oU(t))for(const l of Id(n))t[s]=t[s].addPath(l)}else r=s,t[s]=n}return t}async function OT(t,e,r){if(!Array.isArray(t))return OT([t],e);e&&typeof e!="string"&&RT().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof e=="string"?e:e?.url??qr.geometryServiceUrl;let s,n,o,l,c,d,h,y,f=0;const m=[],g=[];for(const T of t)if(T!=null)if(s||(s=T.spatialReference,n=xr(s),o=s.isWebMercator,d=o?102100:4326,l=s1[d].maxX,c=s1[d].minX,h=s1[d].plus180Line,y=s1[d].minus180Line),n)if(T.type==="mesh")g.push(T);else if(T.type==="point")g.push(w7(T.clone(),l,c));else if(T.type==="multipoint"){const R=T.clone();R.points=R.points.map(O=>w7(O,l,c)),g.push(R)}else if(T.type==="extent"){const R=T.clone()._normalize(!1,!1,n);g.push(R.rings?new Ve(R):R)}else if(T.extent){const R=T.extent,O=Ha(R.xmin,c)*(2*l);let z=O===0?T.clone():PT(T.clone(),O);R.offset(O,0);let{xmin:U,xmax:J}=R;U=Number(U.toFixed(9)),J=Number(J.toFixed(9)),R.intersects(h)&&J!==l?(f=J>f?J:f,z=v7(z,o),m.push(z),g.push("cut")):R.intersects(y)&&U!==c?(f=J*(2*l)>f?J*(2*l):f,z=v7(z,o,360),m.push(z),g.push("cut")):g.push(z)}else g.push(T.clone());else g.push(T);else g.push(T);let v=Ha(f,l),b=-90;const S=v,$=new vt;for(;v>0;){const T=360*v-180;$.addPath([[T,b],[T,-1*b]]),b*=-1,v--}if(m.length>0&&S>0){const T=lU(m,await eU(i,m,$,r)),R=[],O=[];for(let J=0;J<g.length;J++){const ie=g[J];if(ie!=="cut")O.push(ie);else{const oe=T.shift(),ee=t[J];ee!=null&&ee.type==="polygon"&&ee.rings&&ee.rings.length>1&&oe.rings.length>=ee.rings.length?(R.push(oe),O.push("simplify")):O.push(o?Ja(oe):oe)}}if(!R.length)return O;const z=await iU(i,R,r),U=[];for(let J=0;J<O.length;J++){const ie=O[J];ie!=="simplify"?U.push(ie):U.push(o?Ja(z.shift()):z.shift())}return U}const E=[];for(let T=0;T<g.length;T++){const R=g[T];if(R!=="cut")E.push(R);else{const O=m.shift();E.push(o===!0?Ja(O):O)}}return E}function uU(t){if(!t)return null;const e=t.extent;if(!e)return null;const r=t.spatialReference&&xr(t.spatialReference);if(!r)return e;const[i,s]=r.valid,n=2*s,{width:o}=e;let l,{xmin:c,xmax:d}=e;if([c,d]=[d,c],t.type==="extent"||o===0||o<=s||o>n||c<i||d>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;l=g7(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;l=g7(t.paths);break;case"multipoint":l=t.points}const h=e.clone();for(let y=0;y<l.length;y++){let f=l[y][0];f<0?(f+=s,d=Math.max(f,d)):(f-=s,c=Math.min(f,c))}return h.xmin=c,h.xmax=d,h.width<o?(h.xmin-=s,h.xmax-=s,h):e}function y6(t,e,r){const i=xr(r);if(i==null)return t;const[s,n]=i.valid,o=2*n;let l=0,c=0;e>n?l=Math.ceil(Math.abs(e-n)/o):e<s&&(l=-Math.ceil(Math.abs(e-s)/o)),t>n?c=Math.ceil(Math.abs(t-n)/o):t<s&&(c=-Math.ceil(Math.abs(t-s)/o));let d=t+(l-c)*o;const h=d-e;return h>n?d-=o:h<s&&(d+=o),d}function Zae(t,e){return f6(e)?.normalize(t)??t}function f6(t){const e=xr(t);if(e==null)return null;const[r,i]=e.valid;return new B2(r,i)}const Jae=f6(B.WGS84);f6(B.WebMercator);const CT=96,kT=39.37,cU=180/Math.PI;function FT(t){return t.wkid?t:t.spatialReference||B.WGS84}function m6(t,e){return e.type?Dt(t,e.x,e.y):qu(t,e)}function AT(t){return vi(t)}function e4(t,e,r=0){let i=t.width,s=t.height;if(r!==0){const l=vh(r),c=Math.abs(Math.cos(l)),d=Math.abs(Math.sin(l));i=t.width*c+t.height*d,s=t.width*d+t.height*c}const n=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(i/n,s/o)*vU(t.spatialReference)}async function Vp(t,e,r,i){let s,n;if(!t||Array.isArray(t)&&!t.length)return null;if(q.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const l=t.every(h=>"attributes"in h),c=t.some(h=>!h.geometry);let d=t;if(l&&c&&e&&e.allLayerViews){const h=new Map;for(const g of t){const v=g.layer,b=h.get(v)||[],S=g.attributes[v.objectIdField];S!=null&&b.push(S),h.set(v,b)}const y=[];h.forEach((g,v)=>{const b=e.allLayerViews?.find(S=>S.layer.id===v.id);if(b&&"queryFeatures"in b){const S=v.createQuery();S.objectIds=g,S.returnGeometry=!0,y.push(b.queryFeatures(S))}});const f=await Promise.all(y),m=[];for(const g of f)if(g&&g.features&&g.features.length)for(const v of g.features)v.geometry!=null&&m.push(v.geometry);d=m}for(const h of d)i=await Vp(h,e,r,i);return i}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new se(t);else if(t instanceof $t)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const l=t.layer,c=e.allLayerViews?.find(d=>d.layer.id===l.id);if(c&&"queryFeatures"in c){const d=l.createQuery();d.objectIds=[t.attributes[l.objectIdField]],d.returnGeometry=!0,s=(await c.queryFeatures(d))?.features?.[0]?.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new le({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=uU(s);break;default:n=s.extent}if(!n)return null;Qn()||fs(n.spatialReference,r)||await Wo();const o=Yo(n,r);if(!o)return null;if(i){const l=o.center,c=l.clone();c.x=y6(l.x,i.center.x,r),c.x!==l.x&&o.centerAt(c),i=i.union(o)}else i=o;return i}function pU(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,r=0;for(const i of t){const s=i.layer;s?.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,r=s.maxScale>r?s.maxScale:r)}return e&&r?{min:e,max:r}:null}}}function b7(t,e){const r=FT(t);return ot(r,e)||r.imageCoordinateSystem||e.imageCoordinateSystem?t:Yo(t,e)}async function dU(t,e){if(!t||!e)return new Di({targetGeometry:new se,scale:0,rotation:0});let r=e.spatialReference;const{constraints:i,padding:s,viewpoint:n,size:o}=e,l=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let c=null;t instanceof Di?c=t:t.viewpoint?c=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(c=t.target);let d=null;c?.targetGeometry?d=c.targetGeometry:t instanceof le?d=t:t instanceof $t?d=await Vp(t,e,r):t&&(d=await Vp(t.center,e,r)||await Vp(t.target,e,r)||await Vp(t,e,r)),!d&&n?.targetGeometry?d=n.targetGeometry:!d&&e.extent&&(d=e.extent),r||(r=FT(e.spatialReference||e.extent||d)),Qn()||ot(d.spatialReference,r)||fs(d.spatialReference,r)||await Wo();const h=b7(d,r),y="center"in h?h.center:h;e.pickClosestTarget!==!1&&y.type==="point"&&n.targetGeometry?.type==="point"&&(y.x=y6(y.x,n.targetGeometry.x,y.spatialReference));let f=0;c?f=c.rotation:t.hasOwnProperty("rotation")?f=t.rotation:n&&(f=n.rotation);let m=0;m=c?.targetGeometry!=null&&c.targetGeometry.type==="point"?c.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(t.zoom):Array.isArray(d)||d.type==="point"||d.type==="extent"&&d.width===0&&d.height===0?n.scale:e4(b7(d.extent,r),l,f);const g=pU(t.target??t);g&&(g.min&&g.min<m?m=g.min:g.max&&g.max>m&&(m=g.max));let v=new Di({targetGeometry:y,scale:m,rotation:f});return i&&(v=i.fit(v),i.constrainByGeometry(v),i.rotationEnabled||(v.rotation=n.rotation)),v}function sr(t,e){const r=t.targetGeometry,i=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function hU(t,e,r){return r?Dt(t,.5*(e[0]-r.right+r.left),.5*(e[1]-r.bottom+r.top)):wh(t,e,.5)}const yU=(function(){const t=Je();return function(e,r,i){const s=r.targetGeometry;m6(t,s);const n=.5*Qc(r);return e.xmin=t[0]-n*i[0],e.ymin=t[1]-n*i[1],e.xmax=t[0]+n*i[0],e.ymax=t[1]+n*i[1],e.spatialReference=s.spatialReference,e}})();function fU(t,e,r,i,s){return d3(t,e,r.center),t.scale=e4(r,i),s?.constraints?.constrain(t),t}function mU(t,e,r,i){return w6(t,e,r,i),d6(t,t)}const LT=(function(){const t=Je();return function(e,r,i){return Cg(e,wU(e,r),hU(t,r,i))}})(),gU=(function(){const t=Bs(),e=Je();return function(r,i,s,n){const o=Qc(i),l=g6(i);return Dt(e,o,o),IT(t,e),kh(t,t,l),Gc(t,t,LT(e,s,n)),Gc(t,t,[0,n.top-n.bottom]),Dt(r,t[4],t[5])}})();function Qc(t){return t.scale*NT(t.targetGeometry?.spatialReference)}function NT(t){return ci(t)?1/(AT(t)*kT*CT):1}function g6(t){return Og(t.rotation)||0}function vU(t){return ci(t)?AT(t)*kT*CT:1}function wU(t,e){return wh(t,e,.5)}const v6=(function(){const t=Je(),e=Je(),r=Je();return function(i,s,n,o,l,c){return bS(t,s),wh(e,n,.5*c),Dt(r,1/o*c,-1/o*c),h6(i,e),l&&kh(i,i,l),X2(i,i,r),Gc(i,i,t),i}})(),w6=(function(){const t=Je();return function(e,r,i,s){const n=Qc(r),o=g6(r);return m6(t,r.targetGeometry),v6(e,t,i,n,o,s)}})(),bU=(function(){const t=Je();return function(e,r,i,s){const n=Qc(r);return m6(t,r.targetGeometry),v6(e,t,i,n,0,s)}})();function DT(t){const e=xr(t);return e?e.valid[1]-e.valid[0]:0}function _U(t,e){return Math.round(DT(t)/e)}const SU=(function(){const t=Je(),e=Je(),r=[0,0,0];return function(i,s,n){Bd(t,i,s),Sf(t,t),Bd(e,i,n),Sf(e,e),SS(r,t,e);let o=Math.acos(_S(t,e)/(Y0(t)*Y0(e)))*cU;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),xU=(function(){const t=Je();return function(e,r,i,s){const n=e.targetGeometry;return sr(e,r),gU(t,r,i,s),n.x+=t[0],n.y+=t[1],e}})(),d3=function(t,e,r){sr(t,e);const i=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t},$U=(function(){const t=Je();return function(e,r,i,s,n){n||(n="center"),Cg(t,i,s),wh(t,t,.5);const o=t[0],l=t[1];switch(n){case"center":Dt(t,0,0);break;case"left":Dt(t,-o,0);break;case"top":Dt(t,0,l);break;case"right":Dt(t,o,0);break;case"bottom":Dt(t,0,-l);break;case"top-left":Dt(t,-o,l);break;case"bottom-left":Dt(t,-o,-l);break;case"top-right":Dt(t,o,l);break;case"bottom-right":Dt(t,o,-l)}return t4(e,r,t),e}})();function Qae(t,e,r){return sr(t,e),t.rotation+=r,t}function TU(t,e,r){return sr(t,e),t.rotation=r,t}const MU=(function(){const t=Je();return function(e,r,i,s,n){return sr(e,r),isNaN(i)||i===0||(VT(t,s,r,n),e.scale=r.scale*i,zT(t,t,e,n),t4(e,e,Dt(t,t[0]-s[0],s[1]-t[1]))),e}})();function _7(t,e,r){return sr(t,e),t.scale=r,t}const jT=(function(){const t=Je();return function(e,r,i,s,n,o){return sr(e,r),isNaN(i)||i===0||(VT(t,n,r,o),e.scale=r.scale*i,e.rotation+=s,zT(t,t,e,o),t4(e,e,Dt(t,t[0]-n[0],n[1]-t[1]))),e}})(),Yae=(function(){const t=Je(),e=Je();return function(r,i,s,n,o,l,c){return LT(e,l,c),mS(t,o,e),n?jT(r,i,s,n,t,l):MU(r,i,s,t,l)}})(),VT=(function(){const t=Bs();return function(e,r,i,s){return As(e,r,mU(t,i,s,1))}})(),zT=(function(){const t=Bs();return function(e,r,i,s){return As(e,r,w6(t,i,s,1))}})(),t4=(function(){const t=Je(),e=Bs();return function(r,i,s){sr(r,i);const n=Qc(i),o=r.targetGeometry;return MT(e,g6(i)),X2(e,e,Ch(n,n)),As(t,s,e),o.x+=t[0],o.y+=t[1],r}})();function qT(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function IU(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function EU(t,e,r,i,s,n){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function UT(t,e,r,i){const s=e[i],n=e[i+1];t[i]=r[0]*s+r[2]*n+r[4],t[i+1]=r[1]*s+r[3]*n+r[5]}function PU(t,e,r,i=0,s=0,n=2){const o=s||e.length/n;for(let l=i;l<o;l++)UT(t,e,r,l*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:IU,create:qT,fromValues:EU,transform:UT,transformMany:PU},Symbol.toStringTag,{value:"Module"}));function m0(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function RU(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function OU(t,e,r,i,s,n,o,l,c){const d=new Float32Array(9);return d[0]=t,d[1]=e,d[2]=r,d[3]=i,d[4]=s,d[5]=n,d[6]=o,d[7]=l,d[8]=c,d}Object.freeze(Object.defineProperty({__proto__:null,clone:RU,create:m0,fromValues:OU},Symbol.toStringTag,{value:"Module"}));function GT(){return new Float32Array(2)}function CU(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function Bc(t,e){const r=new Float32Array(2);return r[0]=t,r[1]=e,r}function BT(){return GT()}function WT(){return Bc(1,1)}function HT(){return Bc(1,0)}function ZT(){return Bc(0,1)}const kU=BT(),FU=WT(),AU=HT(),LU=ZT();Object.freeze(Object.defineProperty({__proto__:null,ONES:FU,UNIT_X:AU,UNIT_Y:LU,ZEROS:kU,clone:CU,create:GT,fromValues:Bc,ones:WT,unitX:HT,unitY:ZT,zeros:BT},Symbol.toStringTag,{value:"Module"}));function NU(t){return t instanceof Float32Array&&t.length>=2}function DU(t){return Array.isArray(t)&&t.length>=2}function iy(t){return NU(t)||DU(t)}var h3;const Ys=[0,0];let dn=h3=class extends A{constructor(t){super(t),this._viewpoint2D={center:Je(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new le,this.id=0,this.inverseTransform=Bs(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Bs(),this.transformNoRotation=Bs(),this.displayMat3=m0(),this.displayViewMat3=m0(),this.viewMat3=m0(),this.viewMat2d=qT(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,r=t.targetGeometry;e.center[0]=r.x,e.center[1]=r.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,r=this.viewpoint;return r&&e?(this.viewpoint=sr(r,t.viewpoint),this._set("size",qu(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new h3({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,r){return iy(e)?As(t,e,this.inverseTransform):(Ys[0]=e,Ys[1]=r,As(t,Ys,this.inverseTransform))}toScreen(t,e,r){return iy(e)?As(t,e,this.transform):(Ys[0]=e,Ys[1]=r,As(t,Ys,this.transform))}toScreenNoRotation(t,e,r){return iy(e)?As(t,e,this.transformNoRotation):(Ys[0]=e,Ys[1]=r,As(t,Ys,this.transformNoRotation))}wrapMapCoordinate(t,e){qu(t,e);const[r]=e,[i]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:l}=s;if(n.isWrappable){const c=DT(n)/2;o=Math.max(o,i-c),l=Math.min(l,i+c)}return(r<o||r>l)&&(t[0]=y6(r,i,n)),t}getScreenTransform(t,e){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size");return v6(t,r,s,e,0,i),t}_update(){const{center:t,spatialReference:e,scale:r,rotation:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Di({targetGeometry:new se(t[0],t[1],e),scale:r,rotation:i});if(this._set("viewpoint",o),!n||!e||!r)return;this.resolution=Qc(o),this.rotation=i,this.scale=r,this.spatialReference=e,qu(this.center,t);const l=n[0]!==0?2/n[0]:0,c=n[1]!==0?-2/n[1]:0;Uu(this.displayMat3,l,0,0,0,c,0,-1,1,1);const d=ES(this.viewMat3),h=Bc(n[0]/2,n[1]/2),y=Bc(-n[0]/2,-n[1]/2),f=Og(i);$f(d,d,h),OS(d,d,f),$f(d,d,y),Hd(this.displayViewMat3,this.displayMat3,d);const m=h6(this.viewMat2d,h);return kh(m,m,f),Gc(m,m,y),yU(this.extent,o,n),w6(this.transform,o,n,s),d6(this.inverseTransform,this.transform),bU(this.transformNoRotation,o,n,s),this.worldScreenWidth=_U(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};a([u({readOnly:!0})],dn.prototype,"id",void 0),a([u({value:1,json:{write:!0}})],dn.prototype,"pixelRatio",null),a([u({json:{write:!0}})],dn.prototype,"size",null),a([u()],dn.prototype,"spatialReference",void 0),a([u({type:Di,json:{write:!0}})],dn.prototype,"viewpoint",null),a([u({readOnly:!0})],dn.prototype,"visibleArea",null),dn=h3=a([_("esri.views.2d.ViewState")],dn);const S7=dn;var y3,f3;let An=y3=class extends Z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new y3({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};a([u()],An.prototype,"left",void 0),a([u()],An.prototype,"top",void 0),a([u()],An.prototype,"right",void 0),a([u()],An.prototype,"bottom",void 0),An=y3=a([_("esri.views.2d.PaddedViewState.Padding")],An);let ou=f3=class extends S7{constructor(...t){super(...t),this.paddedViewState=new S7,this._updateContent=(()=>{const e=Je();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const s=this.paddedViewState;Dt(e,i.left+i.right,i.top+i.bottom),Bd(e,r,e),qu(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(ae(()=>[this.size,this.padding],()=>this._updateContent(),It)),this.padding=new An,this.size=[0,0]}set padding(t){this._set("padding",t||new An)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const r=this._get("padding");r&&(e=xU(t.clone(),t,this._get("size"),r));const{targetGeometry:i,rotation:s,scale:n}=e,{x:o,y:l,spatialReference:c}=i,d=this._viewpoint2D;d.center[0]=o,d.center[1]=l,d.rotation=s,d.scale=n,d.spatialReference=c,this._update()}}clone(){return new f3({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};a([u()],ou.prototype,"paddedViewState",void 0),a([u({type:An})],ou.prototype,"padding",null),a([u()],ou.prototype,"viewpoint",null),ou=f3=a([_("esri.views.2d.PaddedViewState")],ou);const b6=ou;let zp=class extends Z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};a([u()],zp.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),a([u()],zp.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),zp=a([_("esri.views.support.debugFlags")],zp);const jU=new zp,JT=Symbol("Yield");let VU=class{constructor(){this._tasks=new Array,this._numPendingTasks=Pc(0),this._readyToRun=Pc(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return JT;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,r,i){return this._addTask((s,n)=>new $7(s,n,e,r,i),Array.prototype.push)}unshift(e,r,i){return this._addTask((s,n)=>new $7(s,n,e,r,i),Array.prototype.unshift)}pushGenerator(e,r,i){return this._addTask((s,n)=>new zU(s,n,e,r,i),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const r=this._tasks.shift();this._updateReadyToRun();try{if(zs(r.signal))this._cancelTask(r,Mt());else switch(r.type){case 0:this._processSimple(r,e);break;case 1:this._processGenerator(r,e);break;case 2:this._processIterator(r,e);break;default:e_(r)}}catch(i){r.reject(i)}return!0}cancelAll(){const e=Mt();for(const r of this._tasks)this._cancelTask(r,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,r){if(e.abortCallback){const i=e.abortCallback(r);e.type===2&&e.iterator.return&&x7(e.iterator.return()),Sr(i)?i.then(e.resolve,e.reject):e.resolve(i)}else e.type===2&&e.iterator.throw&&x7(e.iterator.throw(r)),e.reject(r)}_onIteratorResult(e,r){r.done?e.resolve(r.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,r){const i=e.callback(r);Sr(i)?i.then(e.resolve,e.reject):e.resolve(i)}_processGenerator(e,r){const i=e.generatorFunction(r),s=new qU(e.resolve,e.reject,i,e.signal,e.abortCallback);this._processIterator(s,r)}_processIterator(e,r){const i=e.iterator.next(r);Sr(i)?i.then(s=>this._onIteratorResult(e,s),e.reject):this._onIteratorResult(e,i)}_addTask(e,r){return new Promise((i,s)=>{const n=e(i,s);r.call(this._tasks,n),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function x7(t){Sr(t)?t.then(sy,sy):sy(t)}function sy(t){fi(t)||t instanceof Error||t instanceof M||t!=null&&typeof t=="object"&&"done"in t&&t.done||N.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let _6=class{constructor(e,r,i=void 0,s=void 0){this.resolve=e,this.reject=r,this.signal=i,this.abortCallback=s}},$7=class extends _6{constructor(e,r,i,s,n){super(e,r,s,n),this.callback=i,this.type=0}},zU=class extends _6{constructor(e,r,i,s,n){super(e,r,s,n),this.generatorFunction=i,this.type=1}},qU=class extends _6{constructor(e,r,i,s,n){super(e,r,s,n),this.iterator=i,this.type=2}};function UU(){return new ZU}const fe={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},Pi=0,T7=new Map([[fe.RESOURCE_CONTROLLER_IMMEDIATE,Pi],[fe.RESOURCE_CONTROLLER,4],[fe.SLIDE,Pi],[fe.STREAM_DATA_LOADER,Pi],[fe.ELEVATION_QUERY,Pi],[fe.TERRAIN_SURFACE,1],[fe.SURFACE_GEOMETRY_UPDATES,1],[fe.LOD_RENDERER,2],[fe.GRAPHICS_CORE,2],[fe.I3S_CONTROLLER,2],[fe.POINT_CLOUD_LAYER,2],[fe.FEATURE_TILE_FETCHER,2],[fe.STREAM_CONTROLLER,2],[fe.CLOUDS_GENERATOR,2],[fe.OVERLAY,4],[fe.OVERLAY_RENDERER,4],[fe.STAGE,4],[fe.GRAPHICS_DECONFLICTOR,4],[fe.FILTER_VISIBILITY,4],[fe.SCALE_VISIBILITY,4],[fe.FRUSTUM_VISIBILITY,4],[fe.POINT_OF_INTEREST_FREQUENT,6],[fe.POINT_OF_INTEREST_INFREQUENT,30],[fe.LABELER,8],[fe.FEATURE_QUERY_ENGINE,8],[fe.FEATURE_TILE_TREE,16],[fe.FEATURE_TILE_TREE_ACTIVE,Pi],[fe.ELEVATION_ALIGNMENT,12],[fe.ELEVATION_ALIGNMENT_SCENE,14],[fe.TEXT_TEXTURE_ATLAS,12],[fe.TEXTURE_UNLOAD,12],[fe.LINE_OF_SIGHT_TOOL,16],[fe.LINE_OF_SIGHT_TOOL_INTERACTIVE,Pi],[fe.SNAPPING,Pi],[fe.SHADOW_ACCUMULATOR,30],[fe.FLOW_GENERATOR,12],[fe.MAPVIEW_FETCH_QUEUE,Pi],[fe.MAPVIEW_LAYERVIEW_UPDATE,2],[fe.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Pi]]);function M7(t){return T7.has(t)?T7.get(t):typeof t=="number"?t:1}const GU=We(6.5),I7=We(1),BU=We(30),WU=We(1e3/30),HU=We(100),E7=.9;let ZU=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=Pc(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new _4("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new QT,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=ae(()=>jU.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,or);for(const e of Object.keys(fe))this.performanceInfo.tasks.set(fe[e],new _4(String(fe[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,Ze(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,r){const i=new JU(this,e,r);return this._tasks.push(i),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new _4(e)),i}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const r=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-r),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let r=GU,i=e.frameDuration,s=I7;switch(this.state){case 2:r=We(0),i=We(Math.max(HU,e.frameDuration)),s=BU;break;case 1:i=We(Math.max(WU,e.frameDuration))}return i=We(i-e.elapsedFrameTime-r),this.state!==2&&i<I7&&!this._forceTask?(this._forceTask=!0,!1):(i=We(Math.max(i,s)),this._budget.reset(i),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(We(0)),this._budget.madeProgress()}removeTask(e){Xy(this._tasks,e),Xy(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(r=>{r.name===e&&r.setPriority(e)})}_getState(e){if(this._runQueue.some(i=>i.name===e))return"s";let r="i";return this._tasks.forEach(i=>{i.name===e&&i.needsUpdate&&(i.schedulePriority<=1?r="r":r!=="r"&&(r="w"))}),r}_getRuntime(e){let r=0;return this._tasks.forEach(i=>{i.name===e&&(r+=i.runtime)}),r}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(i=>{i.needsUpdate&&e.set(i.name,(e.get(i.name)||0)+1)}),e.size===0)return null;let r="";return e.forEach((i,s)=>{r+=i>1?` ${i}x ${s}`:` ${s}`}),r}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((r,i)=>i.needsUpdate?++r:r,0);this._load=this._load*E7+e*(1-E7)}_schedule(){for(YR(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===Pi&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,r=0;if(this._tasks.forEach(i=>{i.needsUpdate&&i.schedulePriority!==0&&i.basePriority!==Pi&&i.blockFrame!==this._frameNumber&&(e=!0,r=Math.max(r,i.basePriority),i.schedulePriority===1?(i.schedulePriority=0,this._runQueue.push(i)):--i.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),r=this._runQueue.pop();this._budget.resetProgress();try{r.task.runTask(this._budget)===JT&&(r.blockFrame=this._frameNumber)}catch(s){N.getLogger("esri.views.support.Scheduler").error(`Exception in task "${r.name}"`,s),r.blockFrame=this._frameNumber}!this._budget.hasProgressed&&r.blockFrame!==this._frameNumber&&r.needsUpdate&&(r.name,r.blockFrame=this._frameNumber),r.schedulePriority=r.basePriority;const i=this._budget.now()-e;if(r.runtime+=i,this._frameTaskTimes.set(r.priority,this._frameTaskTimes.get(r.priority)+i),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(fe))this._frameTaskTimes.set(fe[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((r,i)=>this.performanceInfo.tasks.get(i).push(r)),this.performanceInfo.total.push(e)}get test(){return this._test}},JU=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,r,i){this._scheduler=e,this.name=r,this.blockFrame=0,this.runtime=0,this._queue=new VU,this._handles=new og,this._basePriority=M7(r),this.schedulePriority=this._basePriority,this._task=Pc(i??this._queue),this._handles.add(ji(()=>this.task.readyToRun,s=>e.taskRunningChanged(s)))}remove(){this.processQueue(Ed),this._scheduler.removeTask(this),this.schedule=ny.schedule,this.reschedule=ny.reschedule,this.scheduleGenerator=ny.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const r=M7(e);this._basePriority!==Pi&&this.schedulePriority===0||(this.schedulePriority=r),this._basePriority=r}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,r,i){return this._queue.push(e,r,i)}reschedule(e,r,i){return this._queue.unshift(e,r,i)}scheduleGenerator(e,r,i){return this._queue.pushGenerator(e,r,i)}processQueue(e){return this._queue.runTask(e)}},QT=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const Ed=new QT;Ed.enabled=!1;let QU=class{remove(){}processQueue(){}schedule(e,r,i){try{if(zs(r)){const s=Mt();return i?Promise.resolve(i(s)):Promise.reject(s)}return KR(e(Ed))}catch(s){return Promise.reject(s)}}reschedule(e,r,i){return this.schedule(e,r,i)}async scheduleGenerator(e,r,i){if(zs(r)){const n=Mt();if(i)return i(n);throw n}const s=e(Ed);for(;;){const n=s.next(Ed),o=Sr(n)?await n:n;if(zs(r)){const l=Mt();if(i){const d=i(l),h=s.return(null);return Sr(h)&&await jd(h),d}const c=s.throw(l);throw Sr(c)&&await jd(c),l}if(o.done)return o.value}}};const ny=new QU;let YU=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=UU(),this._schedulerHandle=ji(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||Sr(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:n,state:{id:o}}=this.view;i?.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(r)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new b6,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=ae(()=>e.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=Ic(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const r=this.view.state,i=e.lastUpdateId;i!=null&&(this.stationary||e.moving)||(e.moving=!0),i!==r.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=r.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function KU(t,e){const{spatialReference:r}=e,i=[e.x,e.y];let s,n,o,l;const c=[0,0],d=XU(t);for(let f=0;f<d.length;f++){const m=d[f];for(let g=0;g<m.length-1;g++){pF(c,i,m,g);const v=V2(i,c);(s==null||v<s)&&(s=v,n=[...c],o=f,l=g)}}if(s==null||!n||o==null||l==null)throw new M("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,y]=n;return{coordinate:new se({x:h,y,spatialReference:r}),distance:s}}function XU(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var m3;let ja=m3=class extends Sg(Z){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Yo(this.geometry,this.spatialReference)}catch(t){return N.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const r=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?mh(this.normalizedGeometry,r):bg(this.normalizedGeometry,r))return t;const{coordinate:i}=KU(this.normalizedGeometry,r);return i&&(t.targetGeometry=i),t}clone(){return new m3({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};a([u({constructOnly:!0})],ja.prototype,"geometry",void 0),a([u({readOnly:!0})],ja.prototype,"normalizedGeometry",null),a([u({constructOnly:!0})],ja.prototype,"spatialReference",void 0),ja=m3=a([_("esri.views.2d.constraints.GeometryConstraint")],ja);var g3;let qp=g3=class extends Sg(Z){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new g3({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};a([u()],qp.prototype,"enabled",void 0),a([u()],qp.prototype,"rotationEnabled",void 0),qp=g3=a([_("esri.views.2d.constraints.RotationConstraint")],qp);const YT=qp;var v3;let Pr=v3=class extends Sg(Z){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:r,maxScale:i,minZoom:s,maxZoom:n}=this,o=-1,l=-1,c=!1,d=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!e?.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);e=e.map(h=>h.clone()),e.sort((h,y)=>y.scale-h.scale),e.forEach((h,y)=>h.level=y);for(const h of e)!c&&r>0&&r>=h.scale&&(o=h.level,c=!0),!d&&i>0&&i>=h.scale&&(l=t?t.level:-1,d=!0),t=h;s===-1&&(s=r===0?0:o),n===-1&&(n=i===0?e.length-1:l),s=Math.max(s,0),s=Math.min(s,e.length-1),n=Math.max(n,0),n=Math.min(n,e.length-1),s>n&&([s,n]=[n,s]),r=e[s].scale,i=e[n].scale,e.splice(0,s),e.splice(n-s+1),e.forEach((h,y)=>{this._lodByScale[h.scale]=h,this._scales[y]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(t,e){if(e&&t.scale===e.scale)return t;const r=this.effectiveMinScale,i=this.effectiveMaxScale,s=t.targetGeometry,n=e&&e.targetGeometry,o=i!==0&&t.scale<i,l=r!==0&&t.scale>r;if(o||l){const c=l?r:i;if(e&&n){const d=(c-e.scale)/(t.scale-e.scale);s.x=n.x+(s.x-n.x)*d,s.y=n.y+(s.y-n.y)*d}t.scale=c}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),r=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(r>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const r=Math.floor(t),i=Math.ceil(t);return e[r]+(t-r)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let r,i;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(r=e[s],i=e[s+1],i===t)return s+this.effectiveMinZoom+1;if(r>t&&i<t)return s+this.effectiveMinZoom+1-(t-i)/(r-i)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const r=Math.round(this.scaleToZoom(t));return this.zoomToScale(r+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const r=Math.round(this.scaleToZoom(t));return this.zoomToScale(r-1)}clone(){return new v3({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,r)=>Math.abs(r-t)<=Math.abs(e-t)?r:e,this._scales[0])),this._lodByScale[t].scale}};a([u({readOnly:!0})],Pr.prototype,"effectiveLODs",void 0),a([u({readOnly:!0})],Pr.prototype,"effectiveMinZoom",void 0),a([u({readOnly:!0})],Pr.prototype,"effectiveMaxZoom",void 0),a([u({readOnly:!0})],Pr.prototype,"effectiveMinScale",void 0),a([u({readOnly:!0})],Pr.prototype,"effectiveMaxScale",void 0),a([u()],Pr.prototype,"lods",void 0),a([u()],Pr.prototype,"minZoom",void 0),a([u()],Pr.prototype,"maxZoom",void 0),a([u()],Pr.prototype,"minScale",void 0),a([u()],Pr.prototype,"maxScale",void 0),a([u()],Pr.prototype,"snapToZoom",void 0),Pr=v3=a([_("esri.views.2d.constraints.ZoomConstraint")],Pr);const KT=Pr,eG={base:null,key:"type",typeMap:{extent:le,polygon:Ve}};let Ke=class extends Z{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new q}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new ja({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new YT({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),r=this.lods||this.view?.constraintsInfo.lods,i=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,l=this.snapToZoom;return e&&e.lods===r&&e.minZoom===i&&e.maxZoom===s&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===l?e:new KT({lods:r,minZoom:i,maxZoom:s,minScale:n,maxScale:o,snapToZoom:l})}canZoomInTo(e){const r=this.effectiveMaxScale;return r===0||e>=r}canZoomOutTo(e){const r=this.effectiveMinScale;return r===0||e<=r}constrain(e,r){return this._zoom.constrain(e,r),this._rotation.constrain(e,r),this._geometry.constrain(e,r),this.customConstraints.forEach(i=>i.constrain(e,r)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(r=>r.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};a([u({readOnly:!0})],Ke.prototype,"effectiveLODs",null),a([u({readOnly:!0})],Ke.prototype,"effectiveMinScale",null),a([u({readOnly:!0})],Ke.prototype,"effectiveMaxScale",null),a([u({readOnly:!0})],Ke.prototype,"effectiveMinZoom",null),a([u({readOnly:!0})],Ke.prototype,"effectiveMaxZoom",null),a([u({types:eG,value:null})],Ke.prototype,"geometry",null),a([u({type:[Gt]})],Ke.prototype,"lods",void 0),a([u()],Ke.prototype,"minScale",void 0),a([u()],Ke.prototype,"maxScale",void 0),a([u()],Ke.prototype,"minZoom",void 0),a([u()],Ke.prototype,"maxZoom",void 0),a([u()],Ke.prototype,"rotationEnabled",void 0),a([u()],Ke.prototype,"snapToZoom",void 0),a([u({type:q})],Ke.prototype,"customConstraints",void 0),a([u()],Ke.prototype,"view",void 0),a([u({readOnly:!0})],Ke.prototype,"version",null),a([u({type:ja,readOnly:!0})],Ke.prototype,"_geometry",null),a([u({type:YT})],Ke.prototype,"_rotation",null),a([u({readOnly:!0,type:KT})],Ke.prototype,"_zoom",null),Ke=a([_("esri.views.2d.MapViewConstraints")],Ke);const P7=Ke;let Kt=class extends Z{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ae(()=>this.constraints?.version,r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},It)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new se({x:e[0],y:e[1],spatialReference:r})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let r;try{r=this._project(e,this.state.spatialReference)}catch(s){return void N.getLogger(this).error(new M("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const i=this.viewpoint;d3(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void N.getLogger(this).error(new M("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(e,this.state.spatialReference)}catch(s){return void N.getLogger(this).error(new M("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;fU(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const r=this.viewpoint;TU(r,r,e),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;_7(r,r,e),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?i=new M("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(i=new M("mapview:invalid-viewpoint","geometry not defined"))}catch(n){i=new M("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(i)return void N.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new Di({targetGeometry:new se,scale:0,rotation:0});sr(s,r),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const r=this.constraints?.zoomToScale(e)??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;_7(i,i,r),this.viewpoint=i,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),l=this._get("rotation"),c=this._get("viewpoint"),d=this._get("zoom"),h=d!=null&&i!=null&&i.zoomToScale(d)||void 0;let y,f,m;const g=c?.rotation,v=c?.targetGeometry;v?.type==="extent"?y=v:v?.type==="point"&&(f=v,m=c?.scale);const b=n??y;return{center:s??f??b?.center,rotation:l??g,scale:(o??h??m??(b&&e4(b,[e[0]-r.left-r.right,e[1]-r.top-r.bottom])))||void 0}}startup(e,r,i,s){const n=e.targetGeometry;try{this._project(e,i)}catch(o){N.getLogger(this).warn(new hs("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:o})),e.targetGeometry=s||new se({x:0,y:0,spatialReference:i})}this.constraints?.fit(e),this._set("state",new b6({padding:this.padding,size:r,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,r],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new se({x:e,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(e){const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const c=r.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=c}const i=r.clone(),[s,n]=r.center;let o=null;try{o=this._project(new se({x:s,y:n,spatialReference:r.spatialReference}),e)}catch(c){d_()||N.getLogger(this).warn(new hs("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:c}))}o||(o=new se({x:0,y:0,spatialReference:e}));const l=d3(new Di({targetGeometry:new se,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=l;try{const d=[r.size[0]/2,r.size[1]/2],h=[d[0]+20,d[1]],y=r.toMap([0,0],h),{x:f,y:m}=this._project(new se({x:y[0],y:y[1],spatialReference:r.spatialReference}),e);y[0]=f,y[1]=m,i.toScreen(y,y);const g=SU(d,y,h),v=Math.hypot(y[0]-d[0],y[1]-d[1])/20;!Number.isFinite(v)||Math.abs(v)>4?(l.rotation=0,l.targetGeometry=new se({x:0,y:0,spatialReference:e})):(l.scale*=v,l.scale>re("mapview-srswitch-adjust-rotation-scale-threshold")?l.rotation=0:l.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints")?.constrain(l,void 0),this._get("state").viewpoint=l}resize(e,r){if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();i.size=[e,r],$U(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const r=[0,0],[i,s]=this.state.toMap(r,[e.x,e.y]),n=this.state.spatialReference;return new se({x:i,y:s,spatialReference:n})}toScreen(e,r){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),s=[i.x,i.y];return r?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Et(s[0],s[1])}_project(e,r){const i=e?.targetGeometry||e;if(!r)return e;if(!i)return null;if(r.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem||ot(r,i.spatialReference))return e;const s=Yo(i,r);if(!s)throw new M("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return tG(e)?(e.targetGeometry=s,e):s}};function tG(t){return t?.declaredClass==="esri.Viewpoint"}a([u({type:se})],Kt.prototype,"center",null),a([u()],Kt.prototype,"constraints",void 0),a([u({type:le})],Kt.prototype,"extent",null),a([u({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Kt.prototype,"padding",null),a([u()],Kt.prototype,"ready",void 0),a([u()],Kt.prototype,"resizeAlign",void 0),a([u({readOnly:!0})],Kt.prototype,"resolution",null),a([u({type:Number})],Kt.prototype,"rotation",null),a([u({type:Number})],Kt.prototype,"scale",null),a([u({readOnly:!0})],Kt.prototype,"state",void 0),a([u({type:Di})],Kt.prototype,"viewpoint",null),a([u({readOnly:!0})],Kt.prototype,"visibleArea",null),a([u()],Kt.prototype,"zoom",null),Kt=a([_("esri.views.2d.ViewStateManager")],Kt);const R7=160;let Up=class extends Z{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=R7&&this.clear()},R7))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};a([u()],Up.prototype,"_timer",void 0),a([u()],Up.prototype,"stationary",null),Up=a([_("esri.views.2d.support.StationaryManager")],Up);const rG=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new Kt({constraints:new P7({view:this})}),this.stationaryManager=new Up,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new YU(this),this.viewEvents=new aT(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ae(()=>this.viewpoint,()=>this.stationaryManager.flip(),It)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(i){const s=this._get("animation");if(i===s)return;if(s&&s.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const n=()=>{this.destroyed||i===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};i.when(n,n)}get constraints(){return this.stateManager?.constraints}set constraints(i){i.view=this;const s=this.stateManager.constraints;this.stateManager.constraints=i,s?.destroy()}get padding(){return this.stateManager?.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:s}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=s}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}};return a([u({readOnly:!0})],r.prototype,"animationManager",void 0),a([u({readOnly:!0})],r.prototype,"fullOpacity",void 0),a([u()],r.prototype,"stateManager",void 0),a([u()],r.prototype,"constraintsInfo",null),a([u()],r.prototype,"extent",null),a([u({readOnly:!0})],r.prototype,"state",null),a([u({readOnly:!0})],r.prototype,"mapViewNavigation",void 0),a([u()],r.prototype,"renderingOptions",void 0),a([u({readOnly:!0})],r.prototype,"interacting",null),a([u()],r.prototype,"stationary",null),a([u()],r.prototype,"animation",null),a([u({type:P7})],r.prototype,"constraints",null),a([u()],r.prototype,"padding",null),a([u()],r.prototype,"resizeAlign",null),a([u()],r.prototype,"rotation",null),a([u({readOnly:!0})],r.prototype,"viewEvents",void 0),a([u({type:Di})],r.prototype,"viewpoint",null),r=a([_("esri.views.Viewport2DBaseMixin")],r),r},iG=()=>qr.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var fc;let au=(fc=class extends Q5{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Jo(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new M("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,r){r||(r=Sr(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",r)}},fc.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},fc);a([u({readOnly:!0})],au.prototype,"done",null),a([u({readOnly:!0,type:String})],au.prototype,"state",void 0),a([u()],au.prototype,"target",void 0),au=a([_("esri.views.ViewAnimation")],au);const w3=au;let g0=class extends Z{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,r){if(!e)return void N.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new w3;this.view.animation=i,await ng(()=>this.view.ready,r);const s={...r,animate:r?.animate??(!iG()&&this.view.animationsEnabled),animationMode:r?.animationMode??"auto"},{extent:n,spatialReference:o,size:l,viewpoint:c,constraints:d,padding:h,allLayerViews:y}=this.view,f=dU(e,{extent:n,spatialReference:o,size:l,viewpoint:c,constraints:d,padding:h,allLayerViews:y,pickClosestTarget:r?.pickClosestTarget??!0});return i?.update(f),this._gotoTask={},s.animate?this._gotoAnimated(f,s):this._gotoImmediate(f,s)}_gotoImmediate(e,r){const i=this._gotoTask,s=this.view.animation,n=e.then(o=>{if(Re(r),i!==this._gotoTask)throw new M("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(i,s,n,r)}_gotoAnimated(e,r){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=e.then(o=>{if(Re(r),i!==this._gotoTask)throw new M("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,r),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n,r)}_cancellableGoTo(e,r,i,s){const n=()=>e===this._gotoTask;return Ei(i,s).finally(()=>{n()&&(r.done||r.stop())})}};a([u({constructOnly:!0})],g0.prototype,"view",void 0),g0=a([_("esri.views.2d.GoToManager")],g0);function XT(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function eM(t,e){return e.some(r=>XT(t,r))}function O7(t,{dragPrimary:e,dragSecondary:r,dragTertiary:i}){return[{key:"primary",value:e},{key:"secondary",value:r},{key:"tertiary",value:i}].filter(s=>s.value===t).map(s=>s.key)}let C7=class extends Pt{constructor(e,r){super(!0),this._view=e,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(e,r){XT(e.data,"primary")&&(e.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},sG=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.pointerType=r,this.registerIncoming("double-tap-drag",i,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:r}=e,{pointerType:i}=r;if(i!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=r,{view:o}=this,{mapViewNavigation:l}=o;switch(s){case"begin":{const{scale:c}=o;this._startScale=c,this._currentScale=c,this._previousDelta=n,l.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const c=1.015**n.y,d=this._startScale*c,h=d/this._currentScale;l.setViewpointImmediate(h),this._currentScale=d;break}case"end":{const{constraints:c}=o,{effectiveLODs:d,snapToZoom:h}=c;if(!h||!d)return void l.end();const y=c.snapScale(this._currentScale),f=(n.y>0?Math.max(y,c.snapToPreviousScale(this._startScale)):Math.min(y,c.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(f).then(()=>{l.end()});break}}}},r4=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const r=e.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},nG=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.pointerActions=r,this.registerIncoming("drag",i,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new r4({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&eM(i.data,this.pointerActions)})}_handleDrag(e){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},oG=class extends Pt{constructor(e,r,i){super(!0),this._view=e,this.pointerActions=r;const s=this._view.mapViewNavigation;this._dragEventSeparator=new r4({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&eM(o.data,this.pointerActions)}),this.registerIncoming("drag",i,n=>this._dragEventSeparator.handle(n))}};function tM(t){const e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}function aG(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function lG(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}function uG(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function rM(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function iM(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function sM(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function cG(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function pG(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function dG(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function hG(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function yG(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function fG(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function mG(t,e=0,r=1){return t[0]=Math.min(Math.max(t[0],e),r),t[1]=Math.min(Math.max(t[1],e),r),t[2]=Math.min(Math.max(t[2],e),r),t}function gG(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function nM(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function vG(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t}function oM(t,e){const r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}function aM(t,e){const r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2];return r*r+i*i+s*s}function lM(t){const e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}function wG(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function bG(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function b3(t,e){const r=e[0],i=e[1],s=e[2];let n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n),t}function uM(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function _G(t,e,r){const i=e[0],s=e[1],n=e[2],o=r[0],l=r[1],c=r[2];return t[0]=s*c-n*l,t[1]=n*o-i*c,t[2]=i*l-s*o,t}function SG(t,e,r){const i=e[0],s=e[1],n=e[2],o=r[0],l=r[1],c=r[2],d=s*c-n*l,h=n*o-i*c,y=i*l-s*o,f=Math.sqrt(d*d+h*h+y*y);return t[0]=d/f,t[1]=h/f,t[2]=y/f,t}function xG(t,e,r,i){const s=e[0],n=e[1],o=e[2];return t[0]=s+i*(r[0]-s),t[1]=n+i*(r[1]-n),t[2]=o+i*(r[2]-o),t}function $G(t,e,r,i,s,n){const o=n*n,l=o*(2*n-3)+1,c=o*(n-2)+n,d=o*(n-1),h=o*(3-2*n);return t[0]=e[0]*l+r[0]*c+i[0]*d+s[0]*h,t[1]=e[1]*l+r[1]*c+i[1]*d+s[1]*h,t[2]=e[2]*l+r[2]*c+i[2]*d+s[2]*h,t}function TG(t,e,r,i,s,n){const o=1-n,l=o*o,c=n*n,d=l*o,h=3*n*l,y=3*c*o,f=c*n;return t[0]=e[0]*d+r[0]*h+i[0]*y+s[0]*f,t[1]=e[1]*d+r[1]*h+i[1]*y+s[1]*f,t[2]=e[2]*d+r[2]*h+i[2]*y+s[2]*f,t}function MG(t,e=1){const r=j2,i=2*r()*Math.PI,s=2*r()-1,n=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=s*e,t}function IG(t,e,r){const i=e[0],s=e[1],n=e[2];return t[0]=r[0]*i+r[4]*s+r[8]*n+r[12],t[1]=r[1]*i+r[5]*s+r[9]*n+r[13],t[2]=r[2]*i+r[6]*s+r[10]*n+r[14],t}function EG(t,e,r){const i=e[0],s=e[1],n=e[2];return t[0]=i*r[0]+s*r[3]+n*r[6],t[1]=i*r[1]+s*r[4]+n*r[7],t[2]=i*r[2]+s*r[5]+n*r[8],t}function PG(t,e,r){const i=r[0],s=r[1],n=r[2],o=r[3],l=e[0],c=e[1],d=e[2],h=s*d-n*c,y=n*l-i*d,f=i*c-s*l,m=s*f-n*y,g=n*h-i*f,v=i*y-s*h,b=2*o;return t[0]=l+h*b+2*m,t[1]=c+y*b+2*g,t[2]=d+f*b+2*v,t}function RG(t,e,r,i){const s=[],n=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],n[0]=s[0],n[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),n[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function OG(t,e,r,i){const s=[],n=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],n[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),n[1]=s[1],n[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function CG(t,e,r,i){const s=[],n=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],n[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),n[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),n[2]=s[2],t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function kG(t,e){b3(k7,t),b3(F7,e);const r=uM(k7,F7);return r>1?0:r<-1?Math.PI:Math.acos(r)}const k7=Qo(),F7=Qo();function FG(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function AG(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function LG(t,e){if(t===e)return!0;const r=t[0],i=t[1],s=t[2],n=e[0],o=e[1],l=e[2],c=$r();return Math.abs(r-n)<=c*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=c*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-l)<=c*Math.max(1,Math.abs(s),Math.abs(l))}function NG(t,e,r){const i=r[0]-e[0],s=r[1]-e[1],n=r[2]-e[2];let o=i*i+s*s+n*n;return o>0?(o=1/Math.sqrt(o),t[0]=i*o,t[1]=s*o,t[2]=n*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const DG=rM,jG=iM,VG=sM,zG=oM,qG=aM,UG=tM,GG=lM;Object.freeze(Object.defineProperty({__proto__:null,abs:dG,add:uG,angle:kG,bezier:TG,ceil:cG,clamp:mG,copy:aG,cross:_G,crossAndNormalize:SG,direction:NG,dist:zG,distance:oM,div:VG,divide:sM,dot:uM,equals:LG,exactEquals:AG,floor:pG,hermite:$G,inverse:bG,len:UG,length:tM,lerp:xG,max:fG,min:yG,mul:jG,multiply:iM,negate:wG,normalize:b3,random:MG,rotateX:RG,rotateY:OG,rotateZ:CG,round:gG,scale:nM,scaleAndAdd:vG,set:lG,sign:hG,sqrDist:qG,sqrLen:GG,squaredDistance:aM,squaredLength:lM,str:FG,sub:DG,subtract:rM,transformMat3:EG,transformMat4:IG,transformQuat:PG},Symbol.toStringTag,{value:"Module"}));function Wi(t){let e=t*t;return t<0&&(e*=-1),e}function BG(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function WG(t,e,r){const i=r,s=t.state,n=t.device,o=e.tiltDirection==="forward-down"?1:-1,l=1;return n.deviceType==="standard"?(i.translation[0]=Wi(s.axes[0]),i.translation[1]=Wi(s.axes[1]),i.translation[2]=Wi(s.buttons[7])-Wi(s.buttons[6]),i.heading=Wi(s.axes[2]),i.tilt=Wi(s.axes[3])):n.deviceType==="spacemouse"&&(i.translation[0]=1.2*Wi(s.axes[0]),i.translation[1]=1.2*Wi(s.axes[1]),i.translation[2]=2*-Wi(s.axes[2]),i.heading=1.2*Wi(s.axes[5]),i.tilt=1.2*Wi(s.axes[3])),i.tilt*=o,nM(i.translation,i.translation,l),i}function HG(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let ZG=class extends Pt{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new og,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([ae(()=>this._view.navigation.gamepad?.enabled,r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=Ic({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},or)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const r=this._view.navigation.gamepad.device;r&&e.data.device!==r||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,BG(this._transformation)):(this._currentDevice=e.data.device,WG(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const r=this._transformation;if(HG(r))return void this._frameTask?.pause();const i=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=QG*s*e;t4(i,i,[r.translation[0]*n,-r.translation[1]*n]);const o=1+r.translation[2]*YG*e,l=this._view.constraints.rotationEnabled?-r.heading*JG*e:0,c=this._view.size,d=[c[0]/2,c[1]];jT(i,i,o,l,d,c);const h=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=h}};const JG=.06,QG=.7,YG=6e-4;function cM(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Br(()=>document.removeEventListener("visibilitychange",e))}let KG=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const l=this._timeout===void 0,c=this._pressedKeys.size>0;l||c?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=cM(s=>s?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const r=this._currentDirection!=null;if(e!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},XG=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(r),this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",i,s=>this._handleKeyUp(s)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=cM(s=>s?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,r){for(const i of e)this._keyToDirection.set(i,r)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,r){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(e.data.key);if(this._pressed=s!=null,this._pressed){if(e.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},eB=class extends Pt{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),r.zoomIn.forEach(s=>this._keysToZoomAction[s]=0),r.zoomOut.forEach(s=>this._keysToZoomAction[s]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const r=e.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case 0:o=n.zoomIn();break;case 1:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),e.stopPropagation()}};const tB=.6;let rB=class extends Pt{constructor(e,r){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:s,deltaY:n}=e.data,o=1/tB**(1/60*n),l=r.zoom(o,[i,s]);this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()})}},iB=class extends Pt{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new r4({start:(i,s)=>{r.pinch.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{r.pinch.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{r.pinch.end(this.view),s.stopPropagation()},condition:i=>i>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function A7(t){const e=t.native;return e?{buttons:e.buttons.map(r=>r.pressed?r.value||1:0),axes:e.axes.map(r=>oB(r,t.axisThreshold))}:{buttons:[],axes:[]}}function sB(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let r=0;r<t.axes.length;r++)if(t.axes[r]!==e.axes[r])return!1;for(let r=0;r<t.buttons.length;r++)if(t.buttons[r]!==e.buttons[r])return!1;return!0}function nB(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function oB(t,e){const r=Math.abs(t);return r<e?0:Math.sign(t)*(r-e)/(1-e)}let aB=class{constructor(e,r){this._element=e,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,l=o.index,c=this._inputDevices[l];c&&(this._emitGamepadEvent(o,A7(c),!1),this._inputDevices.splice(l,1),this._latestUpdate.splice(l,1),this._input.gamepad.devices.remove(c),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(L7(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const r=new c6(e);r.deviceType!=="unknown"&&(this._inputDevices[e.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Ic({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!r;L7(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],l=A7(n),c=i||nB(l);o&&(o.timestamp===s.timestamp||!o.active&&c||sB(o.state,l))||this._emitGamepadEvent(s,l,!c)})}_emitGamepadEvent(e,r,i){const s=this._latestUpdate[e.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[e.index],state:r,action:o})}};function lB(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function L7(t){for(const e of navigator.getGamepads())lB(e)&&t(e)}const N7=re("edge"),uB=re("chrome"),cB=re("ff"),pB=re("safari"),D7="esri-view-surface",Fl={touchNone:`${D7}--touch-none`,touchPan:`${D7}--touch-pan`};var sl;let dB=(sl=class{constructor(e,r){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new aB(e,r),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=st(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const r in this._active)if(!e||!e.has(r)){const i=this._active[r];this._element.removeEventListener(oy[r],i),delete this._active[r]}e&&e.forEach(r=>{if(!this._active[r]&&oy[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(oy[r],i),this._active[r]=i}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,r){r?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Fl.touchNone:Fl.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Fl.touchPan:Fl.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Fl.touchNone),this._element.classList.remove(Fl.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,r){const i=uT(this._element,e);return sl.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(e,r){const{key:i}=r;i&&e==="key-up"&&this._keyDownState.delete(i);const s={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(e,i)}_handlePointerPreventDefault(e,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(e,i)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&re("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:N7&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}N7?i*=.7:uB||pB?i*=.6:cB&&(i*=1.375);const s=100,n=Math.abs(i);n>s&&(i=i/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(e,o)}_handlePointerCaptureLost(e,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(e,r)}_handleDefault(e,r){const i={native:r};r.preventDefault(),this._callback(e,i)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},sl.test={disableSubpixelCoordinates:!1},sl);const oy={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let hB=class extends Pt{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const pM=()=>({maximumClickDelay:300}),yB=(t={})=>({...pM(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),S6=(t={})=>({...pM(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function i2(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function fB(t,e){const r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)}function mB(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Et()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[E,T]=t,[R,O]=[T.x-E.x,T.y-E.y];return e.radius=Math.sqrt(R*R+O*O)/2,e.center.x=(E.x+T.x)/2,e.center.y=(E.y+T.y)/2,e}let r=0,i=0;for(let E=0;E<t.length;E++)r+=t[E].x,i+=t[E].y;r/=t.length,i/=t.length;const s=t.map(E=>E.x-r),n=t.map(E=>E.y-i);let o=0,l=0,c=0,d=0,h=0,y=0,f=0;for(let E=0;E<s.length;E++){const T=s[E],R=n[E],O=T*T,z=R*R;o+=O,l+=z,c+=T*R,d+=O*T,h+=z*R,y+=T*z,f+=R*O}const m=.5*(d+y),g=.5*(h+f),v=o*l-c*c,b=(m*l-g*c)/v,S=(o*g-c*m)/v,$=Et(b+r,S+i);return{radius:Math.sqrt(b*b+S*S+(o+l)/t.length),center:$}}function tl(t){const{native:e}=t,{pointerId:r,button:i,pointerType:s}=e;return s==="mouse"?`${r}:${i}`:`${s}`}let gB=class extends Pt{constructor(e={},r=yh){super(!1),this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Et(0,0),this._pointerState=new Map,this._parameters=S6(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new r4({start:(i,s)=>this._dragStart(i,s),update:(i,s)=>this._dragUpdate(s),end:(i,s)=>this._dragEnd(s)}),this.registerIncoming("drag",i=>this._dragEventSeparator.handle(i)),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Ze(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const r=this._pointerState.get(e);r&&(r.doubleTapTimeout=Ze(r.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,r){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=r,{center:n}=i;this._dragStartCenter=n;const o=ay("begin",Et(0,0),i);this._doubleTapDrag.emit(o,void 0,s),r.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=e,{center:s}=r,n=ay("update",Et(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=e,{center:s}=r,n=ay("end",Et(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:r}=e,i=tl(r),s=this._pointerState.get(i),{pointerType:n}=r.native;if(s){const o=n==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(i),i2(s.event.data,r)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:r}=e,{pointerType:i}=r.native,s=tl(r),n=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function ay(t,e,r){const{button:i,buttons:s,pointer:n,pointers:o,pointerType:l,timestamp:c}=r;return{action:t,delta:e,button:i,buttons:s,pointer:n,pointers:o,pointerType:l,timestamp:c}}let vB=class extends Pt{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,r,i,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:s,pointers:wB(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(e){const r=e.native.pointerId,i=n1(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,s);const n=v0(s,dM(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const r=e.native.pointerId,i=this._activePointerMap.get(r);i?i.event=e:this._addPointer(e)}_removePointer(e){const r=n1(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(r)}_updatePointerAngles(e){const r=n1(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=v0(i,r)-e,i.lastAngle=v0(i,r)-e})}_emitEvent(e,r,i){const s=n1(this._activePointerMap);this._drag.emit(this._createPayload(e,r,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const r=e.data.native.pointerId,i=We(e.timestamp);this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",e.data,We(e.timestamp))))}_handlePointerDrag(e){const r=e.data,i=r.currentEvent,s=We(e.timestamp);switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function dM(t){const e=[];return t.forEach(r=>{e.push(Et(r.event.x,r.event.y))}),mB(e)}function n1(t){const e=dM(t);let r=0;return t.forEach(i=>{let s=v0(i,e),n=s-i.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=i.lastAngle+n,i.lastAngle=s;const o=s-i.initialAngle;r+=o}),r/=t.size||1,{angle:r,radius:e.radius,center:e.center}}function wB(t){const e=new Map;return t.forEach((r,i)=>e.set(i,r.event)),e}function v0(t,e){const r=t.event,i=r.x-e.center.x,s=r.y-e.center.y;return Math.atan2(s,i)}let bB=class extends Pt{constructor(e={},r=yh){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=S6(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const r=e.data,i=tl(r);if(!this._pointerState.has(i)){const s={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,s),this.startCapturingPointer(r.native)}}_handlePointerUp(e){const r=e.data,i=tl(r),s=this._pointerState.get(i);if(s&&s.downButton===r.native.button){const n=s.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),i2(n,e.data)>o?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,n.modifiers),this._removeState(r))):i2(s,e.data)>o?this._removeState(r):this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,r){const i=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;r.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),i)}}_removeState(e){const r=tl(e);this._pointerState.delete(r),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},_B=class extends Pt{constructor(e={},r=yh){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=yB(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i)),this.registerIncoming("pointer-up",i=>this._handlePointerLoss(i,"pointer-up")),this.registerIncoming("pointer-capture-lost",i=>this._handlePointerLoss(i,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",i=>this._handlePointerLoss(i,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",i=>this._handlePointerMove(i)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Ze(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const r=e.data,i=r.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const l=o.previousEvent;this._pointerHold.emit(l,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const n={startEvent:r,previousEvent:r,startTimestamp:e.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const r=e.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(o1("update",s,r),void 0,s.modifiers):fB(r,s.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(e),s.previousEvent=r)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const r=e.data,i=r.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(o1("start",s,r)):this._pointerDrag.emit(o1("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,r){const i=e.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(o1("end",n,r==="pointer-up"?i:n.previousEvent),void 0,n.modifiers):r==="pointer-up"&&n.downButton===i.native.button&&e.timestamp-n.startTimestamp<=this._parameters.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function o1(t,e,r){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:r}}let SB=class extends Pt{constructor(e={},r=yh){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=S6(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",i=>this._handleImmediateClick(i)),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Ze(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,r){const i=this._pointerState.get(e);i&&(i.doubleClickTimer=Ze(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const r=this._pointerState.get(e);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const r=e.data,{pointerType:i}=r.native,s=xB(r);if(!this._pointerState.has(s))return void this._startClick(e);const n=this._pointerState.get(s),{data:o,modifiers:l}=n.event,c=i==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;i2(o,r)>c?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,l))}_handlePointerDown(e){const r=tl(e.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(e){const{data:r}=e,{native:{pointerType:i}}=r,s=tl(r),n=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function xB(t){const{pointerId:e,pointerType:r,button:i}=t.native;return r==="mouse"?`${e}:${i}`:`${r}`}const a1={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},j7=Symbol("handles");let lu=class extends Z{initialize(){const e=()=>this.view?.ready;this.addHandles([ji(()=>!e(),()=>this._disconnect()),ji(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(j7),this._inputManager=st(this._inputManager)}_connect(){const e=this.view.surface,r=new dB(e,this.view.input),i=[new bB,new _B,new SB,new vB(this.view.navigation),new gB],s=new Ji({eventSource:r,recognizers:i}),n=new nG(this.view,["primary"]),o=new oG(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new hB],Gn.INTERNAL),s.installHandlers("navigation",[new iB(this.view),new ZG(this.view),new rB(this.view),new C7(this.view),new C7(this.view,[a1.counter]),n,new KG(this.view,a1.pan),new eB(this.view,a1.zoom),new XG(this.view,a1.rotate),o,new sG(this.view,"touch")],Gn.INTERNAL),this.view.viewEvents.connect(s),this._source=r,this._inputManager=s,this.addHandles([ae(()=>this.view?.navigation?.browserTouchPanEnabled,l=>{this._source&&(this._source.browserTouchPanningEnabled=!l)},or),ae(()=>{const{actionMap:l}=this.view.navigation;return{panActions:O7("pan",l),rotateActions:O7("rotate",l)}},({panActions:l,rotateActions:c})=>{n.pointerActions=l,o.pointerActions=c},Dr)],j7)}get test(){}};a([u()],lu.prototype,"view",void 0),a([u()],lu.prototype,"latestPointerInfo",null),a([u()],lu.prototype,"multiTouchActive",null),lu=a([_("esri.views.2d.input.MapViewInputManager")],lu);const $B=lu,TB=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.goToManager=new g0({view:this}),this.animationsEnabled=!0,this.inputManager=new $B({view:this}),this.addHandles([this.on("resize",s=>this.stateManager.resize(s.width,s.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(i,s,n,o){return this.viewEvents.on(i,s,n,o)||super.on(i,s)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,s){return this.goToManager.goTo(i,s)}toMap(i){if(!this.ready)return null;const s=pT(i)?cT(this,i):i;return this.stateManager.toMap(s)}};return a([u()],r.prototype,"goToManager",void 0),a([u({readOnly:!0})],r.prototype,"interacting",null),a([u()],r.prototype,"stationary",null),a([u()],r.prototype,"animationsEnabled",void 0),a([u({readOnly:!0})],r.prototype,"inputManager",void 0),r=a([_("esri.views.Viewport2DMixin")],r),r};let V7=class{constructor(e){this._view=e,this.viewpoint=new Di({targetGeometry:new se,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,r]=this._view.size;return Math.sqrt(e*e+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return NT(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,r){r.pan=C_(this.center,e.center);let i=Math.abs(e.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=vh(i),r.sourceZoom=this.scale,r.targetZoom=e.scale}interpolate(e,r,i){const{pan:s,rotate:n,zoom:o,zoomOffset:l}=i,{center:c}=this;c.spatialReference=e.center.spatialReference,c.x=Sp(e.center.x,r.center.x,s),c.y=Sp(e.center.y,r.center.y,s),this.viewpoint.scale=Sp(e.scale,r.scale+l,o);let d=e.rotation;const h=r.rotation;Math.abs(h-d)>=180&&(d+=360*(d<h?1:-1)),this.viewpoint.rotation=Sp(d,h,n)}copyFrom(e){sr(this.viewpoint,e.viewpoint),this._view=e.view}};function pp(t,e,r,i){const s=3*t,n=3*(r-t)-s,o=1-s-n,l=3*e,c=3*(i-e)-l,d=1-l-c;function h(g){return((o*g+n)*g+s)*g}function y(g){return((d*g+c)*g+l)*g}function f(g){return(3*o*g+2*n)*g+s}function m(g,v){let b,S,$,E,T,R;for($=g,R=0;R<8;R++){if(E=h($)-g,Math.abs(E)<v)return $;if(T=f($),Math.abs(T)<1e-6)break;$-=E/T}if(b=0,S=1,$=g,$<b)return b;if($>S)return S;for(;b<S;){if(E=h($),Math.abs(E-g)<v)return $;g>E?b=$:S=$,$=.5*(S-b)+b}return $}return function(g,v=1e-6){return y(m(g,v))}}const Oi={};Oi.ease=pp(.25,.1,.25,1),Oi.linear=pp(0,0,1,1),Oi.easeIn=Oi["ease-in"]=pp(.42,0,1,1),Oi.easeOut=Oi["ease-out"]=pp(0,0,.58,1),Oi.easeInOut=Oi["ease-in-out"]=pp(.42,0,.58,1);const MB=t=>t,rh=t=>t*t,s2=t=>1-rh(1-t),z7=t=>t<.5?rh(2*t)/2:(s2(2*(t-.5))+1)/2,n2=t=>t*t*t,_3=t=>1-n2(1-t),q7=t=>t<.5?n2(2*t)/2:(_3(2*(t-.5))+1)/2,o2=t=>t*t*t*t,S3=t=>1-o2(1-t),U7=t=>t<.5?o2(2*t)/2:(S3(2*(t-.5))+1)/2,a2=t=>t*t*t*t*t,x3=t=>1-a2(1-t),G7=t=>t<.5?a2(2*t)/2:(x3(2*(t-.5))+1)/2,l2=t=>1-Math.cos(t*Math.PI/2),$3=t=>1-l2(1-t),B7=t=>t<.5?l2(2*t)/2:($3(2*(t-.5))+1)/2,u2=t=>2**(10*(t-1)),c2=t=>1-u2(1-t),W7=t=>t<.5?u2(2*t)/2:(c2(2*(t-.5))+1)/2,p2=t=>-(Math.sqrt(1-t*t)-1),T3=t=>1-p2(1-t),H7=t=>t<.5?p2(2*t)/2:(T3(2*(t-.5))+1)/2;function zi(t){const e=2*(t-Math.sqrt((t-1)*t)),r=e/2/t;return i=>i<r?t*i*i:e*i-e+1}function qi(t,e){return(r,i)=>r<e?e*t(r/e,i):1-t((1-r)/(1-e),i)*(1-e)}const Z7=qi(zi(1),1),J7=qi(zi(1),0),d2=qi(zi(1),.5),Q7=qi(zi(2),1),Y7=qi(zi(2),0),K7=qi(zi(2),.5),X7=qi(zi(3),1),ev=qi(zi(3),0),tv=qi(zi(3),.5),rv=qi(zi(4),1),iv=qi(zi(4),0),sv=qi(zi(4),.5),nv={linear:MB,"in-quad":rh,"out-quad":s2,"in-out-quad":z7,"in-coast-quad":Z7,"out-coast-quad":J7,"in-out-coast-quad":d2,"in-cubic":n2,"out-cubic":_3,"in-out-cubic":q7,"in-coast-cubic":Q7,"out-coast-cubic":Y7,"in-out-coast-cubic":K7,"in-quart":o2,"out-quart":S3,"in-out-quart":U7,"in-coast-quart":X7,"out-coast-quart":ev,"in-out-coast-quart":tv,"in-quint":a2,"out-quint":x3,"in-out-quint":G7,"in-coast-quint":rv,"out-coast-quint":iv,"in-out-coast-quint":sv,"in-sine":l2,"out-sine":$3,"in-out-sine":B7,"in-expo":u2,"out-expo":c2,"in-out-expo":W7,"in-circ":p2,"out-circ":T3,"in-out-circ":H7,"quad-in":rh,"quad-out":s2,"quad-in-out":z7,"quad-in-coast":Z7,"quad-out-coast":J7,"quad-in-out-coast":d2,"cubic-in":n2,"cubic-out":_3,"cubic-in-out":q7,"cubic-in-coast":Q7,"cubic-out-coast":Y7,"cubic-in-out-coast":K7,"quart-in":o2,"quart-out":S3,"quart-in-out":U7,"quart-in-coast":X7,"quart-out-coast":ev,"quart-in-out-coast":tv,"quint-in":a2,"quint-out":x3,"quint-in-out":G7,"quint-in-coast":rv,"quint-out-coast":iv,"quint-in-out-coast":sv,"sine-in":l2,"sine-out":$3,"sine-in-out":B7,"expo-in":u2,"expo-out":c2,"expo-in-out":W7,"circ-in":p2,"circ-out":T3,"circ-in-out":H7,ease:t=>Oi.ease(t),"ease-in":t=>Oi.easeIn(t),"ease-out":t=>Oi.easeOut(t),"ease-in-out":t=>Oi.easeInOut(t)};let IB=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const h2={desiredScreenFlow:2,minDuration:We(500),maxDuration:We(8e3)},hM={maxDuration:We(4e3)};let EB=class yM{constructor(e){this._createCamera=e,this.compared=new IB,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:h2.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new yM(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,r,i){this.source!==e&&this.source.copyFrom(e),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??h2.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const r=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>$r()}get hasFov(){return Math.abs(this.compared.fov)>$r()}get hasRotate(){return this.compared.rotate>$r()}},PB=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},RB=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,r)=>oi(e+r.time),oi(0))}interpolateComponentsAt(e,r){e=Math.min(Math.max(e,0),1),e*=this.time;let i=0,s=0;const n=this.definition,o=this.segments.reduce((l,c)=>l||c.definition.hasZoom,!1);for(let l=0;l<this.segments.length;l++){const c=this.segments[l],d=c.definition;if(e<=c.time||l===this.segments.length-1){if(this.segmentInterpolateComponentsAt(c,c.time===0?0:e/c.time,r),n.hasPan&&!isNaN(r.pan)&&isFinite(n.compared.pan)?r.pan=(i+d.compared.pan*r.pan)/n.compared.pan:r.pan=1,n.hasRotate&&!isNaN(r.rotate)&&isFinite(n.compared.rotate)?r.rotate=(s+d.compared.rotate*r.rotate)/n.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(d.compared.targetZoom)){const{sourceZoom:h,targetZoom:y}=d.compared,f=r.zoom*(y-h)+h,m=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(y-m)>Math.abs(h-m)?y:h;r.zoomOffset=v-g,r.zoom=(f-m)/(v-m)}else r.zoom=1;return r}e-=c.time,i+=d.compared.pan,s+=d.compared.rotate}}segmentInterpolateComponentsAt(e,r,i){e.interpolateComponentsAt(r,i)}},ly=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,r=e.compared,i=r.sourceZoom,s=r.targetZoom;this._zoomSign=i>s?1:-1,this._panPixelsAtSource=r.pan*e.source.pixelsPerPanAtZoom(i);const n=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*n}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:s,hasRotate:n}=this.definition;let o=0,l=0;i&&(s&&(o=(r/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(l=this._zoomSign*(Math.log(e/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const c=this.definition.desiredPixelFlow;if(i&&s&&n){const d=o+l+o*l;this._zoomPixelFlow=o*l/d*c,this._panPixelFlow=l/d*c,this._rotatePixelFlow=o/d*c}else if(i&&s){const d=1+o;this._zoomPixelFlow=o/d*c,this._panPixelFlow=1/d*c}else if(i&&n){const d=1+l;this._zoomPixelFlow=l/d*c,this._rotatePixelFlow=1/d*c}else if(s&&n){const d=this._panPixelsAtSource/this._rotatePixels,h=1+d;this._panPixelFlow=d/h*c,this._rotatePixelFlow=1/h*c}else s?this._panPixelFlow=c:i?this._zoomPixelFlow=c:n&&(this._rotatePixelFlow=c);if(this._time=oi(Math.max(this.rotateTime,this.zoomTime,this.panTime)),this.fovTime>this._time){const d=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=d,this._panPixelFlow/=d,this._rotatePixelFlow/=d}}get rotateTime(){return this.definition.hasRotate?oi(this._rotatePixels/this._rotatePixelFlow):oi(0)}get zoomTime(){return this.definition.hasZoom?oi(this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow):oi(0)}get fovTime(){return this.definition.hasFov?oi(Math.abs(this.definition.compared.fov)/OB):oi(0)}get panTime(){if(!this.definition.hasPan)return oi(0);if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=e*this._panPixelsAtSource;return oi(Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow))}return oi(this._panPixelsAtSource/this._panPixelFlow)}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-e-r)/(i-r)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+e*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*e*this._time)-1))/(r*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,r){e=Math.min(Math.max(e,0),1),r.zoom=this._interpolateComponentsZoom(e),r.pan=this._interpolateComponentsPan(e),r.rotate=this._interpolateComponentsRotate(e),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(e)}};const OB=vh(45);function CB(t,e,r){const i=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(i);return-t.halfWindowSize*(r.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function kB(t,e,r){const i=1/e,s=Math.log(t.compared.sourceZoom*i),n=1/t.desiredPixelFlow,o=1/Math.LN2,l=e-t.compared.sourceZoom,c=1/l,d=(r.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(l))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*n*o*c*d-t.halfWindowSize*s*n*o*c+t.halfWindowSize*s*n*o*d/(l*l)}function FB(t,e,r){const i=e-t.compared.sourceZoom,s=1/i,n=1/e,o=Math.log(t.compared.sourceZoom*n),l=(r.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(i))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*l+2*s*o+2*n-2*o*l/(i*i)-l/(e*e))/(t.desiredPixelFlow*Math.LN2)}function AB(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function LB(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function NB(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function DB(t,e,r){return-t.compared.pan*t.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function jB(t,e,r){return t.compared.pan*t.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function VB(t,e,r){return-2*t.compared.pan*t.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function zB(t,e,r){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-r.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function qB(t,e,r){const i=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,n=1/Math.LN2,o=-e+t.compared.targetZoom,l=1/o,c=(-t.halfWindowPanAtZoom(e)-r.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*i*s*n*l+t.halfWindowSize*i*s*n*c/(o*o)+t.halfWindowSize*s*n*l*c/e}function UB(t,e,r){const i=e-t.compared.targetZoom,s=1/i,n=1/e,o=Math.log(e/t.compared.targetZoom),l=(t.halfWindowPanAtZoom(e)+r.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*l-2*s*o+2*n+2*o*l/(i*i)-l/(e*e))/(t.desiredPixelFlow*Math.LN2)}function GB(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function BB(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function WB(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function HB(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const r=Math.LN2*t.compared.pan,i=e,s=t.halfWindowPanAtZoom(i),n=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?n*(r-s):n*(r+s)}function ZB(t,e){let r=JB(t,e);const i={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=i.ascensionFactor===0,n=i.descensionFactor===0,o=s?AB:CB,l=s?LB:kB,c=s?NB:FB,d=n?GB:zB,h=n?BB:qB,y=n?WB:UB,f=R=>o(t,R,i)+DB(t,R,i)+d(t,R,i),m=R=>l(t,R,i)+jB(t,R,i)+h(t,R,i),g=R=>c(t,R,i)+VB(t,R,i)+y(t,R,i);let v=f(r);const b=HB(t);let S;const $=e.maximumIterations||20,E=e.maximumDistance!=null?e.maximumDistance:1/0;for(S=0;S<$;S++){const R=e.desiredSlope??1e-6;let O=m(r);Math.abs(O)>R&&(O+=R);const z=O/g(r);if(isNaN(z)||r>=E&&z<0){if(!isFinite(E))return null;r=E,v=f(r);break}if(r-=z,r<=t.compared.sourceZoom||r<=t.compared.targetZoom)return null;const U=f(r);if(Math.abs(U-v)/v<=.005)break;v=U}return isNaN(v)||v>b*(1-.3)||r<=t.compared.sourceZoom||r<=t.compared.targetZoom?null:r}function JB(t,e){const r=Math.max(t.compared.sourceZoom,t.compared.targetZoom),i=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return i<r?e.maximumDistance!=null?r+(e.maximumDistance-r)/2:1.5*r:e.maximumDistance?Math.min(e.maximumDistance,i):i}let QB=class extends RB{constructor(e,r){super(),this._preallocSegments=[new ly,new ly,new ly],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,r)}update(e,r){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const i=r?.apex?ZB(e,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,r,i){e.interpolateComponentsAt(r,i),e===this._ascensionSegment?i.zoom=s2(i.zoom):e===this._descensionSegment&&(i.zoom=rh(i.zoom))}_updateWithApex(e,r){const[i,s,n]=this._preallocSegments,o=r?.ascensionFactor??.5,l=Math.min(1-o,r?.ascensionFactor!=null&&r.descensionFactor!=null?r.descensionFactor:.5),c=1-o-l;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=e,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),c>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*c,s.definition.compared.rotate=this.definition.compared.rotate*c,s.definition.segmentStart=i.definition.segmentEnd,s.definition.segmentEnd=i.definition.segmentEnd+c,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=e,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=o+c,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const YB=new PB;let KB=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=We(0),this._easing=d2,this.definition=new EB(e),this.path=new QB}update(e,r,i){this.definition.update(e,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(XR(isFinite(this.path.time)?this.path.time:oi(0)),i),this._easing=i.easing??(this._time>=1e3?d2:c2)}cameraAt(e,r){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const i=this.path.interpolateComponentsAt(e,YB);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(e){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(e,this._time)-r)/(i-r)}_applyTimeSettings(e,r){const i=r.speedFactor!=null?r.speedFactor:1,s=r.minDuration??h2.minDuration/i,n=r.maxDuration??h2.maxDuration/i;return e=r.duration!=null?We(r.duration):We(Math.min(Math.max(e/i,s),n))}};const XB=2e3,eW=64;let tW=class{constructor(e){this._view=e,this._animation=new KB(()=>new V7(this._view)),this._current=new V7(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,r,i={}){sr(this._current.viewpoint,e),sr(this._source.viewpoint,e),sr(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(e,r){this._animation.cameraAt(r,this._current),sr(e,this._current.viewpoint)}},uu=class extends Z{constructor(e){super(e),this._animation=null,this._destinationViewState=new b6,this.updateFunction=null,this.easing=nv.ease,this.viewpoint=new Di({targetGeometry:new se,scale:0,rotation:0}),this._updateTask=Ic({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new tW(e.view)}destroy(){this._updateTask=Ze(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,r,i){this.stop();const s=this.viewpoint;sr(s,r);const n=e.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(r.scale,n.scale)*eW,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i?.duration,maxDuration:i?.animationMode==="auto"?We(1/0):i?.maxDuration??hM.maxDuration,speedFactor:i?.speedFactor,easing:(typeof i?.easing=="string"?nv[i.easing]:i?.easing)||this.easing}),i?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,rW(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:We(0)}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,r){this.stop(),this.updateFunction=r,this.viewpoint=e;const i=new w3({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const r=this.animation;if(r&&r.state!==w3.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const i=performance.now()-this._startTime,s=this._transition.duration,n=s>0?i/s:1,o=n>=1;this._transition.applyRatio(this.viewpoint,n),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function rW(t,e,r,i){if(e?.duration!=null)return!0;const{time:s,isLinear:n}=t,o=e?.speedFactor||1;if(s>(e?.maxDuration??hM.maxDuration/o))return!1;if(n){const c=Je(),d=Et(...i.toScreen(c,...r.center)),h=Et(...r.toScreen(c,...i.center)),y=h!=null&&h.x>-1*r.size[0]&&h.x<(1.5+.5)*r.size[0]&&h.y>-1*r.size[1]&&h.y<(1.5+.5)*r.size[1],f=d!=null&&d.x>-1*i.size[0]&&d.x<(1.5+.5)*i.size[0]&&d.y>-1*i.size[1]&&d.y<(1.5+.5)*i.size[1];if(s>XB/o&&!y&&!f)return!1}return!0}a([u()],uu.prototype,"easing",void 0),a([u()],uu.prototype,"view",void 0),a([u()],uu.prototype,"viewpoint",void 0),uu=a([_("esri.views.2d.AnimationManager")],uu);const iW=uu;function Ne(){return Promise.all([L(()=>import("./money-tides-webglDeps-CP2iS7z_.js"),__vite__mapDeps([206,167,3,1,2,4,5,207,208,209,62,10,11,12])),L(()=>import("./money-tides-mapViewDeps-BOMzrb0W.js"),__vite__mapDeps([210,1,2,3,4,5,10,128,97,98,92,99,96,100,89,211,212,167,207,208,158,90,213,93,209,62,166,61,214,88,118,215,146,149,94,104,216,101,102,217,218,30,11,12,206,219,113,220,221,145,222,156,157,223,87,91,45,44,224,103,225,95,23,24,25,226,105,110,85,227,228,229,230,163,231,232]))])}const dp=()=>Ne().then(()=>L(()=>import("./money-tides-TileLayerView2D-Cx_d73n8.js"),__vite__mapDeps([233,3,1,2,4,5,96,97,98,92,99,100,89,217,128,218,30,10,11,12,215,214,88,61,208,209,62,166,167,118,146,149,219,212,207,158,213,93,113,220,221,145,211,90,94,104,101,102,156,157,226,87,91,45,44,105,110,85,234,235,236,230,237,189,238,228,229,239,240,241,242,243,244]))),na=()=>Ne().then(()=>L(()=>import("./money-tides-FeatureLayerView2D-BRkNoNWP.js").then(t=>t.F),__vite__mapDeps([245,3,1,2,4,5,211,97,98,92,99,96,100,89,212,167,207,208,158,90,10,213,93,209,62,166,61,214,88,118,215,146,149,94,104,246,247,248,11,12,45,52,237,189,229,230,113,111,105,216,249,172,54,107,243,239,240,244]))),ov={"base-dynamic":()=>Ne().then(()=>L(()=>import("./money-tides-BaseDynamicLayerView2D-rSUeHTiR.js"),__vite__mapDeps([250,3,1,2,4,5,251,214,88,89,61,208,209,62,166,167,118,215,10,146,149,235,212,207,158,236,237,11,12,189,252,239,240]))),"base-tile":dp,"bing-maps":dp,catalog:()=>Ne().then(()=>L(()=>import("./money-tides-CatalogLayerView2D-Dcx99u4u.js"),__vite__mapDeps([253,3,1,2,4,5,237,215,10,11,12,189,239]))),"catalog-dynamic-group":()=>Ne().then(()=>L(()=>import("./money-tides-CatalogDynamicGroupLayerView2D-Bkl9h1X6.js"),__vite__mapDeps([254,3,1,2,4,5,237,215,10,11,12,189,239]))),"catalog-footprint":()=>Ne().then(()=>L(()=>import("./money-tides-CatalogFootprintLayerView2D-CKsZdK7g.js"),__vite__mapDeps([255,3,1,2,4,5,245,211,97,98,92,99,96,100,89,212,167,207,208,158,90,10,213,93,209,62,166,61,214,88,118,215,146,149,94,104,246,247,248,11,12,45,52,237,189,229,230,113,111,105,216,249,172,54,107,243,239,240,244]))),csv:na,"geo-rss":()=>Ne().then(()=>L(()=>import("./money-tides-GeoRSSLayerView2D-D94c8vIW.js"),__vite__mapDeps([256,3,1,2,4,5,237,215,10,11,12,189,227,228,229,90,88,89,61,207,167,230,214,208,209,62,166,118,146,149,211,97,98,92,99,96,100,212,158,213,93,94,104,226,217,128,218,30,87,91,45,44,105,110,85,239]))),feature:na,geojson:na,parquet:na,graphics:()=>Ne().then(()=>L(()=>import("./money-tides-GraphicsLayerView2D-DT86CPBg.js"),__vite__mapDeps([257,3,1,2,4,5,237,215,10,11,12,189,227,228,229,90,88,89,61,207,167,230,214,208,209,62,166,118,146,149,211,97,98,92,99,96,100,212,158,213,93,94,104,226,217,128,218,30,87,91,45,44,105,110,85,239,244]))),group:()=>Ne().then(()=>L(()=>import("./money-tides-GroupLayerView2D-CwmIS390.js"),__vite__mapDeps([258,3,1,2,4,5,237,215,10,11,12,189,239]))),imagery:()=>Ne().then(()=>L(()=>import("./money-tides-ImageryLayerView2D-BI_Zussy.js"),__vite__mapDeps([259,3,1,2,4,5,260,209,62,166,167,61,133,214,88,89,208,118,215,10,146,149,127,125,11,12,237,189,226,97,98,92,99,96,100,217,128,218,30,87,90,91,93,45,44,211,212,207,158,213,94,104,105,110,85,238,228,229,230,251,235,236,252,131,199,246,243,239,240,244]))),"imagery-tile":()=>Ne().then(()=>L(()=>import("./money-tides-ImageryTileLayerView2D-BPu-d4ns.js"),__vite__mapDeps([261,3,1,2,4,5,262,11,12,260,209,62,166,167,61,133,214,88,89,208,118,215,10,146,149,127,125,237,189,130,263,230,212,207,158,225,213,93,236,264,131,244,199,246,243,239,240]))),kml:()=>Ne().then(()=>L(()=>import("./money-tides-KMLLayerView2D-Bu2CkgXq.js"),__vite__mapDeps([265,3,1,2,4,5,11,12,266,235,215,10,212,167,207,208,158,236,251,214,88,89,61,209,62,166,118,146,149,237,189,227,228,229,90,230,211,97,98,92,99,96,100,213,93,94,104,226,217,128,218,30,87,91,45,44,105,110,85,239,23,24,25,131,222,206,156,157,220,263]))),"knowledge-graph":()=>Ne().then(()=>L(()=>import("./money-tides-KnowledgeGraphLayerView2D-DlD9ErUo.js"),__vite__mapDeps([267,3,1,2,4,5,237,215,10,11,12,189,239]))),"link-chart":()=>Ne().then(()=>L(()=>import("./money-tides-KnowledgeGraphLayerView2D-DlD9ErUo.js"),__vite__mapDeps([267,3,1,2,4,5,237,215,10,11,12,189,239]))),"knowledge-graph-sublayer":na,"map-image":()=>Ne().then(()=>L(()=>import("./money-tides-MapImageLayerView2D-DTl0quNR.js"),__vite__mapDeps([268,3,1,2,4,5,251,214,88,89,61,208,209,62,166,167,118,215,10,146,149,235,212,207,158,236,237,11,12,189,226,97,98,92,99,96,100,217,128,218,30,87,90,91,93,45,44,211,213,94,104,105,110,85,238,228,229,230,252,239,246,240,241,242,243,244]))),"map-notes":()=>Ne().then(()=>L(()=>import("./money-tides-MapNotesLayerView2D-BdhfpiKc.js"),__vite__mapDeps([269,3,1,2,4,5,237,215,10,11,12,189,227,228,229,90,88,89,61,207,167,230,214,208,209,62,166,118,146,149,211,97,98,92,99,96,100,212,158,213,93,94,104,226,217,128,218,30,87,91,45,44,105,110,85,239,244]))),media:()=>Ne().then(()=>L(()=>import("./money-tides-MediaLayerView2D-98ERxWSM.js"),__vite__mapDeps([270,1,2,3,4,5,271,110,96,97,98,92,99,100,89,217,128,218,30,10,11,12,215,214,88,61,208,209,62,166,167,118,146,149,219,212,207,158,213,93,113,220,221,145,211,90,94,104,101,102,156,157,226,87,91,45,44,105,85,224,103,272,225,237,189,239]))),"ogc-feature":()=>Ne().then(()=>L(()=>import("./money-tides-OGCFeatureLayerView2D-DT1dYC23.js"),__vite__mapDeps([273,3,1,2,4,5,245,211,97,98,92,99,96,100,89,212,167,207,208,158,90,10,213,93,209,62,166,61,214,88,118,215,146,149,94,104,246,247,248,11,12,45,52,237,189,229,230,113,111,105,216,249,172,54,107,243,239,240,244]))),"open-street-map":dp,"oriented-imagery":na,route:()=>Ne().then(()=>L(()=>import("./money-tides-RouteLayerView2D-Buc269aU.js"),__vite__mapDeps([274,1,2,3,4,5,275,11,12,276,237,215,10,189,227,228,229,90,88,89,61,207,167,230,214,208,209,62,166,118,146,149,211,97,98,92,99,96,100,212,158,213,93,94,104,226,217,128,218,30,87,91,45,44,105,110,85,239,244]))),stream:()=>Ne().then(()=>L(()=>import("./money-tides-StreamLayerView2D-tjzhRfIf.js"),__vite__mapDeps([277,3,1,2,4,5,245,211,97,98,92,99,96,100,89,212,167,207,208,158,90,10,213,93,209,62,166,61,214,88,118,215,146,149,94,104,246,247,248,11,12,45,52,237,189,229,230,113,111,105,216,249,172,54,107,243,239,240,244]))),"subtype-group":()=>Ne().then(()=>L(()=>import("./money-tides-SubtypeGroupLayerView2D-B9Tinxlr.js"),__vite__mapDeps([278,3,1,2,4,5,245,211,97,98,92,99,96,100,89,212,167,207,208,158,90,10,213,93,209,62,166,61,214,88,118,215,146,149,94,104,246,247,248,11,12,45,52,237,189,229,230,113,111,105,216,249,172,54,107,243,239,240,244]))),tile:dp,"vector-tile":()=>Ne().then(()=>L(()=>import("./money-tides-VectorTileLayerView2D-CVJoOQT4.js"),__vite__mapDeps([279,3,1,2,4,5,100,96,145,221,10,146,99,167,209,62,166,214,88,89,61,208,118,215,149,230,43,147,148,128,237,11,12,189,239,240]))),video:()=>Ne().then(()=>L(()=>import("./money-tides-VideoLayerView2D-BKAOG2Bq.js"),__vite__mapDeps([280,3,1,2,4,5,281,282,11,12,182,181,272,118,214,88,89,61,208,209,62,166,167,215,10,146,149,211,97,98,92,99,96,100,212,207,158,90,213,93,94,104,225,283,237,189,227,228,229,230,226,217,128,218,30,87,91,45,44,105,110,85,239]))),wcs:()=>Ne().then(()=>L(()=>import("./money-tides-ImageryTileLayerView2D-BPu-d4ns.js"),__vite__mapDeps([261,3,1,2,4,5,262,11,12,260,209,62,166,167,61,133,214,88,89,208,118,215,10,146,149,127,125,237,189,130,263,230,212,207,158,225,213,93,236,264,131,244,199,246,243,239,240]))),"web-tile":dp,wfs:na,wms:()=>Ne().then(()=>L(()=>import("./money-tides-WMSLayerView2D-DTOfKswN.js"),__vite__mapDeps([284,3,1,2,4,5,251,214,88,89,61,208,209,62,166,167,118,215,10,146,149,235,212,207,158,236,237,11,12,189,252,239,240,246]))),wmts:()=>Ne().then(()=>L(()=>import("./money-tides-WMTSLayerView2D-hypV0kBQ.js"),__vite__mapDeps([285,3,1,2,4,5,234,235,215,10,212,167,207,208,158,236,214,88,89,61,209,62,166,118,146,149,230,237,11,12,189,239,240]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function sW(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",r=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new M(`${r}:view-not-supported`,`${e} is not supported in 2D`)}const av={hasLayerViewModule:t=>ov[t.type]!=null,importLayerView:t=>{const e=ov[t.type];if(e==null)throw sW(t);return e(t)}};var ai;let Yc=(ai=class{static getId(e,r,i,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${r}/${i}/${s}`}constructor(e,r,i,s){this.set(e,r,i,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|e<<8|i}acquire(e,r,i,s){this.set(e,r,i,s)}contains(e){const r=e.level-this.level;return r>=0&&this.row===e.row>>r&&this.col===e.col>>r&&this.world===e.world}containsChild(e){const r=e.level-this.level;return r>0&&this.row===e.row>>r&&this.col===e.col>>r&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new ai(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,r,i,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[n,o,l,c]=e.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(l),this.world=parseFloat(c)}else this.level=+e,this.row=+r,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ai(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,r,i){const s=this.clone();return s.col+=e,s.row+=r,i.normalizeKey(s),s}getChildKeys(){const e=this.level+1,r=this.row<<1,i=this.col<<1,s=this.world;return[new ai(e,r,i,s),new ai(e,r,i+1,s),new ai(e,r+1,i,s),new ai(e,r+1,i+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},ai.pool=new x2(()=>new ai(""),null,null,25,50),ai);function Al(t,e){return[t,e]}function oa(t,e,r){return t[0]=e,t[1]=r,t}function nW(t,e,r,i,s){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t}const Hi=new Yc("0/0/0/0");let oW=class fM{static create(e,r,i=null){const s=xr(e.spatialReference),n=r.origin||Al(e.origin.x,e.origin.y),o=Al(e.size[0]*r.resolution,e.size[1]*r.resolution),l=Al(-1/0,-1/0),c=Al(1/0,1/0),d=Al(1/0,1/0);i!=null&&(oa(l,Math.max(0,Math.floor((i.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymax)/o[1]))),oa(c,Math.max(0,Math.floor((i.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymin)/o[1]))),oa(d,c[0]-l[0]+1,c[1]-l[1]+1));const{cols:h,rows:y}=r;let f,m,g,v;return!i&&h&&y&&(oa(l,h[0],y[0]),oa(c,h[1],y[1]),oa(d,h[1]-h[0]+1,y[1]-y[0]+1)),e.isWrappable?(f=Al(Math.ceil(Math.round((s.valid[1]-s.valid[0])/r.resolution)/e.size[0]),d[1]),m=!0,g=s.origin,v=s.valid):(f=d,m=!1),new fM(r.level,r.resolution,r.scale,n,l,c,d,o,f,m,g,v)}constructor(e,r,i,s,n,o,l,c,d,h,y,f){this.level=e,this.resolution=r,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=l,this.norm=c,this.worldSize=d,this.wrap=h,this._spatialReferenceOrigin=y,this._spatialReferenceValid=f}normalizeCol(e){if(!this.wrap)return e;const r=this.worldSize[0];return e<0?r-1-Math.abs((e+1)%r):e%r}normalizeKey(e){if(!this.wrap)return;const r=this.worldSize[0],i=e.col;i<0?(e.col=i+r,e.world-=1):i>=r&&(e.col=i-r,e.world+=1)}denormalizeCol(e,r){return this.wrap?this.worldSize[0]*r+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const r=this.origin[0]+e*this.norm[0],i=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&i&&s?r===i[0]?s[0]:this.origin[0]===i[0]&&e===this.worldSize[0]?s[1]:r:r}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,r,i=!1){Hi.set(r);const s=i?Hi.col:this.denormalizeCol(Hi.col,Hi.world),n=Hi.row;return nW(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,r,i=!1){Hi.set(r);const s=i?Hi.col:this.denormalizeCol(Hi.col,Hi.world);return Array.isArray(e)?oa(e,this.getXForColumn(s),this.getYForRow(Hi.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(Hi.row)),e}};var nl;let x6=(nl=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:r,colFrom:i,colTo:s}of this.spans)for(let n=i;n<=s;n++){const o=e.getWorldForColumn(n);yield new Yc(e.level,r,e.normalizeCol(n),o)}}forEach(e,r){const{spans:i,lodInfo:s}=this,{level:n}=s;if(i.length!==0)for(const{row:o,colFrom:l,colTo:c}of i)for(let d=l;d<=c;d++)e.call(r,n,o,s.normalizeCol(d),s.getWorldForColumn(d))}},nl.pool=new x2(()=>new nl),nl),uy=class{constructor(e,r,i){this.row=e,this.colFrom=r,this.colTo=i}};const ze=new Yc("0/0/0/0");let aW=class mM{static create(e,r){e[1]>r[1]&&([e,r]=[r,e]);const[i,s]=e,[n,o]=r,l=n-i,c=o-s,d=c!==0?l/c:0,h=(Math.ceil(s)-s)*d,y=(Math.floor(s)-s)*d;return new mM(i,Math.floor(s),Math.ceil(o),d,l<0?h:y,l<0?y:h,l<0?n:i,l<0?i:n)}constructor(e,r,i,s,n,o,l,c){this.x=e,this.ymin=r,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=l,this.rightBound=c}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Jr=[[0,0],[0,0],[0,0],[0,0]],lW=1e-6;let uW=class{constructor(e,r=null,i=e.lods[0].level,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=e.lods.filter(l=>l.level>=i&&l.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(l=>oW.create(e,l,r));n.forEach((l,c)=>{this._infoByLevel[l.level]=o[c],this._infoByScale[l.scale]=o[c],this.scales[c]=l.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,r,i=!1){ze.set(r);const s=this._infoByLevel[ze.level];return s?s.getTileBounds(e,ze,i):e}getTileCoords(e,r,i=!1){ze.set(r);const s=this._infoByLevel[ze.level];return s?s.getTileCoords(e,ze,i):e}getTileCoverage(e,r=192,i=!0,s="closest"){if(!i&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=x6.pool.acquire(n),l=this._wrap;let c,d,h,y=1/0,f=-1/0;const m=o.spans;Jr[0][0]=Jr[0][1]=Jr[1][1]=Jr[3][0]=-r,Jr[1][0]=Jr[2][0]=e.size[0]+r,Jr[2][1]=Jr[3][1]=e.size[1]+r;for(const S of Jr)e.toMap(S,S),S[0]=n.getColumnForX(S[0]),S[1]=n.getRowForY(S[1]);const g=[];let v=3;for(let S=0;S<4;S++){if(Jr[S][1]===Jr[v][1]){v=S;continue}const $=aW.create(Jr[S],Jr[v]);y=Math.min($.ymin,y),f=Math.max($.ymax,f),g[$.ymin]===void 0&&(g[$.ymin]=[]),g[$.ymin].push($),v=S}if(y==null||f==null||f-y>100)return null;let b=[];for(c=y;c<f;){g[c]!=null&&(b=b.concat(g[c])),d=1/0,h=-1/0;for(let S=b.length-1;S>=0;S--){const $=b[S];d=Math.min(d,$.getLeftCol()),h=Math.max(h,$.getRightCol())}if(d=Math.floor(d),h=Math.floor(h),c>=n.first[1]&&c<=n.last[1])if(l)if(n.size[0]<n.worldSize[0]){const S=Math.floor(h/n.worldSize[0]);for(let $=Math.floor(d/n.worldSize[0]);$<=S;$++)m.push(new uy(c,Math.max(n.getFirstColumnForWorld($),d),Math.min(n.getLastColumnForWorld($),h)))}else m.push(new uy(c,d,h));else d>n.last[0]||h<n.first[0]||(d=Math.max(d,n.first[0]),h=Math.min(h,n.last[0]),m.push(new uy(c,d,h)));c+=1;for(let S=b.length-1;S>=0;S--){const $=b[S];$.ymax>=c?$.incrRow():b.splice(S,1)}}return o}getTileParentId(e){ze.set(e);const r=this._infoByLevel[ze.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(ze,this._lodInfos[i],ze),ze.id)}getTileResolution(e){const r=this._infoByLevel[typeof e=="object"?e.level:e];return r?r.resolution:-1}getTileScale(e){const r=this._infoByLevel[e.level];return r?r.scale:-1}intersects(e,r){ze.set(r);const i=this._infoByLevel[ze.level],s=e.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(ze,s,ze);const o=s.denormalizeCol(ze.col,ze.world);for(const l of e.spans)if(l.row===ze.row&&l.colFrom<=o&&l.colTo>=o)return!0}if(s.resolution<i.resolution){const[o,l,c,d]=e.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),h=i.denormalizeCol(ze.col,ze.world),y=s.getColumnForX(i.getXForColumn(h)),f=s.getRowForY(i.getYForRow(ze.row)),m=s.getColumnForX(i.getXForColumn(h+1))-1,g=s.getRowForY(i.getYForRow(ze.row+1))-1;return!(y>d||m<c||f>l||g<o)}const n=s.denormalizeCol(ze.col,ze.world);return e.spans.some(o=>o.row===ze.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(e,r,i){if(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],this._wrap){const s=xr(this.tileInfo.spatialReference),n=-i*(s.valid[1]-s.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const r=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(e>r[i]+lW)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(e){const r=this.scales;return this._infoByScale[e]||(e=r.reduce((i,s)=>Math.abs(s-e)<Math.abs(i-e)?s:i,r[0])),this._infoByScale[e]}scaleToLevel(e){const r=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let i=r.length-1;i>=0;i--)if(e<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-e)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,r,i){const s=this._infoByLevel[i.level];return e.set(i),r.resolution<s.resolution?null:(r.resolution===s.resolution||(e.level=r.level,e.col=Math.floor(i.col*s.resolution/r.resolution+.01),e.row=Math.floor(i.row*s.resolution/r.resolution+.01)),e)}},cW=class{constructor(e,r){this.item=e,this.controller=r,this.promise=null}},pW=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new ju,this._controllers=new ju,this._processingItems=new ju,this._pausedSignal=Pc(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Vd(e.peeker),this.process=e.process;const r=e.scheduler;e.priority&&r&&(this._task=r.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Ze(this._schedule),this._task=Ze(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const r=this._controllers.get(e);r&&r.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(r=>e.push(r)),this._controllers.clear(),e.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((r,i)=>e(i))}get(e){const r=this._deferreds.get(e);return r?r.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,r){const i=this.get(e);if(i)return i;const s=new AbortController;let n=null;r&&(n=$c(r,()=>s.abort()));const o=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),l(),d.reject(Mt())},l=()=>{c.remove(),n?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},c=J5(s.signal,o),d=Jo();return this._deferreds.set(e,d),this._controllers.set(e,s),d.promise.then(l,l),this._queue.push(e),this._scheduleNext(),d.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Mt()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of e)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=uh(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,r){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(r))}_processError(e,r){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(r))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let r;const i=new AbortController,s=new cW(e,i);this._processingItems.set(e,s);try{r=this.process(e,i.signal)}catch(n){this._processError(s,n)}Sr(r)?(s.promise=r,r.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,r)}get test(){}};const lv=[0,0];let hn=class extends Z{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:r,scheduler:i,priority:s}=this;this._queue=new pW({concurrency:e,scheduler:i,priority:s,process:(n,o)=>{const l=this._keyToItem.get(n);return r(l,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=st(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const r=typeof e=="string"?e:e.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const r=e.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),s=this.tileInfoView.getTileScale(e.key),n=hh(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(e.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(r)};return n.add(e.key),this._keyToItem.set(r,e),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const r=new Set;for(const o of e)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,l]of this._tilesByScale)if(eO(l,c=>r.has(c))){const c=Math.abs(o-i);c<n&&(s=l,n=c)}return this._getClosestTileKey(s,e).id}_getClosestTileKey(e,r){const i=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const l of e)if(r.has(l.id)){i.getTileCoords(lv,l);const c=V2(lv,s);c<o&&(o=c,n=l)}return n}};a([u({constructOnly:!0})],hn.prototype,"concurrency",void 0),a([u({constructOnly:!0})],hn.prototype,"priority",void 0),a([u({constructOnly:!0})],hn.prototype,"process",void 0),a([u({constructOnly:!0})],hn.prototype,"scheduler",void 0),a([u()],hn.prototype,"state",void 0),a([u({constructOnly:!0})],hn.prototype,"tileInfoView",void 0),hn=a([_("esri.views.2d.tiling.TileQueue")],hn);const Wle=hn;let dW=class{constructor(e,r,i){this.maxSize=e,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const r=this._tilePerId.get(e);if(!r)return;const i=r.key.level,s=this._tileKeysPerLevel[i];uv(this._tilePerId,e);for(let n=0;n<s.length;n++)if(s[n].id===e){s.splice(n,1);break}return r.visible=!0,r}add(e){e.visible=!1;const r=e.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=r.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(r)}prune(e,r,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,r,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,r,i,e))}_pruneAroundCenterTile(e,r,i,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return e;const{size:o,origin:l}=this._tileInfoView.tileInfo,c=i*o[0],d=i*o[1],h=[0,0],y=[0,0];for(n.sort((f,m)=>(h[0]=l.x+c*(f.col+.5),h[1]=l.y-d*(f.row+.5),y[0]=l.x+c*(m.col+.5),y[1]=l.y-d*(m.row+.5),Wd(h,r)-Wd(y,r)));n.length>0;){const f=n.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const r=this._tilePerId.get(e);this._removedFunc&&r&&this._removedFunc(r),uv(this._tilePerId,e)}};function uv(t,e){t.delete(e)}const aa=new Yc(0,0,0,0),Ks=new Map,hp=[],cy=[];let Zle=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new dW(e.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:r,tileIndex:i}=this,{scale:s,center:n,resolution:o}=e.state,{minScale:l,maxScale:c}=this.tileInfoView,d=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!r&&(s>l||s<c))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:y,lodInfo:f}=h,{level:m}=f;this.tiles.length=0,i.forEach(S=>S.visible=!0);let g=0,v=0;if(y.length>0)for(const{row:S,colFrom:$,colTo:E}of y)for(let T=$;T<=E;T++){g++;const R=aa.set(m,S,f.normalizeCol(T),f.getWorldForColumn(T)).id;let O=i.get(R);if(O)O.isReady?(Ks.set(R,O),v++):d||this._addParentTile(R,Ks);else{if(this._tileCache?.has(R)){if(O=this._tileCache.pop(R),this.tileIndex.set(R,O),O.isReady){Ks.set(R,O),v++;continue}}else O=this.acquireTile(aa),this.tileIndex.set(R,O);d||this._addParentTile(R,Ks)}}const b=v===g;for(const[S,$]of i){if(Ks.has(S))continue;aa.set(S);const E=this.tileInfoView.intersects(h,aa),T=this.cachePolicy==="purge"?aa.level!==m:aa.level>m;!E||!d&&b?!T&&E||hp.push($):$.isReady?T&&this.cachePolicy==="purge"&&this._hasReadyAncestor(aa,m)?hp.push($):cy.push($):T&&hp.push($)}for(const S of cy)S.isReady&&Ks.set(S.key.id,S);for(const S of hp)this._tileCache?this._tileCache.add(S):this.releaseTile(S),i.delete(S.key.id);for(const S of Ks.values())this.tiles.push(S);for(const S of i.values())Ks.has(S.key.id)||(S.visible=!1);this._tileCache?.prune(m,n,o),x6.pool.release(h),cy.length=0,hp.length=0,Ks.clear()}clear(){const{tileIndex:e}=this;for(const r of e.values())this.releaseTile(r);e.clear()}refresh(e){for(const r of this.tileIndex.values())e(r);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,r){let i=e,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s?.isReady){r.has(s.key.id)||r.set(s.key.id,s);break}}else if(this._tileCache?.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s?.isReady)){r.has(s.key.id)||r.set(s.key.id,s);break}}_hasReadyAncestor(e,r){const i=Gr();this.tileInfoView.getTileBounds(i,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=r&&s.key.level<e.level){const n=Gr();if(this.tileInfoView.getTileBounds(n,s.key,!0),PF(n,i))return!0}return!1}};const hW={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>L(()=>import("./money-tides-ElevationProfileAnalysisView2D-D7XyvurL.js"),__vite__mapDeps([286,3,1,2,4,5,128,175,10,281,287,232,288,289,290,291,292,293,25,294,295,296,11,12,297,298,116,117,299,300,301,22,302,303,140,72,122,123,136,178,70,304,109,149,155,135])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function yW(t){const e=hW[t.type];if(!e)throw new M("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let fW=class{constructor(e,r={}){this.events=new t_,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):r.canvas!=null&&(this._canvas=r.canvas);const i={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let s=this._canvas.getContext("webgl2",i);s||(s=this._canvas.getContext("webgl2",{...i,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=s,this._handles=sg([ig(this._canvas,"webglcontextlost",n=>this.events.emit("webgl-context-lost",n))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,r){if(this._hasMajorPerformanceCaveat||re("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=re("esri-performance-mode-frames-between-render")&&(r(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[i,s,n,o,l,c]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${i}, ${s}, ${n}, ${o}, ${l}, ${c})`}}else r()}resize(e){const r=this._canvas,i=r.style,{state:{size:s},pixelRatio:n}=e,o=s[0],l=s[1],c=Math.round(o*n),d=Math.round(l*n);r.width===c&&r.height===d||(r.width=c,r.height=d),i.width=o+"px",i.height=l+"px"}_computeViewTransform(e,r){const[i,s]=e.center,[n,o]=r.center,[l,c]=e.toScreen([0,0],n,o),[d,h]=e.toScreen([0,0],i,s),y=d-l,f=h-c,m=e.scale/r.scale,g=r.rotation-e.rotation,v=Bs();return $T(v),X2(v,v,[m,m]),kh(v,v,vh(g)),Gc(v,v,[y,f]),v}};function mW(t,e,r,i,s){gM(t,e,r||0,i||t.length-1,s||gW)}function gM(t,e,r,i,s){for(;i>r;){if(i-r>600){var n=i-r+1,o=e-r+1,l=Math.log(n),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(n-c)/n)*(o-n/2<0?-1:1);gM(t,e,Math.max(r,Math.floor(e-o*c/n+d)),Math.min(i,Math.floor(e+(n-o)*c/n+d)),s)}var h=t[e],y=r,f=i;for(yp(t,r,e),s(t[i],h)>0&&yp(t,r,i);y<f;){for(yp(t,y,f),y++,f--;s(t[y],h)<0;)y++;for(;s(t[f],h)>0;)f--}s(t[r],h)===0?yp(t,r,f):yp(t,++f,i),f<=e&&(r=f+1),e<=f&&(i=f-1)}}function yp(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function gW(t,e){return t<e?-1:t>e?1:0}function y2(t,e){if(!(this instanceof y2))return new y2(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function vW(t,e,r){if(!r)return e.indexOf(t);for(var i=0;i<e.length;i++)if(r(t,e[i]))return i;return-1}function Ll(t,e){Gp(t,0,t.children.length,e,t)}function Gp(t,e,r,i,s){s||(s=cu(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=e;o<r;o++)n=t.children[o],Bp(s,t.leaf?i(n):n);return s}function Bp(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function cv(t,e){return t.minX-e.minX}function pv(t,e){return t.minY-e.minY}function py(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l1(t){return t.maxX-t.minX+(t.maxY-t.minY)}function wW(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function bW(t,e){var r=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),n=Math.min(t.maxY,e.maxY);return Math.max(0,s-r)*Math.max(0,n-i)}function dy(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function u1(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function cu(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dv(t,e,r,i,s){for(var n,o=[e,r];o.length;)(r=o.pop())-(e=o.pop())<=i||(n=e+Math.ceil((r-e)/i/2)*i,mW(t,n,e,r,s),o.push(e,n,n,r))}y2.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],i=this.toBBox;if(!u1(t,e))return r;for(var s,n,o,l,c=[];e;){for(s=0,n=e.children.length;s<n;s++)o=e.children[s],u1(t,l=e.leaf?i(o):o)&&(e.leaf?r.push(o):dy(t,l)?this._all(o,r):c.push(o));e=c.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!u1(t,e))return!1;for(var i,s,n,o,l=[];e;){for(i=0,s=e.children.length;i<s;i++)if(n=e.children[i],u1(t,o=e.leaf?r(n):n)){if(e.leaf||dy(t,o))return!0;l.push(n)}e=l.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=cu([]),this},remove:function(t,e){if(t==null)return this;for(var r,i,s,n,o=this.data,l=this.toBBox(t),c=[],d=[];o||c.length;){if(o||(o=c.pop(),i=c[c.length-1],r=d.pop(),n=!0),o.leaf&&(s=vW(t,o.children,e))!==-1)return o.children.splice(s,1),c.push(o),this._condense(c),this;n||o.leaf||!dy(o,l)?i?(r++,o=i.children[r],n=!1):o=null:(c.push(o),d.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:cv,compareMinY:pv,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,i){var s,n=r-e+1,o=this._maxEntries;if(n<=o)return Ll(s=cu(t.slice(e,r+1)),this.toBBox),s;i||(i=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,i-1))),(s=cu([])).leaf=!1,s.height=i;var l,c,d,h,y=Math.ceil(n/o),f=y*Math.ceil(Math.sqrt(o));for(dv(t,e,r,f,this.compareMinX),l=e;l<=r;l+=f)for(dv(t,l,d=Math.min(l+f-1,r),y,this.compareMinY),c=l;c<=d;c+=y)h=Math.min(c+y-1,d),s.children.push(this._build(t,c,h,i-1));return Ll(s,this.toBBox),s},_chooseSubtree:function(t,e,r,i){for(var s,n,o,l,c,d,h,y;i.push(e),!e.leaf&&i.length-1!==r;){for(h=y=1/0,s=0,n=e.children.length;s<n;s++)c=py(o=e.children[s]),(d=wW(t,o)-c)<y?(y=d,h=c<h?c:h,l=o):d===y&&c<h&&(h=c,l=o);e=l||e.children[0]}return e},_insert:function(t,e,r){var i=this.toBBox,s=r?t:i(t),n=[],o=this._chooseSubtree(s,this.data,e,n);for(o.children.push(t),Bp(o,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},_split:function(t,e){var r=t[e],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);var n=this._chooseSplitIndex(r,s,i),o=cu(r.children.splice(n,r.children.length-n));o.height=r.height,o.leaf=r.leaf,Ll(r,this.toBBox),Ll(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(t,e){this.data=cu([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ll(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var i,s,n,o,l,c,d,h;for(c=d=1/0,i=e;i<=r-e;i++)o=bW(s=Gp(t,0,i,this.toBBox),n=Gp(t,i,r,this.toBBox)),l=py(s)+py(n),o<c?(c=o,h=i,d=l<d?l:d):o===c&&l<d&&(d=l,h=i);return h},_chooseSplitAxis:function(t,e,r){var i=t.leaf?this.compareMinX:cv,s=t.leaf?this.compareMinY:pv;this._allDistMargin(t,e,r,i)<this._allDistMargin(t,e,r,s)&&t.children.sort(i)},_allDistMargin:function(t,e,r,i){t.children.sort(i);var s,n,o=this.toBBox,l=Gp(t,0,e,o),c=Gp(t,r-e,r,o),d=l1(l)+l1(c);for(s=e;s<r-e;s++)n=t.children[s],Bp(l,t.leaf?o(n):n),d+=l1(l);for(s=r-e-1;s>=e;s--)n=t.children[s],Bp(c,t.leaf?o(n):n),d+=l1(c);return d},_adjustParentBBoxes:function(t,e,r){for(var i=r;i>=0;i--)Bp(e[i],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)t[r].children.length===0?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():Ll(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function _W(t,{timeZone:e,timeExtent:r}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:r?.start,currentEnd:r?.end}}}}let hv=class vM{constructor(e,r){this.key=new Yc(0,0,0,0),this.bounds=Gr(),this.objectIds=new Set,this.key.set(r);const i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=e.zoomToScale(i.level-1),this.maxScale=e.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return MF(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return _W(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),r=ls.acquire();for(let i=0;i<e.length;i++)r[i]=new vM(this.tileInfoView,e[i]);return r}getQuantizationParameters(){return $o.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const la={added:[],removed:[]},hy=new Set,SW=new Yc(0,0,0,0);function xW(t,e){const r=xr(e);if(!r)return null;const[i,s]=r.valid;return t[2]>s?[Gr([t[0],t[1],s,t[3]]),Gr([i,t[1],i+t[2]-s,t[3]])]:t[0]<i?[Gr([i,t[1],t[2],t[3]]),Gr([s-(i-t[0]),t[1],s,t[3]])]:null}let $W=class extends tO{constructor(e){super(),this._tiles=new Map,this._index=y2(9,re("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||Eg(e)===0||Pg(e)===0)return[];const r=xW(e,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const r={added:[],removed:[]};for(const i of e.added)if(!this.has(i)){const s=new hv(this.tileScheme,i);this._tiles.set(i,s),this._index.insert(s),r.added.push(s)}for(const i of e.removed)if(this.has(i)){const s=this.get(i);this._tiles.delete(i),this._index.remove(s),r.removed.push(s)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(e){const r=this.tileScheme.getTileCoverage(e,0);if(!r)return;const{spans:i,lodInfo:s}=r,{level:n}=s;if(i.length>0)for(const{row:o,colFrom:l,colTo:c}of i)for(let d=l;d<=c;d++){const h=SW.set(n,o,s.normalizeCol(d),s.getWorldForColumn(d)).id;if(hy.add(h),!this.has(h)){const y=new hv(this.tileScheme,h);this._tiles.set(h,y),this._index.insert(y),this.tiles.push(y),la.added.push(y)}}for(let o=this.tiles.length-1;o>=0;o--){const l=this.tiles[o];hy.has(l.id)||(this._tiles.delete(l.id),this.tiles.splice(o,1),this._index.remove(l),la.removed.push(l))}(la.added.length||la.removed.length)&&this.emit("update",la),x6.pool.release(r),hy.clear(),la.added.length=0,la.removed.length=0}};const Kle=1e-30,yv=512,c1=16777216,Xle=8,eue=29,tue=24,rue=4,iue=0,sue=0,nue=0,oue=1,aue=2,lue=3,uue=4,cue=5,pue=6,due=12,hue=13,yue=5,TW=6,fue=5,mue=6,wM=6,MW=1<<wM,gue=MW<<1,vue=1.05,wue=3,bue=1,_ue=3,Sue=3,xue=5,$ue=6,Tue=1.15,IW=4,Mue=128,EW=256,Iue=EW-2*IW,Eue=2,Pue=128,Rue=1,Oue=10,Cue=1024,kue=128,Fue=4,Aue=1,Lue=1<<20,Nue=.75,Due=10,jue=.75,Vue=256,zue=32,que=512,Uue=0,Gue=1,PW=1,Bue=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Wue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],fp=256,RW=()=>N.getLogger("esri.views.webgl.checkWebGLError");function bM(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const _M=!!re("enable-feature:webgl-debug");function SM(){return _M}function Hue(){return _M}function ua(t,e=SM()){if(e){const r=bM(t);if(r){const i=new Error().stack;RW().error(new M("webgl-error","WebGL error occurred",{message:r,stack:i}))}}}const Zue={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ca={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Y={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},OW=Object.values(Y),f2={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},Pd={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},M3={FLOAT:ca.FLOAT,UNSIGNED_BYTE:ca.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:ca.BYTE,UNSIGNED_SHORT:ca.UNSIGNED_SHORT,SHORT:ca.SHORT,UNSIGNED_INT:ca.UNSIGNED_INT,INT:ca.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},Jue=33984,fv={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},Que=1029,Yue=0,Kue=36064,Xue=36065,ece=36066,tce=36067,rce=33306,ice=36096,sce=36128,Xt={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function nce(t,e,r,i=0){const s=t.gl;t.bindBuffer(r);for(const n of r.layout){const o=e.get(n.name);if(o==null){console.warn(`There is no location for vertex attribute '${n.name}' defined.`);continue}const l=i*n.stride;if(n.count<=4)s.vertexAttribPointer(o,n.count,n.type,n.normalized,n.stride,n.offset+l),s.enableVertexAttribArray(o),n.divisor>0&&s.vertexAttribDivisor(o,n.divisor);else if(n.count===9)for(let c=0;c<3;c++)s.vertexAttribPointer(o+c,3,n.type,n.normalized,n.stride,n.offset+12*c+l),s.enableVertexAttribArray(o+c),n.divisor>0&&s.vertexAttribDivisor(o+c,n.divisor);else if(n.count===16)for(let c=0;c<4;c++)s.vertexAttribPointer(o+c,4,n.type,n.normalized,n.stride,n.offset+16*c+l),s.enableVertexAttribArray(o+c),n.divisor>0&&s.vertexAttribDivisor(o+c,n.divisor);else console.error("Unsupported vertex attribute element count: "+n.count);if(SM()){const c=bM(t.gl);c&&console.error(`Unable to bind vertex attribute "${n.name}" with baseInstanceOffset ${l}:`,c,n)}}}function oce(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function CW(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Y.R8:case Y.R8I:case Y.R8UI:case Y.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Y.RGBA4:case Y.R16F:case Y.R16I:case Y.R16UI:case Y.RG8:case Y.RG8I:case Y.RG8UI:case Y.RG8_SNORM:case Y.RGB565:case Y.RGB5_A1:case Pd.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Y.RGB8:case Y.RGB8I:case Y.RGB8UI:case Y.RGB8_SNORM:case Y.SRGB8:case Pd.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Y.RGBA8:case Y.R32F:case Y.R11F_G11F_B10F:case Y.RG16F:case Y.R32I:case Y.R32UI:case Y.RG16I:case Y.RG16UI:case Y.RGBA8I:case Y.RGBA8UI:case Y.RGBA8_SNORM:case Y.SRGB8_ALPHA8:case Y.RGB9_E5:case Y.RGB10_A2UI:case Y.RGB10_A2:case Pd.DEPTH_COMPONENT32F:case f2.DEPTH24_STENCIL8:return 4;case f2.DEPTH32F_STENCIL8:return 5;case Y.RGB16F:case Y.RGB16I:case Y.RGB16UI:return 6;case Y.RG32F:case Y.RG32I:case Y.RG32UI:case Y.RGBA16F:case Y.RGBA16I:case Y.RGBA16UI:return 8;case Y.RGB32F:case Y.RGB32I:case Y.RGB32UI:return 12;case Y.RGBA32F:case Y.RGBA32I:case Y.RGBA32UI:return 16;case Xt.COMPRESSED_RGB_S3TC_DXT1_EXT:case Xt.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Xt.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Xt.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Xt.COMPRESSED_R11_EAC:case Xt.COMPRESSED_SIGNED_R11_EAC:case Xt.COMPRESSED_RGB8_ETC2:case Xt.COMPRESSED_SRGB8_ETC2:case Xt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Xt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Xt.COMPRESSED_RG11_EAC:case Xt.COMPRESSED_SIGNED_RG11_EAC:case Xt.COMPRESSED_RGBA8_ETC2_EAC:case Xt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let xM=class{constructor(e=0,r=e){this.width=e,this.height=r,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=M3.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function kW(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:CW(t.internalFormat))*(t.target===34067?6:1))}const mp=()=>N.getLogger("esri/views/webgl/textureUtils");function gp(t){const{width:e,height:r,depth:i}=t;(e!=null&&e<0||r!=null&&r<0||i!=null&&i<0)&&mp().error("Negative dimension parameters are not allowed!");const{internalFormat:s}=t;if(s&&($M(s)||TM(s))){const{linearFilterDepth:n,compareEnabled:o,samplingMode:l,hasMipmap:c}=t;c&&mp().error("Depth textures cannot have mipmaps"),n?l!==9729&&l!==9728&&mp().error("Depth textures cannot sample mipmaps"):(l!==9728&&mp().error("Depth textures without filtering must use NEAREST filtering"),o&&mp().error("Depth textures without filtering cannot use compare function"))}}function FW(t){return OW.includes(t)}function $M(t){return T2(Pd,t)}function TM(t){return T2(f2,t)}function AW(t){return t!=null&&T2(Xt,t)}function pu(t){return t!=null&&"type"in t&&t.type==="compressed"}function LW(t){return t!=null&&"byteLength"in t}function mv(t){return t!=null&&!pu(t)&&!LW(t)}function Nl(t){return t===32879||t===35866}function gv(t,e,r,i=1){let s=Math.max(e,r);return t===32879&&(s=Math.max(s,i)),Math.floor(Math.log2(s))+1}function p1(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case M3.FLOAT:switch(t.pixelFormat){case 6408:return Y.RGBA32F;case 6407:return Y.RGB32F;default:throw new M("texture:unknown-format","Unable to derive format")}case M3.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Y.RGBA8;case 6407:return Y.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?f2.DEPTH24_STENCIL8:e===6402?Pd.DEPTH_COMPONENT24:e,t.internalFormat}function NW(t){let e="width"in t?t.width:t.codedWidth,r="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,r=t.videoHeight),{width:e,height:r,depth:1}}let DW=class MM extends xM{constructor(e,r){switch(super(),this.context=e,Object.assign(this,r),this.internalFormat){case Y.R16F:case Y.R32F:case Y.R8_SNORM:case Y.R8:this.pixelFormat=6403;break;case Y.R8I:case Y.R8UI:case Y.R16I:case Y.R16UI:case Y.R32I:case Y.R32UI:this.pixelFormat=36244}}static validate(e,r){return new MM(e,r)}};const jW=!!re("esri-tests-disable-gpu-memory-measurements"),Xs=()=>N.getLogger("esri/views/webgl/Texture");var mt;let VW=(mt=class{constructor(e,r=null,i=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,i=r;else{const s=DW.validate(e,r);if(!s)throw new M("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=s}this._descriptor.target===34067?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return jW?0:kW(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(fv.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,r){const i=this._descriptor;if(i.width!==e||i.height!==r){if(this._wasImmutablyAllocated)throw new M("texture:immutable-resize","Immutable textures can't be resized!");i.width=e,i.height=r,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!pu(e)&&this._descriptor.internalFormat&&T2(Xt,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!pu(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,r,i,s,n,o,l=0){o||Xs().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Xs().error("An attempt to update uninitialized texture!");const c=this._descriptor;c.internalFormat=p1(c);const{context:d,pixelFormat:h,dataType:y,target:f,isImmutable:m}=c;if(m&&!this._wasImmutablyAllocated)throw new M("texture:uninitialized","Cannot update immutable texture before allocation!");const g=d.bindTexture(this,mt.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+s>c.width||i+n>c.height)&&Xs().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:v}=d;l&&(s&&n||Xs().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),v.pixelStorei(v.UNPACK_SKIP_ROWS,l)),mv(o)?v.texSubImage2D(f,e,r,i,s,n,h,y,o):pu(o)?v.compressedTexSubImage2D(f,e,r,i,s,n,c.internalFormat,o.levels[e]):v.texSubImage2D(f,e,r,i,s,n,h,y,o),l&&v.pixelStorei(v.UNPACK_SKIP_ROWS,0),d.bindTexture(g,mt.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,r,i,s,n,o,l,c){c||Xs().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Xs().error("An attempt to update an uninitialized texture!");const d=this._descriptor;d.internalFormat=p1(d);const{context:h,pixelFormat:y,dataType:f,isImmutable:m,target:g}=d;if(m&&!this._wasImmutablyAllocated)throw new M("texture:uninitialized","Cannot update immutable texture before allocation!");Nl(g)||Xs().warn("Attempting to set 3D texture data on a non-3D texture");const v=h.bindTexture(this,mt.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(mt.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||s<0||r+n>d.width||i+o>d.height||s+l>d.depth)&&Xs().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=h;if(pu(c))c=c.levels[e],b.compressedTexSubImage3D(g,e,r,i,s,n,o,l,d.internalFormat,c);else{const S=c;b.texSubImage3D(g,e,r,i,s,n,o,l,y,f,S)}h.bindTexture(v,mt.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new M("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,gp(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const r=this._descriptor.context.bindTexture(this,mt.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(mt.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(r,mt.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new M("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,gp(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,gp(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),gp(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=ll(this._compressionAbortController)}_setData(e,r){const i=this._descriptor,s=i.context?.gl;if(!s)return;ua(s),this.hasWebGLTextureObject||(this._glName=s.createTexture(),i.context.instanceCounter.increment(fv.Texture,this)),gp(i);const n=i.context.bindTexture(this,mt.TEXTURE_UNIT_FOR_UPDATES);i.context.setActiveTexture(mt.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),ua(s);const o=r??i.target,l=Nl(o);if(mv(e))this._setDataFromTexImageSource(e,o);else{const{width:c,height:d,depth:h}=i;if(c==null||d==null)throw new M("texture:missing-size","Width and height must be specified!");if(l&&h==null)throw new M("texture:missing-depth","Depth must be specified!");if(i.internalFormat=p1(i),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,i.internalFormat,i.hasMipmap,c,d,h),pu(e)){if(!AW(i.internalFormat))throw new M("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,i.internalFormat,o)}else this._texImage(o,0,i.internalFormat,c,d,h,e),ua(s),i.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),ua(s),i.context.bindTexture(n,mt.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let r=34069;r<=34074;r++)this._setData(e,r)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:s}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,r),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(e,r){const{gl:i}=this._descriptor.context,s=this._descriptor;s.internalFormat=p1(s);const n=Nl(r),{width:o,height:l,depth:c}=NW(e);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=l),n&&s.depth,n&&(s.depth=c),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,s.internalFormat,s.hasMipmap,o,l,c),this._texImage(r,0,s.internalFormat,o,l,c,e),ua(i),s.hasMipmap&&(this.generateMipmap(),ua(i))}_setDataFromCompressedSource(e,r,i){const s=this._descriptor,{width:n,height:o,depth:l}=s,c=e.levels,d=gv(i,n,o,l),h=Math.min(d,c.length)-1;this._descriptor.context.gl.texParameteri(s.target,33085,h),this._forEachMipmapLevel((y,f,m,g)=>{const v=c[Math.min(y,c.length-1)];this._compressedTexImage(i,y,r,f,m,g,v)},h)}_texStorage(e,r,i,s,n,o){const{gl:l}=this._descriptor.context;if(!FW(r)&&!$M(r)&&!TM(r))throw new M("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const c=i?gv(e,s,n,o):1;if(Nl(e)){if(o==null)throw new M("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texStorage3D(e,c,r,s,n,o)}else l.texStorage2D(e,c,r,s,n);this._wasImmutablyAllocated=!0}_texImage(e,r,i,s,n,o,l){const c=this._descriptor.context.gl,d=Nl(e),{isImmutable:h,pixelFormat:y,dataType:f}=this._descriptor;if(h){if(l!=null){const m=l;if(d){if(o==null)throw new M("texture:missing-depth","Missing depth dimension for 3D texture upload");c.texSubImage3D(e,r,0,0,0,s,n,o,y,f,m)}else c.texSubImage2D(e,r,0,0,s,n,y,f,m)}}else{const m=l;if(d){if(o==null)throw new M("texture:missing-depth","Missing depth dimension for 3D texture upload");c.texImage3D(e,r,i,s,n,o,0,y,f,m)}else c.texImage2D(e,r,i,s,n,0,y,f,m)}}_compressedTexImage(e,r,i,s,n,o,l){const c=this._descriptor.context.gl,d=Nl(e);if(this._descriptor.isImmutable){if(l!=null)if(d){if(o==null)throw new M("texture:missing-depth","Missing depth dimension for 3D texture upload");c.compressedTexSubImage3D(e,r,0,0,0,s,n,o,i,l)}else c.compressedTexSubImage2D(e,r,0,0,s,n,i,l)}else if(d){if(o==null)throw new M("texture:missing-depth","Missing depth dimension for 3D texture upload");c.compressedTexImage3D(e,r,i,s,n,o,0,l)}else c.compressedTexImage2D(e,r,i,s,n,0,l)}async _compressOnWorker(e){const{width:r,height:i,context:s,flipped:n,preMultiplyAlpha:o,hasMipmap:l}=this._descriptor,c=this._descriptor.compress?.compressionTracker,d=this._descriptor.compress?.compressionCallback,{compressedTextureETC:h,compressedTextureS3TC:y}=s.capabilities;if(!mt.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!h&&!y)return;this.abortCompression();const f=new AbortController;let m;this._compressionAbortController=f,c?.increment();try{e instanceof Uint8Array?m=e.buffer:(m=await createImageBitmap(e,{imageOrientation:n?"flipY":"none"}),Re(f));const g={data:m,width:r,height:i,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:l,hasETC:!!h,hasS3TC:!!y},v=await mt.compressionWorkerHandle.invoke(g,f.signal,"low");if(Re(f),v.compressedTexture&&this.hasWebGLTextureObject){const b=this.usedMemory;this._descriptor.internalFormat=v.internalFormat,this._setData(v.compressedTexture),d?.(b-this.usedMemory)}}catch(g){fi(g)||Xs().error("Texture compression failed!")}finally{c?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),m instanceof ImageBitmap&&m.close()}}_forEachMipmapLevel(e,r=1/0){let{width:i,height:s,depth:n,hasMipmap:o,target:l}=this._descriptor;const c=l===32879;if(i==null||s==null||c&&n==null)throw new M("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let d=0;e(d,i,s,n),o&&(i!==1||s!==1||c&&n!==1)&&!(d>=r);++d)i=Math.max(1,i>>1),s=Math.max(1,s>>1),c&&(n=Math.max(1,n>>1))}_applySamplingMode(){const e=this._descriptor,r=e.context?.gl;let i=e.samplingMode,s=e.samplingMode;i===9985||i===9987?(i=9729,e.hasMipmap||(s=9729)):i!==9984&&i!==9986||(i=9728,e.hasMipmap||(s=9728)),r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,i),r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){const e=this._descriptor,r=e.context?.gl;typeof e.wrapMode=="number"?(r.texParameteri(e.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,e.wrapMode)):(r.texParameteri(e.target,r.TEXTURE_WRAP_S,e.wrapMode.s),r.texParameteri(e.target,r.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,r=e.context?.gl,i=e.compareEnabled?r.COMPARE_REF_TO_TEXTURE:r.NONE;r.texParameteri(e.target,r.TEXTURE_COMPARE_MODE,i),e.compareEnabled&&r.texParameteri(e.target,r.TEXTURE_COMPARE_FUNC,r.GREATER),ua(r)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,r=e.context.capabilities.textureFilterAnisotropic;r&&e.context.gl.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},mt.TEXTURE_UNIT_FOR_UPDATES=0,mt.compressionWorkerHandle=null,mt);const yy=()=>N.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function zW(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const qW=[0,0,0,0];let IM=class{constructor(){this.type="single",this._highlightOptions=new Vo,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*fp),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,r){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,TW),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<wM)-1,activeGradient:this}]}_updateGradientTexture(e){const r=UW(this._highlightOptions);if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,zW(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,s=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,n=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,l=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,c=Math.sqrt(Math.PI/2)*PW,d=Math.abs(s)>c?Math.round(10*(Math.abs(s)-c))/10:0,h=Math.abs(l)>c?Math.round(10*(Math.abs(l)-c))/10:0;let y;d&&!h?yy().error("The outer rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!d&&h?yy().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):d&&h&&yy().error("The highlight is "+Math.max(d,h)+"px away from the edge of the feature; consider reducing some width values.");const f=[void 0,void 0,void 0,void 0];function m(v,b,S){f[0]=(1-S)*v[0]+S*b[0],f[1]=(1-S)*v[1]+S*b[1],f[2]=(1-S)*v[2]+S*b[2],f[3]=(1-S)*v[3]+S*b[3]}const{_texelData:g}=this;for(let v=0;v<fp;++v)y=s+v/(fp-1)*(l-s),y<s?(f[0]=0,f[1]=0,f[2]=0,f[3]=0):y<n?m(qW,i.outlineColor,(y-s)/(n-s)):y<o?[f[0],f[1],f[2],f[3]]=i.outlineColor:y<l?m(i.outlineColor,i.fillColor,(y-o)/(l-o)):[f[0],f[1],f[2],f[3]]=i.fillColor,g[4*v]=255*f[0],g[4*v+1]=255*f[1],g[4*v+2]=255*f[2],g[4*v+3]=255*f[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=l,!this._shadeTex){const v=new xM(fp,1);v.wrapMode=33071,this._shadeTex=new VW(e,v)}this._shadeTex.updateData(0,0,0,fp,1,this._texelData)}};function UW(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let GW=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let r=0;r<e.length;r++)this.gradients[r]||(this.gradients[r]=new IM),this.gradients[r].setHighlightOptions(e[r]);for(let r=e.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const r=[];for(let i=0;i<this.gradients.length;i++){const s=this.gradients[i];r.push({activeReasons:e,activeGradient:s}),e<<=1}return r}};const EM={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},BW={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},WW={...EM,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function HW({pixelRatio:t,state:e,displayLevel:r,requiredLevel:i},s){const n=1/2**(r-s.key.level),o=1/2**(i-s.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:e.scale,currentZoom:r,metersPerSRUnit:vi(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function PM(t){return t.passOptions?.type==="highlight"}function RM(t){return t.passOptions?.type==="hittest"}function ZW(t){if(!RM(t))return null;const{position:e,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}=t.passOptions;return{position:e,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}}function JW(t){if(!PM(t))return null;const{activeReasons:e,highlightAll:r}=t.passOptions;return{activeReasons:e,highlightAll:r?1:0}}function cce(t,e,r){const i={};for(const s in r)typeof r[s]!="function"?i[s]=r[s]:i[s]=r[s](t,e);return i}function pce(t,e){const{attributeView:r,context:i}=t;return{storage:r.getUniforms(i),view:HW(t,e),hittestRequest:ZW(t),highlight:JW(t)}}function dce(t){return{inside:t.selection===2,outside:t.selection===3}}function QW(t){return RM(t)?BW:PM(t)&&t.passOptions.stepType==="clear"?WW:EM}function hce(t){const{row:e,col:r}=t.key,i=r*yv,s=e*yv;return{tileOffsetFromLocalOrigin:[i%c1,s%c1],maxIntsToLocalOrigin:[Math.floor(i/c1),Math.floor(s/c1)]}}const YW=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function yce(t){return YW.toJSON(t)}function fce(t){const{bandCount:e,attributeTable:r,colormap:i,pixelType:s}=t.raster.rasterInfo;return e===1&&(r!=null||i!=null||s==="u8"||s==="s8")}function KW(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new GW:new IM),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function mce(t,e,r,i){const{painter:s,highlightGradient:n}=t,{highlight:o}=s.effects;if(!n)return;const l=t.passOptions,c=n.getReasonsWithGradients();for(let d=0;d<c.length;d++){const h={...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:c[d].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(h),r(h),d<c.length-1){let f=0;for(let m=d+1;m<c.length;m++)f|=c[m].activeReasons;r({...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:f,stepType:"clear",highlightAll:e}})}const y={...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:c[d].activeReasons,stepType:"draw",highlightAll:e}};s.setPipelineState(QW(t)),s.updatePipelineState(t.context),o.draw(y),o.unbind()}t.passOptions=l}const d1=t=>parseFloat(t)/100;function XW(t,e,r){const i=typeof t.left=="string"?d1(t.left)*e:t.left,s=typeof t.right=="string"?d1(t.right)*e:t.right,n=typeof t.top=="string"?d1(t.top)*r:t.top,o=typeof t.bottom=="string"?d1(t.bottom)*r:t.bottom,l=n;return{xmin:i,xmax:Math.max(e-s,i),ymin:l,ymax:Math.max(r-o,n)}}function OM(t,e,r,i){switch(e.type){case"rect":{const{width:s,height:n}=t,{xmin:o,xmax:l,ymin:c,ymax:d}=XW(e,s,n),{x:h,y}=r;return h>o&&h<l&&y>c&&y<d}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||_g(e.path,[r.x,r.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?bg(e.geometry,i):mh(e.geometry,i))}}function eH(t){if(!t.highlights)return null;const e=t.highlights.findIndex(r=>r.name==="default");return e===-1?null:t.highlights.items[e]}function tH(t,e){if(!t.highlights){if(!e)return;t.highlights=new q([new Vo])}const r=t.highlights.findIndex(i=>i.name==="default");e?t.highlights.items[r].assignFrom(e):(t.highlights.removeAt(r),t.highlights.length===0&&(t.highlights=null))}async function rH(t,e,r){const i=pT(e)?cT(t,e):e;if(!t.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set;const n=new Set;let o=!1,l=null,c=null;r?.include?wv(r.include,vv(t,f=>{s.add(f),fy(f,m=>n.add(m))},(f,m)=>{n.add(f),s.add(m)},f=>{l||(l=new Set),l.add(f)},f=>s.add(f),()=>o=!0)):(o=!0,s=new Set(t.allLayerViews),s.forEach(f=>{fy(f,m=>n.add(m))})),r?.exclude&&wv(r.exclude,vv(t,f=>{s.delete(f),fy(f,m=>n.delete(m))},f=>n.delete(f),f=>{c||(c=new Set),c.add(f)}));const d=t.toMap(i),h=t.allLayerViews.filter(f=>!f.suspended&&s.has(f)&&f.clips.every(m=>OM(t,m,i,d))).reverse();let y=[...o?t.graphicsView.hitTest(d).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:d})):[],...await Promise.all(h.map(f=>f.hitTest(d,i)).toArray())].filter(mi).flat().filter(mi);return y=y.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||n.has(f.graphic.layer)),l&&(y=y.filter(f=>!("graphic"in f)||!f.graphic||l?.has(I3(f.graphic)))),c&&(y=y.filter(f=>!("graphic"in f)||!f.graphic||!c?.has(I3(f.graphic)))),{screenPoint:i,results:y}}function vv(t,e,r,i,s,n){return o=>{if(o instanceof et){if(o.layer===t)n?.();else{const l=t.allLayerViews.find(c=>c.layer===o.layer);l&&s?.(l)}i(I3(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const l=t.allLayerViews.find(c=>c.layer===o.parent);l&&r(o,l)}else{const l=t.allLayerViews.find(c=>c.layer===o);l&&e(l)}}}function wv(t,e){if(t)if(R9(t))for(const r of t)if(R9(r))for(const i of r)e(i);else e(r);else e(t)}function I3(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function fy(t,e){const r=t.layer;r?.type==="subtype-group"&&r.sublayers.forEach(i=>{e(i)})}let vp=null,m2=!0;function iH(t,e,r){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(m2)try{return new ImageData(t,e)}catch{m2=!1}return CM(t,e,r)}function gce(t,e,r,i){if(!e||!r)throw new Error("Cannot construct image data without dimensions");if(m2)try{return new ImageData(t,e,r)}catch{m2=!1}const s=CM(e,r,i);return s.data.set(t,0),s}function sH(){return vp||(vp=document.createElement("canvas"),vp.width=1,vp.height=1),vp}function CM(t,e,r){return r||(r=sH()),r.getContext("2d").createImageData(t,e)}async function nH(t,e){const r=window.URL.createObjectURL(t);try{const{data:i}=await Le(r,{...e,responseType:"image"});return i}catch(i){throw fi(i)?i:new M("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function vce(t,e){const{arrayBuffer:r,mediaType:i}=await oH(t,e),s=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await L(()=>import("./money-tides-gif-C1qhXrqx.js"),__vite__mapDeps([305,3,1,2,4,5]));if(n(r))return o(r,e)}if(s){const{isAnimatedPNG:n,parseApng:o}=await L(()=>import("./money-tides-apng-Du6hhFLH.js"),__vite__mapDeps([306,37,3,1,2,4,5]));if(n(r))return o(r,e)}return nH(new Blob([r],{type:i}),e)}async function oH(t,e){const r=Kb(t);if(r?.isBase64)return{arrayBuffer:rO(r.data),mediaType:r.mediaType};const i=await Le(t,{responseType:"array-buffer",...e});return{arrayBuffer:i.data,mediaType:i.getHeader?.("Content-Type")??""}}function kM(t,e,r){const{ctx:i,canvas:s}=AM(t,r),n=i.getImageData(0,0,t.width,t.height),o=NM(s,e);return LM(s),{dataUrl:o,data:n}}function FM(t,e){const{ctx:r,canvas:i}=AM(t,e),s=r.getImageData(0,0,t.width,t.height);return LM(i),s}function AM(t,e){const r=aH();e.premultipliedAlpha&&pH(t),r.width=t.width,r.height=t.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(t,0,0),e.flipY&&cH(i),{ctx:i,canvas:r}}function LM(t){t.width=0,t.height=0}function aH(){return my==null&&(my=document.createElement("canvas")),my}let my=null;function NM(t,e){const r=dH[e.format],i=e.quality/100;return t.toDataURL(r,i)}function DM(t,e){const r=uH(t),i=yH[r];return{format:r,quality:gi(e??i,0,100)}}function jM(t,e){return e/Math.max(t[0],t[1])}function lH(t,e,r,i=0,s=0,n=t.width-i,o=t.height-s,l=!1){const{data:c}=t,{width:d,height:h,data:y}=e,f=n/d,m=o/h,g=Math.ceil(f/2),v=Math.ceil(m/2),b=t.width;for(let S=0;S<h;S++)for(let $=0;$<d;$++){const E=4*($+(l?h-S-1:S)*d);let T=0,R=0,O=0,z=0,U=0,J=0;const ie=(S+.5)*m;for(let oe=Math.floor(S*m);oe<(S+1)*m;oe++){const ee=Math.abs(ie-(oe+.5))/v,Te=($+.5)*f,pe=ee*ee;for(let wt=Math.floor($*f);wt<($+1)*f;wt++){const Tr=Math.abs(Te-(wt+.5))/g,Rt=Math.sqrt(pe+Tr*Tr);if(Rt>=1)continue;let he=2*Rt*Rt*Rt-3*Rt*Rt+1;const Vt=4*(i+wt+(s+oe)*b);J+=he*c[Vt+3],R+=he,!r&&c[Vt+3]<255&&(he=he*c[Vt+3]/255),O+=he*c[Vt],z+=he*c[Vt+1],U+=he*c[Vt+2],T+=he}}y[E]=O/T,y[E+1]=z/T,y[E+2]=U/T,y[E+3]=J/R}return e}function uH(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return hH}}function cH(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function pH(t){const e=t.data,r=e.length;for(let i=0;i<r;i+=4){const s=e[i+3];if(s!==255&&s>0){const n=255/s;e[i]=e[i]*n,e[i+1]=e[i+1]*n,e[i+2]=e[i+2]*n}}}const dH={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},bv=98,hH="png",yH={png:100,jpg:bv,jpeg:bv},wce=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:iH,encode:kM,encodeData:FM,getFormatAndQuality:DM,getMaximumResolutionScale:jM,resampleHermite:lH,toDataUrl:NM},Symbol.toStringTag,{value:"Module"})),VM={flipY:!0,premultipliedAlpha:!0};async function fH(t,e){const r=await zM(t,e),{format:i,quality:s}=DM(e?.format,e?.quality);return kM(r,{format:i,quality:s},VM)}async function mH(t,e){const r=await zM(t,e);return FM(r,VM)}function zM(t,e){const r=wH(e||{},vH(t.stage,t.size),t.size,t.padding),i=gH(e,t.allLayerViews);return t.stage.takeScreenshot(r,i,t.backgroundColor,e?.rotation)}function gH(t={},e){if(!t.layers)return;const r=[];return t.layers.forEach(i=>{const s=e.find(n=>n.layer.id===i.id);s?.container&&r.push(s.container)}),r}function vH(t,e){return Math.min(4,jM(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function wH(t,e,r,i){t.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const n=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let l,c,d=t.area||{x:0,y:0,width:n,height:o};if(s){const h=n/o,y=s[0]/s[1];if(y>h){const f=d.width/y;d={x:d.x,y:Math.round(d.y+(d.height-f)/2),width:d.width,height:Math.round(f)}}else{const f=d.height*y;d={x:Math.round(d.x+(d.width-f)/2),y:d.y,width:Math.round(f),height:d.height}}}else s=[d.width,d.height];return s[0]>d.width?(l=Math.min(s[0]/d.width,e),c=s[0]/d.width/l):(l=1,c=s[0]/d.width),{cropArea:{x:Math.round((d.x+i.left)*l),y:Math.round((d.y+i.top)*l),width:Math.round(d.width*l),height:Math.round(d.height*l)},outputScale:c,resolutionScale:l}}const bH=t=>t.includes("Brush");let qM=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),bH(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const _v=Symbol("analyses-owner-handles");let bo=class extends Z{constructor(e){super(e),this._allAnalysisViews=new q,this._creatingViewCount=0,this._attachedToViewResolver=Sv(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(r,i)=>this.view.emit(r,i)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Mt("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Mt()),this._attachedToViewResolver=Sv()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const r=this._items.get(e);if(r==null||r.state.list===1)throw new M("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return r.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),_v)}_disconnectOwners(){this.removeHandles(_v),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const s of e)this._addAnalysis(s);const r=e.on("after-add",s=>this._addAnalysis(s.item)),i=e.on("after-remove",s=>this._removeAnalysis(s.item));return Br(()=>{r.remove(),i.remove();for(const s of e)this._removeAnalysis(s)})}_addAnalysis(e){const r=this._items.get(e);if(r==null){const i={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,i),i.createAnalysisViewTask=fh(s=>this._createAnalysisViewPromise(i,s).then(n=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:n}),n),n=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:n}),n}))}else r.state.list=0}_removeAnalysis(e){const r=this._items.get(e);r!=null?(r.state.list=1,this._scheduleUpdate()):N.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=uh(()=>this._update()))}_update(){this._scheduledUpdateHandle=Ze(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:r,view:i}=e;switch(this._items.delete(r),e.state.view){case 0:e.createAnalysisViewTask=ll(e.createAnalysisViewTask);break;case 1:i!=null&&(this._allAnalysisViews.remove(i),e.view=st(i),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:r,analysisView:i}))}})}async _createAnalysisViewPromise(e,r){const{analysis:i}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(i.type))try{this._moduleMap.set(i.type,await this.importAnalysisViewModule(i))}catch{throw this._creatingViewCount-=1,new M("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${i.type}" is not supported`)}if(zs(r))throw this._creatingViewCount-=1,Mt("AnalysisView creation aborted");const s=new(this._moduleMap.get(i.type)).default({analysis:i,view:this.view});let n=!0;$c(r,()=>{n&&this._destroyAnalysisView(i,s)});try{await s.when()}catch(o){throw n=!1,this._destroyAnalysisView(i,s),o}if(zs(r))throw Mt();return n=!1,e.view=s,e.state.view=1,this._allAnalysisViews.add(s),this._creatingViewCount-=1,s}_destroyAnalysisView(e,r){r.destroyed||(this._creatingViewCount-=1,r.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:r}))}};a([u()],bo.prototype,"updating",null),a([u({constructOnly:!0})],bo.prototype,"importAnalysisViewModule",void 0),a([u({constructOnly:!0})],bo.prototype,"view",void 0),a([u()],bo.prototype,"_allAnalysisViews",void 0),a([u()],bo.prototype,"_creatingViewCount",void 0),bo=a([_("esri.views.support.AnalysisViewManager")],bo);const _H=bo;function Sv(){const t=Jo();return t.promise.catch(()=>{}),t}let SH=class{constructor(e){this.getUnmaskedRenderer=e}};function xH(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new SH(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let xv;function $H(){return xv??=IH(),xv}let TH=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function MH(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let r=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=e.getContext("webgl2"),r!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=xH(r)?.getUnmaskedRenderer()??"unknown")),r==null)return r;t.available=!0,t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(t.supportsHighPrecisionFragment=i.precision>0),r}function IH(){const t=new TH,e=MH(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function EH(t){const e=$H();return e.available?t==="3d"&&e.majorPerformanceCaveat?new M("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new M("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new M("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new M("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function PH(t){return t&&"nodeType"in t}function RH(t){return t&&typeof t.render=="function"}const $v={component:"esri-component"};let Ea=class extends Z{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const r=this._get("node");e!==r&&(e&&e.classList.add($v.component),r&&r.classList.remove($v.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||PH(e)?(this._set("widget",null),Wb(e)):(RH(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};a([u()],Ea.prototype,"id",null),a([u()],Ea.prototype,"node",null),a([xe("node")],Ea.prototype,"castNode",null),a([u({readOnly:!0})],Ea.prototype,"widget",void 0),Ea=a([_("esri.views.ui.Component")],Ea);const w0=Ea,OH={left:0,top:0,bottom:0,right:0},UM={bottom:30,top:15,right:15,left:15},en="esri-ui",Mr={ui:en,corner:`${en}-corner`,innerContainer:`${en}-inner-container`,manualContainer:`${en}-manual-container`,cornerContainer:`${en}-corner-container`,topLeft:`${en}-top-left`,topRight:`${en}-top-right`,bottomLeft:`${en}-bottom-left`,bottomRight:`${en}-bottom-right`};function CH(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function h1(t){return t===0?"0":`${t}px`}function gy(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function vy(t,{top:e,bottom:r,left:i,right:s}){t.style.top=e,t.style.bottom=r,t.style.left=i,t.style.right=s}let Ts=class extends S2{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=qn(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&vy(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&vy(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ae(()=>[this.view?.padding,this.container],this._applyViewPadding,or),ae(()=>this.padding,this._applyUIPadding,or),ae(()=>[this.container,this._locale],([e,r])=>{e&&e.setAttribute("lang",r)},or),iO(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const r=this._get("container");e!==r&&(e&&(e.classList.add(Mr.ui),PO(e),this._attachContainers(e)),r&&(r.classList.remove(Mr.ui),vy(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const r=this._getViewPadding(),{top:i,bottom:s}=r;return Math.max(e-i-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...UM,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const r=this._getViewPadding(),{left:i,right:s}=r;return Math.max(e-i-s,0)}add(e,r){let i,s,n;if(Array.isArray(e))return void e.forEach(l=>this.add(l,r));const o=gy(e);o&&({index:i,position:r,component:e,key:s}=o),r&&typeof r=="object"&&({index:i,key:s,position:r,internal:n}=r),!e||r&&!this._isValidPosition(r)||this._add(e,r,i??this._getNumComponentsAtPosition(r),s,n)}remove(e,r){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,r));const i=this._find(e);if(i){const s=this._componentMap.get(i);if(!s||s.key!==r)return;const n=this._components.indexOf(i);return i.node.parentNode?.removeChild(i.node),this._componentMap.delete(i),i.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(l=>{const c=this._componentMap.get(l);c&&c.position===s.position&&c.index>s.index&&c.index--}),this._components.splice(n,1)[0]}}empty(e,r={removeInternal:!1}){if(Array.isArray(e)){for(const n of e)this.empty(n,r);return}const i=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(n=>n==null?!1:!(this._componentMap.get(n)?.internal??!1)||r.removeInternal);for(const n of s)this.remove(n)}move(e,r){if(Array.isArray(e)&&e.forEach(o=>this.move(o,r)),!e)return;let i;const s=gy(e)||gy(r);if(s&&(i=s.index,r=s.position,e=s.component||e),r&&!this._isValidPosition(r))return;const n=this.remove(e);n&&this.add(n,{position:r,index:i})}find(e){if(!e)return null;const r=this._findById(e);return r&&(r.widget||r.node)}getComponents(e,r={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(e,r):this._components.filter(i=>r.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:s})=>i??s)}getPosition(e){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(e))return r;return null}_add(e,r,i,s,n){e instanceof w0||(e=new w0({node:e}));const{widget:o}=e;o!=null&&o instanceof Z&&o.addHandles(Br(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const l=this._positionNameToContainerLookup[r];this._components.some(c=>{const d=this._componentMap.get(c)?.position,h=d?this._positionNameToContainerLookup[d]:null;return l===h&&this._componentMap.get(c)?.index===i})&&this._components.forEach(c=>{const d=this._componentMap.get(c),h=d?.position,y=h?this._positionNameToContainerLookup[h]:null;d&&y===l&&d.index>=i&&d.index++}),this._place({component:e,position:r,index:i}),this._components.push(e),this._componentMap.set(e,{key:s,position:r,internal:n,index:i})}_find(e){return e?e instanceof w0?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??OH}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Mr.innerContainer,Mr.cornerContainer);const r=document.createElement("div");r.classList.add(Mr.innerContainer,Mr.manualContainer);const i=document.createElement("div");i.classList.add(Mr.topLeft,Mr.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(Mr.topRight,Mr.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(Mr.bottomLeft,Mr.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(Mr.bottomRight,Mr.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=r;const l=sO();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":l?s:i,"top-trailing":l?i:s,"bottom-leading":l?o:n,"bottom-trailing":l?n:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const r=e.position??"manual",{component:i,index:s}=e,n=this._positionNameToContainerLookup[r],o=s!=null&&s>-1;if(CH(i.widget)&&i.widget.startup(),!o)return void n.appendChild(i.node);const l=Array.from(n.children);if(l.length!==0){for(const c of l){const d=this._findByNode(c);if(d&&s<(this._componentMap.get(d)?.index??0))return void c.parentNode?.insertBefore(i.node,c)}n.appendChild(i.node)}else n.appendChild(i.node)}_toPixelPosition(e){return{top:h1(e.top),left:h1(e.left),right:h1(e.right),bottom:h1(e.bottom)}}_findByComponent(e){return this._components.find(r=>r===e)??null}_findById(e){return this._components.find(({id:r})=>r===e)??null}_findByNode(e){return e?this._components.find(({node:r})=>r===e):null}_getComponentsAtPosition(e,r){const i=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(mi).filter(s=>r.includeInternal||!this._componentMap.get(s)?.internal).map(({widget:s,node:n})=>s??n)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};a([u()],Ts.prototype,"_locale",void 0),a([u()],Ts.prototype,"container",null),a([u()],Ts.prototype,"height",null),a([u({value:UM})],Ts.prototype,"padding",null),a([xe("padding")],Ts.prototype,"castPadding",null),a([u()],Ts.prototype,"view",void 0),a([u()],Ts.prototype,"width",null),Ts=a([_("esri.views.ui.UI")],Ts);const kH=Ts,FH=new Map;function AH(t){return FH.get(t)}function Tv(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function LH(t,e){return t.length!==e.length||t.some((r,i)=>r.text!==e[i].text)}function y1(t,e,r){!r||!e||t.find(i=>i.layerView===e&&i.text===r)||t.push({text:r,layerView:e})}function NH(t){return t.type==="bing-maps"}const gs=[];let du=class extends Z{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new q,this.view=null,this._allLayerViewsChange=r=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=this.view?.allLayerViews;i&&(this.addHandles(i.map(s=>ae(()=>[s.suspended,s.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),r?.removed&&r.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([ys(()=>this.view?.allLayerViews,"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ji(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,r=e?.allLayerViews;gs.length=0;let i=!1,s=null;if(!e||!r)return void this._clear();r.forEach(o=>{if(o.suspended||!o.layer?.attributionVisible)return;const l=o.layer;if(Tv(l,"user"))return void y1(gs,o,l.copyright);if(l.type==="integrated-mesh-3dtiles"&&l.hasGoogleUrl&&(i=!0,s=o),l.hasAttributionData){if(this._fetchedAttributionData.has(o)){const d=this._fetchedAttributionData.get(o);return void(d?y1(gs,o,this._getDynamicAttribution(d,e,l)):Tv(l)&&y1(gs,o,l.copyright))}return void this._fetchAttributionData(o)}const c="portalItem"in l?l.portalItem?.accessInformation:void 0;y1(gs,o,c||l.copyright)});const n=r.find(o=>o.layer?.type==="integrated-mesh-3dtiles");if(this.view&&n){const o=AH(this.view);if(o){const l=o.getAttributionText();for(let c=l.length-1;c>-1;--c)gs.unshift({text:l[c],layerView:n})}}i&&s&&gs.unshift({text:"Google Maps",layerView:s}),LH(this.items,gs)&&(this.items.removeAll(),this.items.addMany(gs)),gs.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const r=await P2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=r.ok?this._createContributionIndex(r.value,NH(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,r){const i=e.contributors,s={};if(!i)return s;for(let n=0;n<i.length;n++){const o=i[n],l=o.coverageAreas;if(!l)return;for(const c of l){const d=c.bbox,h=c.zoomMin-(r&&c.zoomMin?1:0),y=c.zoomMax-(r&&c.zoomMax?1:0),f=new le({xmin:d[1],ymin:d[0],xmax:d[3],ymax:d[2],spatialReference:B.WGS84}),m={extent:Ja(f),attribution:o.attribution||"",score:c.score!=null?c.score:100,id:n};for(let g=h;g<=y;g++)s[g]??=[],s[g].push(m)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,r,i){const{extent:s,scale:n}=r;let o=i.tileInfo?.scaleToZoom(n)??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const l=e[o],c=k2(s.center.clone().normalize(),B.WebMercator),d=new Set;return l?l.filter(h=>{const y=h.id,f=!d.has(y)&&c&&h.extent&&mh(h.extent,c);return f&&d.add(y),f}).sort((h,y)=>y.score-h.score||h.objectId-y.objectId).map(h=>h.attribution).join(", "):""}};a([u({readOnly:!0,type:q})],du.prototype,"items",void 0),a([u({readOnly:!0})],du.prototype,"state",null),a([u()],du.prototype,"view",void 0),du=a([_("esri.widgets.Attribution.AttributionViewModel")],du);const GM=du,Ws={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function DH(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:VH(t[e])}}}function jH(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function VH(t){return function(e,...r){jH(e)?nO(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...r)}}const Dl="esri-attribution",jl={base:Dl,poweredBy:`${Dl}__powered-by`,sources:`${Dl}__sources`,open:`${Dl}--open`,sourcesOpen:`${Dl}__sources--open`,link:`${Dl}__link`};let cr=class extends M2{constructor(e,r){super(e,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(i=>{i.forEach(({target:s})=>{this._scheduleOverflowCheck(s)})}),this._mutationObserver=new MutationObserver(i=>{let s=!1;for(const n of i)if(n.type==="childList"||n.type==="characterData"||n.type==="attributes"){s=!0;break}s&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new GM}initialize(){this.addHandles(ys(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,r)=>(e.includes(r.text)||e.push(r.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[jl.open]:this._isOpen};return Ur("div",{bind:this,class:this.classes(jl.base,Ws.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Ur("div",{class:jl.poweredBy},"Powered by"," ",Ur("a",{class:jl.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:s}=this,n={[jl.sourcesOpen]:e,[Ws.interactive]:r};return Ur("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(jl.sources,n),innerHTML:s,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let r=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=e,o=n>s,l=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,l&&(r=!0),this._isOpen){const c=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,c&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};a([u()],cr.prototype,"_isOpen",void 0),a([u()],cr.prototype,"_isInteractive",null),a([u()],cr.prototype,"_attributionTextOverflowed",void 0),a([u()],cr.prototype,"_prevSourceNodeHeight",void 0),a([u({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],cr.prototype,"attributionText",null),a([u()],cr.prototype,"icon",null),a([u()],cr.prototype,"itemDelimiter",void 0),a([u()],cr.prototype,"label",null),a([u(),E2("esri/widgets/Attribution/t9n/Attribution")],cr.prototype,"messages",void 0),a([u()],cr.prototype,"view",null),a([u({type:GM})],cr.prototype,"viewModel",void 0),a([DH()],cr.prototype,"_toggleState",null),cr=a([_("esri.widgets.Attribution")],cr);const zH=cr;function qH(){const t=re("mapview-essential-goto-duration");return t==null?t:We(t)}function UH(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function GH(t,e,r){return t.goTo(e,r)}const BH=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return $2(s),this.goToOverride?this.goToOverride(s,i):GH(s,i.target,i.options)}};return a([u()],r.prototype,"goToOverride",void 0),a([u()],r.prototype,"view",void 0),r=a([_("esri.widgets.support.GoTo")],r),r};let Pa=class extends BH(Z){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(or)}destroy(){this.view=null}get canShowNorth(){return UH(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:qH()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const r=-e.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?ae(()=>e?.rotation,this._updateForRotation,or):ae(()=>e?.camera,this._updateForCamera,or))}_watchForView(e){this.addHandles(ae(()=>this.view,this._updateRotationWatcher,e))}};a([u({readOnly:!0})],Pa.prototype,"canShowNorth",null),a([u({readOnly:!0})],Pa.prototype,"orientation",void 0),a([u({readOnly:!0})],Pa.prototype,"state",null),a([u()],Pa.prototype,"view",void 0),Pa=a([_("esri.widgets.Compass.CompassViewModel")],Pa);const BM=Pa,Mv="esri-compass",Iv={base:Mv,iconContainer:`${Mv}__icon-container`};let yn=class extends M2{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new BM,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return ag({button:()=>L(()=>import("./money-tides-index-CE4l1I6I.js"),__vite__mapDeps([307,308,4,5,309,310,311,12,312,313,314,315,316,317,318,319,320])),icon:()=>L(()=>import("./money-tides-index-PnnliBx6.js").then(e=>e.i),__vite__mapDeps([312,4,5,313,314]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:r}=this.viewModel,{messages:i}=this;return Ur("div",{class:this.classes(Iv.base,Ws.widget)},Ur("calcite-button",{class:Ws.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},Ur("div",{"aria-hidden":"true",class:Iv.iconContainer,title:i.reset},Ur("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};a([u()],yn.prototype,"goToOverride",null),a([u()],yn.prototype,"icon",null),a([u()],yn.prototype,"label",null),a([u(),E2("esri/widgets/Compass/t9n/Compass")],yn.prototype,"messages",void 0),a([u()],yn.prototype,"view",null),a([u({type:BM})],yn.prototype,"viewModel",void 0),yn=a([_("esri.widgets.Compass")],yn);const WH=yn,Ev="esri-navigation-toggle",Pv={base:Ev,isLayoutHorizontal:`${Ev}--horizontal`};let hu=class extends Z{constructor(e){super(e),this._navigationMode="pan",this.view=null,e?.isDefaultViewModel||oO(N.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:r,...i}=e;return i}initialize(){this.addHandles(ji(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const e=this.view?.navigation?.actionMap;if(!e)return;const r=this._navigationMode==="pan";e.dragPrimary=r?"pan":"rotate",e.dragSecondary=r?"rotate":"pan"}};a([u({readOnly:!0})],hu.prototype,"state",null),a([u()],hu.prototype,"_navigationMode",void 0),a([u()],hu.prototype,"view",void 0),hu=a([_("esri.widgets.NavigationToggle.NavigationToggleViewModel")],hu);const WM=hu;let fn=class extends M2{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new WM({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const i=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;aO(i),this.toggle()},e?.isDefaultUI||lO(N.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:r,...i}=e;return i}loadDependencies(){return ag({button:()=>L(()=>import("./money-tides-index-CE4l1I6I.js"),__vite__mapDeps([307,308,4,5,309,310,311,12,312,313,314,315,316,317,318,319,320]))})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",r=this.viewModel?.navigationMode==="pan",i=this.messages.toggle;return Ur("div",{class:this.classes(Pv.base,Ws.widget,{[Pv.isLayoutHorizontal]:this.layout==="horizontal"})},Ur("calcite-button",{afterCreate:s=>{this._panButton=s},appearance:r?"outline-fill":"solid",class:Ws.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),Ur("calcite-button",{afterCreate:s=>{this._rotateButton=s},appearance:r?"solid":"outline-fill",class:Ws.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};a([u()],fn.prototype,"icon",null),a([u()],fn.prototype,"label",null),a([u({value:"vertical"})],fn.prototype,"layout",null),a([u(),E2("esri/widgets/NavigationToggle/t9n/NavigationToggle")],fn.prototype,"messages",void 0),a([u()],fn.prototype,"view",null),a([u({type:WM})],fn.prototype,"viewModel",void 0),fn=a([_("esri.widgets.NavigationToggle")],fn);const HH=fn;let Ra=class extends Z{get canZoomIn(){if(!this.view?.ready)return!1;const r=this.view?.constraints?.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const i=e.constraints?.effectiveMinScale;return i===0||this._scale<i}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};a([u({readOnly:!0})],Ra.prototype,"canZoomIn",null),a([u({readOnly:!0})],Ra.prototype,"canZoomOut",null),a([u()],Ra.prototype,"view",void 0),a([u()],Ra.prototype,"_scale",null),Ra=a([_("esri.widgets.Zoom.ZoomConditions2D")],Ra);const ZH=Ra;let yu=class extends Z{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};a([u({readOnly:!0})],yu.prototype,"canZoomIn",null),a([u({readOnly:!0})],yu.prototype,"canZoomOut",null),a([u()],yu.prototype,"view",void 0),yu=a([_("esri.widgets.Zoom.ZoomConditions3D")],yu);const JH=yu;let _o=class extends Z{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new ZH({view:e}):e.type==="3d"&&(this._zoomConditions=new JH({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():jd(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():jd(e.goTo({zoomFactor:.5})))}};a([u()],_o.prototype,"_zoomConditions",void 0),a([u()],_o.prototype,"canZoomIn",null),a([u()],_o.prototype,"canZoomOut",null),a([u({readOnly:!0})],_o.prototype,"state",null),a([u()],_o.prototype,"view",null),_o=a([_("esri.widgets.Zoom.ZoomViewModel")],_o);const HM=_o,Rv={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let mn=class extends M2{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new HM,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return ag({button:()=>L(()=>import("./money-tides-index-CE4l1I6I.js"),__vite__mapDeps([307,308,4,5,309,310,311,12,312,313,314,315,316,317,318,319,320]))})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[Rv.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return Ur("div",{class:this.classes(Rv.base,Ws.widget,e)},Ur("calcite-button",{class:Ws.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),Ur("calcite-button",{class:Ws.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};a([u()],mn.prototype,"icon",null),a([u()],mn.prototype,"label",null),a([u({value:"vertical"})],mn.prototype,"layout",null),a([u(),E2("esri/widgets/Zoom/t9n/Zoom")],mn.prototype,"messages",void 0),a([u()],mn.prototype,"view",null),a([u({type:HM})],mn.prototype,"viewModel",void 0),mn=a([_("esri.widgets.Zoom")],mn);const QH=mn;function YH(t){return t?.view!==void 0}let b0=class extends kH{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const s=this._find(i),n=s?.widget;YH(n)&&(n.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([ae(()=>this.components,this._componentsWatcher,or),ae(()=>this.view,this._updateViewAwareWidgets,or)])}_add(e,r,i,s,n){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,r,i,s,n)}_removeComponents(e){e.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(e){this.constructed&&e.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(e){const r=this._createWidget(e);return new w0({id:e,node:r})}_createWidget(e){const r=this.view;switch(e){case"attribution":return new zH({view:r});case"compass":return new WH({view:r});case"navigation-toggle":return new HH({view:r,isDefaultUI:!0});case"zoom":return new QH({view:r})}}};a([u()],b0.prototype,"components",void 0),b0=a([_("esri.views.ui.DefaultUI")],b0);const ZM=b0;let _0=class extends ZM{constructor(e){super(e),this.components=["attribution","zoom"]}};a([u()],_0.prototype,"components",void 0),_0=a([_("esri.views.ui.2d.DefaultUI2D")],_0);const JM=_0;let KH=class{constructor(e={},r={},i=8,s=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=r,this.maxAnisotropy=i,this.maxPreferredTexturePixels=s}},$6=class E3{constructor(e,r,i=""){this.major=e,this.minor=r,this._context=i}lessThan(e,r){return this.major<e||e===this.major&&this.minor<r}greaterEqual(e,r){return!this.lessThan(e,r)}validate(e){if(this.major!==e.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new M(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new E3(this.major,this.minor,this._context)}static parse(e,r=""){const[i,s]=e.split("."),n=/^\s*\d+\s*$/;if(!i?.match||!n.test(i))throw new M((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!s?.match||!n.test(s))throw new M((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(i,10),l=parseInt(s,10);return new E3(o,l,r)}},XH=class extends $6{constructor(e,r){super(e,r,"webmap")}};function wy(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new XH(2,35);var P3;let S0=P3=class extends A{constructor(t){super(t),this.color=new ne([0,0,0,1])}clone(){return new P3(P({color:this.color}))}};a([u({type:ne,json:{write:!0}})],S0.prototype,"color",void 0),S0=P3=a([_("esri.webmap.background.ColorBackground")],S0);const eZ=S0;let QM,YM,KM,XM,eI,tI,rI;async function tZ(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:r,MapViewNavigation:i,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([L(()=>import("./money-tides-webglDeps-CP2iS7z_.js"),__vite__mapDeps([206,167,3,1,2,4,5,207,208,209,62,10,11,12])),L(()=>import("./money-tides-mapViewDeps-BOMzrb0W.js"),__vite__mapDeps([210,1,2,3,4,5,10,128,97,98,92,99,96,100,89,211,212,167,207,208,158,90,213,93,209,62,166,61,214,88,118,215,146,149,94,104,216,101,102,217,218,30,11,12,206,219,113,220,221,145,222,156,157,223,87,91,45,44,224,103,225,95,23,24,25,226,105,110,85,227,228,229,230,163,231,232]))]);YM=t,KM=e,XM=r,eI=i,tI=s,rI=n,QM=o}var mc;let ge=(mc=class extends TB(rG(kD(XD(DD(Eq))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new ui({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new K2({actionMap:new p6({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new zc,this.analysisViewManager=new _H({importAnalysisViewModule:r=>yW(r),view:this}),this.floors=new q,this.grid=null,this.map=null,this.timeline=new qM,this.type="2d",this.view2dType=null,this.ui=new JM,this.animationsEnabled=!0,this.test={takeScreenshot:async r=>mH(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},PD()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=st(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new $W(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,r=this.spatialReference;return{lods:e?.spatialReference?.equals(r)?e.lods:null,spatialReference:r}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:r,center:i,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!n&&(r?.effectiveLODs||(o=-1),(!i||e===0&&o===-1)&&(s?.targetGeometry==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const r=e.targetGeometry,i=this.spatialReference;return ix(r.spatialReference,i)}get background(){return wy(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return eH(this)}set highlightOptions(e){tH(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&N.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),r=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(i=>!i.destroyed&&!("layerViews"in i)&&i.updating===!0)||e);if(re("esri-2d-log-updating")){const i=this.allLayerViews.reduce((s,n)=>({...s,[`${n.layer.id}(${n.layer.type})`]:!n.destroyed&&!("layerViews"in n)&&n.updating}),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(i)}
-> updatingMagnifier: ${e}
`)}return r}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new Ve({rings:[e.map(r=>[r[0],r[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,r){return rH(this,e,r)}async takeScreenshot(e){return fH(this._getScreenshotView(e),e)}toScreen(e,r){return this.stateManager.toScreen(e,r)}async whenAnalysisView(e){if(e.parent==null)throw new M("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return wy(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return wy(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return av.hasLayerViewModule(e)}importLayerView(e){return av.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(N.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const r=this.toMap(e),i=await this.hitTest(e),s=this.allLayerViews.toArray().filter(d=>d.clips.every(h=>OM(this,h,e,r))).reverse(),n=new globalThis.Map(s.map(d=>[d.layer.uid,d])),o=[];let l=0,c=0;for(;l<i.results.length||c<s.length;){const d=i.results.at(l);if(d&&d.type!=="graphic"){++l;continue}const h=n.get((d?.layer??d?.graphic.layer)?.uid);if((!d||h)&&c<s.length&&s.at(c)!==h){const y=s.at(c);"fetchPopupFeaturesAtLocation"in y&&o.push({mapPoint:r,layerView:y}),++c}else d&&(o.push({graphic:d.graphic,layerView:h}),++l)}return{hits:o,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=EH(this.type);if(re("safari")&&re("safari")<9&&(e=new M("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:re("safari")})),e!=null)throw N.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return tZ()}_getDefaultViewpoint(){const{constraints:e,initialExtent:r,map:i,padding:s,size:n}=this;if(!e)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,l=this.stateManager.getUserStartupOptions(this.size),c=o?.viewpoint,d=c?.targetGeometry?.extent??r,h=d?.center,y=c?.rotation??0,f=c?.scale||d&&e4(d,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),m=l.center??h,g=l.rotation??y,v=l.scale??f;return m&&v?new Di({targetGeometry:m,scale:v,rotation:g}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const r=new fW(this.surface),i=new QM(this.surface,{canvas:this.renderCanvas,contextOptions:new KH(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},r);this.stage=i,this._magnifierView=new tI,this._magnifierView.magnifier=this.magnifier,this._gridView=new rI;const s=new XM({view:this});this._set("labelManager",s);const n=new iW({view:this});this._set("animationManager",n);const o=new eI({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",c=>this.fatalError=c.error),ae(()=>this.stationary,c=>i.stationary=c,Dr),ae(()=>this.background,c=>{i.backgroundColor=c?.color,this._magnifierView.backgroundColor=c?.color},Dr),ae(()=>this.magnifier,c=>this._magnifierView.magnifier=c,Dr),ae(()=>this.grid,c=>this._gridView.grid=c,Dr),ae(()=>this.renderingOptions,c=>i.renderingOptions=c,Dr),ae(()=>this.highlights.items.map(c=>({name:c.name,options:{fillColor:c.color,haloColor:c.haloColor,fillOpacity:c.fillOpacity,haloOpacity:c.haloOpacity,haloWidth:c.haloWidth,haloBlur:c.haloBlur}})),()=>{i.highlightGradient=KW(i.highlightGradient,this.highlights.items)},Dr),ae(()=>this.state.id,()=>i.state=this.state,Dr),ae(()=>this.animationsEnabled,c=>{this.stage.animationsEnabled=c},Dr)],"map-view"),this._updateStageChildren();const l=this._resolveWhenReady;this._resolveWhenReady=[],l.forEach(c=>c(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(r=>{this.stage.addChild(r.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new uW(ur.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const r=new YM({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new KM(e)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:r,padding:i,size:s,stage:n}=this;return{allLayerViews:r,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:i,size:s,stage:n}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},mc.type="2d",mc);a([u({constructOnly:!0})],ge.prototype,"deactivatedWebGLExtensions",void 0),a([u({constructOnly:!0})],ge.prototype,"debugWebGLExtensions",void 0),a([u({readOnly:!0})],ge.prototype,"featuresTilingScheme",void 0),a([u({readOnly:!0})],ge.prototype,"graphicsTileStore",null),a([u()],ge.prototype,"graphicsView",void 0),a([u()],ge.prototype,"constraintsInfo",null),a([u()],ge.prototype,"initialExtentRequired",null),a([u()],ge.prototype,"labelManager",void 0),a([u({type:K2,nonNullable:!0})],ge.prototype,"navigation",void 0),a([u({constructOnly:!0})],ge.prototype,"renderCanvas",void 0),a([u()],ge.prototype,"renderingOptions",void 0),a([u({constructOnly:!0})],ge.prototype,"supersampleScreenshotsEnabled",void 0),a([u()],ge.prototype,"defaultsFromMapSettings",null),a([u({readOnly:!0})],ge.prototype,"typeSpecificPreconditionsReady",null),a([u(jf(zc,"analyses"))],ge.prototype,"analyses",void 0),a([u()],ge.prototype,"analysisViewManager",void 0),a([u({type:eZ})],ge.prototype,"background",null),a([u()],ge.prototype,"center",null),a([u({type:q})],ge.prototype,"floors",void 0),a([u()],ge.prototype,"grid",void 0),a([u({type:Vo})],ge.prototype,"highlightOptions",null),a([u()],ge.prototype,"map",void 0),a([u()],ge.prototype,"padding",null),a([u({readOnly:!0})],ge.prototype,"rendering",null),a([u({readOnly:!0})],ge.prototype,"resolution",null),a([u()],ge.prototype,"scale",null),a([u({type:Boolean,value:!1})],ge.prototype,"spatialReferenceLocked",null),a([u({readOnly:!0})],ge.prototype,"tileInfo",null),a([u({type:qM,readOnly:!0})],ge.prototype,"timeline",void 0),a([u({readOnly:!0})],ge.prototype,"type",void 0),a([u({readOnly:!0})],ge.prototype,"updating",null),a([u({readOnly:!0})],ge.prototype,"view2dType",void 0),a([u({readOnly:!0})],ge.prototype,"visibleArea",null),a([u()],ge.prototype,"zoom",null),a([u({readOnly:!0})],ge.prototype,"navigating",null),a([u(),xe(t=>t instanceof ZM?t:Tc(JM,t))],ge.prototype,"ui",void 0),a([u()],ge.prototype,"animationsEnabled",void 0),ge=a([_("esri.views.View2D")],ge);const rZ=ge;let x0=class extends rZ{constructor(e){super(e),this.view2dType="map"}};a([u({readOnly:!0})],x0.prototype,"view2dType",void 0),x0=a([_("esri.views.MapView")],x0);const iZ=x0;let sZ=class iI{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(ef),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const r=new iI,i=this._originStores[0];i&&i.forEach((s,n)=>{r.set(n,P(s),0)});for(let s=2;s<ef;s++){const n=this._originStores[s];n&&n.forEach((o,l)=>{e&&e.has(l)||r.set(l,P(o),s)})}return r}get(e,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(e):void 0}keys(e){const r=e==null?this._values:this._originStores[e];return r?[...r.keys()]:[]}set(e,r,i=7){let s=this._originStores[i];if(s||(s=new Map,this._originStores[i]=s),s.set(e,r),!this._values.has(e)||this._propertyOriginMap.get(e)<=i){const n=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,i),n!==r}return!1}delete(e,r=7){const i=this._originStores[r];if(!i)return;const s=i.get(e);if(i.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===r){this._values.delete(e);for(let n=r-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,n);break}}}return s}has(e,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(e)}revert(e,r){for(;r>0&&!this.has(e,r);)--r;const i=this._originStores[r],s=i?.get(e),n=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,r),n!==s}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,r){return this.has(e,r)&&this.originOf(e)===r}isBelowOrigin(e,r){return!this.has(e)||this.originOf(e)<r}forEach(e){this._values.forEach(e)}};const sI=t=>{const e=t;let r=class extends e{constructor(...i){super(...i);const s=hi(this),n=s.store,o=new sZ;s.store=o,RO(s,n,o)}read(i,s){OO(this,i,s)}getAtOrigin(i,s){const n=by(this),o=Li(s);if(typeof i=="string")return n.get(i,o);const l={};return i.forEach(c=>{l[c]=n.get(c,o)}),l}originOf(i){return B0(this.originIdOf(i))}originIdOf(i){return by(this).originOf(i)}revert(i,s){const n=by(this),o=Li(s),l=hi(this);let c;c=typeof i=="string"?i==="*"?n.keys(o):[i]:i,c.forEach(d=>{l.invalidate(d),n.revert(d,o),l.commit(d)})}};return r=a([_("esri.core.ReadOnlyMultiOriginJSONSupport")],r),r};function by(t){return hi(t).store}sI(Z);const nZ=t=>{const e=t;let r=class extends e{constructor(...i){super(...i)}clear(i,s="user"){hi(this).clearOrigin(i,Li(s))}write(i,s){return CO(this,i=i||{},s),i}setAtOrigin(i,s,n){hi(this).setAtOrigin(i,s,Li(n))}removeOrigin(i){const s=Ov(this),n=Li(i),o=s.keys(n);for(const l of o)s.originOf(l)===n&&s.set(l,s.get(l,n),7)}updateOrigin(i,s){const n=Ov(this),o=Li(s),l=_p(this,i);for(let c=o+1;c<ef;++c)n.delete(i,c);n.set(i,l,o)}toJSON(i){return this.write({},i)}};return r=a([_("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function Ov(t){return hi(t).store}const Fh=t=>{const e=nZ(sI(t));let r=class extends e{};return r=a([_("esri.core.MultiOriginJSONSupport")],r),r},oZ=Fh(Z),Ce=(t=>t)(["operational-layers","basemap-base-layers","basemap-ground-layers","ground"]);var R3;let Oa=R3=class extends A{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new R3({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a([u({type:String,json:{write:!0}})],Oa.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],Oa.prototype,"name",void 0),a([u({type:["boolean","date","number","string"],json:{write:!0}})],Oa.prototype,"returnType",void 0),a([u({type:String,json:{write:!0}})],Oa.prototype,"title",void 0),Oa=R3=a([_("esri.form.ExpressionInfo")],Oa);const aZ=Oa;let zr=class extends A{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};a([u({type:String,json:{write:!0}})],zr.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],zr.prototype,"label",void 0),a([u()],zr.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],zr.prototype,"visibilityExpression",void 0),zr=a([_("esri.form.elements.Element")],zr);let $0=class extends de(A){constructor(e){super(e),this.type=null}};a([u()],$0.prototype,"type",void 0),$0=a([_("esri.form.elements.inputs.attachments.Input")],$0);const Zo=$0,i4=["any","capture","upload"];let fu=class extends Zo{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};a([u({type:["audio"],readOnly:!0,json:{write:!0}})],fu.prototype,"type",void 0),a([u({type:i4,json:{write:!0}})],fu.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],fu.prototype,"maxDuration",void 0),fu=a([_("esri.form.elements.inputs.attachments.AudioInput")],fu);const Cv=fu;let Wp=class extends Zo{constructor(e){super(e),this.type="document",this.maxFileSize=null}};a([u({type:["document"],readOnly:!0,json:{write:!0}})],Wp.prototype,"type",void 0),a([u({type:Number,json:{write:!0}})],Wp.prototype,"maxFileSize",void 0),Wp=a([_("esri.form.elements.inputs.attachments.DocumentInput")],Wp);const kv=Wp;let mu=class extends Zo{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};a([u({type:["image"],readOnly:!0,json:{write:!0}})],mu.prototype,"type",void 0),a([u({type:i4,json:{write:!0}})],mu.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],mu.prototype,"maxImageSize",void 0),mu=a([_("esri.form.elements.inputs.attachments.ImageInput")],mu);const Fv=mu;let Hp=class extends Zo{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};a([u({type:["signature"],readOnly:!0,json:{write:!0}})],Hp.prototype,"type",void 0),a([u({type:i4,json:{write:!0}})],Hp.prototype,"inputMethod",void 0),Hp=a([_("esri.form.elements.inputs.attachments.SignatureInput")],Hp);const Av=Hp;let gu=class extends Zo{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};a([u({type:["video"],readOnly:!0,json:{write:!0}})],gu.prototype,"type",void 0),a([u({type:i4,json:{write:!0}})],gu.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],gu.prototype,"maxDuration",void 0),gu=a([_("esri.form.elements.inputs.attachments.VideoInput")],gu);const Lv=gu;function nI(t){return{nestableTypes:{base:Zo,key:"type",typeMap:{audio:Cv,document:kv,image:Fv,signature:Av,video:Lv}},allTypes:{base:Zo,key:"type",typeMap:{attachment:t,audio:Cv,document:kv,image:Fv,signature:Av,video:Lv}}}}function lZ(t,e,r){return t?t.map(i=>al(e.nestableTypes,i)):null}function uZ(t,e,r){if(!t)return null;const i=e.nestableTypes.typeMap;return t.filter(s=>i[s.type]).map(s=>i[s.type].fromJSON(s))}function cZ(t,e,r){if(!t)return null;const i=e.nestableTypes.typeMap;return t.filter(s=>i[s.type]).map(s=>s.toJSON())}let Ps=class extends Zo{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return lZ(e,_y)}readInputs(e,r){return uZ(r.inputTypes,_y)}writeInputs(e,r){r.inputTypes=cZ(e,_y)}};a([u({type:["attachment"],readOnly:!0,json:{write:!0}})],Ps.prototype,"type",void 0),a([u({type:["any","exact","exactOrNone"],json:{write:!0}})],Ps.prototype,"attachmentAssociationType",void 0),a([u({json:{write:{isRequired:!0}}})],Ps.prototype,"inputTypes",void 0),a([xe("inputTypes")],Ps.prototype,"castInputs",null),a([F("inputTypes")],Ps.prototype,"readInputs",null),a([j("inputTypes")],Ps.prototype,"writeInputs",null),Ps=a([_("esri.form.elements.inputs.attachments.AttachmentInput")],Ps);const _y=nI(Ps),pZ=Ps;var O3;const dZ=nI(pZ);let ti=O3=class extends zr{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new O3({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};a([u({type:Boolean,json:{write:!0}})],ti.prototype,"allowUserRename",void 0),a([u({type:String,json:{write:{isRequired:!0}}})],ti.prototype,"attachmentKeyword",void 0),a([u({type:Boolean,json:{write:!0}})],ti.prototype,"displayFilename",void 0),a([u({type:String,json:{write:!0}})],ti.prototype,"editableExpression",void 0),a([u({type:String,json:{write:!0}})],ti.prototype,"filenameExpression",void 0),a([u({types:dZ.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],ti.prototype,"input",void 0),a([u({type:Number,json:{write:!0}})],ti.prototype,"maxAttachmentCount",void 0),a([u({type:Number,json:{write:!0}})],ti.prototype,"minAttachmentCount",void 0),a([u({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],ti.prototype,"type",void 0),a([u({type:Boolean,json:{write:!0}})],ti.prototype,"useOriginalFilename",void 0),ti=O3=a([_("esri.form.elements.AttachmentElement")],ti);const Nv=ti;let T0=class extends A{constructor(e){super(e),this.type=null}};a([u()],T0.prototype,"type",void 0),T0=a([_("esri.form.elements.inputs.Input")],T0);const Kn=T0;let Zp=class extends Kn{constructor(e){super(e),this.maxLength=null,this.minLength=0}};a([u({type:Number,json:{write:!0}})],Zp.prototype,"maxLength",void 0),a([u({type:Number,json:{write:!0}})],Zp.prototype,"minLength",void 0),Zp=a([_("esri.form.elements.inputs.TextInput")],Zp);const T6=Zp;var C3;let M0=C3=class extends T6{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new C3({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["barcode-scanner"],json:{read:!1,write:!0}})],M0.prototype,"type",void 0),M0=C3=a([_("esri.form.elements.inputs.BarcodeScannerInput")],M0);const hZ=M0;var k3;let vu=k3=class extends Kn{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new k3({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};a([u({type:String,json:{write:!0}})],vu.prototype,"noValueOptionLabel",void 0),a([u({type:Boolean,json:{write:!0}})],vu.prototype,"showNoValueOption",void 0),a([u({type:["combo-box"],json:{read:!1,write:!0}})],vu.prototype,"type",void 0),vu=k3=a([_("esri.form.elements.inputs.ComboBoxInput")],vu);const yZ=vu;var F3;function Dv(t){return t??null}function jv(t){return t??null}let Ms=F3=class extends Kn{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return Dv(e.max)}writeMax(t,e){e.max=jv(t)}readMin(t,e){return Dv(e.min)}writeMin(t,e){e.min=jv(t)}clone(){return new F3({max:this.max,min:this.min})}};a([u({type:String,json:{type:String,write:!0}})],Ms.prototype,"max",void 0),a([F("max")],Ms.prototype,"readMax",null),a([j("max")],Ms.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],Ms.prototype,"min",void 0),a([F("min")],Ms.prototype,"readMin",null),a([j("min")],Ms.prototype,"writeMin",null),a([u({type:["date-picker"],json:{read:!1,write:!0}})],Ms.prototype,"type",void 0),Ms=F3=a([_("esri.form.elements.inputs.DatePickerInput")],Ms);const fZ=Ms;var A3;function Sy(t){return t??null}function xy(t){return t??null}let Rr=A3=class extends Kn{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return Sy(e.max)}writeMax(t,e){e.max=xy(t)}readMin(t,e){return Sy(e.min)}writeMin(t,e){e.min=xy(t)}readTimeResolution(t,e){return Sy(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=xy(t)}clone(){return new A3({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};a([u({type:Boolean,json:{write:!0}})],Rr.prototype,"includeTimeOffset",void 0),a([u({type:String,json:{type:String,write:!0}})],Rr.prototype,"max",void 0),a([F("max")],Rr.prototype,"readMax",null),a([j("max")],Rr.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],Rr.prototype,"min",void 0),a([F("min")],Rr.prototype,"readMin",null),a([j("min")],Rr.prototype,"writeMin",null),a([u({type:String,json:{type:String,write:!0}})],Rr.prototype,"timeResolution",void 0),a([F("timeResolution")],Rr.prototype,"readTimeResolution",null),a([j("timeResolution")],Rr.prototype,"writeTimeResolution",null),a([u({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Rr.prototype,"type",void 0),Rr=A3=a([_("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Rr);const mZ=Rr;var L3;function Vv(t){return t!=null?new Date(t):null}function zv(t){return t?t.getTime():null}let Ki=L3=class extends Kn{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return Vv(e.max)}writeMax(t,e){e.max=zv(t)}readMin(t,e){return Vv(e.min)}writeMin(t,e){e.min=zv(t)}clone(){return new L3({includeTime:this.includeTime,max:this.max,min:this.min})}};a([u({type:Boolean,json:{write:!0}})],Ki.prototype,"includeTime",void 0),a([u({type:Date,json:{type:Number,write:!0}})],Ki.prototype,"max",void 0),a([F("max")],Ki.prototype,"readMax",null),a([j("max")],Ki.prototype,"writeMax",null),a([u({type:Date,json:{type:Number,write:!0}})],Ki.prototype,"min",void 0),a([F("min")],Ki.prototype,"readMin",null),a([j("min")],Ki.prototype,"writeMin",null),a([u({type:["datetime-picker"],json:{read:!1,write:!0}})],Ki.prototype,"type",void 0),Ki=L3=a([_("esri.form.elements.inputs.DateTimePickerInput")],Ki);const gZ=Ki;var N3;let wu=N3=class extends Kn{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new N3({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};a([u({type:String,json:{write:!0}})],wu.prototype,"noValueOptionLabel",void 0),a([u({type:Boolean,json:{write:!0}})],wu.prototype,"showNoValueOption",void 0),a([u({type:["radio-buttons"],json:{read:!1,write:!0}})],wu.prototype,"type",void 0),wu=N3=a([_("esri.form.elements.inputs.RadioButtonsInput")],wu);const vZ=wu;var D3;let bu=D3=class extends Kn{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new D3({offValue:this.offValue,onValue:this.onValue})}};a([u({type:[String,Number],json:{write:!0}})],bu.prototype,"offValue",void 0),a([u({type:[String,Number],json:{write:!0}})],bu.prototype,"onValue",void 0),a([u({type:["switch"],json:{read:!1,write:!0}})],bu.prototype,"type",void 0),bu=D3=a([_("esri.form.elements.inputs.SwitchInput")],bu);const wZ=bu;var j3;let I0=j3=class extends T6{constructor(t){super(t),this.type="text-area"}clone(){return new j3({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["text-area"],json:{read:!1,write:!0}})],I0.prototype,"type",void 0),I0=j3=a([_("esri.form.elements.inputs.TextAreaInput")],I0);const bZ=I0;var V3;let E0=V3=class extends T6{constructor(t){super(t),this.type="text-box"}clone(){return new V3({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["text-box"],json:{read:!1,write:!0}})],E0.prototype,"type",void 0),E0=V3=a([_("esri.form.elements.inputs.TextBoxInput")],E0);const _Z=E0;var z3;function $y(t){return t??null}function Ty(t){return t??null}let ri=z3=class extends Kn{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return $y(e.max)}writeMax(t,e){e.max=Ty(t)}readMin(t,e){return $y(e.min)}writeMin(t,e){e.min=Ty(t)}readTimeResolution(t,e){return $y(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Ty(t)}clone(){return new z3({max:this.max,min:this.min,timeResolution:this.timeResolution})}};a([u({type:String,json:{type:String,write:!0}})],ri.prototype,"max",void 0),a([F("max")],ri.prototype,"readMax",null),a([j("max")],ri.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],ri.prototype,"min",void 0),a([F("min")],ri.prototype,"readMin",null),a([j("min")],ri.prototype,"writeMin",null),a([u({type:String,json:{type:String,write:!0}})],ri.prototype,"timeResolution",void 0),a([F("timeResolution")],ri.prototype,"readTimeResolution",null),a([j("timeResolution")],ri.prototype,"writeTimeResolution",null),a([u({type:["time-picker"],json:{read:!1,write:!0}})],ri.prototype,"type",void 0),ri=z3=a([_("esri.form.elements.inputs.TimePickerInput")],ri);const SZ=ri,xZ=hZ,$Z=yZ,TZ=fZ,MZ=mZ,IZ=gZ,EZ=vZ,PZ=wZ,RZ=bZ,OZ=_Z,CZ=SZ,kZ={base:Kn,key:"type",typeMap:{"barcode-scanner":xZ,"combo-box":$Z,"date-picker":TZ,"datetime-picker":IZ,"datetimeoffset-picker":MZ,"radio-buttons":EZ,switch:PZ,"text-area":RZ,"text-box":OZ,"time-picker":CZ}};var q3;let ni=q3=class extends zr{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new q3({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};a([u({types:iT,json:{read:{reader:Y2},write:!0}})],ni.prototype,"domain",void 0),a([u({type:Boolean,json:{write:!0}})],ni.prototype,"editable",void 0),a([u({type:String,json:{write:!0}})],ni.prototype,"editableExpression",void 0),a([u({type:String,json:{write:!0}})],ni.prototype,"fieldName",void 0),a([u({type:String,json:{write:!0}})],ni.prototype,"hint",void 0),a([u({types:kZ,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ni.prototype,"input",void 0),a([u({type:String,json:{write:!0}})],ni.prototype,"requiredExpression",void 0),a([u({type:String,json:{read:!1,write:!0}})],ni.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],ni.prototype,"valueExpression",void 0),ni=q3=a([_("esri.form.elements.FieldElement")],ni);var U3;let gn=U3=class extends zr{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new U3({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:P(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};a([u({type:Number,json:{write:!0}})],gn.prototype,"displayCount",void 0),a([u({type:["list"],json:{write:!0}})],gn.prototype,"displayType",void 0),a([u({type:String,json:{write:!0}})],gn.prototype,"editableExpression",void 0),a([u({type:[e6],json:{write:!0}})],gn.prototype,"orderByFields",void 0),a([u({type:Number,json:{write:!0}})],gn.prototype,"relationshipId",void 0),a([u({type:["relationship"],json:{read:!1,write:!0}})],gn.prototype,"type",void 0),gn=U3=a([_("esri.form.elements.RelationshipElement")],gn);const qv=gn;var G3;let _u=G3=class extends zr{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new G3({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};a([u({type:String,json:{write:!0}})],_u.prototype,"text",void 0),a([u({type:String,json:{write:!0}})],_u.prototype,"textFormat",void 0),a([u({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],_u.prototype,"type",void 0),_u=G3=a([_("esri.form.elements.TextElement")],_u);const Uv=_u;let Su=class extends de(zr){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};a([u({type:[O$],json:{write:{isRequired:!0}}})],Su.prototype,"associationTypes",void 0),a([u({type:String,json:{write:!0}})],Su.prototype,"editableExpression",void 0),a([u({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Su.prototype,"type",void 0),Su=a([_("esri.form.elements.UtilityNetworkAssociationsElement")],Su);const Gv=Su,FZ=t=>t.type==="field",AZ=t=>t.type==="group",LZ=t=>t.type==="text";function oI(t){return{typesWithGroup:{base:zr,key:"type",typeMap:{attachment:Nv,field:ni,group:t,relationship:qv,text:Uv,utilityNetworkAssociations:Gv}},typesWithoutGroup:{base:zr,key:"type",typeMap:{attachment:Nv,field:ni,relationship:qv,text:Uv,utilityNetworkAssociations:Gv}}}}function aI(t,e,r=!0){if(!t)return null;const i=r?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>i[s.type]).map(s=>i[s.type].fromJSON(s))}function lI(t,e,r=!0){if(!t)return null;const i=r?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>i[s.type]).map(s=>s.toJSON())}function uI(t,e,r=!0){return t?t.map(i=>al(r?e.typesWithGroup:e.typesWithoutGroup,i)):null}var B3;let Rs=B3=class extends zr{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return uI(t,My,!1)}readElements(t,e){return aI(e.formElements,My,!1)}writeElements(t,e){e.formElements=lI(t,My,!1)}clone(){return new B3({description:this.description,elements:P(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};a([u({json:{write:!0}})],Rs.prototype,"elements",void 0),a([xe("elements")],Rs.prototype,"castElements",null),a([F("elements",["formElements"])],Rs.prototype,"readElements",null),a([j("elements")],Rs.prototype,"writeElements",null),a([u({type:["collapsed","expanded"],json:{write:!0}})],Rs.prototype,"initialState",void 0),a([u({type:String,json:{read:!1,write:!0}})],Rs.prototype,"type",void 0),Rs=B3=a([_("esri.form.elements.GroupElement")],Rs);const My=oI(Rs),NZ=Rs;var W3;const Iy=oI(NZ);let Xi=W3=class extends A{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return uI(t,Iy)}readElements(t,e){return aI(e.formElements,Iy)}writeElements(t,e){e.formElements=lI(t,Iy)}clone(){return new W3({description:this.description,expressionInfos:P(this.expressionInfos),elements:P(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const r=new Set,{description:i,elements:s,expressionInfos:n,title:o}=this;if(Rd(r,t,i),Rd(r,t,o),!s)return[];const l=DZ(s,n).map(c=>lr(r,t,null,c));await Promise.all(l);for(const c of s)cI(r,{fieldsIndex:t,relationships:e},c);return Array.from(r).sort()}};function cI(t,e,r){const{fieldsIndex:i}=e;if(!i||i.fields.length!==t.size)switch(Rd(t,i,r.label),Rd(t,i,r.description),r.type){case"field":ar(t,i,r.fieldName);break;case"group":r.elements.forEach(s=>cI(t,e,s));break;case"relationship":if(e.relationships){const s=e.relationships.find(n=>n.id===r.relationshipId);s&&ar(t,i,s.keyField)}vl(t,i,r.orderByFields?.map(s=>s.field));break;case"text":Rd(t,i,r.text)}}function DZ(t,e){if(!e||e.length===0)return[];const r=pI(t),i=[];for(const s of e)r.has(s.name)&&i.push(s.expression);return i}function pI(t){const e=new Set;for(const r of t)if(O9(e,r.visibilityExpression),!LZ(r)){if(AZ(r))C9(e,pI(r.elements));else if(O9(e,r.editableExpression),FZ(r)){const{requiredExpression:i,valueExpression:s}=r;C9(e,[i,s])}}return e}function Rd(t,e,r){vl(t,e,Qg(r))}a([u({type:String,json:{write:!0}})],Xi.prototype,"description",void 0),a([u({json:{write:!0}})],Xi.prototype,"elements",void 0),a([xe("elements")],Xi.prototype,"castElements",null),a([F("elements",["formElements"])],Xi.prototype,"readElements",null),a([j("elements")],Xi.prototype,"writeElements",null),a([u({type:[aZ],json:{write:!0}})],Xi.prototype,"expressionInfos",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],Xi.prototype,"preserveFieldValuesWhenHidden",void 0),a([u({type:String,json:{write:!0}})],Xi.prototype,"title",void 0),Xi=W3=a([_("esri.form.FormTemplate")],Xi);const M6=Symbol("getSliceableSymbol");let wl=class{};wl=a([_("esri.graphic.GraphicOrigin")],wl);const jZ=Symbol("isFeatureGraphicOrigin");var Bv;let VZ=class extends wl{get[(Bv=jZ,Th)](){return this.layer}get[i6](){return this.layer}get[M6](){return this.layer}constructor(e){super(),this[Bv]=!0,this.type="feature",this.layer=e}get id(){return this.layer.id}};function Wv(t,e,r){if(t.hasM==null||t.hasZ)for(const i of e)for(const s of i)s.length>2&&(s[2]*=r)}function zZ(t,e,r){if(!t&&!e||!r)return;const i=Oc(r);Hv(t,r,i),Hv(e,r,i)}function Hv(t,e,r){if(t)for(const i of t)qZ(i.geometry,e,r)}function qZ(t,e,r){if(!t?.spatialReference||ot(t.spatialReference,e))return;const i=Oc(t.spatialReference)/r;if(i!==1){if("x"in t)t.z!=null&&(t.z*=i);else if("rings"in t)Wv(t,t.rings,i);else if("paths"in t)Wv(t,t.paths,i);else if("points"in t&&(t.hasM==null||t.hasZ))for(const s of t.points)s.length>2&&(s[2]*=i)}}function H3(t,e,r){if(!r?.features||!r.hasZ)return;const i=zg(r.geometryType,e,t.outSpatialReference);if(i!=null)for(const s of r.features)i(s.geometry)}var Z3;const J3=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let ct=Z3=class extends A{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,et)}writeGeometryType(t,e,r,i){if(t)return void J3.write(t,e,r,i);const{features:s}=this;if(s){for(const n of s)if(n?.geometry!=null)return void J3.write(n.geometry.type,e,r,i)}}readQueryGeometry(t,e){if(!t)return null;const r=!!t.spatialReference,i=Ho(t);return i&&!r&&e.spatialReference&&(i.spatialReference=B.fromJSON(e.spatialReference)),i}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(e.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new Z3(this.cloneProperties())}cloneProperties(){return P({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let r=0;r<e.features.length;r++){const i=e.features[r];if(i.geometry){const s=t?.[r];i.geometry=s?.toJSON()||i.geometry}}return e}quantize(t){const{scale:[e,r],translate:[i,s]}=t,n=d=>Math.round((d-i)/e),o=d=>Math.round((s-d)/r),l=this.features,c=this._getQuantizationFunction(this.geometryType,n,o);for(let d=0,h=l.length;d<h;d++)c?.(l[d].geometry)||(l.splice(d,1),d--,h--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[n,o]}=r,l=f=>f*n+i,c=f=>s-f*o;let d=null,h=null;if(this.hasZ&&r?.scale?.[2]!=null){const{translate:[,,f],scale:[,,m]}=r;d=g=>g*m+f}if(this.hasM&&r?.scale?.[3]!=null){const{translate:[,,,f],scale:[,,,m]}=r;h=g=>g==null?g:g*m+f}const y=this._getHydrationFunction(t,l,c,d,h);for(const{geometry:f}of e)f!=null&&y&&y(f);return this.transform=null,this}readFeaturesWithClass(t,e,r){const i=B.fromJSON(e.spatialReference),s=[];for(let n=0;n<t.length;n++){const o=t[n],l=r.fromJSON(o),c=o.geometry?.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=i);const d=o.aggregateGeometries,h=l.aggregateGeometries;if(d&&h!=null)for(const y in h){const f=h[y],m=d[y],g=m?.spatialReference;f==null||g||(f.spatialReference=i)}s.push(l)}return s}_quantizePoints(t,e,r){let i,s;const n=[];for(let o=0,l=t.length;o<l;o++){const c=t[o];if(o>0){const d=e(c[0]),h=r(c[1]);d===i&&h===s||(n.push([d-i,h-s]),i=d,s=h)}else i=e(c[0]),s=r(c[1]),n.push([i,s])}return n.length>0?n:null}_getQuantizationFunction(t,e,r){return t==="point"?i=>(i.x=e(i.x),i.y=r(i.y),i):t==="polyline"||t==="polygon"?i=>{const s=Ka(i)?i.rings:i.paths,n=[];for(let o=0,l=s.length;o<l;o++){const c=s[o],d=this._quantizePoints(c,e,r);d&&n.push(d)}return n.length>0?(Ka(i)?i.rings=n:i.paths=n,i):null}:t==="multipoint"?i=>{const s=this._quantizePoints(i.points,e,r);return s&&s.length>0?(i.points=s,i):null}:t==="extent"?i=>i:null}_getHydrationFunction(t,e,r,i,s){return t==="point"?n=>{n.x=e(n.x),n.y=r(n.y),i&&(n.z=i(n.z))}:t==="polyline"||t==="polygon"?n=>{const o=Ka(n)?n.rings:n.paths;let l,c;for(let d=0,h=o.length;d<h;d++){const y=o[d];for(let f=0,m=y.length;f<m;f++){const g=y[f];f>0?(l+=g[0],c+=g[1]):(l=g[0],c=g[1]),g[0]=e(l),g[1]=r(c)}}if(i&&s)for(let d=0,h=o.length;d<h;d++){const y=o[d];for(let f=0,m=y.length;f<m;f++){const g=y[f];g[2]=i(g[2]),g[3]=s(g[3])}}else if(i)for(let d=0,h=o.length;d<h;d++){const y=o[d];for(let f=0,m=y.length;f<m;f++){const g=y[f];g[2]=i(g[2])}}else if(s)for(let d=0,h=o.length;d<h;d++){const y=o[d];for(let f=0,m=y.length;f<m;f++){const g=y[f];g[2]=s(g[2])}}}:t==="extent"?n=>{n.xmin=e(n.xmin),n.ymin=r(n.ymin),n.xmax=e(n.xmax),n.ymax=r(n.ymax),i&&n.zmax!=null&&n.zmin!=null&&(n.zmax=i(n.zmax),n.zmin=i(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:t==="multipoint"?n=>{const o=n.points;let l,c;for(let d=0,h=o.length;d<h;d++){const y=o[d];d>0?(l+=y[0],c+=y[1]):(l=y[0],c=y[1]),y[0]=e(l),y[1]=r(c)}if(i&&s)for(let d=0,h=o.length;d<h;d++){const y=o[d];y[2]=i(y[2]),y[3]=s(y[3])}else if(i)for(let d=0,h=o.length;d<h;d++){const y=o[d];y[2]=i(y[2])}else if(s)for(let d=0,h=o.length;d<h;d++){const y=o[d];y[2]=s(y[2])}}:null}};a([u({type:String,json:{write:!0}})],ct.prototype,"displayFieldName",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ct.prototype,"exceededTransferLimit",void 0),a([u({type:[et],json:{write:!0}})],ct.prototype,"features",void 0),a([F("features")],ct.prototype,"readFeatures",null),a([u({type:[xt],json:{write:!0}})],ct.prototype,"fields",void 0),a([u({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:J3.read}}})],ct.prototype,"geometryType",void 0),a([j("geometryType")],ct.prototype,"writeGeometryType",null),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ct.prototype,"hasM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ct.prototype,"hasZ",void 0),a([u({types:xh,json:{write:!0}})],ct.prototype,"queryGeometry",void 0),a([F("queryGeometry")],ct.prototype,"readQueryGeometry",null),a([u({type:B,json:{write:!0}})],ct.prototype,"spatialReference",void 0),a([j("spatialReference")],ct.prototype,"writeSpatialReference",null),a([u({json:{write:!0}})],ct.prototype,"transform",void 0),ct=Z3=a([_("esri.rest.support.FeatureSet")],ct),ct.prototype.toJSON.isDefaultToJSON=!0;let UZ=0,Mn=class extends p_(uO(q)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const r=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,r);H3(e,this.layer.spatialReference,i);const s=ct.fromJSON(i);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return s;const n=this.layer.objectIdField;for(const o of s.features){const l=o.attributes[n],c=this._idToClientGeometry.get(l);c!==void 0&&(o.geometry=c)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,r={}){if(this._requiresClientGraphicMapping())throw new M("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,r);return H3(e,this.layer.spatialReference,i),i}queryFeatureCount(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,r))}queryObjectIds(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,r))}queryExtent(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,r)).then(i=>({count:i.count,extent:le.fromJSON(i.extent)}))}querySnapping(e,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",e,r))}async queryAttributeBins(e,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),r)}async _applyEdits(e){if(!this._connection)throw new M("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[r]!=null?h.attributes[r]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const y=o(h);y!=null&&s.push(y)}const l=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(n.push(this._serializeFeature(h)),l&&h.geometry!=null){const y=o(h);y!=null&&l.set(y,h)}}zZ(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:c,featureEditResults:d}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:s});return this.fullExtent=c,i&&i.finish(d.uidToObjectId),this._updateIdToClientGeometries(l,d),this._createEditsResult(d)}async _prepareClientMapping(e,r){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const i=[];for(const{geometry:s}of e)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||i.push(s.load({signal:r}));i.length&&await Promise.all(i)}_updateIdToClientGeometries(e,r){if(this._idToClientGeometry){if(e)for(const i of r.updateResults){if(!i.success)continue;const s=e.get(i.objectId);s!=null&&this._addIdToClientGeometry(s)}for(const i of r.deleteResults)i.success&&this._idToClientGeometry.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const r=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:r?new M("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(e){const r=new Map,i=new Array(e.length);let s=null;for(let o=0;o<e.length;o++){const l=e[o],c=this._serializeFeature(l);s||l.geometry==null||(s=l.geometry.type),i[o]=c,r.set(`${c.uid}`,l)}const n=this;return{features:i,inferredGeometryType:s,finish(o){const l=n.sourceJSON.objectIdField;for(const c in o){const d=o[c],h=r.get(c);h&&(h.attributes||(h.attributes={}),d===-1?delete h.attributes[l]:h.attributes[l]=d,n._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;const r=this.sourceJSON.objectIdField,i=e.attributes?.[r];i!=null&&this._idToClientGeometry.set(i,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:r}=e,i=this._geometryForSerialization(e),s=(UZ++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:r}:{uid:s,attributes:r}}_geometryForSerialization(e){const{geometry:r}=e;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Ve.fromExtent(r.extent):null:r}async _startWorker(e){this._connection=await RD("MemorySourceWorker",{strategy:re("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:s,hasM:n,hasZ:o,timeInfo:l,dateFieldsTimeZone:c}=this.layer,d=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{N.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const y={features:h.features,fields:r?.map(g=>g.toJSON()),geometryType:M8.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:d?null:i&&i.toJSON(),timeInfo:l?.toJSON()??null,dateFieldsTimeZone:c},f=await this._connection.invoke("load",y,{signal:e});for(const g of f.warnings)N.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});f.featureErrors.length&&N.getLogger(this.layer).warn("#load()",`Encountered ${f.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:f.featureErrors});const m=f.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(m.geometryType=M8.toJSON(h.inferredGeometryType)),this.sourceJSON=m,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(f.assignedObjectIds)}};a([ug({Type:et,ensureType:Zr(et)})],Mn.prototype,"itemType",void 0),a([u()],Mn.prototype,"type",void 0),a([u({constructOnly:!0})],Mn.prototype,"layer",void 0),a([u({readOnly:!0})],Mn.prototype,"_workerGeometryType",null),a([u()],Mn.prototype,"sourceJSON",void 0),Mn=a([_("esri.layers.graphics.sources.MemorySource")],Mn);function GZ(t){return"portalItem"in t}const dI=t=>{const e=t;let r=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):GZ(this)?this.portalItem?.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return a([u({type:String})],r.prototype,"apiKey",null),r=a([_("esri.layers.mixins.APIKeyMixin")],r),r},hI=t=>{const e=t;let r=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Ec(this.url);if(i?.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",cO(i,N.getLogger(this)))}};return a([u()],r.prototype,"title",null),a([u({type:String})],r.prototype,"url",null),r=a([_("esri.layers.mixins.ArcGISService")],r),r};let Zv=class extends SyntaxError{constructor(e,r,i,s){super(e),this.expected=r,this.found=i,this.location=s,this.name="SyntaxError"}format(e){let r="Error: "+this.message;if(this.location){let i=null;const s=e.find(c=>c.source===this.location.source);s&&(i=s.text.split(/\r\n|\n|\r/g));const n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,l=this.location.source+":"+o.line+":"+o.column;if(i){const c=this.location.end,d="".padEnd(o.line.toString().length," "),h=i[n.line-1],y=(n.line===c.line?c.column:h.length+1)-n.column||1;r+=`
 --> `+l+`
`+d+` |
`+o.line+" | "+h+`
`+d+" | "+"".padEnd(n.column-1," ")+"".padEnd(y,"^")}else r+=`
 at `+l}return r}static buildMessage(e,r){function i(f){return f.codePointAt(0).toString(16).toUpperCase()}const s=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(f){return s?f.replace(s,m=>"\\u{"+i(m)+"}"):f}function o(f){return n(f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,m=>"\\x0"+i(m)).replace(/[\x10-\x1F\x7F-\x9F]/g,m=>"\\x"+i(m)))}function l(f){return n(f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,m=>"\\x0"+i(m)).replace(/[\x10-\x1F\x7F-\x9F]/g,m=>"\\x"+i(m)))}const c={literal:f=>'"'+o(f.text)+'"',class(f){const m=f.parts.map(g=>Array.isArray(g)?l(g[0])+"-"+l(g[1]):l(g));return"["+(f.inverted?"^":"")+m.join("")+"]"+(f.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:f=>f.description};function d(f){return c[f.type](f)}function h(f){const m=f.map(d);if(m.sort(),m.length>0){let g=1;for(let v=1;v<m.length;v++)m[v-1]!==m[v]&&(m[g]=m[v],g++);m.length=g}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function y(f){return f?'"'+o(f)+'"':"end of input"}return"Expected "+h(e)+" but "+y(r)+" found."}};function BZ(t,e){const r={},i=(e=e!==void 0?e:{}).grammarSource,s={start:w9};let n=w9;const o="none",l=")",c=",",d="(",h="%",y="px",f="cm",m="mm",g="in",v="pt",b="pc",S="deg",$="rad",E="grad",T="turn",R="#",O=".",z="e",U=/^[ \t\n\r]/,J=/^[a-z\-]/,ie=/^[0-9a-fA-F]/,oe=/^[+\-]/,ee=/^[0-9]/,Te=to("none"),pe=Ot("none",!1),wt=Ot(")",!1),Tr=Ot(",",!1),Rt=sp([" ","	",`
`,"\r"],!1,!1,!1),he=to("function"),Vt=Ot("(",!1),m4=to("identifier"),sa=sp([["a","z"],"-"],!1,!1,!1),Xn=to("percentage"),El=Ot("%",!1),_P=to("length"),SP=Ot("px",!1),xP=Ot("cm",!1),$P=Ot("mm",!1),TP=Ot("in",!1),MP=Ot("pt",!1),IP=Ot("pc",!1),EP=to("angle"),PP=Ot("deg",!1),RP=Ot("rad",!1),OP=Ot("grad",!1),CP=Ot("turn",!1),kP=to("number"),FP=to("color"),AP=Ot("#",!1),f9=sp([["0","9"],["a","f"],["A","F"]],!1,!1,!1),m9=sp(["+","-"],!1,!1,!1),eo=sp([["0","9"]],!1,!1,!1),LP=Ot(".",!1),NP=Ot("e",!1);function DP(){return[]}function jP(x,C){return{type:"function",name:x,parameters:C||[]}}function VP(x,C){return C.length>0?wR(x,C,3):[x]}function zP(x){return{type:"quantity",value:x.value,unit:x.unit}}function qP(x){return{type:"color",colorType:x.type,value:x.value}}function zre(x){return x}function UP(){return Vh()}function GP(x){return{value:x,unit:"%"}}function BP(x){return{value:x,unit:"px"}}function WP(x){return{value:x,unit:"cm"}}function HP(x){return{value:x,unit:"mm"}}function ZP(x){return{value:x,unit:"in"}}function JP(x){return{value:x,unit:"pt"}}function QP(x){return{value:x,unit:"pc"}}function YP(x){return{value:x,unit:"deg"}}function KP(x){return{value:x,unit:"rad"}}function XP(x){return{value:x,unit:"grad"}}function eR(x){return{value:x,unit:"turn"}}function tR(x){return{value:x,unit:null}}function rR(){return{type:"hex",value:Vh()}}function iR(x){return{type:"function",value:x}}function sR(){return{type:"named",value:Vh()}}function nR(){return parseFloat(Vh())}let k=0|e.peg$currPos,Ge=k;const Pl=[{line:1,column:1}];let ip,Ui=k,jh=e.peg$maxFailExpected||[],te=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');n=s[e.startRule]}function Vh(){return t.substring(Ge,k)}function oR(x=k){const C=t.codePointAt(x);return C===void 0?"":String.fromCodePoint(C)}function Ot(x,C){return{type:"literal",text:x,ignoreCase:C}}function sp(x,C,V,ue){return{type:"class",parts:x,inverted:C,ignoreCase:V,unicode:ue}}function aR(){return{type:"end"}}function to(x){return{type:"other",description:x}}function g9(x){let C,V=Pl[x];if(V)return V;if(x>=Pl.length)C=Pl.length-1;else for(C=x;!Pl[--C];);for(V=Pl[C],V={line:V.line,column:V.column};C<x;)t.charCodeAt(C)===10?(V.line++,V.column=1):V.column++,C++;return Pl[x]=V,V}function v9(x,C,V){const ue=g9(x),Me=g9(C);return{source:i,start:{offset:x,line:ue.line,column:ue.column},end:{offset:C,line:Me.line,column:Me.column}}}function ye(x){k<Ui||(k>Ui&&(Ui=k,jh=[]),jh.push(x))}function lR(x,C,V){return new Zv(Zv.buildMessage(x,C),x,C,V)}function w9(){let x;return x=uR(),x===r&&(x=cR()),x}function uR(){let x,C;return te++,x=k,Ct(),t.substr(k,4)===o?(C=o,k+=4):(C=r,te===0&&ye(pe)),C!==r?(Ct(),Ge=x,x=DP()):(k=x,x=r),te--,x===r&&te===0&&ye(Te),x}function cR(){let x,C;if(x=[],C=g4(),C!==r)for(;C!==r;)x.push(C),C=g4();else x=r;return x}function g4(){let x,C,V,ue;return x=k,Ct(),C=dR(),C!==r?(Ct(),V=pR(),V===r&&(V=null),Ct(),t.charCodeAt(k)===41?(ue=l,k++):(ue=r,te===0&&ye(wt)),ue!==r?(Ct(),Ge=x,x=jP(C,V)):(k=x,x=r)):(k=x,x=r),x}function pR(){let x,C,V,ue,Me,Ye,bt,Ht;if(x=k,C=v4(),C!==r){for(V=[],ue=k,Me=Ct(),t.charCodeAt(k)===44?(Ye=c,k++):(Ye=r,te===0&&ye(Tr)),Ye===r&&(Ye=null),bt=Ct(),Ht=v4(),Ht!==r?(Me=[Me,Ye,bt,Ht],ue=Me):(k=ue,ue=r);ue!==r;)V.push(ue),ue=k,Me=Ct(),t.charCodeAt(k)===44?(Ye=c,k++):(Ye=r,te===0&&ye(Tr)),Ye===r&&(Ye=null),bt=Ct(),Ht=v4(),Ht!==r?(Me=[Me,Ye,bt,Ht],ue=Me):(k=ue,ue=r);Ge=x,x=VP(C,V)}else k=x,x=r;return x}function v4(){let x,C;return x=k,C=hR(),C===r&&(C=yR(),C===r&&(C=fR(),C===r&&(C=mR()))),C!==r&&(Ge=x,C=zP(C)),x=C,x===r&&(x=k,C=gR(),C!==r&&(Ge=x,C=qP(C)),x=C),x}function Ct(){let x,C;for(te++,x=[],C=t.charAt(k),U.test(C)?k++:(C=r,te===0&&ye(Rt));C!==r;)x.push(C),C=t.charAt(k),U.test(C)?k++:(C=r,te===0&&ye(Rt));return te--,x}function dR(){let x,C,V;return te++,x=k,C=b9(),C!==r?(t.charCodeAt(k)===40?(V=d,k++):(V=r,te===0&&ye(Vt)),V!==r?(Ge=x,x=C):(k=x,x=r)):(k=x,x=r),te--,x===r&&(C=r,te===0&&ye(he)),x}function b9(){let x,C,V;if(te++,x=k,C=[],V=t.charAt(k),J.test(V)?k++:(V=r,te===0&&ye(sa)),V!==r)for(;V!==r;)C.push(V),V=t.charAt(k),J.test(V)?k++:(V=r,te===0&&ye(sa));else C=r;return C!==r&&(Ge=x,C=UP()),x=C,te--,x===r&&(C=r,te===0&&ye(m4)),x}function hR(){let x,C,V;return te++,x=k,Ct(),C=wi(),C!==r?(t.charCodeAt(k)===37?(V=h,k++):(V=r,te===0&&ye(El)),V!==r?(Ge=x,x=GP(C)):(k=x,x=r)):(k=x,x=r),te--,x===r&&te===0&&ye(Xn),x}function yR(){let x,C,V;return te++,x=k,Ct(),C=wi(),C!==r?(t.substr(k,2)===y?(V=y,k+=2):(V=r,te===0&&ye(SP)),V!==r?(Ge=x,x=BP(C)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),C=wi(),C!==r?(t.substr(k,2)===f?(V=f,k+=2):(V=r,te===0&&ye(xP)),V!==r?(Ge=x,x=WP(C)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),C=wi(),C!==r?(t.substr(k,2)===m?(V=m,k+=2):(V=r,te===0&&ye($P)),V!==r?(Ge=x,x=HP(C)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),C=wi(),C!==r?(t.substr(k,2)===g?(V=g,k+=2):(V=r,te===0&&ye(TP)),V!==r?(Ge=x,x=ZP(C)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),C=wi(),C!==r?(t.substr(k,2)===v?(V=v,k+=2):(V=r,te===0&&ye(MP)),V!==r?(Ge=x,x=JP(C)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,Ct(),C=wi(),C!==r?(t.substr(k,2)===b?(V=b,k+=2):(V=r,te===0&&ye(IP)),V!==r?(Ge=x,x=QP(C)):(k=x,x=r)):(k=x,x=r)))))),te--,x===r&&te===0&&ye(_P),x}function fR(){let x,C,V;return te++,x=k,C=wi(),C!==r?(t.substr(k,3)===S?(V=S,k+=3):(V=r,te===0&&ye(PP)),V!==r?(Ge=x,x=YP(C)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,C=wi(),C!==r?(t.substr(k,3)===$?(V=$,k+=3):(V=r,te===0&&ye(RP)),V!==r?(Ge=x,x=KP(C)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,C=wi(),C!==r?(t.substr(k,4)===E?(V=E,k+=4):(V=r,te===0&&ye(OP)),V!==r?(Ge=x,x=XP(C)):(k=x,x=r)):(k=x,x=r),x===r&&(x=k,C=wi(),C!==r?(t.substr(k,4)===T?(V=T,k+=4):(V=r,te===0&&ye(CP)),V!==r?(Ge=x,x=eR(C)):(k=x,x=r)):(k=x,x=r)))),te--,x===r&&(C=r,te===0&&ye(EP)),x}function mR(){let x,C;return te++,x=k,Ct(),C=wi(),C!==r?(Ge=x,x=tR(C)):(k=x,x=r),te--,x===r&&te===0&&ye(kP),x}function gR(){let x,C,V,ue;if(te++,x=k,t.charCodeAt(k)===35?(C=R,k++):(C=r,te===0&&ye(AP)),C!==r){if(V=[],ue=t.charAt(k),ie.test(ue)?k++:(ue=r,te===0&&ye(f9)),ue!==r)for(;ue!==r;)V.push(ue),ue=t.charAt(k),ie.test(ue)?k++:(ue=r,te===0&&ye(f9));else V=r;V!==r?(Ge=x,x=rR()):(k=x,x=r)}else k=x,x=r;return x===r&&(x=k,C=g4(),C!==r&&(Ge=x,C=iR(C)),x=C,x===r&&(x=k,C=b9(),C!==r&&(Ge=x,C=sR()),x=C)),te--,x===r&&(C=r,te===0&&ye(FP)),x}function wi(){let x,C,V,ue,Me,Ye,bt,Ht;for(x=k,C=t.charAt(k),oe.test(C)?k++:(C=r,te===0&&ye(m9)),C===r&&(C=null),V=k,ue=[],Me=t.charAt(k),ee.test(Me)?k++:(Me=r,te===0&&ye(eo));Me!==r;)ue.push(Me),Me=t.charAt(k),ee.test(Me)?k++:(Me=r,te===0&&ye(eo));if(t.charCodeAt(k)===46?(Me=O,k++):(Me=r,te===0&&ye(LP)),Me!==r){if(Ye=[],bt=t.charAt(k),ee.test(bt)?k++:(bt=r,te===0&&ye(eo)),bt!==r)for(;bt!==r;)Ye.push(bt),bt=t.charAt(k),ee.test(bt)?k++:(bt=r,te===0&&ye(eo));else Ye=r;Ye!==r?(ue=[ue,Me,Ye],V=ue):(k=V,V=r)}else k=V,V=r;if(V===r)if(V=[],ue=t.charAt(k),ee.test(ue)?k++:(ue=r,te===0&&ye(eo)),ue!==r)for(;ue!==r;)V.push(ue),ue=t.charAt(k),ee.test(ue)?k++:(ue=r,te===0&&ye(eo));else V=r;if(V!==r){if(ue=k,t.charCodeAt(k)===101?(Me=z,k++):(Me=r,te===0&&ye(NP)),Me!==r){if(Ye=t.charAt(k),oe.test(Ye)?k++:(Ye=r,te===0&&ye(m9)),Ye===r&&(Ye=null),bt=[],Ht=t.charAt(k),ee.test(Ht)?k++:(Ht=r,te===0&&ye(eo)),Ht!==r)for(;Ht!==r;)bt.push(Ht),Ht=t.charAt(k),ee.test(Ht)?k++:(Ht=r,te===0&&ye(eo));else bt=r;bt!==r?(Me=[Me,Ye,bt],ue=Me):(k=ue,ue=r)}else k=ue,ue=r;ue===r&&(ue=null),Ge=x,x=nR()}else k=x,x=r;return x}function vR(x,C){return x.map(function(V){return V[C]})}function wR(x,C,V){return[x].concat(vR(C,V))}ip=n();const w4=ip!==r&&k===t.length;function _9(){throw ip!==r&&k<t.length&&ye(aR()),lR(jh,Ui<t.length?oR(Ui):null,Ui<t.length?v9(Ui,Ui+1):v9(Ui,Ui))}return e.peg$library?{peg$result:ip,peg$currPos:k,peg$FAILED:r,peg$maxFailExpected:jh,peg$maxFailPos:Ui,peg$success:w4,peg$throw:w4?void 0:_9}:w4?ip:void _9()}function yI(t){if(!t||t.length===0)return null;if(typeof t=="string"){const r=Jv(t);return r&&r.length!==0?r:null}const e=t.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new M("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:Jv(r.value)}});e.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<e.length-1;r++){if(!WN(e[r].effects,e[r+1].effects))throw new M("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[r].effects,b:e[r+1].effects});HN(e[r].effects,e[r+1].effects)}return e.sort((r,i)=>i.scale-r.scale),e}function Jv(t){let e;if(!t)return[];try{e=BZ(t)}catch(r){throw new M("effect:invalid-syntax","Invalid effect syntax",{value:t,error:r})}return e.map(r=>WZ(r))}function WZ(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return HZ(t);case"opacity":return ZZ(t);case"hue-rotate":return JZ(t);case"blur":return QZ(t);case"drop-shadow":return YZ(t);case"bloom":return KZ(t)}}catch(e){throw e.details.filter=t,e}throw new M("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function HZ(t){let e=1;return Kc(t.parameters,1),t.parameters.length===1&&(e=ns(t.parameters[0])),new Cf(t.name,e)}function ZZ(t){let e=1;return Kc(t.parameters,1),t.parameters.length===1&&(e=ns(t.parameters[0])),new Rx(e)}function JZ(t){let e=0;return Kc(t.parameters,1),t.parameters.length===1&&(e=sJ(t.parameters[0])),new Ex(e)}function QZ(t){let e=0;return Kc(t.parameters,1),t.parameters.length===1&&(e=P6(t.parameters[0]),Ah(e,t.parameters[0])),new xx(e)}function YZ(t){const e=[];let r=null;for(const i of t.parameters)if(i.type==="color"){if(e.length&&Object.freeze(e),r)throw new M("effect:type-error","Accepts only one color",{});r=nJ(i)}else{const s=P6(i);if(Object.isFrozen(e))throw new M("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&Ah(s,i)}if(e.length<2||e.length>3)throw new M("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new Mx(e[0],e[1],e[2]||0,r||fI("black"))}function KZ(t){let e=1,r=0,i=0;return Kc(t.parameters,3),t.parameters[0]&&(e=ns(t.parameters[0])),t.parameters[1]&&(r=P6(t.parameters[1]),Ah(r,t.parameters[1])),t.parameters[2]&&(i=ns(t.parameters[2])),new _x(e,r,i)}function Kc(t,e){if(t.length>e)throw new M("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function s4(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in E6)return"<length>";if(t.unit in I6)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Ah(t,e){if(t<0)throw new M("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function XZ(t){if(t.type!=="quantity"||t.unit!==null)throw new M("effect:type-error",`Expected <double>, Actual: ${s4(t)}`,{term:t})}function eJ(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new M("effect:type-error",`Expected <double> or <percentage>, Actual: ${s4(t)}`,{term:t})}const I6={deg:1,grad:.9,rad:180/Math.PI,turn:360};function tJ(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&I6[t.unit]!=null))throw new M("effect:type-error",`Expected <angle>, Actual: ${s4(t)}`,{term:t})}const E6={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function rJ(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&E6[t.unit]!=null))throw new M("effect:type-error",`Expected <length>, Actual: ${s4(t)}`,{term:t})}function ns(t){eJ(t);const e=t.value;return Ah(e,t),t.unit==="%"?.01*e:e}function iJ(t){return XZ(t),Ah(t.value,t),t.value}function sJ(t){return tJ(t),t.value*I6[t.unit]||0}function P6(t){return rJ(t),t.value*E6[t.unit]||0}function nJ(t){switch(t.colorType){case"hex":return jk(t.value);case"named":return fI(t.value);case"function":return lJ(t.value)}}function fI(t){if(!B_(t))throw new M("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return Dk(t)}const oJ=/^rgba?/i,aJ=/^hsla?/i;function lJ(t){if(Kc(t.parameters,4),oJ.test(t.name))return[ns(t.parameters[0]),ns(t.parameters[1]),ns(t.parameters[2]),t.parameters[3]?ns(t.parameters[3]):1];if(aJ.test(t.name))return W_(iJ(t.parameters[0]),ns(t.parameters[1]),ns(t.parameters[2]),t.parameters[3]?ns(t.parameters[3]):1);throw new M("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function ih(t,e,r){try{return cJ(t)}catch(i){r?.messages?.push(i)}return null}function sh(t,e,r,i){try{const s=uJ(t);Hr(r,s,e)}catch(s){i.messages&&i.messages.push(s)}}function uJ(t){const e=yI(t);return e?ZN(e)?e.map(r=>r.toJSON()):e.map(({scale:r,effects:i})=>({scale:r,value:i.map(s=>s.toJSON())})):null}function cJ(t){if(!t||t.length===0)return null;if(pJ(t)){const e=[];for(const r of t)e.push({scale:r.scale,value:Qv(r.value)});return e}return Qv(t)}function pJ(t){const e=t[0];return!!e&&"scale"in e}function Qv(t){if(!t?.length)return"";const e=[];for(const r of t){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[tn(r,"amount")];break;case"blur":i=[tn(r,"radius","pt")];break;case"hue-rotate":i=[tn(r,"angle","deg")];break;case"drop-shadow":i=[tn(r,"xoffset","pt"),tn(r,"yoffset","pt"),tn(r,"blurRadius","pt"),dJ(r,"color")];break;case"bloom":i=[tn(r,"strength"),tn(r,"radius","pt"),tn(r,"threshold")]}const s=`${r.type}(${i.filter(Boolean).join(" ")})`;yI(s),e.push(s)}return e.join(" ")}function tn(t,e,r){if(t[e]==null)throw new M("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return r?t[e]+r:""+t[e]}function dJ(t,e){if(t[e]==null)throw new M("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const r=t[e];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const hJ={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Ce}},"portal-item":{read:!0,write:{layerContainerTypes:Ce}}}}},Yv={read:{reader:ih},write:{allowNull:!0,writer:sh,layerContainerTypes:Ce}},yJ={json:{read:!1,write:!1,origins:{"web-map":Yv,"portal-item":Yv}}},R6=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return a([u(hJ)],r.prototype,"blendMode",void 0),a([u(yJ)],r.prototype,"effect",void 0),r=a([_("esri.layers.mixins.BlendLayer")],r),r},mI=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.customParameters=null}};return a([u({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],r.prototype,"customParameters",void 0),r=a([_("esri.layers.mixins.CustomParametersMixin")],r),r},gI=96;function Q3(t,e){const r=t.extent,i=t.width,s=vi(r?.spatialReference);return r&&i?r.width/i*s*vg*gI:0}function rpe(t,e){return t/(vi(e)*vg*gI)}function fJ(t,e,r){return mJ(t,e)&&gJ(t,r)}function mJ(t,e){return e===0||yi(t,e)||t<e}function gJ(t,e){return e===0||yi(t,e)||t>e}function vJ(t,e){return yi(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const Kv={write:{overridePolicy:(t,e,r)=>({enabled:!r||r.filterMode==="scale"})}};let In=class extends de(A){constructor(e){super(e),this.id=rg(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};a([u({type:String,json:{write:!0}})],In.prototype,"id",void 0),a([u({type:Number,json:Kv})],In.prototype,"maxScale",void 0),a([u({type:Number,json:Kv})],In.prototype,"minScale",void 0),a([u({type:String,json:{write:!0}})],In.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],In.prototype,"where",void 0),In=a([_("esri.layers.support.DisplayFilter")],In);function wJ(t,e){return{...e,filterMode:t.mode}}function spe(t,e){return vI(t,e).next().value??null}function npe(t,e,r){const i=bJ(t);if(i&&(eS(e,i[0])||hf(r,i[1])))return"";const s=Array.from(vI(t,e,r)),n=_J(s,e,r)?"1=1":s.map(o=>o.where||"1=1").reduce((o,l)=>sj(o,l),"");return n&&n!=="1=1"?n:""}function bJ(t){if(wI(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of t.filters)e[0]=Math.max(e[0],nh(r)),e[1]=Math.min(e[1],g2(i));return e}function*vI(t,e,r){if(wI(t)==="manual"){const i=t.filters.find(s=>s.id===t.activeFilterId);i&&(yield i)}else{typeof e=="object"&&(e=e.scale);for(const i of t.filters)SJ(i.minScale,i.maxScale,e,r)&&(yield i)}}function _J(t,e,r){if(t.length===0)return!0;const i=nh(t.at(0)?.minScale),s=g2(t.at(-1)?.maxScale);if(hf(i,e)||eS(s,r))return!0;for(let n=0;n<t.length-1;n++){const o=t[n],l=t[n+1];if(hf(nh(l.minScale),g2(o.maxScale)))return!0}return!1}function SJ(t,e,r,i){return t=nh(t),r=nh(r),e=g2(e),!(!yi(r,t)&&(i??r)>t)&&!qk(e,r)&&(i===void 0||!yi(i,t))}function wI(t){return"mode"in t?t.mode:t.filterMode}function nh(t){return t||Number.POSITIVE_INFINITY}function g2(t){return t||0}let Ca=class extends de(A){constructor(e){super(e),this.activeFilterId=null,this.filters=new(q.ofType(In)),this.mode="manual"}writeFilters(e,r,i,s){const n=e.toArray();this.mode==="scale"&&n.sort((o,l)=>{const c=vJ(l.minScale,o.minScale),d=o.maxScale-l.maxScale;return c===0?d:c}),r[i]=n.map(o=>o.toJSON(s))}write(e,r){return super.write(e,wJ(this,r))}};a([u({type:String,json:{write:{overridePolicy:(t,e,r)=>({enabled:r.filterMode==="manual",isRequired:!0})}}})],Ca.prototype,"activeFilterId",void 0),a([u({type:q.ofType(In),nonNullable:!0,json:{write:!0}})],Ca.prototype,"filters",void 0),a([j("filters")],Ca.prototype,"writeFilters",null),a([u({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Ca.prototype,"mode",void 0),Ca=a([_("esri.layers.support.DisplayFilterInfo")],Ca);const xJ=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return a([u($J)],r.prototype,"displayFilterEnabled",void 0),a([u(TJ)],r.prototype,"displayFilterInfo",void 0),r=a([_("esri.layers.mixins.DisplayFilteredLayer")],r),r},$J={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:Ce,writer(t,e,r){Hr(r,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},TJ={type:Ca,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Ce},origins:{"web-scene":{write:!1,read:!1}}}},MJ=pO(),bI=new Map,_I=new Map;async function ape(t,e,r){if(!t||!r)return!1;if(!e)return!0;const i=new URL(t).host;let s=bI.get(i);if(!s){const n=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Le(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===e}async function lpe(t,e,r=!1){if(!t||!e)return!0;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=_I.get(i)?.entries();if(s){for(const[n,o]of s)if(o.name===e){const l=!o.stack?.hasForwardEdits();if(!l&&r){const[{deleteForwardEdits:c},{default:d}]=await Promise.all([L(()=>import("./money-tides-deleteForwardEdits-BD9n_t9n.js"),__vite__mapDeps([321,3,1,2,4,5,10,11,12])),L(()=>import("./money-tides-DeleteForwardEditsParameters-BtQo1yTJ.js"),__vite__mapDeps([322,3,1,2,4,5,11,12]))]),h=await c(i,n,new d({sessionId:MJ,moment:o.moment}));return h.success&&o.stack?.clearForwardEdits(),h.success}return l}}return!0}function IJ(t,e){if(!t)return!1;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=_I.get(r)?.entries();if(i){for(const[s,n]of i)if(n.name===e)return n.lockType==="edit"}return!1}const O6=new t_;function EJ(t){return O6.on("apply-edits",new WeakRef(t))}function PJ(t){return O6.on("update-moment",new WeakRef(t))}function upe(t,e,r=null,i=!1){const s=Jo();return i=e==null||i,O6.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:r,mayReceiveServiceEdits:i,result:s.promise}),s}const SI=Symbol();function cpe(t){return t!=null&&typeof t=="object"&&SI in t}function wp(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function Ey(t,e,r){const i=new URL(t).host,s=bI.get(i),n=o=>!o||o===s;return n(e)&&n(r)||e===r}const RJ=t=>{var s;var e;const r=t;let i=(s=class extends r{constructor(...n){super(...n),this[e]=!0,this._applyEditsHandler=o=>{const{serviceUrl:l,layerId:c,gdbVersion:d,mayReceiveServiceEdits:h,result:y}=o,f=l===this.url,m=c!=null&&this.layerId!=null&&c===this.layerId,g=wp(this),v=wp(this)&&Ey(l,d,this.gdbVersion);if(!f||g&&!v||!m&&!h)return;const b=y.then(S=>{if(this.lastEditsEventDate=new Date,m&&(S.addedFeatures.length||S.updatedFeatures.length||S.deletedFeatures.length||S.addedAttachments.length||S.updatedAttachments.length||S.deletedAttachments.length))return this.emit("edits",P(S)),S;const $=S.editedFeatures?.find(({layerId:T})=>T===this.layerId);if($){const{adds:T,updates:R,deletes:O}=$.editedFeatures,z={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:T?T.map(({attributes:U})=>({objectId:this.objectIdField&&U[this.objectIdField],globalId:this.globalIdField&&U[this.globalIdField]})):[],deletedFeatures:O?O.map(({attributes:U})=>({objectId:this.objectIdField&&U[this.objectIdField],globalId:this.globalIdField&&U[this.globalIdField]})):[],updatedFeatures:R?R.map(({current:{attributes:U}})=>({objectId:this.objectIdField&&U[this.objectIdField],globalId:this.globalIdField&&U[this.globalIdField]})):[],editedFeatures:P(S.editedFeatures),exceededTransferLimit:!1,historicMoment:P(S.historicMoment)};return this.emit("edits",z),z}const E={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:P(S.editedFeatures),exceededTransferLimit:!1,historicMoment:P(S.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(l,d,E.historicMoment)&&this.emit("edits",E),E}).then(S=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(l,d,S.historicMoment)&&(this.historicMoment=S.historicMoment),S));this.emit("apply-edits",{result:b})},this._updateMomentHandler=o=>{const{serviceUrl:l,gdbVersion:c,moment:d}=o,h=l===this.url,y=wp(this),f=wp(this)&&Ey(l,c,this.gdbVersion),m=wp(this)&&!Ey(l,this.gdbVersion,null);h&&y&&f&&m&&"historicMoment"in this&&this.historicMoment!==d&&(this.historicMoment=d)},this.when().then(()=>{this.addHandles(EJ(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(PJ(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(n,o,l){return"historicMoment"in this&&this.historicMoment!==l&&IJ(n,o)}},e=SI,s);return a([u()],i.prototype,"lastEditsEventDate",void 0),i=a([_("esri.layers.mixins.EditBusLayer")],i),i};var Y3;const Py=new be({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Ry=new be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Is=Y3=class extends A{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:o,distance:l}=this;return new H({geometry:P(r),objectIds:P(n),spatialRelationship:i,timeExtent:P(s),where:e,units:o,distance:l,...t})}clone(){const{where:t,geometry:e,spatialRelationship:r,timeExtent:i,objectIds:s,units:n,distance:o}=this;return new Y3({geometry:P(e),objectIds:P(s),spatialRelationship:r,timeExtent:P(i),where:t,units:n,distance:o})}};a([u({type:String,json:{write:!0}})],Is.prototype,"where",void 0),a([u({types:xh,json:{write:!0}})],Is.prototype,"geometry",void 0),a([u({type:Py.apiValues,json:{name:"spatialRel",read:{reader:Py.read},write:{allowNull:!1,writer:Py.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Is.prototype,"spatialRelationship",void 0),a([u({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Is.prototype,"distance",void 0),a([u({type:[Number],json:{write:!0}})],Is.prototype,"objectIds",void 0),a([u({type:Ry.apiValues,json:{read:Ry.read,write:{writer:Ry.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Is.prototype,"units",void 0),a([u({type:it,json:{write:!0}})],Is.prototype,"timeExtent",void 0),Is=Y3=a([_("esri.layers.support.FeatureFilter")],Is);const OJ=Is;var K3;const Xv={read:{reader:ih},write:{writer:sh,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},ew={read:{reader:ih},write:{writer:sh,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},tw={name:"showExcludedLabels",default:!0};let ka=K3=class extends A{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){const r=super.write(t,e);if(e?.origin){if(r.filter){const i=Object.keys(r.filter);if(i.length>1||i[0]!=="where")return e.messages?.push(new M("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in r)return e.messages?.push(new M("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return r}clone(){return new K3({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};a([u({type:OJ,json:{write:{allowNull:!0,writer(t,e,r,i){const s=t?.write({},i);s&&Object.keys(s).length!==0?Hr(r,s,e):Hr(r,null,e)}}}})],ka.prototype,"filter",void 0),a([u({json:{read:ih,write:{writer:sh,allowNull:!0},origins:{"web-map":Xv,"portal-item":Xv}}})],ka.prototype,"includedEffect",void 0),a([u({json:{read:ih,write:{writer:sh,allowNull:!0},origins:{"web-map":ew,"portal-item":ew}}})],ka.prototype,"excludedEffect",void 0),a([u({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":tw,"portal-item":tw}}})],ka.prototype,"excludedLabelsVisible",void 0),ka=K3=a([_("esri.layers.support.FeatureEffect")],ka);const rw={write:{allowNull:!0}},CJ={type:ka,json:{origins:{"web-map":rw,"portal-item":rw}}},kJ=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return a([u(CJ)],r.prototype,"featureEffect",void 0),r=a([_("esri.layers.mixins.FeatureEffectLayer")],r),r};var X3;let Jp=X3=class extends A{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return lr(t,e,null,this.expression)}clone(){return new X3({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};a([u({type:String,json:{write:{isRequired:!0}}})],Jp.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],Jp.prototype,"title",void 0),Jp=X3=a([_("esri.symbols.support.FeatureExpressionInfo")],Jp);const iw=Jp,n4={unknown:1,inches:tt(1,"meters","inches"),feet:tt(1,"meters","feet"),"us-feet":tt(1,"meters","us-feet"),yards:tt(1,"meters","yards"),miles:tt(1,"meters","miles"),"nautical-miles":tt(1,"meters","nautical-miles"),millimeters:tt(1,"meters","millimeters"),centimeters:tt(1,"meters","centimeters"),decimeters:tt(1,"meters","decimeters"),meters:tt(1,"meters","meters"),kilometers:tt(1,"meters","kilometers"),"decimal-degrees":1/PC(1,"meters",Qe.radius)};function ppe(t){return!!t&&n4[t]!=null}function dpe(t){return 1/(n4[t]||1)}function FJ(){const t=Object.keys(n4);return Xb(t,"decimal-degrees"),t.sort(),t}const AJ=FJ(),f1=Wt()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),sw=new be({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Os=class extends de(A){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,r){return e!=null?e.expression?e:void 0:r.featureExpression&&r.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,r,i,s){r[i]=e.write({},s),e.expression==="0"&&(r.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:r}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||r?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&dO(this.featureExpressionInfo,e.featureExpressionInfo)}};a([u({type:iw,json:{write:!0}})],Os.prototype,"featureExpressionInfo",void 0),a([F("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Os.prototype,"readFeatureExpressionInfo",null),a([j("featureExpressionInfo",{featureExpressionInfo:{type:iw},"featureExpression.value":{type:[0]}})],Os.prototype,"writeFeatureExpressionInfo",null),a([u({type:f1.apiValues,nonNullable:!0,json:{type:f1.jsonValues,read:f1.read,write:{writer:f1.write,isRequired:!0}}})],Os.prototype,"mode",null),a([u({type:Number,json:{write:!0}})],Os.prototype,"offset",void 0),a([u({type:AJ,json:{type:String,read:sw.read,write:sw.write}})],Os.prototype,"unit",null),Os=a([_("esri.symbols.support.ElevationInfo")],Os);let xu=class extends A{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};a([u({type:String,json:{write:!0}})],xu.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],xu.prototype,"label",void 0),a([u()],xu.prototype,"type",void 0),xu=a([_("esri.tables.elements.AttributeTableElement")],xu);const Xc=xu;let Qp=class extends de(Xc){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};a([u({type:["auto"],json:{write:!0}})],Qp.prototype,"displayType",void 0),a([u({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Qp.prototype,"type",void 0),Qp=a([_("esri.tables.elements.AttributeTableAttachmentElement")],Qp);const xI=Qp;let Fa=class extends de(Xc){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};a([u({type:String,json:{read:!1,write:!1}})],Fa.prototype,"description",void 0),a([u({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Fa.prototype,"fieldName",void 0),a([u({type:String,json:{read:!1,write:!1}})],Fa.prototype,"label",void 0),a([u({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Fa.prototype,"type",void 0),Fa=a([_("esri.tables.elements.AttributeTableFieldElement")],Fa);const $I=Fa;let Yp=class extends de(Xc){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};a([u({type:Number,json:{type:ve,write:{enabled:!0,isRequired:!0}}})],Yp.prototype,"relationshipId",void 0),a([u({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Yp.prototype,"type",void 0),Yp=a([_("esri.tables.elements.AttributeTableRelationshipElement")],Yp);const TI=Yp,MI={base:Xc,key:"type",typeMap:{attachment:xI,field:$I,relationship:TI}};function LJ(t){return{typesWithGroup:{base:Xc,key:"type",typeMap:{attachment:xI,field:$I,group:t,relationship:TI}},typesWithoutGroup:MI}}let Kp=class extends de(Xc){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};a([u({types:[MI],json:{name:"attributeTableElements",write:!0}})],Kp.prototype,"elements",void 0),a([u({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Kp.prototype,"type",void 0),Kp=a([_("esri.tables.elements.AttributeTableGroupElement")],Kp);const NJ=Kp;let Xp=class extends de(A){constructor(e){super(e),this.field=null,this.order=null}};a([u({type:String,json:{write:!0}})],Xp.prototype,"field",void 0),a([u({type:["asc","desc"],json:{write:!0}})],Xp.prototype,"order",void 0),Xp=a([_("esri.tables.support.FieldOrder")],Xp);const DJ=Xp;var e5;const jJ=LJ(NJ);let ed=e5=class extends A{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new e5({elements:P(this.elements),orderByFields:P(this.orderByFields)})}};a([u({types:[jJ.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],ed.prototype,"elements",void 0),a([u({type:[DJ],json:{write:!0}})],ed.prototype,"orderByFields",void 0),ed=e5=a([_("esri.tables.AttributeTableTemplate")],ed);const II=ed,VJ={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Ce}}},Lh={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,r){e[r]=!t}}}},o4={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Ce}}},C6={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Dd}}},EI={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Ce}}},zJ={value:null,type:Os,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Ce}}};function bpe(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const PI={write:{enabled:!0,layerContainerTypes:Ce},read:!0},t5={type:Number,json:{origins:{"web-document":PI,"portal-item":{write:{layerContainerTypes:Ce}}}}},qJ={...t5,json:{...t5.json,origins:{"web-document":{...PI,write:{enabled:!0,layerContainerTypes:Ce,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,r)=>r&&r.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?Gd(e.layerDefinition.drawingInfo.transparency):void 0:Gd(e.drawingInfo.transparency)}}},_pe={type:le,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const r=le.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(r.spatialReference=B.fromJSON(e.spatialReference)),r}}}},read:!1}},RI={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},UJ={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Ce}}},GJ={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Ce}}},OI={json:{write:{ignoreOrigin:!0,layerContainerTypes:Ce},origins:{"web-map":{read:!1,write:!1}}}},BJ={type:II,json:{name:"attributeTableInfo",write:!0}};let vn=class extends de(A){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};a([u()],vn.prototype,"creatorField",void 0),a([u()],vn.prototype,"creationDateField",void 0),a([u()],vn.prototype,"editorField",void 0),a([u()],vn.prototype,"editDateField",void 0),a([u()],vn.prototype,"realm",void 0),a([u(Fc("dateFieldsTimeReference",!0))],vn.prototype,"timeZone",void 0),vn=a([_("esri.layers.support.EditFieldsInfo")],vn);let Cs=class extends de(A){constructor(e){super(e)}};a([u({constructOnly:!0,json:{write:!0}})],Cs.prototype,"name",void 0),a([u({constructOnly:!0,json:{write:!0}})],Cs.prototype,"fields",void 0),a([u({constructOnly:!0,json:{write:!0}})],Cs.prototype,"isAscending",void 0),a([u({constructOnly:!0,json:{write:!0}})],Cs.prototype,"indexType",void 0),a([u({constructOnly:!0,json:{write:!0}})],Cs.prototype,"isUnique",void 0),a([u({constructOnly:!0,json:{write:!0}})],Cs.prototype,"description",void 0),Cs=a([_("esri.layers.support.FeatureIndex")],Cs);async function WJ(t,e,r){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=CI(t));const i=HJ(t),s=t.capabilities.query.supportsPagination;e.start=0,e.num=i;let n=null;for(;;){const o=await t.source.queryFeaturesJSON(e,r);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;e.start+=i}return n}function HJ(t){return CI(t)*ZJ(t)}function ZJ(t){return t.capabilities.query.maxRecordCount||2e3}function CI(t){return t.capabilities.query.supportsMaxRecordCountFactor?H.MAX_MAX_RECORD_COUNT_FACTOR:1}var r5;let td=r5=class extends A{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new r5({minValue:this.minValue,maxValue:this.maxValue})}};a([u({type:Number,json:{write:!0}})],td.prototype,"minValue",void 0),a([u({type:Number,json:{write:!0}})],td.prototype,"maxValue",void 0),td=r5=a([_("esri.renderers.support.AuthoringInfoClassBreakInfo")],td);var i5;let To=i5=class extends A{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new i5({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:P(this.classBreakInfos)})}};a([u({type:String,json:{write:!0}})],To.prototype,"field",void 0),a([u({type:String,json:{write:!0}})],To.prototype,"normalizationField",void 0),a([u({type:String,json:{write:!0}})],To.prototype,"label",void 0),a([u({type:[td],json:{write:!0}})],To.prototype,"classBreakInfos",void 0),To=i5=a([_("esri.renderers.support.AuthoringInfoFieldInfo")],To);var s5;let $u=s5=class extends A{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new s5({label:this.label,value:this.value,size:this.size})}};a([u({type:String,json:{write:!0}})],$u.prototype,"label",void 0),a([u({type:Number,json:{write:!0}})],$u.prototype,"size",void 0),a([u({type:Number,json:{write:!0}})],$u.prototype,"value",void 0),$u=s5=a([_("esri.renderers.support.AuthoringInfoSizeStop")],$u);const JJ=$u;var n5;const m1=new be({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),g1=new be({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),nw={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},ow=["high-to-low","above-and-below","centered-on","extremes"],aw=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],lw=["seconds","minutes","hours","days","months","years"],QJ=["circle","diamond","hexagon-flat","hexagon-pointy","square"],YJ=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let _t=n5=class extends A{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new n5({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:P(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};a([u({types:nw,json:{write:!0}})],_t.prototype,"endTime",void 0),a([xe("endTime")],_t.prototype,"castEndTime",null),a([u({type:String,json:{write:!0}})],_t.prototype,"field",void 0),a([u({type:Number,json:{write:!0}})],_t.prototype,"maxSliderValue",void 0),a([u({type:Number,json:{write:!0}})],_t.prototype,"minSliderValue",void 0),a([u({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],_t.prototype,"normalizationField",null),a([u({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_t.prototype,"referenceSizeScale",null),a([u({type:QJ,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_t.prototype,"referenceSizeSymbolStyle",null),a([u({type:YJ,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_t.prototype,"spikeSymbolStyle",null),a([u({types:nw,json:{write:!0}})],_t.prototype,"startTime",void 0),a([xe("startTime")],_t.prototype,"castStartTime",null),a([u({type:[JJ],json:{origins:{"web-scene":{write:!1}},write:!0}})],_t.prototype,"sizeStops",null),a([u({type:m1.apiValues,value:null,json:{type:m1.jsonValues,read:m1.read,write:m1.write}})],_t.prototype,"style",null),a([u({type:aw,value:null,json:{type:aw,origins:{"web-scene":{type:ow,write:{writer:(t,e)=>{ow.includes(t)&&(e.theme=t)}}}},write:!0}})],_t.prototype,"theme",null),a([u({type:g1.apiValues,json:{type:g1.jsonValues,read:g1.read,write:g1.write}})],_t.prototype,"type",void 0),a([u({type:lw,json:{type:lw,write:!0}})],_t.prototype,"units",void 0),_t=n5=a([_("esri.renderers.support.AuthoringInfoVisualVariable")],_t);const KJ=_t;let Qu=class extends A{constructor(e){super(e),this.type=null}};a([u({readOnly:!0,json:{read:!1,write:!0}})],Qu.prototype,"type",void 0),Qu=a([_("esri.rest.support.ColorRamp")],Qu);var o5;let Ln=o5=class extends Qu{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new o5({fromColor:P(this.fromColor),toColor:P(this.toColor),algorithm:this.algorithm})}};a([X({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Ln.prototype,"algorithm",void 0),a([u({type:ne,json:{type:[ve],write:{isRequired:!0}}})],Ln.prototype,"fromColor",void 0),a([u({type:ne,json:{type:[ve],write:{isRequired:!0}}})],Ln.prototype,"toColor",void 0),a([u({type:["algorithmic"],json:{write:{isRequired:!0}}})],Ln.prototype,"type",void 0),Ln=o5=a([_("esri.rest.support.AlgorithmicColorRamp")],Ln);var a5;let En=a5=class extends Qu{constructor(t){super(t),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(t,e,r,i){const s=t?.map(o=>o.toJSON(i)),{weights:n}=this;if(s&&n?.length&&s.length===n?.length){const o=100/n.reduce((c,d)=>c+d);let l=0;s.forEach((c,d)=>{c.start=l,l+=n[d]*o,c.stop=l})}e.colorRamps=s}readWeights(t,e){const r=e.colorRamps?.map(({start:i,stop:s})=>i==null||s==null?-1:s-i);if(!r?.some(i=>i<0))return r}clone(){return new a5({colorRamps:P(this.colorRamps)})}};a([u({type:[Ln],json:{write:{isRequired:!0}}})],En.prototype,"colorRamps",void 0),a([j("colorRamps")],En.prototype,"writeColorRamps",null),a([u({type:["multipart"],json:{write:{isRequired:!0}}})],En.prototype,"type",void 0),a([u({type:[Number]})],En.prototype,"weights",void 0),a([F("weights",["colorRamps"])],En.prototype,"readWeights",null),En=a5=a([_("esri.rest.support.MultipartColorRamp")],En);const XJ={key:"type",base:Qu,typeMap:{algorithmic:Ln,multipart:En}};function eQ(t){return t?.type?t.type==="algorithmic"?Ln.fromJSON(t):t.type==="multipart"?En.fromJSON(t):null:null}var l5;const pa=new be({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),v1=new be({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),uw=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],tQ=["high-to-low","above-and-below","above","below"],rQ=["flow-line","wave-front"],iQ=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Ue=l5=class extends A{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?eQ(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new l5({classificationMethod:this.classificationMethod,colorRamp:P(this.colorRamp),fadeRatio:P(this.fadeRatio),fields:this.fields?.slice(),field1:P(this.field1),field2:P(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};a([u({type:pa.apiValues,value:null,json:{type:pa.jsonValues,read:pa.read,write:pa.write,origins:{"web-document":{default:"manual",type:pa.jsonValues,read:pa.read,write:pa.write}}}})],Ue.prototype,"classificationMethod",null),a([u({types:XJ,json:{write:!0}})],Ue.prototype,"colorRamp",void 0),a([F("colorRamp")],Ue.prototype,"readColorRamp",null),a([u({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ue.prototype,"fadeRatio",void 0),a([u({type:[String],value:null,json:{write:!0}})],Ue.prototype,"fields",null),a([u({type:To,value:null,json:{write:!0}})],Ue.prototype,"field1",null),a([u({type:To,value:null,json:{write:!0}})],Ue.prototype,"field2",null),a([u({type:rQ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ue.prototype,"flowTheme",null),a([u({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Ue.prototype,"focus",null),a([u({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Ue.prototype,"isAutoGenerated",void 0),a([u({type:Number,value:null,json:{type:ve,write:!0}})],Ue.prototype,"numClasses",null),a([u({type:uw,json:{type:uw,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Ue.prototype,"lengthUnit",void 0),a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ue.prototype,"maxSliderValue",void 0),a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ue.prototype,"minSliderValue",void 0),a([u({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ue.prototype,"statistics",null),a([u({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Ue.prototype,"standardDeviationInterval",null),a([u({type:v1.apiValues,value:null,json:{type:v1.jsonValues,read:v1.read,write:v1.write}})],Ue.prototype,"type",null),a([u({type:[KJ],json:{write:!0}})],Ue.prototype,"visualVariables",void 0),a([u({type:iQ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ue.prototype,"univariateSymbolStyle",null),a([u({type:tQ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ue.prototype,"univariateTheme",null),Ue=l5=a([_("esri.renderers.support.AuthoringInfo")],Ue);const Oy=new be({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let di=class extends A{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,e),Array.from(r).sort()}getSymbol(e,r){}async getSymbolAsync(e,r){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};a([u({type:Ue,json:{write:!0}})],di.prototype,"authoringInfo",void 0),a([u({type:Oy.apiValues,readOnly:!0,json:{type:Oy.jsonValues,read:!1,write:{writer:Oy.write,ignoreOrigin:!0,isRequired:!0}}})],di.prototype,"type",void 0),di=a([_("esri.renderers.Renderer")],di);let rd=class extends de(A){constructor(){super(...arguments),this.showLegend=null,this.title=null}};a([u({type:Boolean,json:{write:!0}})],rd.prototype,"showLegend",void 0),a([u({type:String,json:{write:!0}})],rd.prototype,"title",void 0),rd=a([_("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],rd);const kI=rd,Cy=new be({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let er=class extends A{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(N.getLogger(this).error(".field: field must be a string value"),null):I2(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};a([u()],er.prototype,"index",void 0),a([u({type:Cy.apiValues,readOnly:!0,json:{read:Cy.read,write:{writer:Cy.write,isRequired:!0}}})],er.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],er.prototype,"field",void 0),a([xe("field")],er.prototype,"castField",null),a([u({type:String,json:{write:!0}})],er.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],er.prototype,"valueExpressionTitle",void 0),a([u({readOnly:!0})],er.prototype,"arcadeRequired",null),a([u({type:kI,json:{write:!0}})],er.prototype,"legendOptions",void 0),er=a([_("esri.renderers.visualVariables.VisualVariable")],er);var u5;let Aa=u5=class extends A{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,r){e[r]=t??0}clone(){return new u5({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};a([u({type:ne,json:{type:[ve],write:{isRequired:!0}}})],Aa.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],Aa.prototype,"label",void 0),a([u({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Aa.prototype,"value",void 0),a([j("value")],Aa.prototype,"writeValue",null),Aa=u5=a([_("esri.renderers.visualVariables.support.ColorStop")],Aa);const sQ=Aa;var c5;let Mo=c5=class extends er{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,r)=>e.value-r.value),this._set("stops",t)}clone(){return new c5({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};a([u({readOnly:!0})],Mo.prototype,"cache",null),a([u({type:["color"],json:{type:["colorInfo"]}})],Mo.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Mo.prototype,"normalizationField",void 0),a([u({type:[sQ],json:{write:!0}})],Mo.prototype,"stops",null),Mo=c5=a([_("esri.renderers.visualVariables.ColorVariable")],Mo);var p5;let So=p5=class extends A{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return Gd(e.transparency)}writeOpacity(t,e,r){e[r]=L2(t)}clone(){return new p5({label:this.label,opacity:this.opacity,value:this.value})}};a([u({type:String,json:{write:!0}})],So.prototype,"label",void 0),a([u({type:Number,json:{type:ve,write:{target:"transparency",isRequired:!0}}})],So.prototype,"opacity",void 0),a([F("opacity",["transparency"])],So.prototype,"readOpacity",null),a([j("opacity")],So.prototype,"writeOpacity",null),a([u({type:Number,json:{write:{isRequired:!0}}})],So.prototype,"value",void 0),So=p5=a([_("esri.renderers.visualVariables.support.OpacityStop")],So);const nQ=So;var d5;let Nn=d5=class extends er{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,r)=>e.value-r.value),this._set("stops",t)}clone(){return new d5({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};a([u({readOnly:!0})],Nn.prototype,"cache",null),a([u({type:["opacity"],json:{type:["transparencyInfo"]}})],Nn.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Nn.prototype,"normalizationField",void 0),a([u({type:[nQ],json:{write:!0}})],Nn.prototype,"stops",null),Nn=d5=a([_("esri.renderers.visualVariables.OpacityVariable")],Nn);var h5;let Io=h5=class extends er{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new h5({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};a([u({readOnly:!0})],Io.prototype,"cache",null),a([u({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Io.prototype,"axis",void 0),a([u({type:["rotation"],json:{type:["rotationInfo"]}})],Io.prototype,"type",void 0),a([u({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Io.prototype,"rotationType",void 0),Io=h5=a([_("esri.renderers.visualVariables.RotationVariable")],Io);function oQ(t){return _e(t)}var y5;let os=y5=class extends A{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new y5({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};a([u({type:String,json:{write:!0}})],os.prototype,"label",void 0),a([u({type:Number,cast:_e,json:{write:{isRequired:!0}}})],os.prototype,"size",void 0),a([u({type:Number,json:{write:{isRequired:!0}}})],os.prototype,"value",void 0),a([u({type:Boolean,json:{write:!1}})],os.prototype,"useMinValue",void 0),a([u({type:Boolean,json:{write:!1}})],os.prototype,"useMaxValue",void 0),os=y5=a([_("esri.renderers.visualVariables.support.SizeStop")],os);let P0=class extends kI{constructor(){super(...arguments),this.customValues=null}};a([u({type:[Number],json:{write:!0}})],P0.prototype,"customValues",void 0),P0=a([_("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],P0);const aQ=P0;function Du(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function bl(t){return t!=null&&!isNaN(t)&&isFinite(t)}function FI(t){return t.valueExpression?"expression":t.field&&typeof t.field=="string"?"field":"unknown"}function lQ(t,e){const r=e||FI(t),i=t.valueUnit||"unknown";return r==="unknown"?"constant":t.stops?"stops":t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?"clamped-linear":i==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}const AI=()=>N.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),a4=t=>AI().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),l4=()=>AI().error("Use of arcade expressions requires an arcade context"),cw=new et,R0=Math.PI,LI=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function NI(t,e,r){const i="visualVariables"in t?t.visualVariables?.find(g=>g.type==="color"):t;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void a4("ColorVariable");const s=typeof e=="number",n=s?null:e,o=n?.attributes;let l=s?e:null;const c=i.field,{ipData:d,hasExpression:h}=i.cache;let y=i.cache.compiledFunc;if(!c&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof l!="number")if(h){if(r?.arcade==null)return void l4();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,b=v.getViewInfo(g),S=v.createExecContext(n,b,r.timeZone);if(!y){const $=v.createSyntaxTree(i.valueExpression);y=v.createFunction($),i.cache.compiledFunc=y}l=v.executeFunction(y,S)}else o&&(l=o[c]);const f=i.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(l!=null&&(!f||s||!isNaN(m)&&m!==0)){bl(m)&&!s&&(l/=m);const g=k6(l,d);if(g){const v=g[0],b=g[1],S=v===b?i.stops[v].color:ne.blendColors(i.stops[v].color,i.stops[b].color,g[2],r?.color);return new ne(S)}}}function DI(t,e,r){const i="visualVariables"in t?t.visualVariables?.find(g=>g.type==="opacity"):t;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void a4("OpacityVariable");const s=typeof e=="number",n=s?null:e,o=n?.attributes;let l=s?e:null;const c=i.field,{ipData:d,hasExpression:h}=i.cache;let y=i.cache.compiledFunc;if(!c&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof l!="number")if(h){if(r?.arcade==null)return void l4();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,b=v.getViewInfo(g),S=v.createExecContext(n,b,r.timeZone);if(!y){const $=v.createSyntaxTree(i.valueExpression);y=v.createFunction($),i.cache.compiledFunc=y}l=v.executeFunction(y,S)}else o&&(l=o[c]);const f=i.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(l!=null&&(!f||s||!isNaN(m)&&m!==0)){bl(m)&&!s&&(l/=m);const g=k6(l,d);if(g){const v=g[0],b=g[1];if(v===b)return i.stops[v].opacity;{const S=i.stops[v].opacity;return S+(i.stops[b].opacity-S)*g[2]}}}}function jI(t,e,r){const i="visualVariables"in t?t.visualVariables?.find(m=>m.type==="rotation"):t;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void a4("RotationVariable");const s=i.axis||"heading",n=s==="heading"&&i.rotationType==="arithmetic"?90:0,o=s==="heading"&&i.rotationType==="arithmetic"?-1:1,l=typeof e=="number"?null:e,c=l?.attributes,d=i.field,{hasExpression:h}=i.cache;let y=i.cache.compiledFunc,f=null;if(!d&&!h)return f;if(h){if(r?.arcade==null)return void l4();const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(m),b=g.createExecContext(l,v,r.timeZone);if(!y){const S=g.createSyntaxTree(i.valueExpression);y=g.createFunction(S),i.cache.compiledFunc=y}f=g.executeFunction(y,b)}else c&&(f=c[d]);return f=typeof f!="number"||isNaN(f)?null:n+o*f,f}function uQ(t,e,r){const i=typeof e=="number",s=i?null:e,n=s?.attributes;let o=i?e:null;const{isScaleDriven:l}=t.cache;let c=t.cache.compiledFunc;if(l){const h=r?.scale,y=r?.view;o=h==null||y==="3d"?cQ(t):h}else if(!i)switch(t.inputValueType){case"expression":{if(r?.arcade==null)return void l4();const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,f=y.getViewInfo(h),m=y.createExecContext(s,f,r.timeZone);if(!c){const g=y.createSyntaxTree(t.valueExpression);c=y.createFunction(g),t.cache.compiledFunc=c}o=y.executeFunction(c,m);break}case"field":n&&(o=n[t.field]);break;case"unknown":o=null}if(!bl(o))return null;if(i||!t.normalizationField)return o;const d=n?parseFloat(n[t.normalizationField]):null;return bl(d)&&d!==0?o/d:null}function cQ(t){let e=null,r=null;const i=t.stops;return i?(e=i[0].value,r=i[i.length-1].value):(e=t.minDataValue||0,r=t.maxDataValue||0),(e+r)/2}function u4(t,e,r){const i="visualVariables"in t?t.visualVariables?.find(n=>n.type==="size"):t;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void a4("SizeVariable");const s=zI(uQ(i,e,r),i,e,r,i.cache.ipData);return s==null||isNaN(s)?void 0:s}function Wr(t,e,r){return t==null?null:Du(t)?u4(t,e,r):bl(t)?t:null}function VI(t,e,r){return bl(r)&&t>r?r:bl(e)&&t<e?e:t}function pQ(t,e,r,i){const s=Wr(e.minSize,r,i)||e.minDataValue;return t==null&&s==null?null:(t??0)+(s??0)}function dQ(t,e,r){const i=t.stops;let s=i?.length&&i[0].size;return s==null&&(s=t.minSize),Wr(s,e,r)}function hQ(t,e,r,i){const s=Wr(e.minSize,r,i);if(t==null)return s;const{minDataValue:n,maxDataValue:o}=e;if(n==null||o==null)return null;const l=(t-n)/(o-n),c=Wr(e.maxSize,r,i),d=i?.shape;if(t<=n)return s;if(t>=o)return c;if(s==null||c==null)return null;if(e.scaleBy==="area"&&d){const h=d==="circle",y=h?R0*(s/2)**2:s*s,f=y+l*((h?R0*(c/2)**2:c*c)-y);return h?2*Math.sqrt(f/R0):Math.sqrt(f)}return s+l*(c-s)}function yQ(t,e,r,i){const s=Wr(e.minSize,r,i);if(t==null||s==null)return s;const n=i?.shape,{minDataValue:o}=e;if(o==null)return null;const l=t/o,c=Wr(e.maxSize,r,i);let d=null;return d=n==="circle"?2*Math.sqrt(l*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(l*s**2):l*s,VI(d,s,c)}function fQ(t,e,r,i,s){if(t==null)return null;const[n,o,l]=k6(t,s);if(n===o)return Wr(e.stops?.[n].size,r,i);{const c=Wr(e.stops?.[n].size,r,i),d=Wr(e.stops?.[o].size,r,i);return c==null||d==null?null:c+(d-c)*l}}function mQ(t,e,r,i){const s=(i?.resolution??1)*n4[e.valueUnit],n=Wr(e.minSize,r,i),o=Wr(e.maxSize,r,i),{valueRepresentation:l}=e;if(t==null)return n;let c=null;return c=l==="area"?2*Math.sqrt(t/R0)/s:l==="radius"||l==="distance"?2*t/s:t/s,VI(c,n,o)}function zI(t,e,r,i,s){switch(e.transformationType){case"additive":return pQ(t,e,r,i);case"constant":return dQ(e,r,i);case"clamped-linear":return hQ(t,e,r,i);case"proportional":return yQ(t,e,r,i);case"stops":return fQ(t,e,r,i,s);case"real-world-size":return mQ(t,e,r,i);case"identity":return t;case"unknown":return null}}function gQ(t,e,r){const{isScaleDriven:i}=t.cache;if(!(i&&r==="3d"||e))return null;const s={scale:e,view:r};let n=Wr(t.minSize,cw,s),o=Wr(t.maxSize,cw,s);if(n!=null||o!=null){if(n>o){const l=o;o=n,n=l}return{minSize:n,maxSize:o}}}function vQ(t,e,r){if(!t.visualVariables)return;const i=[],s=[],n=[],o=[],l=[];for(const c of t.visualVariables)switch(c.type){case"color":s.push(c);break;case"opacity":n.push(c);break;case"rotation":l.push(c);break;case"size":o.push(c)}return s.forEach(c=>{const d=NI(c,e,r);i.push({variable:c,value:d})}),n.forEach(c=>{const d=DI(c,e,r);i.push({variable:c,value:d})}),l.forEach(c=>{const d=jI(c,e,r);i.push({variable:c,value:d})}),o.forEach(c=>{const d=u4(c,e,r);i.push({variable:c,value:d})}),i}function k6(t,e){if(!e)return;let r=0,i=e.length-1;return e.some((s,n)=>t<s?(i=n,!0):(r=n,!1)),[r,i,(t-e[r])/(e[i]-e[r])]}function wQ(t,e,r){const i=["proportional","proportional","proportional"];for(const s of t){const n=s.useSymbolValue?"symbol-value":u4(s,e,r)??"proportional";switch(s.axis){case"width":i[0]=n;break;case"depth":i[1]=n;break;case"height":i[2]=n;break;case"width-and-depth":i[0]=n,i[1]=n;break;case"all":case void 0:case null:i[0]=n,i[1]=n,i[2]=n;break;default:e_(s.axis)}}return i}const Ppe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:wQ,getColor:NI,getOpacity:DI,getRotationAngle:jI,getSize:u4,getSizeForValue:zI,getSizeFromNumberOrVariable:Wr,getSizeRangeAtScale:gQ,getVisualVariableValues:vQ,viewScaleRE:LI},Symbol.toStringTag,{value:"Module"}));var f5;const w1=new be({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),m5=new be({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function pw(t){if(t!=null)return typeof t=="string"||typeof t=="number"?oQ(t):t.type==="size"?Du(t)?t:(delete(t={...t}).type,new Se(t)):void 0}function dw(t,e,r){if(typeof t!="object")return t;const i=new Se;return i.read(t,r),i}let Se=f5=class extends er{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&LI.test(this.valueExpression)}}set index(t){Du(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Du(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return FI(this)}set maxDataValue(t){t&&this.stops&&(N.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(N.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return pw(t)}readMaxSize(t,e,r){return dw(t,e,r)}set minDataValue(t){t&&this.stops&&(N.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(N.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return pw(t)}readMinSize(t,e,r){return dw(t,e,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,r)=>e.value-r.value):t&&(N.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return lQ(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,r,i){if(t==="$view.scale"){if(i?.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;i.messages.push(new M("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:i}))}}else e[r]=t}readValueUnit(t){return t?m5.read(t):null}clone(){return new f5({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Du(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Du(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType==="stops"){const t=this.stops;if(!t)return this;const e=t.map(i=>i.size).reverse(),r=t.length;for(let i=0;i<r;i++)t[i].size=e[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(t=>t.value||0)}};a([u({readOnly:!0})],Se.prototype,"cache",null),a([u({type:w1.apiValues,json:{type:w1.jsonValues,origins:{"web-map":{read:!1}},read:w1.read,write:w1.write}})],Se.prototype,"axis",void 0),a([u()],Se.prototype,"index",null),a([u({type:String,readOnly:!0})],Se.prototype,"inputValueType",null),a([u({type:aQ,json:{write:!0}})],Se.prototype,"legendOptions",void 0),a([u({type:Number,value:null,json:{write:!0}})],Se.prototype,"maxDataValue",null),a([u({type:Number,value:null,json:{write:!0}})],Se.prototype,"maxSize",null),a([xe("maxSize")],Se.prototype,"castMaxSize",null),a([F("maxSize")],Se.prototype,"readMaxSize",null),a([u({type:Number,value:null,json:{write:!0}})],Se.prototype,"minDataValue",null),a([u({type:Number,value:null,json:{write:!0}})],Se.prototype,"minSize",null),a([xe("minSize")],Se.prototype,"castMinSize",null),a([F("minSize")],Se.prototype,"readMinSize",null),a([u({type:String,json:{write:!0}})],Se.prototype,"normalizationField",void 0),a([u({readOnly:!0})],Se.prototype,"arcadeRequired",null),a([u({type:String})],Se.prototype,"scaleBy",void 0),a([u({type:[os],value:null,json:{write:!0}})],Se.prototype,"stops",null),a([u({type:["outline"],json:{write:!0}})],Se.prototype,"target",void 0),a([u({type:String,readOnly:!0})],Se.prototype,"transformationType",null),a([u({type:["size"],json:{type:["sizeInfo"]}})],Se.prototype,"type",void 0),a([u({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Se.prototype,"useSymbolValue",void 0),a([u({type:String,json:{write:!0}})],Se.prototype,"valueExpression",void 0),a([F("valueExpression",["valueExpression","expression"])],Se.prototype,"readValueExpression",null),a([j("web-scene","valueExpression")],Se.prototype,"writeValueExpressionWebScene",null),a([u({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Se.prototype,"valueRepresentation",void 0),a([u({type:m5.apiValues,json:{write:m5.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Se.prototype,"valueUnit",void 0),a([F("valueUnit")],Se.prototype,"readValueUnit",null),Se=f5=a([_("esri.renderers.visualVariables.SizeVariable")],Se);const bQ={color:Mo,size:Se,opacity:Nn,rotation:Io},_Q=new be({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),SQ=/^\[([^\]]+)\]$/i;let O0=class extends Z{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(r=>!!r),e?.length){for(const r of e)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&e.sort((r,i)=>{let s=null;return s=r.target===i.target?0:r.target?1:-1,s});for(let r=0;r<e.length;r++)e[r].index=r;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,r,i){const{rotationExpression:s,rotationType:n}=r,o=s?.match(SQ),l=o?.[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:l})),e)return e.map(c=>{const d=_Q.read(c.type),h=bQ[d];h||(N.getLogger(this).warn(`Unknown variable type: ${d}`),i?.messages&&i.messages.push(new hs("visual-variable:unsupported",`visualVariable of type '${d}' is not supported`,{definition:c,context:i})));const y=new h;return y.read(c,i),y})}writeVariables(e,r){const i=[];for(const s of e){const n=s.toJSON(r);n&&i.push(n)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};a([u()],O0.prototype,"visualVariables",null),O0=a([_("esri.renderers.visualVariables.VisualVariableFactory")],O0);const xQ={base:er,key:"type",typeMap:{opacity:Nn,color:Mo,rotation:Io,size:Se}},ep=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this._vvFactory=new O0}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,n){return this._vvFactory.readVariables(i,s,n)}writeVisualVariables(i,s,n,o){s[n]=this._vvFactory.writeVariables(i,o)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:i})=>i)??!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){return this.visualVariables?.filter(n=>n.type===i&&(typeof s=="string"?n.target===s:s!==!1||!n.target))??[]}async collectVVRequiredFields(i,s){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const o of n)o&&(o.field&&ar(i,s,o.field),o.normalizationField&&ar(i,s,o.normalizationField),o.valueExpression&&($Q(o.valueExpression,i,s)||await lr(i,s,null,o.valueExpression)))}};return a([u({types:[xQ],value:null,json:{write:!0}})],r.prototype,"visualVariables",null),a([F("visualVariables",["visualVariables","rotationType","rotationExpression"])],r.prototype,"readVisualVariables",null),a([j("visualVariables")],r.prototype,"writeVisualVariables",null),r=a([_("esri.renderers.mixins.VisualVariablesMixin")],r),r};function $Q(t,e,r){const i=wj(t);return i!=null&&(ar(e,r,i),!0)}const F6=[252,146,31,255],TQ=[153,153,153,255],MQ={type:"esriSMS",style:"esriSMSCircle",size:6,color:F6,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},IQ={type:"esriSLS",style:"esriSLSSolid",width:.75,color:F6},EQ={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},PQ={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},RQ={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},OQ={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},CQ={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},v2=Tt.fromJSON(MQ),A6=pt.fromJSON(IQ),qI=li.fromJSON(EQ),kQ=Ee.fromJSON(PQ);function Ope(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return v2;case"polyline":return A6;case"polygon":case"extent":return qI}return null}const Cpe=Tt.fromJSON(RQ),kpe=pt.fromJSON(OQ),Fpe=li.fromJSON(CQ),FQ=vr.fromSimpleMarkerSymbol(v2),AQ=ds.fromSimpleLineSymbol(A6),LQ=Ni.fromSimpleFillSymbol(qI),NQ=new jn({symbolLayers:new q([new mr({material:{color:F6},edges:new k$({size:Vi(1),color:new ne(TQ)})})])}),DQ=new ds({symbolLayers:new q([new fr({material:{color:new ne([0,0,0])},size:Vi(1)})])}),jQ=new Ni({symbolLayers:new q([new mr({outline:{color:new ne([0,0,0]),size:Vi(1)}})])});function Ape(t){if(t==null)return null;switch(t.type){case"mesh":return NQ;case"point":case"multipoint":return FQ;case"polyline":return AQ;case"polygon":case"extent":return LQ}return null}const hw="#useCIMFallbackSymbology()",Vl={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function VQ(t,e=Vl){if(!t)return{symbol:null};const{retainId:r=Vl.retainId,ignoreDrivers:i=Vl.ignoreDrivers,hasLabelingContext:s=Vl.hasLabelingContext,retainCIM:n=Vl.retainCIM,cimFallbackEnabled:o=Vl.cimFallbackEnabled}=e;let l=null;if(u6(t))l=t.clone();else if(t.type==="web-style")l=t.clone();else if(t.type==="cim"){const c=t.data?.symbol?.type;switch(c){case"CIMPointSymbol":l=n?t.clone():vr.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(l=DQ.clone(),e?.logWarning?.(hw,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=jQ.clone(),e?.logWarning?.(hw,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new M("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof pt)l=ds.fromSimpleLineSymbol(t);else if(t instanceof Tt)l=vr.fromSimpleMarkerSymbol(t);else if(t instanceof yr)l=vr.fromPictureMarkerSymbol(t);else if(t instanceof li)l=e.geometryType&&e.geometryType==="mesh"?jn.fromSimpleFillSymbol(t):Ni.fromSimpleFillSymbol(t);else{if(!(t instanceof Ee))return{error:new M("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};l=s?ss.fromTextSymbol(t):vr.fromTextSymbol(t)}return r&&l&&l.type!=="cim"&&(l.id=t.id),!i||l.type==="cim"||l instanceof Ut||l.symbolLayers.forEach(c=>c.ignoreDrivers=!0),{symbol:l}}function w2(t,e,r,i){const s=UI(t,{},{context:i,isLabelSymbol:!1});s!=null&&Hr(r,s,e)}function yw(t,e,r,i){const s=UI(t,{},{context:i,isLabelSymbol:!0});s!=null&&(e[r]=s)}function fw(t){return u6(t)||t instanceof Ut}function zQ(t){return t?.type==="polygon-3d"||t?.type==="line-3d"}function UI(t,e,r){if(t==null)return null;const{context:i,isLabelSymbol:s}=r,n=i?.origin,o=i?.messages;if(n==="web-scene"&&!fw(t)){const l=VQ(t,{retainCIM:!0,hasLabelingContext:s});return l.symbol!=null?l.symbol.write(e,i):(o?.push(new M("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:i,error:l.error})),null)}return pf(i?.layer)&&zQ(t)?(o?.push(new M("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${i?.layer?.declaredClass}'.`,{symbol:t,context:i})),null):(n==="web-map"||n==="portal-item"&&!pf(i?.layer))&&fw(t)?(o?.push(new M("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:i})),null):t.write(e,i)}function Lpe(t,e){return gz(t,null,e)}const c4={types:eT,json:{write:{writer:w2},origins:{"web-scene":{types:o7,write:{writer:w2},read:{reader:dh({types:o7})}}}}},L6=r_({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},c4),N6={types:{base:nt,key:"type",typeMap:{"simple-fill":Ao.typeMap["simple-fill"],"picture-fill":Ao.typeMap["picture-fill"],"polygon-3d":Ao.typeMap["polygon-3d"],cim:Ao.typeMap.cim}},json:{write:{writer:w2},origins:{"web-scene":{type:Ni,write:{writer:w2}}}}},C0={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t?.toString()}}}};var g5;let wr=g5=class extends ep(di){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(r=>r.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new g5({description:this.description,label:this.label,symbol:P(this.symbol),visualVariables:P(this.visualVariables),authoringInfo:P(this.authoringInfo)})}};a([u({type:String,json:{write:!0}})],wr.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],wr.prototype,"label",void 0),a([u(L6)],wr.prototype,"symbol",void 0),a([X({simple:"simple"})],wr.prototype,"type",void 0),wr=g5=a([_("esri.renderers.SimpleRenderer")],wr);const qQ=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function v5(t){return t instanceof Z}function mw(t){return t instanceof q?Object.keys(t.items):v5(t)?hi(t).keys():t?Object.keys(t):[]}function b1(t,e){return t instanceof q?t.items[e]:t[e]}function UQ(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Od(t){return t?t.declaredClass:null}function GI(t,e){const r=t.diff;if(r&&typeof r=="function")return r(t,e);const i=mw(t),s=mw(e);if(i.length===0&&s.length===0)return;if(!i.length||!s.length||UQ(t,e))return{type:"complete",oldValue:t,newValue:e};const n=s.filter(y=>!i.includes(y)),o=i.filter(y=>!s.includes(y)),l=i.filter(y=>s.includes(y)&&b1(t,y)!==b1(e,y)).concat(n,o).sort(),c=Od(t);if(c&&qQ.has(c)&&l.length)return{type:"complete",oldValue:t,newValue:e};let d;const h=v5(t)&&v5(e);for(const y of l){const f=b1(t,y),m=b1(e,y);let g;if((h||typeof f!="function"&&typeof m!="function")&&f!==m&&(f!=null||m!=null)){if(r&&r[y]&&typeof r[y]=="function")g=r[y]?.(f,m);else if(f instanceof Date&&m instanceof Date){if(f.getTime()===m.getTime())continue;g={type:"complete",oldValue:f,newValue:m}}else g=typeof f=="object"&&typeof m=="object"&&Od(f)===Od(m)?GI(f,m):{type:"complete",oldValue:f,newValue:m};g!=null&&(d!=null?d.diff[y]=g:d={type:"partial",diff:{[y]:g}})}}return d}function Npe(t,e){if(t==null)return!1;const r=e.split(".");let i=t;for(const s of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const n=i.diff[s];if(!n)return!1;i=n}}return!0}function GQ(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Od(t)!==Od(e)?{type:"complete",oldValue:t,newValue:e}:GI(t,e)}function _1(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const r of e.added)if(!_1(r))return!1;for(const r of e.removed)if(!_1(r))return!1;for(const r of e.changed)if(!_1(r))return!1;return!0}case"partial":for(const e in t.diff)if(!_1(t.diff[e]))return!1;return!0}}var w5;const BQ=Wt()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let id=w5=class extends de(A){static from(t){return Tc(w5,t)}constructor(t){super(t),this.title=null,this.order=null}};a([u({type:String,json:{write:!0}})],id.prototype,"title",void 0),a([X(BQ)],id.prototype,"order",void 0),id=w5=a([_("esri.renderers.support.RendererLegendOptions")],id);const D6=id;let cs=class extends de(A){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};a([u(C0)],cs.prototype,"value",void 0),a([u(C0)],cs.prototype,"value2",void 0),a([u(C0)],cs.prototype,"value3",void 0),cs=a([_("esri.renderers.support.UniqueValue")],cs);let Pn=class extends de(A){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const r=typeof(e=Array.isArray(e)?e:[e])[0];return r==="string"||r==="number"?e.map(i=>new cs({value:i})):r==="object"?e[0]instanceof cs?e:e.map(i=>new cs(i)):null}};a([u({type:String,json:{write:!0}})],Pn.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],Pn.prototype,"label",void 0),a([u(c4)],Pn.prototype,"symbol",void 0),a([u({type:[cs],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new cs({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const r=[];for(const i of t){const s=[i.value,i.value2,i.value3].filter(mi).map(n=>n.toString());r.push(s)}e.values=r}}}})],Pn.prototype,"values",void 0),a([xe("values")],Pn.prototype,"castValues",null),Pn=a([_("esri.renderers.support.UniqueValueClass")],Pn);let Za=class extends de(A){constructor(e){super(e),this.heading=null,this.classes=null}};a([u({type:String,json:{write:!0}})],Za.prototype,"heading",void 0),a([u({type:[Pn],json:{write:{isRequired:!0}}})],Za.prototype,"classes",void 0),Za=a([_("esri.renderers.support.UniqueValueGroup")],Za);var b5;let us=b5=class extends A{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new b5({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${t}`}};a([u({type:String,json:{write:!0}})],us.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],us.prototype,"label",void 0),a([u(L6)],us.prototype,"symbol",void 0),a([u(C0)],us.prototype,"value",void 0),us=b5=a([_("esri.renderers.support.UniqueValueInfo")],us);const gw=new Map;async function WQ(t,e){try{return{data:(await QQ(t,e)).data,baseUrl:hO(t),styleUrl:t}}catch(r){return ki(r),null}}function HQ(t,e,r){const i=e.portal!=null?e.portal:D.getDefault();let s;const n=`${i.url} - ${i.user?.username} - ${t}`,o=gw.get(n);if(o)return o;const l=ZQ(t,i,r).then(c=>(s=c,c.fetchData())).then(c=>({data:c,baseUrl:s.itemUrl??"",styleName:t}));return gw.set(n,l),l}function ZQ(t,e,r){return e.load(r).then(()=>{const i=new rt({disableExtraQuery:!0,query:`owner:${vw} AND type:${ww} AND typekeywords:"${t}"`});return e.queryItems(i,r)}).then(({results:i})=>{let s=null;const n=t.toLowerCase();if(i&&Array.isArray(i)){for(const o of i)if(o.typeKeywords?.some(c=>c.toLowerCase()===n)&&o.type===ww&&o.owner===vw){s=o;break}}if(!s)throw new M("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(r)})}function JQ(t,e,r){return t?.styleUrl!=null?WQ(t.styleUrl,r):t?.styleName!=null?HQ(t.styleName,e,r):Promise.reject(new M("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function zpe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function qpe(t,e){for(const r of e)switch(r){case"cim":if(t.cimRef)return{format:r,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const i=ky(t,"gltf_basisu");if(i)return{format:r,url:i};break}case"web-gltf":{const i=ky(t,"gltf");if(i)return{format:r,url:i};break}case"web":{const i=ky(t,"gltf");if(i)return{format:"web-gltf",url:i};if(t.webRef)return{format:r,url:encodeURI(t.webRef)};break}}}function ky(t,e){if(!re("enable-feature:force-wosr"))return t.formatInfos?.find(r=>r.type===e)?.href}function QQ(t,e){const r={responseType:"json",query:{f:"json"},...e};return Le(Nd(t),r)}const vw="esri_en",ww="Style",Upe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var sd;const bw="uvInfos-watcher",_w="uvGroups-watcher",YQ=",",KQ=Zr(us);function XQ(t){const{field1:e,field2:r,field3:i,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=t,l=!(!e||!r);return[{classes:(n??[]).map(c=>{const{symbol:d,label:h,value:y,description:f}=c,[m,g,v]=l?y?.toString()?.split(s||"")||[]:[y],b=[];return(e||o)&&b.push(m),r&&b.push(g),i&&b.push(v),{symbol:d,label:h,values:[b],description:f}})}]}function zl(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let ke=sd=class extends ep(di){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,r){if(!e&&!r)return;if(!e||!r)return{type:"complete",oldValue:e,newValue:r};let i=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<r.length;n++){const o=e.find(l=>l.value===r[n].value);o?GQ(o,r[n])?(s.changed.push({type:"complete",oldValue:o,newValue:r[n]}),i=!0):s.unchanged.push({oldValue:o,newValue:r[n]}):(s.added.push(r[n]),i=!0)}for(let n=0;n<e.length;n++)r.find(o=>o.value===e[n].value)||(s.removed.push(e[n]),i=!0);return i?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:I2(t)}writeField(t,e,r,i){typeof t=="string"?e[r]=t:i?.messages?i.messages.push(new M("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):N.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,r){return r.portal||D.getDefault()}readStyleOrigin(t,e,r){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const i=ph(e.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(t,e,r,i){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Ld(t.styleUrl,i))}set uniqueValueGroups(t){this.styleOrigin?N.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?N.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){if(this.styleOrigin)return void N.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof t=="object"?KQ(t):new us({value:t,symbol:tT(e)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[zl(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void N.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let r=0;r<e.length;r++){const i=e[r];if(String(i.value)===String(t)){delete this._valueInfoMap[zl(t)],e.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let r=e;return this.valueExpression&&e?.arcade==null&&(r={...r,arcade:await gl()}),this._getUniqueValueInfo(t,r)}getSymbol(t,e){return this.valueExpression&&e?.arcade==null?void N.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(t,e)?.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let r=e;if(this.valueExpression&&r?.arcade==null){const s=await gl(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}return this._getUniqueValueInfo(t,r)?.symbol||this.defaultSymbol}get symbols(){const t=[];if(this._isInfosSource)for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);else for(const e of this.uniqueValueGroups??[])for(const r of e.classes??[])r.symbol&&t.push(r.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce((i,s)=>i+s.getMeshHash(),"");return`${t}.${e}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new sd({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:P(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:P(this.visualVariables),legendOptions:P(this.legendOptions),authoringInfo:P(this.authoringInfo),backgroundFillSymbol:P(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=P(this.uniqueValueInfos),r=P(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(P(this.styleOrigin))),Object.freeze(e),Object.freeze(r)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",r),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const r=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(r)}async collectSymbolFields(t,e){const r=[...this.symbols.map(i=>i.collectRequiredFields(t,e)),lr(t,e,null,this.valueExpression)];ar(t,e,this.field),ar(t,e,this.field2),ar(t,e,this.field3),await Promise.all(r)}populateFromStyle(){return JQ(this.styleOrigin,{portal:this.portal}).then(t=>{const e=[];return this._valueInfoMap={},t?.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const i=new Ut({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new us({value:r.name,symbol:i});e.push(s),this._valueInfoMap[zl(r.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",YQ)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[zl(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(bw);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const r of t)e.push(ae(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,s)=>{i!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,bw)}}_watchUniqueValueGroups(){this.removeHandles(_w);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const r of t){e.push(ae(()=>({classes:r.classes}),(i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])e.push(ae(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,_w)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:r,field3:i,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!e||!r);for(const c of n)for(const d of c.classes??[]){const{symbol:h,label:y,values:f,description:m}=d;for(const g of f??[]){const{value:v,value2:b,value3:S}=g,$=[v];r&&$.push(b),i&&$.push(S);const E=l?$.join(s||""):$[0]??void 0;t.push(new us({symbol:h,label:y,value:E,description:m}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:r,valueExpression:i,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!e&&!i||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!r),l=n.map(d=>{const{symbol:h,label:y,value:f,description:m}=d,[g,v,b]=o?f?.toString()?.split(s||"")||[]:[f];return new Pn({symbol:h,label:y,description:m,values:[new cs({value:g,value2:v,value3:b})]})}),c=[new Za({classes:l})];t&&Object.freeze(c),this._set("uniqueValueGroups",c),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=e??{};let l=this._cache.compiledFunc;const c=n.arcadeUtils;if(!l){const h=c.createSyntaxTree(this.valueExpression);l=c.createFunction(h),this._cache.compiledFunc=l}const d=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._valueInfoMap[zl(d)]}_getUnqiueValueInfoForFields(t){const e=this.field,r=t.attributes;let i;if(this.field2){const s=this.field2,n=this.field3,o=[];e&&o.push(r[e]),s&&o.push(r[s]),n&&o.push(r[n]),i=o.join(this.fieldDelimiter||"")}else e&&(i=r[e]);return this._valueInfoMap[zl(i)]}static fromPortalStyle(t,e){const r=new sd(e?.properties);r._set("styleOrigin",Object.freeze({styleName:t})),r._set("portal",e?.portal||D.getDefault());const i=r.populateFromStyle();return i.catch(s=>{N.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)}),i}static fromStyleUrl(t,e){const r=new sd(e?.properties);r._set("styleOrigin",Object.freeze({styleUrl:t}));const i=r.populateFromStyle();return i.catch(s=>{N.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),i}};a([u({readOnly:!0})],ke.prototype,"_cache",null),a([X({uniqueValue:"unique-value"})],ke.prototype,"type",void 0),a([u(N6)],ke.prototype,"backgroundFillSymbol",void 0),a([u({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ke.prototype,"field",null),a([xe("field")],ke.prototype,"castField",null),a([j("field")],ke.prototype,"writeField",null),a([u({type:String,value:null,json:{write:!0}})],ke.prototype,"field2",null),a([u({type:String,value:null,json:{write:!0}})],ke.prototype,"field3",null),a([u({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],ke.prototype,"orderByClassesEnabled",void 0),a([u({type:String,value:null,json:{write:!0}})],ke.prototype,"valueExpression",null),a([u({type:String,json:{write:!0}})],ke.prototype,"valueExpressionTitle",void 0),a([u({type:D6,json:{write:!0}})],ke.prototype,"legendOptions",void 0),a([u({type:String,json:{write:!0}})],ke.prototype,"defaultLabel",void 0),a([u(r_({...c4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ke.prototype,"defaultSymbol",null),a([u({type:String,value:null,json:{write:!0}})],ke.prototype,"fieldDelimiter",null),a([u({type:D,readOnly:!0})],ke.prototype,"portal",void 0),a([F("portal",["styleName"])],ke.prototype,"readPortal",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ke.prototype,"styleOrigin",void 0),a([F("styleOrigin",["styleName","styleUrl"])],ke.prototype,"readStyleOrigin",null),a([j("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ke.prototype,"writeStyleOrigin",null),a([u({type:[Za],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,r)=>(e.uniqueValueGroups||XQ(e)).map(i=>Za.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ke.prototype,"uniqueValueGroups",null),a([u({type:[us],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],ke.prototype,"uniqueValueInfos",null),ke=sd=a([_("esri.renderers.UniqueValueRenderer")],ke);var _5,gc;let yt=(gc=class extends A{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10}clone(){return new _5(P({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},_5=gc,gc);a([u({type:[String],json:{write:!0}})],yt.prototype,"attachmentTypes",void 0),a([u({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],yt.prototype,"attachmentsWhere",void 0),a([u({type:Boolean,json:{write:!0}})],yt.prototype,"cacheHint",void 0),a([u({type:[String],json:{write:!0}})],yt.prototype,"keywords",void 0),a([u({type:[String],json:{write:!0}})],yt.prototype,"globalIds",void 0),a([u({json:{write:!0}})],yt.prototype,"name",void 0),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],yt.prototype,"num",void 0),a([u({type:[Number],json:{write:!0}})],yt.prototype,"objectIds",void 0),a([u({type:[String],json:{write:!0}})],yt.prototype,"orderByFields",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],yt.prototype,"returnMetadata",void 0),a([u({type:[Number],json:{write:!0}})],yt.prototype,"size",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],yt.prototype,"start",void 0),a([j("start"),j("num")],yt.prototype,"writeStart",null),a([u({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],yt.prototype,"where",void 0),yt=_5=a([_("esri.rest.support.AttachmentQuery")],yt),yt.from=Zr(yt);const BI=Wt()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),Sw="percent-of-total",xw="field",Gpe=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const s=!!this.normalizationField,n=this.normalizationTotal!=null;return s||n?(i=s&&xw||n&&Sw||null,s&&n&&N.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==xw&&i!==Sw||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return a([u({type:String,json:{name:"parameters.normalizationField",write:!0}})],r.prototype,"normalizationField",void 0),a([u({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],r.prototype,"normalizationMaxValue",void 0),a([u({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],r.prototype,"normalizationMinValue",void 0),a([u({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],r.prototype,"normalizationTotal",void 0),a([X(BI,{name:"parameters.normalizationType"})],r.prototype,"normalizationType",null),r=a([_("esri.rest.support.NormalizationBinParametersMixin")],r),r};var S5,vc;let De=(vc=class extends A{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,r){r.historicMoment=e&&e.getTime()}writeStart(e,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(r.definitionExpression="1=1")}clone(){return new S5(P({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},S5=vc,vc);a([u({type:Boolean,json:{write:!0}})],De.prototype,"cacheHint",void 0),a([u({type:gr,json:{write:!0}})],De.prototype,"dynamicDataSource",void 0),a([u({type:String,json:{write:!0}})],De.prototype,"gdbVersion",void 0),a([u({type:Number,json:{write:!0}})],De.prototype,"geometryPrecision",void 0),a([u({type:Date})],De.prototype,"historicMoment",void 0),a([j("historicMoment")],De.prototype,"_writeHistoricMoment",null),a([u({type:Number,json:{write:!0}})],De.prototype,"maxAllowableOffset",void 0),a([u({json:{write:!0}})],De.prototype,"objectIds",void 0),a([u({type:[String],json:{write:!0}})],De.prototype,"orderByFields",void 0),a([u({type:[String],json:{write:!0}})],De.prototype,"outFields",void 0),a([u({type:B,json:{read:{source:"outSR"},write:{target:"outSR"}}})],De.prototype,"outSpatialReference",void 0),a([u({json:{write:!0}})],De.prototype,"relationshipId",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],De.prototype,"start",void 0),a([j("start"),j("num")],De.prototype,"writeStart",null),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],De.prototype,"num",void 0),a([u({json:{write:!0}})],De.prototype,"returnGeometry",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],De.prototype,"returnM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],De.prototype,"returnZ",void 0),a([u({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],De.prototype,"where",void 0),De=S5=a([_("esri.rest.support.RelationshipQuery")],De),De.from=Zr(De);const $w=Object.freeze(Object.defineProperty({__proto__:null,get default(){return De}},Symbol.toStringTag,{value:"Module"})),x5=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function eY(t,e,r,i){const s=await ia(t);if(await j6(t,e,i),!s.addAttachment)throw new M(i,"Layer source does not support addAttachment capability");return s.addAttachment(e,r)}function j6(t,e,r){const{attributes:i}=e,{objectIdField:s}=t;return t.capabilities?.data?.supportsAttachment?e?i?s&&i[s]?Promise.resolve():Promise.reject(new M(r,`feature is missing the identifying attribute ${s}`)):Promise.reject(new M(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new M(r,"A feature is required to add/delete/update attachments")):Promise.reject(new M(r,"this layer doesn't support attachments"))}async function tY(t,e,r,i,s){const n=await ia(t);if(await j6(t,e,s),!n.updateAttachment)throw new M(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(e,r,i)}async function rY(t,e,r){const{applyEdits:i}=await L(()=>import("./money-tides-editingSupport-BGrt_oPJ.js"),__vite__mapDeps([323,3,1,2,4,5,10,11,12])),s=await t.load();let n=r;return s.type==="feature"&&s.infoFor3D&&e.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await $Y(s,e.deleteFeatures,s.globalIdField)}),i(s,s.source,e,r)}async function iY(t,e,r){const{uploadAssets:i}=await L(()=>import("./money-tides-editingSupport-BGrt_oPJ.js"),__vite__mapDeps([323,3,1,2,4,5,10,11,12])),s=await t.load();return i(s,s.source,e,r)}async function sY(t,e,r,i){const s=await ia(t);if(await j6(t,e,i),!s.deleteAttachments)throw new M(i,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,r)}async function nY(t,e,r){const i=(await t.load({signal:e?.signal})).source;if(!i.fetchRecomputedExtents)throw new M(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(e)}async function oY(t,e,r,i){e=yt.from(e),await t.load();const s=t.source,n=t.capabilities;if(!n?.data?.supportsAttachment)throw new M(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:c,num:d,size:h,start:y,where:f}=e;if(!n?.operations?.supportsQueryAttachments&&(o?.length>0||c?.length>0||h?.length>0||d||y||f))throw new M(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(l?.length||c?.length||f))throw new M(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new M(i,"Layer source does not support queryAttachments capability",e);return!n?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),s.queryAttachments(e)}async function aY(t,e,r,i){const s=await ia(t);if(!s.queryObjectIds)throw new M(i,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(H.from(e)??t.createQuery(),r)}async function lY(t,e,r,i){const s=await ia(t);if(!s.queryFeatureCount)throw new M(i,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(H.from(e)??t.createQuery(),r)}async function uY(t,e,r,i){const s=await ia(t);if(!s.queryExtent)throw new M(i,"Layer source does not support queryExtent capability");return s.queryExtent(H.from(e)??t.createQuery(),r)}async function cY(t,e,r,i){const s=await ia(t);if(!s.queryRelatedFeatures)throw new M(i,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(De.from(e),r)}async function pY(t,e,r,i){const s=await ia(t);if(!s.queryRelatedFeaturesCount)throw new M(i,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(De.from(e),r)}async function dY(t){const e=t.source;if(e?.refresh)try{const{dataChanged:r,updates:i}=await e.refresh();if(i!=null&&(t.sourceJSON={...t.sourceJSON,...i},t.read(i,{origin:"service",url:t.parsedUrl})),r)return!0}catch{}if(t.definitionExpression)try{return(await Bx(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function hY(t){const e=new H;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const r=t.capabilities?.query;r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference);const i=t.capabilities?.data;i?.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i?.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:s,timeExtent:n}=t;return e.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,e}function WI(t){const{globalIdField:e,fields:r}=t;if(e)return e;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function HI(t){const{objectIdField:e,fields:r}=t;if(e)return e;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function yY(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function fY(t,e,r,i){const s=r?.feature,n=!!t.subtypes?.length;if(n&&!r?.excludeImpliedDomains){const c=gY(t,e);if(c)return c}const o=n&&mY(t,s);if(o){const c=o?.domains?.[e];return c?.type==="inherited"?i:c}const l=z6(t.types,t.typeIdField,s);if(l){const c=l.domains&&l.domains[e];if(c&&c?.type!=="inherited")return c}if(i)return i;if(!r?.excludeImpliedDomains){const c=vY(t,e);if(c)return c}return null}function mY(t,e){const{subtypes:r,subtypeField:i}=t;if(!e?.attributes||!r?.length||!i)return null;const s=e.attributes[i];return s==null?null:r.find(n=>n.code===s)}function gY(t,e){const{fieldsIndex:r,subtypeField:i}=t,{name:s,type:n}=r.get(e)??{};if(!s)return null;if((i&&r.get(i)?.name)===s&&t.subtypes?.length){const o=t.subtypes.map(l=>new Wa({code:ZI(l.code,n),name:l.name}));if(o?.length)return new No({codedValues:o})}return null}function vY(t,e){const{fieldsIndex:r}=t,{name:i,type:s}=r.get(e)??{};if(!i)return null;if(("typeIdField"in t?r.get(t.typeIdField)?.name:null)===i&&"types"in t&&t.types?.length){const n=t.types.map(o=>new Wa({code:ZI(o.id,s),name:o.name}));return new No({codedValues:n})}return null}function ZI(t,e){return e?n$({type:e})&&typeof t=="number"?`${t}`:Hj({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function ia(t){return(await t.load()).source}async function Bpe(t,e){if(!dt)return;const r=dt.findCredential(t);if(r)return r.userId;let i;try{const s=await xg(t,e);s&&(i=await dt.checkSignInStatus(`${s}/sharing`))}catch{}return i?i.userId:null}async function JI(t,e){if(!dt||dt.findCredential(t))return;let r;try{const i=await xg(t,e);i&&(r=await dt.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=e!=null?e.signal:null;await dt.getCredential(t,{signal:i})}catch{}}async function wY(t,e,r){const i=t.parsedUrl?.path;i&&t.authenticationTriggerEvent===e&&await JI(i,r)}async function Wpe(t){const e=t.parsedUrl?.path;e&&bY(t)&&await JI(e)}function bY(t){return _Y(t)&&("serviceDefinitionExpression"in t&&b2(t.serviceDefinitionExpression)||"definitionExpression"in t&&b2(t.definitionExpression))}function _Y(t){return!(!U_(t)||!t.capabilities?.query.supportsCurrentUser)}function b2(t){return!!t?.toLowerCase().includes("current_user")}function SY(t){return!k0(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const Fy=dh({types:eT});function V6(t,e){if(t.defaultSymbol)return t.types?.length?new ke({defaultSymbol:Fy(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:Fy(r.symbol,r,e)}))}):new wr({symbol:Fy(t.defaultSymbol,t,e)})}function xY(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const r=t.editingInfo?.lastEditDate?.getTime();return r==null||(e*=1e3,Date.now()-r<e)}async function $Y(t,e,r){if(e==null)return null;const i=[],{objectIdField:s}=t;if(e.forEach(d=>{let h=null;if("attributes"in d){const{attributes:y}=d;h={globalId:y[r],objectId:y[s]!=null&&y[s]!==-1?y[s]:null}}else h={globalId:d.globalId,objectId:d.objectId!=null&&d.objectId!==-1?d.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||i.push(h.globalId))}),i.length===0)return null;const n=t.createQuery();n.where=i.map(d=>`${r}='${d}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,r],n.cacheHint=!1;const o=await BO(WJ(t,n));if(!o.ok)return null;const l=new Map,c=o.value.features;for(const d of c){const h=d.attributes[r],y=d.attributes[s];h!=null&&y!=null&&y!==-1&&l.set(yO(h),y)}return l}function z6(t,e,r){if(!e||!r||!t)return null;const i=r.getAttribute(e);return i==null?null:t.find(s=>{const{id:n}=s;return n!=null&&n.toString()===i.toString()})??null}function k0(t){return t.sourceJSON?.isMultiServicesView||TY(t)}function TY(t){return!!t.sourceJSON?.capabilities?.toLowerCase().split(",").map(e=>e.trim()).includes("map")}function MY(t,e,r){const i=e?.queryAttributeBins;if(!e?.operations?.supportsQueryBins||!i)throw new M(r,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new M(r,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!i.supportsNormalization||!Tw(t.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new M(r,"Layer source does not support normalization binning");break;case"date":if(!i.supportsDate)throw new M(r,"Layer source does not support date binning");if(t.binParameters.snapToData&&!i.supportsSnapToData)throw new M(r,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!i.supportsReturnFullIntervalBin)throw new M(r,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new M(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new M(r,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!i.supportsNormalization||!Tw(t.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new M(r,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!i.supportsStackBy)throw new M(r,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!i.supportsSplitBy)throw new M(r,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!i.supportsFirstDayOfWeek)throw new M(r,"Layer source does not support firstDayOfWeek binning");const s=i?.supportedStatistics;if(t.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const l=n.get(o);if(l&&!s[l])throw new M(r,`Layer source does not support ${o} statistic type`)}}}function Tw(t,e){return t!=null&&!!e?.[BI.toJSON(t)]}let Tu=class extends de(A){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};a([u({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Tu.prototype,"shapeAreaField",void 0),a([u({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Tu.prototype,"shapeLengthField",void 0),a([u({type:String,json:{read:t=>LC.read(t)||NC.read(t)}})],Tu.prototype,"units",void 0),Tu=a([_("esri.layers.support.GeometryFieldsInfo")],Tu);var $5;let Va=$5=class extends A{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new q}clone(){return new $5({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};a([u({type:String,json:{write:{isRequired:!0}}})],Va.prototype,"floorField",void 0),a([u({json:{read:!1,write:!1}})],Va.prototype,"viewAllMode",void 0),a([u({json:{read:!1,write:!1}})],Va.prototype,"viewAllLevelIds",void 0),Va=$5=a([_("esri.layers.support.LayerFloorInfo")],Va);function IY(t){const{nonStandardUrlAllowed:e=!1,separator:r}=t??{},i=P(C6),s=i.json?.write;return typeof s=="object"&&s&&(s.writer=function(n,o,l,c){fO(this,n,r,o,c)}),{...i,set:function(n){if(n==null)return void this._set("url",n);const o=mO({layer:this,url:n,nonStandardUrlAllowed:e,logger:N.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}}}function EY(t,e){const{separator:r}=e??{},i=Hs(t.url);return i!=null&&(t.dynamicDataSource!=null?i.path=cl(i.path,"dynamicLayer"):t.layerId!=null&&(i.path=cl(i.path,r??"",t.layerId.toString()))),i}const Mw=new be({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Iw=new be({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Fr=class extends de(A){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};a([u({json:{read:Mw.read,write:Mw.write}})],Fr.prototype,"cardinality",void 0),a([u({json:{name:"catalogID"}})],Fr.prototype,"catalogId",void 0),a([u({json:{read:!0,write:!0}})],Fr.prototype,"composite",void 0),a([u({json:{read:!0,write:!0}})],Fr.prototype,"id",void 0),a([u({json:{read:!0,write:!0}})],Fr.prototype,"keyField",void 0),a([u({json:{read:!0,write:!0}})],Fr.prototype,"keyFieldInRelationshipTable",void 0),a([u({json:{read:!0,write:!0}})],Fr.prototype,"name",void 0),a([u({json:{read:!0,write:!0}})],Fr.prototype,"relatedTableId",void 0),a([u({json:{read:!0,write:!0}})],Fr.prototype,"relationshipTableId",void 0),a([u({json:{read:Iw.read,write:Iw.write}})],Fr.prototype,"role",void 0),Fr=a([_("esri.layers.support.Relationship")],Fr);const PY=[["binary","application/octet-stream","bin",""]];function Jpe(t,e){return eE(e.name,t?.supportedFormats??[])!=null}function Qpe(t,e){if(!t)return!1;const r=RY(e,t.supportedFormats??[]);return r!=null&&t.editFormats.includes(r)}function QI(t,e){return U6(kY(t,e))}function YI(t,e){return U6(eE(t,e))}function Ype(t,e){return tE(CY(t,e))}function RY(t,e){return YI(t.name,e)??QI(t.type,e)}function p4(t,e,r){return QI(t,r)??YI(e,r)}function KI({supportedFormats:t}){return p4("model/gltf-binary","glb",t)}function Kpe(t){const e=KI(t);return e!=null&&t.editFormats.includes(e)}function OY({supportedFormats:t}){return p4("model/gltf+json","gltf",t)}function XI(t){if(!t)return null;const e=KI(t),r=OY(t);let i=null;for(const s of t.queryFormats){if(s===e)return s;s===r&&(i=s)}return i}function Xpe({supportedFormats:t}){return p4("application/esri3do-SR_world","wld",t)}function ede({supportedFormats:t}){return p4("application/esri3do-SR_prj","prj",t)}function q6(t){return[...PY,...t]}function CY(t,e){return q6(e).find(r=>U6(r)===t)}function kY(t,e){const r=t.toLowerCase();return q6(e).find(i=>tE(i)===r)}function eE(t,e){const r=t.toLowerCase();return q6(e).find(i=>FY(i).some(s=>r.endsWith(s)))}function U6(t){return t?.[0]}function tE(t){return t?.[1].toLowerCase()}function FY(t){return t?.[2].split(",").map(e=>e.toLowerCase())??[]}function tde(t){return t.tables?.find(e=>e.role==="assetMaps")}function G(t,e,r){return!!rE(t,e,r)}function Mu(t,e,r){return rE(t,e,r)}function rE(t,e,r){return t&&t.hasOwnProperty(e)?t[e]:r}const AY={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function LY(t){const e=t?.supportedSpatialAggregationStatistics?.map(r=>r.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function Nh(t,e){return!!t?.supportedOperationsWithCacheHint?.map(i=>i.toLowerCase())?.includes(e.toLowerCase())}function NY(t){const e=t?.supportedStatisticTypes?.map(r=>r.toLowerCase());return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_cont"),percentileDiscrete:!!e?.includes("percentile_disc"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function DY(t){const e=t?.supportedNormalizationTypes?.map(r=>r.toLowerCase());return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function G6(t,e){return{analytics:jY(t),attachment:VY(t),data:zY(t),metadata:qY(t),operations:UY(t.capabilities,t,e),query:GY(t,e),queryAttributeBins:HY(t),queryRelated:BY(t),queryTopFeatures:WY(t),editing:ZY(t)}}function jY(t){return{supportsCacheHint:Nh(t.advancedQueryCapabilities,"queryAnalytics")}}function VY(t){const e=t.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Nh(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:G(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:G(t,"supportsAttachmentsResizing",!1),supportsTypeWildcard:G(t.advancedQueryCapabilities,"supportsQueryAttachmentWithTypeWildcard",!1)};return e&&Array.isArray(e)&&e.forEach(i=>{const s=AY[i.name];s&&(r[s]=!!i.isEnabled)}),r}function zY(t){return{isVersioned:G(t,"isDataVersioned",!1),isBranchVersioned:G(t,"isDataBranchVersioned",!1),supportsAttachment:G(t,"hasAttachments",!1),supportsM:G(t,"hasM",!1),supportsZ:G(t,"hasZ",!1)}}function qY(t){return{supportsAdvancedFieldProperties:G(t,"supportsFieldDescriptionProperty",!1)}}function UY(t,e,r){const i=t?.toLowerCase().split(",").map(f=>f.trim())??[],s=r?Ec(r):null,n=i.includes(s?.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!e.datesInUnknownTimezone&&e.uniqueIdInfo?.OIDFieldContainsHashValue!==!0;let l=o&&i.includes("create"),c=o&&i.includes("delete"),d=o&&i.includes("update");const h=i.includes("changetracking"),y=e.advancedQueryCapabilities;return o&&!(l||c||d)&&(l=c=d=!0),{supportsCalculate:G(e,"supportsCalculate",!1),supportsTruncate:G(e,"supportsTruncate",!1),supportsValidateSql:G(e,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:c,supportsEditing:o,supportsChangeTracking:h,supportsQuery:n,supportsQueryAnalytics:G(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:G(y,"supportsQueryAttachments",!1),supportsQueryBins:G(y,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryPivot:G(y,"supportsQueryPivot",!1),supportsQueryTopFeatures:G(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:G(e,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:d,supportsExceedsLimitStatistics:G(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:G(e,"supportsAsyncConvert3D",!1)}}function GY(t,e){const r=t.advancedQueryCapabilities,i=t.ownershipBasedAccessControlForFeatures,s=t.archivingInfo,n=t.currentVersion,o=e?.includes("MapServer"),l=!o||n>=re("mapserver-pbf-version-support"),c=i_(e),d=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:Mu(t,"maxRecordCount",void 0),maxRecordCountFactor:Mu(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:Mu(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:Mu(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:LY(r),supportsCacheHint:G(r,"supportsQueryWithCacheHint",!1)||Nh(r,"query"),supportsCentroid:G(r,"supportsReturningGeometryCentroid",!1),supportsCentroidOnDegeneratedQuantizedGeometry:c||e==null,supportsCompactGeometry:c,supportsCurrentUser:G(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:G(r,"supportsDefaultSR",!1),supportsDegeneratedQuantizedGeometry:G(r,"supportsDegeneratedQuantizedGeometry",!1),supportsDisjointSpatialRelationship:G(r,"supportsDisjointSpatialRel",!1),supportsDistance:G(r,"supportsQueryWithDistance",!1),supportsDistinct:G(r,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:G(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&d.has("pbf"),supportsFullTextSearch:G(r,"supportsFullTextSearch",!1),supportsGeometryProperties:G(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:G(r,"supportsHavingClause",!1),supportsHistoricMoment:G(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:G(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:G(r,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:G(r,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:G(r,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:G(r,"supportsPercentileStatistics",!1),supportsQuantization:G(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:G(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:G(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:G(i,"allowOthersToQuery",!0),supportsQueryGeometry:G(t,"supportsReturningQueryGeometry",!1),supportsResultType:G(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!XI(t.infoFor3D),supportsSpatialAggregationStatistics:G(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:G(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:G(t,"useStandardizedQueries",!1),supportsStatistics:G(r,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:G(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:G(r,"supportsTrueCurve",!1),tileMaxRecordCount:Mu(t,"tileMaxRecordCount",void 0)}}function BY(t){const e=t.advancedQueryCapabilities,r=G(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:G(e,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:Nh(e,"queryRelated")}}function WY(t){return{supportsCacheHint:Nh(t.advancedQueryCapabilities,"queryTopFilter")}}function HY(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:G(e,"supportsDateBin",!1),supportsFixedInterval:G(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:G(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:G(e,"supportsFixedBoundariesBin",!1),supportsStackBy:G(e,"supportsStackBy",!1),supportsSplitBy:G(e,"supportsSplitBy",!1),supportsSnapToData:G(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:G(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:G(e,"supportsFirstDayOfWeek",!1),supportsNormalization:G(e,"supportsNormalization",!1),supportedStatistics:NY(e),supportedNormalizationTypes:DY(e)}}function ZY(t){const e=t.ownershipBasedAccessControlForFeatures,r=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:G(t,"allowGeometryUpdates",!0),supportsGlobalId:G(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:G(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:G(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:G(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:G(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:G(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:G(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:G(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:G(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:G(r,"supportsAsyncApplyEdits",!1),zDefault:Mu(t,"zDefault",void 0)}}function rde(t){return{operations:{supportsAppend:G(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:G(t,"supportsExportClip",!1),supportsExportFrameset:G(t,"supportsExportFrameset",!1),supportsMensuration:G(t,"supportsMensuration",!1),supportsPreviews:G(t,"supportsPreviews",!1),supportsUpdate:G(t,"supportsUpdate",!1)}}}let wn=class extends de(A){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const r={};for(const i of Object.keys(e))r[i]=Y2(e[i]);return r}writeDomains(e,r){if(!e)return;const i={};for(const s of Object.keys(e))e[s]&&(i[s]=e[s]?.toJSON());r.domains=i}};a([u({type:Number,json:{write:!0}})],wn.prototype,"code",void 0),a([u({type:Object,json:{write:!0}})],wn.prototype,"defaultValues",void 0),a([u({json:{write:!0}})],wn.prototype,"domains",void 0),a([F("domains")],wn.prototype,"readDomains",null),a([j("domains")],wn.prototype,"writeDomains",null),a([u({type:String,json:{write:!0}})],wn.prototype,"name",void 0),wn=a([_("esri.layers.support.Subtype")],wn);async function JY(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Ou(t);const r=B.WGS84;return await Ug(e,r),Yo(t,r)}function QY(t,e){if(!B6(t,e)){const r=t.typeKeywords;r?r.push(e):t.typeKeywords=[e]}}function B6(t,e){return!!t.typeKeywords?.includes(e)}function Ew(t){return B6(t,iE.HOSTED_SERVICE)}function YY(t,e){const r=t.typeKeywords;if(r){const i=r.indexOf(e);i>-1&&r.splice(i,1)}}function sde(t,e,r){r?QY(t,e):YY(t,e)}async function nde(t){const e=t.clone().normalize();let r;if(e.length>1)for(const i of e)r?i.width>r.width&&(r=i):r=i;else r=e[0];return JY(r)}const iE={CHARTS:"Charts",DYNAMIC:"Dynamic",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function KY(t){const{portal:e,isOrgItem:r,itemControl:i}=t,s=e.user?.privileges;let n=!s||s.includes("features:user:edit"),o=!!r&&!!s?.includes("features:user:fullEdit");const l=i==="update"||i==="admin";return l?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:l}}}const XY=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(q.ofType(Cs)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=B.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(i,s){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:n,operations:o,editing:l}=i;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||o.supportsEditing&&!(l.supportsUpdateByOthers&&l.supportsUpdateByAnonymous&&l.supportsDeleteByOthers&&l.supportsDeleteByAnonymous))return"load"}if(b2(this.serviceDefinitionExpression)||b2(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(xY(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const s=this.editFieldsInfo;return(s?.creatorField||s?.editorField)&&i?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(i,s){return G6(s,this.url)}readEditingInfo(i,s){const{editingInfo:n}=s;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const s=P(i),{operations:n,editing:o}=s;return k0(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),s):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,s):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=o.supportsGeometryUpdate=!0),s)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,s){return WI(s)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||k0(this))return!1;const{operations:s,editing:n}=i;return s.supportsEditing&&!(s.supportsAdd&&s.supportsDelete&&s.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:s,editing:n}=i;return k0(this)?!s.supportsQuery:!(s.supportsAdd&&s.supportsDelete&&s.supportsEditing&&s.supportsQuery&&s.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,s){return s.type==="Table"}readMaxScale(i,s){return s.effectiveMaxScale||i||0}readMinScale(i,s){return s.effectiveMinScale||i||0}readObjectIdFieldFromService(i,s){return HI(s)}get parsedUrl(){return EY(this)}readServiceDefinitionExpression(i,s){return s.definitionQuery||s.definitionExpression}readUniqueIdFields(i,s){return s.uniqueIdInfo?.OIDFieldContainsHashValue?s.uniqueIdInfo.fields:null}readVersion(i,s){return yY(s)}get isUrlHostModified(){const{loaded:i,url:s,_isUrlHostModified:n}=this;if(n)return!0;if(!i||!s||this.originIdOf("url")<7)return!1;const o=this.sourceJSON?.preferredHost;if(!o||!S4(s,`https://${o}`,!0))return!1;for(let l=6;l>=3;l--){const c=this.getAtOrigin("url",B0(l));if(c)return!S4(s,c,!0)}return!1}applyPreferredHost(i){const{url:s,portalItem:n}=this;!s||df(n)}applyHostFromPortalItem(){const{url:i,portalItem:s}=this;if(!i||this.originIdOf("url")===7||!s?.url||!df(s)||!B6(s,iE.HOSTED_SERVICE)||S4(i,s.url,!0)||!this._isUrlHostModificationEnabled)return;const n=gO(s.url);this._set("url",vO(i,n)),this._isUrlHostModified=!0}};return a([u({readOnly:!0})],r.prototype,"authenticationTriggerEvent",null),a([u({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0),a([u({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],r.prototype,"capabilities",void 0),a([F("service","capabilities")],r.prototype,"readCapabilitiesFromService",null),a([u(Fc("dateFieldsTimeReference"))],r.prototype,"dateFieldsTimeZone",void 0),a([u({type:Boolean})],r.prototype,"datesInUnknownTimezone",void 0),a([u({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],r.prototype,"definitionExpression",void 0),a([u({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0),a([u({readOnly:!0,type:vn})],r.prototype,"editFieldsInfo",void 0),a([u({readOnly:!0})],r.prototype,"editingInfo",void 0),a([F("editingInfo")],r.prototype,"readEditingInfo",null),a([u({readOnly:!0})],r.prototype,"effectiveCapabilities",null),a([u()],r.prototype,"effectiveEditingEnabled",null),a([u((()=>{const i=P(zJ),s=i.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},i})())],r.prototype,"elevationInfo",void 0),a([u()],r.prototype,"fieldsIndex",void 0),a([u({type:Va,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Ce}}})],r.prototype,"floorInfo",void 0),a([u({type:le,json:{origins:{service:{read:{source:"extent"}}}}})],r.prototype,"fullExtent",void 0),a([u()],r.prototype,"gdbVersion",void 0),a([u({readOnly:!0,type:Tu,json:{read:{source:"geometryProperties"}}})],r.prototype,"geometryFieldsInfo",void 0),a([u({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:x5.read}}}})],r.prototype,"geometryType",void 0),a([u({type:String})],r.prototype,"globalIdField",void 0),a([F("service","globalIdField",["globalIdField","fields"])],r.prototype,"readGlobalIdFieldFromService",null),a([u({readOnly:!0})],r.prototype,"hasFullEditingRestrictions",null),a([u({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasM",void 0),a([u({readOnly:!0})],r.prototype,"hasUpdateItemRestrictions",null),a([u({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasZ",void 0),a([u({readOnly:!0,type:hr})],r.prototype,"heightModelInfo",void 0),a([u({type:Date})],r.prototype,"historicMoment",void 0),a([u({type:q.ofType(Cs),readOnly:!0})],r.prototype,"indexes",void 0),a([u({readOnly:!0})],r.prototype,"isTable",void 0),a([F("service","isTable",["type"])],r.prototype,"readIsTableFromService",null),a([u({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],r.prototype,"layerId",void 0),a([u(GJ)],r.prototype,"maxScale",void 0),a([F("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null),a([u(UJ)],r.prototype,"minScale",void 0),a([F("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null),a([u({type:String})],r.prototype,"objectIdField",void 0),a([F("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null),a([u({readOnly:!0})],r.prototype,"parsedUrl",null),a([u(Fc("preferredTimeReference"))],r.prototype,"preferredTimeZone",void 0),a([u({type:[Fr],readOnly:!0})],r.prototype,"relationships",void 0),a([u({type:Boolean})],r.prototype,"returnM",void 0),a([u({type:Boolean})],r.prototype,"returnZ",void 0),a([u({readOnly:!0,json:{write:!1}})],r.prototype,"serverGens",void 0),a([u({readOnly:!0})],r.prototype,"serviceDefinitionExpression",void 0),a([F("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],r.prototype,"readServiceDefinitionExpression",null),a([u({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"serviceItemId",void 0),a([u()],r.prototype,"sourceJSON",void 0),a([u({type:B,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],r.prototype,"spatialReference",void 0),a([u({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],r.prototype,"subtypeField",void 0),a([u({type:[wn],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"subtypes",void 0),a([u({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0),a([u({type:[String],readOnly:!0})],r.prototype,"uniqueIdFields",void 0),a([F("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],r.prototype,"readUniqueIdFields",null),a([u(IY({nonStandardUrlAllowed:!0}))],r.prototype,"url",void 0),a([u({json:{origins:{service:{read:!0}},read:!1}})],r.prototype,"version",void 0),a([F("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],r.prototype,"readVersion",null),a([u({readOnly:!0})],r.prototype,"isUrlHostModified",null),r=a([_("esri.layers.mixins.FeatureLayerBase")],r),r};let eK=class extends wl{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[Th](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},Po=class extends de(A){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};a([u({type:String,json:{write:!0}})],Po.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],Po.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],Po.prototype,"returnType",void 0),Po=a([_("esri.layers.support.ExpressionInfo")],Po);var T5,wc;let rr=(wc=class extends A{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new T5({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:P(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},T5=wc,wc);a([u({type:Boolean,json:{write:!0}})],rr.prototype,"isAutoGenerated",void 0),a([u({type:String,json:{write:!0}})],rr.prototype,"name",void 0),a([u({type:String,json:{write:!0}})],rr.prototype,"alias",void 0),a([u({type:String,json:{write:!0}})],rr.prototype,"onStatisticField",void 0),a([u({type:Po,json:{write:!0}})],rr.prototype,"onStatisticExpression",void 0),a([u({type:String,json:{write:!0}})],rr.prototype,"statisticType",void 0),rr=T5=a([_("esri.layers.support.AggregateField")],rr);let zo=class extends A{constructor(){super(...arguments),this.type=null}};a([u({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],zo.prototype,"type",void 0),zo=a([_("esri.layers.support.FeatureReduction")],zo);const W6="__begin__",H6="__end__",tK=new RegExp(W6,"ig"),rK=new RegExp(H6,"ig"),Pw=new RegExp("^"+W6,"i"),Rw=new RegExp(H6+"$","i"),_2='"',iK=_2+" + ",sK=" + "+_2;function nK(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function oK(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function Z6(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=nK(t.labelExpression),e.type="conventional"),e}function aK(t){const e=Z6(t);if(!e)return null;switch(e.type){case"conventional":return M5(e.expression);case"arcade":return e.expression}return null}function lK(t){const e=Z6(t);if(!e)return null;switch(e.type){case"conventional":return cK(e.expression);case"arcade":return sE(e.expression)}return null}function M5(t){let e;return t?(e=Sl(t,r=>W6+'$feature["'+r+'"]'+H6),e=Pw.test(e)?e.replace(Pw,""):_2+e,e=Rw.test(e)?e.replace(Rw,""):e+_2,e=e.replaceAll(tK,iK).replaceAll(rK,sK)):e='""',e}const uK=/^\s*\{([^}]+)\}\s*$/i;function cK(t){return t?.match(uK)?.[1].trim()||null}const pK=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,dK=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,hK=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function sE(t){if(!t)return null;let e=pK.exec(t)||dK.exec(t);return e?e[1]||e[3]:(e=hK.exec(t),e?e[2]:null)}var I5,bc;let Rn=(bc=class extends A{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,r){return r.value?M5(r.value):e}writeExpression(e,r,i){this.value!=null&&(e=M5(this.value)),e!=null&&(r[i]=e)}clone(){return new I5({expression:this.expression,title:this.title,value:this.value})}},I5=bc,bc);a([u({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Rn.prototype,"expression",void 0),a([F("expression",["expression","value"])],Rn.prototype,"readExpression",null),a([j("expression")],Rn.prototype,"writeExpression",null),a([u({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Rn.prototype,"title",void 0),a([u({json:{read:!1,write:!1}})],Rn.prototype,"value",void 0),Rn=I5=a([_("esri.layers.support.LabelExpressionInfo")],Rn);var E5;const S1=new be({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x1(t,e,r){return{enabled:!pf(r?.layer)}}function nE(t){return!t||t.origin!=="service"&&t.layer?.type!=="map-image"}function yK(t){return t?.type==="map-image"}function oE(t){return!!yK(t)&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function fK(t){return nE(t)||oE(t?.layer)}var _c;let Ae=(_c=class extends A{static evaluateWhere(e,r){const i=(s,n,o)=>{switch(n){case"=":return s==o;case"<>":return s!=o;case">":return s>o;case">=":return s>=o;case"<":return s<o;case"<=":return s<=o}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return i(r[s[0]],s[1],s[2]);if(s.length===7){const n=i(r[s[0]],s[1],s[2]),o=s[3],l=i(r[s[4]],s[5],s[6]);switch(o){case"AND":return n&&l;case"OR":return n||l}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=kQ,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,r){const i=r.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,r,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=oK(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=sE(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(r[i]=e)}writeLabelExpressionInfo(e,r,i,s){if(e==null&&this.labelExpression!=null&&nE(s))e=new Rn({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(s);n.expression&&(r[i]=n)}writeMaxScale(e,r){(e||this.minScale)&&(r.maxScale=e)}writeMinScale(e,r){(e||this.maxScale)&&(r.minScale=e)}getLabelExpression(){return Z6(this)}getLabelExpressionArcade(){return aK(this)}getLabelExpressionSingleField(){return lK(this)}hash(){return JSON.stringify(this)}clone(){return new E5({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:P(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:P(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},E5=_c,_c);a([u({type:String,json:{write:!0}})],Ae.prototype,"name",void 0),a([u({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:x1}}}}})],Ae.prototype,"allowOverrun",void 0),a([u({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:x1}}}}})],Ae.prototype,"deconflictionStrategy",void 0),a([u({type:String,json:{write:{overridePolicy(t,e,r){return this.labelExpressionInfo&&r?.origin==="service"&&oE(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Ae.prototype,"labelExpression",void 0),a([F("labelExpression")],Ae.prototype,"readLabelExpression",null),a([j("labelExpression")],Ae.prototype,"writeLabelExpression",null),a([u({type:Rn,json:{write:{overridePolicy:(t,e,r)=>fK(r)?{allowNull:!0}:{enabled:!1}}}})],Ae.prototype,"labelExpressionInfo",void 0),a([j("labelExpressionInfo")],Ae.prototype,"writeLabelExpressionInfo",null),a([u({type:S1.apiValues,json:{type:S1.jsonValues,read:S1.read,write:S1.write}})],Ae.prototype,"labelPlacement",void 0),a([u({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Ae.prototype,"labelPosition",void 0),a([u({type:Number})],Ae.prototype,"maxScale",void 0),a([j("maxScale")],Ae.prototype,"writeMaxScale",null),a([u({type:Number})],Ae.prototype,"minScale",void 0),a([j("minScale")],Ae.prototype,"writeMinScale",null),a([u({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:x1}}}}})],Ae.prototype,"repeatLabel",void 0),a([u({type:Number,cast:_e,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:x1}}}}})],Ae.prototype,"repeatLabelDistance",void 0),a([u({types:vz,json:{origins:{"web-scene":{types:wz,write:yw,default:null}},write:yw,default:null}})],Ae.prototype,"symbol",void 0),a([u({type:Boolean,json:{write:!0}})],Ae.prototype,"useCodedValues",void 0),a([u({type:String,json:{write:!0}})],Ae.prototype,"where",void 0),Ae=E5=a([_("esri.layers.support.LabelClass")],Ae);var P5;let as=P5=class extends A{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new P5({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};a([u({type:String,json:{write:!0}})],as.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],as.prototype,"label",void 0),a([u({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],as.prototype,"minValue",void 0),a([u({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],as.prototype,"maxValue",void 0),a([u(L6)],as.prototype,"symbol",void 0),as=P5=a([_("esri.renderers.support.ClassBreakInfo")],as);var R5;const aE="log",F0="percent-of-total",A0="field",$1=new be({esriNormalizeByLog:aE,esriNormalizeByPercentOfTotal:F0,esriNormalizeByField:A0}),mK=Zr(as);let lt=R5=class extends ep(di){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,r){if(!Array.isArray(t))return;let i=e.minValue;return t.map(s=>{const n=new as;return n.read(s,r),n.minValue==null&&(n.minValue=i),n.maxValue==null&&(n.maxValue=n.minValue),i=n.maxValue,n})}writeClassBreakInfos(t,e,r,i){const s=t.map(n=>n.write({},i));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),e[r]=s}castField(t){return t==null?t:typeof t=="function"?(N.getLogger(this).error(".field: field must be a string value"),null):I2(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,r=this.normalizationTotal!=null;return e||r?(t=e&&A0||r&&F0||null,e&&r&&N.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==A0&&t!==F0||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,r){let i=null;i=typeof t=="number"?new as({minValue:t,maxValue:e,symbol:tT(r)}):mK(P(t)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(t,e){return this.valueExpression&&e?.arcade==null&&N.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let r=e;this.valueExpression&&e?.arcade==null&&(r={...r,arcade:await gl()});const i=this.getBreakIndex(t,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(t,e){if(this.valueExpression&&e?.arcade==null)return void N.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(t,e);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let r=e;if(this.valueExpression&&e?.arcade==null){const s=await gl(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}const i=this.getBreakIndex(t,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((i,s)=>i+s.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new R5({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:P(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:P(this.visualVariables),legendOptions:P(this.legendOptions),authoringInfo:P(this.authoringInfo)})}async collectRequiredFields(t,e){const r=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(r)}async collectSymbolFields(t,e){const r=[...this.symbols.map(i=>i.collectRequiredFields(t,e)),lr(t,e,null,this.valueExpression)];ar(t,e,this.field),ar(t,e,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(t,e){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=e??{},{valueExpression:l}=this;let c=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const d=n.arcadeUtils;if(!c){const y=d.createSyntaxTree(l);c=d.createFunction(y),this._compiledValueExpression.compiledFunction=c}this._compiledValueExpression.valueExpression=l;const h=d.executeFunction(c,d.createExecContext(t,d.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){const e=this.field,r=t.attributes,i=this.normalizationType;let s=parseFloat(r[e]);if(i){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===aE)s=Math.log(s)*Math.LOG10E;else if(i!==F0||n==null||isNaN(n)){if(i===A0&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=t&&(e?t<=i[1]:t<i[1]))return r}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let r=1;r<e;r++)if(t[r-1].maxValue!==t[r].minValue)return!1;return!0}};a([u(N6)],lt.prototype,"backgroundFillSymbol",void 0),a([u({type:[as],json:{write:{isRequired:!0}}})],lt.prototype,"classBreakInfos",void 0),a([F("classBreakInfos")],lt.prototype,"readClassBreakInfos",null),a([j("classBreakInfos")],lt.prototype,"writeClassBreakInfos",null),a([u({type:String,json:{write:!0}})],lt.prototype,"defaultLabel",void 0),a([u(c4)],lt.prototype,"defaultSymbol",void 0),a([u({type:String,json:{write:!0}})],lt.prototype,"field",void 0),a([xe("field")],lt.prototype,"castField",null),a([u({type:Boolean})],lt.prototype,"isMaxInclusive",void 0),a([u({type:D6,json:{write:!0}})],lt.prototype,"legendOptions",void 0),a([u({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],lt.prototype,"minValue",null),a([u({type:String,json:{write:!0}})],lt.prototype,"normalizationField",void 0),a([u({type:Number,json:{write:!0}})],lt.prototype,"normalizationTotal",void 0),a([u({type:$1.apiValues,value:null,json:{type:$1.jsonValues,read:$1.read,write:$1.write}})],lt.prototype,"normalizationType",null),a([X({classBreaks:"class-breaks"})],lt.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],lt.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],lt.prototype,"valueExpressionTitle",void 0),lt=R5=a([_("esri.renderers.ClassBreaksRenderer")],lt);const O5=-3,gK=O5-1,vK=!!re("esri-tests-disable-gpu-memory-measurements");let wK=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,r){return this._db.get(e.id+r)?.size??0}put(e,r,i,s,n){r=e.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,0)),s>this._maxSize)return void this._notifyRemove(r,i,s,0);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return vK||console.warn(`Refusing to cache entry with size ${s} for key ${r}`),void this._notifyRemove(r,i,0,0);const l=1+Math.max(n,gK)-O5;this._db.set(r,new bK(i,s,l)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,r){r=e.id+r;const i=this._db.get(r);if(!i)return;this._size-=i.size,e.size-=i.size;let s=i.entry.usedMemory;for(;s>this._maxSize;){const n=this._notifyRemove(r,i.entry,s,1);if(!(n!=null&&n>0))return void this._db.delete(r);s=n}i.size=s,this._size+=s,e.size+=s,this._checkSize()}pop(e,r){r=e.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(e,r){r=e.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(e,r){const i=this._db.get(e.id+r);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,l)=>{const c=o.lifetime;i[c]=(i[c]||0)+o.size,this._users.forEach(d=>{const{id:h,name:y}=d;if(l.startsWith(h)){const f=r[y]||0;r[y]=f+o.size}})});const s={};this._users.forEach(o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const c=r[l]||0;r[l]=c,s[l]=Math.round(100*o.hitRate)+"%"}else s[l]="0%"});const n=Object.keys(r);n.sort((o,l)=>r[l]-r[o]),n.forEach(o=>e[o]=Math.round(r[o]/2**20)+"MB / "+s[o]);for(let o=i.length-1;o>=0;--o){const l=i[o];l&&(e["Priority "+(o+O5-1)]=Math.round(l/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const r=e.id;this._db.forEach((i,s)=>{s.startsWith(r)&&(this._size-=i.size,this._db.delete(s),this._notifyRemove(s,i.entry,i.size,0))}),e.size=0}clearAll(){this._db.forEach((e,r)=>this._notifyRemove(r,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[r,i]of this._db)r.startsWith(e.id)&&(yield i.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,r,i,s){const n=this._users.get(e.split(Ay)[0])?.removeFunc,o=n?.(r,s,i);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach((e,r)=>this._checkSizeLimits(e,r)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,r){r==null||r<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,r)}_checkSizeLimits(e,r){const i=r??this;if(i.size<=e)return;const s=r?.id;let n=!0;for(;n;){n=!1;for(const[o,l]of this._db)if(l.lifetime===0&&(!s||o.startsWith(s))){const c=r??this._users.get(o.split(Ay)[0]);if(this._purgeItem(o,l,c),i.size<=.9*e)return;n||=this._db.has(o)}}for(const[o,l]of this._db)if(!s||o.startsWith(s)){const c=r??this._users.get(o.split(Ay)[0]);if(this._purgeItem(o,l,c),i.size<=.9*e)return}}_purgeItem(e,r,i){if(this._db.delete(e),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const s=this._notifyRemove(e,r.entry,r.size,1);s!=null&&s>0&&(this._size+=s,i&&(i.size+=s),r.lives=r.lifetime,r.size=s,this._db.set(e,r))}else--r.lives,this._db.set(e,r)}},bK=class{constructor(e,r,i){this.entry=e,this.size=r,this.lifetime=i,this.lives=i}};const Ay=":";let _K=class{constructor(e,r){this.removeFunc=r,this._storage=new wK,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,r,i=1){this._storage.put(this,e,r,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},Ow=class lE{static parse(e,r,i){const s=[],n=[],o=e.split(";");for(let l=0;l<o.length;l++){const c=o[l];if(c){if(c.includes("po:")){const d=c.slice(3).split("|");if(d.length===3){const[h,y,f]=d,m=xK(h,y,f);m&&n.push(m)}continue}if(c.includes("|")){for(const d of c.split("|"))if(r.has(d)){s.push(d);break}}else if(r.has(c))s.push(c);else if(l===0){s.length=0,s.push($K(i));break}}}return new lE(s,n)}constructor(e,r){this.partNames=e,this.overrides=r}};function SK(t,e){if(t==="DashTemplate")return e.split(" ").map(r=>Number(r));if(t==="Color"){const r=new ne(e).toRgba();return[r[0],r[1],r[2],255*r[3]]}return Number(e)}function xK(t,e,r){return{primitiveName:t,propertyName:e,value:SK(e,r),defaultValue:null}}function $K(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var Sc;let Ls=(Sc=class{},Sc.instance=new ch("Etc/UTC"),Sc);function TK(t){return t instanceof s_?t===Ls.instance:t?.toString().toLowerCase()==="unknown"}function dde(t){return TK(t)?Ls.instance:t}function MK(t){return"timeZone"in t}function IK(t){return"timeZone"in t}function EK(t){return"dateFieldsTimeZone"in t}const PK=new Map;let oh=class L0{static fromJSON(e){return new L0(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new L0(e.fields??[],kw(e))}static fromLayerJSON(e){return new L0(e.fields??[],kw(e))}constructor(e=[],r){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const s of this.fields){const n=s?.name,o=Cw(n);if(n&&o){const l=za(n);this._fieldsMap.set(n,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(o,s),i.push(`${l}:${s.type}:${this._timeZoneByFieldName?.get(n)}`),o$(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):Jg(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),W8(s)||H8(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)W8(e)||H8(e)||e.nullable||Nj(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return this.get(e)!=null}get(e){if(!e)return;let r=this._fieldsMap.get(e);return r||(r=this._fieldsMap.get(za(e))??this._normalizedFieldsMap.get(Cw(e)),r&&this._fieldsMap.set(e,r),r)}getTimeZone(e){const r=this.get(e&&typeof e!="string"?e.name:e);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(N.getLogger("esri.layers.support.FieldsIndex").errorOnce(new M("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),Ad):uE.has(r.type)?ul:null:null}getLuxonTimeZone(e){const r=this.getTimeZone(e);return r?r===ul?Ls.instance:r===Ad?Mc.utcInstance:hh(PK,r,()=>ch.create(r)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return a$(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>Z5(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function za(t){return t.trim().toLowerCase()}function Cw(t){return xj(t)?.toLowerCase()??""}const uE=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function kw(t){const e=new Map;if(!t.fields)return e;const r=t.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:s}=t,n=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",l=EK(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?N1(t.dateFieldsTimeReference):null,c=s?MK(s)?s.timeZone??l:s.dateFieldsTimeReference?N1(s.dateFieldsTimeReference):l??Ad:null,d=i?IK(i)?i.timeZone??l:i.timeReference?N1(i.timeReference):l:null,h=new Map([[za(s?.creationDateField??""),c],[za(s?.editDateField??""),c],[za(n),d],[za(o),d]]);for(const{name:y,type:f}of t.fields)if(uE.has(f))e.set(y,ul);else if(f!=="date"&&f!=="esriFieldTypeDate")e.set(y,null);else if(r)e.set(y,ul);else{const m=h.get(za(y??""))??l;e.set(y,m)}return e}const cE={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};let RK=class extends Error{constructor(...e){super(...e)}},Fw=class pE extends RK{constructor(e,r){super(J6(r)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,pE),r?.loc&&(this.loc=r.loc)}},OK=class dE extends Error{constructor(e,r,i,s){super("Execution error - "+J6(i)+Sl(cE[r],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,dE),i?.loc&&(this.loc=i.loc)}};function J6(t){return t&&t.loc?`Line : ${t.loc.start?.line}, ${t.loc.start?.column}: `:""}let yde=class hE extends Error{constructor(e,r,i,s){super("Compilation error - "+J6(i)+Sl(cE[r],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,hE),i?.loc&&(this.loc=i.loc)}},fde=class yE extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,yE)}};function mde(t,e,r){return r.declaredRootClass==="esri.arcade.arcadeexecutionerror"||r.declaredRootClass==="esri.arcade.arcadecompilationerror"?r.loc===null&&e?.loc?new Fw(r,{cause:r}):r:(r.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||r.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||r.declaredRootClass,e?.loc?new Fw(r,{cause:r}):r)}const CK={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};let gde=class fE extends Error{constructor(e,r){super(Sl(CK[e],r)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,fE)}};function N0(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let vde=class{constructor(e,r){const i=new Map;for(const s of e){const n=N0(s);if(i.has(n))throw new Error(`${s} already added as ${i.get(n)}`);i.set(n,s)}if(r!=null)for(const[s,n]of r){const o=N0(s);if(i.has(o))throw new Error(`${s} already associated with ${i.get(o)}`);i.set(o,n)}this._enumMap=i}lookup(e){return this._enumMap.get(N0(e))}get(e){const r=this.lookup(e);if(r==null)throw new OK(null,"InvalidParameter",null);return r}};const kK={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};let FK=class mE extends Error{constructor(e,r){super(Sl(kK[e],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,mE)}};function ql(t,e,r){return t<e?t-e:t>r?t-r:0}function Ul(t,e,r){return t<e?e:t>r?r:t}let Vn=class at{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,r=1,i=1,s=0,n=0,o=0,l=0,c){if(isNaN(e)||isNaN(r)||isNaN(i)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(l))return null;const d=Pe.local(e,r).daysInMonth;let h=Pe.fromObject({day:Ul(i,1,d),year:e,month:Ul(r,1,12),hour:Ul(s,0,23),minute:Ul(n,0,59),second:Ul(o,0,59),millisecond:Ul(l,0,999)},{zone:ks(c)});return h=h.plus({months:ql(r,1,12),days:ql(i,1,d),hours:ql(s,0,23),minutes:ql(n,0,59),seconds:ql(o,0,59),milliseconds:ql(l,0,999)}),new at(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,r){const i=ks(r);return e.isUnknownTimeZone||i===Ls.instance?at.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,i):new at(e._date.setZone(i))}static dateJSToArcadeDate(e){return new at(Pe.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,r="system"){const i=ks(r);return new at(Pe.fromJSDate(e,{zone:i}))}static unknownEpochToArcadeDate(e){return new at(Pe.fromMillis(e,{zone:Ls.instance}))}static unknownDateJSToArcadeDate(e){return new at(Pe.fromMillis(e.getTime(),{zone:Ls.instance}))}static epochToArcadeDate(e,r="system"){const i=ks(r);return new at(Pe.fromMillis(e,{zone:i}))}static dateTimeToArcadeDate(e){return new at(e)}clone(){return new at(this._date)}changeTimeZone(e){const r=ks(e);return at.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(e,r){const i=ks(r);return e.zone===Ls.instance||i===Ls.instance?at.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,i):new at(e.setZone(i))}static nowToArcadeDate(e){const r=ks(e);return new at(Pe.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new at(Pe.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===at.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===Ls.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new at(this._date.plus(e))}diff(e,r){return this._date.diff(e._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,r){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(e,r){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new at(this._date.toUTC())}toLocal(){return new at(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const r=Pe.fromISO(e,{setZone:!0});return new at(r)}};function ks(t,e=!0){if(t instanceof s_)return t;switch(N0(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return Ls.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(t)){const i=Mc.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(i)return i}const r=ch.create(t);if(!r.isValid){if(e)throw new FK("TimeZoneNotRecognized");return null}return r}function Aw(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const r=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of t.match(r)||[])switch(i){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=i;break;default:i.length>=2&&i.startsWith("[")&&i.endsWith("]")?e+=`'${i.slice(1,-1)}'`:e+=`'${i}'`}return e}const Lw="esri.core.sql.dateonly";let AK=class ii{constructor(e,r,i){this._year=e,this._month=r,this._day=i,this.declaredRootClass=Lw}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===Lw}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return ii.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new ii(this._year,this._month,this._day)}toDateTime(e){return Pe.fromObject({day:this.day,month:this.month,year:this.year},{zone:ks(e)})}toDateTimeLuxon(e){return Pe.fromObject({day:this.day,month:this.month,year:this.year},{zone:ks(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,r=!0){if(e===null||e==="")return this.toString();if(r&&(e=Aw(e)),!e)return"";const i=this.toDateTime("unknown");return Vn.dateTimeToArcadeDate(i).toFormat(e,{locale:qn(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return Vn.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,r){return ii.fromDateTime(this.toUTCDateTime().plus({[e]:r}))}toUTCDateTime(){return Pe.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const r=Pe.fromMillis(e,{zone:Mc.utcInstance});return r.isValid?ii.fromParts(r.year,r.month,r.day):null}static fromSeconds(e){const r=Pe.fromSeconds(e,{zone:Mc.utcInstance});return r.isValid?ii.fromParts(r.year,r.month,r.day):null}static fromReader(e){if(!e)return null;const r=e.split("-");return r.length!==3?null:new ii(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10))}static fromParts(e,r,i){const s=new ii(e,r,i);return s.isValid===!1?null:s}static fromDateJS(e){return ii.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return ii.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,r=null){if(e===""||e===null)return null;const i=[];if(r)(r=Aw(r))&&i.push(r);else if(r===null||r===""){const s=Pe.fromISO(e,{setZone:!0});return s.isValid?ii.fromParts(s.year,s.month,s.day):null}for(const s of i){const n=Pe.fromFormat(e,r??s);if(n.isValid)return new ii(n.year,n.month,n.day)}return null}static fromNow(e="system"){const r=Pe.fromJSDate(new Date).setZone(ks(e));return new ii(r.year,r.month,r.day)}};function bde(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new le({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function _de(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function T1(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function Nw(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let r="";for(const i of t.match(e)||[])switch(i){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":r+=i;break;case"A":case"a":r+="a";break;default:r+=`'${i}'`}return r}const Dw="esri.core.sql.timeonly";let LK=class Es{constructor(e,r,i,s){this._hour=e,this._minute=r,this._second=i,this._millisecond=s,this.declaredRootClass=Dw}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===Dw}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Es.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Es(this.hour,this.minute,this.second,this.millisecond)}isValid(){return T1(this.hour)&&T1(this.minute)&&T1(this.second)&&T1(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=Nw(e))?Pe.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:qn(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,r,i,s){const n=new Es(e,r,i,s);return n.isValid()?n:null}static fromReader(e){if(!e)return null;const r=e.split(":");return r.length!==3?null:new Es(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const r=Math.floor(e/1e3%60),i=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),n=Math.floor(e%1e3);return new Es(s,i,r,n)}static fromDateJS(e){return new Es(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Es(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,r=null){if(e===""||e===null)return null;const i=[];r?(r=Nw(r))&&i.push(r):r!==null&&r!==""||(i.push("HH:mm:ss"),i.push("HH:mm:ss.SSS"),i.push("hh:mm:ss a"),i.push("hh:mm:ss.SSS a"),i.push("HH:mm"),i.push("hh:mm a"),i.push("H:mm"),i.push("h:mm a"),i.push("H:mm:ss"),i.push("h:mm:ss a"),i.push("H:mm:ss.SSS"),i.push("h:mm:ss.SSS a"));for(const s of i){const n=Pe.fromFormat(e,s);if(n.isValid)return new Es(n.hour,n.minute,n.second,n.millisecond)}return null}plus(e,r){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Es.fromDateTime(this.toUTCDateTime().plus({[e]:r}))}return null}toUTCDateTime(){return Pe.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const NK=["geometry","scale","timeProperties"];function Sde(t,e){if(e!=null)for(const r of NK)e.hasArcadeDependency(r)&&t.add(r);return t}function xde(t,e){return gE.create(t,e,null,["$feature","$view"])}function DK(t,e,r){return gE.create(t,e,r,["$feature","$view","$config"])}let gE=class vE{static async create(e,r,i,s){const{arcade:n,Dictionary:o}=await gl();let l;try{l=n.parseScript(e)}catch(m){throw new M("arcade-bad-expression","Failed to parse arcade script",{script:e,error:m})}const c=n.scriptUsesGeometryEngine(l);c&&await n.enableGeometrySupport(),await n.loadDependentModules(new Set,l,null,!1,c);const d={vars:s.reduce((m,g)=>({...m,[g]:null}),{}),spatialReference:r,useAsync:!1},h=n.compileScript(l,d);let y=null;i!=null&&(y=new o(i),y.immutable=!0);const f=new o;return f.immutable=!1,f.setField("scale",0),new vE(e,n,l,h,r,f,y,o)}constructor(e,r,i,s,n,o,l,c){this.script=e,this._arcade=r,this._syntaxTree=i,this._compiled=s,this._spatialReference=n,this._viewDict=o,this._configDict=l,this._dictionaryCtor=c,this._dependencies=new Map,this._featureReader=new wE,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,r){const i=r.$view?.timeZone;if(r.$view){let s;if(this._viewDict.setField("scale",r.$view.scale),r.$view.timeProperties!=null){const{currentStart:n,currentEnd:o}=r.$view.timeProperties;s=new this._dictionaryCtor({currentStart:n!=null?i!=null?Vn.epochToArcadeDate(n,i):Vn.unknownEpochToArcadeDate(n):void 0,currentEnd:o!=null?i!=null?Vn.epochToArcadeDate(o,i):Vn.unknownEpochToArcadeDate(o):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:i})}repurposeFeature(e,r){return this._featureReader.bind(e,r,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},wE=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,r,i){const s=r??new oh(bE(e.attributes));this._boundTarget=e,this._boundSchema.fields=s.fields,this._boundSchema.fieldsIndex=s,this._boundSchema.spatialReference=i}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Ho(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===ul}field(e,r=!0){const i=this._getField(e);if(i){const s=this._boundTarget.attributes[i.name];if(s==null)return null;switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return AK.fromReader(s);case"time-only":case"esriFieldTypeTimeOnly":return LK.fromReader(s);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Vn.fromReaderAsTimeStampOffset(s);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?Vn.unknownEpochToArcadeDate(s):Vn.epochToArcadeDate(s,this.contextTimeZone??Hn);default:return s}}if(r)throw new Error(`Field ${e} does not exist`);return null}setField(e,r){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:e?.keepGeometryType===!0?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,r=null){return Promise.resolve(this.castAsJson(r))}};function bE(t){const e=[];for(const r in t)e.push({name:r,alias:r,type:typeof t[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let jK=class _E{static async from(e,r,i){const s=e.dictionary_version?$6.parse(e.dictionary_version):null,n=new Set(e.itemsNames),o={};if(r)for(const y in r)o[y]=r[y];if(e.authoringInfo.configuration)for(const y of e.authoringInfo.configuration)o.hasOwnProperty(y.name)||(o[y.name]=y.value);const l=new Set(e.authoringInfo.symbol);for(const y of Object.keys(i))l.delete(y);l.size&&N.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:l});const c=await DK(e.expression,null,o);if(!c)throw new M("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const d=!s||!s.greaterEqual(4,0);d&&N.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:s});const h=new VK(i,d);return new _E(d,n,c,h)}constructor(e,r,i,s){this._requiresFieldCoercionToString=e,this._itemNames=r,this._compiled=i,this._reader=s}get itemNames(){return this._itemNames}evaluate(e,r,i,s){try{return this._reader.bind(e,i,s),this._compiled.evaluate(this._reader,{$view:{scale:r}})}catch(n){N.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:n})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new oh(e);const r=e.map(i=>({...i,type:"esriFieldTypeString"}));return new oh(r)}},VK=class extends wE{constructor(e,r){super(),this._fieldMap=e,this._requiresFieldCoercionToString=r}_getField(e){const r=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(r)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const r=this._getField(e);return r==null||this._boundTarget.attributes[r.name]==null?"":""+this._boundTarget.attributes[r.name]}};const jw={Relative:0,Absolute:1},zK={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},C5={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:jw.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:jw.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function qK(t){return typeof t=="function"}function Mde(t,e,r,i){return qK(t)?t(e,r,i):t}function Ide(t){return[t.r,t.g,t.b,t.a]}const UK=` /-,
`;function Vw(t){let e=t.length;for(;e--;)if(!UK.includes(t.charAt(e)))return!1;return!0}function Ede(t,e){const r=[];let i=0,s=-1;do if(s=t.indexOf("[",i),s>=i){if(s>i){const n=t.slice(i,s);r.push([n,null,Vw(n)])}if(i=s+1,s=t.indexOf("]",i),s>=i){if(s>i){const n=e[t.slice(i,s)];n&&r.push([null,n,!1])}i=s+1}}while(s!==-1);if(i<t.length){const n=t.slice(i);r.push([n,null,Vw(n)])}return r}function Pde(t,e,r){let i="",s=null;for(const n of e){const[o,l,c]=n;if(o!=null&&o!=="")c?s=o:(s!=null&&(i+=s,s=null),i+=o);else{const d=t.readAttribute(l);d!=null&&d!==""&&(s!==null&&(i+=s,s=null),i+=d)}}return SE(i,r)}function Rde(t,e,r,i){let s="",n=null;for(const o of e){const[l,c,d]=o;if(l!=null&&l!=="")d?n=l:(n!=null&&(s+=n,n=null),s+=l);else{let h=c;r!=null&&(h=YK(c,r));const y=t.attributes[h];y!=null&&y!==""&&(n!=null&&(s+=n,n=null),s+=y)}}return SE(s,i)}function SE(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function Ode(t,e,r,i,s,n,o=!0){const l=e/s,c=r/n,d=Math.ceil(l/2),h=Math.ceil(c/2);for(let y=0;y<n;y++)for(let f=0;f<s;f++){const m=4*(f+(o?n-y-1:y)*s);let g=0,v=0,b=0,S=0,$=0,E=0,T=0;const R=(y+.5)*c;for(let O=Math.floor(y*c);O<(y+1)*c;O++){const z=Math.abs(R-(O+.5))/h,U=(f+.5)*l,J=z*z;for(let ie=Math.floor(f*l);ie<(f+1)*l;ie++){let oe=Math.abs(U-(ie+.5))/d;const ee=Math.sqrt(J+oe*oe);ee>=-1&&ee<=1&&(g=2*ee*ee*ee-3*ee*ee+1,g>0&&(oe=4*(ie+O*e),T+=g*t[oe+3],b+=g,t[oe+3]<255&&(g=g*t[oe+3]/250),S+=g*t[oe],$+=g*t[oe+1],E+=g*t[oe+2],v+=g))}}i[m]=S/v,i[m+1]=$/v,i[m+2]=E/v,i[m+3]=T/b}}function GK(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function Cde(t){return t.data?.symbol??null}function kde(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function Fde(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function Ade(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function BK(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const Lde=(t,e=0)=>t==null||isNaN(t)?e:t,Nde=(t,e)=>t??e,Dde=(t,e)=>t??e,jde=t=>t.tintColor?GK(t.tintColor):[255,255,255,1];let WK=class{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}};function zde(t){return new WK(t)}function qde(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Ude(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Gde(t){let e="normal",r="normal";if(t){const i=t.toLowerCase();i.includes("italic")?e="italic":i.includes("oblique")&&(e="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:e,weight:r}}function Bde(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function zw(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const r=zw(e);if(r!=null)return r}break;case"CIMTextSymbol":return zw(t.symbol);case"CIMSolidFill":return t.color}return null}function qw(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const r of e){const i=qw(r);if(i!=null)return i}break}case"CIMTextSymbol":return qw(t.symbol);case"CIMSolidStroke":return t.color}}function Wde(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function Uw(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const r=Uw(e);if(r!==void 0)return r}break;case"CIMTextSymbol":return Uw(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function Hde(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Zde(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Jde(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Qde=t=>t.includes("data:image/svg+xml");function Yde(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function d4(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Kde(t,e,r,i,s,n,o=!0){const{infos:l}=n;let c=1,d=0,h=0,y=0,f=1;for(const{absoluteAnchorPoint:v,offsetX:b,offsetY:S,rotation:$,size:E,frameHeight:T,rotateClockWise:R,scaleSymbolsProportionally:O}of l)f=v?1:c,h=Bw(b,S,d,f,h),y=Gw(b,S,d,f,y),T&&(O||o)&&(c*=E/T),d=Ww($,R,d);const m=Bw(i,s,d,f,h),g=Gw(i,s,d,f,y);return{size:t*c,rotation:Ww(e,r,d),offsetX:m,offsetY:g}}function HK(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>HK(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function ZK(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...zK[e]];const r=C5[t];if(!r)throw new Error(`InternalError: default value for type ${t}.`);return r[e]}function JK(t){return t.split(" ").map(e=>Number(e))}function QK(t){return typeof t=="string"?JK(t):t}function Xde(t){return t?.dashTemplate&&(t.dashTemplate=QK(t.dashTemplate)),t}function k5(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const r of e)if(r.type==="CIMVectorMarker")return k5(r)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const r of e)if(r.symbol)return k5(r.symbol)}}return"Normal"}function ehe(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const r of t.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??C5.CIMVectorMarker.size;i>e&&(e=i);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const r of t.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>e&&(e=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&BK(r.markerPlacement)){const i=r.size??C5.CIMVectorMarker.size;i>e&&(e=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>e&&(e=i)}}}return e}}}function YK(t,e){if(e!==null){const r=e.get(t);return r?r.name:t}return t}function the(t){return t.map(e=>({...e,propertyName:d4(e.propertyName)}))}function rhe(t){const e={};for(const r in t){const i=t[r];e[d4(r)]=i}return e}function Gw(t,e,r,i,s){const n=r*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*t+o*e)*i+s}return e*i+s}function Bw(t,e,r,i,s){const n=r*Math.PI/180;return n?(Math.cos(n)*t-Math.sin(n)*e)*i+s:t*i+s}function Ww(t,e,r){return e?r-t:r+t}function ihe(t,e,r){const i=r==="Color"||r==="TintColor"||r==="ToColor",s=r==="Rotation"||r==="Angle"||r==="ToRotation";let n=e[d4(r)];if(n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=ZK(e.type,r.toLowerCase()),n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const l=o[r];l==null||(typeof l=="string"||typeof l=="number"||Array.isArray(l)?(n=l,n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:l,defaultValue:n},n!=null&&(i?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return n}function she(t,e,r){if(e[d4(r)]!=null)return!0;if(e.primitiveName!=null){const i=t[e.primitiveName];if(i!=null&&i[r]!=null)return!0}return!1}function nhe(t,e){return Math.max(Math.min((t??e)/100,1),0)}const KK={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let xE=class{constructor(e,r,i,s){this.url=e,this.fieldMap=i,this.dictionaryInfo=s,this._symbolPartCache=new _K(100);const n=async()=>jK.from(await s,r,i);this._evaluator=n()}async getSymbolAsync(e,r,i=!0){const s=await this._evaluator,n=r?.fields??bE(e.attributes),o=s.createDictionaryFieldsIndex(n),l=s.evaluate(e,r?.scale??0,o,r?.spatialReference);if(l==null)return null;const c=Sh(e.geometry),d=Ow.parse(l,s.itemNames,c),h=c==="esriGeometryPoint"&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,d.partNames,d.overrides,h,r,i,o)}async getSymbolForControlString(e,r,i){const s=await this._evaluator,n=Ow.parse(e,s.itemNames,r),o=r==="esriGeometryPoint"&&!i,l=Hw(await Promise.all(n.partNames.map(c=>this._getSymbolPart(c))),n.overrides,o);return new ir({data:l})}async _cimPartsToCIMSymbol(e,r,i,s,n,o,l){const c=r.map(y=>this._getSymbolPart(y,n));let d=await Promise.all(c);if(o&&this.fieldMap&&d.length>0){const{OverrideHelper:y}=await L(()=>import("./money-tides-OverrideHelper-FtH07tp0.js"),__vite__mapDeps([217,128,3,1,2,4,5,218,30,10,11,12]));d=P(d);for(const f of d)y.applyDictionaryTextOverrides(f,e,this.fieldMap,l,k5(f))}const h=Hw(d,i,s);return new ir({data:h})}async _fetchSymbolPart(e,r){const i=await this.dictionaryInfo,s=(this.url+"/"+i.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:n}=await Le(s,{responseType:"json",query:{f:"json"},...r});return n}async _getSymbolPart(e,r){let i=this._symbolPartCache.get(e);return i||(i=this._fetchSymbolPart(e,r),this._symbolPartCache.put(e,i)),i}};function Hw(t,e,r){if(!t||t.length===0)return null;const i={...t[0]};if(t.length>1){i.effects=null,i.symbolLayers=[];for(const s of t){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);i.symbolLayers.unshift(...n.symbolLayers)}}return r&&(i.callout=KK),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:e}}var F5;let es=F5=class extends ep(di){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new xE(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,r,i){i?.origin||super.writeVisualVariables(t,e,r,i)}clone(){return new F5({config:P(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:P(this.fieldMap),url:P(this.url),visualVariables:P(this.visualVariables)})}async getSymbolAsync(t,e,r=!0){return this._loader.getSymbolAsync(t,e,r)}async getSymbolForControlString(t,e,r){return this._loader.getSymbolForControlString(t,e,r)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await lr(t,e,null,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];e.has(i)&&t.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await Le(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};a([u({type:xE})],es.prototype,"_loader",null),a([u({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],es.prototype,"config",void 0),a([u({type:Object,json:{write:!0}})],es.prototype,"fieldMap",void 0),a([u({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],es.prototype,"scaleExpression",void 0),a([j("scaleExpression")],es.prototype,"writeData",null),a([u({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],es.prototype,"scaleExpressionTitle",void 0),a([u({type:String,json:{write:!0}})],es.prototype,"url",void 0),a([j("visualVariables")],es.prototype,"writeVisualVariables",null),es=F5=a([_("esri.renderers.DictionaryRenderer")],es);var A5;let bn=A5=class extends A{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(N.getLogger(this).error(".field: field must be a string value"),null):I2(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new A5({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};a([u({type:ne,json:{type:[Number],write:!0}})],bn.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],bn.prototype,"field",void 0),a([xe("field")],bn.prototype,"castField",null),a([u({type:String,json:{write:!0}})],bn.prototype,"label",void 0),a([u({type:String,json:{write:!0}})],bn.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],bn.prototype,"valueExpressionTitle",void 0),bn=A5=a([_("esri.renderers.support.AttributeColorInfo")],bn);const $E=bn;var L5;let D0=L5=class extends A{constructor(){super(...arguments),this.unit=null}clone(){return new L5({unit:this.unit})}};a([u({type:String,json:{write:!0}})],D0.prototype,"unit",void 0),D0=L5=a([_("esri.renderers.support.DotDensityLegendOptions")],D0);const XK=D0;var N5;let Or=N5=class extends ep(di){constructor(t){super(t),this.attributes=null,this.backgroundColor=new ne([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new pt,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(t){super.visualVariables=t}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new li({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new N5({attributes:P(this.attributes),backgroundColor:P(this.backgroundColor),dotBlendingEnabled:P(this.dotBlendingEnabled),dotShape:P(this.dotShape),dotSize:P(this.dotSize),dotValue:P(this.dotValue),legendOptions:P(this.legendOptions),outline:P(this.outline),referenceScale:P(this.referenceScale),seed:P(this.seed),visualVariables:P(this.visualVariables),authoringInfo:P(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const r of this.attributes??[])r.valueExpression&&await lr(t,e,null,r.valueExpression),r.field&&t.add(r.field)}};a([u({type:[$E],json:{write:!0}})],Or.prototype,"attributes",void 0),a([u({type:ne,json:{write:!0}})],Or.prototype,"backgroundColor",void 0),a([u({type:Boolean,json:{write:!0}})],Or.prototype,"dotBlendingEnabled",void 0),a([u({type:String,json:{write:!1}})],Or.prototype,"dotShape",void 0),a([u({type:Number,json:{write:!0}})],Or.prototype,"dotSize",void 0),a([u({type:XK,json:{write:!0}})],Or.prototype,"legendOptions",void 0),a([u({type:pt,json:{default:null,write:!0}})],Or.prototype,"outline",void 0),a([u({type:Number,json:{write:!0}})],Or.prototype,"dotValue",void 0),a([u({type:Number,json:{write:!0}})],Or.prototype,"referenceScale",void 0),a([u({type:Number,json:{write:!0}})],Or.prototype,"seed",void 0),a([X({dotDensity:"dot-density"})],Or.prototype,"type",void 0),Or=N5=a([_("esri.renderers.DotDensityRenderer")],Or);var D5;let Do=D5=class extends A{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new D5({color:this.color&&this.color.clone(),ratio:this.ratio})}};a([u({type:ne,json:{type:[ve],default:null,write:{isRequired:!0}}})],Do.prototype,"color",void 0),a([u({type:Number,json:{write:{isRequired:!0}}})],Do.prototype,"ratio",void 0),Do=D5=a([_("esri.renderers.support.HeatmapColorStop")],Do);let Iu=class extends de(A){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};a([u({type:String,json:{write:!0}})],Iu.prototype,"minLabel",void 0),a([u({type:String,json:{write:!0}})],Iu.prototype,"maxLabel",void 0),a([u({type:String,json:{write:!0}})],Iu.prototype,"title",void 0),Iu=a([_("esri.renderers.support.HeatmapLegendOptions")],Iu);function eX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function tX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function rX(t,e,r,i,s){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t}function iX(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function TE(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function ME(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function IE(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function sX(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function nX(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function oX(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function aX(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function lX(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function uX(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function cX(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t}function EE(t,e){const r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(r*r+i*i+s*s+n*n)}function PE(t,e){const r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return r*r+i*i+s*s+n*n}function RE(t){const e=t[0],r=t[1],i=t[2],s=t[3];return Math.sqrt(e*e+r*r+i*i+s*s)}function OE(t){const e=t[0],r=t[1],i=t[2],s=t[3];return e*e+r*r+i*i+s*s}function pX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function dX(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function hX(t,e){const r=e[0],i=e[1],s=e[2],n=e[3];let o=r*r+i*i+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=i*o,t[2]=s*o,t[3]=n*o),t}function yX(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function CE(t,e,r,i){const s=e[0],n=e[1],o=e[2],l=e[3];return t[0]=s+i*(r[0]-s),t[1]=n+i*(r[1]-n),t[2]=o+i*(r[2]-o),t[3]=l+i*(r[3]-l),t}function fX(t,e=1){const r=j2;let i,s,n,o,l,c;do i=2*r()-1,s=2*r()-1,l=i*i+s*s;while(l>=1);do n=2*r()-1,o=2*r()-1,c=n*n+o*o;while(c>=1);const d=Math.sqrt((1-l)/c);return t[0]=e*i,t[1]=e*s,t[2]=e*n*d,t[3]=e*o*d,t}function mX(t,e,r){const i=e[0],s=e[1],n=e[2],o=e[3];return t[0]=r[0]*i+r[4]*s+r[8]*n+r[12]*o,t[1]=r[1]*i+r[5]*s+r[9]*n+r[13]*o,t[2]=r[2]*i+r[6]*s+r[10]*n+r[14]*o,t[3]=r[3]*i+r[7]*s+r[11]*n+r[15]*o,t}function gX(t,e,r){const i=e[0],s=e[1],n=e[2],o=r[0],l=r[1],c=r[2],d=r[3],h=d*i+l*n-c*s,y=d*s+c*i-o*n,f=d*n+o*s-l*i,m=-o*i-l*s-c*n;return t[0]=h*d+m*-o+y*-c-f*-l,t[1]=y*d+m*-l+f*-o-h*-c,t[2]=f*d+m*-c+h*-l-y*-o,t[3]=e[3],t}function vX(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function wX(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function bX(t,e){const r=t[0],i=t[1],s=t[2],n=t[3],o=e[0],l=e[1],c=e[2],d=e[3],h=$r();return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=h*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-d)<=h*Math.max(1,Math.abs(n),Math.abs(d))}const _X=TE,SX=ME,xX=IE,$X=EE,TX=PE,MX=RE,IX=OE;Object.freeze(Object.defineProperty({__proto__:null,add:iX,ceil:sX,copy:eX,copyVec3:tX,dist:$X,distance:EE,div:xX,divide:IE,dot:yX,equals:bX,exactEquals:wX,floor:nX,inverse:dX,len:MX,length:RE,lerp:CE,max:aX,min:oX,mul:SX,multiply:ME,negate:pX,normalize:hX,random:fX,round:lX,scale:uX,scaleAndAdd:cX,set:rX,sqrDist:TX,sqrLen:IX,squaredDistance:PE,squaredLength:OE,str:vX,sub:_X,subtract:TE,transformMat4:mX,transformQuat:gX},Symbol.toStringTag,{value:"Module"}));function h4(){return[0,0,0,0]}function EX(t){return[t[0],t[1],t[2],t[3]]}function tp(t,e,r,i){return[t,e,r,i]}function PX(t,e,r,i){return[t,e,r,i]}function RX(t,e=h4()){const r=Math.min(4,t.length);for(let i=0;i<r;++i)e[i]=t[i];return e}function kE(){return h4()}function FE(){return tp(1,1,1,1)}function AE(){return tp(1,0,0,0)}function LE(){return tp(0,1,0,0)}function NE(){return tp(0,0,1,0)}function DE(){return tp(0,0,0,1)}const OX=kE(),CX=FE(),kX=AE(),FX=LE(),AX=NE(),LX=DE();Object.freeze(Object.defineProperty({__proto__:null,ONES:CX,UNIT_W:LX,UNIT_X:kX,UNIT_Y:FX,UNIT_Z:AX,ZEROS:OX,clone:EX,create:h4,freeze:PX,fromArray:RX,fromValues:tp,ones:FE,unitW:DE,unitX:AE,unitY:LE,unitZ:NE,zeros:kE},Symbol.toStringTag,{value:"Module"}));const Q6=2.4;function NX(t){return Vi(t*Q6)}function DX(t){return ZL(t)/Q6}function jX(t,e,r,i){let{color:s,ratio:n}=e,{color:o,ratio:l}=r;l===n&&(l===1?n-=1e-6:l+=1e-6);const c=gi((i-n)/(l-n),0,1);CE(t,s.toArray(),o.toArray(),c)}function lhe(t){const r=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:l})=>l>=0&&l<=1).sort((l,c)=>l.ratio-c.ratio).map(({color:l,ratio:c})=>({color:l,ratio:Math.max(c,.001)})),t.length<1)return r;let i=t[0],s=t[0],n=1;const o=h4();for(let l=0;l<512;l++){const c=(l+.5)/512;for(;c>s.ratio&&n<t.length;)i=s,s=t[n++];jX(o,i,s,c),r.set(o,4*l)}return r}function uhe(t,e,r){const i=Math.sqrt(t**2+e**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function che(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var j5;function Zw(t){if(t!=null){const{maxDensity:e,minDensity:r,radius:i}=t;if(e!=null||r!=null||i!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...l}=t;return l}}return t}let St=j5=class extends di{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Do({ratio:0,color:new ne("rgba(255, 140, 0, 0)")}),new Do({ratio:.75,color:new ne("rgba(255, 140, 0, 1)")}),new Do({ratio:.9,color:new ne("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return Zw(t)}get blurRadius(){return DX(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",NX(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(Q6**2*this.blurRadius**4)}read(t,e){t=Zw(t),super.read(t,e)}getSymbol(){return new Tt}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&ar(t,e,r),i&&typeof i=="string"&&await lr(t,e,null,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new j5({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:P(this.colorStops),field:this.field,legendOptions:P(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};a([u({type:Ue,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],St.prototype,"authoringInfo",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],St.prototype,"blurRadius",null),a([u({type:[Do],json:{write:{isRequired:!0}}})],St.prototype,"colorStops",void 0),a([u({type:String,json:{write:!0}})],St.prototype,"field",void 0),a([u({type:Iu,json:{write:!0}})],St.prototype,"legendOptions",void 0),a([u({type:Number,json:{write:!0}})],St.prototype,"maxDensity",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],St.prototype,"maxPixelIntensity",null),a([u({type:Number,json:{write:!0}})],St.prototype,"minDensity",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],St.prototype,"minPixelIntensity",null),a([u({type:Number,cast:_e,json:{write:!0}})],St.prototype,"radius",void 0),a([u({type:Number,range:{min:0},json:{default:0,write:!0}})],St.prototype,"referenceScale",void 0),a([X({heatmap:"heatmap"})],St.prototype,"type",void 0),a([u({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],St.prototype,"valueExpression",void 0),a([u({type:String})],St.prototype,"valueExpressionTitle",void 0),a([u({readOnly:!0})],St.prototype,"_pixelIntensityToDensity",null),St=j5=a([_("esri.renderers.HeatmapRenderer")],St);let qa=class extends de(A){constructor(){super(...arguments),this.color=new ne([0,0,0,0]),this.label=null,this.threshold=0}};a([u({type:ne,json:{write:!0}})],qa.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],qa.prototype,"label",void 0),a([u({type:Number,range:{min:0,max:1},json:{write:!0}})],qa.prototype,"threshold",void 0),qa=a([_("esri.renderers.support.OthersCategory")],qa);const VX={base:er,key:"type",typeMap:{size:Se,opacity:Nn}};let Cr=class extends ep(de(di)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ne([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new qa,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new Tt({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(mi)}getAttributeHash(){return this.visualVariables?.reduce((e,r)=>e+r.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,r)=>e+JSON.stringify(r),"")}async collectRequiredFields(e,r){await this.collectVVRequiredFields(e,r);for(const i of this.attributes)i.valueExpression&&await lr(e,r,null,i.valueExpression),i.field&&e.add(i.field)}};a([u({type:[$E],json:{write:!0}})],Cr.prototype,"attributes",void 0),a([u(N6)],Cr.prototype,"backgroundFillSymbol",void 0),a([u({type:ne,json:{write:!0}})],Cr.prototype,"defaultColor",void 0),a([u({type:String,json:{write:!0}})],Cr.prototype,"defaultLabel",void 0),a([u({type:Number,range:{min:0,max:1},json:{write:!0}})],Cr.prototype,"holePercentage",void 0),a([u({type:qa,json:{write:!0}})],Cr.prototype,"othersCategory",void 0),a([u({type:D6,json:{write:!0}})],Cr.prototype,"legendOptions",void 0),a([u({type:pt,json:{default:null,write:!0}})],Cr.prototype,"outline",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],Cr.prototype,"size",void 0),a([X({pieChart:"pie-chart"})],Cr.prototype,"type",void 0),a([u({types:[VX]})],Cr.prototype,"visualVariables",void 0),Cr=a([_("esri.renderers.PieChartRenderer")],Cr);const rp={key:"type",base:di,typeMap:{heatmap:St,simple:wr,"unique-value":ke,"class-breaks":lt,"dot-density":Or,dictionary:es,"pie-chart":Cr},errorContext:"renderer"},jE={key:"type",base:di,typeMap:{simple:wr,"unique-value":ke,"class-breaks":lt,heatmap:St},errorContext:"renderer",validate:zX};function zX(t){switch(t.type){case"simple":return qX(t);case"unique-value":return UX(t);case"class-breaks":return GX(t);case"heatmap":return t}}function qX(t){if(t.symbol)return t;N.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function UX(t){const e=t.uniqueValueInfos,r=e?.filter(({symbol:i,label:s},n)=>(i||N.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!i));return r?.length!==e?.length&&(t.uniqueValueInfos=r),t}function GX(t){const e=t.classBreakInfos,r=e?.filter(({symbol:i,label:s},n)=>(i||N.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!i));return r?.length!==e?.length&&(t.classBreakInfos=r),t}function hhe(t,e){return ah(t,null,e)}const BX=dh({types:rp});function ah(t,e,r){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(r?.messages&&r.messages.push(new hs("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:r})),null):BX(t,e,r):null}var V5;let zt=V5=class extends zo{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=_e("12px"),this.fields=[],this.renderer=null}writeFields(t,e,r){const i=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Hr(r,i,e)}readRenderer(t,e,r){const i=e.drawingInfo?.renderer;return i?ah(i,e,r)??void 0:V6(e,r)}clone(){return new V5({fields:P(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:P(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:P(this.popupTemplate),renderer:P(this.renderer),binType:P(this.binType),size:this.size})}};a([X({binning:"binning"})],zt.prototype,"type",void 0),a([X({geohash:"geohash",square:"square"}),u({type:["geohash","square"]})],zt.prototype,"binType",void 0),a([u({type:Number,json:{write:!0}})],zt.prototype,"fixedBinLevel",void 0),a([u({type:[Ae],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],zt.prototype,"labelingInfo",void 0),a([u(o4)],zt.prototype,"labelsVisible",void 0),a([u({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],zt.prototype,"maxScale",void 0),a([u(Lh)],zt.prototype,"popupEnabled",void 0),a([u({type:ea,json:{name:"popupInfo",write:!0}})],zt.prototype,"popupTemplate",void 0),a([u({cast:t=>t==="auto"?t:Vr(_e(t))})],zt.prototype,"size",void 0),a([u({type:[rr],json:{write:!0}})],zt.prototype,"fields",void 0),a([j("fields")],zt.prototype,"writeFields",null),a([u({types:rp,json:{write:{target:"drawingInfo.renderer"}}})],zt.prototype,"renderer",void 0),a([F("renderer",["drawingInfo.renderer"])],zt.prototype,"readRenderer",null),zt=V5=a([_("esri.layers.support.FeatureReductionBinning")],zt);var z5;function Jw(t){return t.type==="simple"&&!t.visualVariables?.length}let ut=z5=class extends A{constructor(t){super(t),this.type="cluster",this.clusterRadius=_e("80px"),this.clusterMinSize=_e("12px"),this.clusterMaxSize=_e("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,r){const i=e.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i?Jw(i)?null:ah(i,e,r)??void 0:V6(e,r)}readSymbol(t,e,r){const i=e.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i&&Jw(i)?ah(i,e,r)?.symbol:null}writeSymbol(t,e,r,i){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const n=new wr({symbol:t});e.drawingInfo={renderer:n.write({},i)}}}writeFields(t,e,r){const i=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Hr(r,i,e)}readFields(t,e,r){return t.filter(i=>!i.isAutoGenerated).map(i=>rr.fromJSON(i))}clone(){return new z5({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:P(this.labelingInfo),labelsVisible:this.labelsVisible,fields:P(this.fields),maxScale:this.maxScale,renderer:P(this.renderer),symbol:P(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:P(this.popupTemplate)})}};a([u({type:["cluster"],readOnly:!0,json:{write:!0}})],ut.prototype,"type",void 0),a([u({cast:t=>t==="auto"?t:Vr(_e(t)),json:{write:!0}})],ut.prototype,"clusterRadius",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],ut.prototype,"clusterMinSize",void 0),a([u({type:Number,cast:_e,json:{write:!0}})],ut.prototype,"clusterMaxSize",void 0),a([u({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ut.prototype,"maxScale",void 0),a([u(Lh)],ut.prototype,"popupEnabled",void 0),a([u({type:ea,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ut.prototype,"popupTemplate",void 0),a([u({types:rp,json:{write:{target:"drawingInfo.renderer"}}})],ut.prototype,"renderer",void 0),a([F("renderer",["drawingInfo.renderer"])],ut.prototype,"readRenderer",null),a([u({types:mz})],ut.prototype,"symbol",void 0),a([F("symbol",["drawingInfo.renderer"])],ut.prototype,"readSymbol",null),a([j("symbol")],ut.prototype,"writeSymbol",null),a([u({type:[Ae],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ut.prototype,"labelingInfo",void 0),a([u(o4)],ut.prototype,"labelsVisible",void 0),a([u({type:[rr],json:{write:!0}})],ut.prototype,"fields",void 0),a([j("fields")],ut.prototype,"writeFields",null),a([F("fields")],ut.prototype,"readFields",null),ut=z5=a([_("esri.layers.support.FeatureReductionCluster")],ut);var q5;let Cd=q5=class extends zo{constructor(t){super(t),this.type="selection"}clone(){return new q5}};a([u({type:["selection"]})],Cd.prototype,"type",void 0),Cd=q5=a([_("esri.layers.support.FeatureReductionSelection")],Cd);const Qw={key:"type",base:zo,typeMap:{cluster:ut,binning:zt}},WX={types:{key:"type",base:zo,typeMap:{selection:Cd,cluster:ut,binning:zt}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Qw},"portal-item":{types:Qw},"web-scene":{types:{key:"type",base:zo,typeMap:{selection:Cd}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:Ce}}}}},HX=()=>N.getLogger("esri.views.2d.layers.support.clusterUtils");re.add("esri-cluster-arcade-enabled",!0);const ZX=re("esri-cluster-arcade-enabled"),JX=new Set(["simple-line","simple-fill","picture-fill"]);function Yw(t,e){let r=e.clone();if(!QX(r))return r;if(e.symbols.some(i=>JX.has(i.type))&&(r=new wr({symbol:new Tt})),r.authoringInfo||(r.authoringInfo=new Ue),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");i.forEach(s=>{s.type==="rotation"?s.field?s.field=da(t,s.field,"avg_angle","number"):s.valueExpression&&(s.field=bp(t,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=da(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=da(t,s.field,"avg","number"):s.valueExpression&&(s.field=bp(t,s.valueExpression,"avg","number"),s.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=da(t,i.field,"sum","number"):i.valueExpression&&(i.field=bp(t,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=da(t,r.field,"mode","string"):r.valueExpression&&(r.field=bp(t,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=da(t,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=da(t,r.field,"avg","number"):r.valueExpression&&(r.field=bp(t,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const QX=t=>{const e=r=>HX().error(new M("Unsupported-renderer",r,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const r=t.normalizationType;if(r!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!ZX){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function YX(t,e,r){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const i=r,s="field",n=e.toLowerCase()+",norm:"+s+","+i.toLowerCase();return"cluster_avg_"+Mg(n)}}}function bp(t,e,r,i){const s=Mg(e),n=r==="mode"?`cluster_type_${s}`:r==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some(o=>o.name===n)||t.push(new rr({name:n,isAutoGenerated:!0,onStatisticExpression:new Po({expression:e,returnType:i}),statisticType:r})),n}function da(t,e,r,i,s){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const n=YX(r,e,s);return t.some(o=>o.name===n)||(r==="avg_norm"?t.push(new rr({name:n,isAutoGenerated:!0,onStatisticExpression:new Po({expression:`$feature.${e} / $feature.${s}`,returnType:i}),statisticType:"avg"})):t.push(new rr({name:n,isAutoGenerated:!0,onStatisticField:e,statisticType:r}))),n}const KX=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.aggregateGraphicOrigin=new eK(this),this.addHandles(ae(()=>this.renderer,()=>{if(this.featureReduction){const s=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",s)}},It))}set featureReduction(i){const s=this._normalizeFeatureReduction(i);this._set("featureReduction",s)}set renderer(i){}_withClusterVariable(i,s,n){const o=i.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(l=>l.type==="size")||o.visualVariables.push(new Se({field:"cluster_count",stops:[new os({value:1}),new os({useMinValue:!0,size:s}),new os({useMaxValue:!0,size:n})]}))),o}_normalizeFeatureReduction(i){if(i?.type!=="cluster")return i;const s=i.clone(),n=[new rr({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(s.fields??[]).filter(f=>!f.isAutoGenerated),l=i.renderer&&!i.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:c,clusterMaxSize:d}=s;if(l){s.fields=[...n,...o];const f=this._withClusterVariable(s.renderer,c,d);return s.effectiveFeatureRenderer=f,s.effectiveClusterRenderer=f,s}if(i.symbol){if(s.fields=[...n,...o],s.renderer=null,!this.renderer)return s.effectiveFeatureRenderer=null,s.effectiveClusterRenderer=null,s;const f=Yw(n,this.renderer),m=this._withClusterVariable(f,c,d),g="visualVariables"in m&&m.visualVariables?m.visualVariables:[],v=new wr({symbol:i.symbol,visualVariables:g});return s.fields=[...n,...o],s.effectiveFeatureRenderer=m,s.effectiveClusterRenderer=v,s}if(!this.renderer)return i;const h=Yw(n,this.renderer);s.fields=[...n,...o],s.renderer=h;const y=this._withClusterVariable(h,c,d);return s.effectiveFeatureRenderer=y,s.effectiveClusterRenderer=y,s}};return a([u({readOnly:!0,clonable:!1})],r.prototype,"aggregateGraphicOrigin",void 0),a([u(WX)],r.prototype,"featureReduction",null),r=a([_("esri.layers.mixins.FeatureReductionLayer")],r),r},Kw={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Xw={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},eb={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},XX={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":Kw,"web-map/basemap-base-layers":Xw,"web-map/tables":eb,"link-chart/operational-layers":{...Kw,LinkChartLayer:!0},"link-chart/basemap-base-layers":Xw,"link-chart/tables":eb,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},Y6=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,s,n){return n?.portalItem?.type==="Group Layer"?void 0:i}writeListMode(i,s,n,o){(o&&o.layerContainerType==="ground"||i&&o_(this,n,{},o))&&(s[n]=i)}writeOperationalLayerType(i,s,n){i&&(s[n]=i)}writeTitle(i,s){s.title=i??"Layer"}readVisibilityTimeExtent(i){return i?it.fromArray(i):null}writeVisibilityTimeExtent(i,s,n,o){i&&o.layerContainerType!=="tables"&&(i.isEmpty?o?.messages&&o.messages.push(new M("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):s[n]=i.toArray())}read(i,s){s&&(s.layer=this),kO(this,i,n=>super.read(i,n),s)}write(i,s){if(!this.persistenceEnabled&&!s?.ignorePersistenceEnabled)return null;if(s?.origin){const l=`${s.origin}/${s.layerContainerType||"operational-layers"}`;let d=!!XX[l]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(d=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(d=!1),!d)return s.messages?.push(new M("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(i,{...s,layer:this}),o=!!s&&!!s.messages&&!!s.messages.filter(l=>l instanceof M&&l.name==="web-document-write:property-required").length;return eg(n?.url)?(s?.messages?.push(new M("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return a([u({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,"id",void 0),a([F("id",["id"])],r.prototype,"readId",null),a([u(OI)],r.prototype,"listMode",void 0),a([j("listMode")],r.prototype,"writeListMode",null),a([u({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Ce,isRequired:!0}}}}})],r.prototype,"operationalLayerType",void 0),a([j("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),a([u(t5)],r.prototype,"opacity",void 0),a([u({type:Boolean,readOnly:!1})],r.prototype,"persistenceEnabled",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],r.prototype,"title",void 0),a([j("title"),j(["web-scene"],"title")],r.prototype,"writeTitle",null),a([u({type:it,json:{origins:{"web-scene":{write:{layerContainerTypes:Ce}}}}})],r.prototype,"visibilityTimeExtent",void 0),a([F("visibilityTimeExtent")],r.prototype,"readVisibilityTimeExtent",null),a([j(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[ve,wO]]}})],r.prototype,"writeVisibilityTimeExtent",null),a([u({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Ce}}})],r.prototype,"visible",void 0),r=a([_("esri.layers.mixins.OperationalLayer")],r),r};var U5;const M1=new be({asc:"ascending",desc:"descending"});var xc;let Ro=(xc=class extends A{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new U5({field:this.field,valueExpression:this.valueExpression,order:this.order})}},U5=xc,xc);a([u({type:String,json:{write:!0}})],Ro.prototype,"field",void 0),a([u({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ro.prototype,"valueExpression",void 0),a([u({type:M1.apiValues,json:{type:M1.jsonValues,read:M1.read,write:M1.write}})],Ro.prototype,"order",void 0),Ro=U5=a([_("esri.layers.support.OrderByInfo")],Ro);function VE(t,e,r){if(!t)return null;const i=t.find(n=>!!n.field);if(!i)return null;const s=new Ro;return s.read(i,r),[s]}function eee(t,e,r,i){const s=t.find(n=>!!n.field);s&&Hr(r,[s.toJSON()],e)}const tee={type:[Ro],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:VE},write:{writer:eee}}},ree=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.orderBy=null}};return a([u(tee)],r.prototype,"orderBy",void 0),r=a([_("esri.layers.mixins.OrderedLayer")],r),r},K6=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=st(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,n){if(s.itemId)return new ce({id:s.itemId,portal:n?.portal})}writePortalItem(i,s){i?.id&&(s.itemId=i.id)}async loadFromPortal(i,s){if(this.portalItem?.id)try{const{load:n}=await L(()=>import("./money-tides-layersLoader-B1h7T38X.js"),__vite__mapDeps([324,3,1,2,4,5,16,17,15,325,10,11,12]));return Re(s),await n({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},s)}catch(n){throw fi(n)||N.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(ki(s),!0)))}async setUserPrivileges(i,s){if(!qr.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:n,fullEdit:o},content:{updateItem:l}}=await this._fetchUserPrivileges(i,s);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",l)}catch(n){ki(n)}}async _fetchUserPrivileges(i,s){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(s);const o=!dt?.findCredential(this.url),l=i===n.id;if(l&&n.portal.user)return this._getUserPrivileges(n,o);let c,d;if(l)c=n.portal.url;else try{c=await xg(this.url,s)}catch(m){ki(m)}if(!c||!bO(c,n.portal.url))return this._fetchFallbackUserPrivileges(s);try{const m=s!=null?s.signal:null;d=await dt?.getCredential(`${c}/sharing`,{prompt:!1,signal:m})}catch(m){ki(m)}const h=!0,y=!1,f=!1;if(!d)return{features:{edit:h,fullEdit:y},content:{updateItem:f}};try{if(l?await n.reload():(n=new ce({id:i,portal:{url:c}}),await n.load(s)),n.portal.user)return this._getUserPrivileges(n,o)}catch(m){ki(m)}return{features:{edit:h,fullEdit:y},content:{updateItem:f}}}_getUserPrivileges(i,s){const n=KY(i);return s&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(i){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(i)}catch(n){ki(n)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const s=this.url?dt?.findCredential(this.url):null;if(!s)return!0;const n=I1.credential===s?I1.user:await this._fetchEditingUser(i);return I1.credential=s,I1.user=n,n?.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){const s=this.portalItem?.portal?.user;if(s)return s;const n=dt?.findServerInfo(this.url??"");if(!n?.owningSystemUrl)return null;const o=`${n.owningSystemUrl}/sharing/rest`,l=D.getDefault();if(l&&l.loaded&&Nd(l.restUrl)===Nd(o))return l.user;const c=`${o}/community/self`,d=i!=null?i.signal:null,h=await P2(Le(c,{authMode:"no-prompt",query:{f:"json"},signal:d}));return h.ok?Ie.fromJSON(h.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){const n=s?.portal,o=this.portalItem?.id&&(this.portalItem.portal||D.getDefault());return n&&o&&!Yb(o.restUrl,n.restUrl)?(s.messages&&s.messages.push(new M("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return a([u({type:ce})],r.prototype,"portalItem",null),a([F("web-document","portalItem",["itemId"])],r.prototype,"readPortalItem",null),a([j("web-document","portalItem",{itemId:{type:String}})],r.prototype,"writePortalItem",null),a([u({clonable:!1})],r.prototype,"resourceReferences",void 0),a([u({type:Boolean,readOnly:!0})],r.prototype,"userHasEditingPrivileges",void 0),a([u({type:Boolean,readOnly:!0})],r.prototype,"userHasFullEditingPrivileges",void 0),a([u({type:Boolean,readOnly:!0})],r.prototype,"userHasUpdateItemPrivileges",void 0),r=a([_("esri.layers.mixins.PortalLayer")],r),r},I1={credential:null,user:null};let nd=class extends Z{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};a([u()],nd.prototype,"updating",void 0),a([u()],nd.prototype,"status",void 0),nd=a([_("esri.layers.support.PublishingInfo")],nd);const iee=Symbol(),see=t=>{var s;var e;const r=t;let i=(s=class extends r{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const o=new nd;return this._checkPublishingStatus(o),o}_checkPublishingStatus(n){let c=0;const d=async y=>{let f;n.updating=!0;try{f=await this.fetchPublishingStatus()}catch{f="unavailable"}f!=="published"&&f!=="unavailable"||(n.status==="publishing"&&this.refresh(),h.remove()),n.status=f,n.updating=!1,h.removed||(c=setTimeout(d,y,y+125))},h={removed:!1,remove(){this.removed=!0,clearTimeout(c)}};this.when().catch(()=>h.remove()),d(250),this.addHandles(h)}},e=iee,s);return a([u({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=a([_("esri.layers.mixins.PublishableLayer")],i),i},jo=new q,kd=new WeakMap;function nee(t){aee(t)&&jo.push(new WeakRef(t))}function oee(t){const e=jo.find(r=>r.deref()===t);e&&jo.remove(e)}function aee(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function zE(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:zE(e,t%e):0}let Ly=0,E1=0;function lee(){const t=Date.now();let e=!1;for(const r of jo){const i=r.deref();i?i.refreshInterval&&t-(kd.get(i)??0)+5>=6e4*i.refreshInterval&&(kd.set(i,t),i.refresh(t)):e=!0}if(e)for(let r=jo.length-1;r>=0;r--)jo.at(r).deref()||jo.removeAt(r)}qb(()=>{const t=Date.now();let e=0;for(const r of jo){const i=r.deref();i&&(e=zE(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?kd.get(i)||kd.set(i,t):kd.delete(i))}if(e!==E1){if(E1=e,clearInterval(Ly),E1===0)return void(Ly=0);Ly=setInterval(lee,E1)}},It);const tb=.1,X6=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=lg(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||nee(this)},()=>{})}destroy(){oee(this)}castRefreshInterval(i){return i>=tb?i:i<=0?0:tb}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){jd(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{N.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}get test(){}};return a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Ce}}}}})],r.prototype,"refreshInterval",void 0),a([xe("refreshInterval")],r.prototype,"castRefreshInterval",null),a([u({readOnly:!0})],r.prototype,"refreshTimestamp",void 0),a([u({readOnly:!0})],r.prototype,"refreshParameters",null),r=a([_("esri.layers.mixins.RefreshableLayer")],r),r},e9=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s?.effectiveScaleRange!==void 0&&uee(i,s.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return a([u({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,"minScale",void 0),a([u({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,"maxScale",void 0),a([u({readOnly:!0})],r.prototype,"effectiveScaleRange",null),r=a([_("esri.layers.mixins.ScaleRangeLayer")],r),r};function uee(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const qE=Wt()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let zn=class extends de(A){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return V_(this.value,this.unit,"milliseconds")}};a([X(qE,{nonNullable:!0})],zn.prototype,"unit",void 0),a([u({type:Number,json:{write:!0},nonNullable:!0})],zn.prototype,"value",void 0),zn=a([_("esri.time.TimeInterval")],zn);function rb(t,e){return zn.fromJSON({value:t,unit:e})}let At=class extends de(A){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?it.fromArray(r.timeExtent):null}writeFullTimeExtent(e,r){e?.start!=null&&e.end!=null?r.timeExtent=e.toArray():r.timeExtent=null}readInterval(e,r){return r.timeInterval&&r.timeIntervalUnits?rb(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?rb(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(e,r){r.timeInterval=e?.toJSON().value??null,r.timeIntervalUnits=e?.toJSON().unit??null}};a([u({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],At.prototype,"cumulative",void 0),a([u({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],At.prototype,"endField",void 0),a([u({type:it,json:{write:{enabled:!0,allowNull:!0}}})],At.prototype,"fullTimeExtent",void 0),a([F("fullTimeExtent",["timeExtent"])],At.prototype,"readFullTimeExtent",null),a([j("fullTimeExtent")],At.prototype,"writeFullTimeExtent",null),a([u({type:Boolean,json:{write:!0}})],At.prototype,"hasLiveData",void 0),a([u({type:zn,json:{write:{enabled:!0,allowNull:!0}}})],At.prototype,"interval",void 0),a([F("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],At.prototype,"readInterval",null),a([j("interval")],At.prototype,"writeInterval",null),a([u({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],At.prototype,"startField",void 0),a([u(Fc("timeReference",!0))],At.prototype,"timeZone",void 0),a([u({type:String,json:{write:{enabled:!0,allowNull:!0}}})],At.prototype,"trackIdField",void 0),a([u({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],At.prototype,"useTime",void 0),a([u({type:[Date],json:{read:!1}})],At.prototype,"stops",void 0),At=a([_("esri.layers.support.TimeInfo")],At);const cee={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Ce}}},t9=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const n=s.timeInfo.exportOptions;if(!n)return null;const o=n.timeOffset,l=qE.fromJSON(n.timeOffsetUnits);return o&&l?new zn({value:o,unit:l}):null}set timeInfo(i){Qx(i,this.fieldsIndex),this._set("timeInfo",i)}};return a([u({type:it,json:{write:!1}})],r.prototype,"timeExtent",void 0),a([u({type:zn})],r.prototype,"timeOffset",void 0),a([F("service","timeOffset",["timeInfo.exportOptions"])],r.prototype,"readOffset",null),a([u({value:null,type:At,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],r.prototype,"timeInfo",null),a([u(cee)],r.prototype,"useViewTime",void 0),r=a([_("esri.layers.mixins.TemporalLayer")],r),r};let pee=class extends wl{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[Th](){return this.trackInfoProvider.trackInfo}},Fi=class extends de(A){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};a([u({type:[Ae],json:{write:!0}})],Fi.prototype,"labelingInfo",void 0),a([u(o4)],Fi.prototype,"labelsVisible",void 0),a([u({types:rp,json:{write:!0}})],Fi.prototype,"renderer",void 0),a([u({type:Boolean,json:{write:!0}})],Fi.prototype,"visible",void 0),Fi=a([_("esri.layers.support.TrackPartInfo")],Fi);let kr=class extends de(A){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new Fi({renderer:new wr({symbol:v2.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Fi({renderer:new wr({symbol:v2.clone()})}),this.trackLines=new Fi({renderer:new wr({symbol:A6.clone()})}),this.timeField="startTimeField"}writeFields(e,r,i){const s=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Hr(i,s,r)}};a([u({type:Boolean,json:{write:!0}})],kr.prototype,"enabled",void 0),a([u({type:[rr],json:{write:!0}})],kr.prototype,"fields",void 0),a([j("fields")],kr.prototype,"writeFields",null),a([u({type:Fi,json:{write:!0}})],kr.prototype,"latestObservations",void 0),a([u({type:zn,json:{write:!0}})],kr.prototype,"maxDisplayDuration",void 0),a([u({type:Number,json:{write:!0}})],kr.prototype,"maxDisplayObservationsPerTrack",void 0),a([u(Lh)],kr.prototype,"popupEnabled",void 0),a([u({type:ea,json:{name:"popupInfo",write:!0}})],kr.prototype,"popupTemplate",void 0),a([u({type:Fi,json:{write:!0}})],kr.prototype,"previousObservations",void 0),a([u({type:Fi,json:{write:!0}})],kr.prototype,"trackLines",void 0),a([u({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],kr.prototype,"timeField",void 0),kr=a([_("esri.layers.support.TrackInfo")],kr);const dee=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new pee(this),this.trackInfo=null}};return a([u({readOnly:!0,clonable:!1})],r.prototype,"trackGraphicOrigin",void 0),a([u({type:kr})],r.prototype,"trackInfo",void 0),r=a([_("esri.layers.mixins.TrackableLayer")],r),r},ib=new be({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Fs=class extends de(A){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};a([u({json:{write:!0}})],Fs.prototype,"name",void 0),a([u({json:{write:!0}})],Fs.prototype,"description",void 0),a([u({json:{read:ib.read,write:ib.write}})],Fs.prototype,"drawingTool",void 0),a([u({json:{write:!0}})],Fs.prototype,"prototype",void 0),a([u({json:{write:!0}})],Fs.prototype,"thumbnail",void 0),Fs=a([_("esri.layers.support.FeatureTemplate")],Fs);let rs=class extends de(A){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const r={};for(const i of Object.keys(e))r[i]=Y2(e[i]);return r}writeDomains(e,r){const i={};for(const s of Object.keys(e))e[s]&&(i[s]=e[s]?.toJSON());r.domains=i}};a([u({json:{write:!0}})],rs.prototype,"id",void 0),a([u({json:{write:!0}})],rs.prototype,"name",void 0),a([u({json:{write:!0}})],rs.prototype,"domains",void 0),a([F("domains")],rs.prototype,"readDomains",null),a([j("domains")],rs.prototype,"writeDomains",null),a([u({type:[Fs],json:{write:!0}})],rs.prototype,"templates",void 0),rs=a([_("esri.layers.support.FeatureType")],rs);let Oo=class extends de(A){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};a([u({type:String,json:{write:!0}})],Oo.prototype,"alias",void 0),a([u({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Oo.prototype,"name",void 0),a([u({types:y$,json:{write:!0}})],Oo.prototype,"fieldFormat",void 0),Oo=a([_("esri.layers.support.FieldConfiguration")],Oo);function hee(t){const{popupTemplate:e,fieldsIndex:r}=t,i=e?.fieldInfos;if(!i?.length||!r)return;const s=[];for(const n of i){const{fieldName:o,label:l}=n,c=r.get(o);if(!c)continue;const d=l&&l!==c.alias?l:null,h=uV(n,c);(d||h)&&s.push(new Oo({name:c.name,alias:d,fieldFormat:h}))}return s.length?s:null}function yee(t){const{fields:e}=t;if(!e?.length)return;const r=[];for(const i of e){const s=Ml(i)?vd(i):null;s&&r.push(new Oo({name:i.name,fieldFormat:s}))}return r.length?r:null}function fee(t,e){const{popupTemplate:r,fieldsIndex:i}=t;if(!r||!i)return;const s=mee(t,e,r.fieldInfos);if(!s)return;const n=r.clone();return n.fieldInfos=s,n}function mee(t,e,r){e??=[],r=P(r)??[];let i=!1;const s=new Map;for(const n of e){const o=t.fieldsIndex.get(n.name);o&&s.set(o.name,n)}for(const n of r){const o=t.fieldsIndex.get(n.fieldName);if(!o)continue;const l=s.get(o.name);n.label=l?.alias||o.alias,n.format=Ml(o)&&l?.fieldFormat?Kg(l.fieldFormat,o):null,i=!0,s.delete(o.name)}for(const n of s.values()){const o=gee(t,n);o&&(r.push(o),i=!0)}return i?r:null}function gee(t,e){const{name:r,alias:i,fieldFormat:s}=e,n=t.fieldsIndex.get(r);if(!n||!i&&!s)return;const o=i||n.alias,l=Ml(n)&&s?Kg(s,n):null;return new Z2({fieldName:n.name,label:o,format:l,visible:!1,isEditable:e$(n,t)})}function vee(){return{fields:{type:[xt],value:null,set:function(t){if(t&&re("big-integer-warning-enabled")){const e=t.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(e.length){const r=e.map(i=>`'${i.name}'`).join(", ");N.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return oh.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t?.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||N.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return W2(this.fieldsIndex,t)}}}}const Ny=()=>N.getLogger("esri.layers.support.labelingInfo"),wee=/\[([^[\]]+)\]/gi;function sb(t,e,r){return t?t.map(i=>{const s=new Ae;if(s.read(i,r),s.labelExpression){const n=e.fields||e.layerDefinition?.fields||this.fields;s.labelExpression=s.labelExpression.replaceAll(wee,(o,l)=>`[${bee(l,n)}]`)}return s}):null}function bee(t,e){if(!e)return t;const r=t.toLowerCase();for(let i=0;i<e.length;i++){const s=e[i].name;if(s.toLowerCase()===r)return s}return t}const nb=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],_ee={esriGeometryPoint:nb,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:nb,esriGeometryEnvelope:null};function See(t,e){const r=[];for(const i of t){const s=i.labelPlacement,n=_ee[e];if(!i.symbol)return Ny().warn("No ILabelClass symbol specified."),[];if(!n)return Ny().error(new M("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(n.includes(s))r.push(i);else{const o=n[0];s&&Ny().warn(`Found invalid label placement type ${s} for ${e}. Defaulting to ${o}`);const l=i.clone();l.labelPlacement=o,r.push(l)}}return r}const xee="relationships/",$ee="expression/",Tee=/<br\s*\/*>/gi;let pr=class extends Z{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||fh(()=>gl()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??L(()=>import("./money-tides-featureUtils-DlpwxlcS.js"),__vite__mapDeps([180,3,1,2,4,5,31,10,11,12])).then(e=>this._featureUtils=e)}get calculatedExpressions(){const e=new q;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const i=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(i.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:i,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(i,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return typeof e!="string"?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(r=>e.includes(`{expression/${r.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const i of this.calculatedExpressions?.toArray()??[])try{const s=this._arcadeTask.value.arcade.extractFieldLiterals(i.syntax);for(const n of s){const o=n.split("."),l=this.fieldsIndex.get(o.at(-1)??"");l&&e.add(l.name)}}catch{}const r=this._extractFieldNames(this.workingTitle);for(const i of r){const s=this.fieldsIndex.get(i);s&&e.add(s.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,r,i){const s=r.getObjectId()??r.attributes[e.objectIdField];return(await this.getTitles(e,[r],i)).get(s)??""}async getTitles(e,r,i){const s=new Map,n=i?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:o}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);i?.fetchMissingFields&&(r=await this._checkAndReQueryGraphics(e,r));const{fieldInfoMap:l,workingTitle:c}=this,d=c&&l;r.forEach(h=>{const y=h.getObjectId()??h.attributes[e.objectIdField];let f=d?o({attributes:h.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(e,h,n).global,layer:e,text:c}):"";i?.removeHTML&&(f=_O.sanitize(f).replaceAll(Tee," ")),s.set(y,f)})}catch{}return s}async _checkAndReQueryGraphics(e,r){const i=r.map(s=>s.getObjectId()??s.attributes[e.objectIdField]).filter(mi);if(i.length!==r.length)return r;if(r.some(s=>!iV(s,this.requiredFields))){const s=e.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=i;const n=await e.queryFeatures(s);if(n?.features.length===r.length)return n.features}return r}_createFieldInfoMap(e){const r=new Map;if(!e)return r;for(const i of e){if(!i.fieldName)continue;const s=this.fieldsIndex.get(i.fieldName),n=s?.name??i.fieldName;i.fieldName=n,r.set(n.toLowerCase(),i)}return r}_createFormattedAttributes(e,r,i="system"){const s=this.effectivePopupTemplate?.fieldInfos??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const l=this._arcadeTask.value.Feature.createFromGraphicLikeObject(r.geometry,r.attributes,e,null);for(const c of this.calculatedExpressions)try{n[`expression/${c.name}`]=c.func({vars:{$feature:l}})}catch{}}const o={...r.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:o,graphic:r,timeZone:i,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return Qg(e).filter(r=>!(r.startsWith(xee)||r.startsWith($ee)))}};a([u({readOnly:!0})],pr.prototype,"_arcadeTask",null),a([u()],pr.prototype,"_featureUtils",void 0),a([u({readOnly:!0})],pr.prototype,"featureUtilsPromise",null),a([u({readOnly:!0})],pr.prototype,"calculatedExpressions",null),a([u()],pr.prototype,"displayField",void 0),a([u()],pr.prototype,"effectivePopupTemplate",void 0),a([u()],pr.prototype,"expressionsUsedInTitle",null),a([u()],pr.prototype,"fieldsIndex",void 0),a([u()],pr.prototype,"fieldInfoMap",null),a([u()],pr.prototype,"fields",void 0),a([u()],pr.prototype,"objectIdField",void 0),a([u()],pr.prototype,"requiredFields",null),pr=a([_("esri.layers.support.TitleCreator")],pr);const Eu=[];function UE(t,e){if(i_(t.url??""))return!0;const{wkid:r}=e;for(const i of Eu){if((t.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}Eu.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Eu.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Eu.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Eu.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Eu.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function Mee(t,e,r){const i=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const s=await P2(i.populateFromStyle());if(Re(r),s.ok===!1){const n=s.error;e?.messages&&e.messages.push(new hs("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:e})),t.clear("renderer",e?.origin)}}}function GE({displayField:t,editFieldsInfo:e,fields:r,objectIdField:i,title:s},n){if(!r)return null;const o=Ree({editFieldsInfo:e,fields:r,objectIdField:i},n);if(!o.length)return null;const l=kee({titleBase:s,fields:r,displayField:t}),c=Cee();return new ea({title:l,content:c,fieldInfos:o})}const Iee=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):Lj(t,e);function Eee({fields:t,ignoreFieldTypes:e,sortDisabled:r}){const i=t;return e&&(t=t.filter(s=>!e.includes(s.type))),t===i&&(t=t.slice()),r!==!0&&t.sort(Pee),t}function Pee(t,e){return t.type==="oid"?-1:e.type==="oid"?1:ob(t)?-1:ob(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function Ree(t,e){const r=e?.visibleFieldNames;return Eee({fields:t.fields??[],ignoreFieldTypes:e?.ignoreFieldTypes||Fee,sortDisabled:e?.sortDisabled}).map(i=>new Z2({fieldName:i.name,isEditable:e$(i,t),label:i.alias,format:Oee(i),visible:Iee(i,{...t,visibleFieldNames:r})}))}function Oee(t){switch(t.type){case"small-integer":case"integer":return new Bn({digitSeparator:!0,places:0});case"single":case"double":return new Bn({digitSeparator:!0,places:2});case"string":return nV(t.name)?new Bn({digitSeparator:!0,places:0}):void 0;default:return}}function Cee(){return[new Uc,new qc]}function kee(t){const e=Mj(t),{titleBase:r}=t;return e?`${r}: {${e.trim()}}`:r??""}function ob(t){return(t.name&&t.name.toLowerCase())==="name"?!0:t.alias?.toLowerCase()==="name"}const Fee=["geometry","blob","raster","guid","xml"],Ft="FeatureLayer";function P1(t,e){return new M("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function ab(t){return t&&t instanceof q}const Dy=vee();function jy(t,e,r){const i=!!r?.writeLayerSchema;return{enabled:i,ignoreOrigin:i}}let W=class extends XY(KX(kJ(see(RJ(xJ(R6(ree(t9(dee(e9(X6(hI(Y6(K6(Fh(mI(dI(de(Fe))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new VZ(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=B.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=lg(async(r,i,s)=>{const{save:n,saveAs:o}=await L(()=>import("./money-tides-featureLayerUtils-Da6-Z2PF.js"),__vite__mapDeps([326,1,2,3,4,5,327,328,325,329,16,10,11,12]));switch(r){case 0:return n(this,i);case 1:return o(this,s,i)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,r){return typeof e=="string"?{url:e,...r}:e}load(e){const r=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(r).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(ki).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(r);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new M("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(r))}).then(()=>wY(this,"load",e));return this.addResolvingPromise(i),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return st(e),new pr({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,r){return r=r.layerDefinition||r,G6(r,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,r){return this._readEditingEnabled(r,!1)}readEditingEnabledFromWebMap(e,r,i){return this._readEditingEnabled(r,!0,i)}writeEditingEnabled(e,r){this._writeEditingEnabled(e,r,!1)}writeEditingEnabledToWebMap(e,r,i,s){this._writeEditingEnabled(e,r,!0,s)}get effectiveEditingEnabled(){return SY(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(e){if(this._hasMemorySource()||(this._override("fieldConfigurations",e),!this.loaded))return;const r=fee(this,e);r&&this._set("popupTemplate",r)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden("fieldConfigurations")?this._get("fieldConfigurations"):hee(this)||null}readIsTable(e,r){return(r=r?.layerDefinition??r).type==="Table"||!r.geometryType}writeIsTable(e,r,i,s){s?.writeLayerSchema&&Hr(i,e?"Table":"Feature Layer",r)}readGlobalIdField(e,r){return WI(r.layerDefinition||r)}readObjectIdField(e,r){return HI(r.layerDefinition||r)}writePopupTemplate(e,r,i,s){e&&(r[i]=e.toJSON({...s,writeFieldFormat:!s?.writeLayerSchema}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){zf(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,r,i){r=r.layerDefinition||r;const s=r.drawingInfo?.renderer;if(s){const n=ah(s,r,i)??void 0;return n||N.getLogger(this).error("Failed to create renderer",{rendererDefinition:r.drawingInfo.renderer,layer:this,context:i}),n}return V6(r,i)}set source(e){const r=this._get("source");r!==e&&(ab(r)&&this._resetMemorySource(r),ab(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof q?new Mn({layer:this,items:e}):e:null}readSource(e,r){const i=ct.fromJSON(r.featureSet);return new Mn({layer:this,items:i?.features??[]})}readTemplates(e,r){const i=r.editFieldsInfo,s=i?.creatorField,n=i?.editorField;return e=e?.map(o=>Fs.fromJSON(o)),this._fixTemplates(e,s),this._fixTemplates(e,n),e}readTitle(e,r){const i=r.layerDefinition?.name??r.name,s=r.title||r.layerDefinition?.title;if(i){const n=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?SO(this.url,i):i;let o=i;if(!o&&this.url){const l=Ec(this.url);l!=null&&(o=l.title)}return o?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==o&&(o=n+" - "+o),xO(o)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,r){return r.title||r.layerDefinition?.name}readTypeIdField(e,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();const s=r.fields.find(n=>n.name.toLowerCase()===i);s&&(i=s.name)}return i}readTypes(e,r){e=(r=r.layerDefinition||r).types;const i=r.editFieldsInfo,s=i?.creatorField,n=i?.editorField;return e?.map(o=>(o=rs.fromJSON(o),this._fixTemplates(o.templates,s),this._fixTemplates(o.templates,n),o))}readVisible(e,r){return r.layerDefinition?.defaultVisibility!=null?!!r.layerDefinition.defaultVisibility:r.visibility!=null?!!r.visibility:void 0}async addAttachment(e,r){const i=await eY(this,e,r,Ft);return this.lastEditsEventDate=new Date,i}async updateAttachment(e,r,i){const s=await tY(this,e,r,i,Ft);return this.lastEditsEventDate=new Date,s}async applyEdits(e,r){return rY(this,e,r)}async uploadAssets(e,r){return iY(this,e,r)}createFieldConfigurations(){return yee(this)}createPopupTemplate(e){return GE(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:r}=await Ei(L(()=>import("./money-tides-FeatureLayerSource-DTGzMExS.js"),__vite__mapDeps([330,1,2,3,4,5,68,11,12,73,331,332,116,117,333,323,10,55,50])),e);return new r({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=hY(this);e.dynamicDataSource=this.dynamicDataSource;const r=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=Hg(this.definitionExpression,r);return e.where=i||"1=1",e}async deleteAttachments(e,r){const i=await sY(this,e,r,Ft);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(e){return nY(this,e,Ft)}async getFeatureTitle(e,r){return this._titleCreator.getTitle(this,e,r)}async getFeatureTitles(e,r){return this._titleCreator.getTitles(this,e,r)}getFeatureType(e){return z6(this.types,this.typeIdField,e)}getFieldAlias(e){const r=this.getField(e);if(r)return this.getFieldConfiguration(r.name)?.alias||r.alias}getFieldConfiguration(e){return e=e.toLowerCase(),this.fieldConfigurations?.find(r=>r.name.toLowerCase()===e)}getFieldDomain(e,r){return fY(this,e,r,this.getField(e)?.domain??null)}async queryAttachments(e,r){return oY(this,e,r,Ft)}async queryFeatures(e,r){const i=await this.load(),s=await i.source.queryFeatures(H.from(e)??i.createQuery(),r),n=this.graphicOrigin;if(s?.features)for(const o of s.features)o.layer=o.sourceLayer=i,o.origin=n;return s}async queryObjectIds(e,r){return await aY(this,e,r,Ft)}async queryFeatureCount(e,r){return lY(this,e,r,Ft)}async queryExtent(e,r){return uY(this,e,r,Ft)}async queryRelatedFeatures(e,r){return cY(this,e,r,Ft)}async queryRelatedFeaturesCount(e,r){return pY(this,e,r,Ft)}async queryPivot(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryPivot||!s?.operations?.supportsQueryPivot)throw new M(Ft,"Layer source does not support queryPivot capability");const n=await L(()=>import("./money-tides-PivotQuery-COvS2xqy.js").then(l=>l.P),__vite__mapDeps([334,3,1,2,4,5,11,12])),o=await i.queryPivot(n.default.from(e),r);if(o?.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryTopFeatures(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryTopFeatures||!s?.query?.supportsTopFeaturesQuery)throw new M(Ft,"Layer source does not support queryTopFeatures capability");const n=await L(()=>import("./money-tides-TopFeaturesQuery-DZbE2EnP.js"),__vite__mapDeps([335,3,1,2,4,5,11,12,10])),o=await i.queryTopFeatures(n.default.from(e),r);if(o?.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryAttributeBins(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryAttributeBins)throw new M(Ft,"Layer source does not support queryAttributeBins capability");MY(e,s,Ft);const n=await L(()=>import("./money-tides-AttributeBinsQuery-Bash3wb-.js"),__vite__mapDeps([248,3,1,2,4,5,11,12,45,52,10])),o=await i.queryAttributeBins(n.default.from(e),r);if(o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryTopObjectIds(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryTopObjectIds||!s?.query.supportsTopFeaturesQuery)throw new M(Ft,"Layer source does not support queryTopObjectIds capability");const n=await L(()=>import("./money-tides-TopFeaturesQuery-DZbE2EnP.js"),__vite__mapDeps([335,3,1,2,4,5,11,12,10]));return(await i.queryTopObjectIds(n.default.from(e),r)).filter(aj)}async queryTopFeaturesExtent(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryTopExtents||!s?.query?.supportsTopFeaturesQuery)throw new M(Ft,"Layer source does not support queryTopExtents capability");const n=await L(()=>import("./money-tides-TopFeaturesQuery-DZbE2EnP.js"),__vite__mapDeps([335,3,1,2,4,5,11,12,10]));return i.queryTopExtents(n.default.from(e),r)}async queryTopFeatureCount(e,r){const{source:i,capabilities:s}=await this.load();if(!i.queryTopCount||!s?.query?.supportsTopFeaturesQuery)throw new M(Ft,"Layer source does not support queryFeatureCount capability");const n=await L(()=>import("./money-tides-TopFeaturesQuery-DZbE2EnP.js"),__vite__mapDeps([335,3,1,2,4,5,11,12,10]));return i.queryTopCount(n.default.from(e),r)}read(e,r){const i=e.featureCollection;if((i||e.type==="Feature Collection")&&(this.resourceInfo=e),i){const{layers:s,showLegend:n}=i;s?.length===1&&(super.read(s[0],r),n!=null&&super.read({showLegend:n},r))}super.read(e,r),r&&r.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,r){r={...r,origin:r?.origin??void 0,writeLayerSchema:r?.writeLayerSchema??this._hasMemorySource()};const{origin:i,layerContainerType:s,messages:n}=r;if(this.dynamicDataSource)return n?.push(P1(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&s!=="tables")return n?.push(P1(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return n?.push(P1(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&s==="tables")return n?.push(P1(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,r)}clone(){if(this._hasMemorySource())throw new M(Ft,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||UE(this,e))}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,r){return this._debouncedSaveOperations(1,r,e)}_readEditingEnabled(e,r,i){let s=e.layerDefinition?.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,r&&i?.origin==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(r=>r.trim()).includes("editing")}_writeEditingEnabled(e,r,i,s){if(!e){const n=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";Hr("layerDefinition.capabilities",n,r),i&&!s?.writeLayerSchema&&(r.capabilities=n)}}_fetchFirstValidLayerId(e){return Le(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(r=>{const i=r.data;if(i)return this.applyPreferredHost(i),this.findFirstValidLayerId(i)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),zf(this.renderer,this.fieldsIndex),Qx(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),Mee(this,{origin:"service"})}async hasDataChanged(){return dY(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,r){e&&e.forEach(i=>{const s=i.prototype?.attributes;s&&r&&delete s[r]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new M("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new M("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(r=>{r.layer=this,r.sourceLayer=this}),this.addHandles([e.on("after-add",r=>{r.item.layer=this,r.item.sourceLayer=this}),e.on("after-remove",r=>{r.item.layer=null,r.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(r=>{r.layer=null,r.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};a([u({clonable:!1,readOnly:!0})],W.prototype,"_titleCreator",null),a([u(BJ)],W.prototype,"attributeTableTemplate",void 0),a([F("service","capabilities")],W.prototype,"readCapabilities",null),a([u({json:{origins:{"web-scene":{write:!1}},write:!0}})],W.prototype,"charts",void 0),a([u({readOnly:!0})],W.prototype,"createQueryVersion",null),a([u({json:{read:{source:"layerDefinition.copyrightText"}}})],W.prototype,"copyright",void 0),a([u({json:{read:{source:"layerDefinition.displayField"}}})],W.prototype,"displayField",void 0),a([u({types:Ao,readOnly:!0})],W.prototype,"defaultSymbol",void 0),a([u({type:gr})],W.prototype,"dynamicDataSource",void 0),a([u({type:Boolean})],W.prototype,"editingEnabled",null),a([F(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],W.prototype,"readEditingEnabled",null),a([F("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],W.prototype,"readEditingEnabledFromWebMap",null),a([j(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],W.prototype,"writeEditingEnabled",null),a([j("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],W.prototype,"writeEditingEnabledToWebMap",null),a([u({readOnly:!0})],W.prototype,"effectiveEditingEnabled",null),a([u({clonable:!1,readOnly:!0})],W.prototype,"featureTitleFields",null),a([u({type:[Oo],json:{name:"layerDefinition.fieldConfigurations",write:{overridePolicy(t,e,r){return{enabled:!r?.writeLayerSchema,ignoreOrigin:this.originIdOf(e)===1}}}}})],W.prototype,"fieldConfigurations",null),a([u({...Dy.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:jy}}}}})],W.prototype,"fields",void 0),a([u(Dy.fieldsIndex)],W.prototype,"fieldsIndex",void 0),a([u({type:Xi,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],W.prototype,"formTemplate",void 0),a([u({json:{read:{source:"layerDefinition.extent"}}})],W.prototype,"fullExtent",void 0),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:jy,writer(t,e,r){const i=t?x5.toJSON(t):null;i&&Hr(r,i,e)}}}},read:{source:"layerDefinition.geometryType",reader:x5.read}}})],W.prototype,"geometryType",void 0),a([u({readOnly:!0,clonable:!1})],W.prototype,"graphicOrigin",void 0),a([u({json:{read:{source:"layerDefinition.hasM"}}})],W.prototype,"hasM",void 0),a([u({json:{read:{source:"layerDefinition.hasZ"}}})],W.prototype,"hasZ",void 0),a([u(RI)],W.prototype,"id",void 0),a([u({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],W.prototype,"infoFor3D",void 0),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],W.prototype,"isTable",void 0),a([F("service","isTable",["type","geometryType"]),F("isTable",["layerDefinition.type","layerDefinition.geometryType"])],W.prototype,"readIsTable",null),a([j("web-map","isTable")],W.prototype,"writeIsTable",null),a([u(o4)],W.prototype,"labelsVisible",void 0),a([u({type:[Ae],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:sb,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:sb,write:{layerContainerTypes:Ce}}})],W.prototype,"labelingInfo",void 0),a([u((()=>{const t=P(qJ);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,r,i){Hr(i,L2(e),r)}}},t})())],W.prototype,"opacity",void 0),a([u(EI)],W.prototype,"legendEnabled",void 0),a([u({type:["show","hide"],json:(()=>{const t=P(OI.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],W.prototype,"listMode",void 0),a([F("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],W.prototype,"readGlobalIdField",null),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:jy}}}}})],W.prototype,"objectIdField",void 0),a([F("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],W.prototype,"readObjectIdField",null),a([u({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Ce}}})],W.prototype,"operationalLayerType",void 0),a([u(Dy.outFields)],W.prototype,"outFields",void 0),a([u({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],W.prototype,"path",void 0),a([u(Lh)],W.prototype,"popupEnabled",void 0),a([u({type:ea,json:{name:"popupInfo",write:!0}})],W.prototype,"popupTemplate",void 0),a([j("popupTemplate")],W.prototype,"writePopupTemplate",null),a([u({readOnly:!0})],W.prototype,"defaultPopupTemplate",null),a([u({types:rp,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:jE,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Ce,overridePolicy:(t,e,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:Ce})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:Ce})}}})],W.prototype,"renderer",null),a([F("service","renderer",["drawingInfo.renderer","defaultSymbol"]),F("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],W.prototype,"readRenderer",null),a([u()],W.prototype,"resourceInfo",void 0),a([u((()=>{const t=P(VJ);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],W.prototype,"screenSizePerspectiveEnabled",void 0),a([u({clonable:!1})],W.prototype,"source",null),a([xe("source")],W.prototype,"castSource",null),a([F("portal-item","source",["featureSet"]),F("web-map","source",["featureSet"])],W.prototype,"readSource",null),a([u({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],W.prototype,"spatialReference",void 0),a([u({type:Number})],W.prototype,"subtypeCode",void 0),a([u({type:[Fs]})],W.prototype,"templates",void 0),a([F("templates",["editFieldsInfo","creatorField","editorField","templates"])],W.prototype,"readTemplates",null),a([u({type:At})],W.prototype,"timeInfo",void 0),a([u()],W.prototype,"title",void 0),a([F("service","title",["name"]),F("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],W.prototype,"readTitle",null),a([F("web-map","title",["layerDefinition.name","title"])],W.prototype,"readTitleFromWebMap",null),a([u({type:String})],W.prototype,"sublayerTitleMode",void 0),a([u({json:{read:!1}})],W.prototype,"type",void 0),a([u({type:String})],W.prototype,"typeIdField",void 0),a([F("service","typeIdField"),F("typeIdField",["layerDefinition.typeIdField"])],W.prototype,"readTypeIdField",null),a([u({type:[rs]})],W.prototype,"types",void 0),a([F("service","types",["types"]),F("types",["layerDefinition.types"])],W.prototype,"readTypes",null),a([u({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:Ce}}}}})],W.prototype,"visible",void 0),a([F("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],W.prototype,"readVisible",null),W=a([_("esri.layers.FeatureLayer")],W);const Aee=Object.freeze(Object.defineProperty({__proto__:null,get default(){return W}},Symbol.toStringTag,{value:"Module"})),Lee=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,s){const n=s.capabilities&&s.capabilities.split(",").map(T=>T.toLowerCase().trim());if(!n)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const o=this.type,l=o!=="tile"&&!!s.supportsDynamicLayers,c=n.includes("query"),d=n.includes("map"),h=!!s.exportTilesAllowed,y=n.includes("tilemap"),f=n.includes("data"),m=o!=="tile"&&(!s.tileInfo||l),g=o!=="tile"&&(!s.tileInfo||l),v=o!=="tile",b=o!=="tile"&&l&&s.currentVersion>=11.1,S=s.cimVersion?$6.parse(s.cimVersion):null,$=S?.greaterEqual(1,4)??!1,E=S?.greaterEqual(2,0)??!1;return{operations:{supportsExportMap:d,supportsExportTiles:h,supportsIdentify:c,supportsQuery:f,supportsTileMap:y},exportMap:d?{supportsArcadeExpressionForLabeling:$,supportsCIMSymbols:E,supportsDynamicLayers:l,supportsSublayerOrderBy:b,supportsSublayerDefinitionExpression:g,supportsSublayerVisibility:m,supportsSublayersChanges:v}:null,exportTiles:h?{maxExportTilesCount:+s.maxExportTilesCount}:null}}readVersion(i,s){let n=s.currentVersion;return n||(n=s.hasOwnProperty("capabilities")||s.hasOwnProperty("tables")?10:s.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}async fetchRelatedService(i){const s=this.portalItem;if(!s||!Ew(s))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=s.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(o=>o.find(l=>l.type==="Feature Service")??null,()=>null));const n=await this._relatedFeatureServicePromise;return Re(i),n?{itemId:n.id,url:n.url}:null}async fetchSublayerInfo(i,s){const{source:n}=i;if(this?.portalItem&&this.type==="tile"&&n?.type==="map-layer"&&Ew(this.portalItem)&&i.originIdOf("url")<2){const c=await this.fetchRelatedService(s);c&&(i.url=cl(c.url,n.mapLayerId.toString()),i.layerItemId=c.itemId)}const{url:o}=i;let l;if(n.type==="data-layer")l=(await Le(o,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...s})).data;else if(o&&i.originIdOf("url")>2)try{const c=await this._fetchAllLayersAndTablesFromService(o),d=Ec(o)?.sublayer??n.mapLayerId;l=c.get(d)}catch{}else{let c=i.id;n?.type==="map-layer"&&(c=n.mapLayerId);try{l=(await this.fetchAllLayersAndTables(s)).get(c)}catch{}}return l}async fetchAllLayersAndTables(i){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,i)}async _fetchAllLayersAndTablesFromService(i,s){await this.load(s),this._allLayersAndTablesMap||=new Map;const n=Ec(i),o=hh(this._allLayersAndTablesMap,n?.url.path,()=>Le(cl(n?.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(c=>{const d=new Map,{layers:h,tables:y}=c.data,f=[...h??[],...y??[]];for(const m of f)d.set(m.id,m);return{result:d}},c=>({error:c}))),l=await o;if(Re(s),"result"in l)return l.result;throw l.error}};return a([u({readOnly:!0})],r.prototype,"capabilities",void 0),a([F("service","capabilities",["capabilities","cimVersion","currentVersion","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],r.prototype,"readCapabilities",null),a([u({json:{read:{source:"copyrightText"}}})],r.prototype,"copyright",void 0),a([u({type:le})],r.prototype,"fullExtent",void 0),a([u(RI)],r.prototype,"id",void 0),a([u({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],r.prototype,"legendEnabled",void 0),a([u(Lh)],r.prototype,"popupEnabled",void 0),a([u({type:B})],r.prototype,"spatialReference",void 0),a([u({readOnly:!0})],r.prototype,"version",void 0),a([F("service","version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],r.prototype,"readVersion",null),r=a([_("esri.layers.mixins.ArcGISMapService")],r),r},Nee=Symbol("isMapImageGraphicOriginSymbol");var lb;let Dee=class extends wl{get[(lb=Nee,M6)](){return this.layer}constructor(e,r){super(),this[lb]=!0,this.type="map-image",this.layer=e,this.sublayer=r}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}};const jee=Symbol("isTileGraphicOriginSymbol");var ub;let Vee=class extends wl{get[(ub=jee,M6)](){return this.layer}constructor(e,r){super(),this[ub]=!0,this.type="tile",this.layer=e,this.sublayer=r}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}};function BE(t){const e={};for(const r in t){if(r==="declaredClass")continue;const i=t[r];if(i!=null&&typeof i!="function")if(Array.isArray(i)){e[r]=[];for(let s=0;s<i.length;s++)e[r][s]=BE(i[s])}else typeof i=="object"?i.toJSON&&(e[r]=JSON.stringify(i)):e[r]=i}return e}function zee(t){return 32+t.length}const WE=16;function qee(t){if(!t)return 0;let e=s9;for(const r in t)t.hasOwnProperty(r)&&(e+=r9(t[r],!1));return e}function Uee(t){if(!t)return 0;if(typeof t[0]=="number")return i9(t);if(Array.isArray(t))return Gee(t);let e=s9;for(const r in t)t.hasOwnProperty(r)&&(e+=r9(t[r]));return e}function Gee(t){const e=t.length;if(e===0||typeof t[0]=="number")return HE(t,8);let r=ZE;for(let i=0;i<e;i++)r+=r9(t[i]);return r}function r9(t,e=!0){switch(typeof t){case"object":return e?Uee(t):s9;case"string":return zee(t);case"number":return WE;case"boolean":return 4;default:return 8}}function i9(...t){return t.reduce((e,r)=>e+(r?Jb(r)?r.byteLength+Bee:Array.isArray(r)?HE(r,WE):0:0),0)}function HE(t,e){return ZE+t.length*e}const s9=32,ZE=16,Bee=145,cb=4294967296,Wee=new TextDecoder("utf-8"),Hee=re("safari")||re("ios")?6:re("ff")?12:32;var Vs;let Zee=(Vs=class{constructor(e,r,i=0,s=e?e.byteLength:0){this._tag=0,this._dataType=99,this._init(e,r,i,s)}_init(e,r,i,s){this._data=e,this._dataView=r,this._pos=i,this._end=s}get usedMemory(){return 64+i9(this._data)}asUnsafe(){return this}clone(){return new Vs(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,r=this._pos,i=e.getUint32(r,!0)+e.getUint32(r+4,!0)*cb;return this._skip(8),i}getSFixed64(){const e=this._dataView,r=this._pos,i=e.getUint32(r,!0)+e.getInt32(r+4,!0)*cb;return this._skip(8),i}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),r=this._pos,i=this._toString(this._data,r,r+e);return this._skip(e),i}getBytes(){const e=this._getLength(),r=this._pos,i=this._toBytes(this._data,r,r+e);return this._skip(e),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,r,i,s){const n=this.getMessage(),o=e(n,r,i,s);return n.release(),o}processMessage(e){const r=this.getMessage(),i=e(r);return r.release(),i}getMessage(){const e=this._getLength(),r=Vs.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),r}release(){Vs.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let r=this._pos,i=0,s=0;if(this._end-r>=10)do{if(s=e[r++],i|=127&s,!(128&s)||(s=e[r++],i|=(127&s)<<7,!(128&s))||(s=e[r++],i|=(127&s)<<14,!(128&s))||(s=e[r++],i|=(127&s)<<21,!(128&s))||(s=e[r++],i+=268435456*(127&s),!(128&s))||(s=e[r++],i+=34359738368*(127&s),!(128&s))||(s=e[r++],i+=4398046511104*(127&s),!(128&s))||(s=e[r++],i+=562949953421312*(127&s),!(128&s))||(s=e[r++],i+=72057594037927940*(127&s),!(128&s))||(s=e[r++],i+=9223372036854776e3*(127&s),!(128&s)))break;throw new Error("Varint too long!")}while(!1);else{let n=1;for(;r!==this._end&&(s=e[r],128&s);)++r,i+=(127&s)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=s*n}return this._pos=r,i}_decodeSVarint(){const e=this._data;let r,i=0,s=0;const n=1&e[this._pos];if(s=e[this._pos++],i|=127&s,!(128&s)||(s=e[this._pos++],i|=(127&s)<<7,!(128&s))||(s=e[this._pos++],i|=(127&s)<<14,!(128&s))||(s=e[this._pos++],i|=(127&s)<<21,!(128&s))||(s=e[this._pos++],i+=268435456*(127&s),!(128&s))||(s=e[this._pos++],i+=34359738368*(127&s),!(128&s))||(s=e[this._pos++],i+=4398046511104*(127&s),!(128&s)))return n?-(i+1)/2:i/2;if(r=BigInt(i),s=e[this._pos++],r+=0x2000000000000n*BigInt(127&s),!(128&s)||(s=e[this._pos++],r+=0x100000000000000n*BigInt(127&s),!(128&s))||(s=e[this._pos++],r+=0x8000000000000000n*BigInt(127&s),!(128&s)))return Number(n?-(r+1n)/2n:r/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==2)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,r,i){if((i=Math.min(this._end,i))-r>Hee){const o=e.subarray(r,i);return Wee.decode(o)}let s="",n="";for(let o=r;o<i;++o){const l=e[o];128&l?n+="%"+l.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(l),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(e,r,i){return i=Math.min(this._end,i),new Uint8Array(e.buffer,r,i-r)}},Vs.pool=new x2(()=>new Vs(null,null),void 0,e=>{e._data=null,e._dataView=null}),Vs);const ha=2;let Bt=class Pu{constructor(e=[],r=[]){this.lengths=e??[],this.coords=r??[]}static fromJSON(e){return new Pu(e.lengths,e.coords)}static fromRect(e){const[r,i,s,n]=e,o=s-r,l=n-i;return new Pu([5],[r,i,o,0,0,l,-o,0,0,-l])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,r)=>e+r)}get usedMemory(){return 64+i9(this.lengths,this.coords)}area(){let e=0,r=0;if(!this.lengths.length)return 0;for(let i=0;i<this.lengths.length;i++){const s=this.lengths[i];if(s<3)continue;let n=this.coords[ha*r],o=this.coords[ha*r+1];for(let l=1;l<s;l+=1){const c=this.coords[ha*(l+r)],d=this.coords[ha*(l+r)+1];e+=-.5*(c-n)*(d+o),n=c,o=d}r+=s}return e}forEachVertex(e){let r=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const s=this.lengths[i];for(let n=0;n<s;n++)e(this.coords[ha*(n+r)],this.coords[ha*(n+r)+1]);r+=s}}deltaDecode(){const e=this.clone(),{coords:r,lengths:i}=e;let s=0;for(const n of i){for(let o=1;o<n;o++)r[2*(s+o)]+=r[2*(s+o)-2],r[2*(s+o)+1]+=r[2*(s+o)-1];s+=n}return e}clone(e){if(this.lengths.length===0)return new Pu([],[this.coords[0],this.coords[1]]);const r=(this.lengths.length===0?1:this.lengths.reduce((s,n)=>s+n))*ha,i=this.coords.slice(0,r);return e?(e.set(i),new Pu(this.lengths,e)):new Pu(Array.from(this.lengths),Array.from(i))}};function n9(t,e){return t?e?4:3:e?3:2}function Jee(t,e,r,i){if(!e?.lengths.length)return null;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const s=t.coords,n=[],o=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:l,coords:c}=e,d=n9(r,i);let h=0;for(const y of l){const f=Qee(o,c,h,y,r,i);f&&n.push(f),h+=y*d}if(n.sort((y,f)=>{let m=y[2]-f[2];return m===0&&r&&(m=y[4]-f[4]),m}),n.length){let y=6*n[0][2];s[0]=n[0][0]/y,s[1]=n[0][1]/y,r&&(y=6*n[0][4],s[2]=y!==0?n[0][3]/y:0),(s[0]<o[0]||s[0]>o[1]||s[1]<o[2]||s[1]>o[3]||r&&(s[2]<o[4]||s[2]>o[5]))&&(s.length=0)}if(!s.length){const y=e.lengths[0]?Yee(c,0,l[0],r,i):null;if(!y)return null;s[0]=y[0],s[1]=y[1],r&&y.length>2&&(s[2]=y[2])}return t}function Qee(t,e,r,i,s,n){const o=n9(s,n);let l=r,c=r+o,d=0,h=0,y=0,f=0,m=0;for(let v=0,b=i-1;v<b;v++,l+=o,c+=o){const S=e[l],$=e[l+1],E=e[l+2],T=e[c],R=e[c+1],O=e[c+2];let z=S*R-T*$;f+=z,d+=(S+T)*z,h+=($+R)*z,s&&(z=S*O-T*E,y+=(E+O)*z,m+=z),S<t[0]&&(t[0]=S),S>t[1]&&(t[1]=S),$<t[2]&&(t[2]=$),$>t[3]&&(t[3]=$),s&&(E<t[4]&&(t[4]=E),E>t[5]&&(t[5]=E))}if(f>0&&(f*=-1),m>0&&(m*=-1),!f)return null;const g=[d,h,.5*f];return s&&(g[3]=y,g[4]=.5*m),g}function Yee(t,e,r,i,s){const n=n9(i,s);let o=e,l=e+n,c=0,d=0,h=0,y=0;for(let f=0,m=r-1;f<m;f++,o+=n,l+=n){const g=t[o],v=t[o+1],b=t[o+2],S=t[l],$=t[l+1],E=t[l+2],T=i?Xee(g,v,b,S,$,E):Kee(g,v,S,$);if(T)if(c+=T,i){const R=tte(g,v,b,S,$,E);d+=T*R[0],h+=T*R[1],y+=T*R[2]}else{const R=ete(g,v,S,$);d+=T*R[0],h+=T*R[1]}}return c>0?i?[d/c,h/c,y/c]:[d/c,h/c]:r>0?i?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function Kee(t,e,r,i){const s=r-t,n=i-e;return Math.sqrt(s*s+n*n)}function Xee(t,e,r,i,s,n){const o=i-t,l=s-e,c=n-r;return Math.sqrt(o*o+l*l+c*c)}function ete(t,e,r,i){return[t+.5*(r-t),e+.5*(i-e)]}function tte(t,e,r,i,s,n){return[t+.5*(i-t),e+.5*(s-e),r+.5*(n-r)]}let _l=class j0{constructor(e=null,r={},i,s,n=0){this.geometry=e,this.attributes=r,this.centroid=i,this.objectId=s,this.displayId=n}static fromJSON(e){const r=e.geometry?Bt.fromJSON(e.geometry):null,i=e.centroid?Bt.fromJSON(e.centroid):null,s=e.objectId;return new j0(r,e.attributes,i,s)}weakClone(){const e=new j0(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){const e=this.geometry?.clone(),r=new j0(e,{...this.attributes},this.centroid?.clone(),this.objectId);return r.displayId=this.displayId,r}ensureCentroid(e){return this.centroid??=Jee(new Bt,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+qee(this.attributes)+(this.geometry?.usedMemory??0)}};function rte(t){return!!t.geometry?.coords?.length}let JE=class QE{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new QE;return e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const YE=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let Ihe=class{constructor(e){this._options=e,this.geometryTypes=YE,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new JE}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||ot(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const r=Oc(this._options.sourceSpatialReference)/Oc(e.spatialReference);if(r!==1)for(const i of e.features){if(!rte(i))continue;const s=i.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=r}}addFeature(e,r){e.features.push(r)}createFeature(){return new _l(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new Bt}addField(e,r){e.fields.push(r)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((r,i)=>r+i,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,r){e.coords[this._coordinatePtr++]=r}addCoordinatePoint(e,r){e.coords.push(r)}addLength(e,r){e.lengths.push(r)}addQueryGeometry(e,r){e.queryGeometry=r.queryGeometry,e.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new Bt}};const pb=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],db=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],hb=["upperLeft","lowerLeft"];function yb(t){return t>=pb.length?null:pb[t]}function ite(t){return t>=db.length?null:db[t]}function fb(t){return t>=hb.length?null:hb[t]}function mb(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function ste(t,e,r){const s=t.asUnsafe(),n=e.createPointGeometry(r);for(;s.next();)switch(s.tag()){case 3:{const o=s.getUInt32(),l=s.pos()+o;let c=0;for(;s.pos()<l;)e.addCoordinatePoint(n,s.getSInt64(),c++);break}default:s.skip()}return n}function nte(t,e,r){const n=t.asUnsafe(),o=e.createGeometry(r),l=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const c=n.getUInt32(),d=n.pos()+c;let h=0;for(;n.pos()<d;)e.addLength(o,n.getUInt32(),h++);break}case 3:{const c=n.getUInt32(),d=n.pos()+c;let h=0;for(e.allocateCoordinates(o);n.pos()<d;)e.addCoordinate(o,n.getSInt64(),h),h++,h===l&&(h=0);break}default:n.skip()}return o}function ote(t){const s=t.asUnsafe(),n=new Bt;let o="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),c=s.pos()+l;for(;s.pos()<c;)n.lengths.push(s.getUInt32());break}case 3:{const l=s.getUInt32(),c=s.pos()+l;for(;s.pos()<c;)n.coords.push(s.getSInt64());break}case 1:o=YE[s.getEnum()];break;default:s.skip()}return{queryGeometry:n,queryGeometryType:o}}function ate(t){const h=t.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function lte(t){const l=t.asUnsafe(),c={type:yb(0)};for(;l.next();)switch(l.tag()){case 1:c.name=l.getString();break;case 2:c.type=yb(l.getEnum());break;case 3:c.alias=l.getString();break;case 4:c.sqlType=ite(l.getEnum());break;case 5:l.skip();break;case 6:c.defaultValue=l.getString();break;default:l.skip()}return c}function ute(t){const i={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:i.name=s.getString();break;case 2:i.isSystemMaintained=s.getBool();break;default:s.skip()}return i}function cte(t,e,r,i){const l=e.createFeature(r);let c=0;for(;t.next();)switch(t.tag()){case 1:{const d=i[c++].name;l.attributes[d]=t.processMessage(ate);break}case 2:l.geometry=t.processMessageWithArgs(nte,e,r);break;case 4:l.centroid=t.processMessageWithArgs(ste,e,r);break;default:t.skip()}return l}function pte(t){const n=[1,1,1,1],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function dte(t){const n=[0,0,0,0],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function hte(t){const s={originPosition:fb(0)},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.originPosition=fb(n.getEnum());break;case 2:s.scale=n.processMessage(pte);break;case 3:s.translate=n.processMessage(dte);break;default:n.skip()}return s}function yte(t){const s={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.shapeAreaFieldName=n.getString();break;case 2:s.shapeLengthFieldName=n.getString();break;case 3:s.units=n.getString();break;default:n.skip()}return s}function fte(t,e){const l=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:l.wkid=t.getUInt32();break;case 5:l.wkt=t.getString();break;case 2:l.latestWkid=t.getUInt32();break;case 3:l.vcsWkid=t.getUInt32();break;case 4:l.latestVcsWkid=t.getUInt32();break;default:t.skip()}return l}function mte(t,e){const v=e.createFeatureResult(),b=t.asUnsafe();v.geometryType=mb(e,0);let S=!1;for(;b.next();)switch(b.tag()){case 1:v.objectIdFieldName=b.getString();break;case 3:v.globalIdFieldName=b.getString();break;case 4:v.geohashFieldName=b.getString();break;case 5:v.geometryProperties=b.processMessage(yte);break;case 7:v.geometryType=mb(e,b.getEnum());break;case 8:v.spatialReference=b.processMessageWithArgs(fte,e);break;case 10:v.hasZ=b.getBool();break;case 11:v.hasM=b.getBool();break;case 12:v.transform=b.processMessage(hte);break;case 9:v.exceededTransferLimit=b.getBool();break;case 13:e.addField(v,b.processMessage(lte));break;case 15:S||(e.prepareFeatures(v),S=!0),e.addFeature(v,b.processMessageWithArgs(cte,e,v,v.fields));break;case 2:v.uniqueIdField=b.processMessage(ute);break;default:b.skip()}return e.finishFeatureResult(v),v}function gte(t,e){const s={};let n=null;for(;t.next();)switch(t.tag()){case 4:n=t.processMessageWithArgs(ote);break;case 1:s.featureResult=t.processMessageWithArgs(mte,e);break;default:t.skip()}return n!=null&&s.featureResult&&e.addQueryGeometry(s,n),s}function vte(t,e){try{const i=new Zee(new Uint8Array(t),new DataView(t)),s={};for(;i.next();)i.tag()===2?s.queryResult=i.processMessageWithArgs(gte,e):i.skip();return s}catch(r){throw new M("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function wte(t,e){const r=vte(t,e),i=r.queryResult.featureResult,s=r.queryResult.queryGeometry,n=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const o=i.objectIdFieldName;for(const l of i.features)l.attributes&&(l.objectId=l.attributes[o])}return i&&(i.queryGeometry=s,i.queryGeometryType=n),i}function bte(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const r=t.toJSON();return delete r.spatialReference,JSON.stringify(r)}function _te(t,e,r){const{geometry:i}=t,s=t.compactGeometryEnabled??!1,n=t.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const o=n;let l,c,d;if(i&&(c=i.spatialReference,d=qd(c),o.geometryType=Sh(i),o.geometry=bte(i,s),o.inSR=d),n.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds)switch(r?.uniqueIdFields?.length){case void 0:o.objectIds=n.objectIds.join(",");break;case 1:o.uniqueIds=JSON.stringify(n.objectIds),delete o.objectIds;break;default:o.uniqueIds=JSON.stringify(n.objectIds.map(h=>JSON.parse(h))),delete o.objectIds}if(n.orderByFields&&(o.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete o.outFields:n.outFields.includes("*")?o.outFields="*":o.outFields=n.outFields.join(","),n.outSR?(o.outSR=qd(n.outSR),l=t.outSpatialReference):i&&(n.returnGeometry||n.returnCentroid)&&(o.outSR=o.inSR,l=c),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(o.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(o.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(o.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&c!=null&&t.quantizationParameters?.extent!=null&&c.equals(t.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,o.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(o.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(o.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(o.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const h=n.timeExtent,{start:y,end:f}=h;y==null&&f==null||(o.time=y===f?y:`${y??"null"},${f??"null"}`),delete n.timeExtent}return t.defaultSpatialReferenceEnabled&&c!=null&&l!=null&&c.equals(l)&&(o.defaultSR=o.inSR,delete o.inSR,delete o.outSR),o}const gb="Layer does not support extent calculation.";function Ste(t,e,r){return _te(t,e,r)}async function xte(t,e,r,i,s){const n=e.timeExtent?.isEmpty?{data:{features:[]}}:await Dh(t,e,"json",i,void 0,s);return H3(e,r,n.data),n}async function $te(t,e,r,i,s){if(e.timeExtent?.isEmpty)return{data:r.createFeatureResult()};const n=await Tte(t,e,i,s),o=n;return o.data=wte(n.data,r),o}function Tte(t,e,r,i){return Dh(t,e,"pbf",r,void 0,i)}function Mte(t,e,r,i){return e.timeExtent?.isEmpty?Promise.resolve({data:{objectIds:[]}}):Dh(t,e,"json",r,{returnIdsOnly:!0},i)}function Ite(t,e,r,i){return e.timeExtent?.isEmpty?Promise.resolve({data:{count:0}}):Dh(t,e,"json",r,{returnIdsOnly:!0,returnCountOnly:!0},i)}async function Ete(t,e,r){if(e.timeExtent?.isEmpty)return{data:{count:0,extent:null}};const i=await Dh(t,e,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),s=i.data;if(s.hasOwnProperty("extent"))return i;if(s.features)throw new Error(gb);if(s.hasOwnProperty("count"))throw new Error(gb);return i}function Pte(t,e){if(!t.returnIdsOnly||!e.uniqueIdFields)return t;const r={...t,returnUniqueIdsOnly:!0};return delete r.returnIdsOnly,r}async function Dh(t,e,r,i={},s={},n={}){const o=typeof t=="string"?Hs(t):t,l=e.geometry?[e.geometry]:[],c=await OT(l,null,{signal:i.signal}),d=c?.[0];d!=null&&((e=e.clone()).geometry=d);const h=BE({...o.query,f:r,...Pte(s,n),...Ste(e,s,n)});return Le(cl(o.path,Rte(e,s)?"query3d":"query"),{...i,responseType:r==="pbf"?"array-buffer":"json",query:{...h,...i.query}})}function Rte(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}async function Ote(t,e,r,i){const s=ra(t),{data:n}=await Ite(s,H.from(e),r,i);return n.count}async function Cte(t,e,r){const i=ra(t),s=await Ete(i,H.from(e),{...r}),n=s.data.extent;return!n||isNaN(n.xmin)||isNaN(n.ymin)||isNaN(n.xmax)||isNaN(n.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:le.fromJSON(n)}}async function kte(t,e,r,i){const s=ra(t),{data:n}=await Mte(s,H.from(e),r,i);return n.objectIds??Ate(n.uniqueIds)??[]}function Fte(t){return!Array.isArray(t[0])}function Ate(t){if(t)return Fte(t)?t:t.map(e=>JSON.stringify(e))}async function Phe(t,e,r,i){const s=await KE(t,e,r,i);return ct.fromJSON(s)}async function KE(t,e,r,i){const s=ra(t),n={...r},o=H.from(e),{data:l}=await xte(s,o,o.sourceSpatialReference,n,i);return l}function jt(t,e){return t?e?4:3:e?3:2}const y4=()=>N.getLogger("esri.layers.graphics.featureConversionUtils"),o9={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},Lte=(t,e,r,i,s,n)=>{t[r]=s,t[r+1]=n},vb=(t,e,r,i,s,n)=>{t[r]=s,t[r+1]=n,t[r+2]=e[i+2]},Nte=(t,e,r,i,s,n)=>{t[r]=s,t[r+1]=n,t[r+2]=e[i+3]},Dte=(t,e,r,i,s,n)=>{t[r]=s,t[r+1]=n,t[r+2]=e[i+2],t[r+3]=e[i+3]};function a9(t,e,r,i){if(t){if(r)return e&&i?Dte:vb;if(e&&i)return Nte}else if(e&&i)return vb;return Lte}function Vy({scale:t,translate:e},r){return Math.round((r-e[0])/t[0])}function zy({scale:t,translate:e},r){return Math.round((e[1]-r)/t[1])}function qy({scale:t,translate:e},r){return Math.round((r-e[0])/t[0])}function Uy({scale:t,translate:e},r){return Math.round((r-e[1])/t[1])}function Gy({scale:t,translate:e},r,i){return r*t[i]+e[i]}function Rhe(t,e,r){return t?e?r?c9(t):l9(t):r?u9(t):f4(t):null}function f4(t){const e=t.coords;return{x:e[0],y:e[1]}}function XE(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function l9(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function jte(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function u9(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function Vte(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function c9(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function zte(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function qte(t,e,r,i){let s=f4;r&&i?s=c9:r?s=l9:i&&(s=u9);for(const n of e){const{geometry:o,attributes:l}=n,c=o!=null?s(o):null;t.push({attributes:l,geometry:c})}return t}function p9(t,e){return t&&e?zte:t?jte:e?Vte:XE}function Ute(t,e,r,i,s){const n=p9(r,i);for(const o of e){const l=o.geometry!=null?n(new Bt,o.geometry):null;t.push(new _l(l,o.attributes,null,Mh(o,s)))}return t}function Gte(t,e,r=p9(e.z!=null,e.m!=null)){return r(t,e)}function Bte(t,e,r,i){for(const{geometry:s,attributes:n}of e)t.push({attributes:n,geometry:s!=null?eP(s,r,i):null});return t}function eP(t,e,r){if(t==null)return null;const i=jt(e,r),s=[];for(let n=0;n<t.coords.length;n+=i){const o=[];for(let l=0;l<i;l++)o.push(t.coords[n+l]);s.push(o)}return e?r?{points:s,hasZ:e,hasM:r}:{points:s,hasZ:e}:r?{points:s,hasM:r}:{points:s}}function Wte(t,e,r,i,s){const n=jt(r,i);for(const o of e){const l=o.geometry!=null?tP(new Bt,o.geometry,n):null;t.push(new _l(l,o.attributes,null,Mh(o,s)))}return t}function tP(t,e,r=jt(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const i=t.coords;let s=0;for(const n of e.points)for(let o=0;o<r;o++)i[s++]=n[o];return t}function Hte(t,e,r,i){for(const{geometry:s,attributes:n}of e)t.push({attributes:n,geometry:s!=null?rP(s,r,i):null});return t}function rP(t,e,r){if(!t)return null;const i=jt(e,r),{coords:s,lengths:n}=t,o=[];let l=0;for(const c of n){const d=[];for(let h=0;h<c;h++){const y=[];for(let f=0;f<i;f++)y.push(s[l++]);d.push(y)}o.push(d)}return e?r?{paths:o,hasZ:e,hasM:r}:{paths:o,hasZ:e}:r?{paths:o,hasM:r}:{paths:o}}function Zte(t,e,r,i,s){const n=jt(r,i);for(const o of e){const l=o.geometry!=null?iP(new Bt,o.geometry,n):null,c=o.centroid!=null?Gte(new Bt,o.centroid):null;t.push(new _l(l,o.attributes,c,Mh(o,s)))}return t}function iP(t,e,r=jt(e.hasZ,e.hasM)){const{lengths:i,coords:s}=t;let n=0;for(const o of e.paths){for(const l of o)for(let c=0;c<r;c++)s[n++]=l[c];i.push(o.length)}return t}function Jte(t,e,r,i){for(const{geometry:s,attributes:n,centroid:o}of e){const l=s!=null?sP(s,r,i):null;if(o!=null){const c=f4(o);t.push({attributes:n,centroid:c,geometry:l})}else t.push({attributes:n,geometry:l})}return t}function sP(t,e,r){if(!t)return null;const i=jt(e,r),{coords:s,lengths:n}=t,o=[];let l=0;for(const c of n){const d=[];for(let h=0;h<c;h++){const y=[];for(let f=0;f<i;f++)y.push(s[l++]);d.push(y)}o.push(d)}return e?r?{rings:o,hasZ:e,hasM:r}:{rings:o,hasZ:e}:r?{rings:o,hasM:r}:{rings:o}}function Qte(t,e,r,i,s){for(const n of e){const o=n.geometry!=null?nP(new Bt,n.geometry,r,i):null,l=Mh(n,s);n.centroid!=null?t.push(new _l(o,n.attributes,XE(new Bt,n.centroid),l)):t.push(new _l(o,n.attributes,null,l))}return t}function nP(t,e,r=e.hasZ,i=e.hasM){return Yte(t,e.rings,r,i)}function Yte(t,e,r,i){const s=jt(r,i),{lengths:n,coords:o}=t;let l=0;Wn(t);for(const c of e){for(const d of c)for(let h=0;h<s;h++)o[l++]=d[h];n.push(c.length)}return t}const Yu=[],Fd=[];function Ohe(t,e,r,i,s){Yu[0]=t;const[n]=oP(Fd,Yu,e,r,i,s);return ms(Yu),ms(Fd),n}function oP(t,e,r,i,s,n){if(ms(t),!r){for(const o of e){const l=Mh(o,n);t.push(new _l(null,o.attributes,null,l))}return t}switch(r){case"esriGeometryPoint":return Ute(t,e,i,s,n);case"esriGeometryMultipoint":return Wte(t,e,i,s,n);case"esriGeometryPolyline":return Zte(t,e,i,s,n);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return Qte(t,e,i,s,n);default:y4().error("convertToFeatureSet:unknown-geometry",new M("internal:geometry",`Unable to parse unknown geometry type '${r}'`)),ms(t)}return t}function Che(t,e,r,i){Fd[0]=t,lP(Yu,Fd,e,r,i);const s=Yu[0];return ms(Yu),ms(Fd),s}function khe(t,e,r){if(t==null)return null;const i=new Bt;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&r==null&&(r=t.hasM),Bg(t)?p9(e??t.z!=null,r??t.m!=null)(i,t):Ka(t)?nP(i,t,e,r):Wg(t)?iP(i,t,jt(e,r)):Gg(t)?tP(i,t,jt(e,r)):void y4().error("convertFromGeometry:unknown-geometry",new M("internal:geometry",`Unable to parse unknown geometry type '${t}'`))}function aP(t,e,r,i){const s=t&&("coords"in t?t:t.geometry);if(s==null)return null;switch(e){case"esriGeometryPoint":{let n=f4;return r&&i?n=c9:r?n=l9:i&&(n=u9),n(s)}case"esriGeometryMultipoint":return eP(s,r,i);case"esriGeometryPolyline":return rP(s,r,i);case"esriGeometryPolygon":return sP(s,r,i);default:return y4().error("convertToGeometry:unknown-geometry",new M("internal:geometry",`Unable to parse unknown geometry type '${e}'`)),null}}function Kte(t,e){for(const r of e)t.push({attributes:r.attributes});return t}function lP(t,e,r,i,s){if(ms(t),r==null)return Kte(t,e);switch(r){case"esriGeometryPoint":return qte(t,e,i,s);case"esriGeometryMultipoint":return Bte(t,e,i,s);case"esriGeometryPolyline":return Hte(t,e,i,s);case"esriGeometryPolygon":return Jte(t,e,i,s);default:y4().error("convertToFeatureSet:unknown-geometry",new M("internal:geometry",`Unable to parse unknown geometry type '${r}'`))}return t}function Fhe(t){const{spatialReference:e,transform:r,fields:i,hasM:s,hasZ:n,features:o,geometryType:l,exceededTransferLimit:c,queryGeometry:d,queryGeometryType:h}=t,y={features:lP([],o,l,n,s),fields:i,geometryType:l,spatialReference:e,queryGeometry:aP(d,h,!1,!1)};return r&&(y.transform=r),c&&(y.exceededTransferLimit=c),s&&(y.hasM=s),n&&(y.hasZ=n),y}function Ahe(t,e){const r=new JE,{hasM:i,hasZ:s,features:n,spatialReference:o,geometryType:l,exceededTransferLimit:c,transform:d,fields:h}=t;return h&&(r.fields=h),r.geometryType=l??null,r.spatialReference=o??null,n&&oP(r.features,n,l,s,i,e),c&&(r.exceededTransferLimit=c),i&&(r.hasM=i),s&&(r.hasZ=s),d&&(r.transform=d),r}function Lhe(t){const{transform:e,features:r,hasM:i,hasZ:s}=t;if(!e)return t;for(const n of r)n.geometry!=null&&B5(n.geometry,n.geometry,i,s,e),n.centroid!=null&&B5(n.centroid,n.centroid,i,s,e);return t.transform=null,t}function Nhe(t,e){const{geometryType:r,features:i,hasM:s,hasZ:n}=e;if(!t)return e;for(let o=0;o<i.length;o++){const l=i[o],c=l.weakClone();c.geometry=new Bt,wb(c.geometry,l.geometry,s,n,r,t),l.centroid&&(c.centroid=new Bt,wb(c.centroid,l.centroid,s,n,"esriGeometryPoint",t)),i[o]=c}return e.transform=t,e}function wb(t,e,r,i,s,n,o=r,l=i){if(Wn(t),!e?.coords.length)return null;const c=o9[s],{coords:d,lengths:h}=e,y=jt(r,i),f=jt(r&&o,i&&l),m=a9(r,i,o,l);if(!h.length)return m(t.coords,d,0,0,Vy(n,d[0]),zy(n,d[1])),Wn(t,y,0),t;let g,v,b,S,$=0,E=0,T=E;for(const R of h){if(R<c)continue;let O=0;E=T,b=g=Vy(n,d[$]),S=v=zy(n,d[$+1]),m(t.coords,d,E,$,b,S),O++,$+=y,E+=f;for(let z=1;z<R;z++,$+=y)b=Vy(n,d[$]),S=zy(n,d[$+1]),b===g&&S===v||(m(t.coords,d,E,$,b-g,S-v),E+=f,O++,g=b,v=S);O>=c&&(t.lengths.push(O),T=E)}return ms(t.coords,T),t.coords.length?t:null}function Dhe(t,e,r,i,s,n,o=r,l=i){if(Wn(t),!e?.coords.length)return null;const c=o9[s],{coords:d,lengths:h}=e,y=jt(r,i),f=jt(r&&o,i&&l),m=a9(r,i,o,l);if(!h.length)return m(t.coords,d,0,0,d[0],d[1]),Wn(t,y,0),t;let g=0;const v=n*n;for(const b of h){if(b<c){g+=b*y;continue}const S=t.coords.length/f,$=g,E=g+(b-1)*y;m(t.coords,d,t.coords.length,$,d[$],d[$+1]),G5(t.coords,d,y,v,m,$,E),m(t.coords,d,t.coords.length,E,d[E],d[E+1]);const T=t.coords.length/f-S;T>=c?t.lengths.push(T):ms(t.coords,S*f),g+=b*y}return t.coords.length?t:null}function Xte(t,e,r,i){const s=t[e],n=t[e+1],o=t[r],l=t[r+1],c=t[i],d=t[i+1];let h=o,y=l,f=c-h,m=d-y;if(f!==0||m!==0){const g=((s-h)*f+(n-y)*m)/(f*f+m*m);g>1?(h=c,y=d):g>0&&(h+=f*g,y+=m*g)}return f=s-h,m=n-y,f*f+m*m}function G5(t,e,r,i,s,n,o){let l,c=i,d=0;for(let h=n+r;h<o;h+=r)l=Xte(e,h,n,o),l>c&&(d=h,c=l);c>i&&(d-n>r&&G5(t,e,r,i,s,n,d),s(t,e,t.length,d,e[d],e[d+1]),o-d>r&&G5(t,e,r,i,s,d,o))}function jhe(t,e,r,i){if(!e?.coords?.length)return null;const s=jt(r,i);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(e&&e.coords){const d=e.coords;for(let h=0;h<d.length;h+=s){const y=d[h],f=d[h+1];n=Math.min(n,y),l=Math.max(l,y),o=Math.min(o,f),c=Math.max(c,f)}}return wm(t)?WV(t,n,o,l,c):fS(n,o,l,c,t),t}function B5(t,e,r,i,s){const{coords:n,lengths:o}=e,l=jt(r,i);if(!n.length)return t!==e&&Wn(t),t;$2(s);const{originPosition:c,scale:d,translate:h}=s,y=rre;y.originPosition=c;const f=y.scale;f[0]=d[0]??1,f[1]=-(d[1]??1),f[2]=d[2]??1,f[3]=d[3]??1;const m=y.translate;if(m[0]=h[0]??0,m[1]=h[1]??0,m[2]=h[2]??0,m[3]=h[3]??0,!o.length){for(let v=0;v<l;++v)t.coords[v]=Gy(y,n[v],v);return t!==e&&Wn(t,l,0),t}let g=0;for(let v=0;v<o.length;v++){const b=o[v];t.lengths[v]=b;for(let E=0;E<l;++E)t.coords[g+E]=Gy(y,n[g+E],E);let S=t.coords[g],$=t.coords[g+1];g+=l;for(let E=1;E<b;E++,g+=l){S+=n[g]*f[0],$+=n[g+1]*f[1],t.coords[g]=S,t.coords[g+1]=$;for(let T=2;T<l;++T)t.coords[g+T]=Gy(y,n[g+T],T)}}return t!==e&&Wn(t,n.length,o.length),t}function Vhe(t,e,r,i,s,n){if(Wn(t),t.lengths.push(...e.lengths),r===s&&i===n)for(let o=0;o<e.coords.length;o++)t.coords.push(e.coords[o]);else{const o=jt(r,i),l=a9(r,i,s,n),c=e.coords;for(let d=0;d<c.length;d+=o)l(t.coords,c,t.coords.length,d,c[d],c[d+1])}return t}function ere(t,e,r,i){let s=0,n=t[i*e],o=t[i*(e+1)];for(let l=1;l<r;l++){const c=n+t[i*(e+l)],d=o+t[i*(e+l)+1],h=(c-n)*(d+o);n=c,o=d,s+=h}return .5*s}function zhe(t,e){const{coords:r,lengths:i}=t;let s=0,n=0;for(let o=0;o<i.length;o++){const l=i[o];n+=ere(r,s,l,e),s+=l}return Math.abs(n)}function tre(t,e,r,i){return t*i-r*e===0&&t*r+e*i>0}function qhe(t,e,r,i,s){const n=jt(i,s);if(!t.lengths.length){if(t.coords.length<2)return null;const[y,f]=t.coords,m=qy(e,y),g=Uy(e,f);return new Bt([],[m,g])}const o=new Bt([],[0,0]),l=o9[r],c=r==="esriGeometryPolygon"||r==="esriGeometryPolyline";let d=0,h=0;for(let y=0;y<t.lengths.length;y++){const f=t.lengths[y],m=h;let g=qy(e,t.coords[n*d]),v=Uy(e,t.coords[n*d+1]);o.coords[h++]=g,o.coords[h++]=v;let b=0,S=0,$=1;for(let E=1;E<f;E++){const T=qy(e,t.coords[n*(E+d)]),R=Uy(e,t.coords[n*(E+d)+1]);if(T!==g||R!==v){const O=T-g,z=R-v;c&&tre(b,S,O,z)?(o.coords[h-2]+=O,o.coords[h-1]+=z,g+=O,v+=z):(o.coords[h++]=T,o.coords[h++]=R,g=T,v=R,b=O,S=z,$+=1)}}$<l?h=m:o.lengths.push($),d+=f}return o.lengths.length===0?null:o}function Wn(t,e=0,r=0){ms(t.lengths,r),ms(t.coords,e)}function ms(t,e=0){t.length!==e&&(t.length=e)}const rre={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function ire(t,e){return e}function d9(t,e,r,i){switch(r){case 0:return lh(t,e+i,0);case 1:return t.originPosition==="lowerLeft"?lh(t,e+i,1):ore(t,e+i,1)}}function uP(t,e,r,i){return r===2?lh(t,e,2):d9(t,e,r,i)}function sre(t,e,r,i){return r===2?e===0?0:lh(t,e,3):d9(t,e,r,i)}function nre(t,e,r,i){return r===3?e===0?0:lh(t,e,3):uP(t,e,r,i)}function lh({translate:t,scale:e},r,i){return t[i]+r*e[i]}function ore({translate:t,scale:e},r,i){return t[i]-r*e[i]}let are=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=ire,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const r=zg(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(r!=null)for(const i of e.features)r(i.geometry)}createSpatialReference(){return{}}addField(e,r){const i=e.fields;$2(i),i.push(r);const s=i.map(n=>n.name);this._attributesConstructor=function(){for(const n of s)this[n]=null}}addFeature(e,r){e.features.push(r)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(r,i,s)=>this.addCoordinatePoint(r,i,s),this.createGeometry=r=>this.createPointGeometry(r);break;case"esriGeometryPolygon":this.addCoordinate=(r,i,s)=>this._addCoordinatePolygon(r,i,s),this.createGeometry=r=>this._createPolygonGeometry(r);break;case"esriGeometryPolyline":this.addCoordinate=(r,i,s)=>this._addCoordinatePolyline(r,i,s),this.createGeometry=r=>this._createPolylineGeometry(r);break;case"esriGeometryMultipoint":this.addCoordinate=(r,i,s)=>this._addCoordinateMultipoint(r,i,s),this.createGeometry=r=>this._createMultipointGeometry(r)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,r,i){this._lengths.length===0&&(this._toAddInCurrentPath=r),this._lengths.push(r)}addQueryGeometry(e,r){const{queryGeometry:i,queryGeometryType:s}=r,n=this._transform?B5(i.clone(),i,!1,!1,this._transform):i.clone(),o=aP(n,s,!1,!1);e.queryGeometryType=s,e.queryGeometry={...o}}createPointGeometry(e){const r={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(r.z=0),e.hasM&&(r.m=0),r}addCoordinatePoint(e,r,i){const s=this._transform;switch(r=this._applyTransform(s,r,i,0),i){case 0:e.x=r;break;case 1:e.y=r;break;case 2:"z"in e?e.z=r:e.m=r;break;case 3:e.m=r}}_transformPathLikeValue(e,r){let i=0;r<=1&&(i=this._previousCoordinate[r],this._previousCoordinate[r]+=e);const s=this._transform;return this._mValueOffset!==null&&e===0&&r>0&&!(r%this._mValueOffset)?0:this._applyTransform(s,e,r,i)}_addCoordinatePolyline(e,r,i){this._dehydratedAddPointsCoordinate(e.paths,r,i)}_addCoordinatePolygon(e,r,i){this._dehydratedAddPointsCoordinate(e.rings,r,i)}_addCoordinateMultipoint(e,r,i){i===0&&e.points.push([]);const s=this._transformPathLikeValue(r,i);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,r,i){i===0&&this._toAddInCurrentPath--===0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(r,i),n=e[e.length-1];i===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),n.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:r,hasM:i}=e;return r&&i?nre:r?uP:i?sre:d9}};async function lre(t,e,r,i){const s=ra(t),n={...r},o=H.from(e),l=!o.quantizationParameters,{data:c}=await $te(s,o,new are({sourceSpatialReference:o.sourceSpatialReference,applyTransform:l}),n,i);return c}let si=class extends Z{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.uniqueIdFields=null,this.url=null}get parsedUrl(){return Hs(this.url)}async execute(e,r){const i=await this.executeJSON(e,r);return this.featureSetFromJSON(e,i,r)}async executeJSON(e,r){const i=this._normalizeQuery(e),s=e.outStatistics?.[0]!=null,n=re("featurelayer-pbf-statistics"),o=(!s||n)&&e.returnTrueCurves!==!0;let l;if(this.pbfSupported&&o)try{l=await lre(this.url,i,r,{uniqueIdFields:this.uniqueIdFields})}catch(c){if(c.name!=="query:parsing-pbf")throw c;this.pbfSupported=!1}return this.pbfSupported&&o||(l=await KE(this.url,i,r,{uniqueIdFields:this.uniqueIdFields})),this._normalizeFields(l.fields),l}async featureSetFromJSON(e,r,i){if(!this._queryIs3DObjectFormat(e)||this.infoFor3D==null||!r.features)return ct.fromJSON(r);const{meshFeatureSetFromJSON:s}=await Ei(L(()=>import("./money-tides-meshFeatureSet-CeqOQLsH.js"),__vite__mapDeps([336,3,1,2,4,5,337,333,116,117,338,11,12,339,68,332,340,73,341,149,65,122,123,64,72,69,70,71,74,59,75,331,10,342])),i);return s(e,this.infoFor3D,r)}executeForCount(e,r){return Ote(this.url,this._normalizeQuery(e),r,{uniqueIdFields:this.uniqueIdFields})}executeForExtent(e,r){return Cte(this.url,this._normalizeQuery(e),r)}executeForIds(e,r){return kte(this.url,this._normalizeQuery(e),r,{uniqueIdFields:this.uniqueIdFields})}async executeRelationshipQuery(e,r){const[{default:i},{executeRelationshipQuery:s}]=await Ei(Promise.all([L(()=>Promise.resolve().then(()=>$w),void 0),L(()=>import("./money-tides-executeRelationshipQuery-iSeXyIMC.js"),__vite__mapDeps([343,3,1,2,4,5,10,11,12]))]),r);return e=i.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,r)}async executeRelationshipQueryForCount(e,r){const[{default:i},{executeRelationshipQueryForCount:s}]=await Ei(Promise.all([L(()=>Promise.resolve().then(()=>$w),void 0),L(()=>import("./money-tides-executeRelationshipQuery-iSeXyIMC.js"),__vite__mapDeps([343,3,1,2,4,5,10,11,12]))]),r);return e=i.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,r)}async executeAttachmentQuery(e,r){const{executeAttachmentQuery:i,fetchAttachments:s,processAttachmentQueryResult:n}=await Ei(L(()=>import("./money-tides-queryAttachments-CeztIBdg.js"),__vite__mapDeps([344,3,1,2,4,5,179,11,12,10])),r),o=ra(this.url);return n(o,await(this.queryAttachmentsSupported?i(o,e,r):s(o,e,r)))}async executeAttributeBinsQuery(e,r){const{executeAttributeBinsQuery:i}=await Ei(L(()=>import("./money-tides-executeAttributeBinsQuery-BCdeIXKI.js"),__vite__mapDeps([345,3,1,2,4,5,247,248,11,12,45,52,10])),r);return i(this.parsedUrl,e,r)}async executePivotQuery(e,r){const{executePivotQuery:i}=await Ei(L(()=>import("./money-tides-executePivotQuery-Br-1fOvN.js"),__vite__mapDeps([346,3,1,2,4,5,334,11,12,10])),r);return i(this.parsedUrl,e,r)}async executeTopFeaturesQuery(e,r){const{executeTopFeaturesQuery:i}=await Ei(L(()=>import("./money-tides-executeTopFeaturesQuery-D8Bl-wde.js"),__vite__mapDeps([347,348,3,1,2,4,5,335,11,12,10])),r);return i(this.parsedUrl,e,this.sourceSpatialReference,r)}async executeForTopIds(e,r){const{executeForTopIds:i}=await Ei(L(()=>import("./money-tides-executeForTopIds-CqH5JTa7.js"),__vite__mapDeps([349,348,3,1,2,4,5,335,11,12,10])),r);return i(this.parsedUrl,e,r)}async executeForTopExtents(e,r){const{executeForTopExtents:i}=await Ei(L(()=>import("./money-tides-executeForTopExtents-BbKq7d2p.js"),__vite__mapDeps([350,348,3,1,2,4,5,335,11,12,10])),r);return i(this.parsedUrl,e,r)}async executeForTopCount(e,r){const{executeForTopCount:i}=await Ei(L(()=>import("./money-tides-executeForTopCount-CLrte_k6.js"),__vite__mapDeps([351,348,3,1,2,4,5,335,11,12,10])),r);return i(this.parsedUrl,e,r)}_normalizeQuery(e){let r=H.from(e);r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===e?r.clone():r,r.gdbVersion=e.gdbVersion||this.gdbVersion,r.dynamicDataSource=e.dynamicDataSource?gr.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:i}=this;if(i!=null&&this._queryIs3DObjectFormat(e)){if(r=r===e?r.clone():r,r.formatOf3DObjects=XI(i),!r.formatOf3DObjects)throw new M("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(r.outSpatialReference&&!ot(r.outSpatialReference,this.sourceSpatialReference))throw new M("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(r.outFields==null||!r.outFields.includes("*")){r=r===e?r.clone():r,r.outFields==null&&(r.outFields=[]);const{originX:s,originY:n,originZ:o,translationX:l,translationY:c,translationZ:d,scaleX:h,scaleY:y,scaleZ:f,rotationX:m,rotationY:g,rotationZ:v,rotationDeg:b}=i.transformFieldRoles;r.outFields.push(s,n,o,l,c,d,h,y,f,m,g,v,b)}}return r}_normalizeFields(e){if(this.fieldsIndex!=null&&e!=null)for(const r of e){const i=this.fieldsIndex.get(r.name);i&&Object.assign(r,i.toJSON())}}_queryIs3DObjectFormat(e){return this.infoFor3D!=null&&e.returnGeometry===!0&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};a([u({type:gr})],si.prototype,"dynamicDataSource",void 0),a([u()],si.prototype,"fieldsIndex",void 0),a([u()],si.prototype,"gdbVersion",void 0),a([u()],si.prototype,"infoFor3D",void 0),a([u({readOnly:!0})],si.prototype,"parsedUrl",null),a([u()],si.prototype,"pbfSupported",void 0),a([u()],si.prototype,"queryAttachmentsSupported",void 0),a([u()],si.prototype,"sourceSpatialReference",void 0),a([u()],si.prototype,"uniqueIdFields",void 0),a([u({type:String})],si.prototype,"url",void 0),si=a([_("esri.layers.graphics.sources.support.QueryTask")],si);var V0;function By(t){return t?.type==="esriSMS"}function h9(t,e,r){const i=r.minimumWritableOrigin||r.origin;return!!i&&t.originIdOf(e)>=Li(i)}function od(t,e,r){const i=h9(this,e,r);return{ignoreOrigin:!0,allowNull:i,enabled:!!r&&r.layer?.type==="map-image"&&(r.writeSublayerStructure||i)}}function W5(t,e,r){return{enabled:!!r&&r.layer?.type==="tile"&&(h9(this,e,r)||this._isOverridden(e))}}function _n(t,e,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function z0(t,e,r){return{ignoreOrigin:!0,enabled:!!r?.writeSublayerStructure&&this.originIdOf(e)>2}}function R1(t,e,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||h9(this,e,r))}}let ure=0;const cre=new Set(["layer","parent","loaded","loadStatus","loadError","loadWarnings"]);var ol;let K=(ol=class extends Fh(gh(Hc)){constructor(e){super(e),this.attributeTableTemplate=null,this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.isTable=!1,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.spatialReference=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise(this.reload(e)),this}readCapabilities(e,r){r=r.layerDefinition||r;const{attachment:i,operations:{supportsQuery:s,supportsQueryAttachments:n},query:{supportsFormatPBF:o,supportsOrderBy:l,supportsPagination:c},data:{supportsAttachment:d},queryRelated:h}=G6(r,this.url);return{attachment:{supportsOrderByFields:i?.supportsOrderByFields??!1,supportsResize:i?.supportsResize??!1,supportsTypeWildcard:i?.supportsTypeWildcard??!1},exportMap:{supportsModification:!!r.canModifyLayer},operations:{supportsQuery:s,supportsQueryAttachments:n},data:{supportsAttachment:d},query:{supportsFormatPBF:o,supportsOrderBy:l,supportsPagination:c},queryRelated:h}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:r}=this;return{minScale:e,maxScale:r}}readMaxScaleRange(e,r){return{minScale:(r=r.layerDefinition||r).minScale??0,maxScale:r.maxScale??0}}get fieldsIndex(){return new oh(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,r){if((r=r.layerDefinition||r).globalIdField)return r.globalIdField;if(r.fields){for(const i of r.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get graphicOrigin(){if(!this.layer)return null;switch(this.layer.type){case"tile":return new Vee(this.layer,this);case"map-image":return new Dee(this.layer,this)}}get id(){return this._get("id")??ure++}set id(e){this._get("id")!==e&&(this.layer?.capabilities?.exportMap?.supportsDynamicLayers!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}readIsTable(e,r){return r.type==="Table"}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,r,i,s){e&&e.length&&(r.layerDefinition={drawingInfo:{labelingInfo:e.map(n=>n.write({},s))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers?.forEach(r=>r.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,r){return r.minScale||r.layerDefinition?.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,r){return r.maxScale||r.layerDefinition?.maxScale||0}readObjectIdFieldFromService(e,r){return(r=r.layerDefinition||r).objectIdField?r.objectIdField:r.fields?.find(s=>s.type==="esriFieldTypeOID")?.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,r){const{layerDefinition:i}=r;return 1-.01*(i?.transparency??i?.drawingInfo?.transparency??0)}writeOpacity(e,r,i,s){r.layerDefinition={drawingInfo:{transparency:100-100*e}}}set orderBy(e){this._setAndNotifyLayer("orderBy",e)}writeParent(e,r){this.parent&&this.parent!==this.layer?r.parentLayerId=X5(this.parent.id):r.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{capabilities:e,fieldsIndex:r,layer:i,url:s}=this,{spatialReference:n}=i,o="gdbVersion"in i?i.gdbVersion:void 0,l=re("featurelayer-pbf")&&e?.query.supportsFormatPBF;return new si({fieldsIndex:r,gdbVersion:o,pbfSupported:l,queryAttachmentsSupported:e?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:n,url:s})}set renderer(e){if(zf(e,this.fieldsIndex),e){for(const r of e.symbols)if(u6(r)){N.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new Dn({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Zr(q.ofType(V0),e)}writeSublayers(e,r,i){this.sublayers?.length&&(r[i]=this.sublayers.map(s=>s.id).toArray().reverse())}readTitle(e,r){return r.layerDefinition?.name??r.name}readTypeIdField(e,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();const s=r.fields.find(n=>n.name.toLowerCase()===i);s&&(i=s.name)}return i}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,r=this.source;if(!e)return null;if(this._lastParsedUrl=e,r?.type==="map-layer")return`${e.path}/${r.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${$O(i)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,r,i,s){r[i]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=hi(this),r=new V0;return hi(r).store=e.clone(cre),this.commitProperty("url"),r._lastParsedUrl=this._lastParsedUrl,r}createPopupTemplate(e){return GE(this,e)}createQuery(){return new H({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const e=(await L(async()=>{const{default:n}=await Promise.resolve().then(()=>Aee);return{default:n}},void 0)).default,{layer:r,url:i}=this;let s;if(i&&this.originIdOf("url")>2)s=new e({url:i});else{if(!r?.parsedUrl)throw new M("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const n=r.parsedUrl;s=new e({url:n.path}),n&&this.source&&(this.source.type==="map-layer"?s.layerId=this.source.mapLayerId:s.dynamicDataSource=this.source)}}return r?.refreshInterval!=null&&(s.refreshInterval=r.refreshInterval),this.definitionExpression&&(s.definitionExpression=this.definitionExpression),this.floorInfo&&(s.floorInfo=P(this.floorInfo)),this.originIdOf("labelingInfo")>2&&(s.labelingInfo=P(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(s.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(s.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(s.visible=this.visible),this.originIdOf("minScale")>0&&(s.minScale=this.minScale),this.originIdOf("maxScale")>0&&(s.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(s.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(s.popupTemplate=P(this.popupTemplate)),this.originIdOf("renderer")>2&&(s.renderer=P(this.renderer)),this.source?.type==="data-layer"&&(s.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(s.title=this.title),r?.type==="map-image"&&r.originIdOf("customParameters")>0&&(s.customParameters=r.customParameters),r?.type==="tile"&&r.originIdOf("customParameters")>0&&(s.customParameters=r.customParameters),s}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){return z6(this.types,this.typeIdField,e)}getFieldDomain(e,r){const i=r?.feature,s=this.getFeatureType(i);if(s){const n=s.domains&&s.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}async queryAttachments(e,r){await this.load(),e=yt.from(e);const i=this.capabilities;if(!i?.data?.supportsAttachment)throw new M("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:s,objectIds:n,globalIds:o,num:l,size:c,start:d,where:h}=e;if(!i?.operations?.supportsQueryAttachments&&(s?.length>0||o?.length>0||c?.length>0||l||d||h))throw new M("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(n?.length||o?.length||h))throw new M("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return!i?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),this.queryTask.executeAttachmentQuery(e,r)}async queryFeatureCount(e=this.createQuery(),r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new M("queryFeatureCount:not-supported","this layer doesn't support queries.");if(!this.url)throw new M("queryFeatureCount:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeForCount(e,{...r,query:{...this.layer?.customParameters,token:i}})}async queryFeatures(e=this.createQuery(),r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new M("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new M("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(e,{...r,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(i?.features){const s=this.graphicOrigin;for(const n of i.features)n.sourceLayer=this,n.origin=s}return i}async queryObjectIds(e=this.createQuery(),r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new M("queryObjectIds:not-supported","this layer doesn't support queries.");if(!this.url)throw new M("queryObjectIds:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeForIds(e,{...r,query:{...this.layer?.customParameters,token:i}})}async queryRelatedFeatures(e,r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new M("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new M("queryRelatedFeatures:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeRelationshipQuery(e,{...r,query:{...this.layer?.customParameters,token:i}})}async queryRelatedFeaturesCount(e,r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new M("queryRelatedFeaturesCount:not-supported","this layer doesn't support queries.");if(!this.capabilities.queryRelated.supportsCount)throw new M("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!this.url)throw new M("queryRelatedFeaturesCount:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeRelationshipQueryForCount(e,{...r,query:{...this.layer?.customParameters,token:i}})}async reload(e){if(this.loadStatus==="not-loaded")return this.load(e).then(()=>{});const{layer:r,url:i}=this;if(!r&&!i)throw new M("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const s=r?await r.fetchSublayerInfo(this,e):(await Le(i,{query:{f:"json"},...e})).data;if(this.loaded&&this.originIdOf("url")>2){const n=new Set(["drawingInfo","maxScale","minScale","name"]);if(s!=null)for(const o of Object.keys(s))n.has(o)&&delete s[o]}s&&(this.sourceJSON={...this.sourceJSON,...s},this.read({layerDefinition:s},{origin:"service",layer:r,url:ra(i)}))}toExportImageJSON(e){const r={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},i=Hg(e,this.definitionExpression);i!=null&&(r.definitionExpression=i);const s=["renderer","labelingInfo","opacity","labelsVisible"].reduce((o,l)=>(o[l]=this.originIdOf(l),o),{});if(Object.keys(s).some(o=>s[o]>2)){const o=r.drawingInfo={};if(s.renderer>2&&(o.renderer=this.renderer?this.renderer.toJSON():null),s.labelsVisible>2&&(o.showLabels=this.labelsVisible),this.labelsVisible&&s.labelingInfo>2)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(c=>!c.labelPlacement)&&N.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let l=this.labelingInfo;this.geometryType!=null&&(l=See(this.labelingInfo,X0.toJSON(this.geometryType))),o.showLabels=!0,o.labelingInfo=l.filter(c=>c.labelPlacement).map(c=>c.toJSON({origin:"service",layer:this.layer}))}else o.showLabels=!1;s.opacity>2&&(o.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(o.renderer)}return(this.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1)&&this.originIdOf("orderBy")>2&&(r.orderBy=this.orderBy?.map(o=>o.toJSON())??null),r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,r=>{r.color||r.style!=="esriSMSX"&&r.style!=="esriSMSCross"||(r.outline?.color?r.color=r.outline.color:r.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,r){if(e){const i=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const s of i)By(s.symbol)&&r(s.symbol);"symbol"in e&&By(e.symbol)&&r(e.symbol),"defaultSymbol"in e&&By(e.defaultSymbol)&&r(e.defaultSymbol)}}_setAndNotifyLayer(e,r){const i=this.layer,s=this._get(e);let n,o;switch(e){case"definitionExpression":case"floorInfo":n="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",o="supportsModification";break;case"orderBy":n="supportsSublayerOrderBy",o="supportsModification"}const l=hi(this).getDefaultOrigin();if(l!=="service"){if(n&&this.layer?.capabilities?.exportMap?.[n]===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${n}'`);if(o&&this.capabilities?.exportMap[o]===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${o}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,r),l!=="service"&&s!==r&&i?.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,r){r&&(r.forEach(i=>{i.parent=null,i.layer=null}),this.removeAllHandles()),e&&(e.forEach(i=>{i.parent=this,i.layer=this.layer}),this.addHandles([e.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),e.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),e.on("before-changes",i=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??1)||(N.getLogger(this).error(new M("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(e,r){const{layer:i,declaredClass:s}=this;N.getLogger(s).error(new M("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${i?.id}'`,{reason:r,sublayer:this,layer:i}))}_getLayerDomain(e){return this.fieldsIndex.get(e)?.domain??null}},V0=ol,ol.test={isMapImageLayerOverridePolicy:e=>e===z0||e===_n||e===od,isTileImageLayerOverridePolicy:e=>e===W5},ol);a([u({type:II,json:{name:"attributeTableInfo",write:{overridePolicy:od},origins:{"web-scene":{write:!1}}}})],K.prototype,"attributeTableTemplate",void 0),a([u({readOnly:!0})],K.prototype,"capabilities",void 0),a([F("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],K.prototype,"readCapabilities",null),a([u()],K.prototype,"defaultPopupTemplate",null),a([u({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:od}}})],K.prototype,"definitionExpression",null),a([u({readOnly:!0})],K.prototype,"effectiveScaleRange",null),a([F("service","maxScaleRange",["minScale","maxScale"])],K.prototype,"readMaxScaleRange",null),a([u({type:[xt],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],K.prototype,"fields",void 0),a([u({readOnly:!0})],K.prototype,"fieldsIndex",null),a([u({type:Va,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:od},origins:{"web-scene":{read:!1,write:!1}}}})],K.prototype,"floorInfo",null),a([u({type:le,json:{read:{source:"layerDefinition.extent"}}})],K.prototype,"fullExtent",void 0),a([u({type:X0.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:X0.read}}}}})],K.prototype,"geometryType",void 0),a([u({type:String})],K.prototype,"globalIdField",void 0),a([F("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],K.prototype,"readGlobalIdFieldFromService",null),a([u({readOnly:!0})],K.prototype,"graphicOrigin",null),a([u({type:ve,json:{write:{ignoreOrigin:!0}}})],K.prototype,"id",null),a([u({readOnly:!0})],K.prototype,"isTable",void 0),a([F("service","isTable",["type"])],K.prototype,"readIsTable",null),a([u({value:null,type:[Ae],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:z0}}})],K.prototype,"labelingInfo",null),a([j("labelingInfo")],K.prototype,"writeLabelingInfo",null),a([u({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:_n}}})],K.prototype,"labelsVisible",null),a([u({value:null})],K.prototype,"layer",null),a([u({type:String,json:{write:{overridePolicy:W5}}})],K.prototype,"layerItemId",void 0),a([u({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:R1}}})],K.prototype,"legendEnabled",void 0),a([u({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],K.prototype,"listMode",null),a([u({type:Number,value:0,json:{write:{overridePolicy:_n}}})],K.prototype,"minScale",null),a([F("minScale",["minScale","layerDefinition.minScale"])],K.prototype,"readMinScale",null),a([u({type:Number,value:0,json:{write:{overridePolicy:_n}}})],K.prototype,"maxScale",null),a([F("maxScale",["maxScale","layerDefinition.maxScale"])],K.prototype,"readMaxScale",null),a([u()],K.prototype,"objectIdField",void 0),a([F("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],K.prototype,"readObjectIdFieldFromService",null),a([u({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:_n}}})],K.prototype,"opacity",null),a([F("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],K.prototype,"readOpacity",null),a([j("opacity")],K.prototype,"writeOpacity",null),a([u({value:null,type:[Ro],json:{name:"layerDefinition.orderBy",read:{reader:VE},write:{overridePolicy:od},origins:{"web-scene":{read:!1,write:!1}}}})],K.prototype,"orderBy",null),a([u({json:{type:ve,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:_n}}})],K.prototype,"parent",void 0),a([j("parent")],K.prototype,"writeParent",null),a([u({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:R1,writer(t,e,r){e[r]=!t}}}})],K.prototype,"popupEnabled",void 0),a([u({type:ea,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:R1}}})],K.prototype,"popupTemplate",void 0),a([u({readOnly:!0})],K.prototype,"queryTask",null),a([u({type:[Fr],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],K.prototype,"relationships",void 0),a([u({types:rp,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:z0},origins:{"web-scene":{types:jE,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:z0}}}}})],K.prototype,"renderer",null),a([u({types:{key:"type",base:null,typeMap:{"data-layer":gr,"map-layer":Dn}},cast(t){if(t){if("mapLayerId"in t)return Tc(Dn,t);if("dataSource"in t)return Tc(gr,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:_n}}})],K.prototype,"source",null),a([u()],K.prototype,"sourceJSON",void 0),a([u({type:B,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],K.prototype,"spatialReference",void 0),a([u({value:null,json:{type:[ve],write:{target:"subLayerIds",allowNull:!0,overridePolicy:_n}}})],K.prototype,"sublayers",null),a([xe("sublayers")],K.prototype,"castSublayers",null),a([j("sublayers")],K.prototype,"writeSublayers",null),a([u({type:String,json:{name:"name",write:{overridePolicy:R1}}})],K.prototype,"title",void 0),a([F("service","title",["name","layerDefinition.name"])],K.prototype,"readTitle",null),a([u({type:String})],K.prototype,"typeIdField",void 0),a([u({json:{read:!1},readOnly:!0,value:"sublayer"})],K.prototype,"type",void 0),a([F("typeIdField",["layerDefinition.typeIdField"])],K.prototype,"readTypeIdField",null),a([u({type:[rs],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],K.prototype,"types",void 0),a([u({type:String,json:{name:"layerUrl",write:{overridePolicy:W5}}})],K.prototype,"url",null),a([u({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:_n}}})],K.prototype,"visible",null),a([j("visible")],K.prototype,"writeVisible",null),K=V0=a([_("esri.layers.support.Sublayer")],K);function bb(t,e,r){return e.flatten(({sublayers:s})=>s).length!==t.length?!0:!!t.some(s=>s.originIdOf("minScale")>r||s.originIdOf("maxScale")>r||s.originIdOf("renderer")>r||s.originIdOf("labelingInfo")>r||s.originIdOf("opacity")>r||s.originIdOf("labelsVisible")>r||s.originIdOf("source")>r)||!cP(t,e)}function pre(t,e,r){return!!t.some(i=>{const s=i.source,n=!s||s.type==="map-layer"&&s.mapLayerId===i.id&&(s.gdbVersion==null||s.gdbVersion===r);i.commitProperty("renderer"),i.commitProperty("labelingInfo"),i.commitProperty("opacity"),i.commitProperty("labelsVisible"),i.commitProperty("orderBy");const o=i.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1;return!n||i.originIdOf("renderer")>2||i.originIdOf("labelingInfo")>2||i.originIdOf("opacity")>2||i.originIdOf("labelsVisible")>2||o&&i.originIdOf("orderBy")>2})||!cP(t,e)}function cP(t,e){if(!t?.length||e==null)return!0;const r=e.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(t.length>r.length)return!1;let i=0;const s=r.length;for(const{id:n}of t){for(;i<s&&r[i]!==n;)i++;if(i>=s)return!1}return!0}function dre(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition?.minScale!=null)}function hre(t,e){const r=[],i={};return t&&t.forEach(s=>{const n=new K;if(n.read(s,e),i[n.id]=n,s.parentLayerId!=null&&s.parentLayerId!==-1){const o=i[s.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(n)}else r.unshift(n)}),r}const O1=q.ofType(K);function pP(t,e){t&&t.forEach(r=>{e(r),r.sublayers&&r.sublayers.length&&pP(r.sublayers,e)})}const yre=t=>{const e=t;let r=class extends e{constructor(...i){super(...i),this.allSublayers=new ui({getCollections:()=>[this.sublayers],getChildrenFunction:s=>s.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{},6:{}},this.subtables=null,this.addHandles([ae(()=>this.sublayers,(s,n)=>this._handleSublayersChange(s,n),It),ae(()=>this.subtables,(s,n)=>this._handleSublayersChange(s,n),It)])}destroy(){this.allSublayers.destroy()}readSublayers(i,s){if(!s||!i)return;const{sublayersSourceJSON:n}=this,o=Li(s.origin);if(o<2||(n[o]={context:s,visibleLayers:i.visibleLayers||n[o].visibleLayers,layers:i.layers||n[o].layers},o>2))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:l,origin:c}=this.createSublayersForOrigin("web-document"),d=hi(this);d.setDefaultOrigin(c),this._set("sublayers",new O1(l)),d.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(s=>s.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){let s;const n=Li(i==="web-document"?"web-map":i);let o=2,l=this.sublayersSourceJSON[2].layers,c=this.sublayersSourceJSON[2].context,d=null;const h=[3,4,5].filter(b=>b<=n);for(const b of h){const S=this.sublayersSourceJSON[b];dre(S.layers)&&(o=b,l=S.layers,c=S.context,S.visibleLayers&&(d={visibleLayers:S.visibleLayers,context:S.context}))}const y=[3,4,5].filter(b=>b>o&&b<=n);let f=null;for(const b of y){const{layers:S,visibleLayers:$,context:E}=this.sublayersSourceJSON[b];S&&(f={layers:S,context:E},s??=b),$&&(d={visibleLayers:$,context:E})}const m=hre(l,c),g=new Map,v=new Set;if(f)for(const b of f.layers)g.set(b.id,b);if(d?.visibleLayers)for(const b of d.visibleLayers)v.add(b);return pP(m,b=>{f&&b.read(g.get(b.id),f.context),d&&b.read({defaultVisibility:v.has(b.id)},d.context)}),{origin:B0(o),originWithPartialOverrides:s?B0(s):null,sublayers:new O1({items:m})}}read(i,s){super.read(i,s),this.readSublayers(i,s)}_handleSublayersChange(i,s){s&&(s.forEach(n=>{n.parent=null,n.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(n=>{n.parent=this,n.layer=this}),this.addHandles([i.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),i.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",n=>{N.getLogger("esri.layers.TileLayer").error(new M("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),n.preventDefault()}),"sublayers-owner"))}};return a([u({readOnly:!0})],r.prototype,"allSublayers",void 0),a([u({readOnly:!0,type:q.ofType(K)})],r.prototype,"serviceSublayers",void 0),a([u({value:null,type:O1,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],r.prototype,"sublayers",void 0),a([u({readOnly:!0})],r.prototype,"sublayersSourceJSON",void 0),a([u({type:O1,json:{read:{source:"tables"}}})],r.prototype,"subtables",void 0),r=a([_("esri.layers.mixins.SublayersOwner")],r),r};function Bhe(t){const e=t.layer;return"floorInfo"in e&&e.floorInfo?.floorField&&"floors"in t.view?dP(t.view.floors,e.floorInfo.floorField):null}function _b(t,e){return"floorInfo"in e&&e.floorInfo?.floorField?dP(t,e.floorInfo.floorField):null}function dP(t,e){if(!t?.length)return null;const r=t.filter(i=>i!=="").map(i=>`'${i}'`);return r.push("''"),`${e} IN (${r.join(",")}) OR ${e} IS NULL`}const fre={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Ii=class extends Z{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(r=>{const i=_b(this.floors,r);return r.toExportImageJSON(i)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&pre(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",r=>this.notifyChange(fre[r.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(r=>r.id).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,r=this.visibleSublayers.filter(i=>i.definitionExpression!=null||e&&i.floorInfo!=null);return r.length?JSON.stringify(r.reduce((i,s)=>{const n=_b(this.floors,s),o=Hg(n,s.definitionExpression);return o!=null&&(i[s.id]=o),i},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,i=this.scale,s=o=>{o.visible&&(i===0||fJ(i,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(s):e.unshift(o))};r?.forEach(s);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some((o,l)=>e[l]!==o)?e:n}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};a([u({readOnly:!0})],Ii.prototype,"dynamicLayers",null),a([u()],Ii.prototype,"floors",void 0),a([u({readOnly:!0})],Ii.prototype,"hasDynamicLayers",null),a([u()],Ii.prototype,"layer",null),a([u({readOnly:!0})],Ii.prototype,"layers",null),a([u({readOnly:!0})],Ii.prototype,"layerDefs",null),a([u({type:Number})],Ii.prototype,"scale",void 0),a([u({readOnly:!0})],Ii.prototype,"version",null),a([u({readOnly:!0})],Ii.prototype,"visibleSublayers",null),Ii=a([_("esri.layers.support.ExportImageParameters")],Ii);async function hP(t,e,r){let i;try{i=await createImageBitmap(t)}catch(s){throw new M("request:server",`Unable to load ${e}`,{url:e,error:s})}return Re(r),i}async function Hhe(t,e,r,i,s){let n;try{n=await createImageBitmap(t)}catch(o){throw new M("request:server",`Unable to load tile ${e}/${r}/${i}`,{error:o,level:e,row:r,col:i})}return Re(s),n}let Be=class extends R6(t9(e9(yre(Lee(hI(Y6(K6(Fh(X6(dI(mI(Fe)))))))))))){constructor(...t){super(...t),this._exportImageParameters=new Ii({layer:this}),this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.elevationInfo=new Os({mode:"on-the-ground"}),this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeZone=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null,this._debouncedSaveOperations=lg(async(e,r,i)=>{const{save:s,saveAs:n}=await L(()=>import("./money-tides-mapImageLayerUtils-DGLaJTS8.js"),__vite__mapDeps([352,328,3,1,2,4,5,327,325,329,10,11,12]));switch(e){case 0:return s(this,r);case 1:return n(this,i,r)}})}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(ki).then(()=>this._fetchService(e))),Promise.resolve(this)}destroy(){this._exportImageParameters.destroy()}readImageFormat(t,e){const r=e.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}get loaded(){return super.loaded}set portalItem(t){super.portalItem=t}writeSublayers(t,e,r,i){if(!this.loaded||!t)return;const s=t.slice().reverse().flatten(({sublayers:y})=>y&&y.toArray().reverse()).toArray();let n=!1;const o=Li(i.origin);let l;if(this.capabilities?.operations.supportsExportMap&&this.capabilities?.exportMap?.supportsDynamicLayers){if(o===3){const y=this.createSublayersForOrigin("service").sublayers;n=bb(s,y,2)}else if(o>3){const y=this.createSublayersForOrigin("portal-item");n=bb(s,y.sublayers,Li(y.origin)),l=y.originWithPartialOverrides}}const c=[],d={writeSublayerStructure:n,...i,minimumWritableOrigin:l};let h=n||this.hasVisibleLayersForOrigin(o);s.forEach(y=>{const f=y.write({},d);c.push(f),h=h||y.originOf("visible")==="user"}),c.some(y=>Object.keys(y).length>1)&&(e.layers=c),h&&(e.visibleLayers=s.filter(y=>y.visible).map(y=>y.id))}createExportImageParameters(t,e,r,i){const s=i?.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian()),this._exportImageParameters.floors=i?.floors??null,this._exportImageParameters.scale=i?.scale||Q3({extent:t,width:e})*s;const n=this._exportImageParameters.toJSON(),o=!i?.rotation||this.version<10.3?{}:{rotation:-i.rotation},l=t?.spatialReference,c=qd(l);if(i?.scale&&t){const h=t.width/e*(vi(t?.spatialReference)*vg);n.dpi=i.scale/h}n.dpi*=s;const d={};if(i?.timeExtent){const{start:h,end:y}=i.timeExtent.toJSON();d.time=h&&y&&h===y?""+h:`${h??"null"},${y??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(d.time="null,null");return{bbox:t?t.xmin+","+t.ymin+","+t.xmax+","+t.ymax:void 0,bboxSR:c,imageSR:c,size:e+","+r,...n,...o,...d}}async fetchImage(t,e,r,i){const{data:s}=await this._fetchImage("image",t,e,r,i);return s}async fetchImageBitmap(t,e,r,i){const{data:s,url:n}=await this._fetchImage("blob",t,e,r,i);return hP(s,n,i?.signal)}async fetchRecomputedExtents(t={}){const e={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await Le(this.url,e),{extent:i,fullExtent:s,timeExtent:n}=r,o=i||s;return{fullExtent:o&&le.fromJSON(o),timeExtent:n&&it.fromJSON({start:n[0],end:n[1]})}}loadAll(){return dg(this,t=>{t(this.allSublayers),t(this.subtables)})}async save(t){return this._debouncedSaveOperations(0,t)}async saveAs(t,e){return this._debouncedSaveOperations(1,e,t)}serviceSupportsSpatialReference(t){return UE(this,t)}async _fetchImage(t,e,r,i,s){const n={responseType:t,signal:s?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,r,i,s),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},o=this.parsedUrl.path+"/export";if(n.query?.dynamicLayers!=null&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new M("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:n.query});try{const{data:l}=await Le(o,n);return{data:l,url:o}}catch(l){throw fi(l)?l:new M("mapimagelayer:image-fetch-error",`Unable to load image: ${o}`,{error:l})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:e,ssl:r}=await Le(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=e,this.read(e,{origin:"service",url:this.parsedUrl})}hasVisibleLayersForOrigin(t){return!(t==null||!this.sublayersSourceJSON[t]?.visibleLayers)}};a([u(Fc("dateFieldsTimeReference"))],Be.prototype,"dateFieldsTimeZone",void 0),a([u({type:Boolean})],Be.prototype,"datesInUnknownTimezone",void 0),a([u()],Be.prototype,"dpi",void 0),a([u()],Be.prototype,"elevationInfo",void 0),a([u()],Be.prototype,"gdbVersion",void 0),a([u()],Be.prototype,"imageFormat",void 0),a([F("imageFormat",["supportedImageFormatTypes"])],Be.prototype,"readImageFormat",null),a([u({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],Be.prototype,"imageMaxHeight",void 0),a([u({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],Be.prototype,"imageMaxWidth",void 0),a([u()],Be.prototype,"imageTransparency",void 0),a([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Be.prototype,"isReference",void 0),a([u({json:{read:!1,write:!1}})],Be.prototype,"labelsVisible",void 0),a([u({type:["ArcGISMapServiceLayer"]})],Be.prototype,"operationalLayerType",void 0),a([u({json:{read:!1,write:!1}})],Be.prototype,"popupEnabled",void 0),a([u(Fc("preferredTimeReference"))],Be.prototype,"preferredTimeZone",void 0),a([u()],Be.prototype,"sourceJSON",void 0),a([u({json:{write:{ignoreOrigin:!0}}})],Be.prototype,"sublayers",void 0),a([j("sublayers",{layers:{type:[K]},visibleLayers:{type:[ve]}})],Be.prototype,"writeSublayers",null),a([u({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],Be.prototype,"listMode",void 0),a([u({json:{read:!1},readOnly:!0,value:"map-image"})],Be.prototype,"type",void 0),a([u(C6)],Be.prototype,"url",void 0),Be=a([_("esri.layers.MapImageLayer")],Be);const yP=Be,Zhe=Object.freeze(Object.defineProperty({__proto__:null,default:yP},Symbol.toStringTag,{value:"Module"})),mre=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function fP(t){return t!=null&&mre.some(([e,r])=>t>=e&&t<=r)}const gre={visible:"visibleSublayers"};let On=class extends Z{constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",r=>this.notifyChange(gre[r.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,i=e?.sublayers,s=[],n=o=>{const{minScale:l,maxScale:c,sublayers:d,visible:h}=o;h&&(r===0||(l===0||r<=l)&&(c===0||r>=c))&&(d?d.forEach(n):s.push(o))};return i?.forEach(n),s}toJSON(){const{layer:e,layers:r}=this,{imageFormat:i,imageTransparency:s,version:n}=e;return{format:i,request:"GetMap",service:"WMS",styles:"",transparent:s?"TRUE":"FALSE",version:n,layers:r}}};a([u()],On.prototype,"layer",null),a([u({readOnly:!0})],On.prototype,"layers",null),a([u({type:Number})],On.prototype,"scale",void 0),a([u({readOnly:!0})],On.prototype,"version",null),a([u({readOnly:!0})],On.prototype,"visibleSublayers",null),On=a([_("esri.layers.support.ExportWMSImageParameters")],On);var q0;let vre=0,je=q0=class extends gh(oZ){constructor(t){super(t),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([ys(()=>this.sublayers,"after-add",({item:e})=>{e.parent=this,e.layer=this.layer},It),ys(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},It),ae(()=>this.sublayers,(e,r)=>{if(r)for(const i of r)i.layer=i.parent=null;if(e)for(const i of e)i.parent=this,i.layer=this.layer},It),ae(()=>this.layer,e=>{if(this.sublayers)for(const r of this.sublayers)r.layer=e},It)])}get id(){return this._get("id")??vre++}set id(t){this._set("id",t)}readLegendUrl(t,e){return e.legendUrl??e.legendURL??null}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}castSublayers(t){return Zr(q.ofType(q0),t)}set visible(t){this._setAndNotifyLayer("visible",t)}clone(){const t=new q0;return this.hasOwnProperty("description")&&(t.description=this.description),this.hasOwnProperty("fullExtent")&&(t.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(t.fullExtents=this.fullExtents?.map(e=>e.clone())??null),this.hasOwnProperty("legendUrl")&&(t.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(t.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(t.layer=this.layer),this.hasOwnProperty("name")&&(t.name=this.name),this.hasOwnProperty("parent")&&(t.parent=this.parent),this.hasOwnProperty("queryable")&&(t.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(t.sublayers=this.sublayers?.map(e=>e.clone())),this.hasOwnProperty("spatialReferences")&&(t.spatialReferences=this.spatialReferences?.map(e=>e)),this.hasOwnProperty("visible")&&(t.visible=this.visible),this.hasOwnProperty("title")&&(t.title=this.title),t}_setAndNotifyLayer(t,e){const r=this.layer;this._get(t)!==e&&(this._set(t,e),r&&r.emit("wms-sublayer-update",{propertyName:t,id:this.id}))}};a([u()],je.prototype,"description",void 0),a([u({readOnly:!0})],je.prototype,"dimensions",void 0),a([u({type:le,json:{name:"extent"}})],je.prototype,"fullExtent",void 0),a([u()],je.prototype,"fullExtents",void 0),a([u({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],je.prototype,"id",null),a([u({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],je.prototype,"legendUrl",void 0),a([F("legendUrl",["legendUrl","legendURL"])],je.prototype,"readLegendUrl",null),a([u({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],je.prototype,"legendEnabled",void 0),a([u()],je.prototype,"layer",void 0),a([u()],je.prototype,"maxScale",void 0),a([u()],je.prototype,"minScale",void 0),a([u({readOnly:!0})],je.prototype,"effectiveScaleRange",null),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],je.prototype,"name",void 0),a([u()],je.prototype,"parent",void 0),a([u({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],je.prototype,"popupEnabled",void 0),a([u({type:Boolean,json:{write:{ignoreOrigin:!0}}})],je.prototype,"queryable",void 0),a([u()],je.prototype,"sublayers",void 0),a([xe("sublayers")],je.prototype,"castSublayers",null),a([u({type:[Number],json:{read:{source:"spatialReferences"}}})],je.prototype,"spatialReferences",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],je.prototype,"title",void 0),a([u({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],je.prototype,"visible",null),je=q0=a([_("esri.layers.support.WMSSublayer")],je);const Sb={84:4326,83:4269,27:4267};function wre(t){if(!t)return null;const e={idCounter:-1};typeof t=="string"&&(t=new DOMParser().parseFromString(t,"text/xml"));const r=t.documentElement;if(r.nodeName==="ServiceExceptionReport"){const he=Array.prototype.slice.call(r.childNodes).map(Vt=>Vt.textContent).join(`\r
`);throw new M("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",he)}const i=nr("Capability",r),s=nr("Service",r),n=i&&nr("Request",i);if(!i||!s||!n)return null;const o=nr("Layer",i);if(!o)return null;const l=r.nodeName==="WMS_Capabilities"||r.nodeName==="WMT_MS_Capabilities"?r.getAttribute("version"):"1.3.0",c=Ns("Title",s,"")||Ns("Name",s,""),d=Ns("AccessConstraints",s,""),h=/^none$/i.test(d)?"":d,y=Ns("Abstract",s,""),f=parseInt(Ns("MaxWidth",s,"5000"),10),m=parseInt(Ns("MaxHeight",s,"5000"),10),g=$b(n,"GetMap"),v=xb(n,"GetMap"),b=ad(o,l,e);if(!b)return null;let S,$=0;const E=Array.prototype.slice.call(i.childNodes),T=b.sublayers??[],R=he=>{he!=null&&T.push(he)};E.forEach(he=>{he.nodeName==="Layer"&&($===0?S=he:($===1&&b.name&&(b.name="",R(ad(S,l,e))),R(ad(he,l,e))),$++)});const O=b.sublayers??[],z=b.fullExtents??[];O.length===0&&O.push(b),b.extent??=O[0].extent;const U=b.spatialReferences.length>0?b.spatialReferences:mP(b),J=xb(n,"GetFeatureInfo"),ie=J?$b(n,"GetFeatureInfo"):null,oe=gP(O),ee=b.minScale||0,Te=b.maxScale||0,pe=b.dimensions??[],wt=oe.reduce((he,Vt)=>he.concat(Vt.dimensions??[]),[]),Tr=pe.concat(wt).filter(wP);let Rt=null;if(Tr.length){const he=Tr.map(sa=>{const{extent:Xn}=sa;return Sre(Xn)?Xn.map(El=>El.getTime()):Xn?.map(El=>[El.min.getTime(),El.max.getTime()])}).flat(2).filter(mi),{start:Vt,end:m4}=he.reduce((sa,Xn)=>({start:Math.min(sa.start,Xn),end:Math.max(sa.end,Xn)}),{start:1/0,end:-1/0});Rt={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Vt,m4]}}return{copyright:h,description:y,dimensions:pe,extent:b.extent,fullExtents:z,featureInfoFormats:ie,featureInfoUrl:J,mapUrl:v,maxWidth:f,maxHeight:m,maxScale:Te,minScale:ee,layers:oe,spatialReferences:U,supportedImageFormatTypes:g,timeInfo:Rt,title:c,version:l}}function bre(t){const e=t.filter(r=>r.popupEnabled&&r.name&&r.queryable);return e.length?e.map(({name:r})=>r).join():null}function mP(t){if(t.spatialReferences.length>0)return t.spatialReferences;if(t.sublayers)for(const e of t.sublayers){const r=mP(e);if(r.length>0)return r}return[]}function gP(t){let e=[];for(const r of t)e.push(r),r.sublayers?.length&&(e=e.concat(gP(r.sublayers)),delete r.sublayers);return e}function U0(t,e,r){return e.getAttribute(t)??r}function _re(t,e,r,i){const s=nr(t,r);return s?U0(e,s,i):i}function nr(t,e){for(let r=0;r<e.childNodes.length;r++){const i=e.childNodes[r];if(vP(i)&&i.nodeName===t)return i}return null}function G0(t,e){if(e==null)return[];const r=[];for(let i=0;i<e.childNodes.length;i++){const s=e.childNodes[i];vP(s)&&s.nodeName===t&&r.push(s)}return r}function Ns(t,e,r){return nr(t,e)?.textContent??r}function Wy(t,e,r){const i=parseFloat(t.getAttribute("minx")??"0"),s=parseFloat(t.getAttribute("miny")??"0"),n=parseFloat(t.getAttribute("maxx")??"0"),o=parseFloat(t.getAttribute("maxy")??"0");return{xmin:r?isNaN(s)?-Number.MAX_VALUE:s:isNaN(i)?-Number.MAX_VALUE:i,ymin:r?isNaN(i)?-Number.MAX_VALUE:i:isNaN(s)?-Number.MAX_VALUE:s,xmax:r?isNaN(o)?Number.MAX_VALUE:o:isNaN(n)?Number.MAX_VALUE:n,ymax:r?isNaN(n)?Number.MAX_VALUE:n:isNaN(o)?Number.MAX_VALUE:o,spatialReference:{wkid:e}}}function xb(t,e){const r=nr(e,t);if(r){const i=nr("DCPType",r);if(i){const s=nr("HTTP",i);if(s){const n=nr("Get",s);if(n){let o=_re("OnlineResource","xlink:href",n,null);if(o){const l=o.indexOf("&");return l!==-1&&l===o.length-1&&(o=o.slice(0,-1)),$re(o,["service","request"])}}}}}return null}function $b(t,e){const r=G0("Operation",t);if(!r.length)return G0("Format",nr(e,t)).map(({textContent:s})=>s).filter(mi);const i=[];for(const s of r)if(s.getAttribute("name")===e){const n=G0("Format",s);for(const{textContent:o}of n)o!=null&&i.push(o)}return i}function Tb(t,e,r){const i=nr(e,t);if(!i)return r;const{textContent:s}=i;if(s==null||s==="")return r;const n=Number(s);return isNaN(n)?r:n}function ad(t,e,r){if(!t)return null;const i=t.getAttribute("queryable")?.toLowerCase(),s=i==="1"||i==="true",n={id:r.idCounter++,fullExtents:[],parentLayerId:null,queryable:s,spatialReferences:[],sublayers:null},o=nr("LatLonBoundingBox",t),l=nr("EX_GeographicBoundingBox",t),c=o?Wy(o,4326):l?{xmin:parseFloat(Ns("westBoundLongitude",l,"0")),ymin:parseFloat(Ns("southBoundLatitude",l,"0")),xmax:parseFloat(Ns("eastBoundLongitude",l,"0")),ymax:parseFloat(Ns("northBoundLatitude",l,"0")),spatialReference:{wkid:4326}}:{xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:{wkid:4326}};n.minScale=Tb(t,"MaxScaleDenominator",0),n.maxScale=Tb(t,"MinScaleDenominator",0);const d=["1.0.0","1.1.0","1.1.1"].includes(e)?"SRS":"CRS";return Array.prototype.slice.call(t.childNodes).forEach(h=>{if(h.nodeName==="Name")n.name=h.textContent||"";else if(h.nodeName==="Title")n.title=h.textContent||"";else if(h.nodeName==="Abstract")n.description=h.textContent||"";else if(h.nodeName==="BoundingBox"){const y=h.getAttribute(d),f=y?.indexOf(":");if(f&&f>-1){let m=parseInt(y.slice(f+1),10);m===0||isNaN(m)||(m=Sb[m]??m);const g=e==="1.3.0"?Wy(h,m,fP(m)):Wy(h,m);g&&n.fullExtents&&n.fullExtents.push(g)}}else if(h.nodeName===d)(h.textContent?.split(" ")??[]).forEach(y=>{let f=NaN;if(y.includes(":")){const[m,g]=y.toUpperCase().split(":");m!=="CRS"&&m!=="EPSG"||(f=parseInt(g,10))}else f=parseInt(y,10);if(f!==0&&!isNaN(f)){const m=Sb[f]??f;n.spatialReferences.includes(m)||n.spatialReferences.push(m)}});else if(h.nodeName!=="Style"||n.legendUrl){if(h.nodeName==="Layer"){const y=ad(h,e,r);y&&(y.parentLayerId=n.id,n.sublayers||(n.sublayers=[]),n.sublayers.push(y))}}else{const y=nr("LegendURL",h);if(y){const f=nr("OnlineResource",y);f&&(n.legendUrl=f.getAttribute("xlink:href"))}}}),n.extent=c,n.dimensions=G0("Dimension",t).filter(h=>h.getAttribute("name")&&h.getAttribute("units")&&h.textContent).map(h=>{const y=h.getAttribute("name"),f=h.getAttribute("units"),m=h.textContent,g=h.getAttribute("unitSymbol")??void 0,v=h.getAttribute("default")??void 0,b=U0("default",h,"0")!=="0",S=U0("nearestValue",h,"0")!=="0",$=U0("current",h,"0")!=="0";return wP({name:y,units:f})?{name:"time",units:"ISO8601",extent:Eb(m),default:Eb(v),multipleValues:b,nearestValue:S,current:$}:xre({name:y,units:f})?{name:"elevation",units:f,extent:Mb(m),unitSymbol:g,default:Mb(v),multipleValues:b,nearestValue:S}:{name:y,units:f,extent:Ib(m),unitSymbol:g,default:Ib(v),multipleValues:b,nearestValue:S}}),n}function Sre(t){return Array.isArray(t)&&t.length>0&&t[0]instanceof Date}function vP(t){return t.nodeType===Node.ELEMENT_NODE}function xre(t){return/^elevation$/i.test(t.name)&&/^(epsg|crs):\d+$/i.test(t.units)}function wP(t){return/^time$/i.test(t.name)&&/^iso8601$/i.test(t.units)}function $re(t,e){const r=[],i=Hs(t);for(const s in i.query)i.query.hasOwnProperty(s)&&(e.includes(s.toLowerCase())||r.push(s+"="+i.query[s]));return i.path+(r.length?"?"+r.join("&"):"")}function Mb(t){if(!t)return;const e=t.includes("/"),r=t.split(",");return e?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:parseFloat(s[0]),max:parseFloat(s[1]),resolution:s.length>=3&&s[2]!=="0"?parseFloat(s[2]):void 0}}).filter(mi):r.map(i=>parseFloat(i))}function Ib(t){if(!t)return;const e=t.includes("/"),r=t.split(",");return e?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:s[0],max:s[1],resolution:s.length>=3&&s[2]!=="0"?s[2]:void 0}}).filter(mi):r}function Eb(t){if(!t)return;const e=t.includes("/"),r=t.split(",");return e?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:Hy(s[0]),max:Hy(s[1]),resolution:s.length>=3&&s[2]!=="0"?Tre(s[2]):void 0}}).filter(mi):r.map(i=>Hy(i))}function Hy(t){return Pe.fromISO(t,{zone:Mc.utcInstance}).toJSDate()}function Tre(t){const e=/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i,r=t.match(e);return r?{years:Gl(r[1]),months:Gl(r[2]),days:Gl(r[3]),hours:Gl(r[4]),minutes:Gl(r[5]),seconds:Gl(r[6])}:null}function Gl(t){if(!t)return 0;const e=/(?:\d+(?:\.|,)\d+|\d+)/,r=t.match(e);if(!r)return 0;const i=r[0].replace(",",".");return Number(i)}function Zy(t){return t.toISOString().replace(/\.[0-9]{3}/,"")}const Mre="0000-01-01T00:00:00Z",Ire="9999-12-31T23:59:59Z";function Pb(t){if(!t||t.isAllTime||t.isEmpty)return;const{start:e,end:r}=t;return e&&r&&e.getTime()===r.getTime()?`${Zy(e)}`:`${e?Zy(e):Mre}/${r?Zy(r):Ire}`}const Rb=new Set([102100,3857,102113,900913]),Ere=new Set([3395,54004]);function Pre(t,e){let r=t.wkid;return e==null?r:(r!=null&&e.includes(r)||!t.latestWkid||(r=t.latestWkid),r!=null&&Rb.has(r)?e.find(i=>Rb.has(i))||e.find(i=>Ere.has(i))||102100:r)}const Jy=new be({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function Ob(t){return t==="text/html"}function Cb(t){return t==="text/plain"}let we=class extends R6(t9(X6(e9(Y6(K6(Fh(Fe))))))){constructor(...t){super(...t),this.allSublayers=new ui({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([ys(()=>this.sublayers,"after-add",({item:e})=>{e.parent=e.layer=this},It),ys(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},It),ae(()=>this.sublayers,(e,r)=>{if(r)for(const i of r)i.layer=i.parent=null;if(e)for(const i of e)i.parent=i.layer=this},It)])}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}destroy(){this.allSublayers.destroy()}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},t).catch(ki).then(()=>this._fetchService(e)).then(()=>this._checkLayerValidity())),Promise.resolve(this)}set timeInfo(t){super.timeInfo=t}readFullExtentFromItemOrMap(t,e){const r=e.extent;return r?new le({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(t,e){e.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]]}get featureInfoFormat(){return this.featureInfoFormats==null?null:this.featureInfoFormats.find(Ob)??this.featureInfoFormats.find(Cb)??null}set featureInfoFormat(t){t==null?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):(Ob(t)||Cb(t))&&this._override("featureInfoFormat",t)}readImageFormat(t,e){const r=e.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(t,e){return new B(e.spatialReferences[0])}writeSpatialReferences(t,e){const r=this.spatialReference?.wkid;t&&r?(e.spatialReferences=t.filter(i=>i!==r),e.spatialReferences.unshift(r)):e.spatialReferences=t}readSublayersFromItemOrMap(t,e,r){return kb(e.layers,r,e.visibleLayers)}readSublayers(t,e,r){return kb(e.layers,r)}writeSublayers(t,e,r,i){e.layers=[];const s=new Map,n=t.flatten(({sublayers:o})=>o??[]);for(const o of n)if(typeof o.parent?.id=="number"){const l=s.get(o.parent.id);l!=null?l.push(o.id):s.set(o.parent.id,[o.id])}for(const o of n){const l={sublayer:o,...i},c=o.write({parentLayerId:typeof o.parent?.id=="number"?o.parent.id:-1},l);if(s.has(o.id)&&(c.sublayerIds=s.get(o.id)),!o.sublayers&&o.name){const d=o.write({},l);delete d.id,e.layers.push(d)}}e.visibleLayers=n.filter(({visible:o,sublayers:l})=>o&&!l).map(({name:o})=>o).toArray()}set url(t){if(!t)return void this._set("url",t);const{path:e,query:r}=Hs(t);for(const s in r)/^(request|service)$/i.test(s)&&delete r[s];const i=k9(e,r??{});this._set("url",i)}createExportImageParameters(t,e,r,i){const s=i?.pixelRatio??1,n=Q3({extent:t,width:e})*s,o=new On({layer:this,scale:n}),{xmin:l,ymin:c,xmax:d,ymax:h,spatialReference:y}=t,f=Pre(y,this.spatialReferences),m=this.version==="1.3.0"&&fP(f)?`${c},${l},${h},${d}`:`${l},${c},${d},${h}`,g=o.toJSON(),v=this.version==="1.3.0"?"crs":"srs";return{bbox:m,[v]:f==null||isNaN(f)?void 0:"EPSG:"+f,...g}}async fetchImage(t,e,r,i){const s=this.mapUrl,n=this.createExportImageParameters(t,e,r,i);if(!n.layers){const c=document.createElement("canvas");return c.width=e,c.height=r,c}const o=Pb(i?.timeExtent),l={responseType:"image",query:this._mixCustomParameters({width:e,height:r,...n,time:o,...this.refreshParameters}),signal:i?.signal};return Le(s??"",l).then(c=>c.data)}async fetchImageBitmap(t,e,r,i){const s=this.mapUrl??"",n=this.createExportImageParameters(t,e,r,i);if(!n.layers){const d=document.createElement("canvas");return d.width=e,d.height=r,d}const o=Pb(i?.timeExtent),l={responseType:"blob",query:this._mixCustomParameters({width:e,height:r,...n,time:o,...this.refreshParameters}),signal:i?.signal},{data:c}=await Le(s,l);return hP(c,s,i?.signal)}fetchFeatureInfo(t,e,r,i,s){const n=Q3({extent:t,width:e}),o=new On({layer:this,scale:n}),l=bre(o.visibleSublayers);if(this.featureInfoUrl==null||l==null)return Promise.resolve([]);if(this.fetchFeatureInfoFunction==null&&this.featureInfoFormat==null)return Promise.resolve([]);const c=this.version==="1.3.0"?{I:i,J:s}:{x:i,y:s},d={query_layers:l,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:e,height:r,...c},h={...this.createExportImageParameters(t,e,r),...d},y=this._mixCustomParameters(h);return this.fetchFeatureInfoFunction!=null?this.fetchFeatureInfoFunction(y):this._defaultFetchFeatureInfoFunction(k9(this.featureInfoUrl,y))}findSublayerById(t){return this.allSublayers.find(e=>e.id===t)}findSublayerByName(t){return this.allSublayers.find(e=>e.name===t)}serviceSupportsSpatialReference(t){return TO(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(e=>{const r=e===900913?B.WebMercator:new B({wkid:e});return ot(r,t)})}_defaultFetchFeatureInfoFunction(t){const e=document.createElement("iframe");e.src=MO(IO.sanitizeUrl(La(t))),e.style.border="none",e.style.margin="0",e.style.width="100%",e.setAttribute("sandbox","");const r=new ea({title:this.title,content:e}),i=new et({sourceLayer:this,popupTemplate:r});return Promise.resolve([i])}async _fetchService(t){if(!this.resourceInfo&&this.parsedUrl?.path){const{path:e,query:r}=this.parsedUrl,{data:i}=await Le(e,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...r,...this.customParameters},responseType:"xml",signal:t});this.resourceInfo=wre(i)}if(this.parsedUrl){const e=new EO(this.parsedUrl.path),{httpsDomains:r}=qr.request;e.scheme!=="https"||e.port&&e.port!=="443"||!e.host||r.includes(e.host)||r.push(e.host)}this.read(this.resourceInfo,{origin:"service"})}_checkLayerValidity(){if(!this.allSublayers.length)throw new M("wmslayer:empty-layer","The layer doesn't have any sublayer")}_mixCustomParameters(t){if(!this.customLayerParameters&&!this.customParameters)return t;const e={...this.customParameters,...this.customLayerParameters};for(const r in e)t[r.toLowerCase()]=e[r];return t}};function Rre(t,e){return t.some(r=>{for(const i in r)if(o_(r,i,null,e))return!0;return!1})}function kb(t,e,r){t=t??[];const i=new Map;t.every(n=>n.id==null)&&(t=P(t)).forEach((n,o)=>n.id=o);for(const n of t){const o=new je;o.read(n,e),r&&!r.includes(o.name)&&(o.visible=!1),i.set(o.id,o)}const s=[];for(const n of t){const o=n.id!=null?i.get(n.id):null;if(o)if(n.parentLayerId!=null&&n.parentLayerId>=0){const l=i.get(n.parentLayerId);if(!l)continue;l.sublayers||(l.sublayers=new q),l.sublayers.push(o)}else s.push(o)}return s}a([u({readOnly:!0})],we.prototype,"allSublayers",void 0),a([u({json:{type:Object,write:!0}})],we.prototype,"customParameters",void 0),a([u({json:{type:Object,write:!0}})],we.prototype,"customLayerParameters",void 0),a([u({type:String,json:{write:!0}})],we.prototype,"copyright",void 0),a([u()],we.prototype,"description",void 0),a([u({readOnly:!0})],we.prototype,"dimensions",void 0),a([u({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],we.prototype,"fullExtent",void 0),a([F(["web-document","portal-item"],"fullExtent",["extent"])],we.prototype,"readFullExtentFromItemOrMap",null),a([j(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],we.prototype,"writeFullExtent",null),a([u({type:[le]})],we.prototype,"fullExtents",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],we.prototype,"featureInfoFormat",null),a([u({type:[String],readOnly:!0})],we.prototype,"featureInfoFormats",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],we.prototype,"featureInfoUrl",void 0),a([u()],we.prototype,"fetchFeatureInfoFunction",void 0),a([u({type:String,json:{origins:{"web-document":{default:"image/png",type:Jy.jsonValues,read:{reader:Jy.read,source:"format"},write:{writer:Jy.write,target:"format"}}}}})],we.prototype,"imageFormat",void 0),a([F("imageFormat",["supportedImageFormatTypes"])],we.prototype,"readImageFormat",null),a([u({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],we.prototype,"imageMaxHeight",void 0),a([u({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],we.prototype,"imageMaxWidth",void 0),a([u()],we.prototype,"imageTransparency",void 0),a([u(EI)],we.prototype,"legendEnabled",void 0),a([u({type:["show","hide","hide-children"]})],we.prototype,"listMode",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],we.prototype,"mapUrl",void 0),a([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],we.prototype,"isReference",void 0),a([u({type:["WMS"]})],we.prototype,"operationalLayerType",void 0),a([u()],we.prototype,"resourceInfo",void 0),a([u({type:B,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],we.prototype,"spatialReference",void 0),a([F(["web-document","portal-item"],"spatialReference",["spatialReferences"])],we.prototype,"readSpatialReferenceFromItemOrDocument",null),a([u({type:[ve],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],we.prototype,"spatialReferences",void 0),a([j(["web-document","portal-item"],"spatialReferences")],we.prototype,"writeSpatialReferences",null),a([u({type:q.ofType(je),json:{write:{target:"layers",overridePolicy(t,e,r){if(Rre(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],we.prototype,"sublayers",void 0),a([F(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],we.prototype,"readSublayersFromItemOrMap",null),a([F("service","sublayers",["layers"])],we.prototype,"readSublayers",null),a([j("sublayers",{layers:{type:[je]},visibleLayers:{type:[String]}})],we.prototype,"writeSublayers",null),a([u({json:{read:!1},readOnly:!0,value:"wms"})],we.prototype,"type",void 0),a([u(C6)],we.prototype,"url",null),a([u({type:String,json:{write:{ignoreOrigin:!0}}})],we.prototype,"version",void 0),we=a([_("esri.layers.WMSLayer")],we);const ld=we,Qhe=Object.freeze(Object.defineProperty({__proto__:null,default:ld},Symbol.toStringTag,{value:"Module"})),Yhe=t=>t.toFormat("yyyyLLdd"),Ore=t=>Cre(t,{hour:12}),Cre=(t,e)=>{const r={hour:0,minute:0,second:0,millisecond:0,...e};return t.set(r)},Khe=t=>t.toFormat("h:mm a");function C1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}var kre={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function H5(t,e){function r(s,n,o){if(!(typeof document>"u")){o=C1({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var c in o)o[c]&&(l+="; "+c,o[c]!==!0&&(l+="="+o[c].split(";")[0]));return document.cookie=s+"="+t.write(n,s)+l}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var n=document.cookie?document.cookie.split("; "):[],o={},l=0;l<n.length;l++){var c=n[l].split("="),d=c.slice(1).join("=");try{var h=decodeURIComponent(c[0]);if(o[h]=t.read(d,h),s===h)break}catch{}}return s?o[s]:o}}return Object.create({set:r,get:i,remove:function(s,n){r(s,"",C1({},n,{expires:-1}))},withAttributes:function(s){return H5(this.converter,C1({},this.attributes,s))},withConverter:function(s){return H5(C1({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Fb=H5(kre,{path:"/"}),Fre=Object.defineProperty,Are=Object.getOwnPropertyDescriptor,Il=(t,e,r,i)=>{for(var s=i>1?void 0:i?Are(e,r):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(s=(i?o(e,r,s):o(s))||s);return i&&s&&Fre(e,r,s),s};const Ab="money-tides-user-settings";let Jn=class extends Z{constructor(){super(...arguments),this.basemap="gray-vector",this.colorMode="auto",this.colorType="light",this.date=Ore(Pe.now().setZone("America/Los_Angeles")),this.layout="end",this.preferredColorMode=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",this.scale="s"}load(){const t=JSON.parse(Fb.get(Ab)||"{}"),{colorMode:e,scale:r}=t;e&&(this.colorMode=e),this.colorModeUpdate(this.colorMode),r&&(this.scale=r)}updateSettings(t){const{colorMode:e,scale:r}=t;e&&(this.colorMode=e,this.colorModeUpdate(this.colorMode)),r&&(this.scale=r),Fb.set(Ab,JSON.stringify({colorMode:this.colorMode,scale:this.scale}))}colorModeUpdate(t){t==="auto"?(this.colorType=this.preferredColorMode,this.basemap=this.preferredColorMode==="light"?"gray-vector":"dark-gray-vector"):(this.colorType=t,this.basemap=t==="light"?"gray-vector":"dark-gray-vector"),document.body.classList.remove("calcite-mode-dark"),document.body.classList.remove("calcite-mode-light"),document.body.classList.add(`calcite-mode-${t==="auto"?this.preferredColorMode:t}`);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",this.colorType==="dark"?"#009af2":"#007ac2")}};Il([u()],Jn.prototype,"basemap",2);Il([u()],Jn.prototype,"colorMode",2);Il([u()],Jn.prototype,"colorType",2);Il([u()],Jn.prototype,"date",2);Il([u()],Jn.prototype,"layout",2);Il([u()],Jn.prototype,"scale",2);Jn=Il([_("ApplicationSettings")],Jn);const Lb={description:"dB",gradientInfos:[{label:-20,value:"#6b6b2b 0.00%"},{label:-10,value:"#bfb7a0 11.11%"},{label:0,value:"#6fa0d9 22.22%"},{label:10,value:"#345fb8 33.33%"},{label:20,value:"#19a92f 44.44%"},{label:30,value:"#2aa84f 55.56%"},{label:40,value:"#ffea3b 66.67%, #ff8c00 66.67%"},{label:50,value:"#ff8c00 77.78%, #d9252b 88.89%"},{label:60,value:"#d9252b 88.89%"},{label:70,value:"#8b1a70 100.00%"}]},y9=new Jn,Lre=[{id:"9434939",latitude:44.434,longitude:-124.058,name:"Alsea Bay",weather:"us/or/waldport",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ253",name:"Coastal waters from Cape Foulweather to Florence OR out 10 nm"}},{id:"9439040",latitude:46.207,longitude:-123.768,name:"Astoria",weather:"us/or/astoria",forecastZone:{code:"ORZ101",name:"Clatsop County Coast"},coastalZone:{code:"PZZ210",name:"Columbia River Bar"}},{id:"9430104",latitude:42.043,longitude:-124.285,name:"Chetco River",weather:"us/or/brookings",forecastZone:{code:"ORZ022",name:"Curry County Coast"},coastalZone:{code:"PZZ356",name:"Coastal waters from Cape Blanco OR to Pt. St. George CA out 10 nm"}},{id:"9432845",latitude:43.38,longitude:-124.215,name:"Coos Bay",weather:"us/or/coos-bay",forecastZone:{code:"ORZ021",name:"South Central Oregon Coast"},coastalZone:{code:"PZZ350",name:"Coastal waters from Florence to Cape Blanco OR out 10 nm"}},{id:"9432373",latitude:43.12,longitude:-124.413,name:"Coquille River",weather:"us/or/bandon",forecastZone:{code:"ORZ021",name:"South Central Oregon Coast"},coastalZone:{code:"PZZ350",name:"Coastal waters from Florence to Cape Blanco OR out 10 nm"}},{id:"9435827",latitude:44.81,longitude:-124.058,name:"Depoe Bay",weather:"us/or/depoe-bay",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9437908",latitude:45.71,longitude:-123.89,name:"Nehalem Bay",weather:"us/or/wheeler",forecastZone:{code:"ORZ102",name:"Tillamook County Coast"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"TWC0857",latitude:45.167,longitude:-123.967,name:"Nestucca Bay",weather:"us/or/pacific-city",forecastZone:{code:"ORZ102",name:"Tillamook County Coast"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9437262",latitude:45.43,longitude:-123.945,name:"Netarts Bay",weather:"us/or/netarts",forecastZone:{code:"ORZ102",name:"Tillamook County Coast"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9431011",latitude:42.422,longitude:-124.419,name:"Rouge River",weather:"us/or/gold-beach",forecastZone:{code:"ORZ022",name:"Curry County Coast"},coastalZone:{code:"PZZ356",name:"Coastal waters from Cape Blanco OR to Pt. St. George CA out 10 nm"}},{id:"9436101",latitude:44.927,longitude:-124.013,name:"Siletz Bay",weather:"us/or/lincoln-city",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9434132",latitude:44.017,longitude:-124.13,name:"Siuslaw River",weather:"us/or/florence",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ350",name:"Coastal waters from Florence to Cape Blanco OR out 10 nm"}},{id:"9437585",latitude:45.57,longitude:-123.965,name:"Tillamook Bay",weather:"us/or/garibaldi",forecastZone:{code:"ORZ102",name:"Tillamook County Coast"},coastalZone:{code:"PZZ252",name:"Coastal waters from Cape Falcon to Cape Foulweather OR out 10 nm"}},{id:"9440747",latitude:46.502,longitude:-124.023,name:"Willapa Bay",weather:"us/wa/long-beach",forecastZone:{code:"WAZ201",name:"South Washington Coast"},coastalZone:{code:"PZZ251",name:"Coastal waters from Cape Shoalwater WA to Cape Falcon OR out 10 nm"}},{id:"9433501",latitude:43.708,longitude:-124.098,name:"Winchester Bay",weather:"us/or/winchester-bay",forecastZone:{code:"ORZ021",name:"South Central Oregon Coast"},coastalZone:{code:"PZZ350",name:"Coastal waters from Florence to Cape Blanco OR out 10 nm"}},{id:"9435385",latitude:44.627,longitude:-124.055,name:"Yaquina Bay",weather:"us/or/newport",forecastZone:{code:"ORZ103",name:"Central Coast of Oregon"},coastalZone:{code:"PZZ253",name:"Coastal waters from Cape Foulweather to Florence OR out 10 nm"}}],bP=new iZ({constraints:{rotationEnabled:!1},extent:{spatialReference:{wkid:102100},xmin:-13927811,ymin:5308864,xmax:-13626955,ymax:5844535},map:new Cx({basemap:y9.basemap})});ae(()=>y9.basemap,t=>{bP.map.basemap=t});const Nre={"911 Telephone Outage":[192,192,192],"Administrative Message":[192,192,192],"Air Quality Alert":[128,128,128],"Air Stagnation Advisory":[128,128,128],"Ashfall Advisory":[105,105,105],"Ashfall Warning":[169,169,169],"Avalanche Advisory":[205,133,63],"Avalanche Warning":[30,144,255],"Avalanche Watch":[244,164,96],"Beach Hazards Statement":[64,224,208],"Blizzard Warning":[255,69,0],"Blowing Dust Advisory":[189,183,107],"Blowing Dust Warning":[255,228,196],"Blue Alert":[255,255,255],"Brisk Wind Advisory":[216,191,216],"Child Abduction Emergency":[255,255,255],"Civil Danger Warning":[255,182,193],"Civil Emergency Message":[255,182,193],"Coastal Flood Advisory":[124,252,0],"Coastal Flood Statement":[107,142,35],"Coastal Flood Warning":[34,139,34],"Coastal Flood Watch":[102,205,170],"Cold Weather Advisory":[175,238,238],"Dense Fog Advisory":[112,128,144],"Dense Smoke Advisory":[240,230,140],"Dust Advisory":[189,183,107],"Dust Storm Warning":[255,228,196],"Earthquake Warning":[139,69,19],"Evacuation Immediate":[127,255,0],"Extreme Cold Warning":[0,0,255],"Extreme Cold Watch":[95,158,160],"Extreme Fire Danger":[233,150,122],"Extreme Heat Warning":[199,22,133],"Extreme Heat Watch":[128,0,0],"Extreme Wind Warning":[255,140,0],"Fire Warning":[160,82,45],"Fire Weather Watch":[255,222,173],"Flash Flood Statement":[139,0,0],"Flash Flood Warning":[139,0,0],"Flash Flood Watch":[46,139,87],"Flood Advisory":[0,255,127],"Flood Statement":[0,255,0],"Flood Warning":[0,255,0],"Flood Watch":[46,139,87],"Freeze Warning":[72,61,139],"Freeze Watch":[0,255,255],"Freezing Fog Advisory":[0,128,128],"Freezing Spray Advisory":[0,191,255],"Frost Advisory":[100,149,237],"Gale Warning":[221,160,221],"Gale Watch":[255,192,203],"Hazardous Materials Warning":[75,0,130],"Hazardous Seas Warning":[216,191,216],"Hazardous Seas Watch":[72,61,139],"Hazardous Weather Outlook":[238,232,170],"Heat Advisory":[255,127,80],"Heavy Freezing Spray Warning":[0,191,255],"Heavy Freezing Spray Watch":[188,143,143],"High Surf Advisory":[186,85,211],"High Surf Warning":[34,139,34],"High Wind Warning":[218,165,32],"High Wind Watch":[184,134,11],"Hurricane Force Wind Warning":[205,92,92],"Hurricane Force Wind Watch":[153,50,204],"Hurricane Warning":[220,20,60],"Hurricane Watch":[255,0,255],"Hydrologic Outlook":[144,238,144],"Ice Storm Warning":[139,0,139],"Lake Effect Snow Warning":[0,139,139],"Lake Wind Advisory":[210,180,140],"Lakeshore Flood Advisory":[124,252,0],"Lakeshore Flood Statement":[107,142,35],"Lakeshore Flood Warning":[34,139,34],"Lakeshore Flood Watch":[102,205,170],"Law Enforcement Warning":[192,192,192],"Local Area Emergency":[192,192,192],"Low Water Advisory":[165,42,42],"Marine Weather Statement":[255,239,213],"Nuclear Power Plant Warning":[75,0,130],"Radiological Hazard Warning":[75,0,130],"Red Flag Warning":[255,20,147],"Rip Current Statement":[64,224,208],"Severe Thunderstorm Warning":[255,165,0],"Severe Thunderstorm Watch":[219,112,147],"Severe Weather Statement":[0,255,255],"Shelter In Place Warning":[250,128,114],"Short Term Forecast":[152,251,152],"Small Craft Advisory":[216,191,216],"Snow Squall Warning":[199,21,133],"Special Marine Warning":[255,165,0],"Special Weather Statement":[255,228,181],"Storm Surge Warning":[181,36,247],"Storm Surge Watch":[219,127,247],"Storm Warning":[148,0,211],"Storm Watch":[255,228,181],Test:[240,255,255],"Tornado Warning":[255,0,0],"Tornado Watch":[255,255,0],"Tropical Cyclone Local Statement":[255,228,181],"Tropical Storm Warning":[178,34,34],"Tropical Storm Watch":[240,128,128],"Tsunami Advisory":[210,105,30],"Tsunami Warning":[253,99,71],"Tsunami Watch":[255,0,255],"Typhoon Warning":[220,20,60],"Typhoon Watch":[255,0,255],"Volcano Warning":[47,79,79],"Wind Advisory":[210,180,140],"Winter Storm Warning":[255,105,180],"Winter Storm Watch":[70,130,180],"Winter Weather Advisory":[123,104,238]},Dre=new W({outFields:["*"],url:"https://mapservices.weather.noaa.gov/eventdriven/rest/services/WWA/watch_warn_adv/MapServer/1"});let jre=new Ve({spatialReference:{wkid:4326},rings:[[[-124.28500000000001,42.10095538564621],[-124.28241334906178,42.10092333383122],[-124.27982956439917,42.10082721390198],[-124.27725150908569,42.100667132366006],[-124.27468203979436,42.1004432666036],[-124.27212400360665,42.10015586466974],[-124.26958023483253,42.099805245017045],[-124.26705355184518,42.09939179613999],[-124.2645467539342,42.09891597614111],[-124.26206261818056,42.09837831221937],[-124.2596038963576,42.097779400081414],[-124.25717331186051,42.09711990327649],[-124.25477355666912,42.09640055245558],[-124.25240728834648,42.09562214455573],[-124.25007712707698,42.094785541910596],[-124.24778565274778,42.093891671288006],[-124.24553540207606,42.092941522855824],[-124.24332886578638,42.09193614907725],[-124.24116848584028,42.09087666353681],[-124.23905665272203,42.089764239698425],[-124.23699570278359,42.08860010959686],[-124.23498791565112,42.08738556246427],[-124.23303551169651,42.08612194329315],[-124.23114064957696,42.084810651337584],[-124.22930542384452,42.08345313855433],[-124.22753186262906,42.08205090798556],[-124.22582192539704,42.08060551208517],[-124.22417750078817,42.07911855099044],[-124.22260040453283,42.077591670741214],[-124.22109237745222,42.076026561448266],[-124.2196550835438,42.074424955413434],[-124.21829010815338,42.072788625203174],[-124.21699895623658,42.07111938167797],[-124.21578305071122,42.069419071979816],[-124.21464373090232,42.06768957748004],[-124.21358225108125,42.0659328116896],[-124.2125997791011,42.06415071813452],[-124.21169739512897,42.06234526819867],[-124.2108760904769,42.06051845893626],[-124.21013676653277,42.058672310856686],[-124.20948023379162,42.05680886568408],[-124.20890721098893,42.05493018409412],[-124.20841832433655,42.05303834343055],[-124.20801410686174,42.05113543540419],[-124.20769499785025,42.049223563776664],[-124.20746134239353,42.047304842031735],[-124.20731339104096,42.045381391036685],[-124.20725129955679,42.043455336696255],[-124.20727512878216,42.04152880760202],[-124.20738484460234,42.03960393267954],[-124.20758031801871,42.03768283883594],[-124.20786132532565,42.0357676486107],[-124.20822754839159,42.03386047783197],[-124.2086785750443,42.031963433281206],[-124.20921389955903,42.030078610368605],[-124.20983292324976,42.028208090821856],[-124.21053495516213,42.0263539403909],[-124.21131921286715,42.024518206570924],[-124.21218482335524,42.02270291634648],[-124.21313082402877,42.02091007395878],[-124.21415616379225,42.019141658698835],[-124.21525970423899,42.01739962272892],[-124.21644022093243,42.0156858889344],[-124.21769640478094,42.01400234880866],[-124.21902686350437,42.01235086037307],[-124.22043012319037,42.01073324613456],[-124.22190462993942,42.0091512910827],[-124.22344875159571,42.00760674072869],[-124.22506077956272,42.00610129918831],[-124.22673893070098,42.0046366273108],[-124.22848134930592,42.00321434085586],[-124.23028610916404,42.001836008720495],[-124.23215121568414,42.00050315121792],[-124.23407460810252,41.99921723841003],[-124.23605416175856,41.99797968849552],[-124.23808769043873,41.99679186625513],[-124.24017294878657,41.99565508155596],[-124.24230763477568,41.99457058791611],[-124.24448939224315,41.99353958113146],[-124.24671581348062,41.99256319796602],[-124.24898444188048,41.991642514907],[-124.25129277463377,41.99077854698624],[-124.25363826547748,41.98997224666913],[-124.25601832748778,41.9892245028121],[-124.25843033591663,41.98853613968994],[-124.26087163106833,41.98790791609391],[-124.26333952121338,41.98734052450167],[-124.26583128553594,41.98683459031967],[-124.26834417711247,41.9863906711992],[-124.27087542591768,41.98600925642654],[-124.27342224185533,41.985690766387776],[-124.27598181780978,41.98543555210922],[-124.27855133271602,41.98524389487361],[-124.28112795464395,41.985116005912474],[-124.28370884389486,41.98505202617526],[-124.28629115610515,41.98505202617526],[-124.28887204535606,41.985116005912474],[-124.29144866728399,41.98524389487361],[-124.29401818219023,41.98543555210922],[-124.29657775814468,41.985690766387776],[-124.29912457408233,41.98600925642654],[-124.30165582288754,41.9863906711992],[-124.30416871446407,41.98683459031967],[-124.30666047878664,41.98734052450167],[-124.30912836893168,41.98790791609391],[-124.31156966408338,41.98853613968994],[-124.31398167251223,41.9892245028121],[-124.31636173452253,41.98997224666913],[-124.31870722536624,41.99077854698624],[-124.32101555811953,41.991642514907],[-124.32328418651939,41.99256319796602],[-124.32551060775685,41.99353958113146],[-124.32769236522432,41.99457058791611],[-124.32982705121344,41.99565508155596],[-124.33191230956128,41.99679186625513],[-124.33394583824145,41.99797968849552],[-124.33592539189749,41.99921723841003],[-124.33784878431587,42.00050315121792],[-124.33971389083598,42.001836008720495],[-124.34151865069408,42.00321434085586],[-124.34326106929905,42.0046366273108],[-124.34493922043728,42.00610129918831],[-124.3465512484043,42.00760674072869],[-124.34809537006059,42.0091512910827],[-124.34956987680964,42.01073324613456],[-124.35097313649565,42.012350860373076],[-124.35230359521907,42.01400234880865],[-124.35355977906758,42.0156858889344],[-124.35474029576102,42.01739962272892],[-124.35584383620775,42.019141658698835],[-124.35686917597124,42.02091007395878],[-124.35781517664476,42.02270291634648],[-124.35868078713285,42.02451820657092],[-124.35946504483788,42.0263539403909],[-124.36016707675024,42.028208090821856],[-124.36078610044098,42.030078610368605],[-124.3613214249557,42.031963433281206],[-124.36177245160842,42.03386047783197],[-124.36213867467436,42.035767648610694],[-124.3624196819813,42.03768283883594],[-124.36261515539766,42.03960393267954],[-124.36272487121785,42.04152880760202],[-124.36274870044323,42.043455336696255],[-124.36268660895907,42.045381391036685],[-124.36253865760648,42.047304842031735],[-124.36230500214975,42.049223563776664],[-124.36198589313827,42.051135435404184],[-124.36158167566347,42.05303834343054],[-124.36109278901108,42.05493018409412],[-124.36051976620838,42.05680886568408],[-124.35986323346724,42.058672310856686],[-124.35912390952312,42.06051845893626],[-124.35830260487104,42.06234526819867],[-124.35740022089891,42.06415071813452],[-124.35641774891876,42.0659328116896],[-124.35535626909768,42.06768957748004],[-124.35421694928878,42.069419071979816],[-124.35300104376343,42.07111938167797],[-124.35170989184662,42.072788625203174],[-124.35034491645621,42.074424955413434],[-124.34890762254778,42.076026561448266],[-124.34739959546718,42.077591670741214],[-124.34582249921185,42.07911855099044],[-124.34417807460297,42.08060551208517],[-124.34246813737094,42.08205090798556],[-124.3406945761555,42.08345313855433],[-124.33885935042305,42.084810651337584],[-124.3369644883035,42.08612194329315],[-124.33501208434889,42.08738556246427],[-124.33300429721642,42.08860010959686],[-124.330943347278,42.08976423969843],[-124.32883151415973,42.09087666353681],[-124.32667113421363,42.09193614907724],[-124.32446459792395,42.092941522855824],[-124.32221434725223,42.093891671288006],[-124.31992287292303,42.09478554191059],[-124.31759271165353,42.09562214455573],[-124.31522644333089,42.09640055245558],[-124.3128266881395,42.09711990327649],[-124.31039610364242,42.097779400081414],[-124.30793738181944,42.09837831221936],[-124.30545324606581,42.09891597614111],[-124.30294644815483,42.09939179613999],[-124.30041976516748,42.099805245017045],[-124.29787599639336,42.10015586466974],[-124.29531796020565,42.1004432666036],[-124.29274849091432,42.100667132366006],[-124.29017043560084,42.10082721390199],[-124.28758665093822,42.10092333383122],[-124.28500000000001,42.10095538564621]],[[-124.41900000000001,42.47995154219152],[-124.41639779589867,42.47991949211303],[-124.41379847541245,42.4798233773926],[-124.41120491893439,42.479663304535876],[-124.40862000041756,42.47943945091998],[-124.40604658416395,42.479152064595404],[-124.40348752162498,42.478801464008896],[-124.4009456482166,42.47838803764774],[-124.3984237801531,42.477912243605786],[-124.39592471130264,42.47737460907183],[-124.393451210069,42.4767757297408],[-124.39100601630251,42.47611626914853],[-124.38859183824368,42.47539695793083],[-124.3862113495035,42.474618593007854],[-124.38386718608339,42.473782036694274],[-124.38156194343848,42.47288821573699],[-124.37929817358757,42.471938120280754],[-124.37707838227287,42.470932802763414],[-124.37490502617278,42.46987337674173],[-124.37278051017122,42.468761015649356],[-124.37070718468621,42.467596951488154],[-124.36868734306063,42.466382473454594],[-124.36672321901864,42.465118926502655],[-124.36481698418996,42.463807709844836],[-124.36297074570541,42.46245027539323],[-124.36118654386577,42.461048126142025],[-124.35946634988689,42.45960281449382],[-124.35781206372378,42.45811594053109],[-124.35622551197532,42.456589150235224],[-124.35470844587276,42.45502413365496],[-124.35326253935358,42.45342262302619],[-124.35188938722301,42.45178639084557],[-124.35059050340526,42.45011724789985],[-124.34936731928626,42.44841704125323],[-124.34822118214964,42.44668765219513],[-124.34715335370757,42.44493099415046],[-124.34616500872808,42.44314901055504],[-124.34525723376049,42.44134367269826],[-124.34443102595952,42.43951697753567],[-124.34368729201023,42.43767094547374],[-124.34302684715423,42.43580761812949],[-124.34245041431814,42.43392905606723],[-124.34195862334542,42.43203733651523],[-124.34155201033218,42.43013455106473],[-124.34123101706724,42.42822280335374],[-124.3409959905776,42.42630420673846],[-124.34084718277869,42.424380881954704],[-124.34078475023084,42.42245495477214],[-124.34080875400099,42.42052855364358],[-124.34091915963023,42.418603807352376],[-124.34111583720696,42.41668284266019],[-124.34139856154539,42.41476778195789],[-124.34176701246894,42.412860740922085],[-124.34222077519834,42.41096382618003],[-124.34275934084343,42.40907913298511],[-124.34338210699845,42.40720874290608],[-124.34408837843961,42.40535472153177],[-124.34487736792433,42.403519116194644],[-124.34574819709094,42.40170395371492],[-124.34669989745773,42.39991123816829],[-124.3477314115203,42.398142948679386],[-124.34884159394564,42.39640103724339],[-124.35002921286151,42.394687426578336],[-124.35129295124011,42.39300400801021],[-124.35263140837353,42.39135263939339],[-124.35404310143993,42.38973514306839],[-124.3555264671586,42.3881533038594],[-124.35707986353148,42.386608867113566],[-124.35870157166995,42.38510353678426],[-124.36038979770404,42.383638973560366],[-124.3621426747723,42.38221679304349],[-124.3639582650904,42.38083856397537],[-124.36583456209537,42.37950580651686],[-124.3677694926637,42.37821999058095],[-124.36976091940079,42.376982534221085],[-124.37180664299896,42.37579480207683],[-124.37390440466176,42.37465810387845],[-124.37605188859146,42.37357369301184],[-124.37824672453779,42.37254276514577],[-124.38048649040414,42.37156645692227],[-124.38276871490936,42.3706458447122],[-124.38509088030176,42.36978194343694],[-124.3874504251222,42.36897570545745],[-124.38984474701405,42.368228019532104],[-124.3922712055763,42.36753970984424],[-124.39472712525692,42.36691153510047],[-124.39720979828368,42.3663441877008],[-124.39971648762908,42.36583829298129],[-124.402244430006,42.36539440853019],[-124.40479083889149,42.365013023578236],[-124.40735290757493,42.3646945584637],[-124.40992781222755,42.36443936417285],[-124.41251271499013,42.36424772195625],[-124.41510476707545,42.36411984302126],[-124.41770111188228,42.364055868301165],[-124.42029888811774,42.364055868301165],[-124.42289523292459,42.36411984302126],[-124.4254872850099,42.36424772195625],[-124.42807218777247,42.36443936417285],[-124.43064709242509,42.3646945584637],[-124.43320916110854,42.365013023578236],[-124.43575556999403,42.36539440853019],[-124.43828351237094,42.36583829298129],[-124.44079020171634,42.3663441877008],[-124.4432728747431,42.36691153510047],[-124.44572879442373,42.36753970984424],[-124.44815525298598,42.368228019532104],[-124.45054957487783,42.36897570545745],[-124.45290911969826,42.36978194343694],[-124.45523128509066,42.3706458447122],[-124.45751350959588,42.37156645692227],[-124.45975327546223,42.37254276514577],[-124.46194811140856,42.37357369301184],[-124.46409559533826,42.37465810387845],[-124.46619335700106,42.37579480207683],[-124.46823908059923,42.376982534221085],[-124.47023050733632,42.37821999058095],[-124.47216543790465,42.37950580651686],[-124.47404173490962,42.38083856397537],[-124.47585732522772,42.38221679304349],[-124.47761020229598,42.383638973560366],[-124.47929842833007,42.38510353678426],[-124.48092013646854,42.386608867113566],[-124.48247353284142,42.3881533038594],[-124.4839568985601,42.389735143068386],[-124.4853685916265,42.39135263939338],[-124.48670704875991,42.39300400801021],[-124.48797078713851,42.394687426578336],[-124.48915840605439,42.39640103724339],[-124.49026858847972,42.398142948679386],[-124.4913001025423,42.39991123816829],[-124.49225180290908,42.40170395371492],[-124.4931226320757,42.403519116194644],[-124.49391162156041,42.40535472153177],[-124.49461789300157,42.40720874290608],[-124.4952406591566,42.40907913298511],[-124.49577922480168,42.41096382618003],[-124.49623298753109,42.412860740922085],[-124.49660143845463,42.414767781957885],[-124.49688416279307,42.41668284266019],[-124.49708084036979,42.418603807352376],[-124.49719124599903,42.42052855364358],[-124.49721524976918,42.42245495477214],[-124.49715281722133,42.424380881954704],[-124.49700400942244,42.42630420673846],[-124.49676898293278,42.42822280335374],[-124.49644798966784,42.43013455106473],[-124.4960413766546,42.43203733651523],[-124.49554958568189,42.43392905606723],[-124.49497315284579,42.43580761812949],[-124.49431270798979,42.43767094547374],[-124.4935689740405,42.439516977535675],[-124.49274276623953,42.44134367269826],[-124.49183499127194,42.44314901055503],[-124.49084664629245,42.44493099415046],[-124.48977881785038,42.44668765219513],[-124.48863268071376,42.44841704125323],[-124.48740949659476,42.45011724789985],[-124.48611061277701,42.45178639084557],[-124.48473746064644,42.45342262302619],[-124.48329155412726,42.45502413365496],[-124.4817744880247,42.45658915023524],[-124.48018793627624,42.45811594053109],[-124.47853365011314,42.45960281449382],[-124.47681345613425,42.46104812614203],[-124.47502925429461,42.46245027539322],[-124.47318301581006,42.463807709844836],[-124.47127678098138,42.465118926502655],[-124.4693126569394,42.466382473454594],[-124.46729281531381,42.467596951488154],[-124.4652194898288,42.46876101564936],[-124.46309497382724,42.46987337674173],[-124.46092161772715,42.470932802763414],[-124.45870182641245,42.471938120280754],[-124.45643805656154,42.472888215736994],[-124.45413281391663,42.473782036694274],[-124.45178865049652,42.474618593007854],[-124.44940816175634,42.47539695793084],[-124.44699398369751,42.47611626914853],[-124.44454878993102,42.4767757297408],[-124.44207528869738,42.47737460907183],[-124.43957621984694,42.477912243605786],[-124.43705435178342,42.47838803764774],[-124.43451247837504,42.478801464008896],[-124.43195341583608,42.47915206459541],[-124.42937999958247,42.47943945091998],[-124.42679508106563,42.479663304535876],[-124.42420152458757,42.479823377392606],[-124.42160220410135,42.47991949211303],[-124.41900000000001,42.47995154219152]],[[-124.413,43.17794445258467],[-124.41036835104792,43.17791240569798],[-124.40773961853887,43.17781630055192],[-124.4051167156565,43.177656243648684],[-124.40250254906907,43.17743241235984],[-124.39990001568152,43.17714505472792],[-124.39731199939833,43.17679448918937],[-124.39474136790164,43.17638110421866],[-124.3921909694483,43.17590535789434],[-124.38966362968857,43.175367777387144],[-124.38716214851206,43.174768958371146],[-124.3846892969222,43.17410956435835],[-124.38224781394494,43.173390325957676],[-124.37984040357371,43.17261204005894],[-124.37746973175508,43.1717755689431],[-124.37513842341797,43.17088183931959],[-124.37284905955018,43.16993184129179],[-124.37060417432559,43.168926627252034],[-124.36840625228473,43.16786731070724],[-124.36625772557285,43.166755065036575],[-124.36416097123752,43.1655911221827],[-124.36211830859011,43.1643767712777],[-124.36013199663272,43.163113357205944],[-124.35820423155451,43.16180227910478],[-124.35633714429974,43.160444988805345],[-124.3545327982104,43.15904298921491],[-124.35279318674579,43.15759783264289],[-124.351120231282,43.15611111907214],[-124.34951577899338,43.15458449437785],[-124.34798160081826,43.15301964849558],[-124.34651938951157,43.1514183135411],[-124.34513075778597,43.14978226188374],[-124.3438172365436,43.14811330417554],[-124.34258027320092,43.146413287338476],[-124.34142123010733,43.14468409251217],[-124.34034138306026,43.14292763296402],[-124.3393419199178,43.14114585196449],[-124.33842393931022,43.1393407206298],[-124.3375884494519,43.13751423573449],[-124.33683636705493,43.13566841749606],[-124.33616851634528,43.13380530733475],[-124.33558562818232,43.1319269656102],[-124.33508833928319,43.130035469338324],[-124.33467719155198,43.12813290989029],[-124.33435263151466,43.12622139067655],[-124.3341150098604,43.124303024818346],[-124.33396458108925,43.12237993280939],[-124.33390150326679,43.120454240170154],[-124.33392583788553,43.11852807509764],[-124.33403754983318,43.11660356611286],[-124.33423650746802,43.114682839708955],[-124.33452248280028,43.11276801800247],[-124.33489515178003,43.11086121639018],[-124.33535409469091,43.10896454121435],[-124.33589879664838,43.10708008743875],[-124.33652864820296,43.10520993633817],[-124.33724294604679,43.10335615320371],[-124.33804089382276,43.10152078506672],[-124.33892160303549,43.09970585844351],[-124.33988409406258,43.09791337710351],[-124.34092729726518,43.09614531986334],[-124.3420500541964,43.09440363840893],[-124.34325111890634,43.09269025514841],[-124.34452915934162,43.091007061097876],[-124.34588275883844,43.08935591380227],[-124.34731041770718,43.08773863529388],[-124.34881055490636,43.086157010090446],[-124.35038150980462,43.08461278323507],[-124.35202154402826,43.08310765838016],[-124.35372884339245,43.08164329591722],[-124.35550151991404,43.08022131115493],[-124.35733761390324,43.078843272546955],[-124.35923509613252,43.07751069997173],[-124.36119187007967,43.07622506306599],[-124.36320577424304,43.074987779613835],[-124.36527458452609,43.0738002139929],[-124.36739601668873,43.07266367567957],[-124.3695677288629,43.07157941781454],[-124.37178732412937,43.070548635830555],[-124.37405235315326,43.069572466143434],[-124.37636031687524,43.06865198490813],[-124.37870866925545,43.06778820684089],[-124.38109482006767,43.06698208410889],[-124.3835161377398,43.06623450528854],[-124.38596995223857,43.06554629439336],[-124.38845355799492,43.06491820997286],[-124.39096421686695,43.064350944282914],[-124.39349916113733,43.063845122528825],[-124.39605559654196,43.063401302181795],[-124.39863070532685,43.063019972369524],[-124.40122164932964,43.06270155334144],[-124.40382557308278,43.06244639600949],[-124.40643960693494,43.0622547815645],[-124.40906087018736,43.06212692116892],[-124.41168647424205,43.06206295572604],[-124.41431352575796,43.06206295572604],[-124.41693912981263,43.06212692116892],[-124.41956039306507,43.0622547815645],[-124.42217442691722,43.06244639600949],[-124.42477835067037,43.06270155334144],[-124.42736929467316,43.063019972369524],[-124.42994440345805,43.063401302181795],[-124.43250083886268,43.063845122528825],[-124.43503578313305,43.06435094428292],[-124.43754644200509,43.06491820997286],[-124.44003004776144,43.06554629439336],[-124.4424838622602,43.06623450528854],[-124.44490517993232,43.06698208410889],[-124.44729133074455,43.06778820684089],[-124.44963968312477,43.06865198490813],[-124.45194764684675,43.069572466143434],[-124.45421267587062,43.070548635830555],[-124.4564322711371,43.07157941781454],[-124.45860398331126,43.07266367567957],[-124.4607254154739,43.0738002139929],[-124.46279422575697,43.074987779613835],[-124.46480812992034,43.07622506306599],[-124.46676490386749,43.07751069997173],[-124.46866238609677,43.078843272546955],[-124.47049848008595,43.08022131115493],[-124.47227115660755,43.08164329591722],[-124.47397845597175,43.08310765838016],[-124.47561849019537,43.08461278323507],[-124.47718944509364,43.086157010090446],[-124.47868958229282,43.08773863529388],[-124.48011724116157,43.08935591380227],[-124.48147084065839,43.091007061097876],[-124.48274888109366,43.09269025514841],[-124.48394994580359,43.09440363840893],[-124.48507270273483,43.09614531986334],[-124.48611590593741,43.09791337710352],[-124.4870783969645,43.09970585844351],[-124.48795910617723,43.10152078506672],[-124.48875705395321,43.10335615320371],[-124.48947135179705,43.105209936338156],[-124.49010120335163,43.10708008743875],[-124.4906459053091,43.10896454121435],[-124.49110484821998,43.11086121639018],[-124.49147751719973,43.11276801800247],[-124.49176349253199,43.114682839708955],[-124.49196245016682,43.11660356611286],[-124.49207416211448,43.11852807509764],[-124.49209849673322,43.120454240170154],[-124.49203541891076,43.12237993280937],[-124.49188499013961,43.124303024818346],[-124.49164736848535,43.12622139067655],[-124.49132280844802,43.12813290989029],[-124.4909116607168,43.130035469338324],[-124.49041437181768,43.1319269656102],[-124.48983148365473,43.13380530733475],[-124.48916363294508,43.13566841749606],[-124.48841155054811,43.13751423573449],[-124.48757606068979,43.139340720629804],[-124.48665808008221,43.14114585196448],[-124.48565861693974,43.14292763296402],[-124.48457876989268,43.14468409251217],[-124.48341972679908,43.146413287338476],[-124.4821827634564,43.148113304175546],[-124.48086924221404,43.14978226188374],[-124.47948061048844,43.15141831354111],[-124.47801839918174,43.15301964849558],[-124.47648422100663,43.15458449437784],[-124.474879768718,43.15611111907214],[-124.47320681325422,43.15759783264289],[-124.4714672017896,43.15904298921491],[-124.46966285570025,43.160444988805345],[-124.4677957684455,43.16180227910478],[-124.46586800336728,43.163113357205944],[-124.46388169140988,43.1643767712777],[-124.46183902876248,43.1655911221827],[-124.45974227442716,43.16675506503658],[-124.45759374771526,43.167867310707244],[-124.45539582567442,43.168926627252034],[-124.45315094044983,43.16993184129179],[-124.45086157658204,43.17088183931959],[-124.44853026824491,43.1717755689431],[-124.44615959642628,43.17261204005894],[-124.44375218605506,43.17339032595767],[-124.4413107030778,43.174109564358346],[-124.43883785148795,43.17476895837113],[-124.43633637031144,43.175367777387144],[-124.43380903055171,43.17590535789434],[-124.43125863209836,43.17638110421866],[-124.42868800060168,43.17679448918937],[-124.42609998431848,43.17714505472792],[-124.42349745093094,43.17743241235984],[-124.4208832843435,43.177656243648684],[-124.41826038146114,43.17781630055192],[-124.41563164895209,43.17791240569798],[-124.413,43.17794445258467]],[[-124.215,43.437941808746295],[-124.21235711048953,43.43790976304599],[-124.20971714995467,43.43781366145857],[-124.20708304409725,43.43765361048513],[-124.20445771207513,43.43742978749517],[-124.2018440632398,43.43714244052841],[-124.19924499388522,43.43679188801758],[-124.19666338401157,43.436378518432605],[-124.19410209410829,43.4359027898465],[-124.19156396195905,43.435365229423546],[-124.18905179947333,43.43476643283031],[-124.18656838954777,43.43410706357026],[-124.18411648296092,43.43338785224256],[-124.18169879530504,43.43260959572613],[-124.17931800395853,43.43177315628974],[-124.17697674510212,43.43087946062922],[-124.17467761078287,43.42992949883302],[-124.17242314602852,43.428924323276895],[-124.17021584601616,43.427865047449664],[-124.16805815329808,43.426752844710705],[-124.16595245508789,43.425588946980994],[-124.16390108061036,43.42437464336923],[-124.16190629851747,43.423111278734254],[-124.15997031437385,43.42180025218595],[-124.15809526821451,43.420443015525755],[-124.15628323217726,43.41904107162909],[-124.15453620821266,43.417595972771124],[-124.15285612587415,43.41610931889811],[-124.15124484019043,43.41458275584608],[-124.14970412962286,43.41301797350896],[-124.14823569410953,43.4114167039582],[-124.14684115319884,43.409780719516135],[-124.145522044274,43.408111830785],[-124.1442798208706,43.40641188463426],[-124.14311585108894,43.404682762148056],[-124.1420314161032,43.40292637653545],[-124.14102770876787,43.40114467100565],[-124.14010583232462,43.3993396166107],[-124.13926679920938,43.397513210057916],[-124.13851152996148,43.39566747149468],[-124.13784085223595,43.39380444226809],[-124.13725549992004,43.39192618266176],[-124.13675611235422,43.390034769612626],[-124.13634323365908,43.388132294409985],[-124.13601731216838,43.38622086037955],[-124.1357786999687,43.384302580555115],[-124.1356276525461,43.38237957534013],[-124.13556432854018,43.380453970162286],[-124.13558878960517,43.37852789312314],[-124.13570100037886,43.37660347264588],[-124.13590082855822,43.374682835123465],[-124.1361880450825,43.372768102570056],[-124.13656232442267,43.37086139027793],[-124.1370232449768,43.368964804482964],[-124.13757028957161,43.367080440040716],[-124.13820284606803,43.36521037811615],[-124.13892020807165,43.36335668388908],[-124.13972157574536,43.3615214042783],[-124.14060605672478,43.35970656568645],[-124.14157266713404,43.35791417176847],[-124.14262033270165,43.3561462012257],[-124.14374788997418,43.354404605628396],[-124.14495408762714,43.352691307268714],[-124.14623758787087,43.351008197046724],[-124.14759696795026,43.34935713239156],[-124.14903072173612,43.347739935220105],[-124.15053726140665,43.34615838993533],[-124.15211491921713,43.34461424146647],[-124.15376194935531,43.343109193353165],[-124.15547652988126,43.341644905875576],[-124.15725676474852,43.34022299423257],[-124.159100685905,43.33884502676988],[-124.16100625547111,43.33751252326009],[-124.1629713679923,43.33622695323644],[-124.1649938527643,43.334989734382006],[-124.16707147622766,43.33380223097627],[-124.16920194442953,43.332665752400416],[-124.17138290554975,43.33158155170322],[-124.17361195248868,43.33055082422891],[-124.17588662551361,43.32957470630847],[-124.1782044149613,43.328654274015896],[-124.1805627639936,43.327790541990495],[-124.18295907140278,43.32698446232678],[-124.18539069446435,43.326236923532875],[-124.18785495183363,43.32554874955862],[-124.19034912648314,43.32492069889458],[-124.19287046867802,43.32435346374256],[-124.19541619898578,43.3238476692588],[-124.19798351131764,43.32340387287064],[-124.20056957599789,43.32302256366707],[-124.2031715428582,43.3227041618642],[-124.2057865443537,43.32244901834608],[-124.20841169869722,43.32225741428115],[-124.21104411300858,43.32212956081498],[-124.21368088647576,43.32206559883963],[-124.21631911352426,43.32206559883963],[-124.21895588699144,43.32212956081498],[-124.2215883013028,43.32225741428115],[-124.22421345564632,43.32244901834608],[-124.22682845714182,43.3227041618642],[-124.22943042400213,43.32302256366707],[-124.23201648868238,43.32340387287064],[-124.23458380101424,43.3238476692588],[-124.237129531322,43.324353463742554],[-124.23965087351688,43.32492069889458],[-124.24214504816639,43.32554874955862],[-124.24460930553568,43.326236923532875],[-124.24704092859724,43.32698446232678],[-124.24943723600641,43.327790541990495],[-124.2517955850387,43.328654274015896],[-124.25411337448641,43.32957470630847],[-124.25638804751132,43.33055082422891],[-124.25861709445027,43.33158155170322],[-124.26079805557048,43.332665752400416],[-124.26292852377235,43.33380223097627],[-124.26500614723572,43.334989734382006],[-124.26702863200772,43.33622695323644],[-124.26899374452891,43.33751252326009],[-124.27089931409502,43.33884502676988],[-124.2727432352515,43.34022299423257],[-124.27452347011875,43.341644905875576],[-124.2762380506447,43.343109193353165],[-124.2778850807829,43.34461424146647],[-124.27946273859335,43.34615838993533],[-124.2809692782639,43.347739935220105],[-124.28240303204976,43.34935713239155],[-124.28376241212915,43.351008197046724],[-124.28504591237288,43.352691307268714],[-124.28625211002584,43.354404605628396],[-124.28737966729835,43.3561462012257],[-124.28842733286598,43.35791417176847],[-124.28939394327524,43.35970656568645],[-124.29027842425465,43.3615214042783],[-124.29107979192837,43.36335668388908],[-124.29179715393198,43.36521037811615],[-124.29242971042841,43.367080440040716],[-124.29297675502322,43.368964804482964],[-124.29343767557735,43.37086139027793],[-124.2938119549175,43.37276810257005],[-124.2940991714418,43.374682835123465],[-124.29429899962116,43.376603472645876],[-124.29441121039486,43.37852789312314],[-124.29443567145984,43.380453970162286],[-124.29437234745392,43.38237957534013],[-124.29422130003132,43.384302580555115],[-124.29398268783164,43.38622086037955],[-124.29365676634094,43.388132294409985],[-124.29324388764579,43.390034769612626],[-124.29274450007998,43.39192618266176],[-124.29215914776405,43.39380444226809],[-124.29148847003854,43.39566747149468],[-124.29073320079063,43.397513210057916],[-124.2898941676754,43.39933961661071],[-124.28897229123216,43.40114467100565],[-124.28796858389683,43.40292637653544],[-124.28688414891107,43.404682762148056],[-124.28572017912943,43.40641188463426],[-124.28447795572602,43.408111830785],[-124.28315884680119,43.409780719516135],[-124.28176430589049,43.41141670395822],[-124.28029587037716,43.41301797350896],[-124.27875515980958,43.41458275584609],[-124.27714387412587,43.41610931889811],[-124.27546379178736,43.417595972771124],[-124.27371676782276,43.419041071629096],[-124.27190473178551,43.420443015525755],[-124.27002968562616,43.421800252185946],[-124.26809370148256,43.42311127873426],[-124.26609891938966,43.42437464336922],[-124.26404754491212,43.425588946980994],[-124.26194184670194,43.426752844710705],[-124.25978415398384,43.42786504744967],[-124.25757685397149,43.428924323276895],[-124.25532238921716,43.42992949883302],[-124.2530232548979,43.43087946062922],[-124.2506819960415,43.43177315628974],[-124.24830120469498,43.43260959572613],[-124.2458835170391,43.43338785224256],[-124.24343161045225,43.43410706357026],[-124.24094820052669,43.43476643283031],[-124.23843603804097,43.435365229423546],[-124.23589790589173,43.435902789846494],[-124.23333661598845,43.436378518432605],[-124.23075500611479,43.43679188801758],[-124.22815593676022,43.43714244052841],[-124.2255422879249,43.43742978749518],[-124.22291695590278,43.43765361048513],[-124.22028285004535,43.43781366145858],[-124.21764288951049,43.43790976304599],[-124.215,43.437941808746295]],[[-124.098,43.765938471623635],[-124.09534271345545,43.76590642741756],[-124.09268837193878,43.76581033031244],[-124.0900399171857,43.765650286807855],[-124.08740028435128,43.765426474270846],[-124.08477239872907,43.76513914073764],[-124.08215917248194,43.76478860463644],[-124.07956350138767,43.76437525443157],[-124.07698826160365,43.76389954818924],[-124.07443630645433,43.763362013065795],[-124.07191046324498,43.76276324471858],[-124.06941353010532,43.76210390664044],[-124.06694827286712,43.76138472941864],[-124.06451742197889,43.76060650991854],[-124.06212366946116,43.75977011039386],[-124.05976966590644,43.75887645752367],[-124.05745801752668,43.7579265413778],[-124.05519128325159,43.756921414311556],[-124.05297197188183,43.75586218979125],[-124.05080253929924,43.75475004115163],[-124.0486853857382,43.75358620028682],[-124.0466228531208,43.75237195627625],[-124.04461722245864,43.7511086539471],[-124.04267071132459,43.749797692374926],[-124.04078547139707,43.74844052332416],[-124.03896358607963,43.74703864963039],[-124.03720706819837,43.745593623526005],[-124.03551785778018,43.74410704491147],[-124.03389781991362,43.74258055957387],[-124.03234874269518,43.74101585735491],[-124.03087233526317,43.73941467027054],[-124.02947022592097,43.73777877058415],[-124.02814396035238,43.73610996883555],[-124.02689499993024,43.73441011182818],[-124.02572472012034,43.73268108057659],[-124.02463440898272,43.73092478821653],[-124.02362526577123,43.72914317788022],[-124.02269839963341,43.727338220538925],[-124.02185482841165,43.72551191281545],[-124.0210954775467,43.723666274768895],[-124.02042117908529,43.72180334765431],[-124.01983267079206,43.71992519165952],[-124.01933059536704,43.718033883621935],[-124.01891549976929,43.716131514727664],[-124.01858783464745,43.71422018819567],[-124.01834795387731,43.71230201694935],[-124.01819611420734,43.71037912127842],[-124.01813247501171,43.70845362649339],[-124.01815709815135,43.706527660575425],[-124.01826994794325,43.704603351824204],[-124.01847089123707,43.702682826506226],[-124.01875969759979,43.7007682065063],[-124.01913603960713,43.69886160698479],[-124.01959949324198,43.69696513404307],[-124.02014953839885,43.69508088240001],[-124.02078555949356,43.69321093308177],[-124.02150684617781,43.69135735112749],[-124.02231259415693,43.68952218331365],[-124.02320190611061,43.687707455899236],[-124.02417379271496,43.685915172394296],[-124.02522717376439,43.68414731135445],[-124.02636087939274,43.682405824203606],[-124.02757365139146,43.680692633087226],[-124.02886414462363,43.67900962875858],[-124.03023092853188,43.677358668500226],[-124.03167248873916,43.67574157408304],[-124.03318722873924,43.67416012976474],[-124.03477347167627,43.67261608033042],[-124.03642946221075,43.671111129176985],[-124.03815336846972,43.66964693644361],[-124.0399432840792,43.66822511719019],[-124.04179723027671,43.66684723962577],[-124.04371315810097,43.66551482338891],[-124.04568895065705,43.66422933788176],[-124.04772242545391,43.66299220065953],[-124.04981133681217,43.66180477587731],[-124.0519533783389,43.66066837279579],[-124.05414618546756,43.65958424434725],[-124.05638733805958,43.65855358576383],[-124.05867436306497,43.65757753326908],[-124.06100473723934,43.65665716283438],[-124.06337588991411,43.6557934890016],[-124.06578520581702,43.654987463773175],[-124.06823002793992,43.65423997557074],[-124.07070766045064,43.653551848263454],[-124.07321537164637,43.652923840267185],[-124.0757503969443,43.652356643715244],[-124.0783099419077,43.65185088370174],[-124.08089118530306,43.65140711759832],[-124.08349128218582,43.651025834445],[-124.086107367011,43.6507074544157],[-124.0887365567655,43.6504523283591],[-124.09137595411903,43.65026073741522],[-124.09402265059013,43.650132892708335],[-124.0966737297235,43.65006893511619],[-124.09932627027649,43.65006893511619],[-124.10197734940985,43.650132892708335],[-124.10462404588095,43.65026073741522],[-124.1072634432345,43.6504523283591],[-124.109892632989,43.6507074544157],[-124.11250871781418,43.651025834445],[-124.11510881469692,43.65140711759832],[-124.1176900580923,43.65185088370174],[-124.1202496030557,43.652356643715244],[-124.12278462835361,43.652923840267185],[-124.12529233954935,43.653551848263454],[-124.12776997206008,43.65423997557074],[-124.13021479418298,43.654987463773175],[-124.13262411008587,43.6557934890016],[-124.13499526276065,43.65665716283438],[-124.13732563693503,43.65757753326908],[-124.1396126619404,43.65855358576383],[-124.14185381453244,43.65958424434725],[-124.1440466216611,43.66066837279579],[-124.14618866318781,43.66180477587731],[-124.14827757454607,43.66299220065953],[-124.15031104934295,43.66422933788176],[-124.15228684189903,43.66551482338891],[-124.15420276972328,43.66684723962577],[-124.15605671592078,43.66822511719019],[-124.15784663153028,43.66964693644361],[-124.15957053778925,43.671111129176985],[-124.16122652832372,43.67261608033042],[-124.16281277126076,43.67416012976474],[-124.16432751126082,43.67574157408304],[-124.1657690714681,43.677358668500226],[-124.16713585537637,43.67900962875857],[-124.16842634860853,43.680692633087226],[-124.16963912060726,43.682405824203606],[-124.1707728262356,43.68414731135445],[-124.17182620728502,43.685915172394296],[-124.17279809388937,43.687707455899236],[-124.17368740584307,43.68952218331365],[-124.17449315382217,43.69135735112749],[-124.17521444050644,43.69321093308177],[-124.17585046160114,43.69508088240001],[-124.176400506758,43.69696513404307],[-124.17686396039286,43.69886160698479],[-124.17724030240021,43.7007682065063],[-124.17752910876293,43.702682826506226],[-124.17773005205675,43.704603351824204],[-124.17784290184865,43.706527660575425],[-124.17786752498829,43.70845362649339],[-124.17780388579264,43.71037912127842],[-124.17765204612269,43.71230201694935],[-124.17741216535254,43.71422018819567],[-124.1770845002307,43.71613151472766],[-124.17666940463296,43.718033883621935],[-124.17616732920794,43.71992519165952],[-124.17557882091471,43.72180334765431],[-124.17490452245329,43.723666274768895],[-124.17414517158835,43.72551191281545],[-124.17330160036657,43.727338220538925],[-124.17237473422877,43.72914317788022],[-124.17136559101728,43.73092478821653],[-124.17027527987966,43.73268108057659],[-124.16910500006975,43.73441011182818],[-124.1678560396476,43.73610996883555],[-124.16652977407902,43.73777877058415],[-124.16512766473683,43.73941467027054],[-124.1636512573048,43.74101585735491],[-124.16210218008636,43.74258055957387],[-124.1604821422198,43.74410704491147],[-124.15879293180163,43.745593623526005],[-124.15703641392037,43.74703864963039],[-124.15521452860291,43.74844052332416],[-124.15332928867541,43.74979769237492],[-124.15138277754136,43.75110865394711],[-124.1493771468792,43.75237195627624],[-124.1473146142618,43.75358620028682],[-124.14519746070076,43.75475004115163],[-124.14302802811817,43.75586218979125],[-124.14080871674841,43.756921414311556],[-124.13854198247331,43.7579265413778],[-124.13623033409354,43.75887645752367],[-124.13387633053884,43.75977011039386],[-124.1314825780211,43.76060650991854],[-124.12905172713286,43.76138472941864],[-124.12658646989466,43.76210390664045],[-124.12408953675501,43.76276324471857],[-124.12156369354565,43.76336201306578],[-124.11901173839635,43.76389954818924],[-124.11643649861232,43.76437525443157],[-124.11384082751805,43.76478860463644],[-124.11122760127091,43.765139140737645],[-124.10859971564872,43.765426474270846],[-124.10596008281429,43.765650286807855],[-124.1033116280612,43.76581033031243],[-124.10065728654453,43.76590642741756],[-124.098,43.765938471623635]],[[-124.13,44.07493532631847],[-124.1273289251793,44.07490328351739],[-124.12466081076046,44.07480719062685],[-124.12199861383547,44.07464715414506],[-124.11934528488065,44.07442335143684],[-124.11670376445805,44.07413603053522],[-124.11407697992883,44.07378550986429],[-124.11146784218148,44.07337217788318],[-124.10887924237944,44.07289649265196],[-124.10631404873118,44.072358981319645],[-124.10377510328696,44.07176023953516],[-124.10126521876602,44.071100930781675],[-124.09878717541706,44.07038178563538],[-124.09634371791682,44.06960360094929],[-124.09393755230926,44.06876723896324],[-124.09157134298954,44.06787362634083],[-124.08924770973563,44.06692375313472],[-124.08696922479167,44.06591867168135],[-124.08473841000591,44.064859495426205],[-124.08255773402622,44.06374739768122],[-124.08042960955733,44.06258361031565],[-124.07835639068173,44.06136942238179],[-124.07634037024809,44.06010617867738],[-124.07438377732967,44.05879527824607],[-124.07248877475598,44.0574381728179],[-124.07065745671973,44.056036365191325],[-124.06889184646273,44.0545914075589],[-124.06719389404218,44.053104899778354],[-124.06556547418091,44.05157848759103],[-124.064008384203,44.05001386078994],[-124.06252434205751,44.048412751339114],[-124.06111498443248,44.046776931446765],[-124.0597818649609,44.04510821159429],[-124.05852645252104,44.04340843852331],[-124.05735012963235,44.04167949318311],[-124.0562541909493,44.039923288640715],[-124.05523984185395,44.03814176795613],[-124.05430819714951,44.03633690202477],[-124.0534602798557,44.034510687390096],[-124.05269702010698,44.032665144028286],[-124.05201925415557,44.03080231310783],[-124.05142772347892,44.028924254726505],[-124.05092307399411,44.02703304562811],[-124.05050585537802,44.025130776901705],[-124.05017652049564,44.023219551665676],[-124.04993542493594,44.02130148273958],[-124.0497828266556,44.019378690305906],[-124.04971888573183,44.01745329956484],[-124.04974366422299,44.01552743838411],[-124.04985712613816,44.01360323494694],[-124.05005913751505,44.01168281540057],[-124.05034946660564,44.00976830150787],[-124.0507277841702,44.00786180830469],[-124.05119366387792,44.00596544176563],[-124.05174658281462,44.0040812964805],[-124.05238592209615,44.00221145334442],[-124.05311096758702,44.00035797726378],[-124.05392091072311,43.99852291488069],[-124.05481484943732,43.99670829231844],[-124.05579178918754,43.99491611295025],[-124.05685064408475,43.99314835519413],[-124.0579902381209,43.99140697033566],[-124.05920930649413,43.989693880381694],[-124.06050649703059,43.98801097594681],[-124.06188037170055,43.98636011417506],[-124.06332940822745,43.984743116699235],[-124.06485200178771,43.98316176763977],[-124.06644646679963,43.98161781164549],[-124.0681110387991,43.98011295197836],[-124.06984387640014,43.97864884864421],[-124.07164306333803,43.977227116571505],[-124.07350661059264,43.97584932384002],[-124.07543245858984,43.974516989961586],[-124.0774184794781,43.97323158421429],[-124.07946247947821,43.971994524032404],[-124.0815622013035,43.970807173453366],[-124.0837153266473,43.96967084162382],[-124.08591947873599,43.96858678136585],[-124.08817222494358,43.96755618780554],[-124.09047107946635,43.96658019706473],[-124.09281350605342,43.96565988501776],[-124.0951969207911,43.96479626611427],[-124.09761869493768,43.96399029226954],[-124.10007615780577,43.96324285182334],[-124.10256659968907,43.96255476856849],[-124.10508727483023,43.96192680085014],[-124.10763540442707,43.961359640736774],[-124.1102081796736,43.96085391326366],[-124.11280276483264,43.960410175749814],[-124.11541630033706,43.96002891718886],[-124.11804590591599,43.95971055771473],[-124.12068868374294,43.95945544814262],[-124.12334172160249,43.95926386958573],[-124.12600209607201,43.95913603314809],[-124.12866687571531,43.959072079693954],[-124.13133312428467,43.959072079693954],[-124.13399790392796,43.95913603314809],[-124.13665827839749,43.95926386958573],[-124.13931131625704,43.95945544814262],[-124.141954094084,43.95971055771473],[-124.14458369966292,43.96002891718886],[-124.14719723516734,43.960410175749814],[-124.14979182032637,43.96085391326366],[-124.1523645955729,43.96135964073678],[-124.15491272516975,43.96192680085014],[-124.15743340031091,43.96255476856849],[-124.1599238421942,43.96324285182334],[-124.1623813050623,43.96399029226954],[-124.16480307920888,43.96479626611427],[-124.16718649394656,43.96565988501776],[-124.16952892053362,43.96658019706473],[-124.1718277750564,43.96755618780554],[-124.17408052126399,43.96858678136585],[-124.17628467335268,43.96967084162382],[-124.17843779869648,43.970807173453366],[-124.18053752052177,43.971994524032404],[-124.18258152052188,43.97323158421429],[-124.18456754141013,43.974516989961586],[-124.18649338940733,43.97584932384002],[-124.18835693666195,43.977227116571505],[-124.19015612359983,43.97864884864421],[-124.19188896120087,43.98011295197836],[-124.19355353320034,43.98161781164549],[-124.19514799821226,43.98316176763977],[-124.19667059177253,43.98474311669924],[-124.19811962829942,43.98636011417506],[-124.19949350296939,43.98801097594681],[-124.20079069350585,43.989693880381694],[-124.2020097618791,43.99140697033566],[-124.20314935591523,43.99314835519413],[-124.20420821081244,43.99491611295025],[-124.20518515056266,43.99670829231843],[-124.20607908927687,43.99852291488069],[-124.20688903241296,44.00035797726378],[-124.20761407790384,44.00221145334442],[-124.20825341718536,44.0040812964805],[-124.20880633612205,44.00596544176563],[-124.20927221582977,44.00786180830469],[-124.20965053339434,44.00976830150786],[-124.20994086248493,44.01168281540057],[-124.21014287386181,44.01360323494694],[-124.21025633577699,44.01552743838411],[-124.21028111426814,44.01745329956484],[-124.21021717334438,44.019378690305906],[-124.21006457506404,44.02130148273958],[-124.20982347950434,44.023219551665676],[-124.20949414462196,44.025130776901705],[-124.20907692600586,44.02703304562811],[-124.20857227652105,44.028924254726505],[-124.20798074584441,44.03080231310783],[-124.207302979893,44.03266514402828],[-124.20653972014428,44.0345106873901],[-124.20569180285047,44.03633690202477],[-124.20476015814603,44.03814176795612],[-124.20374580905067,44.039923288640715],[-124.20264987036762,44.04167949318311],[-124.20147354747894,44.04340843852331],[-124.20021813503908,44.04510821159429],[-124.1988850155675,44.04677693144676],[-124.19747565794246,44.048412751339114],[-124.19599161579697,44.05001386078994],[-124.19443452581906,44.05157848759103],[-124.1928061059578,44.053104899778354],[-124.19110815353724,44.0545914075589],[-124.18934254328025,44.056036365191325],[-124.187511225244,44.0574381728179],[-124.1856162226703,44.05879527824607],[-124.18365962975189,44.06010617867739],[-124.18164360931824,44.06136942238179],[-124.17957039044265,44.06258361031565],[-124.17744226597375,44.063747397681226],[-124.17526158999407,44.064859495426205],[-124.1730307752083,44.06591867168135],[-124.17075229026435,44.066923753134716],[-124.16842865701044,44.06787362634083],[-124.16606244769072,44.06876723896324],[-124.16365628208315,44.06960360094929],[-124.16121282458292,44.070381785635384],[-124.15873478123396,44.07110093078168],[-124.15622489671301,44.07176023953516],[-124.1536859512688,44.072358981319645],[-124.15112075762053,44.07289649265196],[-124.1485321578185,44.07337217788318],[-124.14592302007115,44.07378550986429],[-124.14329623554192,44.07413603053523],[-124.14065471511933,44.07442335143684],[-124.1380013861645,44.07464715414506],[-124.13533918923952,44.07480719062685],[-124.13267107482068,44.07490328351739],[-124.13,44.07493532631847]],[[-124.05799999999999,44.49193108004912],[-124.05530996363466,44.49189903913946],[-124.05262290881404,44.49180295192266],[-124.04994181374887,44.49164292489518],[-124.0472696499857,44.49141913541888],[-124.04460937908443,44.49113183152271],[-124.0419639493075,44.49078133162536],[-124.03933629232434,44.4903680241793],[-124.03672931993506,44.489892367236536],[-124.0341459208172,44.48935488793661],[-124.03158895729894,44.48875618191736],[-124.02906126216322,44.48809691264934],[-124.02656563548548,44.48737781069433],[-124.02410484150957,44.48659967288914],[-124.02168160556471,44.48576336145534],[-124.01929861102765,44.48486980303624],[-124.01695849633273,44.483919987661984],[-124.01466385203433,44.48291496764406],[-124.01241721792366,44.48185585640051],[-124.01022108020479,44.48074382721317],[-124.00807786873149,44.47958011191831],[-124.00598995430937,44.478365999532365],[-124.00395964606521,44.477102834814],[-124.00198918888765,44.47579201676453],[-124.00008076094082,44.47443499706821],[-123.99823647125464,44.473033278474155],[-123.99645835739406,44.47158841312181],[-123.99474838320981,44.47010200081191],[-123.99310843667328,44.46857568722488],[-123.99154032779785,44.46701116208851],[-123.99004578664868,44.46541015729748],[-123.98862646144372,44.46377444498621],[-123.98728391674717,44.462105835557836],[-123.98601963175808,44.46040617567115],[-123.98483499869548,44.45867734618794],[-123.98373132128158,44.45692126008299],[-123.98270981332526,44.455139860319306],[-123.98177159740666,44.4533351176905],[-123.9809177036644,44.45150902863332],[-123.98014906868706,44.44966361301238],[-123.979466534509,44.44780091187978],[-123.97887084771307,44.44592298521206],[-123.97836265863907,44.444031909626936],[-123.97794252070067,44.442129776082645],[-123.97761088980995,44.44021868756211],[-123.97736812391054,44.43830075674479],[-123.97721448262004,44.43637810366864],[-123.9771501269813,44.43445285338489],[-123.97717511932329,44.43252713360811],[-123.97728942323077,44.430603072364384],[-123.97749290362376,44.42868279563986],[-123.97778532694518,44.42676842503265],[-123.97816636145767,44.42486207541042],[-123.97863557764775,44.42296585257628],[-123.979192448738,44.421081850945626],[-123.97983635130528,44.419212151236415],[-123.98056656600532,44.41735881817543],[-123.98138227840172,44.415523898223014],[-123.98228257989912,44.413709417318806],[-123.98326646877868,44.41191737865096],[-123.984332851335,44.41014976045108],[-123.98548054311306,44.40840851381757],[-123.98670827024362,44.406695560569574],[-123.98801467087519,44.40501279113383],[-123.98939829670164,44.40336206246678],[-123.99085761458285,44.401745196014225],[-123.99239100825703,44.40016397571056],[-123.99399678014251,44.39862014602],[-123.99567315322692,44.39711541002163],[-123.99741827304211,44.39565142754058],[-123.99923020972159,44.39422981332714],[-124.00110696013923,44.39285213528592],[-124.00304645012609,44.39151991275687],[-124.00504653676359,44.39023461484994],[-124.00710501074938,44.38899765883538],[-124.00921959883482,44.387810408591136],[-124.01138796633002,44.38667417310912],[-124.01360771967458,44.385590205062066],[-124.01587640907073,44.38455969943215],[-124.01819153117634,44.3835837922033],[-124.02055053185481,44.38266355911817],[-124.02295080897846,44.381800014501316],[-124.0253897152834,44.3809941101498],[-124.02786456127146,44.380246734292335],[-124.03037261815746,44.37955871061814],[-124.03291112085745,44.37893079737646],[-124.03547727101575,44.378363686547786],[-124.03806824006688,44.37785800308761],[-124.04068117232934,44.37741430424342],[-124.04331318812812,44.37703307894597],[-124.04596138694265,44.37671474727492],[-124.04862285057618,44.37645966000008],[-124.0512946463445,44.376268098198175],[-124.05397383027922,44.37614027294579],[-124.05665745034362,44.37607632508887],[-124.05934254965638,44.37607632508887],[-124.06202616972077,44.37614027294579],[-124.06470535365548,44.376268098198175],[-124.0673771494238,44.37645966000008],[-124.07003861305735,44.37671474727492],[-124.07268681187188,44.37703307894597],[-124.07531882767066,44.37741430424342],[-124.07793175993311,44.37785800308761],[-124.08052272898425,44.378363686547786],[-124.08308887914255,44.37893079737646],[-124.08562738184254,44.37955871061814],[-124.08813543872853,44.380246734292335],[-124.0906102847166,44.3809941101498],[-124.09304919102154,44.381800014501316],[-124.09544946814519,44.38266355911817],[-124.09780846882366,44.3835837922033],[-124.10012359092927,44.38455969943215],[-124.10239228032542,44.385590205062066],[-124.10461203366997,44.38667417310912],[-124.10678040116517,44.387810408591136],[-124.10889498925062,44.38899765883538],[-124.11095346323641,44.39023461484994],[-124.1129535498739,44.39151991275687],[-124.11489303986077,44.39285213528592],[-124.11676979027841,44.39422981332714],[-124.11858172695788,44.39565142754058],[-124.12032684677307,44.39711541002163],[-124.12200321985749,44.39862014602],[-124.12360899174296,44.40016397571056],[-124.12514238541713,44.401745196014225],[-124.12660170329836,44.403362062466776],[-124.1279853291248,44.40501279113383],[-124.12929172975637,44.406695560569574],[-124.13051945688694,44.40840851381757],[-124.13166714866499,44.41014976045108],[-124.13273353122132,44.41191737865096],[-124.13371742010087,44.41370941731882],[-124.13461772159826,44.415523898223014],[-124.13543343399468,44.41735881817543],[-124.13616364869472,44.41921215123641],[-124.136807551262,44.421081850945626],[-124.13736442235223,44.42296585257628],[-124.13783363854232,44.42486207541042],[-124.1382146730548,44.42676842503265],[-124.13850709637624,44.42868279563985],[-124.13871057676921,44.430603072364384],[-124.13882488067671,44.43252713360811],[-124.13884987301869,44.43445285338489],[-124.13878551737996,44.43637810366864],[-124.13863187608946,44.43830075674479],[-124.13838911019005,44.44021868756211],[-124.13805747929932,44.442129776082645],[-124.13763734136093,44.444031909626936],[-124.13712915228693,44.44592298521206],[-124.13653346549098,44.44780091187978],[-124.13585093131294,44.44966361301238],[-124.1350822963356,44.45150902863332],[-124.13422840259332,44.4533351176905],[-124.13329018667474,44.45513986031931],[-124.1322686787184,44.45692126008299],[-124.13116500130452,44.45867734618794],[-124.12998036824192,44.46040617567115],[-124.12871608325283,44.462105835557836],[-124.12737353855628,44.46377444498621],[-124.12595421335132,44.46541015729748],[-124.12445967220215,44.46701116208852],[-124.12289156332672,44.46857568722488],[-124.12125161679019,44.47010200081191],[-124.11954164260594,44.47158841312181],[-124.11776352874536,44.473033278474155],[-124.11591923905918,44.47443499706821],[-124.11401081111235,44.47579201676452],[-124.11204035393479,44.477102834814],[-124.11001004569063,44.47836599953236],[-124.10792213126851,44.47958011191831],[-124.10577891979521,44.48074382721317],[-124.10358278207634,44.48185585640051],[-124.10133614796567,44.48291496764406],[-124.09904150366727,44.483919987661984],[-124.09670138897235,44.48486980303625],[-124.09431839443529,44.48576336145534],[-124.09189515849043,44.48659967288914],[-124.0894343645145,44.48737781069433],[-124.08693873783677,44.48809691264934],[-124.08441104270106,44.48875618191736],[-124.0818540791828,44.4893548879366],[-124.07927068006494,44.489892367236536],[-124.07666370767566,44.4903680241793],[-124.0740360506925,44.49078133162536],[-124.07139062091557,44.49113183152272],[-124.0687303500143,44.49141913541888],[-124.06605818625113,44.491642924895174],[-124.06337709118596,44.49180295192266],[-124.06069003636534,44.49189903913946],[-124.05799999999999,44.49193108004912]],[[-124.05500000000002,44.68492911433764],[-124.05230104730677,44.68489707430145],[-124.0496050861006,44.684800989704684],[-124.04691510452321,44.68464096704311],[-124.04423408402933,44.684417183677255],[-124.04156499605308,44.684129887634235],[-124.03891079868558,44.683779397330326],[-124.0362744333684,44.68336610121501],[-124.03365882160598,44.68289045733669],[-124.03106686170123,44.682352992830644],[-124.02850142551802,44.68175430332977],[-124.02596535527398,44.68109505229893],[-124.02346146036803,44.680375970293426],[-124.02099251424521,44.67959785414275],[-124.01856125130354,44.67876156606025],[-124.01617036384563,44.67786803268008],[-124.01382249907884,44.676918244022154],[-124.0115202561676,44.675913252386685],[-124.00926618334073,44.674854171179256],[-124.00706277505775,44.67374217366805],[-124.00491246923657,44.67257849167438],[-124.0028176445465,44.67136441419826],[-124.00078061776891,44.67010128598061],[-123.99880364122923,44.668790506003425],[-123.99688890030242,44.66743352593007],[-123.99503851099526,44.666031848487066],[-123.99325451760781,44.664587025789594],[-123.99153889047682,44.6631006576123],[-123.9898935238035,44.66157438960761],[-123.98832023356785,44.6600099114735],[-123.9868207555324,44.65840895507277],[-123.98539674333651,44.65677329250594],[-123.9840497666844,44.655104734140195],[-123.98278130962807,44.65340512659622],[-123.98159276894722,44.65167635069553],[-123.98048545262785,44.649920319370466],[-123.97946057844105,44.6481389755393],[-123.97851927262353,44.64633428994872],[-123.97766256866126,44.6445082589863],[-123.97689140617723,44.64266290246516],[-123.97620662992466,44.64080026138368],[-123.97560898888646,44.638922395662384],[-123.975099135482,44.63703138186079],[-123.9746776248816,44.63512931087665],[-123.97434491442975,44.63321828563027],[-123.97410136317708,44.63130041873632],[-123.97394723152172,44.62937783016591],[-123.9738826809603,44.62745264490131],[-123.9739077739485,44.625526990586266],[-123.97402247387124,44.623602995174025],[-123.97422664512258,44.62168278457618],[-123.97452005329446,44.61976848031455],[-123.97490236547455,44.61786219717883],[-123.97537315065257,44.6159660408927],[-123.975931880234,44.61408210579071],[-123.97657792866106,44.61221247250867],[-123.97731057413978,44.61035920569007],[-123.97812899947229,44.608524351710976],[-123.97903229299294,44.606709936425865],[-123.98001944960802,44.60491796293697],[-123.98108937193628,44.60315040938946],[-123.9822408715506,44.60140922679486],[-123.98347267031758,44.59969633688521],[-123.98478340183495,44.59801363000005],[-123.98617161296407,44.59636296300874],[-123.98763576545635,44.594746157270215],[-123.98917423767124,44.59316499663255],[-123.9907853263842,44.591621225474185],[-123.99246724868232,44.5901165467893],[-123.99421814394566,44.58865262031906],[-123.9960360759118,44.587231060731014],[-123.9979190348215,44.585853435848385],[-123.99986493964309,44.58452126493128],[-124.0018716403729,44.58323601701152],[-124.00393692040926,44.58199910928316],[-124.00605849899789,44.58081190555],[-124.00823403374508,44.57967571473209],[-124.01046112319702,44.57859178943268],[-124.01273730948135,44.57756132456713],[-124.01506008100917,44.57658545605522],[-124.01742687523358,44.57566525957843],[-124.01983508146256,44.574801749403136],[-124.02228204372268,44.57399587727148],[-124.02476506367077,44.57324853136051],[-124.02728140355039,44.57256053531133],[-124.02982828919005,44.571932647328545],[-124.0324029130398,44.57136555935178],[-124.03500243724291,44.570859896299396],[-124.03762399673994,44.57041621538567],[-124.04026470240099,44.57003500551206],[-124.04292164418376,44.56971668673306],[-124.04559189431329,44.56946160979734],[-124.04827251048063,44.56927005576466],[-124.05096053905679,44.569142235698855],[-124.05365301831827,44.56907829043737],[-124.05634698168176,44.56907829043737],[-124.05903946094324,44.569142235698855],[-124.0617274895194,44.56927005576466],[-124.06440810568675,44.56946160979734],[-124.06707835581628,44.56971668673306],[-124.06973529759904,44.57003500551206],[-124.07237600326009,44.57041621538567],[-124.07499756275712,44.570859896299396],[-124.07759708696024,44.57136555935179],[-124.08017171080998,44.571932647328545],[-124.08271859644965,44.57256053531133],[-124.08523493632927,44.57324853136051],[-124.08771795627734,44.57399587727148],[-124.09016491853748,44.574801749403136],[-124.09257312476646,44.57566525957843],[-124.09493991899087,44.57658545605522],[-124.09726269051868,44.57756132456713],[-124.09953887680302,44.57859178943268],[-124.10176596625496,44.57967571473209],[-124.10394150100214,44.58081190555],[-124.10606307959078,44.58199910928316],[-124.10812835962714,44.58323601701152],[-124.11013506035694,44.58452126493128],[-124.11208096517852,44.585853435848385],[-124.11396392408824,44.587231060731014],[-124.11578185605438,44.58865262031906],[-124.11753275131773,44.5901165467893],[-124.11921467361584,44.591621225474185],[-124.1208257623288,44.59316499663255],[-124.1223642345437,44.59474615727021],[-124.12382838703596,44.59636296300874],[-124.1252165981651,44.59801363000005],[-124.12652732968245,44.59969633688521],[-124.12775912844943,44.60140922679486],[-124.12891062806375,44.60315040938946],[-124.12998055039202,44.60491796293697],[-124.1309677070071,44.606709936425865],[-124.13187100052775,44.608524351710976],[-124.13268942586025,44.61035920569007],[-124.13342207133898,44.61221247250867],[-124.13406811976604,44.61408210579071],[-124.13462684934747,44.6159660408927],[-124.13509763452548,44.61786219717883],[-124.13547994670559,44.61976848031455],[-124.13577335487746,44.62168278457618],[-124.13597752612878,44.623602995174025],[-124.13609222605155,44.625526990586266],[-124.13611731903974,44.62745264490131],[-124.13605276847832,44.62937783016591],[-124.13589863682294,44.63130041873632],[-124.13565508557029,44.63321828563027],[-124.13532237511845,44.63512931087666],[-124.13490086451804,44.63703138186079],[-124.13439101111356,44.638922395662384],[-124.13379337007537,44.64080026138368],[-124.1331085938228,44.64266290246516],[-124.13233743133878,44.6445082589863],[-124.13148072737651,44.64633428994872],[-124.13053942155899,44.6481389755393],[-124.1295145473722,44.64992031937046],[-124.12840723105282,44.65167635069553],[-124.12721869037196,44.65340512659622],[-124.12595023331565,44.655104734140195],[-124.12460325666353,44.656773292505946],[-124.12317924446762,44.65840895507277],[-124.1216797664322,44.6600099114735],[-124.12010647619654,44.66157438960761],[-124.11846110952322,44.6631006576123],[-124.11674548239223,44.66458702578959],[-124.11496148900477,44.66603184848707],[-124.11311109969762,44.66743352593007],[-124.1111963587708,44.668790506003425],[-124.10921938223113,44.67010128598061],[-124.10718235545355,44.67136441419825],[-124.10508753076346,44.67257849167438],[-124.1029372249423,44.67374217366805],[-124.10073381665931,44.67485417117926],[-124.09847974383244,44.67591325238668],[-124.0961775009212,44.676918244022154],[-124.09382963615441,44.67786803268008],[-124.09143874869649,44.67876156606025],[-124.08900748575483,44.679597854142756],[-124.086538539632,44.68037597029343],[-124.08403464472606,44.68109505229893],[-124.08149857448203,44.681754303329775],[-124.07893313829881,44.682352992830644],[-124.07634117839406,44.68289045733669],[-124.07372556663164,44.68336610121501],[-124.07108920131445,44.683779397330326],[-124.06843500394696,44.684129887634235],[-124.0657659159707,44.68441718367726],[-124.06308489547682,44.68464096704311],[-124.06039491389943,44.68480098970469],[-124.05769895269327,44.68489707430145],[-124.05500000000002,44.68492911433764]],[[-124.05799999999999,44.86792725034871],[-124.05529250954835,44.86789521113947],[-124.05258802010418,44.8677991290233],[-124.04988952931869,44.86763911049523],[-124.04720002813437,44.867415332914625],[-124.04452249744031,44.86712804430686],[-124.04185990473933,44.86677756308599],[-124.03921520083034,44.866364277698736],[-124.03659131651023,44.86588864619015],[-124.03399115929882,44.86535119569153],[-124.03141761019079,44.864752521831214],[-124.02887352043828,44.86409328806874],[-124.02636170836767,44.863374224953404],[-124.02388495623492,44.862596129307846],[-124.02144600712168,44.86175986333781],[-124.01904756187767,44.86086635366882],[-124.01669227611082,44.85991659031129],[-124.01438275723012,44.85891162555487],[-124.01212156154384,44.85785257279353],[-124.00991119141644,44.85674060528258],[-124.00775409248764,44.855576954829345],[-124.00565265095658,44.85436291041848],[-124.00360919093424,44.853099816774204],[-124.00162597186704,44.8517890728604],[-123.99970518603463,44.85043213032072],[-123.99784895612434,44.84903049186053],[-123.99605933288534,44.847585709572115],[-123.99433829286494,44.84609938320555],[-123.99268773622954,44.84457315838693],[-123.99110948467252,44.84300872478608],[-123.9896052794115,44.841407814235744],[-123.9881767792771,44.83977219880448],[-123.98682555889515,44.83810368882551],[-123.98555310696439,44.83640413088354],[-123.98436082463148,44.83467540576203],[-123.98325002396484,44.83291942635321],[-123.98222192652948,44.83113813553309],[-123.98127766206325,44.82933350400399],[-123.98041826725712,44.827507528106906],[-123.97964468463942,44.82566222760629],[-123.97895776156653,44.82379964344964],[-123.9783582493194,44.82192183550447],[-123.97784680230833,44.82003088027515],[-123.97742397738561,44.8181288686022],[-123.97709023326706,44.81621790334654],[-123.976845930063,44.8143000970615],[-123.97669132891876,44.81237756965475],[-123.97662659176517,44.81045244604331],[-123.9766517811791,44.80852685380364],[-123.97676686035392,44.80660292082003],[-123.97697169317973,44.804682772933326],[-123.97726604443335,44.80276853159291],[-123.97764958007731,44.80086231151459],[-123.97812186766771,44.79896621834663],[-123.97868237686995,44.79708234634683],[-123.97933048008206,44.795212776073086],[-123.98006545316419,44.79335957208981],[-123.98088647627385,44.79152478069307],[-123.98179263480564,44.78971042765646],[-123.98278292043383,44.78791851600066],[-123.98385623225744,44.78615102378872],[-123.98501137804558,44.7844099019497],[-123.98624707558176,44.78269707213287],[-123.98756195410591,44.78101442459497],[-123.98895455585212,44.7793638161226],[-123.99042333768001,44.777747067992244],[-123.99196667279867,44.776165963969895],[-123.99358285258019,44.774622248352514],[-123.99527008846161,44.77311762405361],[-123.99702651393244,44.77165375073457],[-123.99885018660582,44.77023224298432],[-124.00073909037113,44.76885466854872],[-124.00269113762525,44.767522546611964],[-124.00470417158036,44.76623734613169],[-124.00677596864553,44.765000484229446],[-124.0089042408795,44.76381332463859],[-124.01108663851204,44.762677176210865],[-124.01332075253106,44.76159329148349],[-124.01560411733271,44.76056286530826],[-124.01793421343152,44.75958703354403],[-124.02030847022758,44.75866687181406],[-124.02272426882827,44.75780339432948],[-124.02517894492067,44.756997552780135],[-124.02766979169226,44.75625023529404],[-124.03019406279664,44.75556226546646],[-124.03274897536073,44.754934401459614],[-124.03533171303087,44.75436733517426],[-124.03793942905396,44.753861691493434],[-124.04056924939096,44.75341802759985],[-124.04321827585876,44.75303683236715],[-124.0458835892979,44.75271852582581],[-124.04856225276215,44.75246345870445],[-124.05125131472685,44.752271912046716],[-124.05394781231263,44.75214409690429],[-124.0566487745211,44.752080154106515],[-124.0593512254789,44.752080154106515],[-124.06205218768737,44.75214409690429],[-124.06474868527314,44.752271912046716],[-124.06743774723785,44.75246345870445],[-124.0701164107021,44.75271852582581],[-124.07278172414124,44.75303683236715],[-124.07543075060903,44.75341802759985],[-124.07806057094604,44.753861691493434],[-124.08066828696911,44.754367335174265],[-124.08325102463927,44.754934401459614],[-124.08580593720336,44.75556226546646],[-124.08833020830774,44.75625023529404],[-124.09082105507933,44.756997552780135],[-124.09327573117173,44.75780339432948],[-124.09569152977242,44.75866687181406],[-124.09806578656847,44.75958703354403],[-124.10039588266729,44.76056286530826],[-124.10267924746893,44.76159329148349],[-124.10491336148796,44.762677176210865],[-124.1070957591205,44.76381332463859],[-124.10922403135447,44.765000484229446],[-124.11129582841963,44.76623734613169],[-124.11330886237475,44.767522546611964],[-124.11526090962887,44.76885466854872],[-124.11714981339418,44.77023224298432],[-124.11897348606756,44.77165375073457],[-124.12072991153839,44.77311762405361],[-124.12241714741981,44.774622248352514],[-124.12403332720133,44.776165963969895],[-124.12557666231999,44.777747067992244],[-124.12704544414788,44.7793638161226],[-124.12843804589407,44.78101442459496],[-124.12975292441824,44.78269707213287],[-124.13098862195442,44.7844099019497],[-124.13214376774256,44.78615102378872],[-124.13321707956617,44.78791851600066],[-124.13420736519436,44.78971042765646],[-124.13511352372615,44.79152478069307],[-124.13593454683581,44.79335957208982],[-124.13666951991794,44.79521277607308],[-124.13731762313004,44.79708234634683],[-124.13787813233229,44.79896621834663],[-124.13835041992269,44.80086231151459],[-124.13873395556665,44.8027685315929],[-124.13902830682026,44.804682772933326],[-124.13923313964608,44.80660292082003],[-124.1393482188209,44.80852685380364],[-124.13937340823483,44.81045244604331],[-124.13930867108124,44.81237756965475],[-124.13915406993699,44.8143000970615],[-124.13890976673294,44.81621790334654],[-124.13857602261439,44.818128868602194],[-124.13815319769166,44.82003088027515],[-124.1376417506806,44.82192183550447],[-124.13704223843345,44.82379964344964],[-124.13635531536057,44.82566222760628],[-124.13558173274288,44.82750752810691],[-124.13472233793674,44.82933350400399],[-124.13377807347052,44.83113813553309],[-124.13274997603516,44.8329194263532],[-124.13163917536852,44.83467540576203],[-124.13044689303561,44.83640413088354],[-124.12917444110485,44.83810368882551],[-124.12782322072289,44.83977219880448],[-124.12639472058848,44.84140781423575],[-124.12489051532748,44.84300872478608],[-124.12331226377046,44.84457315838693],[-124.12166170713506,44.84609938320555],[-124.11994066711466,44.84758570957211],[-124.11815104387566,44.84903049186054],[-124.11629481396535,44.850432130320726],[-124.11437402813296,44.85178907286039],[-124.11239080906576,44.853099816774204],[-124.11034734904342,44.85436291041848],[-124.10824590751234,44.855576954829345],[-124.10608880858355,44.85674060528258],[-124.10387843845616,44.85785257279353],[-124.10161724276988,44.858911625554875],[-124.09930772388918,44.85991659031129],[-124.09695243812233,44.86086635366882],[-124.09455399287832,44.86175986333781],[-124.09211504376508,44.862596129307846],[-124.08963829163233,44.86337422495341],[-124.08712647956172,44.864093288068744],[-124.08458238980921,44.864752521831214],[-124.08200884070118,44.86535119569153],[-124.07940868348977,44.86588864619015],[-124.07678479916966,44.866364277698736],[-124.07414009526067,44.86677756308599],[-124.07147750255967,44.86712804430686],[-124.06879997186563,44.867415332914625],[-124.06611047068131,44.86763911049523],[-124.06341197989582,44.8677991290233],[-124.06070749045165,44.86789521113947],[-124.05799999999999,44.86792725034871]],[[-124.013,44.984926058588684],[-124.01028700798244,44.984894019907486],[-124.0075770231072,44.98479793937529],[-124.00487304915332,44.98463792348669],[-124.00217808317709,44.98441414960026],[-123.99949511216042,44.98412686574033],[-123.99682710967073,44.98377639031956],[-123.99417703253683,44.983363111782914],[-123.99154781754352,44.98288748817335],[-123.98894237814993,44.982350046619686],[-123.98636360123457,44.98175138274737],[-123.9838143438712,44.98109216001259],[-123.98129743013914,44.980373108960876],[-123.97881564797173,44.97959502641054],[-123.97637174604648,44.97875877456249],[-123.97396843072057,44.97786528003688],[-123.97160836301522,44.97691553283808],[-123.96929415565218,44.97591058524908],[-123.96702837014583,44.97485155065646],[-123.96481351395455,44.973739602307454],[-123.9626520376938,44.97257597200045],[-123.96054633241482,44.97136194871047],[-123.95849872695163,44.970098877151045],[-123.95651148533938,44.9687881562746],[-123.9545868043068,44.96743123771231],[-123.9527268108461,44.96602962415606],[-123.9509335598621,44.96458486768359],[-123.94920903190402,44.96309856802936],[-123.94755513098208,44.96157237080276],[-123.94597368247116,44.96000796565565],[-123.94446643110406,44.95840708440165],[-123.94303503905641,44.95677149908897],[-123.94168108412535,44.95510302002921],[-123.94040605800387,44.95340349378414],[-123.93921136465241,44.95167480111296],[-123.93809831877012,44.949918854882355],[-123.9370681443665,44.94813759794135],[-123.93612197343543,44.946333000963946],[-123.93526084473292,44.94450706026144],[-123.93448570265952,44.94266179556722],[-123.93379739624869,44.940799247796306],[-123.93319667826223,44.938921476782355],[-123.93268420439325,44.93703055899453],[-123.9322605325777,44.935128585236754],[-123.93192612241492,44.933217658332055],[-123.93168133469797,44.93129989079452],[-123.93152643105351,44.929377402491326],[-123.93146157369205,44.9274523182977],[-123.9314868252685,44.9255267657472],[-123.93160214885255,44.92360287267994],[-123.93180740800955,44.92168276489152],[-123.93210236699086,44.91976856378506],[-123.93248669103396,44.91786238402905],[-123.93295994677098,44.91596633122352],[-123.93352160274598,44.91408249957721],[-123.93417103003958,44.912212969598116],[-123.93490750300026,44.9103598058001],[-123.93573020008132,44.908525054427955],[-123.93663820478278,44.90671074120357],[-123.93763050669638,44.90491886909542],[-123.9387060026529,44.90315141611397],[-123.93986349797034,44.9014103331355],[-123.94110170780107,44.8996975417563],[-123.94241925857698,44.89801493218007],[-123.94381468955018,44.896364361140456],[-123.94528645442827,44.89474764986112],[-123.94683292310138,44.8931665820555],[-123.94845238345987,44.89162290196842],[-123.9501430432999,44.89011831246164],[-123.95190303231519,44.88865447314553],[-123.95373040417252,44.88723299855861],[-123.95562313866846,44.885855456397216],[-123.95757914396549,44.88452336579693],[-123.95959625890426,44.8832381956678],[-123.96167225538996,44.882001363085],[-123.96380484085041,44.880814231736764],[-123.96599166076207,44.87967811043104],[-123.96823030124254,44.87859425166274],[-123.97051829170596,44.877563850242964],[-123.97285310757853,44.87658804199151],[-123.97523217307136,44.87566790249435],[-123.97765286400748,44.874804445927204],[-123.98011251070032,44.873998623946434],[-123.98260840088,44.873251324648606],[-123.98513778266495,44.87256337159963],[-123.98769786757516,44.871935522934585],[-123.99028583358412,44.87136847052928],[-123.99289882820624,44.870862839244175],[-123.99553397161627,44.87041918624171],[-123.99818835979755,44.87003800037769],[-124.00085906771591,44.86971970166726],[-124.00354315251539,44.869464640826145],[-124.00623765673309,44.86927309888767],[-124.00893961152904,44.86914528689574],[-124.01164603992832,44.86908134567452],[-124.01435396007169,44.86908134567452],[-124.01706038847097,44.86914528689574],[-124.0197623432669,44.86927309888767],[-124.0224568474846,44.869464640826145],[-124.0251409322841,44.86971970166726],[-124.02781164020244,44.87003800037769],[-124.03046602838373,44.87041918624171],[-124.03310117179376,44.870862839244175],[-124.03571416641587,44.87136847052928],[-124.03830213242483,44.871935522934585],[-124.04086221733506,44.87256337159963],[-124.04339159912001,44.873251324648606],[-124.04588748929967,44.873998623946434],[-124.04834713599253,44.874804445927204],[-124.05076782692865,44.87566790249435],[-124.05314689242147,44.87658804199151],[-124.05548170829404,44.877563850242964],[-124.05776969875745,44.87859425166274],[-124.06000833923794,44.87967811043104],[-124.06219515914958,44.880814231736764],[-124.06432774461004,44.882001363085],[-124.06640374109574,44.8832381956678],[-124.06842085603452,44.88452336579693],[-124.07037686133154,44.885855456397216],[-124.07226959582749,44.88723299855861],[-124.07409696768481,44.88865447314553],[-124.07585695670011,44.89011831246164],[-124.07754761654013,44.89162290196842],[-124.07916707689861,44.8931665820555],[-124.08071354557173,44.89474764986112],[-124.08218531044983,44.896364361140456],[-124.08358074142302,44.89801493218007],[-124.08489829219893,44.8996975417563],[-124.08613650202967,44.9014103331355],[-124.08729399734709,44.90315141611397],[-124.08836949330363,44.90491886909541],[-124.08936179521723,44.90671074120357],[-124.09026979991867,44.908525054427955],[-124.09109249699975,44.9103598058001],[-124.09182896996042,44.912212969598116],[-124.09247839725403,44.91408249957721],[-124.09304005322903,44.91596633122352],[-124.09351330896604,44.91786238402905],[-124.09389763300914,44.91976856378506],[-124.09419259199046,44.92168276489152],[-124.09439785114745,44.92360287267994],[-124.0945131747315,44.9255267657472],[-124.09453842630796,44.9274523182977],[-124.0944735689465,44.929377402491326],[-124.09431866530203,44.93129989079452],[-124.09407387758507,44.93321765833206],[-124.0937394674223,44.93512858523675],[-124.09331579560674,44.93703055899453],[-124.09280332173776,44.938921476782355],[-124.0922026037513,44.940799247796306],[-124.09151429734048,44.94266179556722],[-124.09073915526709,44.94450706026144],[-124.08987802656458,44.946333000963946],[-124.08893185563349,44.94813759794135],[-124.0879016812299,44.949918854882355],[-124.08678863534759,44.95167480111296],[-124.08559394199612,44.95340349378414],[-124.08431891587466,44.95510302002921],[-124.08296496094358,44.95677149908897],[-124.08153356889594,44.95840708440165],[-124.08002631752883,44.96000796565564],[-124.07844486901791,44.96157237080276],[-124.07679096809598,44.96309856802936],[-124.0750664401379,44.96458486768359],[-124.07327318915391,44.966029624156064],[-124.0714131956932,44.96743123771231],[-124.06948851466062,44.96878815627459],[-124.06750127304836,44.970098877151045],[-124.06545366758517,44.97136194871045],[-124.06334796230621,44.97257597200045],[-124.06118648604544,44.97373960230746],[-124.05897162985417,44.974851550656474],[-124.05670584434782,44.97591058524908],[-124.05439163698478,44.97691553283808],[-124.05203156927942,44.97786528003688],[-124.04962825395353,44.97875877456249],[-124.04718435202827,44.97959502641054],[-124.04470256986086,44.98037310896087],[-124.0421856561288,44.981092160012594],[-124.03963639876544,44.98175138274737],[-124.03705762185008,44.982350046619686],[-124.03445218245648,44.98288748817335],[-124.03182296746319,44.983363111782914],[-124.02917289032926,44.98377639031956],[-124.0265048878396,44.98412686574033],[-124.02382191682291,44.98441414960026],[-124.02112695084669,44.98463792348668],[-124.01842297689281,44.9847979393753],[-124.01571299201755,44.984894019907486],[-124.013,44.984926058588684]],[[-124.023,46.5599100237681],[-124.02020954845636,46.559877992136975],[-124.0174221904391,46.55978193275329],[-124.01464101601233,46.55962195210627],[-124.01186910831967,46.55939822754555],[-124.00910954013389,46.55911100708273],[-124.00636537041902,46.558760609113826],[-124.00363964090788,46.55834742206301],[-124.00093537270013,46.557871903948026],[-123.99825556288405,46.55733458186775],[-123.99560318118614,46.55673605141261],[-123.99298116665251,46.55607697599834],[-123.99039242436578,46.555358086124045],[-123.98783982220135,46.55458017855531],[-123.98532618762678,46.55374411543342],[-123.98285430454777,46.55285082331149],[-123.9804269102047,46.551901292118934],[-123.97804669212296,46.55089657405524],[-123.97571628512063,46.54983778241434],[-123.9734382683772,46.548726090341134],[-123.97121516256603,46.54756272952124],[-123.96904942705456,46.54634898880592],[-123.96694345717484,46.5450862127734],[-123.96489958156761,46.543775800228396],[-123.96292005960323,46.542419202641575],[-123.96100707888164,46.54101792253071],[-123.95916275281482,46.53957351178537],[-123.95738911829417,46.538087569937076],[-123.95568813344511,46.536561742376975],[-123.95406167547178,46.53499771852288],[-123.95251153859391,46.533397229938],[-123.95103943207819,46.53176204840329],[-123.94964697836615,46.530093983945804],[-123.94833571130086,46.52839488282514],[-123.94710707445371,46.526666625480296],[-123.94596241955375,46.52491112443934],[-123.94490300502062,46.523130322194184],[-123.9439299946029,46.52132618904288],[-123.94304445612318,46.519500720901846],[-123.942247360331,46.51765593709057],[-123.9415395798651,46.51579387809114],[-123.94092188832524,46.51391660328531],[-123.9403949594556,46.512026188671456],[-123.93995936643918,46.51012472456401],[-123.93961558130508,46.508214313278074],[-123.93936397444789,46.50629706680167],[-123.93920481426086,46.50437510445819],[-123.93913826688171,46.502450550561846],[-123.93916439605239,46.500525532068366],[-123.93928316309169,46.49860217622395],[-123.93949442698157,46.496682608214854],[-123.93979794456598,46.4947689488201],[-123.94019337086245,46.492863312070256],[-123.94068025948545,46.49096780291437],[-123.94125806318128,46.48908451489815],[-123.94192613447332,46.48721552785553],[-123.94268372641709,46.485362905616334],[-123.94352999346374,46.48352869373247],[-123.94446399243127,46.48171491722526],[-123.94548468358197,46.479923578356235],[-123.94659093180476,46.478156654423785],[-123.94778150790107,46.47641609558823],[-123.94905508997266,46.47470382272756],[-123.95041026490959,46.47302172532614],[-123.95184552997699,46.471371659398656],[-123.95335929449807,46.469755445451746],[-123.9549498816321,46.468174866485185],[-123.9566155302451,46.46663166603506],[-123.95835439687066,46.46512754626082],[-123.96016455775938,46.46366416607843],[-123.9620440110141,46.46224313934158],[-123.96399067880861,46.460866033072776],[-123.96600240968775,46.45953436574636],[-123.96807698094543,46.45824960562523],[-123.97021210107923,46.45701316915302],[-123.97240541231766,46.455826419403486],[-123.97465449321795,46.454690664588654],[-123.97695686133173,46.453607156627506],[-123.9793099759348,46.45257708977648],[-123.98171124081918,46.451601599323524],[-123.98415800714345,46.450681760346676],[-123.98664757633907,46.449818586538996],[-123.98917720306888,46.44901302910064],[-123.99174409823524,46.44826597569954],[-123.99434543203401,46.447578249501646],[-123.99697833705179,46.44695060827169],[-123.99963991140244,46.446383743545766],[-124.0023272218999,46.44587827987603],[-124.00503730726429,46.445434774148886],[-124.00776718135695,46.445053714977035],[-124.01051383644197,46.444735522166084],[-124.01327424647062,46.44448054625631],[-124.01604537038425,46.44428906814008],[-124.01882415543386,46.44416129875536],[-124.02160754051114,46.444097378855474],[-124.02439245948887,46.444097378855474],[-124.02717584456614,46.44416129875536],[-124.02995462961574,46.44428906814008],[-124.03272575352939,46.44448054625631],[-124.03548616355802,46.444735522166084],[-124.03823281864305,46.445053714977035],[-124.0409626927357,46.445434774148886],[-124.04367277810009,46.44587827987603],[-124.04636008859755,46.446383743545766],[-124.04902166294822,46.44695060827169],[-124.051654567966,46.447578249501646],[-124.05425590176476,46.44826597569954],[-124.05682279693113,46.44901302910064],[-124.05935242366093,46.449818586538996],[-124.06184199285654,46.450681760346676],[-124.06428875918083,46.451601599323524],[-124.06669002406521,46.45257708977648],[-124.06904313866826,46.453607156627506],[-124.07134550678204,46.454690664588654],[-124.07359458768234,46.455826419403486],[-124.07578789892078,46.45701316915302],[-124.07792301905458,46.45824960562523],[-124.07999759031225,46.45953436574636],[-124.08200932119139,46.460866033072776],[-124.0839559889859,46.46224313934158],[-124.08583544224062,46.46366416607843],[-124.08764560312935,46.46512754626082],[-124.08938446975489,46.46663166603506],[-124.0910501183679,46.468174866485185],[-124.09264070550194,46.46975544545174],[-124.09415447002301,46.471371659398656],[-124.09558973509041,46.473021725326134],[-124.09694491002735,46.47470382272756],[-124.09821849209892,46.47641609558823],[-124.09940906819523,46.478156654423785],[-124.10051531641804,46.479923578356235],[-124.10153600756874,46.48171491722526],[-124.10247000653625,46.48352869373247],[-124.10331627358292,46.485362905616334],[-124.10407386552667,46.48721552785553],[-124.10474193681873,46.48908451489815],[-124.10531974051456,46.49096780291437],[-124.10580662913756,46.492863312070256],[-124.10620205543403,46.4947689488201],[-124.10650557301844,46.496682608214854],[-124.10671683690832,46.49860217622395],[-124.10683560394762,46.500525532068366],[-124.10686173311828,46.502450550561846],[-124.10679518573914,46.50437510445819],[-124.10663602555212,46.50629706680167],[-124.10638441869493,46.508214313278074],[-124.10604063356082,46.51012472456401],[-124.1056050405444,46.51202618867145],[-124.10507811167476,46.51391660328531],[-124.1044604201349,46.51579387809114],[-124.103752639669,46.51765593709057],[-124.10295554387683,46.51950072090185],[-124.10207000539711,46.52132618904288],[-124.10109699497939,46.523130322194184],[-124.10003758044625,46.524911124439335],[-124.09889292554628,46.526666625480296],[-124.09766428869914,46.52839488282514],[-124.09635302163385,46.530093983945804],[-124.09496056792182,46.53176204840329],[-124.09348846140608,46.533397229938],[-124.09193832452823,46.53499771852288],[-124.0903118665549,46.536561742376975],[-124.08861088170583,46.538087569937076],[-124.08683724718519,46.53957351178537],[-124.08499292111837,46.54101792253071],[-124.08307994039677,46.542419202641575],[-124.08110041843238,46.543775800228396],[-124.07905654282517,46.54508621277339],[-124.07695057294545,46.54634898880592],[-124.07478483743397,46.54756272952124],[-124.07256173162281,46.548726090341134],[-124.07028371487938,46.54983778241434],[-124.06795330787705,46.55089657405524],[-124.0655730897953,46.55190129211894],[-124.06314569545223,46.55285082331149],[-124.06067381237321,46.55374411543342],[-124.05816017779865,46.55458017855531],[-124.05560757563421,46.555358086124045],[-124.05301883334748,46.55607697599834],[-124.05039681881387,46.55673605141261],[-124.04774443711595,46.55733458186775],[-124.04506462729988,46.557871903948026],[-124.04236035909211,46.55834742206301],[-124.03963462958097,46.558760609113826],[-124.03689045986611,46.55911100708273],[-124.03413089168032,46.55939822754555],[-124.03135898398766,46.55962195210627],[-124.0285778095609,46.55978193275329],[-124.02579045154364,46.559877992136975],[-124.023,46.5599100237681]],[[-123.967,45.224923613976735],[-123.96427561654173,45.22489157637699],[-123.96155425292876,45.22479549908893],[-123.95883892562851,45.22463548860619],[-123.95613264435664,45.22441172228588],[-123.95343840871075,45.224124448150164],[-123.95075920481614,45.22377398460888],[-123.94809800198693,45.22336072010356],[-123.94545774940674,45.22288511267288],[-123.94284137283265,45.2223476894407],[-123.94025177132626,45.22174904602663],[-123.93769181401572,45.221089845880215],[-123.93516433689233,45.22037081953927],[-123.93267213964532,45.21959276381349],[-123.93021798253872,45.218756540894034],[-123.92780458333382,45.21786307739012],[-123.92543461426035,45.21691336329398],[-123.92311069904056,45.21590845087511],[-123.92083540996886,45.21484945350517],[-123.91861126505087,45.21373754441496],[-123.91644072520486,45.212573955384855],[-123.91432619152879,45.211359975370144],[-123.91227000263606,45.21009694906289],[-123.910274432063,45.208786275392065],[-123.90834168575076,45.20742940596354],[-123.90647389960493,45.20602784344173],[-123.90467313713492,45.204583139874835],[-123.90294138717613,45.2030968949655],[-123.9012805616976,45.20157075428893],[-123.8996924936969,45.200006407460485],[-123.89817893518516,45.19840558625476],[-123.89674155526397,45.19677006267841],[-123.89538193829686,45.19510164699886],[-123.89410158217622,45.193402185731024],[-123.89290189668874,45.19167355958459],[-123.89178420198019,45.189917681373906],[-123.89074972712147,45.188136493892884],[-123.88979960877751,45.18633196775761],[-123.8889348899799,45.1845060992186],[-123.88815651900535,45.1826609079456],[-123.88746534835992,45.18079843478715],[-123.88686213387106,45.1789207395076],[-123.88634753388772,45.17702989850394],[-123.88592210858934,45.175128002505154],[-123.88558631940454,45.17321715425658],[-123.88534052853959,45.17129946619187],[-123.88518499861752,45.169377058095144],[-123.88511989242775,45.167452054756026],[-123.88514527278619,45.16552658361992],[-123.88526110250636,45.16360277243644],[-123.88546724448071,45.161682746908355],[-123.88576346187259,45.159768628343784],[-123.88614941841749,45.15786253131415],[-123.8866246788344,45.1559665613205],[-123.88718870934517,45.154082812470804],[-123.88784087830248,45.15221336517063],[-123.88858045692427,45.15036028383],[-123.8894066201351,45.148525614588536],[-123.89031844751194,45.14671138306183],[-123.89131492433408,45.14491959211113],[-123.89239494273562,45.14315221963897],[-123.8935573029591,45.141411216413104],[-123.89480071470885,45.13969850392102],[-123.89612379860213,45.13801597225745],[-123.89752508771686,45.136365478047175],[-123.89900302923365,45.134748842405365],[-123.90055598617063,45.13316784893744],[-123.90218223920871,45.13162424178096],[-123.90387998860537,45.13011972369154],[-123.90564735619492,45.128655954174484],[-123.90748238747263,45.12723454766479],[-123.90938305376088,45.125857071756954],[-123.91134725445428,45.124525045486614],[-123.913372819342,45.12323993766605],[-123.91545751100398,45.122003165275046],[-123.91759902727902,45.12081609190898],[-123.91979500380181,45.11968002628581],[-123.92204301660571,45.11859622081352],[-123.92434058478942,45.11756587021943],[-123.92668517324358,45.116590110243045],[-123.92907419543506,45.115670016393715],[-123.93150501624574,45.11480660277424],[-123.93397495486255,45.114000820972194],[-123.93648128771609,45.113253559019455],[-123.93902125146398,45.11256564042156],[-123.94159204601686,45.11193782325773],[-123.94419083760253,45.11137079935251],[-123.94681476186607,45.11086519351987],[-123.9494609270018,45.110421562880596],[-123.9521264169146,45.11004039625383],[-123.95480829440648,45.109722113623114],[-123.95750360438537,45.10946706567771],[-123.96020937709307,45.109275533429674],[-123.96292263134812,45.10914772790695],[-123.96564037780124,45.109083789923005],[-123.96835962219876,45.109083789923005],[-123.97107736865186,45.10914772790695],[-123.97379062290692,45.109275533429674],[-123.97649639561463,45.10946706567771],[-123.97919170559352,45.109722113623114],[-123.98187358308539,45.11004039625383],[-123.98453907299819,45.110421562880596],[-123.98718523813392,45.11086519351987],[-123.98980916239745,45.111370799352514],[-123.99240795398313,45.11193782325773],[-123.994978748536,45.11256564042156],[-123.9975187122839,45.113253559019455],[-124.00002504513743,45.114000820972194],[-124.00249498375425,45.11480660277424],[-124.00492580456492,45.115670016393715],[-124.0073148267564,45.116590110243045],[-124.00965941521056,45.11756587021943],[-124.01195698339427,45.11859622081352],[-124.01420499619817,45.1196800262858],[-124.01640097272096,45.12081609190898],[-124.01854248899602,45.122003165275046],[-124.02062718065798,45.12323993766605],[-124.0226527455457,45.124525045486614],[-124.02461694623912,45.125857071756954],[-124.02651761252737,45.12723454766479],[-124.02835264380508,45.128655954174484],[-124.03012001139462,45.13011972369154],[-124.03181776079128,45.13162424178096],[-124.03344401382935,45.13316784893744],[-124.03499697076633,45.134748842405365],[-124.03647491228313,45.136365478047175],[-124.03787620139785,45.13801597225744],[-124.03919928529113,45.13969850392102],[-124.04044269704089,45.141411216413104],[-124.04160505726436,45.14315221963897],[-124.0426850756659,45.14491959211113],[-124.04368155248804,45.146711383061835],[-124.04459337986488,45.14852561458853],[-124.04541954307571,45.15036028383],[-124.04615912169751,45.15221336517063],[-124.04681129065482,45.154082812470804],[-124.04737532116559,45.1559665613205],[-124.04785058158251,45.157862531314166],[-124.0482365381274,45.15976862834378],[-124.04853275551928,45.161682746908355],[-124.04873889749362,45.16360277243644],[-124.0488547272138,45.16552658361992],[-124.04888010757223,45.167452054756026],[-124.04881500138247,45.169377058095144],[-124.0486594714604,45.17129946619187],[-124.04841368059544,45.17321715425658],[-124.04807789141064,45.175128002505154],[-124.04765246611227,45.17702989850393],[-124.04713786612892,45.1789207395076],[-124.04653465164006,45.18079843478715],[-124.04584348099465,45.1826609079456],[-124.04506511002009,45.1845060992186],[-124.04420039122249,45.18633196775762],[-124.04325027287851,45.188136493892884],[-124.0422157980198,45.189917681373906],[-124.04109810331124,45.19167355958459],[-124.03989841782376,45.193402185731024],[-124.03861806170312,45.19510164699886],[-124.03725844473601,45.19677006267842],[-124.03582106481483,45.19840558625476],[-124.0343075063031,45.20000640746049],[-124.03271943830238,45.20157075428893],[-124.03105861282386,45.2030968949655],[-124.02932686286508,45.204583139874835],[-124.02752610039505,45.20602784344173],[-124.02565831424924,45.20742940596354],[-124.02372556793698,45.20878627539206],[-124.02172999736392,45.21009694906288],[-124.0196738084712,45.211359975370144],[-124.01755927479513,45.212573955384855],[-124.01538873494911,45.21373754441496],[-124.01316459003112,45.21484945350517],[-124.01088930095942,45.21590845087511],[-124.00856538573963,45.21691336329399],[-124.00619541666616,45.21786307739013],[-124.00378201746126,45.218756540894034],[-124.00132786035468,45.21959276381349],[-123.99883566310766,45.22037081953927],[-123.99630818598426,45.221089845880215],[-123.99374822867372,45.22174904602664],[-123.99115862716734,45.2223476894407],[-123.98854225059324,45.22288511267288],[-123.98590199801305,45.22336072010356],[-123.98324079518385,45.22377398460889],[-123.98056159128924,45.224124448150164],[-123.97786735564335,45.22441172228588],[-123.97516107437147,45.22463548860619],[-123.97244574707122,45.22479549908893],[-123.96972438345826,45.22489157637699],[-123.967,45.224923613976735]],[[-123.945,45.487920935296096],[-123.94226296729063,45.487888898878744],[-123.93952896853256,45.48779282513752],[-123.93680103428294,45.487632820565125],[-123.93408218831495,45.487409062517045],[-123.9313754442354,45.487121799013195],[-123.92868380211425,45.48677134846045],[-123.92601024512996,45.486358099296616],[-123.92335773623428,45.485882509555935],[-123.92072921484049,45.48534510635695],[-123.91812759353888,45.48474648531311],[-123.91555575484327,45.484087309866794],[-123.91301654797236,45.483368310547675],[-123.9105127856697,45.48259028415625],[-123.90804724106538,45.481754092873196],[-123.9056226445841,45.4808606632961],[-123.9032416809021,45.47991098540412],[-123.90090698595678,45.47890611145229],[-123.89862114401296,45.47784715479624],[-123.8963866847883,45.47673528864909],[-123.89420608064148,45.47557174477182],[-123.89208174382657,45.47435781209841],[-123.89001602381612,45.47309483529776],[-123.88801120469674,45.47178421327352],[-123.88606950263917,45.47042739760414],[-123.88419306344646,45.46902589092433],[-123.88238396018252,45.46758124525023],[-123.88064419088384,45.46609506024997],[-123.87897567635683,45.46456898146171],[-123.87738025806321,45.4630046984611],[-123.87585969609586,45.46140394298031],[-123.8744156672469,45.459768486980806],[-123.87304976317077,45.45810014068188],[-123.87176348864371,45.45640075054747],[-123.87055825992147,45.45467219723327],[-123.86943540319758,45.45291639349653],[-123.86839615316279,45.45113528207109],[-123.86744165166839,45.44933083350978],[-123.86657294649333,45.44750504399675],[-123.86579099021796,45.445659933132234],[-123.86509663920388,45.44379754169212],[-123.86449065268229,45.44191992936496],[-123.86397369195078,45.44002917246883],[-123.86354631967949,45.43812736165073],[-123.86320899932771,45.436216599570955],[-123.86296209467056,45.434298998575116],[-123.8628058694371,45.43237667835642],[-123.86274048705874,45.43045176361066],[-123.86276601052992,45.42852638168672],[-123.8628824023791,45.426602660235005],[-123.8630895247512,45.42468272485653],[-123.86338713960066,45.422768696755284],[-123.86377490899501,45.42086269039624],[-123.86425239552815,45.41896681117189],[-123.86481906284303,45.41708315307963],[-123.86547427626255,45.41521379641272],[-123.8662173035283,45.413360805467136],[-123.86704731564593,45.411526226267135],[-123.86796338783579,45.40971208431163],[-123.86896450058828,45.407920382344145],[-123.87004954082187,45.40615309814869],[-123.87121730314313,45.40441218237387],[-123.87246649120625,45.40269955638763],[-123.87379571917178,45.40101711016508],[-123.8752035132614,45.399366700211395],[-123.876688313408,45.397750147522515],[-123.87824847499877,45.39616923558519],[-123.87988227070899,45.394625708419206],[-123.88158789242502,45.393121268663386],[-123.88336345325385,45.39165757570766],[-123.8852069896171,45.39023624387325],[-123.88711646342718,45.388858840642655],[-123.88908976434296,45.38752688494169],[-123.8911247121026,45.386241845475155],[-123.89321905893134,45.385005139117915],[-123.89537049202048,45.383818129363306],[-123.89757663607627,45.382682124830374],[-123.89983505593477,45.381598377831416],[-123.90214325924038,45.38056808300171],[-123.90449869918525,45.37959237599244],[-123.90689877730611,45.37867233222863],[-123.90934084633582,45.37780896573303],[-123.91182221310679,45.37700322801743],[-123.91434014150266,45.37625600704258],[-123.9168918554555,45.37556812624765],[-123.91947454198508,45.37494034365041],[-123.92208535427707,45.37437335101902],[-123.92472141479715,45.37386777311628],[-123.92737981843699,45.3734241670172],[-123.93005763568988,45.37304302150059],[-123.9327519158514,45.3727247565152],[-123.935459690243,45.37246972272117],[-123.93817797545405,45.372278201107214],[-123.94090377659963,45.372150402683666],[-123.94363409059012,45.37208646825224],[-123.94636590940988,45.37208646825224],[-123.94909622340036,45.372150402683666],[-123.95182202454595,45.372278201107214],[-123.95454030975701,45.37246972272117],[-123.9572480841486,45.3727247565152],[-123.95994236431012,45.37304302150059],[-123.96262018156301,45.3734241670172],[-123.96527858520285,45.37386777311628],[-123.96791464572293,45.37437335101902],[-123.97052545801492,45.37494034365041],[-123.9731081445445,45.37556812624765],[-123.97565985849734,45.37625600704258],[-123.97817778689321,45.37700322801743],[-123.98065915366418,45.37780896573303],[-123.98310122269389,45.37867233222863],[-123.98550130081475,45.37959237599244],[-123.98785674075963,45.38056808300171],[-123.99016494406523,45.381598377831416],[-123.99242336392373,45.382682124830374],[-123.99462950797952,45.383818129363306],[-123.99678094106866,45.385005139117915],[-123.9988752878974,45.386241845475155],[-124.00091023565705,45.38752688494169],[-124.00288353657282,45.388858840642655],[-124.0047930103829,45.39023624387325],[-124.00663654674615,45.39165757570766],[-124.00841210757498,45.393121268663386],[-124.01011772929101,45.394625708419206],[-124.01175152500123,45.39616923558519],[-124.01331168659199,45.397750147522515],[-124.0147964867386,45.3993667002114],[-124.01620428082822,45.40101711016508],[-124.01753350879375,45.40269955638763],[-124.01878269685687,45.40441218237387],[-124.01995045917813,45.40615309814869],[-124.02103549941172,45.407920382344145],[-124.02203661216421,45.40971208431163],[-124.02295268435407,45.41152622626713],[-124.0237826964717,45.413360805467136],[-124.02452572373745,45.41521379641271],[-124.02518093715697,45.41708315307963],[-124.02574760447185,45.41896681117189],[-124.02622509100499,45.42086269039624],[-124.02661286039934,45.422768696755284],[-124.0269104752488,45.42468272485653],[-124.0271175976209,45.426602660235],[-124.02723398947008,45.42852638168672],[-124.02725951294126,45.43045176361066],[-124.0271941305629,45.43237667835642],[-124.02703790532942,45.4342989985751],[-124.02679100067229,45.436216599570955],[-124.02645368032051,45.438127361650736],[-124.02602630804923,45.44002917246883],[-124.02550934731771,45.44191992936496],[-124.02490336079612,45.44379754169212],[-124.02420900978204,45.44565993313222],[-124.02342705350667,45.44750504399675],[-124.02255834833161,45.44933083350978],[-124.02160384683721,45.45113528207109],[-124.02056459680242,45.45291639349653],[-124.01944174007853,45.45467219723327],[-124.01823651135629,45.45640075054747],[-124.01695023682923,45.45810014068188],[-124.01558433275311,45.459768486980806],[-124.01414030390414,45.46140394298031],[-124.01261974193679,45.4630046984611],[-124.01102432364317,45.46456898146171],[-124.00935580911616,45.46609506024997],[-124.00761603981748,45.46758124525023],[-124.00580693655354,45.469025890924335],[-124.00393049736083,45.47042739760414],[-124.00198879530326,45.47178421327352],[-123.99998397618388,45.47309483529776],[-123.99791825617343,45.47435781209841],[-123.99579391935852,45.47557174477182],[-123.9936133152117,45.476735288649095],[-123.99137885598704,45.47784715479622],[-123.98909301404322,45.47890611145229],[-123.9867583190979,45.47991098540413],[-123.98437735541589,45.4808606632961],[-123.98195275893463,45.481754092873196],[-123.9794872143303,45.48259028415625],[-123.97698345202764,45.483368310547675],[-123.97444424515673,45.484087309866794],[-123.97187240646112,45.48474648531311],[-123.96927078515951,45.48534510635695],[-123.96664226376572,45.485882509555935],[-123.96398975487004,45.486358099296616],[-123.96131619788575,45.48677134846045],[-123.9586245557646,45.487121799013195],[-123.95591781168505,45.48740906251706],[-123.95319896571706,45.487632820565125],[-123.95047103146744,45.487792825137525],[-123.94773703270937,45.487888898878744],[-123.945,45.487920935296096]],[[-123.965,45.62791950954564],[-123.96225616200846,45.62788747375646],[-123.95951536555732,45.62779140189961],[-123.95678064878432,45.627631400467315],[-123.95405504302563,45.627407646814206],[-123.95134156942513,45.62712038895903],[-123.9486432355552,45.62676994530717],[-123.94596303205344,45.62635670429445],[-123.94330392927903,45.62588112395285],[-123.94066887399235,45.625343731398175],[-123.93806078606222,45.624745122240604],[-123.93548255520409,45.62408595991887],[-123.93293703775315,45.623366974958394],[-123.93042705347615,45.62258896415482],[-123.92795538242537,45.621752789683455],[-123.9255247618384,45.62085937813575],[-123.92313788308772,45.61990971948408],[-123.92079738868259,45.618904865975864],[-123.91850586932796,45.61784593095837],[-123.91626586104253,45.61673408763547],[-123.91407984234003,45.615570567757906],[-123.91195023147637,45.61435666024852],[-123.9098793837665,45.61309370976397],[-123.90786958897296,45.61178311519465],[-123.90592306876992,45.61042632810453],[-123.90404197428529,45.60902485111268],[-123.90222838372324,45.6075802362183],[-123.9004843000703,45.60609408307133],[-123.89881164888736,45.604568037190354],[-123.89721227618975,45.60300378813003],[-123.89568794641814,45.60140306760012],[-123.8942403405021,45.59976764753811],[-123.89287105401847,45.5980993381379],[-123.89158159544678,45.59639998583639],[-123.89037338452303,45.594671471260625],[-123.88924775069424,45.59291570713764],[-123.88820593167452,45.591134636169386],[-123.88724907210512,45.589330228875134],[-123.88637822231905,45.587504481403805],[-123.88559433721166,45.58565941331875],[-123.8848982752187,45.583797065357246],[-123.8842907974024,45.58191949716759],[-123.88377256664643,45.580028785025924],[-123.88334414696081,45.57812701953566],[-123.88300600289703,45.57621630331185],[-123.88275849907414,45.574298748653334],[-123.88260189981574,45.5723764752049],[-123.88253636889876,45.57045160761246],[-123.8825619694133,45.5685262731735],[-123.88267866373427,45.56660259948563],[-123.88288631360413,45.5646827120957],[-123.88318468032685,45.56276873215223],[-123.88357342507229,45.560862774063516],[-123.8840521092909,45.5589669431642],[-123.88462019523797,45.55708333339281],[-123.88527704660622,45.55521402498274],[-123.88602192926678,45.553361082169225],[-123.88685401211673,45.551526550915],[-123.88777236803244,45.54971245665676],[-123.88877597492774,45.54792080207534],[-123.88986371691502,45.54615356489152],[-123.89103438556842,45.544412695690376],[-123.89228668128722,45.542700115776135],[-123.89361921475806,45.54101771506006],[-123.89503050851394,45.539367349983586],[-123.89651899858839,45.537750841479024],[-123.89808303626312,45.53616997296984],[-123.89972088990629,45.534626488412954],[-123.90143074690066,45.53312209038492],[-123.9032107156579,45.5316584382141],[-123.90505882771804,45.53023714616099],[-123.90697303993089,45.52885978164836],[-123.90895123671751,45.52752786354339],[-123.91099123240889,45.52624286049352],[-123.91309077365925,45.52500618931762],[-123.91524754193179,45.52381921345458],[-123.91745915605338,45.52268324147061],[-123.91972317483594,45.52159952562698],[-123.92203709976172,45.520569260509816],[-123.92439837772918,45.51959358172316],[-123.92680440385676,45.51867356464703],[-123.92925252434135,45.51781022326138],[-123.93174003936886,45.51700450903761],[-123.93426420607291,45.516257309898464],[-123.93682224153932,45.51556944924771],[-123.93941132585283,45.51494168507026],[-123.94202860518281,45.514374709104196],[-123.94467119490452,45.513869146085014],[-123.94733618275315,45.513425553063264],[-123.95002063200667,45.51304441879618],[-123.95272158469467,45.51272616321398],[-123.95543606482919,45.512471136961295],[-123.95816108165502,45.51227962101427],[-123.96089363291486,45.51215182637392],[-123.96363070812727,45.51208789383568],[-123.96636929187272,45.51208789383568],[-123.96910636708515,45.51215182637392],[-123.97183891834497,45.51227962101427],[-123.9745639351708,45.512471136961295],[-123.97727841530532,45.51272616321398],[-123.97997936799332,45.51304441879618],[-123.98266381724684,45.513425553063264],[-123.98532880509548,45.513869146085014],[-123.98797139481718,45.514374709104196],[-123.99058867414718,45.51494168507026],[-123.99317775846067,45.51556944924771],[-123.99573579392708,45.516257309898464],[-123.99825996063113,45.51700450903761],[-124.00074747565864,45.51781022326138],[-124.00319559614323,45.51867356464703],[-124.00560162227082,45.51959358172316],[-124.00796290023827,45.520569260509816],[-124.01027682516407,45.52159952562698],[-124.01254084394661,45.52268324147061],[-124.0147524580682,45.52381921345458],[-124.01690922634076,45.52500618931762],[-124.01900876759112,45.52624286049352],[-124.02104876328248,45.52752786354339],[-124.0230269600691,45.52885978164836],[-124.02494117228196,45.53023714616099],[-124.02678928434209,45.5316584382141],[-124.02856925309933,45.53312209038492],[-124.0302791100937,45.534626488412954],[-124.03191696373689,45.53616997296984],[-124.0334810014116,45.537750841479024],[-124.03496949148605,45.539367349983586],[-124.03638078524193,45.54101771506006],[-124.03771331871279,45.542700115776135],[-124.03896561443159,45.544412695690376],[-124.04013628308499,45.54615356489152],[-124.04122402507227,45.54792080207533],[-124.04222763196756,45.54971245665676],[-124.04314598788328,45.551526550915],[-124.04397807073322,45.55336108216923],[-124.04472295339377,45.55521402498274],[-124.04537980476202,45.55708333339281],[-124.0459478907091,45.5589669431642],[-124.04642657492771,45.560862774063516],[-124.04681531967314,45.56276873215223],[-124.04711368639586,45.5646827120957],[-124.04732133626574,45.56660259948563],[-124.0474380305867,45.5685262731735],[-124.04746363110125,45.57045160761246],[-124.04739810018425,45.5723764752049],[-124.04724150092586,45.574298748653334],[-124.04699399710296,45.57621630331185],[-124.0466558530392,45.57812701953566],[-124.04622743335356,45.58002878502593],[-124.04570920259759,45.58191949716759],[-124.0451017247813,45.583797065357246],[-124.04440566278834,45.585659413318744],[-124.04362177768095,45.587504481403805],[-124.04275092789487,45.58933022887513],[-124.04179406832547,45.591134636169386],[-124.04075224930575,45.592915707137635],[-124.03962661547696,45.594671471260625],[-124.03841840455323,45.59639998583639],[-124.03712894598152,45.59809933813791],[-124.0357596594979,45.59976764753811],[-124.03431205358186,45.60140306760012],[-124.03278772381024,45.603003788130025],[-124.03118835111263,45.604568037190354],[-124.02951569992969,45.60609408307133],[-124.02777161627675,45.6075802362183],[-124.0259580257147,45.60902485111267],[-124.02407693123008,45.61042632810453],[-124.02213041102705,45.61178311519465],[-124.0201206162335,45.61309370976397],[-124.01804976852362,45.61435666024851],[-124.01592015765996,45.615570567757906],[-124.01373413895747,45.61673408763547],[-124.01149413067205,45.61784593095838],[-124.00920261131742,45.618904865975864],[-124.00686211691229,45.61990971948408],[-124.00447523816159,45.62085937813575],[-124.00204461757463,45.621752789683455],[-123.99957294652384,45.62258896415482],[-123.99706296224686,45.623366974958394],[-123.99451744479592,45.624085959918865],[-123.99193921393778,45.624745122240604],[-123.98933112600764,45.625343731398175],[-123.98669607072097,45.62588112395285],[-123.98403696794655,45.62635670429445],[-123.98135676444481,45.62676994530717],[-123.97865843057488,45.62712038895903],[-123.97594495697437,45.627407646814206],[-123.97321935121568,45.627631400467315],[-123.97048463444267,45.62779140189961],[-123.96774383799153,45.62788747375646],[-123.965,45.62791950954564]],[[-123.89,45.76791808395255],[-123.88724930622247,45.76788604879066],[-123.88450166163098,45.76778997881556],[-123.88176011200004,45.76762998051893],[-123.87902769628519,45.76740623125466],[-123.87630744322338,45.767118979040326],[-123.87360236794521,45.76676854227978],[-123.87091546860292,45.766355309407025],[-123.86824972301804,45.76587973845174],[-123.86560808535285,45.76534235652703],[-123.86299348280878,45.764743759239956],[-123.86040881235638,45.764084610025584],[-123.85785693750033,45.76336563940517],[-123.85534068508272,45.76258764416967],[-123.85286284212935,45.76175148648897],[-123.85042615274149,45.76085809294854],[-123.84803331503747,45.75990845351405],[-123.8456869781474,45.758903620425414],[-123.84338973926408,45.75784470702161],[-123.84114414075405,45.756732886497346],[-123.83895266733172,45.75556939059329],[-123.83681774329962,45.7543555082212],[-123.83474172985817,45.753092584025666],[-123.8327269224881,45.75178201688385],[-123.8307755484079,45.75042525834541],[-123.82888976410965,45.74902381101384],[-123.82707165297602,45.7475792268716],[-123.82532322298027,45.74609310555047],[-123.82364640447291,45.74456709254958],[-123.8220430480567,45.7430028774027],[-123.8205149225523,45.74140219179729],[-123.81906371305722,45.73976680764701],[-123.81769101909985,45.738098535120386],[-123.81639835289035,45.73639922062742],[-123.8151871376707,45.73467074476662],[-123.8140587061654,45.732915020234856],[-123.81301429913427,45.7311339897023],[-123.81205506402917,45.72932962365473],[-123.81118205375577,45.72750391820593],[-123.81039622554171,45.725658892882414],[-123.8096984399121,45.72379658838294],[-123.80908945977345,45.72191906431557],[-123.80856994960732,45.72002839691458],[-123.80814047477331,45.71812667673983],[-123.8078015009231,45.7162160063612],[-123.80755339352574,45.71429849803074],[-123.80739641750377,45.71237627134489],[-123.80733073698183,45.71045145089967],[-123.80735641514639,45.7085261639412],[-123.8074734142174,45.706602538014266],[-123.80768159553185,45.70468269861157],[-123.80798071973814,45.70276876682616],[-123.8083704471017,45.700862857009604],[-123.80885033792094,45.69896707443873],[-123.80941985305299,45.69708351299311],[-123.81007835454822,45.69521425284622],[-123.81082510639325,45.69336135817257],[-123.8116592753608,45.691526874873254],[-123.81257993196583,45.689712828322804],[-123.81358605152634,45.687921221139185],[-123.81467651532762,45.68615403097993],[-123.81585011188889,45.684413208366514],[-123.8171055383303,45.68270067453937],[-123.81844140183868,45.68101831934582],[-123.8198562212309,45.67936799916349],[-123.82134842861225,45.677751534860946],[-123.82291637112824,45.67617070979831],[-123.82455831280818,45.67462726786954],[-123.82627243649756,45.6731229115888],[-123.82805684587798,45.67165930022279],[-123.82990956757165,45.67023804797119],[-123.83182855332821,45.668860722196925],[-123.83381168229215,45.667528841708474],[-123.83585676334697,45.66624387509575],[-123.83796153753487,45.66500723912161],[-123.8401236805483,45.663820297170346],[-123.84234080529114,45.66268435775523],[-123.84461046450674,45.66160067308644],[-123.84693015346943,45.66057043770079],[-123.8492973127374,45.659594787155164],[-123.85170933096325,45.65867479678444],[-123.85416354775964,45.657811480525716],[-123.85665725661661,45.657005789809894],[-123.85918770786783,45.65625861252167],[-123.86175211170232,45.65557077202926],[-123.86434764121842,45.65494302628476],[-123.86697143551719,45.65437606699604],[-123.86962060283115,45.65387051887124],[-123.87229222368597,45.65342693893638],[-123.87498335409107,45.65304581592716],[-123.87769102875615,45.65272756975514],[-123.88041226432988,45.6524725510494],[-123.88314406265802,45.652281040773595],[-123.88588341405652,45.652153249919294],[-123.88862730059742,45.652089319275625],[-123.89137269940258,45.652089319275625],[-123.89411658594348,45.652153249919294],[-123.896855937342,45.652281040773595],[-123.89958773567014,45.6524725510494],[-123.90230897124387,45.65272756975514],[-123.90501664590894,45.65304581592716],[-123.90770777631403,45.65342693893638],[-123.91037939716887,45.65387051887124],[-123.91302856448283,45.65437606699604],[-123.91565235878159,45.65494302628476],[-123.9182478882977,45.65557077202926],[-123.92081229213217,45.65625861252167],[-123.9233427433834,45.657005789809894],[-123.92583645224038,45.657811480525716],[-123.92829066903676,45.65867479678444],[-123.93070268726261,45.659594787155164],[-123.93306984653059,45.66057043770079],[-123.93538953549326,45.66160067308644],[-123.93765919470886,45.66268435775523],[-123.9398763194517,45.663820297170346],[-123.94203846246513,45.66500723912161],[-123.94414323665303,45.66624387509575],[-123.94618831770786,45.667528841708474],[-123.94817144667181,45.668860722196925],[-123.95009043242837,45.67023804797119],[-123.95194315412202,45.67165930022279],[-123.95372756350244,45.6731229115888],[-123.95544168719182,45.67462726786954],[-123.95708362887176,45.67617070979831],[-123.95865157138775,45.677751534860946],[-123.9601437787691,45.67936799916348],[-123.96155859816132,45.68101831934581],[-123.96289446166972,45.68270067453937],[-123.96414988811111,45.684413208366514],[-123.9653234846724,45.68615403097993],[-123.96641394847366,45.687921221139185],[-123.96742006803417,45.68971282832282],[-123.9683407246392,45.691526874873254],[-123.96917489360675,45.69336135817257],[-123.96992164545179,45.69521425284622],[-123.97058014694703,45.69708351299311],[-123.97114966207906,45.69896707443873],[-123.97162955289832,45.700862857009604],[-123.97201928026188,45.70276876682615],[-123.97231840446817,45.70468269861157],[-123.97252658578262,45.706602538014266],[-123.97264358485361,45.7085261639412],[-123.97266926301818,45.71045145089967],[-123.97260358249623,45.71237627134489],[-123.97244660647428,45.71429849803074],[-123.97219849907691,45.7162160063612],[-123.97185952522669,45.71812667673982],[-123.97143005039268,45.72002839691457],[-123.97091054022655,45.72191906431557],[-123.97030156008792,45.72379658838294],[-123.9696037744583,45.725658892882414],[-123.96881794624423,45.72750391820594],[-123.96794493597085,45.72932962365473],[-123.96698570086575,45.73113398970229],[-123.9659412938346,45.73291502023485],[-123.96481286232931,45.73467074476662],[-123.96360164710967,45.73639922062742],[-123.96230898090015,45.73809853512039],[-123.96093628694278,45.73976680764701],[-123.9594850774477,45.741402191797285],[-123.9579569519433,45.7430028774027],[-123.95635359552709,45.74456709254958],[-123.95467677701973,45.74609310555047],[-123.95292834702398,45.7475792268716],[-123.95111023589035,45.74902381101385],[-123.94922445159212,45.75042525834541],[-123.94727307751191,45.75178201688385],[-123.94525827014184,45.753092584025666],[-123.9431822567004,45.7543555082212],[-123.94104733266828,45.75556939059329],[-123.93885585924596,45.75673288649735],[-123.93661026073592,45.75784470702162],[-123.9343130218526,45.758903620425414],[-123.93196668496255,45.75990845351404],[-123.92957384725851,45.76085809294854],[-123.92713715787065,45.76175148648897],[-123.92465931491728,45.76258764416967],[-123.92214306249969,45.76336563940519],[-123.91959118764363,45.764084610025584],[-123.91700651719124,45.764743759239956],[-123.91439191464715,45.76534235652703],[-123.91175027698196,45.76587973845174],[-123.9090845313971,45.766355309407025],[-123.90639763205479,45.76676854227978],[-123.90369255677663,45.767118979040326],[-123.90097230371481,45.76740623125466],[-123.89823988799996,45.767629980518926],[-123.89549833836902,45.76778997881556],[-123.89275069377753,45.76788604879066],[-123.89,45.76791808395255]],[[-123.76799999999999,46.26491302487669],[-123.76522455332078,46.26488099193417],[-123.76245218343308,46.26478492861659],[-123.75968596368536,46.264624941414056],[-123.75692896054383,46.264401207677736],[-123.75418423016139,46.26411397542132],[-123.75145481495855,46.263763563043625],[-123.74874374022006,46.263350358972346],[-123.74605401071173,46.26287482122946],[-123.74338860732078,46.26233747691896],[-123.7407504837241,46.261738921637225],[-123.7381425630878,46.26107981880691],[-123.73556773480239,46.260360898935126],[-123.73302885125663,46.25958295879658],[-123.73052872465482,46.25874686054289],[-123.72807012387997,46.25785353073888],[-123.72565577140726,46.256903959327104],[-123.72328834027122,46.25589919852177],[-123.72097045108976,46.25484036163314],[-123.71870466914879,46.25372862182428],[-123.71649350155036,46.2525652108009],[-123.71433939442822,46.251351417436396],[-123.71224473023284,46.25008858633324],[-123.71021182509017,46.24877811632272],[-123.70824292623631,46.24742145890447],[-123.70634020953099,46.24602011662776],[-123.70450577705309,46.244575641416304],[-123.70274165478023,46.24308963283853],[-123.70104979035564,46.24156373632538],[-123.69943205094417,46.23999964133741],[-123.69789022118006,46.23839907948368],[-123.69642600120876,46.236763822594185],[-123.69504100482457,46.23509568074825],[-123.6937367577065,46.2333965002611],[-123.69251469575397,46.23166816163077],[-123.69137616352398,46.229912577447855],[-123.69032241277179,46.228131690270295],[-123.68935460109596,46.22632747046575],[-123.68847379068987,46.22450191402385],[-123.6876809472004,46.222657040340906],[-123.68697693869504,46.22079488997944],[-123.68636253473849,46.21891752240527],[-123.68583840557973,46.217027013704424],[-123.68540512144978,46.21512545428254],[-123.68506315197149,46.21321494654948],[-123.68481286568117,46.21129760259145],[-123.68465452966281,46.20937554183345],[-123.68458830929504,46.207450888694574],[-123.68461426811075,46.20552577023862],[-123.6847323677696,46.203602313823026],[-123.68494246814284,46.20168264474815],[-123.68524432751089,46.199768883910046],[-123.6856376028725,46.19786314545885],[-123.68612185036531,46.1959675344658],[-123.68669652579722,46.19408414460108],[-123.68736098528774,46.1922150558252],[-123.68811448601836,46.19036233209654],[-123.68895618709095,46.188528019097234],[-123.68988515049335,46.186714141980424],[-123.6909003421704,46.18492270314056],[-123.69200063319947,46.183155680010074],[-123.69318480106926,46.18141502288408],[-123.69445153105949,46.179702652775845],[-123.69579941772069,46.178020459305245],[-123.69722696645194,46.17637029862242],[-123.69873259517482,46.174753991369215],[-123.70031463610138,46.17317332067992],[-123.70197133759453,46.17163003022429],[-123.70370086611824,46.17012582229426],[-123.70550130827579,46.16866235593681],[-123.70737067293341,46.16724124513486],[-123.70930689342707,46.16586405703811],[-123.71130782984989,46.16453231024574],[-123.71337127141788,46.16324747314284],[-123.71549493891095,46.16201096229233],[-123.71767648718689,46.160824140884],[-123.7199135077654,46.15968831724246],[-123.72220353147928,46.158604743395536],[-123.72454403119016,46.15757461370447],[-123.72693242456539,46.15659906355768],[-123.72936607691372,46.15567916812925],[-123.73184230407591,46.154815941203445],[-123.73435837536793,46.15401033406671],[-123.73691151657329,46.153263234468],[-123.73949891298096,46.15257546564885],[-123.74211771246632,46.15194778544406],[-123.74476502861145,46.15138088545395],[-123.74743794386136,46.150875390289],[-123.75013351271305,46.15043185688782],[-123.75284876493424,46.15005077390908],[-123.75558070880754,46.149732561198],[-123.75832633439778,46.14947756932806],[-123.76108261683794,46.14928607921832],[-123.76384651963131,46.14915830182676],[-123.76661499796538,46.149094377920086],[-123.76938500203461,46.149094377920086],[-123.77215348036866,46.14915830182676],[-123.77491738316205,46.14928607921832],[-123.77767366560221,46.14947756932806],[-123.78041929119244,46.149732561198],[-123.78315123506574,46.15005077390908],[-123.78586648728692,46.15043185688782],[-123.78856205613862,46.150875390289],[-123.79123497138853,46.15138088545396],[-123.79388228753366,46.15194778544406],[-123.79650108701902,46.15257546564885],[-123.7990884834267,46.153263234468],[-123.80164162463204,46.15401033406671],[-123.80415769592408,46.154815941203445],[-123.80663392308625,46.15567916812925],[-123.80906757543458,46.15659906355768],[-123.81145596880981,46.15757461370447],[-123.81379646852069,46.158604743395536],[-123.81608649223458,46.15968831724246],[-123.8183235128131,46.160824140884],[-123.82050506108904,46.16201096229233],[-123.82262872858209,46.16324747314284],[-123.8246921701501,46.16453231024574],[-123.82669310657292,46.16586405703811],[-123.82862932706657,46.16724124513486],[-123.8304986917242,46.16866235593681],[-123.83229913388175,46.17012582229426],[-123.83402866240546,46.17163003022429],[-123.8356853638986,46.17317332067992],[-123.83726740482516,46.174753991369215],[-123.83877303354805,46.17637029862242],[-123.8402005822793,46.17802045930524],[-123.84154846894049,46.179702652775845],[-123.84281519893071,46.18141502288408],[-123.84399936680052,46.183155680010074],[-123.84509965782959,46.18492270314055],[-123.84611484950662,46.18671414198043],[-123.84704381290904,46.18852801909724],[-123.84788551398162,46.19036233209654],[-123.84863901471225,46.1922150558252],[-123.84930347420276,46.19408414460108],[-123.84987814963468,46.1959675344658],[-123.85036239712748,46.19786314545885],[-123.85075567248909,46.199768883910046],[-123.85105753185715,46.20168264474815],[-123.85126763223039,46.203602313823026],[-123.85138573188922,46.20552577023862],[-123.85141169070494,46.207450888694574],[-123.85134547033718,46.20937554183345],[-123.8511871343188,46.21129760259145],[-123.85093684802848,46.21321494654948],[-123.85059487855021,46.21512545428254],[-123.85016159442026,46.21702701370442],[-123.84963746526148,46.21891752240527],[-123.84902306130495,46.22079488997944],[-123.84831905279957,46.222657040340906],[-123.8475262093101,46.224501914023854],[-123.84664539890402,46.226327470465755],[-123.8456775872282,46.228131690270295],[-123.844623836476,46.229912577447855],[-123.843485304246,46.23166816163077],[-123.84226324229348,46.2333965002611],[-123.84095899517541,46.23509568074825],[-123.83957399879121,46.236763822594185],[-123.83810977881991,46.23839907948368],[-123.8365679490558,46.23999964133741],[-123.83495020964435,46.24156373632538],[-123.83325834521976,46.24308963283853],[-123.8314942229469,46.244575641416304],[-123.82965979046898,46.24602011662776],[-123.82775707376368,46.24742145890446],[-123.82578817490982,46.24877811632271],[-123.82375526976713,46.25008858633324],[-123.82166060557176,46.251351417436396],[-123.81950649844963,46.2525652108009],[-123.8172953308512,46.25372862182428],[-123.81502954891022,46.25484036163315],[-123.81271165972876,46.25589919852176],[-123.81034422859273,46.25690395932711],[-123.80792987612001,46.25785353073888],[-123.80547127534516,46.258746860542885],[-123.80297114874335,46.25958295879658],[-123.80043226519759,46.260360898935126],[-123.79785743691217,46.26107981880691],[-123.79524951627589,46.26173892163722],[-123.79261139267919,46.26233747691896],[-123.78994598928824,46.26287482122946],[-123.78725625977992,46.263350358972346],[-123.78454518504144,46.263763563043625],[-123.78181576983859,46.26411397542132],[-123.77907103945616,46.26440120767774],[-123.77631403631462,46.264624941414056],[-123.7735478165669,46.2647849286166],[-123.77077544667921,46.26488099193417],[-123.76799999999999,46.26491302487669]]]});const Vre=[{layer:new ld({opacity:.8,refreshInterval:10,title:"Wave Height",url:"https://mapservices.weather.noaa.gov/geoserver/ndfd/waveh/ows?service=wms&version=1.3.0&request=GetCapabilities",visible:!1}),blur:!0,gradientScaleOptions:{description:"Feet",gradientInfos:[{label:1,value:"#e9feff 0%"},{label:2,value:"#c9f6f8 6.67%"},{label:3,value:"#92ecf0 13.33%"},{label:4,value:"#4cd5e2 20%"},{label:5,value:"#22b7c0 26.67%"},{label:7,value:"#2fb381 33.33%"},{label:10,value:"#90e86a 40%"},{label:12,value:"#dff27a 46.67%"},{label:15,value:"#ffd36b 53.33%"},{label:20,value:"#ffb45a 60%"},{label:25,value:"#ff7a40 66.67%"},{label:30,value:"#e03b2a 73.33%"},{label:35,value:"#b61a1a 80%"},{label:40,value:"#6e0d20 86.67%"},{label:55,value:"#300019 93.33%"},{label:60,value:"#1b0010 100%"}]}},{layer:new ld({opacity:.8,refreshInterval:15,title:"Base Reflectivity Radar",url:"https://opengeo.ncep.noaa.gov/geoserver/conus/conus_bref_qcd/ows?service=wms&version=1.3.0&request=GetCapabilities",visible:!1}),blur:!0,gradientScaleOptions:Lb,layerLoopControllerOptions:{}},{layer:new ld({opacity:.8,refreshInterval:15,title:"Composite Radar",url:"https://opengeo.ncep.noaa.gov/geoserver/conus/conus_cref_qcd/ows?service=wms&version=1.3.0&request=GetCapabilities",visible:!1}),blur:!0,gradientScaleOptions:Lb,layerLoopControllerOptions:{}},{layer:new ld({opacity:.8,title:"Sky",url:"https://mapservices.weather.noaa.gov/geoserver/ndfd/sky/ows?service=wms&version=1.3.0&request=GetCapabilities",visible:!1}),blur:!0,gradientScaleOptions:{description:"% Cloud Cover",gradientInfos:[{label:0,value:"#2aa6f6  0.00%"},{label:10,value:"#4fbaf2 11.11%"},{label:20,value:"#9fd9f9 22.22%"},{label:30,value:"#d9eefc 33.33%"},{label:40,value:"#f3f8fb 44.44%"},{label:50,value:"#e6e6e6 55.56%"},{label:60,value:"#c1c1c1 66.67%"},{label:70,value:"#9b9b9b 77.78%"},{label:80,value:"#6b6b6b 88.89%"},{label:90,value:"#222222 100.00%"}]}},{layer:new yP({sublayers:[{id:1,title:"Highs and Lows"},{id:2,title:"Fronts"}],title:"Weather Fronts",url:"https://mapservices.weather.noaa.gov/vector/rest/services/outlooks/natl_fcst_wx_chart/MapServer",visible:!1}),legend:!0}],Xhe=Object.freeze(Object.defineProperty({__proto__:null,applicationSettings:y9,stationInfos:Lre,view:bP,weatherAdvisoryColors:Nre,weatherAdvisoryFeatureLayer:Dre,weatherAdvisoryQueryPolygon:jre,weatherLayers:Vre},Symbol.toStringTag,{value:"Module"}));export{Mk as $,q as A,CN as B,OT as C,et as D,iE as E,Yre as F,$k as G,AG as H,Kpe as I,Xne as J,Ik as K,Zc as L,D as M,dl as N,Oie as O,vN as P,kie as Q,df as R,EQ as S,ot as T,Zs as U,wX as V,Fie as W,rX as X,$r as Y,uM as Z,se as _,cd as a,xr as a$,hX as a0,_G as a1,UG as a2,b3 as a3,OE as a4,uX as a5,CE as a6,RE as a7,bX as a8,yX as a9,ua as aA,ca as aB,Bee as aC,nce as aD,mce as aE,Xde as aF,rhe as aG,the as aH,Jde as aI,oh as aJ,xde as aK,Ede as aL,Rde as aM,d4 as aN,ne as aO,tp as aP,Fx as aQ,Mue as aR,IW as aS,tt as aT,Wse as aU,Gse as aV,Bse as aW,Ve as aX,vce as aY,Bc as aZ,GT as a_,eX as aa,iX as ab,Tl as ac,j2 as ad,aG as ae,vh as af,sL as ag,nL as ah,oL as ai,X_ as aj,gN as ak,kG as al,Pz as am,fk as an,X as ao,B as ap,Ho as aq,xh as ar,Yi as as,Rz as at,it as au,Ug as av,is as aw,Yo as ax,vt as ay,fv as az,Ql as b,YO as b$,s1 as b0,Bg as b1,Gg as b2,Ka as b3,Wg as b4,Vse as b5,Gr as b6,PT as b7,Ha as b8,hF as b9,IC as bA,MC as bB,EC as bC,oie as bD,aie as bE,gi as bF,sf as bG,Td as bH,uW as bI,Wle as bJ,fe as bK,Zle as bL,Yc as bM,gh as bN,Xa as bO,dT as bP,Jne as bQ,W2 as bR,xj as bS,le as bT,Hie as bU,vi as bV,Bl as bW,He as bX,g_ as bY,B1 as bZ,k1 as b_,wM as ba,_K as bb,_ie as bc,Cie as bd,nV as be,uV as bf,iV as bg,a$ as bh,gl as bi,o$ as bj,Zj as bk,Jj as bl,F as bm,ur as bn,RD as bo,Cde as bp,kde as bq,Fde as br,BK as bs,GK as bt,xt as bu,LK as bv,Vn as bw,AK as bx,iD as by,TC as bz,YY as c,khe as c$,Y as c0,xM as c1,M3 as c2,VW as c3,ct as c4,hhe as c5,ea as c6,Ih as c7,bm as c8,qse as c9,cC as cA,O2 as cB,C2 as cC,ra as cD,Wae as cE,Kq as cF,OK as cG,Ype as cH,Die as cI,K_ as cJ,BE as cK,H3 as cL,Sh as cM,qd as cN,lC as cO,che as cP,Y9 as cQ,uhe as cR,ZL as cS,Hoe as cT,jhe as cU,bse as cV,_l as cW,x_ as cX,$z as cY,Nj as cZ,Kne as c_,Roe as ca,Joe as cb,qs as cc,c_ as cd,ui as ce,mW as cf,R6 as cg,e9 as ch,Fe as ci,Os as cj,jf as ck,Tg as cl,fh as cm,die as cn,rM as co,tM as cp,fs as cq,_h as cr,Yd as cs,lM as ct,uG as cu,nM as cv,aM as cw,pC as cx,mg as cy,gg as cz,Kk as d,Gn as d$,aP as d0,oP as d1,Che as d2,Ohe as d3,Jg as d4,Bt as d5,Qj as d6,toe as d7,ci as d8,eoe as d9,zJ as dA,yG as dB,fG as dC,DG as dD,hr as dE,X6 as dF,RI as dG,EI as dH,pt as dI,nt as dJ,Tt as dK,yr as dL,li as dM,xie as dN,rF as dO,j as dP,Gt as dQ,yre as dR,Lee as dS,Hhe as dT,dg as dU,K as dV,tie as dW,eie as dX,Noe as dY,Yoe as dZ,W as d_,n$ as da,Bie as db,Fhe as dc,k2 as dd,JE as de,xG as df,aj as dg,X0 as dh,PX as di,Xo as dj,IG as dk,uN as dl,lG as dm,oM as dn,fS as dp,NG as dq,Uie as dr,y9 as ds,hI as dt,Y6 as du,K6 as dv,Fh as dw,mI as dx,dI as dy,C6 as dz,RY as e,of as e$,Bd as e0,Je as e1,SS as e2,ir as e3,Vi as e4,Xie as e5,Ac as e6,yse as e7,N4 as e8,Ose as e9,Fb as eA,DL as eB,lie as eC,Hc as eD,si as eE,wY as eF,zZ as eG,lpe as eH,IJ as eI,ape as eJ,MJ as eK,tde as eL,H as eM,Phe as eN,A1 as eO,Rf as eP,Ru as eQ,F2 as eR,Use as eS,$l as eT,aU as eU,ese as eV,Kie as eW,zse as eX,GA as eY,ase as eZ,dF as e_,q2 as ea,kg as eb,Fg as ec,Rse as ed,jse as ee,B2 as ef,ZF as eg,Lq as eh,ix as ei,y6 as ej,rpe as ek,CG as el,jne as em,Nne as en,mde as eo,$h as ep,$t as eq,Dne as er,bde as es,Ou as et,Qn as eu,Wo as ev,Vne as ew,Ja as ex,Hg as ey,Yde as ez,p4 as f,wte as f$,vue as f0,s9 as f1,i9 as f2,Uee as f3,Boe as f4,koe as f5,pse as f6,u6 as f7,pae as f8,pi as f9,xoe as fA,qV as fB,pS as fC,SA as fD,Wie as fE,pA as fF,EG as fG,fie as fH,V9 as fI,__ as fJ,S_ as fK,Qe as fL,Gie as fM,rN as fN,mx as fO,zV as fP,wG as fQ,vx as fR,oC as fS,hL as fT,aN as fU,dL as fV,G2 as fW,De as fX,_te as fY,zg as fZ,B5 as f_,Zre as fa,iL as fb,F4 as fc,npe as fd,MF as fe,n8 as ff,Ii as fg,OJ as fh,Et as fi,Ao as fj,On as fk,dpe as fl,cie as fm,RC as fn,mC as fo,O_ as fp,QQ as fq,zpe as fr,Lpe as fs,$d as ft,Fn as fu,JQ as fv,qpe as fw,Upe as fx,Oc as fy,$oe as fz,MQ as g,sse as g$,PG as g0,vG as g1,mX as g2,L$ as g3,Ooe as g4,Zg as g5,rU as g6,OD as g7,IY as g8,EY as g9,ES as gA,Hd as gB,$f as gC,yA as gD,OS as gE,C5 as gF,Vie as gG,Rue as gH,wl as gI,M6 as gJ,wr as gK,KH as gL,use as gM,AL as gN,hA as gO,Uu as gP,PS as gQ,Dt as gR,DT as gS,Og as gT,w as gU,PC as gV,yC as gW,Bs as gX,Jq as gY,d6 as gZ,fF as g_,RX as ga,rD as gb,eD as gc,KN as gd,A4 as ge,cx as gf,vF as gg,HF as gh,e8 as gi,Bhe as gj,bk as gk,Wd as gl,Cc as gm,_de as gn,$o as go,CW as gp,Kue as gq,SM as gr,sce as gs,f2 as gt,rce as gu,Pd as gv,ice as gw,m0 as gx,Zue as gy,Zae as gz,de as h,dee as h$,h4 as h0,N0 as h1,AA as h2,rL as h3,eL as h4,dG as h5,qG as h6,GG as h7,bA as h8,ex as h9,cue as hA,uue as hB,lue as hC,hue as hD,due as hE,aue as hF,oue as hG,fA as hH,nue as hI,_g as hJ,YC as hK,zk as hL,Ch as hM,qu as hN,kq as hO,oce as hP,ede as hQ,Xpe as hR,KI as hS,QI as hT,Th as hU,i6 as hV,ree as hW,xJ as hX,KX as hY,kJ as hZ,t9 as h_,aC as ha,hG as hb,iM as hc,Moe as hd,Toe as he,Xt as hf,Pg as hg,bf as hh,Eg as hi,GM as hj,bP as hk,Ee as hl,cse as hm,_se as hn,l8 as ho,sx as hp,CA as hq,Ope as hr,sne as hs,Xse as ht,xs as hu,P2 as hv,yI as hw,WN as hx,HN as hy,pue as hz,QY as i,z6 as i$,zf as i0,Qx as i1,GE as i2,MY as i3,BJ as i4,Fc as i5,vee as i6,o4 as i7,sb as i8,Ae as i9,eP as iA,sP as iB,rP as iC,Rhe as iD,wb as iE,Vhe as iF,ZC as iG,tk as iH,nP as iI,mh as iJ,mie as iK,gce as iL,BO as iM,Ete as iN,$te as iO,Ihe as iP,Lhe as iQ,xte as iR,Ahe as iS,gse as iT,Ite as iU,hse as iV,Ro as iW,Xi as iX,XY as iY,RJ as iZ,rY as i_,t5 as ia,Lh as ib,jE as ic,rp as id,VJ as ie,Fs as ig,o6 as ih,Coe as ii,Poe as ij,M8 as ik,rs as il,ah as im,V6 as io,GJ as ip,UJ as iq,qJ as ir,kU as is,FU as it,$6 as iu,sM as iv,Nie as iw,Fq as ix,Hue as iy,Dhe as iz,Qo as j,MW as j$,dY as j0,UE as j1,_e as j2,lt as j3,ke as j4,di as j5,pr as j6,hY as j7,gY as j8,qI as j9,cS as jA,xse as jB,Ag as jC,Jl as jD,dne as jE,hne as jF,yne as jG,Lse as jH,Fse as jI,Pse as jJ,lA as jK,kse as jL,DA as jM,ise as jN,pne as jO,$ae as jP,Qa as jQ,PF as jR,yv as jS,wF as jT,gF as jU,qee as jV,y2 as jW,yS as jX,_ue as jY,wue as jZ,bue as j_,A6 as ja,v2 as jb,II as jc,Ce as jd,SY as je,eY as jf,tY as jg,sY as jh,nY as ji,mY as jj,oY as jk,aY as jl,lY as jm,uY as jn,cY as jo,pY as jp,At as jq,Xre as jr,fP as js,Ws as jt,Hl as ju,Eie as jv,FS as jw,kS as jx,VA as jy,q1 as jz,ce as k,$H as k$,kpe as k0,Fpe as k1,Cpe as k2,WE as k3,WV as k4,qhe as k5,Jee as k6,zhe as k7,rte as k8,Q3 as k9,gue as kA,cN as kB,jV as kC,tN as kD,iN as kE,Sp as kF,vr as kG,$n as kH,Eo as kI,gt as kJ,cz as kK,jU as kL,rue as kM,zn as kN,yd as kO,fY as kP,qne as kQ,$Y as kR,Qpe as kS,ox as kT,Jpe as kU,Cd as kV,zo as kW,Va as kX,Gd as kY,cee as kZ,$_ as k_,pre as ka,_b as kb,vl as kc,rq as kd,HS as ke,ose as kf,ny as kg,rde as kh,yJ as ki,w2 as kj,V2 as kk,une as kl,lne as km,_S as kn,wS as ko,zF as kp,UF as kq,Vo as kr,KW as ks,eH as kt,tH as ku,Lne as kv,ks as kw,vde as kx,Gpe as ky,RU as kz,nde as l,$J as l$,dde as l0,Ls as l1,TK as l2,Zie as l3,Eoe as l4,Ioe as l5,wN as l6,mN as l7,bG as l8,fN as l9,GQ as lA,Npe as lB,mA as lC,pp as lD,Aie as lE,Vy as lF,zy as lG,_W as lH,vg as lI,Gte as lJ,Bx as lK,zne as lL,nK as lM,Pde as lN,Vue as lO,Sde as lP,Oue as lQ,jw as lR,oZ as lS,bpe as lT,WO as lU,F$ as lV,_pe as lW,ni as lX,Rn as lY,Vc as lZ,hJ as l_,p_ as la,HV as lb,RS as lc,zie as ld,Sg as le,gf as lf,wV as lg,Ux as lh,Sf as li,Eae as lj,Iae as lk,Aq as ll,D6 as lm,sQ as ln,Kre as lo,Mg as lp,Rl as lq,yt as lr,tf as ls,Que as lt,xH as lu,Yue as lv,Jue as lw,bM as lx,Zee as ly,x6 as lz,tL as m,KF as m$,TJ as m0,CJ as m1,WX as m2,tee as m3,dae as m4,hae as m5,yae as m6,KE as m7,Wa as m8,No as m9,Tae as mA,wy as mB,Tie as mC,Y0 as mD,yi as mE,LG as mF,QF as mG,W0 as mH,uie as mI,FF as mJ,$ie as mK,Nt as mL,Lt as mM,OX as mN,Koe as mO,tae as mP,Qoe as mQ,CX as mR,zee as mS,ZE as mT,lte as mU,hte as mV,Tte as mW,Ko as mX,k_ as mY,Cq as mZ,YF as m_,NT as ma,Kde as mb,que as mc,zue as md,eue as me,tue as mf,MT as mg,qT as mh,Gc as mi,As as mj,Cg as mk,mS as ml,wh as mm,$T as mn,kh as mo,ep as mp,Ue as mq,eQ as mr,XJ as ms,Se as mt,Io as mu,wQ as mv,jI as mw,as as mx,En as my,us as mz,JO as n,Yne as n$,z1 as n0,nse as n1,DF as n2,jF as n3,Yhe as n4,Cre as n5,Khe as n6,Dre as n7,jre as n8,Nre as n9,TT as nA,RM as nB,Lue as nC,Nue as nD,Due as nE,jue as nF,xue as nG,Tue as nH,$ue as nI,Yte as nJ,XW as nK,eC as nL,Mae as nM,iie as nN,rie as nO,$C as nP,Kse as nQ,n4 as nR,lhe as nS,Xle as nT,See as nU,ka as nV,spe as nW,sj as nX,Ane as nY,Bpe as nZ,EV as n_,Vre as na,Ore as nb,Lre as nc,qH as nd,Di as ne,t4 as nf,iG as ng,LT as nh,jT as ni,hU as nj,Qae as nk,SU as nl,Yae as nm,BL as nn,Iie as no,pie as np,jn as nq,mr as nr,Rie as ns,pW as nt,mF as nu,nie as nv,sie as nw,Qie as nx,Xz as ny,Dq as nz,IQ as o,Gue as o$,Gne as o0,Hne as o1,Bne as o2,Zne as o3,Wne as o4,Qne as o5,ar as o6,yce as o7,Wpe as o8,Une as o9,NC as oA,LC as oB,hie as oC,hP as oD,kte as oE,Ote as oF,ihe as oG,she as oH,Nde as oI,Ide as oJ,Wde as oK,jde as oL,ZK as oM,Dde as oN,k5 as oO,Pue as oP,HK as oQ,QK as oR,Eue as oS,Ode as oT,DW as oU,Iue as oV,iue as oW,sue as oX,kue as oY,Fue as oZ,Uue as o_,cF as oa,zde as ob,tse as oc,_F as od,lse as oe,rae as of,PU as og,Ade as oh,ehe as oi,Lde as oj,Qde as ok,Ai as ol,nhe as om,fse as on,Sue as oo,Bde as op,Gde as oq,Hde as or,Zde as os,zw as ot,qw as ou,Uw as ov,Ude as ow,qde as ox,Ri as oy,Cue as oz,Jc as p,FN as p$,yue as p0,Bue as p1,Wue as p2,TW as p3,PW as p4,qM as p5,Aue as p6,fW as p7,gA as p8,mL as p9,r6 as pA,BH as pB,ece as pC,tce as pD,jie as pE,Xue as pF,fce as pG,dce as pH,hce as pI,pce as pJ,cce as pK,QW as pL,PM as pM,mue as pN,fue as pO,HW as pP,Kle as pQ,Cse as pR,Cn as pS,xf as pT,Sse as pU,_r as pV,zG as pW,Uoe as pX,Goe as pY,_A as pZ,AN as p_,rA as pa,wse as pb,Cae as pc,TN as pd,bS as pe,QS as pf,Ed as pg,$N as ph,fne as pi,jK as pj,vse as pk,Nhe as pl,mD as pm,hv as pn,LA as po,oV as pp,Z2 as pq,Do as pr,yV as ps,Xd as pt,th as pu,Uc as pv,lV as pw,WJ as px,_V as py,SV as pz,XA as q,woe as q$,JS as q0,FE as q1,lj as q2,oN as q3,sN as q4,nN as q5,_N as q6,kN as q7,PE as q8,ene as q9,VQ as qA,Zoe as qB,Loe as qC,Voe as qD,Doe as qE,aae as qF,oae as qG,Foe as qH,dse as qI,Woe as qJ,QD as qK,VU as qL,JT as qM,_1 as qN,x8 as qO,moe as qP,ss as qQ,Ape as qR,Ut as qS,O5 as qT,Vae as qU,joe as qV,KL as qW,Mde as qX,Fu as qY,GV as qZ,Lie as q_,Rq as qa,dN as qb,Jae as qc,Hae as qd,yde as qe,cA as qf,$se as qg,Ise as qh,Nse as qi,Tse as qj,Ese as qk,Dse as ql,jA as qm,fde as qn,gde as qo,EX as qp,jL as qq,rse as qr,Eh as qs,Ph as qt,Rh as qu,ppe as qv,gq as qw,jae as qx,vQ as qy,Vl as qz,d_ as r,Aoe as r0,qie as r1,BF as r2,UV as r3,ine as r4,zoe as r5,rne as r6,tne as r7,mse as r8,Vg as r9,qoe as ra,lN as rb,VV as rc,bN as rd,Hse as re,Jse as rf,wce as rg,Ppe as rh,Aee as ri,Zhe as rj,Qhe as rk,Xhe as rl,B6 as s,Mee as t,sde as u,n6 as v,Pie as w,gx as x,cpe as y,upe as z};
