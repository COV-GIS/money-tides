import{aE as d,aH as v,ae as c,aI as x,aJ as E,m as u,b as y}from"./money-tides-jsxFactory-B9QQWpgY.js";import"./money-tides-config-BVnrMf5g.js";import{aE as D}from"./money-tides-app-config-bLoUqPNA.js";import"./index-Bqzh3_vi.js";import"./money-tides-index-Bz5uSspo.js";import"./money-tides-runtime-BTGwkf2p.js";import"./money-tides-ReactiveMap-C247ptA2.js";import"./money-tides-messageBundle-BWfZ7ME-.js";import"./money-tides-index-BSQMl5Dg.js";var I=Object.defineProperty,J=Object.getOwnPropertyDescriptor,m=(t,r,i,a)=>{for(var e=a>1?void 0:a?J(r,i):r,s=t.length-1,n;s>=0;s--)(n=t[s])&&(e=(a?n(r,i,e):n(e))||e);return a&&e&&I(r,i,e),e};let l=class extends d{constructor(t){super(t),this.duration={minutes:15},this.speed=400,this.initialize()}async initialize(){await v(()=>this.layer);const t=this.layer;await t.load(),this.loop(),t.refresh&&this.addHandles(t.on("refresh",()=>{clearInterval(this.interval),this.timeExtent=null,this.loop()}))}loop(){const{duration:t,fullTimeExtent:r,speed:i}=this;if(!r)return;const a=r.start,e=r.end;if(!a||!e)return;const s=c.fromJSDate(a),n=c.fromJSDate(e),p=x.fromDateTimes(s,n).splitBy(E.fromObject(t));let o=0;this.interval=setInterval(()=>{p.length===o+1&&(o=0);const{end:f,start:h}=p[o];if(!f||!h){clearInterval(this.interval),this.timeExtent=null;return}this.timeExtent=new D({start:h.toJSDate(),end:f.toJSDate()}),o++},i)}};m([u({aliasOf:"layer.timeInfo.fullTimeExtent"})],l.prototype,"fullTimeExtent",2);m([u({aliasOf:"layer.timeExtent"})],l.prototype,"timeExtent",2);l=m([y("LayerLoopController")],l);export{l as default};
