import{f0 as c,d9 as o,a3 as h,af as m,s as n,$ as p,a0 as v,b as u,f1 as S,v as s,x as i,y as x}from"./index-CVc0DCf1.js";import{l as w}from"./c-MultiOriginJSONSupport-BR5aIa7N.js";import{o as g}from"./c-APIKeyMixin-FWAOAt6k.js";import{l as E}from"./c-ArcGISService-BaR_UJ9e.js";import{s as R}from"./c-CustomParametersMixin-DRSbj8VC.js";import{b as T,y as L,m as $}from"./c-OperationalLayer-BnV_cGr6.js";import{j as b}from"./c-PortalLayer-KeCTuDxJ.js";import{R as C,E as f}from"./c-tiles3DUtils-BLVOZYM3.js";import{j as y,w as O,R as j}from"./c-elevationInfoUtils-H33s5vqC.js";import"./c-portalItemUtils-BXLo9C98.js";let t=class extends E(T(b(c(w(R(g(S))))))){constructor(e){super(e),this.operationalLayerType="GaussianSplatLayer",this.type="gaussian-splat",this.opacity=1,this.minScale=0,this.maxScale=0,this.url=null,this.rootTilesetJSON=null,this.fullExtent=new o(-180,-90,180,90,this.spatialReference),this.spatialReference=new h({wkid:4326,vcsWkid:115700}),this.esriCrsSpatialReference=null,this.esriCrsFullExtent=null}get supportedSpatialReferences(){return this.initialized&&this.esriCrsSpatialReference?[this.spatialReference,this.esriCrsSpatialReference]:[this.spatialReference]}get fullExtents(){return this.initialized&&this.esriCrsFullExtent?[this.fullExtent,this.esriCrsFullExtent]:[this.fullExtent]}set elevationInfo(e){e!=null&&e.mode!=="absolute-height"||this._set("elevationInfo",e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const a=e!=null?e.signal:null;if(!m("enable-feature:gaussianSplatLayer"))throw new n("GaussianSplatLayer-init:not-supported","This layer is currently not supported.");try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:r=>{if(r.typeKeywords?.includes("GaussianSplat"))return!0;throw new n("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service"})}},e)}catch(r){p(r)}this.url&&await v(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:"json",signal:a}).then(l=>{this.rootTilesetJSON=l.data;const d=C(this.rootTilesetJSON);this.fullExtent=f(this.rootTilesetJSON,!1),this.spatialReference=this.fullExtent.spatialReference,d&&(this.esriCrsFullExtent=f(this.rootTilesetJSON,!0),this.esriCrsSpatialReference=this.esriCrsFullExtent.spatialReference)},l=>{p(l)})}_validateElevationInfo(e){const a="Gaussian Splat layers";y(u.getLogger(this),O(a,"absolute-height",e)),y(u.getLogger(this),j(a,e))}};s([i({type:["GaussianSplatLayer"]})],t.prototype,"operationalLayerType",void 0),s([i({readOnly:!0})],t.prototype,"type",void 0),s([i({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],t.prototype,"opacity",void 0),s([i({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"minScale",void 0),s([i({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"maxScale",void 0),s([i(L)],t.prototype,"url",void 0),s([i({type:o})],t.prototype,"fullExtent",void 0),s([i({type:h})],t.prototype,"spatialReference",void 0),s([i({readOnly:!0})],t.prototype,"supportedSpatialReferences",null),s([i({type:[o]})],t.prototype,"fullExtents",null),s([i({type:["show","hide"]})],t.prototype,"listMode",void 0),s([i($)],t.prototype,"elevationInfo",null),t=s([x("esri.layers.GaussianSplatLayer")],t);const K=t;export{K as default};
