const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/money-tides-AdvisoryItem-CYY9ti5I.js","assets/money-tides-jsxFactory-_7dcBPp3.js","assets/money-tides-config-BVnrMf5g.js","assets/index-CLUlm2VH.js","assets/index-CEPnQygF.css","assets/money-tides-index-Bz5uSspo.js","assets/money-tides-runtime-BTGwkf2p.js","assets/runtime-OCMtRbrJ.css","assets/money-tides-app-config-B3LoTnI_.js","assets/money-tides-ReactiveMap-DCxoVmf-.js","assets/money-tides-messageBundle-Cp0r_61-.js","assets/money-tides-index-BSQMl5Dg.js","assets/AdvisoryItem-BSo-hN4l.css"])))=>i.map(i=>d[i]);
import{_ as v}from"./index-CLUlm2VH.js";import{aE as r,m as p,c as u}from"./money-tides-jsxFactory-_7dcBPp3.js";import"./money-tides-config-BVnrMf5g.js";import{P as f}from"./money-tides-PanelBase-mzsUtRg3.js";import{af as h,e9 as l,gw as g,gx as y,e7 as _,gy as A}from"./money-tides-app-config-B3LoTnI_.js";import"./money-tides-index-Bz5uSspo.js";import"./money-tides-runtime-BTGwkf2p.js";import"./money-tides-ReactiveMap-DCxoVmf-.js";import"./money-tides-messageBundle-Cp0r_61-.js";import"./money-tides-index-BSQMl5Dg.js";var E=Object.defineProperty,w=Object.getOwnPropertyDescriptor,d=(i,t,e,a)=>{for(var s=a>1?void 0:a?w(t,e):t,o=i.length-1,n;o>=0;o--)(n=i[o])&&(s=(a?n(t,e,s):n(s))||s);return a&&s&&E(t,e,s),s};const m="advisories-panel",P={content:`${m}_content`};let c=class extends f{constructor(){super(...arguments),this.displayGraphic=null,this.itemElements=new h,this.items=new h,this.loading=!1,this.state="no-advisories"}postInitialize(){this.getAdvisories()}hide(){this.visible=!1,this.displayGraphic&&(l.graphics.remove(this.displayGraphic),this.displayGraphic=null),this.items.forEach(i=>{i.hidden=!0})}async getAdvisories(){const{itemElements:i,items:t}=this;this.loading=!0,i.removeAll(),t.removeAll();try{const e=(await g.queryFeatures({geometry:y,outFields:["*"],orderByFields:["expiration DESC"],returnGeometry:!0})).features;if(!e.length){this.state="no-advisories",this.loading=!1;return}e.forEach(a=>{this.itemElements.add(r("calcite-list-item",{afterCreate:async s=>{const o=new(await v(async()=>{const{default:n}=await import("./money-tides-AdvisoryItem-CYY9ti5I.js");return{default:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))).default({container:s,feature:a});this.items.add(o)}}))}),this.state="advisories",this.loading=!1}catch(e){console.log("advisories query",e),this.state="error",this.loading=!1}}listChangeEvent(i){this.displayGraphic&&(l.graphics.remove(this.displayGraphic),this.displayGraphic=null),this.items.forEach(e=>{e.hidden=!0});const t=this.items.find(e=>e.container===i.selectedItems[0]);if(t){const{feature:e}=t;t.hidden=!1,this.displayGraphic=e,l.graphics.add(e,0),l.goTo(e)}}render(){const{scale:i}=_,{itemElements:t,loading:e,state:a}=this,s=a==="no-advisories"?r("calcite-notice",{icon:"check",kind:"success",open:!0,scale:i},r("div",{slot:"message"},"No weather advisories"),r("calcite-link",{slot:"link",onclick:this.getAdvisories.bind(this)},"Refresh")):a==="advisories"?r("calcite-list",{"selection-appearance":"border","selection-mode":"single",scale:i,afterCreate:o=>{o.addEventListener("calciteListChange",this.listChangeEvent.bind(this,o))}},t.toArray()):r("calcite-notice",{icon:A.error,kind:"danger",open:!0,scale:i},r("div",{slot:"message"},"An error occurred loading weather advisories"),r("calcite-link",{slot:"link",onclick:this.getAdvisories.bind(this)},"Try again"));return r("calcite-panel",{class:this.classes(m,a!=="advisories"?P.content:""),heading:"Advisories",loading:e,scale:i},this.closeAction(),s)}};d([p()],c.prototype,"loading",2);d([p()],c.prototype,"state",2);c=d([u("AdvisoriesPanel")],c);export{c as default};
